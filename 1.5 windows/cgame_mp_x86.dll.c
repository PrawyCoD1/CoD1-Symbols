/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <math.h>
#include <defs.h>

#include <stdarg.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

int __stdcall sub_30001000(HWND hWnd, int); // idb
// int __usercall sub_300011D0@<eax>(_BYTE *a1@<eax>);
int sub_30001220(char *Format, ...);
// int __usercall sub_300012D0@<eax>(char *a1@<esi>);
// int __usercall sub_30001450@<eax>(int a1@<eax>, char *a2@<edi>, int a3);
// char *__usercall sub_300014D0@<eax>(_DWORD *a1@<ebx>, const char *a2@<edi>, int a3, unsigned int a4);
int sub_30001530();
int __thiscall sub_30001620(_DWORD *this);
int sub_300016C0();
int __cdecl sub_30001940(char **a1, int a2, int a3, _DWORD *a4);
// int __usercall sub_30001CF0@<eax>(_DWORD *a1@<esi>, char **a2);
char *__cdecl sub_30001EB0(char **a1, int *a2, int a3);
char *__cdecl sub_30002480(int a1, int a2, int a3);
// int __usercall sub_30002F00@<eax>(int *a1@<ecx>, int a2@<esi>);
// int *__usercall sub_30002F60@<eax>(_DWORD *a1@<eax>, int a2@<ecx>);
// int __usercall sub_30002FB0@<eax>(int result@<eax>, _DWORD *a2@<edx>, int a3@<ecx>, int a4@<edi>, int a5, int a6, int a7);
// int __usercall sub_300030C0@<eax>(__int16 *a1@<eax>, _DWORD *a2, int a3, int a4, int a5);
int __cdecl sub_300031F0(_DWORD *a1, int a2, int a3, int a4);
double __cdecl sub_30003460(_DWORD); // weak
// int __usercall sub_300034D0@<eax>(int a1@<edx>, int a2@<ecx>, int a3@<esi>);
int __cdecl sub_300035B0(_BYTE *a1);
// BOOL __usercall sub_300037E0@<eax>(int a1@<eax>);
// BOOL __usercall sub_30003820@<eax>(int a1@<eax>);
// int __usercall sub_30003870@<eax>(_DWORD *a1@<esi>, _DWORD *a2, int a3, int a4);
// int __usercall sub_30003E40@<eax>(int a1@<eax>, _DWORD *a2@<ecx>, int a3@<edi>, int a4);
// void __usercall sub_300040B0(_DWORD *a1@<esi>);
// void __usercall sub_30004120(_DWORD *a1@<ecx>, float *a2@<esi>, float a3, float a4, float a5, float a6);
// void __usercall sub_30004330(int a1@<edi>, int a2);
// int __usercall sub_300045D0@<eax>(_DWORD *a1@<esi>, int a2);
// float __usercall sub_30004960@<eax>(float *a1@<eax>, int a2@<ecx>, int a3@<ebx>);
// void __usercall sub_30005040(float *a1@<edx>, float *a2@<ecx>, float a3);
// void __usercall sub_30005100(float *a1@<edx>, float *a2@<ecx>, float a3);
// int __usercall sub_300051C0@<eax>(int a1@<edx>, int a2, int a3);
// int __usercall sub_300052F0@<eax>(_DWORD *a1@<ebx>, int a2, _DWORD *a3);
// int __usercall sub_30005380@<eax>(int a1@<eax>, int a2@<ebx>, int a3);
int sub_30005590();
int sub_30005620();
// BOOL __usercall sub_300057B0@<eax>(int a1@<eax>, int a2@<ecx>, float *a3@<esi>);
// BOOL __usercall sub_30005840@<eax>(_DWORD *a1@<eax>, int a2@<ecx>, int a3);
// void __usercall sub_30005970(int a1@<eax>, int a2@<ecx>, int a3@<ebx>);
// int __usercall sub_30005F90@<eax>(int result@<eax>, int a2@<ecx>, unsigned __int8 a3);
// int __usercall sub_30005FD0@<eax>(int a1@<eax>, int a2@<edi>, int a3@<esi>);
int __cdecl sub_300067B0(int, int, float, float, float, int, int, int, int, int, int, int, int, int, float); // idb
// char __usercall sub_30007950@<al>(int a1@<eax>, int a2@<ebx>, int a3, int a4, int a5, int a6, int a7);
int __fastcall sub_300079E0(int a1);
// void __usercall sub_30007A20(int a1@<edi>);
// void __usercall sub_30007A60(float *a1@<edx>, float *a2@<ecx>, float *a3@<esi>, float a4);
double sub_30007AE0();
void sub_30007B40();
// void __usercall sub_30007CB0(float *a1@<edx>, float a2, float a3);
// double __usercall sub_30007D70@<st0>(char *a1@<eax>);
double __cdecl sub_30007E40(_BYTE *a1);
int sub_300082A0();
int __cdecl sub_300082D0(float); // idb
int sub_30008360();
void sub_30008570();
void sub_300086A0();
// void __usercall sub_30008810(float a1@<ebp>);
int sub_30008C70();
int sub_30008D10();
int sub_30008EF0();
int __cdecl sub_30009220(char a1);
int sub_30009270();
int sub_30009290();
int sub_300092B0();
void sub_300092F0();
// int __usercall sub_30009720@<eax>(int a1@<eax>);
// void __usercall sub_30009A50(int a1@<edi>, int a2@<esi>);
int sub_30009D80();
// int __usercall sub_30009EA0@<eax>(int a1@<eax>, int a2@<ecx>, int a3);
// double __usercall sub_30009ED0@<st0>(int a1@<eax>, float *a2@<ebx>, int a3@<edi>);
// double __usercall sub_30009F60@<st0>(int a1@<eax>, int a2@<ecx>);
void sub_3000A060();
void sub_3000A600();
// char __usercall sub_3000AF10@<al>(char a1@<al>, int a2@<edx>, char a3@<cl>);
double sub_3000B110(void); // weak
void sub_3000B150();
char sub_3000B6C0();
int sub_3000B850();
int sub_3000B8E0();
// void __usercall sub_3000B960(int a1@<eax>, int a2@<esi>, void (__cdecl *a3)(float *, float *, int *, int *, float *, int, int));
// int __usercall sub_3000BBE0@<eax>(int a1@<eax>, float a2, int a3);
// void __usercall sub_3000BCC0(int a1@<eax>, int a2, void (__cdecl *a3)(float *, float *, int *, int *, float *, int, int));
// void __usercall sub_3000C710(double a1@<st0>);
int sub_3000CA00();
int sub_3000CA20();
int *sub_3000CA80();
int sub_3000CDD0();
// void __usercall sub_3000D1B0(int a1@<edi>, float a2);
// int *__usercall sub_3000D7B0@<eax>(float a1@<esi>);
int __cdecl sub_3000D870(float); // idb
int __cdecl sub_3000D8A0(_DWORD *a1, _DWORD *a2);
BOOL __cdecl PM_SlideMove(int a1);
// void __usercall sub_3000E240(int a1@<eax>);
int __cdecl sub_3000EA30(int a1, char *String1, int ArgList);
// char *__usercall sub_3000EC80@<eax>(char **a1@<ebx>, const char *a2@<edi>);
char *__cdecl sub_3000ECD0(char **a1, const char *a2);
// _DWORD *__usercall sub_3000ECF0@<eax>(int a1@<eax>, int a2, int a3);
int __cdecl sub_3000EDF0(int a1, int a2);
void sub_3000F0F0();
char **sub_3000F300();
int sub_3000F460();
int sub_3000F6F0();
int sub_3000F8B0();
int sub_3000FB40();
int sub_3000FCF0();
// int __usercall sub_30010000@<eax>(const char *a1@<edi>);
// int __usercall sub_300101D0@<eax>(int a1@<eax>, int a2@<ecx>);
// int __usercall sub_30010330@<eax>(int a1@<eax>, int a2@<edi>, int a3@<esi>);
// int __usercall sub_300103A0@<eax>(int a1@<edi>, int a2, int a3);
int __fastcall sub_30010460(int a1, int a2);
// int __usercall sub_300104C0@<eax>(int result@<eax>, int a2@<ecx>, int a3@<esi>);
// int __usercall sub_300105C0@<eax>(int a1@<eax>, int a2@<esi>);
// int __usercall sub_30010700@<eax>(int a1@<eax>, int a2@<ebx>);
// double __usercall sub_30010830@<st0>(int a1@<eax>, int a2@<edx>, int a3@<ecx>);
int sub_300109A0();
void sub_30010AA0();
int sub_30010C00();
int __fastcall sub_30010DC0(int a1);
int __cdecl sub_30010E10(int a1);
int __fastcall sub_30010E40(int a1, int a2);
char sub_30010E80();
int __cdecl sub_30010ED0(int a1);
int sub_30011160();
int sub_30011270();
void __cdecl sub_300113A0(int a1, int a2);
int sub_300115F0();
int sub_300118A0();
int sub_300118F0();
int sub_30011970();
BOOL __cdecl sub_30011AC0(int a1);
int *sub_30011D20();
void sub_30011F30();
int sub_300120F0();
void sub_300121C0();
int __cdecl sub_300122C0(int a1);
int __cdecl sub_30012300(int a1);
int sub_300124C0();
int sub_30012590();
void sub_30012600();
int sub_30012740();
int sub_300127C0();
int __cdecl sub_30012820(int a1);
int *sub_300129A0();
int sub_30012BF0();
int sub_30012D40();
// long double __usercall sub_30012F00@<st0>(_DWORD *a1@<eax>, float a2, float a3, float a4);
// long double __usercall sub_30012F80@<st0>(_DWORD *a1@<eax>, float a2, float a3, float a4);
void __cdecl sub_30012FD0(float *a1);
// void __usercall sub_30013410(float *a1@<ecx>, float *a2@<edi>);
// void __usercall sub_30013520(float *a1@<eax>, float *a2@<ebx>);
void __fastcall sub_300136F0(float *a1, float *a2);
// int __usercall sub_30013820@<eax>(float *a1@<edx>, float *a2@<ecx>, float a3, float a4, float a5, float a6, float a7, float a8);
float *__cdecl sub_30013970(float *a1, float *a2);
// void __usercall sub_30013B00(int a1@<eax>, float *a2@<esi>);
void __fastcall sub_30013BC0(float *a1, float *a2);
// void __usercall sub_30013CD0(float *a1@<ebx>, float *a2@<esi>);
// int __usercall sub_30013E00@<eax>(int a1@<eax>, float *a2@<edi>, int a3@<esi>, int a4, float a5, int a6);
// int __usercall sub_30014280@<eax>(int a1@<eax>, float *a2@<ebx>, float *a3@<edi>);
int sub_30014440(); // weak
int sub_30014450();
int nullsub_1(); // weak
int nullsub_2(); // weak
int sub_30014480();
int sub_30014490();
int sub_300144B0();
int sub_30014510();
int sub_300145B0();
int __cdecl sub_300145F0(float *a1, int a2, int *a3);
int __thiscall sub_30014C70(void *this);
int sub_30014CD0();
int sub_30014D00();
int sub_30014D30();
int sub_30014D70();
int sub_30014D90();
int sub_30014DE0();
int sub_30014E30();
int sub_30014F20();
int sub_30015010();
int sub_30015080();
int sub_300150F0();
int sub_30015190();
int sub_300151C0();
int sub_30015270();
int sub_30015320();
int sub_30015380();
// int __usercall sub_30015820@<eax>(int result@<eax>, float a2, float a3, float a4, float a5);
int sub_300158E0();
double __cdecl sub_30015A70(float a1);
double __cdecl CG_DrawFPS(float a1);
void sub_30016150();
int sub_30016190();
// int *__usercall sub_30016460@<eax>(int *result@<eax>);
void sub_300164B0();
void sub_300165E0();
// char __usercall sub_30016A70@<al>(int a1@<eax>, int a2, float a3, float a4);
int sub_30016BD0();
// void __usercall sub_30016E00(float *a1@<edi>, float *a2@<esi>);
int __thiscall sub_30016FB0(float *this);
double sub_30017070();
void sub_300176A0();
void sub_300177F0();
unsigned __int16 sub_30017EE0();
int sub_30017FA0();
int sub_30018000();
void sub_300181B0();
int sub_300182E0();
int sub_30018380();
int sub_30018500();
void sub_30018590();
int sub_300186B0();
int *sub_30018910();
int *sub_300189D0();
int sub_30018A80();
int sub_30018B10();
int sub_30018BA0();
int sub_30018DA0();
// int __usercall sub_30018DD0@<eax>(int a1@<esi>);
void __cdecl sub_30018E60(float a1, int a2, int a3);
void sub_30018F90();
int sub_30019100();
int sub_300191B0();
int sub_300195C0();
// int __usercall sub_30019710@<eax>(double a1@<st0>);
int sub_30019740();
int sub_300198E0();
// void __usercall sub_300199E0(double a1@<st0>);
int __cdecl sub_30019B10(int a1);
int __cdecl sub_30019EE0();
// int __usercall sub_30019FD0@<eax>(int a1@<edx>, char a2@<bl>);
int __cdecl sub_3001A260();
void __cdecl sub_3001A2E0(float a1, float a2, float a3, float a4, float a5);
void __cdecl sub_3001A380(float a1, float a2, float a3, float a4, float a5);
int __cdecl sub_3001A420(float a1, float a2, float a3, float a4, float a5);
void __cdecl sub_3001A4A0(float a1, float a2, float a3, float a4, int a5);
int __cdecl sub_3001A500(float, float, float, float, float); // idb
// int __usercall sub_3001A6C0@<eax>(float *a1@<edx>, float a2, float a3, int a4, float a5);
int __cdecl sub_3001A810();
int __cdecl sub_3001A8E0();
int __cdecl sub_3001A9C0();
// void __usercall sub_3001AAA0(int a1@<eax>, int a2, int a3, int a4, int a5);
void sub_3001AB30();
int *__fastcall sub_3001ABD0(int a1, int a2);
void sub_3001AD70();
void sub_3001B0A0();
// int __usercall sub_3001B340@<eax>(float *a1@<eax>, float *a2@<edx>);
// unsigned int __usercall sub_3001B3C0@<eax>(float *a1@<eax>, int a2, float a3);
// char *__usercall sub_3001B550@<eax>(int a1@<eax>, float a2, float a3, float a4);
// int __usercall sub_3001B6A0@<eax>(_BYTE *a1@<eax>, const char *ArgList, int a3);
int __cdecl sub_3001B710(const char *a1, _BYTE *a2, int a3, int a4, int a5);
int __cdecl sub_3001B960(char *String1, char *String2); // idb
int sub_3001B980();
int __fastcall sub_3001BC40(float *a1, _DWORD *a2);
// int __usercall sub_3001BCF0@<eax>(int a1@<ebx>);
// int __usercall sub_3001BF50@<eax>(int *a1@<ebx>);
// int __usercall sub_3001C0C0@<eax>(int a1@<eax>);
int sub_3001C220();
// int __usercall sub_3001C2B0@<eax>(int a1@<esi>);
// int __usercall sub_3001C560@<eax>(int a1@<ebx>);
// int __usercall sub_3001C670@<eax>(int a1@<ebx>);
int __cdecl sub_3001C840(int a1);
int __cdecl sub_3001C990(int a1);
int __fastcall sub_3001CB00(int a1, _DWORD *a2);
// int __usercall sub_3001CBC0@<eax>(_DWORD *a1@<esi>);
// float *__usercall sub_3001CD20@<eax>(int a1@<eax>, float *a2@<edi>, float *a3@<esi>, int a4, int a5, float *a6);
void sub_3001CE70();
// void __usercall sub_3001CED0(int a1@<ecx>, int a2@<edi>);
int sub_3001CF80();
// int __usercall sub_3001D320@<eax>(int a1@<ecx>, float *a2@<ebx>, _DWORD *a3);
int __cdecl sub_3001D4F0(int a1);
int __cdecl sub_3001D540(int a1, int a2);
int __cdecl sub_3001D610(int a1);
int __cdecl sub_3001D770(int a1);
// int __usercall sub_3001E0C0@<eax>(int a1@<edi>);
// void __usercall sub_3001E1A0(int a1@<eax>);
// void __usercall sub_3001E310(int a1@<esi>);
void __cdecl sub_3001E490(int a1);
// int __usercall sub_3001E5A0@<eax>(int a1@<esi>, int a2);
// int __usercall sub_3001E6E0@<eax>(int a1@<eax>, int a2@<ecx>);
// int __usercall sub_3001E740@<eax>(int a1@<esi>, int a2);
int __cdecl sub_3001E780(int a1);
// int __usercall sub_3001E7E0@<eax>(int a1@<edi>);
// void __usercall sub_3001E870(int *a1@<eax>);
int __cdecl sub_3001E940(int a1);
// int __usercall sub_3001ED00@<eax>(int a1@<eax>);
int __fastcall sub_3001EDA0(int a1, int a2);
int __thiscall sub_3001EE00(void *this);
// void __usercall sub_3001EE90(float *a1@<eax>, int a2@<ecx>, int a3@<edi>, int a4);
// void __usercall sub_3001FAA0(int a1@<eax>, int a2@<ecx>);
// void __usercall sub_3001FCA0(int a1@<esi>);
// void __usercall sub_3001FDA0(int a1@<esi>);
// double __usercall sub_3001FEA0@<st0>(int a1@<esi>);
int __thiscall sub_3001FF00(_DWORD *this);
int __thiscall sub_3001FF70(_DWORD *this);
int __thiscall sub_3001FFF0(_DWORD *this);
// double __usercall sub_300200B0@<st0>(int *a1@<eax>, int a2@<esi>);
// double __usercall sub_30020120@<st0>(int *a1@<eax>, int a2@<esi>);
// double __usercall sub_300201E0@<st0>(int *a1@<eax>, int a2@<ecx>);
// double __usercall sub_30020240@<st0>(int *a1@<eax>, int a2@<esi>);
// double __usercall sub_300202B0@<st0>(int *a1@<eax>, int a2@<esi>);
// int __usercall sub_30020320@<eax>(int a1@<edx>, int a2@<edi>, int a3);
// int __usercall sub_300203B0@<eax>(int a1@<eax>, int a2, int a3);
int sub_30020720();
int __fastcall sub_300207B0(float *a1, int *a2);
int __fastcall sub_30020980(float *a1, int *a2);
// int __usercall sub_30020A70@<eax>(int *a1@<esi>);
int sub_30020B70(); // weak
unsigned int __fastcall sub_30020BB0(int a1, unsigned int a2);
int __thiscall sub_30020C10(void *this);
int __cdecl sub_30020CA0(int a1);
_DWORD *sub_30021160();
_DWORD *sub_300211F0();
// int __usercall sub_30021280@<eax>(int a1@<eax>);
// int __usercall sub_30021300@<eax>(int a1@<esi>);
// _DWORD *__usercall sub_30021370@<eax>(int a1@<esi>);
void sub_30021450();
// float *__usercall sub_30021500@<eax>(float *result@<eax>, _DWORD *a2@<edx>, int a3@<ecx>);
// float *__usercall sub_300215C0@<eax>(int a1@<eax>, float *a2@<edx>, _DWORD *a3@<ecx>);
int __cdecl vmMain(int ArgList, int a2, int a3, int a4, float a5, float a6, float a7, float a8, float a9, int a10, float a11, int a12, int a13);
int sub_300218C0();
int sub_300219B0();
int sub_300219D0(char *Format, ...);
int sub_30021A30(char *Format, ...);
int sub_30021A90();
int sub_30021AB0();
int sub_30021B10(int a1, char *Format, ...);
int Com_Printf(char *Format, ...);
int sub_30021BD0(char *Format, ...);
char *sub_30021C40();
// int __usercall sub_30021C60@<eax>(const char *a1@<ebx>, int a2@<edi>);
int sub_30021CE0();
int sub_30022080();
_BYTE *__cdecl sub_30022DE0(int ArgList);
int sub_30022E10();
int sub_30022E80();
int sub_30022EA0();
int sub_30022ED0();
int __cdecl sub_30022F90(int a1);
// int __usercall sub_30023540@<eax>(int a1@<esi>);
// int __usercall sub_30023630@<eax>(int a1@<eax>, char **a2);
// int __usercall sub_30023700@<eax>(const char *a1@<edi>, int a2);
int sub_300238A0(); // weak
int __cdecl sub_300238B0(float); // idb
const char *sub_30023930();
int sub_30023940();
int nullsub_3(); // weak
int sub_30023960();
int __cdecl sub_300239D0(int a1);
int __cdecl sub_30023A50();
int sub_30023A90();
int __cdecl sub_30023AB0();
int sub_30023B00();
// int *__usercall sub_30023B20@<eax>(const char *a1@<eax>, const char *a2@<ecx>);
int *__cdecl sub_30023C30(const char *a1);
// const char *__usercall sub_30023C40@<eax>(int a1@<eax>);
int sub_30023C90();
int sub_30023E80();
int sub_300240F0();
char *sub_300241F0();
// char *__usercall sub_30024330@<eax>(int a1@<edx>, int a2, int a3);
int sub_30024790();
char *sub_300247E0();
_DWORD *sub_30024870();
int __cdecl sub_30024900(int, int, float, float, float, float, float, int, float, int, int); // idb
int sub_30024C90();
// int __usercall sub_30024F50@<eax>(float *a1@<esi>, int a2, int a3);
int *sub_30024FA0();
// int *__usercall sub_300250C0@<eax>(float *a1@<esi>, int a2, int a3, int a4);
// int *__usercall sub_30025200@<eax>(float *a1@<esi>);
int __cdecl sub_300252C0(float *a1, int a2);
// int __usercall sub_30025B70@<eax>(float *a1@<eax>);
// int __usercall sub_30025C30@<eax>(float *a1@<edi>, float *a2@<esi>, int a3);
int sub_30025EC0();
// int __usercall sub_30025F30@<eax>(int a1@<eax>, int a2, unsigned int a3);
int __cdecl sub_30025FB0(int a1);
// int __usercall sub_30026090@<eax>(float *a1@<eax>, int a2, int *a3);
// int __usercall sub_30026490@<eax>(float *a1@<eax>, int a2);
int __cdecl sub_30026560(float *a1, int a2, int a3);
// char *__usercall sub_30026E20@<eax>(int a1@<edi>, int a2);
// int __usercall sub_300270B0@<eax>(int a1@<ecx>, float *a2@<ebx>);
int *sub_300271D0();
// int *__usercall sub_30027260@<eax>(int a1@<eax>);
int *sub_300273A0();
int *sub_30027430();
int __cdecl sub_300274B0(int a1, float a2);
int sub_300276D0();
int sub_300277B0();
int __thiscall sub_30027890(float *this);
double __cdecl sub_30027900(int a1, int a2);
BOOL __cdecl sub_30027AB0(int a1);
int sub_30027B20();
int sub_30027B80();
int sub_30027BE0();
char sub_30027C70();
int sub_30027D40();
int sub_30027DB0();
int sub_30027E30();
// int __usercall sub_30027E90@<eax>(float *a1@<eax>, int a2);
unsigned __int8 __cdecl sub_30027F20(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, float a12, int a13, int a14);
// int __usercall sub_300284F0@<eax>(int a1@<eax>, int a2@<ecx>);
int nullsub_4(); // weak
_DWORD *__cdecl sub_30028600(_DWORD *a1);
// int __usercall sub_30028680@<eax>(int a1@<esi>, int a2, int a3, int a4);
// int __usercall sub_30028840@<eax>(_DWORD *a1@<eax>);
// int __usercall sub_300289A0@<eax>(float *a1@<eax>, int a2@<esi>);
void sub_30028B20();
void __cdecl sub_30028D20(int a1);
int __thiscall sub_30029580(int this);
int __cdecl sub_30029770(int a1);
char __cdecl sub_30029930(int a1);
int sub_30029AB0();
int __cdecl sub_30029B60(float a1, int a2, float a3);
int sub_30029DE0();
// int __usercall sub_30029F50@<eax>(int a1@<ecx>, int a2@<ebx>, int a3);
// int __usercall sub_3002A070@<eax>(int a1@<eax>, int a2@<esi>);
int sub_3002A0C0();
char __cdecl sub_3002A160(int a1, int a2, int a3, int a4, int a5, int a6, int a7, float *a8);
// char __usercall sub_3002A3A0@<al>(int a1@<eax>, int a2@<ecx>, int a3@<ebx>, float *a4, int a5, int a6, int a7);
char __cdecl sub_3002A420(float *a1, int a2, int a3, int a4, int a5, int a6, int a7);
int __cdecl sub_3002A4B0(int a1, int a2, int a3);
char *__cdecl sub_3002A540(int a1);
// int __usercall sub_3002A710@<eax>(_DWORD *a1@<edi>);
int sub_3002A7A0();
int sub_3002A860();
void sub_3002ADE0();
int __cdecl sub_3002AF40(float); // idb
int __cdecl sub_3002B670(int, float); // idb
double __cdecl sub_3002BAE0(float a1, float a2);
// double __usercall sub_3002BBD0@<st0>(_DWORD *a1@<eax>);
// int __usercall sub_3002BCA0@<eax>(_DWORD *a1@<esi>, int a2);
int __cdecl sub_3002BE00(int, float, float, float); // idb
// double __usercall sub_3002C170@<st0>(int *a1@<edx>, int a2, float a3, int a4, float a5, int a6);
double __cdecl sub_3002C560(int a1, float a2, int a3, float a4, int a5);
// void __usercall sub_3002C600(int a1@<ebx>, float a2, int a3);
// int __usercall sub_3002C8A0@<eax>(double a1@<st0>, float a2);
// int __usercall sub_3002CAE0@<eax>(double a1@<st0>);
int sub_3002CBB0();
int sub_3002CBE0();
int sub_3002CDB0();
int sub_3002D040();
int sub_3002D0F0();
int sub_3002D180();
int sub_3002D4F0();
void sub_3002DB40();
void __fastcall sub_3002DE50(_BYTE *a1);
int __cdecl sub_3002DF90(int a1);
int __cdecl sub_3002E110(const char *a1, int a2, int a3);
// int __usercall sub_3002E8D0@<eax>(int a1@<ebx>, char *a2, _DWORD *a3, _DWORD *a4, _DWORD *a5);
// int __usercall sub_3002E9B0@<eax>(_DWORD *a1@<eax>);
int sub_3002EB10();
// int *__usercall sub_3002EBB0@<eax>(const char *a1@<eax>);
int __cdecl sub_3002ECB0(int, int, int, int, char *Source); // idb
int __cdecl sub_3002EE80(int a1);
int sub_3002F020();
int sub_3002F250();
int sub_3002F3A0();
// char __usercall sub_3002F440@<al>(_BYTE *a1@<esi>);
// char __usercall sub_3002F470@<al>(_BYTE *a1@<edi>);
int sub_3002F4C0();
int sub_3002F5D0();
int sub_3002F660();
// int __usercall sub_3002FC70@<eax>(int a1@<esi>);
// void __usercall sub_3002FD20(float *a1@<edi>, float *a2@<esi>, float a3);
void sub_3002FE90();
// int __usercall sub_3002FFF0@<eax>(int a1@<eax>, int a2@<ecx>, int a3@<esi>);
int __cdecl sub_30030080(const char *a1);
// int __usercall sub_30030160@<eax>(const char *a1@<eax>);
// int __usercall sub_30030220@<eax>(int a1@<esi>);
int sub_30030880();
int sub_30030900();
int sub_30030960();
// int __usercall sub_300309C0@<eax>(_DWORD *a1@<eax>, int a2, int a3);
int __cdecl sub_30030CA0(int a1, int a2);
// float *__usercall sub_30030DA0@<eax>(float *result@<eax>, int a2@<edx>, int a3);
// int __usercall sub_30030EC0@<eax>(int a1@<eax>, _DWORD *a2@<ebx>, float *a3@<edi>);
char __cdecl sub_30030F30(int *a1);
// int __usercall sub_30031140@<eax>(int a1@<eax>);
int sub_300311A0();
int __cdecl sub_30031380(_DWORD *a1);
int *sub_30031930();
int *sub_300319E0();
int (__cdecl *__cdecl dllEntry(int (__cdecl *a1)(_DWORD)))(_DWORD);
int sub_30031C40();
int sub_30031C80();
int sub_30031CB0(); // weak
int sub_30032050();
int sub_300322A0();
int sub_300324D0();
int __cdecl sub_300324F0(int, int, int, int); // weak
double __cdecl sub_30032510(_DWORD, _DWORD, _DWORD, _DWORD); // weak
double __cdecl sub_30032540(_DWORD, _DWORD); // weak
int sub_30032560();
int sub_300325C0();
int sub_30032620();
int sub_30032670(); // weak
int sub_30032680();
int sub_300326D0();
int sub_30032770();
int sub_300327C0(); // weak
int sub_30032800(); // weak
double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int sub_300328A0();
double __cdecl sub_30032930(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int sub_300329D0(); // weak
int sub_30032BB0();
int sub_30032C10();
int sub_30032E80();
int sub_30032F00();
int sub_30032F90();
int sub_30032FE0();
int sub_30033060();
double sub_300330D0();
double sub_300330F0();
int sub_300332A0();
int sub_300334C0();
void sub_300334E0();
int sub_30033710();
int sub_300337E0();
int sub_30033800(); // weak
int sub_30033820();
int sub_30033A30();
int sub_30033AA0();
int sub_30033AD0();
int sub_30033BB0();
void sub_30033CB0();
int sub_30033FD0();
void sub_30034020();
void sub_30034180();
double sub_300344C0();
int sub_30034690();
int sub_300348C0();
// int __usercall sub_30034BB0@<eax>(float a1@<esi>);
const char *sub_30034E40();
int sub_30035130();
// int __usercall sub_30035180@<eax>(int a1@<edx>, int a2@<ecx>, int a3, float a4, int a5, int a6);
// int __usercall sub_30035A70@<eax>(int a1@<eax>);
int sub_30035B00();
int sub_30035BF0();
// int __usercall sub_30035CE0@<eax>(int a1@<edi>, int a2);
int sub_30036080();
// float *__usercall sub_30036160@<eax>(float *a1@<ebx>, float *a2@<edi>, float *a3);
// float *__usercall sub_30036250@<eax>(int a1@<eax>, int a2@<edx>, float *a3@<ecx>);
int __cdecl sub_30036690(int a1);
int __cdecl sub_300377B0(char *Source); // idb
// int __usercall sub_30037940@<eax>(char *a1@<ebx>);
int sub_300379B0();
// int __usercall sub_300379F0@<eax>(int result@<eax>);
int sub_30037AC0();
int sub_30037B60();
// void __usercall sub_30037C30(float *a1@<esi>);
// float __usercall sub_30038140@<eax>(float *a1@<edi>);
int __cdecl sub_300381B0(float *a1);
void __thiscall sub_30038270(float *this);
// void __usercall sub_30038300(int a1@<eax>);
int sub_30038540();
// int __usercall sub_30038600@<eax>(int a1@<eax>, int a2@<edx>);
int __cdecl sub_30038660(int a1, _DWORD *a2, int a3);
int __cdecl sub_30038B60(int a1);
int __fastcall sub_30038FB0(int a1);
void sub_30039120();
BOOL __fastcall sub_30039890(int a1);
// int __usercall sub_300398B0@<eax>(int result@<eax>, int a2@<ecx>);
int sub_30039920();
int sub_300399D0();
int sub_30039A40();
int sub_30039C00();
// int __usercall sub_30039CC0@<eax>(int a1@<eax>, int a2@<edi>);
// int __usercall sub_30039D40@<eax>(int a1@<eax>, int a2);
int __cdecl sub_30039E80(int a1, int a2);
int __cdecl sub_3003A160(int a1);
// int __usercall sub_3003A2A0@<eax>(_DWORD *a1@<esi>, int a2, int a3);
// void __usercall sub_3003A510(float *a1@<eax>, float *a2@<ebx>);
// int __usercall sub_3003A680@<eax>(float *a1@<eax>, float *a2@<ecx>);
// int __usercall sub_3003A810@<eax>(float *a1@<ebx>, float *a2@<edi>);
// int __usercall sub_3003AA90@<eax>(float *a1@<eax>, float *a2@<ecx>, int a3);
// int __usercall sub_3003AB90@<eax>(int a1@<ebx>, int a2@<edi>, const char *ArgList);
// void __usercall sub_3003ACE0(int a1@<eax>, float *a2@<esi>, int a3, const char *ArgList);
// void __usercall sub_3003AD90(int a1@<eax>, float *a2@<ecx>, int a3@<ebx>, int a4);
// void __usercall sub_3003AE40(float *a1@<ecx>, int a2@<edi>, int a3);
// int __usercall sub_3003B0C0@<eax>(int a1@<eax>, _DWORD *a2@<ecx>);
// double __usercall sub_3003B280@<st0>(float *a1@<eax>, float *a2@<ecx>);
// float *__usercall sub_3003B380@<eax>(float *result@<eax>, float *a2@<edx>, float *a3@<ecx>);
// double __usercall sub_3003B3D0@<st0>(float *a1@<esi>);
// double __usercall sub_3003B460@<st0>(float *a1@<esi>);
// double __usercall sub_3003B600@<st0>(float *a1@<edi>, float *a2@<esi>);
// int __usercall sub_3003B770@<eax>(float *a1@<eax>, int a2, int a3, float a4);
double __thiscall sub_3003BA90(float *this);
double __thiscall sub_3003BB00(float *this);
// double __usercall sub_3003BB50@<st0>(float *a1@<esi>);
// double __usercall sub_3003BC10@<st0>(int a1@<esi>);
// int __usercall sub_3003BCB0@<eax>(float *a1@<edi>, float *a2@<esi>);
// int __usercall sub_3003BDD0@<eax>(float *a1@<edi>, float *a2@<esi>);
// float *__usercall sub_3003BEA0@<eax>(float *a1@<edx>, float *a2@<ebx>, float *a3@<edi>, float *a4@<esi>);
// int __usercall sub_3003C010@<eax>(int a1@<edx>, int a2@<esi>, float a3);
// void __usercall sub_3003C080(float *a1@<edx>, float *a2@<ebx>);
// float *__usercall sub_3003C250@<eax>(float *result@<eax>, float *a2@<edx>, float *a3@<ecx>);
// float *__usercall sub_3003C580@<eax>(float *result@<eax>, float *a2@<edx>, float *a3@<ecx>);
// float *__usercall sub_3003C7E0@<eax>(float *result@<eax>, int a2@<edx>, float *a3@<ecx>);
// int __usercall sub_3003D320@<eax>(float *a1@<edx>, float a2);
// float *__usercall sub_3003D390@<eax>(float *result@<eax>, float *a2@<edx>, float *a3@<ecx>);
// double __usercall sub_3003D5D0@<st0>(float *a1@<eax>);
// double __usercall sub_3003D700@<st0>(float *a1@<eax>);
double __cdecl sub_3003D9B0(float a1, float a2, float a3);
double __cdecl sub_3003DA20(float a1, float a2);
double __cdecl sub_3003DAE0(float a1);
double __cdecl sub_3003DB10(float a1);
double __cdecl sub_3003DB70(float a1);
double __cdecl sub_3003DBF0(float a1);
// float *__usercall sub_3003DE80@<eax>(float *a1@<eax>, float *a2@<edx>);
// int __usercall sub_3003DED0@<eax>(int a1@<edx>, float a2);
// void __usercall sub_3003DF20(float *a1@<eax>, int a2@<ecx>);
// float *__usercall sub_3003E3D0@<eax>(float *result@<eax>, float *a2@<edx>, float *a3@<ecx>);
// int *__usercall sub_3003EA00@<eax>(int *a1@<eax>, int a2@<ebx>, int *a3);
int __cdecl sub_3003ED60(float, int); // idb
double __cdecl sub_3003EDE0(float a1, float a2);
char *__cdecl sub_3003EE60(char *Source);
int sub_3003EF80(char *Format, ...);
int sub_3003F000(char *Format, ...);
char *sub_3003F080();
// char *__usercall sub_3003F140@<eax>(char *result@<eax>, _DWORD *a2@<esi>);
int __fastcall sub_3003F180(_BYTE *a1);
// char *__usercall sub_3003F220@<eax>(int a1@<edx>, char **a2@<edi>);
char *__cdecl sub_3003F2E0(char **a1, int a2);
char *__thiscall sub_3003F650(char **this);
char *__thiscall sub_3003F690(char **this);
unsigned __int8 __cdecl sub_3003F6E0(const char *a1, int a2);
// const char *__usercall sub_3003F9E0@<eax>(char **a1@<eax>, int a2@<ebx>, int a3);
// const char *__usercall sub_3003FAB0@<eax>(int a1@<eax>, char **a2@<ecx>, int a3, int a4);
int __cdecl sub_3003FE30(__int16 a1);
__int16 __cdecl sub_3003FE50(__int16 a1);
int __cdecl sub_3003FE60(int a1);
int __cdecl sub_3003FE90(int a1);
int __cdecl sub_3003FEA0(int a1, int a2);
__int64 __cdecl sub_3003FF00(__int64 a1);
double __cdecl sub_3003FF10(unsigned int a1);
double __cdecl sub_3003FF40(float a1);
// BOOL __usercall sub_30040090@<eax>(int a1@<eax>);
// int __usercall sub_30040170@<eax>(int a1@<eax>, char *a2@<edx>, char *a3@<ecx>);
// int __usercall sub_300401D0@<eax>(int a1@<eax>, char *a2@<edx>, char *a3@<ecx>);
// _BYTE *__usercall sub_30040230@<eax>(_BYTE *a1@<edi>);
// char *__usercall sub_30040290@<eax>(signed int a1@<eax>, const char *a2@<ebx>, char *Source);
int __fastcall sub_300402E0(int a1, _BYTE *a2);
// char *__usercall sub_30040310@<eax>(char *result@<eax>);
// int __usercall sub_30040370@<eax>(char *a1@<edi>, size_t a2@<esi>, const char *Format, ...);
int sub_300403F0(const char *, ...); // weak
// int __usercall sub_300404B0@<eax>(const char *a1@<ecx>, char *a2@<ebx>);
// int __usercall sub_30040600@<eax>(const char *a1@<ecx>, const char *a2@<ebx>);
// int __usercall sub_30040710@<eax>(const char *a1@<ecx>, const char *a2@<ebx>);
// int __usercall sub_30040C20@<eax>(int a1@<edx>, int a2, int a3, const char *a4, int a5, int (__cdecl *a6)(int, const char *, _DWORD), void (__cdecl *a7)(int, const char *));
// void __usercall sub_30040DF0(float *a1@<edx>, float a2, float a3, float a4, float a5);
// char __usercall sub_300410A0@<al>(int a1@<eax>);
// int __usercall sub_300410D0@<eax>(int a1@<eax>, int a2@<ebx>, unsigned int a3@<edi>, char *a4@<esi>, float a5);
// int *__usercall sub_30041780@<eax>(const void *a1@<eax>);
char *__fastcall sub_300417D0(int a1, int a2);
// int __usercall sub_30041840@<eax>(_BYTE *a1@<eax>);
char *__cdecl sub_30041880(char *a1);
int sub_30041A30();
int sub_30041B20(int a1, char *Format, ...);
// void __usercall sub_30041BB0(int a1@<eax>, int a2@<edx>, float *a3@<ecx>, float a4);
int __cdecl sub_30041C10(float *a1);
// int __usercall sub_30041C80@<eax>(float *a1@<ebx>, int a2@<edi>);
// int __usercall sub_30041D40@<eax>(char **a1@<edi>, int a2);
// int __usercall sub_30041DC0@<eax>(int a1@<eax>, int a2);
int __cdecl sub_30041E00(int *a1);
// int __usercall sub_30041E70@<eax>(_DWORD *a1@<ebx>, int a2@<edi>);
// BOOL __usercall sub_30041F30@<eax>(float *a1@<eax>);
// int __usercall sub_30041FD0@<eax>(char **a1@<eax>, char **a2@<edi>);
// int __usercall sub_300420D0@<eax>(char **a1@<esi>);
int __cdecl sub_300421D0(_BYTE *a1);
int __cdecl sub_30042250(int a1, char **a2);
// int __usercall sub_30042460@<eax>(int a1@<eax>, _DWORD *a2@<esi>);
// int __usercall sub_30042540@<eax>(_DWORD *a1@<edi>, float a2, float a3, float a4, float a5);
// int __usercall sub_300429B0@<eax>(int result@<eax>, float a2, float a3);
// int __usercall sub_30042A00@<eax>(int result@<eax>);
void __thiscall sub_30042A60(char *this);
// int __usercall sub_30042B30@<eax>(int a1@<ebx>);
BOOL __cdecl sub_30042BB0(float a1, float a2);
// int __usercall sub_30042C00@<eax>(int a1@<eax>, char *a2@<ebx>);
// int __usercall sub_30042D20@<eax>(char *a1@<ebx>, int a2, int a3);
int __cdecl sub_30042E70(int a1, char **a2);
int __cdecl sub_30042F40(int a1, char **a2);
int __cdecl sub_30042F60(int a1, char **a2);
int __cdecl sub_30042FA0(int a1, char *a2);
int __cdecl sub_30043000(float *a1);
int __cdecl sub_30043050(int a1, char **a2);
// int __usercall sub_30043180@<eax>(char *a1@<eax>, int a2, int a3);
// int __usercall sub_30043200@<eax>(char *a1@<eax>, int a2@<edi>, int a3);
// int __usercall sub_300432A0@<eax>(int a1@<ebx>);
// char *__usercall sub_30043350@<eax>(char *a1@<ebx>);
// int __usercall sub_300433A0@<eax>(int result@<eax>);
// int __usercall sub_300433E0@<eax>(int a1@<ebx>);
int __cdecl sub_300434D0(int a1, char **a2);
int __cdecl sub_30043500(int a1, char **a2);
int __cdecl sub_30043530(int a1, char **a2);
int __cdecl sub_30043560(int a1, char **a2);
char *__cdecl sub_30043590(int a1, char **a2);
int __cdecl sub_300435C0(int a1, char **a2);
int __cdecl sub_30043650(int a1, char **a2);
char *__cdecl sub_300436E0(int a1, char **a2);
char *__cdecl sub_30043760(int a1, char **a2);
char *__cdecl sub_30043790(int a1, char **a2);
char *__cdecl sub_300437D0(int a1, char **a2);
// int __usercall sub_30043810@<eax>(char *a1@<eax>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, float a12);
int __cdecl sub_300439C0(int a1, char **a2);
// int __usercall sub_30043A90@<eax>(char *a1@<eax>, int a2@<edi>, float a3, float a4, int a5, int a6, int a7);
int __cdecl sub_30043B80(int a1, char **a2);
int __cdecl sub_30043C30(int a1, char **a2);
int __cdecl sub_30043CB0(int a1, char **a2);
int __cdecl sub_30043CE0(int a1, char **a2);
int __cdecl sub_30043D10(int a1, char **a2);
int __cdecl sub_30043D60(int a1, char **a2);
int __cdecl sub_30043DA0(int a1, char **a2);
int __cdecl sub_30043E70(int a1, char **a2);
void __cdecl sub_30043F40(int a1, char **a2);
int __cdecl sub_30043FE0(int a1, char **a2);
void __cdecl sub_30044010(int a1, char **a2);
int sub_300440B0();
void __cdecl sub_300440C0(int a1, char **a2);
// int __usercall sub_30044180@<eax>(char *a1@<edx>, int a2);
BOOL __cdecl sub_30044280(int a1);
// int __usercall sub_300443D0@<eax>(int a1@<esi>, float a2, float a3);
int __thiscall sub_300445C0(_DWORD *this);
// int __usercall sub_30044660@<eax>(int a1@<edi>);
// int __usercall sub_300446D0@<eax>(int a1@<eax>);
// int __usercall sub_300447A0@<eax>(int a1@<esi>);
double __thiscall sub_30044840(void *this);
// int __usercall sub_30044910@<eax>(float *a1@<esi>, float a2, float a3);
// int __usercall sub_30044990@<eax>(_DWORD *a1@<esi>, float a2, float a3);
// float *__usercall sub_30044BE0@<eax>(float *result@<eax>, float a2, float a3);
// void __usercall sub_30044D30(int a1@<esi>, float a2, float a3);
// unsigned int __usercall sub_30044E60@<eax>(int a1@<esi>);
// int __usercall sub_30044F60@<eax>(int a1@<eax>, int a2@<ecx>, int a3, int a4);
// int __usercall sub_300454B0@<eax>(int a1@<edx>, int a2@<esi>);
// int __usercall sub_30045590@<eax>(int a1@<eax>);
int __cdecl sub_300455C0(_DWORD *a1);
int __cdecl sub_300456C0(_DWORD *a1);
// int __usercall sub_300457D0@<eax>(int a1@<ecx>, int a2@<edi>);
// void __usercall sub_30045960(_DWORD *a1@<edi>);
BOOL __cdecl sub_30045A20(int a1);
int __cdecl sub_30046050(_DWORD *a1);
void __cdecl sub_300460C0(char *Format);
int __cdecl sub_30046290(char *Format); // idb
// unsigned int __usercall sub_30046380@<eax>(float *a1@<eax>, int a2@<edi>);
// int __usercall sub_300464C0@<eax>(int a1@<esi>);
// int __usercall sub_300465E0@<eax>(int a1@<eax>, int a2@<ecx>, int a3@<ebx>);
// int __usercall sub_300466E0@<eax>(int result@<eax>);
// int __usercall sub_30046700@<eax>(int a1@<edi>);
// int __usercall sub_300467E0@<eax>(int a1@<edi>);
// int __usercall sub_30046910@<eax>(_DWORD *a1@<ebx>);
// int __usercall sub_300469E0@<eax>(_DWORD *a1@<eax>);
// _DWORD *__usercall sub_30046B00@<eax>(_DWORD *result@<eax>, int a2, int a3);
// int *__usercall sub_30046C70@<eax>(int a1@<eax>);
void __cdecl sub_30046CF0(_DWORD *a1, int a2, int a3);
// int __usercall sub_30047260@<eax>(int *a1@<ebx>, int a2@<esi>, int *a3, int a4);
// _BYTE *__usercall sub_300474E0@<eax>(int a1@<esi>, int a2);
// int __usercall sub_30047740@<eax>(int a1@<esi>, char *a2, int a3);
// int __usercall sub_300479D0@<eax>(int a1@<esi>, char *Source, int a3);
int __thiscall sub_30047C50(_DWORD *this);
int __cdecl sub_30047D90(int a1);
// int __usercall sub_300480F0@<eax>(int a1@<esi>);
// int __usercall sub_300482A0@<eax>(int a1@<esi>);
// int __usercall sub_30048420@<eax>(_DWORD *a1@<ebx>, char *a2);
int sub_300484D0();
int sub_30048510();
// int __usercall sub_30048590@<eax>(char *a1@<edi>);
// char *__usercall sub_300485E0@<eax>(char *a1@<eax>);
// BOOL __usercall sub_30048750@<eax>(char *a1@<edi>);
// int __usercall sub_300487A0@<eax>(_DWORD *a1@<eax>, _DWORD *a2@<ecx>, char *a3);
// int __usercall sub_30048880@<eax>(_DWORD *a1@<eax>, char *a2@<ecx>);
// int __usercall sub_300489C0@<eax>(int a1@<esi>);
// int __usercall sub_30048B50@<eax>(int a1@<esi>);
// int __usercall sub_30048D70@<eax>(int a1@<eax>, int a2@<ecx>, int a3);
int __thiscall sub_30048FA0(float *this);
// int __usercall sub_30049430@<eax>(unsigned __int64 a1@<edx:eax>);
// void __usercall sub_30049B40(float *a1@<esi>);
int __thiscall sub_30049F80(int this);
// int __usercall sub_3004A3E0@<eax>(_DWORD *a1@<edx>, int a2);
int sub_3004A4A0();
int __cdecl sub_3004A690(int, int, float); // idb
// char *__usercall sub_3004A990@<eax>(_DWORD *a1@<eax>, int a2@<ecx>, int a3);
// int __usercall sub_3004AAA0@<eax>(char *a1@<esi>);
BOOL __cdecl sub_3004AB50(int a1);
int __cdecl sub_3004AB70(int a1);
BOOL __cdecl sub_3004ABB0(int a1);
int __cdecl sub_3004ABD0(int a1);
BOOL __cdecl sub_3004AC70(int a1);
int __cdecl sub_3004AC90(_DWORD *a1, int a2);
int __cdecl sub_3004ACF0(int a1);
BOOL __cdecl sub_3004AD30(_DWORD *a1, int a2);
BOOL __cdecl sub_3004ADB0(_DWORD *a1, int a2);
BOOL __cdecl sub_3004AE10(_DWORD *a1, int a2);
BOOL __cdecl sub_3004AE70(_DWORD *a1, int a2);
BOOL __cdecl sub_3004AED0(_DWORD *a1, int a2);
int __cdecl sub_3004AF30(_DWORD *a1, int a2);
BOOL __cdecl sub_3004AFF0(float *a1, int a2);
int __cdecl sub_3004B040(int a1, int a2);
BOOL __cdecl sub_3004B090(int a1, int a2);
int __cdecl sub_3004B0B0(int a1);
int __cdecl sub_3004B0C0(_DWORD *a1, int a2);
int __cdecl sub_3004B120(int a1);
int __cdecl sub_3004B140(int a1);
int __cdecl sub_3004B160(int a1);
int __cdecl sub_3004B180(_DWORD *a1, int a2);
BOOL __cdecl sub_3004B1C0(_DWORD *a1, int a2);
BOOL __cdecl sub_3004B220(_DWORD *a1, int a2);
BOOL __cdecl sub_3004B280(int a1, int a2);
BOOL __cdecl sub_3004B2A0(_DWORD *a1, int a2);
int __cdecl sub_3004B2F0(int a1, int a2);
BOOL __cdecl sub_3004B3C0(int a1, int a2);
BOOL __cdecl sub_3004B3E0(int a1, int a2);
int __cdecl sub_3004B400(int a1, int a2);
int __cdecl sub_3004B430(int a1, int a2);
BOOL __cdecl sub_3004B460(int a1, int a2);
BOOL __cdecl sub_3004B480(int a1, int a2);
BOOL __cdecl sub_3004B4A0(int a1, int a2);
BOOL __cdecl sub_3004B4C0(int a1, int a2);
BOOL __cdecl sub_3004B4E0(int a1, int a2);
BOOL __cdecl sub_3004B500(int a1, int a2);
BOOL __cdecl sub_3004B520(int a1, int a2);
int __cdecl sub_3004B540(int a1, int a2);
int __cdecl sub_3004B590(int a1, int a2);
int __cdecl sub_3004B5F0(int a1, int a2);
BOOL __cdecl sub_3004B640(int a1, int a2);
int __cdecl sub_3004B660(int a1);
BOOL __cdecl sub_3004B6A0(int a1);
BOOL __cdecl sub_3004B6C0(_DWORD *a1, int a2);
BOOL __cdecl sub_3004B720(int a1, int a2);
BOOL __cdecl sub_3004B740(int a1, int a2);
BOOL __cdecl sub_3004B760(int a1, int a2);
BOOL __cdecl sub_3004B780(int a1, int a2);
BOOL __cdecl sub_3004B7A0(int a1, int a2);
BOOL __cdecl sub_3004B7C0(int a1, int a2);
BOOL __cdecl sub_3004B7E0(int a1, int a2);
BOOL __cdecl sub_3004B800(int a1, int a2);
BOOL __cdecl sub_3004B820(int a1, int a2);
BOOL __cdecl sub_3004B840(int a1);
int __cdecl sub_3004B860(int a1, int a2);
int __cdecl sub_3004B8E0(_DWORD *a1, int a2);
int __cdecl sub_3004B930(_DWORD *a1, int a2);
int __cdecl sub_3004B9A0(_DWORD *a1, int a2);
BOOL __cdecl sub_3004B9F0(int a1, int a2);
int __cdecl sub_3004BAA0(_DWORD *a1, int a2);
int __cdecl sub_3004BBF0(_DWORD *a1, int a2);
// int __usercall sub_3004BD30@<eax>(int a1@<ecx>, int a2@<eax>, int a3);
int __cdecl sub_3004BDE0(int a1, int a2);
int __cdecl sub_3004BE00(int a1, int a2);
int __cdecl sub_3004BE20(int a1, int a2);
int __cdecl sub_3004BE50(int a1, int a2);
int __cdecl sub_3004BE80(int a1, int a2);
int __cdecl sub_3004BEC0(int a1, int a2);
int __cdecl sub_3004BF00(int a1, int a2);
int sub_3004BF40();
// int __usercall sub_3004BF90@<eax>(int a1@<edi>, int a2);
// void __usercall sub_3004C0C0(_DWORD *a1@<esi>);
int __cdecl sub_3004C120(int a1);
BOOL __cdecl sub_3004C180(int a1);
BOOL __cdecl sub_3004C1A0(int a1, int a2);
BOOL __cdecl sub_3004C1C0(float *a1, int a2);
BOOL __cdecl sub_3004C210(int a1, int a2);
int __cdecl sub_3004C230(int a1, int a2);
BOOL __cdecl sub_3004C260(int a1, int a2);
BOOL __cdecl sub_3004C280(int a1, int a2);
BOOL __cdecl sub_3004C2A0(int a1, int a2);
BOOL __cdecl sub_3004C2C0(int a1, int a2);
BOOL __cdecl sub_3004C2E0(int a1, int a2);
int __cdecl sub_3004C300(int a1, int a2);
int __cdecl sub_3004C350(int a1, int a2);
int __cdecl sub_3004C3B0(int a1, int a2);
int __cdecl sub_3004C400(int a1, int a2);
int __cdecl sub_3004C450(int a1, int a2);
BOOL __cdecl sub_3004C4A0(int a1, int a2);
int __cdecl sub_3004C4C0(int a1);
BOOL __cdecl sub_3004C500(int a1);
int __cdecl sub_3004C520(int a1, int a2);
BOOL __cdecl sub_3004C550(int a1, int a2);
int __cdecl sub_3004C570(int a1);
int __cdecl sub_3004C590(int a1);
BOOL __cdecl sub_3004C5B0(int a1);
BOOL __cdecl sub_3004C5D0(int a1, int a2);
BOOL __cdecl sub_3004C5F0(int a1, int a2);
BOOL __cdecl sub_3004C610(int a1, int a2);
BOOL __cdecl sub_3004C630(int a1, int a2);
int __cdecl sub_3004C650(int a1, int a2);
int __cdecl sub_3004C730(int a1, int a2);
int __cdecl sub_3004C770(int a1, int a2);
int sub_3004C7B0();
// int __usercall sub_3004C800@<eax>(int a1@<ebx>, int a2);
// void __usercall sub_3004C970(int a1@<ebx>, int a2);
int sub_3004C9F0();
int __cdecl sub_3004CD50(int a1, int a2);
int __cdecl sub_3004CDD0(int a1, int a2);
// void __usercall sub_3004CFD0(int a1@<ebx>);
// int __usercall sub_3004D090@<eax>(int a1@<edi>, float a2, float a3);
// int __cdecl vsprintf(char *const Buffer, const char *const Format, va_list ArgList);
// char *__cdecl strstr(const char *Str, const char *SubStr);
// int __cdecl atol(const char *String);
int __cdecl j__atol(const char *String);
// int __cdecl tolower(int C);
// int __cdecl rand();
// int sprintf(char *const Buffer, const char *const Format, ...);
// int __cdecl strncmp(const char *Str1, const char *Str2, size_t MaxCount);
// double __cdecl atof(const char *String);
// _DWORD __cdecl shortsort(_DWORD, _DWORD, _DWORD); weak
unsigned int __cdecl sub_3004D690(unsigned int a1, unsigned int a2, int a3, int (__cdecl *a4)(unsigned int, _BYTE *));
// char *__cdecl strncpy(char *Destination, const char *Source, size_t Count);
// int sscanf(const char *const Buffer, const char *const Format, ...);
// char *__cdecl strchr(const char *Str, int Val);
// int _snprintf(char *const Buffer, const size_t BufferCount, const char *const Format, ...);
// int __cdecl _vsnprintf(char *const Buffer, const size_t BufferCount, const char *const Format, va_list ArgList);
// int __cdecl toupper(int C);
// void *__cdecl memcpy(void *, const void *Src, size_t Size);
// double __cdecl ceil(double X);
int __stdcall sub_3004E3CD(int a1, int a2, int a3);
// int __thiscall write_char(FILE *File); idb
// int __cdecl write_multi_char(char, int, FILE *File); idb
// int __cdecl write_string(_DWORD); weak
int __cdecl sub_3004E7E1(FILE *File, int, int); // idb
// int __cdecl __freetlocinfo(void *Block); idb
int sub_3004F1AC();
int __cdecl sub_3004F1D3(void *, char *Source); // idb
// int __cdecl __lc_lctostr(char *Destination, char *Source); idb
// int _setlocale_get_all(void); weak
char *__cdecl sub_3004F3ED(char *Str2, char *Destination, void *a3, void *a4);
// char *__usercall sub_3004F519@<eax>(int a1@<esi>, char *Str2);
char *__fastcall sub_3004F737(char *Str2, int a2);
// int _mtterm(void); weak
// _DWORD __cdecl _initptd(_DWORD); weak
// int _getptd(void); weak
DWORD __cdecl sub_3004FB12(void *Block);
int sub_3004FC89();
// int __cdecl __crtLCMapStringA(LCID Locale, DWORD dwMapFlags, LPCCH lpMultiByteStr, int cbMultiByte, LPWSTR lpDestStr, int cchDest, UINT CodePage, int); idb
int *__cdecl sub_3005010C(int *a1, char *a2);
// size_t __cdecl strlen(const char *Str);
// int __cdecl isdigit(int C);
// int __cdecl isxdigit(int C);
// int __cdecl isspace(int C);
// int _cfltcvt_init_2(void); weak
int sub_30050564();
// int __fastcall _inc(_DWORD, _DWORD); weak
int __cdecl sub_300505D3(FILE *Stream, int, int); // idb
// int has_osfxsr_set(void); weak
int sub_300510B0();
// void __cdecl __noreturn __crtExitProcess(UINT uExitCode); idb
int sub_300516EB();
int __cdecl sub_30051750(UINT uExitCode, int, int); // idb
// void __cdecl __noreturn _exit(int Code);
// void __cdecl _cexit();
// void __cdecl free(void *Block);
int __cdecl sub_300518D4(int a1, int a2);
// int _ioinit(void); weak
// int _ioterm(void); weak
// int _setenvp(void); weak
// _DWORD __cdecl parse_cmdline(_DWORD, _DWORD); weak
int sub_30051E0C();
// int __crtGetEnvironmentStringsA(void); weak
void sub_30051FD0();
void __cdecl sub_30052014(); // idb
// _DWORD __cdecl _heap_init(_DWORD); weak
// int _heap_term(void); weak
BOOL __stdcall DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved);
unsigned int __cdecl sub_30052193(DWORD NumberOfBytesWritten);
int __cdecl sub_3005248C(int, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite); // idb
int __cdecl sub_30052631(int, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite); // idb
// _DWORD __cdecl _lock_file2(_DWORD, _DWORD); weak
// _DWORD __cdecl _unlock_file2(_DWORD, _DWORD); weak
// void *__cdecl malloc(size_t Size);
// int __cdecl wctomb(char *MbCh, wchar_t WCh);
// int __thiscall sub_30052A2E(_DWORD); weak
// int __cdecl __crtGetStringTypeA(DWORD dwInfoType, LPCCH lpMultiByteStr, int cbMultiByte, LPWORD lpCharType, UINT CodePage, LCID Locale, int); idb
// _DWORD __cdecl sub_300530A5(_DWORD, _DWORD, _DWORD); weak
void __cdecl sub_300532E5(int a1, int a2, WORD *a3, _DWORD *a4, _DWORD *a5, _DWORD *a6);
unsigned int __cdecl sub_300536F7(int a1, unsigned __int8 *a2, unsigned int a3, unsigned __int8 *a4, int a5, int a6);
int sub_300542EE();
int sub_30054502();
// char *__cdecl strcpy(char *Destination, const char *Source);
// char *__cdecl strcat(char *Destination, const char *Source);
// size_t __cdecl strcspn(const char *Str, const char *Control);
// void *__cdecl memset(void *, int Val, size_t Size);
// int _mtinitlocks(void); weak
// _DWORD __cdecl _unlock(_DWORD); weak
int __cdecl sub_3005478B(int a1);
// _DWORD __cdecl _lock(_DWORD); weak
// int __cdecl strcmp(const char *Str1, const char *Str2);
// void *__cdecl memcpy_0(void *, const void *Src, size_t Size);
int __thiscall sub_30054CD7(char *Str1); // idb
// _DWORD __cdecl TestDefaultCountry(__int16); weak
// int __fastcall LcidFromHexString(_DWORD, _DWORD); weak
// int GetPrimaryLen(void); weak
BOOL __thiscall LocaleEnumProc(void *this, LPSTR a2);
BOOL __cdecl sub_30054F40(int a1, int a2);
BOOL __thiscall sub_30054FB7(void *this, LPSTR a2);
BOOL __thiscall sub_300551D7(void *this, LPSTR a2);
// int __cdecl __get_qualified_locale(int, int, char *Destination); idb
// int __cdecl memcmp(const void *Buf1, const void *Buf2, size_t Size);
// char *__cdecl strpbrk(const char *Str, const char *Control);
// int CPtoLCID(void); weak
// int setSBCS(void); weak
unsigned int sub_3005598C();
_DWORD *sub_30055B1E();
int __cdecl sub_30055B8D(UINT CodePage); // idb
int __cdecl sub_30055D33(UINT CodePage); // idb
// int __initmbctable(void); weak
int __cdecl sub_30055EA1(LCID Locale); // idb
void *__cdecl sub_30055EEA(UINT CodePage, UINT a2, char *Str, int a4, LPSTR lpMultiByteStr, int a6);
BOOL sub_300560B9();
// _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD); weak
int __cdecl sub_3005648E(int a1, int a2);
int __cdecl sub_300564A4(int a1, int a2);
int __cdecl sub_30056536(int a1, char *a2);
int __cdecl sub_300565BD(int a1, char *a2);
int __cdecl sub_30056600(int a1, char **a2, char *a3, int a4, int a5, int a6, int a7);
// _DWORD __cdecl _cftoe2(_DWORD, _DWORD, char); weak
int __cdecl sub_30056C36(_DWORD *a1, int a2, int a3, int a4);
// int __cdecl _cftof2(int, size_t Size, char); idb
int __cdecl sub_30056D46(int, int, size_t Size); // idb
int __cdecl sub_30056DAE(int, int, size_t Size, int); // idb
// int _setdefaultprecision(void); weak
// int _ms_p5_mp_test_fdiv(void); weak
// int __cdecl ungetc(int Character, FILE *Stream);
// int __cdecl mbtowc(wchar_t *DstCh, const char *SrcCh, size_t SrcSizeInBytes);
// int __cdecl _raise_exc(ULONG_PTR Arguments, int, DWORD dwExceptionCode, int, int, int); idb
// _DWORD __cdecl _handle_exc(_DWORD, _DWORD, _DWORD); weak
// errno_t __cdecl _set_errno(int Value);
// _DWORD __cdecl _errcode(char); weak
// int __cdecl _umatherr(int Value, int, int, int, int, int, double, int); idb
int __cdecl sub_30057836(DWORD dwExceptionCode, int a2, int a3, int a4, double a5, int a6);
int __cdecl sub_300578F4(DWORD dwExceptionCode, int a2, int a3, int a4, double a5, double a6, int a7);
// _DWORD __cdecl _ctrlfp(_DWORD, _DWORD); weak
int sub_300580BF();
// int *__cdecl _errno();
// unsigned int *__cdecl __doserrno();
// _DWORD __cdecl _dosmaperr(_DWORD); weak
// int __cdecl atexit(void (__cdecl *)());
// _DWORD __cdecl __sbh_alloc_block(_DWORD); weak
// int __cdecl _callnewh(size_t Size);
// _DWORD __cdecl __crtInitCritSecAndSpinCount(_DWORD, _DWORD); weak
// _DWORD __cdecl __crtMessageBoxA(_DWORD, _DWORD, __int16); weak
int __cdecl sub_300594CB(int a1);
// _DWORD __cdecl _unlock_fhandle(_DWORD); weak
int sub_30059560();
// int __cdecl _lseeki64_lk(int FileHandle, int, int, DWORD dwMoveMethod); idb
// _DWORD __cdecl _fflush_lk(_DWORD); weak
int __cdecl sub_300599BD(int a1);
int sub_30059AE2();
void __cdecl __noreturn sub_30059B4A(int a1, int a2);
LPSTR sub_30059CC0();
int sub_3005A274();
// _DWORD __cdecl __ascii_stricmp(_DWORD, _DWORD); weak
int __cdecl sub_3005A32E(int, LCID Locale, LCTYPE LCType, int); // idb
// int __cdecl _stricmp(const char *String1, const char *String2);
// int __cdecl _strnicmp(const char *String1, const char *String2, size_t MaxCount);
// _DWORD __cdecl __addl(_DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl __add_12(_DWORD, _DWORD); weak
// _DWORD __cdecl __shl_12(_DWORD); weak
// _DWORD __cdecl __shr_12(_DWORD); weak
__int16 __cdecl sub_3005A864(char *a1, int a2, int a3);
int __cdecl sub_3005A948(int a1, int a2);
unsigned int __cdecl sub_3005AB80(_WORD *a1, int a2, int a3);
// int __cdecl _fptostr(void *, int, int); idb
// _DWORD __cdecl __dtold(_DWORD, _DWORD); weak
_DWORD *__cdecl sub_3005AD3D(char a1, int a2, int a3, char *Destination);
// char *__cdecl getenv(const char *VarName);
int sub_3005B831();
// int __cdecl __crtGetLocaleInfoW(LCID Locale, LCTYPE LCType, LPWSTR lpLCData, int cchData, UINT CodePage); idb
// int __cdecl __crtGetLocaleInfoA(LCID Locale, LCTYPE LCType, LPSTR lpMultiByteStr, int cbMultiByte, UINT CodePage); idb
int __cdecl sub_3005BB11(__int64 a1, __int16 a2, int a3, char a4, int a5);
int sub_3005C014();
// _DWORD __cdecl strncnt_0(_DWORD); weak
int __cdecl sub_3005C3B4(LCID Locale, DWORD dwCmpFlags, LPCCH lpMultiByteStr, int cbMultiByte, LPCCH lpString2, int cchCount2, UINT CodePage); // idb
// double __usercall sub_3005D00A@<st0>();
// int __fastcall _cintrindisp2(_DWORD, _DWORD); weak
errno_t __cdecl sub_3005F5FB(int a1, int a2, unsigned __int16 *a3);
// int __stdcall CompareStringW(LCID Locale, DWORD dwCmpFlags, PCNZWCH lpString1, int cchCount1, PCNZWCH lpString2, int cchCount2);
// int __stdcall CompareStringA(LCID Locale, DWORD dwCmpFlags, PCNZCH lpString1, int cchCount1, PCNZCH lpString2, int cchCount2);
// DWORD __stdcall GetTimeZoneInformation(LPTIME_ZONE_INFORMATION lpTimeZoneInformation);
// DWORD __stdcall GetCurrentThreadId();
// BOOL __stdcall TlsSetValue(DWORD dwTlsIndex, LPVOID lpTlsValue);
// LPSTR __stdcall GetCommandLineA();
// BOOL __stdcall GetVersionExA(LPOSVERSIONINFOA lpVersionInformation);
// LPVOID __stdcall TlsGetValue(DWORD dwTlsIndex);
// DWORD __stdcall GetLastError();
// DWORD __stdcall TlsAlloc();
// int __stdcall WideCharToMultiByte(UINT CodePage, DWORD dwFlags, LPCWCH lpWideCharStr, int cchWideChar, LPSTR lpMultiByteStr, int cbMultiByte, LPCCH lpDefaultChar, LPBOOL lpUsedDefaultChar);
// int __stdcall MultiByteToWideChar(UINT CodePage, DWORD dwFlags, LPCCH lpMultiByteStr, int cbMultiByte, LPWSTR lpWideCharStr, int cchWideChar);
// BOOL __stdcall TerminateProcess(HANDLE hProcess, UINT uExitCode);
// HANDLE __stdcall GetCurrentProcess();
// LPVOID __stdcall HeapAlloc(HANDLE hHeap, DWORD dwFlags, SIZE_T dwBytes);
// HANDLE __stdcall GetStdHandle(DWORD nStdHandle);
// DWORD __stdcall GetModuleFileNameA(HMODULE hModule, LPSTR lpFilename, DWORD nSize);
// BOOL __stdcall WriteFile(HANDLE hFile, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite, LPDWORD lpNumberOfBytesWritten, LPOVERLAPPED lpOverlapped);
// void __stdcall EnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall LeaveCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// int __stdcall GetTimeFormatA(LCID Locale, DWORD dwFlags, const SYSTEMTIME *lpTime, LPCSTR lpFormat, LPSTR lpTimeStr, int cchTime);
// int __stdcall GetDateFormatA(LCID Locale, DWORD dwFlags, const SYSTEMTIME *lpDate, LPCSTR lpFormat, LPSTR lpDateStr, int cchDate);
// BOOL __stdcall GetCPInfo(UINT CodePage, LPCPINFO lpCPInfo);
// int __stdcall GetLocaleInfoA(LCID Locale, LCTYPE LCType, LPSTR lpLCData, int cchData);
// UINT __stdcall GetACP();
// UINT __stdcall GetOEMCP();
// BOOL __stdcall VirtualProtect(LPVOID lpAddress, SIZE_T dwSize, DWORD flNewProtect, PDWORD lpflOldProtect);
// LPVOID __stdcall VirtualAlloc(LPVOID lpAddress, SIZE_T dwSize, DWORD flAllocationType, DWORD flProtect);
// void __stdcall GetSystemInfo(LPSYSTEM_INFO lpSystemInfo);
// SIZE_T __stdcall VirtualQuery(LPCVOID lpAddress, PMEMORY_BASIC_INFORMATION lpBuffer, SIZE_T dwLength);
// int __stdcall GetWindowTextA(HWND hWnd, LPSTR lpString, int nMaxCount);
// LONG __stdcall SetWindowLongA(HWND hWnd, int nIndex, LONG dwNewLong);
// LONG __stdcall GetWindowLongA(HWND hWnd, int nIndex);

//-------------------------------------------------------------------------
// Data declarations

char byte_30047134[] = { '\0' }; // weak
__int128 xmmword_30060240 = 0i64; // weak
char byte_30060268[92] =
{
  '\x06',
  '\0',
  '\0',
  '\x06',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\x10',
  '\0',
  '\x03',
  '\x06',
  '\0',
  '\x06',
  '\x02',
  '\x10',
  '\x04',
  'E',
  'E',
  'E',
  '\x05',
  '\x05',
  '\x05',
  '\x05',
  '\x05',
  '5',
  '0',
  '\0',
  'P',
  '\0',
  '\0',
  '\0',
  '\0',
  ' ',
  '(',
  '8',
  'P',
  'X',
  '\a',
  '\b',
  '\0',
  '7',
  '0',
  '0',
  'W',
  'P',
  '\a',
  '\0',
  '\0',
  ' ',
  ' ',
  '\b',
  '\0',
  '\0',
  '\0',
  '\0',
  '\b',
  '`',
  'h',
  '`',
  '`',
  '`',
  '`',
  '\0',
  '\0',
  'p',
  'p',
  'x',
  'x',
  'x',
  'x',
  '\b',
  '\a',
  '\b',
  '\0',
  '\0',
  '\a',
  '\0',
  '\b',
  '\b',
  '\b',
  '\0',
  '\0',
  '\b',
  '\0',
  '\b',
  '\0',
  '\a',
  '\b',
  '\0',
  '\0',
  '\0'
}; // idb
wchar_t aHH[32] = L"        h((((                  H"; // weak
const CHAR MultiByteStr = '\x01'; // idb
const WCHAR String2 = 0u; // idb
_UNKNOWN unk_300609DA; // weak
float flt_300628EC =  0.0; // weak
_UNKNOWN unk_300628F8; // weak
float flt_30062D2C[] = {  1.0 }; // weak
int dword_30062D38[] = { 4 }; // weak
float flt_30062D3C =  0.050000001; // weak
char *off_30062D40 = &byte_30063AC4; // weak
int dword_30062D44[] = { 0 }; // weak
_UNKNOWN unk_30062D90; // weak
_UNKNOWN unk_30062DF0; // weak
_UNKNOWN unk_30062FB4; // weak
char *off_30062FD8 = "viewpos"; // weak
int (*off_30062FDC)() = &sub_30014D30; // weak
char *off_30062FE0 = "+scores"; // weak
float flt_300630E0[] = {  0.0 }; // weak
float flt_300630E4[] = {  0.0 }; // weak
float flt_300630E8[] = {  1.0 }; // weak
const char byte_3006371C = '\x15'; // idb
const char byte_300638F0 = '\x15'; // idb
const char byte_30063944 = '\x15'; // idb
const char byte_30063AC4 = '\0'; // idb
const char byte_30063AD0 = '\x15'; // idb
const char byte_30063C94 = '\x15'; // idb
const char byte_30063CC0 = '\x15'; // idb
const char byte_30063CE8 = '\x15'; // idb
const char byte_30063D10 = '\x15'; // idb
const char byte_30063D40 = '\x15'; // idb
const char byte_30063D80 = '\x15'; // idb
const char byte_30063DCC = '\x15'; // idb
const char byte_30063DE4 = '\x15'; // idb
const char byte_30063E0C = '\x15'; // idb
const char byte_30064158 = '\x15'; // idb
const char byte_30064198 = '\x15'; // idb
const char byte_300641CC = '\x15'; // idb
const char byte_3006445C = '\x15'; // idb
const char aCgameSbPlayers[] = "CGAME_SB_PLAYERS"; // idb
const char aCgameSbPlayer[] = "CGAME_SB_PLAYER"; // idb
char byte_300650AC[8] = { 'm', 'a', 'p', 's', '\0', '\0', '\0', '\0' }; // idb
const char byte_30065238 = '\x15'; // idb
const char aCgameYoukilled[] = "CGAME_YOUKILLED"; // idb
const char aCgameYoukilled_0[] = "CGAME_YOUKILLED"; // idb
const char aCgameFollowing[] = "CGAME_FOLLOWING"; // idb
const char aTellI[] = "tell %i \""; // idb
const char byte_30067B9C = '\x15'; // idb
const char byte_30067BC4 = '\x15'; // idb
const char byte_30067BEC = '\x15'; // idb
const char byte_30067C20 = '\x15'; // idb
const char byte_30067C70 = '\x15'; // idb
const char byte_30067CC0 = '\x15'; // idb
const char byte_30067D18 = '\x15'; // idb
const char byte_30067D80 = '\x15'; // idb
const char byte_30067E10 = '\x15'; // idb
const char byte_30067E34 = '\x15'; // idb
const char byte_30067E60 = '\x15'; // idb
const char byte_30067E8C = '\x15'; // idb
const char byte_30067EE0 = '\x15'; // idb
const char byte_30067EFC = '\x15'; // idb
const char byte_30067F28 = '\x15'; // idb
const char byte_30067F50 = '\x15'; // idb
const char byte_30067F74 = '\x15'; // idb
const char byte_30067FA4 = '\x15'; // idb
const char byte_30067FC8 = '\x15'; // idb
const char byte_3006986C = '\x15'; // idb
const char byte_30069898 = '\x15'; // idb
const char byte_300698B8 = '\x15'; // idb
const char byte_3006A994 = '\x15'; // idb
const char byte_3006A9EC = '\x15'; // idb
const char byte_3006AA8C = '\x15'; // idb
const char byte_3006AABC = '\x15'; // idb
const char byte_3006AE5C = '\x15'; // idb
const char byte_3006B19C = '\x15'; // idb
const char byte_3006B2A4 = '\x15'; // idb
const char byte_3006B2A8 = '\x15'; // idb
void (*dword_3006F404[2])(void) = { NULL, NULL }; // idb
void (*dword_3006F40C)(void) = NULL; // idb
_UNKNOWN unk_30070000; // weak
void (*dword_30070008)(void) = NULL; // idb
_UNKNOWN unk_3007000C; // weak
int (*dword_30070020)(void) = NULL; // idb
_UNKNOWN unk_30070024; // weak
void (*dword_3007002C)(void) = NULL; // idb
_UNKNOWN unk_30070030; // weak
void (*dword_30070034[3])(void) = { NULL, NULL, NULL }; // idb
char *off_30070044 = "(null)"; // idb
wchar_t *off_30070048 = L"(null)"; // weak
_UNKNOWN unk_30070050; // weak
_UNKNOWN unk_30070058; // weak
void *off_300700AC = &unk_30070058; // idb
int dword_300700B0[] = { 0 }; // weak
int dword_300700B4 = 1; // weak
int dword_300700D0 = 0; // weak
int dword_300700D4 = 0; // weak
char aC[2] = "C"; // idb
char Str1[2] = "C"; // idb
char *Block = NULL; // idb
int (*funcs_3004F6DF)() = &sub_3004F1AC; // weak
char *off_300701F4 = "LC_COLLATE"; // weak
char *off_30070224 = "LC_TIME"; // weak
void *off_30070228 = &unk_30070050; // weak
DWORD dwTlsIndex = 4294967295u; // idb
int (*off_30070248)(void) = &sub_30050564; // weak
int dword_30070290[] = { 2 }; // weak
char *off_30070294 = "R6002\r\n- floating point not loaded\r\n"; // weak
int (__cdecl *off_300705A0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD) = &_fptrap; // weak
int (__cdecl *off_300705A8)(_DWORD, _DWORD, _DWORD) = &_fptrap; // weak
void *off_300705B8 = &unk_300609DA; // weak
int dword_300705C0 = -1153374642; // weak
LPCRITICAL_SECTION lpCriticalSection = NULL; // idb
int dword_300707F0 = 1; // weak
size_t SrcSizeInBytes = 1u; // idb
char byte_30070804 = '.'; // weak
_UNKNOWN unk_30070820; // weak
char byte_300708A8[8] = { '\x01', '\x02', '\x04', '\b', '\0', '\0', '\0', '\0' }; // idb
int dword_300708B0[] = { 932 }; // weak
_UNKNOWN unk_300708B4; // weak
_UNKNOWN unk_300708C0; // weak
_UNKNOWN unk_300709A0; // weak
_UNKNOWN unk_300709B8; // weak
int dword_30070AF8 = 9876; // weak
int dword_30070C68 = 28800; // weak
int dword_30070C6C = 1; // weak
int dword_30070C70 = -3600; // weak
LPSTR lpMultiByteStr = &unk_30070C78; // idb
LPSTR off_30070CFC = &unk_30070CB8; // idb
int dword_30070D00 = -1; // weak
int dword_30070D0C = -1; // weak
_UNKNOWN unk_30070D90; // weak
_UNKNOWN unk_30070EF0; // weak
char *off_30071050 = &byte_30063AC4; // weak
char *off_30071058 = "fadein"; // weak
int (__cdecl *off_3007105C)(int, int) = &sub_30043530; // weak
int dword_30071148 = 30; // weak
char *off_30071150 = "+scores"; // weak
int dword_30071160[] = { -1 }; // weak
int dword_30071164[] = { 0 }; // weak
char *off_30071600 = "name"; // weak
int (__cdecl *off_30071610)(int, int) = &sub_3004ABB0; // weak
_UNKNOWN unk_30071614; // weak
char *off_30071948 = "font"; // weak
void *off_30071AC8 = &unk_30063E6C; // weak
_UNKNOWN unk_30071B08; // weak
char *String = &unk_30071B08; // idb
int dword_300760D0[] = { -1090087345 }; // weak
int dword_300760D4[] = { 0 }; // weak
int dword_300760D8[] = { 1062847556 }; // weak
int dword_30076868 = -1985229329; // weak
char off_3007686C[] = { 'h', 'B', '\x06', '0' }; // idb
_UNKNOWN unk_3007687C; // weak
_UNKNOWN unk_30076888; // weak
int (__cdecl *dword_30076898)(_DWORD) = (int (__cdecl *)(_DWORD))0xFFFFFFFF; // weak
int dword_3007697C = 2; // weak
int dword_30076984 = -1; // weak
int dword_30076988 = -1; // weak
int dword_3007698C = -1; // weak
int dword_30076990 = 1; // weak
int dword_30076994 = 1; // weak
int dword_30076998 = -1; // weak
void *off_300769A0 = &unk_301E42E0; // weak
char *off_300769A8 = "0"; // weak
char *off_30077470[11] =
{
  "gfx/2d/numbers/zero_32b",
  "gfx/2d/numbers/one_32b",
  "gfx/2d/numbers/two_32b",
  "gfx/2d/numbers/three_32b",
  "gfx/2d/numbers/four_32b",
  "gfx/2d/numbers/five_32b",
  "gfx/2d/numbers/six_32b",
  "gfx/2d/numbers/seven_32b",
  "gfx/2d/numbers/eight_32b",
  "gfx/2d/numbers/nine_32b",
  "gfx/2d/numbers/minus_32b"
}; // weak
char *off_300774DC[32] =
{
  "CG",
  "weapons/mp",
  "bullet",
  "grenade",
  "projectile",
  "none",
  "crosshair",
  "FG42",
  "Springfield",
  "Gewehr43",
  "none",
  "primary",
  "primaryb",
  "pistol",
  "grenade",
  "smokegrenade",
  "stand",
  "duck",
  "prone",
  "rifle",
  "mg",
  "smg",
  "pistol",
  "grenade",
  "rocketlauncher",
  "turret",
  "non-player",
  "grenade",
  "rocket",
  "molotov",
  "none",
  "displayName"
}; // weak
char *off_300774E0[31] =
{
  "weapons/mp",
  "bullet",
  "grenade",
  "projectile",
  "none",
  "crosshair",
  "FG42",
  "Springfield",
  "Gewehr43",
  "none",
  "primary",
  "primaryb",
  "pistol",
  "grenade",
  "smokegrenade",
  "stand",
  "duck",
  "prone",
  "rifle",
  "mg",
  "smg",
  "pistol",
  "grenade",
  "rocketlauncher",
  "turret",
  "non-player",
  "grenade",
  "rocket",
  "molotov",
  "none",
  "displayName"
}; // weak
char *off_300774E4 = "bullet"; // idb
char *off_300774F0 = "none"; // idb
char *off_30077504 = "none"; // idb
char *off_3007751C = "stand"; // idb
char *off_30077528 = "rifle"; // idb
char *off_30077548 = "grenade"; // idb
char *off_30077558 = "displayName"; // weak
int dword_30078134 = -1; // weak
int dword_30078138 = -1; // weak
_UNKNOWN unk_30078140; // weak
_UNKNOWN unk_300781B0; // weak
_UNKNOWN unk_30078220; // weak
_UNKNOWN unk_300782C8; // weak
_UNKNOWN unk_30078328; // weak
int dword_30078348 = 0; // weak
int dword_3007834C = 0; // weak
char *off_30078358 = "emptyitem_\"w01\""; // weak
char **off_300793A0 = &off_30079078; // weak
void *off_300793A4 = &unk_3006321C; // weak
char off_300793A8[] = { 'T', '', '\x06', '0' }; // idb
char *off_300793AC = "RELAXED"; // weak
char *off_300793D8 = "** UNUSED **"; // weak
char *off_30079470 = "PAIN"; // weak
char *off_300794E8 = "** UNUSED **"; // weak
char *off_300795D8 = "WEAPONS"; // weak
int dword_30079628[] = { 0 }; // weak
int *off_3007962C = &dword_300F23A0; // weak
int dword_30079630 = 0; // weak
int dword_30079638 = 1; // weak
int dword_30079648 = 1; // weak
int dword_30079650 = 1; // weak
int dword_30079658 = 1; // weak
int dword_30079660 = 1; // weak
int dword_30079668 = 1; // weak
char *off_30079670[7] = { "back_low", "back_mid", "back_up", "neck", "head", "pelvis", "defines" }; // weak
char *off_30079688 = "defines"; // weak
_UNKNOWN unk_300797A0; // weak
int dword_30079960 = 0; // weak
char *Str = NULL; // idb
int dword_3007996C = 0; // weak
int dword_30079970 = 0; // weak
_UNKNOWN unk_30079974; // weak
__int16 word_30079978 = 0; // weak
int dword_3007997C = 0; // weak
int dword_30079988 = 0; // weak
int dword_30079990 = 0; // weak
int dword_30079994 = 0; // weak
int dword_30079998 = 0; // weak
int dword_3007999C = 0; // weak
int dword_300799A0 = 0; // weak
int dword_300799A4 = 0; // weak
int dword_300799A8 = 0; // weak
int dword_300799C0 = 0; // weak
char byte_300799C8 = '\0'; // weak
int dword_300799CC = 0; // weak
int dword_300799D0 = 0; // weak
CHAR Filename[260] =
{
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0'
}; // idb
char byte_30079ADC = '\0'; // weak
int dword_30079C50 = 0; // weak
LCID Locale = 0u; // idb
_DWORD dword_30079C58 = 0; // idb
int dword_30079C5C = 0; // weak
int dword_30079C60 = 0; // weak
char *String1 = NULL; // idb
size_t MaxCount = 0u; // idb
char *dword_30079C6C = NULL; // idb
int (__stdcall *dword_30079C70)(_DWORD, _DWORD, _DWORD, _DWORD) = NULL; // weak
int dword_30079C74[] = { 0 }; // weak
LCID dword_30079C7C = 0u; // idb
UINT dword_30079C8C = 0u; // idb
int dword_30079C90 = 0; // weak
_UNKNOWN unk_30079C94; // weak
__int16 word_30079CA0 = 0; // weak
int dword_30079CB8 = 0; // weak
int dword_30079CC0 = 0; // idb
int (__cdecl *dword_30079CDC)(_DWORD, _DWORD) = NULL; // weak
struct _TIME_ZONE_INFORMATION TimeZoneInformation =
{
  0,
  {
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u
  },
  { 0u, 0u, 0u, 0u, 0u, 0u, 0u, 0u },
  0,
  {
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u
  },
  { 0u, 0u, 0u, 0u, 0u, 0u, 0u, 0u },
  0
}; // idb
int dword_30079D8C = 0; // weak
char *dword_30079D90 = NULL; // idb
int dword_30079D94 = 0; // weak
WCHAR LCData = 0u; // idb
int dword_30079DA0 = 0; // weak
int dword_30079DBC = 0; // weak
int dword_30079DC0 = 0; // weak
int dword_30079DC4[4] = { 0, 0, 0, 0 }; // idb
int dword_30079DD4 = 0; // weak
int dword_30079DD8[] = { 0 }; // weak
int dword_30079DDC[287] =
{
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  
}; // idb
int dword_3007A258; // weak
int dword_3007A25C[]; // weak
int dword_3007A280[]; // weak
int dword_3007A284[]; // weak
char byte_3007A700[100000]; // idb
int dword_30092DA0; // weak
int dword_30092DA4; // weak
_UNKNOWN unk_30092DA8; // weak
int dword_300954B8; // weak
int dword_300954C0[64]; // idb
int dword_300955C0[64]; // idb
int dword_300956C0[64]; // idb
int dword_300957C0; // weak
int dword_300957C4; // weak
int dword_300957C8; // weak
int dword_300957CC; // weak
int dword_300957D0[64]; // idb
int dword_300958D0[64]; // idb
int dword_300959D0[64]; // idb
int dword_30095AD0[]; // weak
_UNKNOWN unk_30095AD4; // weak
int dword_30095B50; // weak
int dword_30095B54; // weak
int dword_30095B58; // weak
int dword_30095B5C; // weak
int dword_30095B60; // weak
int dword_30095B64; // weak
int dword_30095B68; // weak
int dword_30095B6C; // weak
int dword_30095B70; // weak
int dword_30095B74; // weak
int dword_30095B78; // weak
float flt_30095B7C; // weak
int dword_30095B80; // weak
int dword_30095B84; // weak
int dword_30095B88; // weak
float flt_30095B8C; // weak
int dword_30095B90; // weak
char byte_30095F90[1024]; // idb
_UNKNOWN unk_30096390; // weak
char byte_30096790; // idb
char byte_30096B90[4096]; // idb
int dword_30097B90; // weak
int dword_30097F90[256]; // idb
int dword_30098390; // weak
int dword_30098394; // weak
int dword_30098398[256]; // idb
int dword_30098798; // weak
char ArgList[]; // idb
char byte_300987A0; // weak
char byte_300987A1; // weak
int dword_300987A4; // weak
int dword_300987A8; // weak
int dword_300987AC; // weak
char byte_300987B0; // weak
char byte_300987B1; // weak
char byte_300987B2; // weak
int dword_300987BC; // weak
int dword_300987C0; // weak
int dword_300987C4; // weak
int dword_300987CC; // weak
int dword_30098878; // weak
int dword_3009887C; // weak
int dword_30098884; // weak
int dword_30098888; // weak
int dword_3009888C; // weak
int dword_30098890; // weak
int dword_30098898; // weak
int dword_30098C98; // weak
int dword_30098CC0; // idb
int dword_300990C8; // weak
int dword_300990CC; // weak
_UNKNOWN unk_300990D0; // weak
_UNKNOWN unk_3009D0D8; // weak
char byte_300A4E50[31999]; // idb
char byte_300ACB4F; // weak
int dword_300ACB58; // weak
int dword_300ACB5C; // weak
int dword_300ACB60; // weak
int dword_300ACB64; // weak
int dword_300ACB68; // weak
int dword_300ACB70; // weak
int (__cdecl *dword_300ACBF0)(_DWORD); // weak
int (*dword_300ACBF8)(void); // weak
int (__cdecl *dword_300ACBFC)(_DWORD); // weak
int (__cdecl *dword_300ACCB0)(_DWORD); // weak
int (__cdecl *dword_300ACCB4)(_DWORD, _DWORD, _DWORD); // weak
int (__cdecl *dword_300ACCF8)(_DWORD); // weak
char byte_300ACD08[256]; // idb
int dword_300ADE08[2048]; // idb
_UNKNOWN unk_300AFE08; // weak
int dword_300CFE08; // weak
_UNKNOWN unk_300CFE88; // weak
int dword_300EFE88; // weak
int dword_300EFE8C; // weak
int dword_300EFE90; // weak
int dword_300EFE94; // weak
int dword_300EFE98; // weak
int dword_300EFE9C; // weak
int dword_300EFEA0; // weak
int dword_300EFEA4; // weak
int dword_300EFEA8; // weak
int dword_300EFEAC; // weak
float flt_300EFEB0; // weak
float flt_300EFEB4; // weak
int dword_300EFEB8; // weak
int dword_300EFEBC; // weak
char Buffer[4096]; // idb
char byte_300F0EC0; // weak
int (__cdecl *dword_300F0F40)(_DWORD); // weak
int dword_300F0F44; // weak
int dword_300F0F48; // weak
int dword_300F0F4C; // weak
int dword_300F0F50; // weak
int dword_300F0F54; // weak
int dword_300F0F58; // weak
int dword_300F0F5C; // weak
int dword_300F0F60; // weak
int dword_300F0F64; // weak
int dword_300F0F68; // weak
int dword_300F0F6C; // weak
int dword_300F0F70; // weak
int dword_300F0F74; // weak
int dword_300F0F78; // weak
int dword_300F0F7C; // weak
int dword_300F0F80; // weak
int dword_300F0F88; // weak
int dword_300F0F8C; // weak
int dword_300F0F90; // weak
int dword_300F0F94; // weak
int dword_300F0F98; // weak
int dword_300F0F9C; // weak
int dword_300F0FA0; // weak
int dword_300F0FA4; // weak
int dword_300F0FA8; // weak
int dword_300F0FAC; // weak
int dword_300F0FB0; // weak
int dword_300F0FB4; // weak
char dword_300F0FB8[]; // idb
char *Destination; // idb
int dword_300F0FC0; // weak
int dword_300F0FD4; // weak
LCID dword_300F0FE4; // idb
void *dword_300F0FE8; // idb
int dword_300F0FEC; // weak
char byte_300F1000[]; // weak
char byte_300F1001[259]; // idb
UINT CodePage; // idb
__int16 word_300F1110[]; // weak
char byte_300F1120[256]; // idb
int dword_300F1220; // weak
int dword_300F1224; // weak
int dword_300F1234; // weak
int dword_300F2240; // weak
HANDLE hHeap; // idb
int dword_300F2248; // weak
UINT uNumber; // idb
int dword_300F2260[]; // weak
int dword_300F2360; // weak
int dword_300F2364; // weak
void *dword_300F2368; // idb
int dword_300F236C; // weak
int dword_300F2370; // weak
int dword_300F2374; // weak
int dword_300F2380; // weak
int dword_300F2390; // weak
int dword_300F2394; // weak
int dword_300F2398; // weak
int dword_300F23A0[]; // weak
int dword_300F23A4[127]; // idb
_UNKNOWN unk_300F25A0; // weak
int dword_300F25E4[]; // weak
int dword_300F25F0[]; // weak
int dword_300F25F4[]; // weak
char dword_300FDDA0[]; // idb
_DWORD dword_3018DC60; // idb
int dword_3018DC64; // weak
int dword_3018DC68; // weak
int dword_3018DC6C; // weak
int dword_3018DC70; // weak
int dword_3018DC74; // weak
int dword_3018DC78; // weak
int dword_3018DC7C; // weak
int dword_3018DC80; // weak
int dword_3018DC84; // weak
int dword_3018DC88; // weak
int dword_3018DC8C[]; // weak
char byte_3018DC98[32]; // idb
int dword_3018DCB8[]; // weak
int dword_3018DCC0[]; // weak
int dword_3018DCC4[]; // weak
int dword_3018DCC8[]; // weak
int dword_3018E080[]; // weak
int dword_3018E084[]; // weak
int dword_3018E0E8[]; // weak
int dword_3018E0EC[]; // weak
int dword_3018E0F0[]; // weak
int dword_3018E0F4[]; // weak
int dword_3018E0F8[]; // weak
int dword_3018E0FC[]; // weak
int dword_3018E100[]; // weak
int dword_3018E108[]; // weak
int dword_3018E10C[]; // weak
int dword_3018E110[]; // weak
int dword_3018E114[]; // weak
int dword_3018E118[]; // weak
int dword_3018E11C[]; // weak
int dword_3018E120[]; // weak
int dword_3018E124[]; // weak
int dword_3018E128[]; // weak
int dword_3018E12C[]; // weak
_UNKNOWN unk_3018E134; // weak
int dword_301A08AC; // weak
int dword_301A09CC; // weak
int dword_301A0AEC; // weak
float flt_301A0C08; // weak
int dword_301A0D20; // weak
int dword_301A0D24; // weak
float flt_301A0D28; // weak
float flt_301A0D2C; // weak
float flt_301A0D30; // weak
float flt_301A0D34; // weak
float flt_301A0D38[3]; // idb
float flt_301A0D44; // weak
int dword_301A0D48; // weak
int dword_301A0D4C; // weak
int dword_301A0D50; // weak
int dword_301A0D54; // weak
_UNKNOWN unk_301A0D58; // weak
float flt_301A0D68; // weak
float flt_301A0D6C; // weak
float flt_301A0D70; // weak
int dword_301A0D74; // weak
float flt_301A0D88; // weak
int dword_301A0D8C; // weak
int dword_301A0D90; // weak
int dword_301A0D94; // weak
int dword_301A0D98; // weak
int dword_301A0D9C; // weak
int dword_301A0DA0; // weak
int dword_301A0DA4; // weak
int dword_301A0DA8; // weak
float flt_301A0DC8; // weak
int dword_301A0DCC; // weak
int dword_301A0ED0; // weak
int dword_301A0EEC; // weak
int dword_301A100C; // weak
int dword_301A112C; // weak
float flt_301A1248; // weak
int dword_301A136C; // weak
int dword_301A148C; // weak
int dword_301A15AC; // weak
int dword_301A16CC; // weak
int dword_301A17EC; // weak
float dword_301A1908; // idb
float flt_301A1A28; // weak
float flt_301A1B48; // weak
float flt_301A1C68; // weak
int dword_301A1D80[128]; // idb
int dword_301A1F80; // weak
int dword_301A1F84[128]; // idb
int dword_301A2184[128]; // idb
int dword_301A2384; // weak
int dword_301A23A0[]; // weak
int dword_301A24C0; // weak
_UNKNOWN unk_301A2700; // weak
_UNKNOWN unk_301A2704; // weak
_UNKNOWN unk_301A9C18; // weak
int dword_301A9D00; // weak
int dword_301A9D20; // weak
int dword_301A9D24; // weak
int dword_301A9E2C; // weak
int dword_301A9F48; // weak
float flt_301AA188; // weak
int dword_301AA3CC; // weak
_UNKNOWN unk_301AA4E0; // weak
int dword_301AA584[]; // weak
int dword_301AA594; // weak
int dword_301AA598; // weak
int dword_301AA5AC[]; // weak
int dword_301AA5BC[]; // weak
int dword_301AA5C0[]; // weak
int dword_301AA5C4[]; // weak
int dword_301AA5C8[]; // weak
int dword_301AA5CC[]; // weak
int dword_301AA5D0[]; // weak
int dword_301AA5D4[]; // weak
int dword_301AA5D8[]; // weak
int dword_301AA628[]; // weak
int dword_301AA62C[]; // weak
int dword_301AA63C[]; // weak
int dword_301AA640[]; // weak
int dword_301AA644[]; // weak
_UNKNOWN unk_301AA678; // weak
_UNKNOWN unk_301AA6D0; // weak
float flt_301B0AE8; // weak
int dword_301B0D28; // weak
float flt_301B0E48; // weak
int dword_301B0F6C; // weak
int dword_301B108C; // weak
int dword_301B11A0; // weak
int dword_301B11A4; // weak
int dword_301B11A8; // weak
int dword_301B11AC; // weak
int dword_301B11B0; // weak
int dword_301B11B4; // weak
int dword_301B11B8; // weak
int dword_301B11BC; // weak
int dword_301B11C0; // weak
int dword_301B11C4; // weak
int dword_301B11CC; // weak
int dword_301B11D0; // weak
int dword_301B11D4; // weak
int dword_301B11D8; // weak
int dword_301B11DC; // weak
int dword_301B11E0; // weak
int dword_301B11E4; // weak
int dword_301B11E8; // weak
int dword_301B11EC; // weak
int (__cdecl *dword_301B11F0)(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int dword_301B11F4; // weak
int dword_301B11F8; // weak
int dword_301B11FC; // weak
int dword_301B1200; // weak
int dword_301B1204; // weak
int dword_301B1208; // weak
int dword_301B120C; // weak
int dword_301B1210; // weak
int dword_301B1214; // weak
int dword_301B1218; // weak
int dword_301B1224; // weak
int dword_301B1228; // weak
int dword_301B122C; // weak
int dword_301B1230; // weak
int dword_301B1238; // weak
int dword_301B123C; // weak
int dword_301B124C; // weak
int dword_301B1250; // weak
int dword_301B1254; // weak
int dword_301B125C; // weak
int dword_301B1260; // weak
int dword_301B1268; // weak
int dword_301B126C; // weak
int dword_301B1270; // weak
int dword_301B1274; // weak
int dword_301B1278; // weak
int dword_301B127C; // weak
int dword_301B1294; // weak
int dword_301B1298; // weak
int dword_301B12A4; // weak
_UNKNOWN unk_301B12AC; // weak
_UNKNOWN unk_301B62F4; // weak
_UNKNOWN unk_301BB33C; // weak
_UNKNOWN unk_301C0384; // weak
_UNKNOWN unk_301C53CC; // weak
_UNKNOWN unk_301CA414; // weak
int dword_301CF45C; // weak
int dword_301CF460; // weak
int dword_301CF464; // weak
int dword_301CF468; // weak
int dword_301CF46C; // weak
int dword_301CF470; // weak
int dword_301CF474; // weak
int dword_301CF478; // weak
int dword_301CF488; // weak
int dword_301CF48C; // weak
int dword_301CF490; // weak
int dword_301CF494; // weak
int dword_301CF498; // weak
int dword_301CF49C; // weak
float flt_301CF4A0; // idb
_DWORD dword_301CF4A4; // idb
float flt_301CF4A8; // idb
float flt_301CF4AC; // idb
float flt_301CF4B0; // idb
float flt_301CF4B4; // idb
_UNKNOWN unk_301CF4B8; // weak
int dword_301CF4C4; // weak
int dword_301CF4C8; // weak
char dword_301CF58C[]; // idb
int dword_301CF6AC; // weak
float flt_301CF7C8; // weak
float flt_301CFA08; // weak
int dword_301CFB20[]; // weak
int dword_301CFB28; // weak
int dword_301CFB2C; // weak
int dword_301CFB34; // weak
int dword_301CFB38; // weak
int dword_301CFB3C; // weak
int dword_301CFB40; // weak
int dword_301CFB48; // weak
int dword_301CFB4C; // weak
int dword_301CFB50; // weak
int dword_301CFB54; // weak
int dword_301CFB5C; // weak
int dword_301CFB64; // weak
int dword_301CFB68; // weak
int dword_301D1490; // weak
_BYTE byte_301D1B20[15668]; // idb
int dword_301D5854[84]; // idb
int dword_301D5A28; // weak
int dword_301D5A2C; // weak
float flt_301D5A44; // weak
float flt_301D5A48; // weak
int dword_301D5A50; // weak
int dword_301D5A54; // weak
int dword_301D5A58; // weak
char byte_301D5A5C[32]; // idb
char byte_301D5A7C[256]; // idb
int dword_301D5B7C; // weak
char byte_301D5B80[192]; // idb
int dword_301D5C40; // weak
int dword_301D5C44; // weak
int dword_301D5C48; // weak
int dword_301D5C4C; // weak
char byte_301D5C50[4]; // idb
int dword_301D5C54[62]; // idb
char byte_301D5D4F; // weak
int dword_301D5F70; // weak
int dword_301D5F74; // weak
char byte_301D5F78[255]; // idb
char byte_301D6077; // weak
int dword_301D6078; // weak
int dword_301D607C; // weak
int dword_301D6080; // weak
int dword_301D6084[]; // weak
_UNKNOWN unk_301D6584; // weak
int dword_301D6D44; // weak
int dword_301D6D48[512]; // idb
float flt_301D7548[3]; // idb
_UNKNOWN unk_301D8D48; // weak
int dword_301D95C0[]; // weak
int dword_301D95E0; // weak
int dword_301D95E4; // weak
int dword_301D95E8; // weak
int dword_301D95EC; // weak
int dword_301D95FC; // weak
int dword_301D9600; // weak
int dword_301D9604; // weak
int dword_301D9608; // weak
int dword_301D960C; // weak
int dword_301D9610; // weak
int dword_301D9614; // weak
int dword_301D9618; // weak
int dword_301D961C; // weak
int dword_301D9620; // weak
int dword_301D9628; // weak
int dword_301D962C; // weak
int dword_301D9630; // weak
int dword_301D9634; // weak
int dword_301D9638; // weak
int dword_301D963C; // weak
int dword_301D9644; // weak
int dword_301D9648; // weak
int dword_301D964C; // idb
int dword_301D9650; // weak
int dword_301D9654; // idb
int dword_301D9658[]; // weak
int dword_301D9660; // weak
int dword_301D9664; // weak
int dword_301D9668; // weak
int dword_301D966C; // weak
int dword_301D9670; // weak
int dword_301D9674; // weak
int dword_301D9678; // weak
int dword_301D967C[64]; // idb
int dword_301D977C[65]; // idb
int dword_301D9880; // weak
int dword_301D9884; // weak
int dword_301D9888; // weak
int dword_301D988C; // weak
int dword_301D9890; // weak
int dword_301D9894; // weak
int dword_301D9898; // weak
int dword_301D989C; // weak
int dword_301D98A0; // idb
int dword_301D98A4; // idb
int dword_301D98A8[]; // weak
int dword_301D98D4; // idb
int dword_301D98D8; // weak
int dword_301D98DC; // weak
int dword_301D98E0; // weak
int dword_301D98E4; // weak
int dword_301D98E8; // weak
int dword_301D98EC; // weak
int dword_301D9900; // weak
int dword_301D9904; // weak
int dword_301D9960; // weak
int dword_301D99BC; // weak
int dword_301D9A74; // weak
int dword_301D9AD0; // weak
_UNKNOWN unk_301D9B2C; // weak
_UNKNOWN unk_301D9B88; // weak
_UNKNOWN unk_301D9BE4; // weak
_UNKNOWN unk_301D9C40; // weak
int dword_301D9C9C; // weak
int dword_301D9CA0; // weak
int dword_301D9CA4; // weak
int dword_301D9CA8; // weak
int dword_301D9CAC; // weak
int dword_301D9CB0; // weak
int dword_301D9CB4; // weak
int dword_301D9CB8; // weak
int dword_301D9CBC; // weak
int dword_301D9CC0; // weak
int dword_301D9CC4; // weak
int dword_301D9CC8; // weak
int dword_301D9CCC; // weak
int dword_301D9CD0; // weak
int dword_301D9CD4; // weak
int dword_301D9CD8; // weak
int dword_301D9CDC; // weak
int dword_301D9CE0; // weak
int dword_301D9CE4; // weak
int dword_301D9CE8; // weak
int dword_301D9CEC; // weak
int dword_301D9CF0; // weak
int dword_301D9CF4; // weak
int dword_301D9CF8; // weak
int dword_301D9CFC; // weak
int dword_301D9D00; // weak
int dword_301D9D04; // weak
int dword_301D9D08; // weak
int dword_301D9D0C; // weak
int dword_301D9D10; // weak
int dword_301D9D14; // weak
int dword_301D9D18[23]; // idb
int dword_301D9D74[23]; // idb
int dword_301D9DD0[23]; // idb
int dword_301D9E2C[23]; // idb
int dword_301D9E88[23]; // idb
int dword_301D9EE4[23]; // idb
int dword_301D9F40[23]; // idb
_UNKNOWN unk_301D9F9C; // weak
_UNKNOWN unk_301D9FF8; // weak
int dword_301DA054; // weak
int dword_301DA058; // weak
int dword_301DA05C; // weak
float flt_301DA060; // weak
_UNKNOWN unk_301DA064; // weak
_UNKNOWN unk_301DA50C; // weak
int dword_301DC60C; // weak
int dword_301DC72C; // weak
int dword_301DC84C; // weak
float flt_301DC968; // weak
int dword_301DCA8C; // weak
float flt_301DCBA8; // weak
int dword_301DCDEC; // weak
int dword_301DCF0C; // weak
float flt_301DD148; // weak
int dword_301DD26C; // weak
float dword_301DD388; // idb
char byte_301DD4B0; // weak
int dword_301DD5CC; // weak
float flt_301DD6E8; // weak
float flt_301DD808; // weak
int dword_301DD92C; // weak
int dword_301DDA4C; // weak
float flt_301DDB68; // weak
float flt_301DDC88; // weak
int dword_301DDDAC; // weak
int dword_301DDECC; // weak
float flt_301DDFE8; // weak
int dword_301DE10C; // weak
int dword_301DE34C; // weak
float flt_301DE468; // weak
float flt_301DE6A8; // weak
int dword_301DE7CC; // weak
int dword_301DEA0C; // weak
float flt_301DEB28; // weak
int dword_301DEC4C; // weak
int dword_301DED6C; // weak
int dword_301DEE8C; // weak
float flt_301DEFA8; // weak
int dword_301DF0CC; // weak
int dword_301DF30C; // weak
float flt_301DF428; // weak
char byte_301DF550; // weak
int dword_301DF668; // weak
float flt_301DF788; // weak
int dword_301DF8AC; // weak
int dword_301DF9CC; // weak
float flt_301DFAE8; // weak
float flt_301DFC08; // weak
int dword_301DFD2C; // weak
float flt_301DFE48; // weak
int dword_301DFF6C; // weak
int dword_301E01AC; // weak
int dword_301E02C0[2304]; // idb
float flt_301E26C8; // weak
float flt_301E27E8; // weak
float flt_301E2908; // weak
float flt_301E2A28; // weak
float flt_301E2B48; // weak
float flt_301E2EA8; // weak
float flt_301E2FC8; // weak
float flt_301E30E8; // weak
float flt_301E3208; // weak
int dword_301E332C; // weak
float flt_301E3568; // weak
int dword_301E368C; // weak
int dword_301E37AC; // weak
float flt_301E39E8; // weak
int dword_301E3B0C; // weak
float flt_301E3C28; // weak
float flt_301E3D48; // weak
float flt_301E3E68; // weak
int dword_301E3F8C; // weak
float flt_301E40A8; // weak
int dword_301E41CC; // weak
float flt_301E4408; // weak
float flt_301E4528; // weak
int dword_301E464C; // weak
int dword_301E476C; // weak
int dword_301E488C; // weak
int dword_301E49AC; // weak
float flt_301E4BE8; // weak
int dword_301E4D0C; // weak
float flt_301E4E28; // weak
float flt_301E4F48; // weak
int dword_301E5068; // weak
int dword_301E518C; // weak
float flt_301E52A8; // weak
int dword_301E54EC; // weak
char byte_301E5730; // weak
int dword_301E5848; // weak
int dword_301E596C; // weak
int dword_301E5A8C; // weak
int dword_301E5BAC; // weak
float flt_301E5CC8; // weak
int dword_301E5CCC; // weak
int dword_301E5DEC; // weak
char dword_301E5F00[]; // idb
int dword_301E5F04; // weak
int dword_301E5F08; // weak
int dword_301E5F0C; // weak
int dword_301E5F10; // weak
int dword_301E5F14; // weak
char dword_301E5F18[]; // idb
int dword_301E5F1C; // weak
int dword_301E5F20; // weak
int dword_301E5F24; // weak
_UNKNOWN unk_301E5F28; // weak
_UNKNOWN unk_301F8710; // weak
float dword_3020AEF8; // idb
int dword_3020AEFC; // idb
int dword_3020AF00; // weak
int dword_3020AF04; // weak
int dword_3020AF08; // weak
int dword_3020AF0C; // weak
int dword_3020AF10; // weak
int dword_3020AF14; // weak
int dword_3020AF18; // weak
int dword_3020AF1C; // weak
int dword_3020AF20; // weak
int dword_3020AF28; // weak
int dword_3020AF2C; // weak
int dword_3020AF30; // weak
float flt_3020AF34; // weak
float flt_3020AF38; // weak
int dword_3020AF3C; // weak
int dword_3020AF48; // weak
float flt_3020AF54; // idb
int dword_3020AF58; // weak
int dword_3020AF5C; // weak
int dword_3020AF60; // weak
int dword_3020AF64; // weak
int dword_3020AF68; // weak
int dword_3020AF78; // weak
int dword_3020AF94; // weak
int dword_3020AF98; // weak
int dword_3020AF9C[4]; // idb
int dword_3020AFAC[]; // weak
_UNKNOWN unk_3020AFB4; // weak
int dword_3020AFC0; // weak
int dword_3020AFC4; // weak
int dword_3020AFC8; // weak
float flt_3020AFCC; // weak
int dword_3020AFD4; // weak
int dword_3020AFD8; // weak
int dword_3020AFDC; // weak
int dword_3020AFE0; // weak
float flt_3020AFE4; // weak
int dword_3020B00C; // weak
int dword_3020B020[64]; // idb
int dword_3020B120[64]; // idb
int dword_3020B220[]; // weak
char byte_3020B228[]; // weak
char byte_3020B229; // weak
char byte_3020B22A; // weak
int dword_3020B250; // weak
int dword_3020B254; // weak
int dword_3020B288; // weak
int dword_3020B28C; // weak
int dword_3020B298; // weak
float flt_3020B2EC; // weak
int dword_3020CFDC; // weak
int dword_3020CFE0; // idb
int dword_3020CFE4; // weak
int dword_3020CFE8; // weak
int dword_3020D080; // weak
_UNKNOWN unk_3020D0D0; // weak
int dword_3020D200; // weak
int dword_3020D204; // weak
float flt_3020D208; // weak
int dword_3020D20C; // weak
int dword_3020D210; // weak
int dword_3020D214; // weak
int dword_3020D218; // weak
int dword_3020D21C; // weak
float flt_3020D220; // weak
float flt_3020D224; // weak
float flt_3020D228; // weak
int dword_3020D22C; // weak
int dword_3020D230; // weak
int dword_3020D234; // weak
int dword_3020D238; // weak
int dword_3020D23C; // weak
int dword_3020D240; // weak
int dword_3020D244; // weak
int dword_3020D248; // weak
int dword_3020D24C; // weak
int dword_3020D250[16]; // idb
float flt_3020D290; // weak
int dword_3020D294; // weak
float flt_3020D298; // weak
int dword_3020D29C; // weak
int dword_3020D2A0; // weak
float flt_3020D2A4; // weak
int dword_3020D2A8; // weak
float flt_3020D2AC[3]; // idb
float flt_3020D2B8; // weak
float flt_3020D2BC; // weak
float flt_3020D2C0; // weak
float flt_3020D2C4[3]; // idb
int dword_3020D2D0; // weak
float flt_3020D2D4; // weak
int dword_3020D2D8; // weak
float flt_3020D2DC[3]; // idb
float flt_3020D2E8; // weak
float flt_3020D2EC; // weak
float flt_3020D2F0; // weak
float flt_3020D2F4[3]; // idb
int dword_3020D300; // weak
float flt_3020D304; // weak
int dword_3020D308; // weak
float flt_3020D30C[3]; // idb
float flt_3020D318; // weak
float flt_3020D31C; // weak
float flt_3020D320; // weak
float flt_3020D324[3]; // idb
int dword_3020D330; // weak
int dword_3020D334; // weak
int dword_3020D338; // weak
int dword_3020D33C; // weak
float flt_3020D340; // weak
float flt_3020D344; // weak
float flt_3020D348; // weak
float flt_3020D34C; // weak
float flt_3020D350; // weak
float flt_3020D354; // weak
float flt_3020D358; // weak
float flt_3020D35C; // weak
float flt_3020D360; // weak
float flt_3020D364; // weak
float flt_3020D368; // weak
int dword_3020D36C; // weak
int dword_3020D370; // weak
int dword_3020D374; // weak
int dword_3020D378; // weak
int dword_3020D37C; // weak
int dword_3020D380; // weak
float flt_3020D384; // idb
int dword_3020D388; // weak
int dword_3020D38C; // weak
int dword_3020D390; // weak
int dword_3020D394; // weak
int dword_3020D398; // weak
int dword_3020D39C; // weak
int dword_3020D3A0; // weak
int dword_3020D3A4; // weak
int dword_3020D3A8; // weak
int dword_3020D3AC; // weak
int dword_3020D3B0[1023]; // idb
int dword_3020E3AC[1023]; // idb
float flt_3020F3A8; // weak
char byte_3020F3AC; // idb
char byte_3020F7AB; // weak
int dword_3020F7AC; // weak
int dword_3020F7B0; // weak
int dword_3020F7B4[]; // weak
int dword_3020F7B8; // weak
int dword_3020F7BC; // weak
int dword_3020F7C0; // weak
int dword_3020F7C4[]; // weak
int dword_3020F7C8; // weak
int dword_3020F7CC; // weak
int dword_3020F7D0; // weak
int dword_3020F7D4[]; // weak
int dword_3020F7D8; // weak
int dword_3020F7DC; // weak
int dword_3020F7E0; // weak
_UNKNOWN unk_3020F7E4; // weak
_UNKNOWN unk_3020F7F4; // weak
int dword_3020FDE4; // weak
int dword_3020FDEC; // weak
int dword_3020FDF0; // weak
int dword_3020FDF4; // weak
char byte_3020FDF8; // idb
char byte_3020FE17; // weak
int dword_3021023C; // weak
int dword_30210240; // weak
int dword_30210244; // weak
char byte_30210248[1023]; // idb
char byte_30210647; // weak
int dword_30210648; // weak
int dword_3021064C; // weak
int dword_30210650; // weak
float flt_30210654; // weak
int dword_30210658; // weak
int dword_3021065C; // weak
int dword_30210660; // weak
int dword_30210664; // weak
int dword_30210668; // weak
int dword_3021066C; // weak
int dword_30210670; // weak
float flt_30210674; // weak
int dword_30210678; // weak
int dword_3021067C; // weak
int dword_30210680; // weak
int dword_3021068C; // weak
int dword_30210690; // weak
int dword_30210698; // weak
int dword_3021069C; // weak
int dword_302106A0; // weak
int dword_302106A4; // weak
int dword_302106A8; // weak
int dword_302106B4; // weak
int dword_302106B8; // weak
int dword_302106C8; // weak
int dword_302106CC; // weak
int dword_302106D0; // weak
int dword_302106D4; // weak
_UNKNOWN unk_302106E0; // weak
_UNKNOWN unk_302106F4; // weak
int dword_302106F8; // weak
int dword_302106FC[]; // weak
int dword_30210700[]; // weak
float flt_30210704[]; // weak
int dword_3021075C; // weak
int dword_30210770; // weak
int dword_30210774; // weak
int dword_30210794; // weak
int dword_30210798; // weak
int dword_3021079C; // weak
float flt_302107A0; // idb
float dword_302107A4; // idb
int dword_30210888; // weak
char byte_3021088C[63]; // idb
char byte_302108CB; // weak
float flt_302108CC; // weak
float flt_302108D0; // weak
float flt_302108D4; // weak
int dword_302108D8; // weak
int dword_302108DC; // weak
int dword_302108E0; // weak
int dword_302108E4; // weak
int dword_302108E8; // weak
int dword_302108EC; // weak
int dword_302108F0; // weak
int dword_302108F4; // weak
float flt_302108F8; // idb
float flt_302108FC; // idb
float dword_30210900; // idb
int dword_30210940; // weak
int dword_30210944; // weak
float flt_30210948; // weak
float flt_3021094C; // weak
float flt_30210950; // weak
int dword_30210954; // weak
int dword_30210958; // weak
int dword_3021095C; // weak
int dword_30210960; // weak
int dword_30210964; // weak
int dword_30210968; // weak
int dword_3021096C; // weak
int dword_30210970; // weak
int dword_30210974; // weak
int dword_30210978; // weak
int dword_3021097C; // weak
int dword_30210980; // weak
int dword_30210984; // weak
int dword_30210988; // weak
int dword_3021098C; // weak
int dword_30210990; // weak
int dword_30210994; // weak
int dword_30210998; // weak
int dword_3021099C; // weak
_UNKNOWN unk_30210DB4; // weak
float flt_30210DD0; // weak
float flt_30210DF4; // weak
float flt_30210E18; // weak
float flt_30210E3C; // weak
float flt_30210E44; // weak
float flt_30210E48; // weak
int dword_30210E4C; // weak
int dword_30210E50; // weak
int dword_30210E54; // weak
int dword_30210E58; // weak
float flt_30210E5C; // weak
float dword_30210E60; // idb
float flt_30210E64; // weak
float flt_30210E68; // idb
float flt_30210E6C; // weak
int dword_30210E70[]; // weak
int dword_30210E74[]; // weak
int dword_30210E78[]; // weak
int dword_30210E7C[]; // weak
int dword_30210E80[]; // weak
int dword_30211370; // weak
int dword_30211374; // weak
int dword_30211378; // weak
int dword_3021137C; // weak
int dword_30211380; // weak
int dword_30211384; // weak
int dword_30211388; // weak
int dword_3021138C; // weak
int dword_30211390; // weak
int dword_30211394; // weak
int dword_30211398; // weak
float flt_302115E8; // weak
float flt_30211708; // weak
_UNKNOWN unk_30211940; // weak
int dword_30211B20[]; // weak
int dword_30211B38[]; // weak
int dword_30211B3C[]; // weak
int dword_30211B40[]; // weak
_UNKNOWN unk_30211B44; // weak
int dword_30211B60[]; // weak
int dword_30211B64[141175]; // idb
int dword_3029B94C; // weak
float flt_3029BA68; // weak
int dword_3029BA6C; // weak
_UNKNOWN unk_3029BB20; // weak
float flt_3029BB88; // weak
int dword_3029BCAC; // weak
float flt_3029BDC8; // weak
int dword_3029BEEC; // weak
int dword_3029C00C; // weak
int dword_3029C12C; // weak
int dword_3029C24C; // weak
int dword_3029C36C; // weak
int dword_3029C5AC; // weak
char byte_3029C6D0[284]; // idb
int dword_3029C7EC; // weak
int dword_3029C90C; // weak
float flt_3029CA28; // weak
int dword_3029CB4C; // weak
float flt_3029CD88; // weak
int dword_3029CEAC; // weak
float flt_3029CFC8; // weak
int dword_3029D0E8; // weak
float flt_3029D208; // weak
int dword_3029D32C; // weak
int dword_3029D44C; // weak
float flt_3029D568; // weak
float flt_3029D688; // weak
float flt_3029D8C8; // weak
int dword_3029D9D0; // weak
_UNKNOWN unk_3029D9E0; // weak
_UNKNOWN unk_3029DB54; // weak
int dword_302FA9E0; // weak
int dword_302FA9E4; // weak
_UNKNOWN unk_302FBC60; // weak
_UNKNOWN unk_30344DA8; // weak
_DWORD dword_305446A0; // idb
int dword_305446A4[2623]; // idb
int dword_30546FA0; // weak
int dword_30546FA4; // weak
int dword_30546FA8; // weak
int dword_30546FC0[512]; // idb
_UNKNOWN unk_305477C0; // weak
_UNKNOWN unk_305477E0; // weak
_UNKNOWN unk_30547800; // weak
_UNKNOWN unk_30547808; // weak
char byte_30563AC0[128]; // idb
char byte_30563B40[128]; // idb
int dword_30563BC0[511]; // idb
int dword_305643BC[]; // weak
int dword_305643C0; // idb
_UNKNOWN unk_305643C4; // weak


//----- (30001000) --------------------------------------------------------
int __stdcall sub_30001000(HWND hWnd, int a2)
{
  LONG v2; // esi
  LONG v3; // edi
  int v4; // eax
  CHAR String[1024]; // [esp+Ch] [ebp-404h] BYREF
  unsigned int v7; // [esp+40Ch] [ebp-4h]
  unsigned int retaddr; // [esp+410h] [ebp+0h]

  v7 = retaddr ^ dword_300705C0;
  if ( !GetWindowTextA(hWnd, String, 1024) || !strcmp(String, "Call of Duty Multiplayer") )
  {
    v2 = GetWindowLongA(hWnd, -16);
    v3 = GetWindowLongA(hWnd, -20);
    if ( (v2 & 0x10000000) != 0 )
    {
      v4 = dword_30079DC0;
      dword_30079DC4[dword_30079DC0] = (int)hWnd;
      dword_30079DC0 = v4 + 1;
      SetWindowLongA(hWnd, -16, v2 & 0xEFFFFFFF);
      SetWindowLongA(hWnd, -20, v3 & 0xFFFFFFF7);
    }
  }
  return 1;
}
// 300705C0: using guessed type int dword_300705C0;
// 30079DC0: using guessed type int dword_30079DC0;

//----- (300011D0) --------------------------------------------------------
int __usercall sub_300011D0@<eax>(_BYTE *a1@<eax>)
{
  _BYTE *v1; // esi
  char v2; // al
  int v3; // ebx
  int v4; // edi
  int v5; // ecx
  int result; // eax

  v1 = a1;
  v2 = *a1;
  v3 = 0;
  if ( !v2 )
    goto LABEL_6;
  v4 = 119 - (_DWORD)v1;
  do
  {
    v5 = (char)tolower(v2);
    v2 = v1[1];
    v3 += (_DWORD)&(v1++)[v4] * v5;
  }
  while ( v2 );
  if ( v3 == -1 )
    result = 0;
  else
LABEL_6:
    result = v3;
  return result;
}

//----- (30001220) --------------------------------------------------------
int sub_30001220(char *Format, ...)
{
  char Buffer[1024]; // [esp+0h] [ebp-404h] BYREF
  unsigned int v3; // [esp+400h] [ebp-4h]
  unsigned int retaddr; // [esp+404h] [ebp+0h]
  va_list va; // [esp+40Ch] [ebp+8h] BYREF

  va_start(va, Format);
  v3 = retaddr ^ dword_300705C0;
  vsprintf(Buffer, Format, va);
  if ( *(_DWORD *)off_300793A8 )
    sub_30021B10(1, (char *)&byte_3006B2A8, Buffer, *(_DWORD *)off_300793A8, *((_DWORD *)String + 256) + 1);
  else
    sub_30021B10(1, (char *)&byte_3006B2A4, Buffer);
  return sub_30052A2E(retaddr ^ v3);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;

//----- (300012D0) --------------------------------------------------------
int __usercall sub_300012D0@<eax>(char *a1@<esi>)
{
  int v1; // eax
  char *v2; // edi
  int v3; // ebp
  int v4; // ebx
  int result; // eax
  int v6; // eax
  int v7; // ebx
  int v8; // ebp
  char *v9; // edi
  int v10; // edi
  int *v11; // eax
  int v12; // ecx
  int v13; // [esp+Ch] [ebp-4h]
  int v14; // [esp+Ch] [ebp-4h]

  if ( dword_300954B8 )
  {
    v6 = sub_300011D0(a1);
    v7 = *(_DWORD *)dword_30092DA0;
    v8 = 0;
    v14 = v6;
    if ( *(int *)dword_30092DA0 <= 0 )
    {
LABEL_16:
      v10 = dword_300954B8 + 72 * v7;
      dword_300ACCB4("multiplayer", a1, v10);
      strcpy((char *)(v10 + 8), a1);
      v11 = (int *)dword_30092DA0;
      *(_DWORD *)(v10 + 4) = v14;
      v12 = *v11 + 1;
      *v11 = v12;
      result = v12 - 1;
    }
    else
    {
      v9 = (char *)(dword_300954B8 + 8);
      while ( v14 != *((_DWORD *)v9 - 1) || !a1 || !v9 || sub_30040170(99999, a1, v9) )
      {
        ++v8;
        v9 += 72;
        if ( v8 >= v7 )
          goto LABEL_16;
      }
      result = v8;
    }
  }
  else
  {
    v1 = sub_300011D0(a1);
    v2 = Destination;
    v3 = *((_DWORD *)Destination + 11776);
    v4 = 0;
    v13 = v1;
    if ( v3 <= 0 )
    {
LABEL_7:
      sub_30001220("BG_AnimationIndexForString: unknown player animation '%s'", a1);
      result = -1;
    }
    else
    {
      while ( v13 != *((_DWORD *)v2 + 19) || !a1 || sub_30040170(99999, a1, v2) )
      {
        ++v4;
        v2 += 92;
        if ( v4 >= v3 )
          goto LABEL_7;
      }
      result = v4;
    }
  }
  return result;
}
// 30092DA0: using guessed type int dword_30092DA0;
// 300954B8: using guessed type int dword_300954B8;
// 300ACCB4: using guessed type int (__cdecl *dword_300ACCB4)(_DWORD, _DWORD, _DWORD);

//----- (30001450) --------------------------------------------------------
int __usercall sub_30001450@<eax>(int a1@<eax>, char *a2@<edi>, int a3)
{
  int v4; // ebp
  int v5; // ebx
  char *v6; // ecx
  int v7; // eax
  int result; // eax

  v4 = sub_300011D0(a2);
  v5 = 0;
  if ( *(_DWORD *)a1 )
  {
    while ( 1 )
    {
      if ( *(_DWORD *)(a1 + 4) == -1 )
        *(_DWORD *)(a1 + 4) = sub_300011D0(*(_BYTE **)a1);
      if ( v4 == *(_DWORD *)(a1 + 4) )
      {
        v6 = *(char **)a1;
        if ( a2 )
        {
          if ( v6 && !sub_30040170(99999, a2, v6) )
            break;
        }
      }
      v7 = *(_DWORD *)(a1 + 8);
      a1 += 8;
      ++v5;
      if ( !v7 )
        goto LABEL_9;
    }
    result = v5;
  }
  else
  {
LABEL_9:
    if ( !a3 )
      sub_30001220("BG_IndexForString: unknown token '%s'", a2);
    result = -1;
  }
  return result;
}

//----- (300014D0) --------------------------------------------------------
char *__usercall sub_300014D0@<eax>(_DWORD *a1@<ebx>, const char *a2@<edi>, int a3, unsigned int a4)
{
  char *result; // eax

  if ( *a1 + strlen(a2) + 1 >= a4 )
    sub_30001220("BG_CopyStringIntoBuffer: out of buffer space");
  result = (char *)(a3 + *a1);
  strcpy(result, a2);
  *a1 += strlen(a2) + 1;
  return result;
}

//----- (30001530) --------------------------------------------------------
int sub_30001530()
{
  int result; // eax
  int i; // ebp
  char *v2; // esi
  char v3; // al
  int v4; // ebx
  int v5; // edi

  memset(dword_300F23A0, 0, 0x200u);
  dword_300F23A0[0] = (int)"none";
  dword_300F23A4[0] = sub_300011D0("none");
  result = dword_300F0FB0;
  for ( i = 1; i <= result; ++i )
  {
    v2 = *(char **)(*(_DWORD *)(dword_300F0FB4 + 4 * i) + 4);
    dword_300F23A0[2 * i] = (int)v2;
    v3 = *v2;
    v4 = 0;
    if ( *v2 )
    {
      v5 = 119 - (_DWORD)v2;
      do
      {
        v4 += (_DWORD)&v2[v5] * (char)tolower(v3);
        v3 = *++v2;
      }
      while ( v3 );
      if ( v4 == -1 )
        v4 = 0;
    }
    result = dword_300F0FB0;
    dword_300F23A4[2 * i] = v4;
  }
  return result;
}
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 300F23A0: using guessed type int dword_300F23A0[];

//----- (30001620) --------------------------------------------------------
int __thiscall sub_30001620(_DWORD *this)
{
  int v1; // eax
  _DWORD *v2; // edx
  int result; // eax
  _DWORD *v4; // edi
  int v5; // esi
  int v6; // edx
  _WORD *v7; // eax
  int v8; // [esp+4h] [ebp-4h]

  v1 = 0;
  if ( (int)this[11776] > 0 )
  {
    v2 = this + 22;
    do
    {
      *v2 = 0;
      ++v1;
      v2 += 23;
    }
    while ( v1 < this[11776] );
  }
  result = this[33707];
  v8 = 0;
  if ( result > 0 )
  {
    v4 = this + 33708;
    do
    {
      v5 = *v4;
      v6 = 0;
      if ( *(int *)(*v4 + 112) > 0 )
      {
        v7 = (_WORD *)(v5 + 118);
        do
        {
          if ( *(v7 - 1) )
            this[23 * (__int16)v7[1] + 22] = 1;
          if ( *v7 )
            this[23 * (__int16)v7[2] + 22] = 1;
          ++v6;
          v7 += 8;
        }
        while ( v6 < *(_DWORD *)(v5 + 112) );
      }
      result = v8 + 1;
      ++v4;
      ++v8;
    }
    while ( v8 < this[33707] );
  }
  return result;
}

//----- (300016C0) --------------------------------------------------------
int sub_300016C0()
{
  char *v0; // esi
  int v1; // ebx
  int v2; // edi
  char *v3; // esi
  const char *v4; // ebp
  int v5; // eax
  const char *v6; // eax
  int v7; // eax
  unsigned __int64 v8; // rax
  int i; // [esp+Ch] [ebp-2Ch]
  float v11; // [esp+2Ch] [ebp-Ch]
  float v12; // [esp+30h] [ebp-8h]
  float v13; // [esp+34h] [ebp-4h]

  v0 = Destination;
  dword_300ACCF8(*((_DWORD *)Destination + 159152));
  v1 = dword_30076898(184);
  *((_DWORD *)Destination + 11776) = v1;
  *((_DWORD *)v0 + 20) |= 0x101u;
  strncpy(v0, "root", 0x3Fu);
  v0[63] = 0;
  v2 = 1;
  *((_DWORD *)v0 + 19) = 0;
  v3 = v0 + 92;
  for ( i = 1; v2 < v1; i = v2 )
  {
    if ( (unsigned int)v2 >= *((_DWORD *)Destination + 11776) )
      sub_30021B10(1, (char *)&byte_3006B19C, v2, *((_DWORD *)Destination + 11776));
    v4 = (const char *)dword_300954B8;
    v5 = 0;
    if ( *(int *)dword_30092DA0 <= 0 )
    {
LABEL_7:
      *((_DWORD *)v3 + 20) |= 0x100u;
      strncpy(v3, "unused", 0x3Fu);
      v3[63] = 0;
      *((_DWORD *)v3 + 19) = 0;
    }
    else
    {
      while ( v2 != *(unsigned __int16 *)v4 )
      {
        ++v5;
        v4 += 72;
        if ( v5 >= *(_DWORD *)dword_30092DA0 )
          goto LABEL_7;
      }
      if ( dword_30076898(179) )
      {
        v6 = (const char *)dword_30076898(162);
        strncpy(v3, v6, 0x3Fu);
        v3[63] = 0;
        *((_DWORD *)v3 + 19) = sub_300011D0(v3);
        if ( !*((_DWORD *)v3 + 16) )
          *((_DWORD *)v3 + 16) = -1;
        v7 = dword_30076898(180);
        *((_DWORD *)v3 + 18) = v7;
        if ( v7 && (dword_30076898(156), v8 = (unsigned __int64)sqrt(v13 * v13 + v12 * v12 + v11 * v11), (_DWORD)v8) )
          *((_DWORD *)v3 + 17) = 1000 * (int)v8 / *((_DWORD *)v3 + 18);
        else
          *((_DWORD *)v3 + 17) = 0;
        if ( *((int *)v3 + 18) < 500 )
          *((_DWORD *)v3 + 18) = 500;
        if ( dword_30076898(144) )
          *((_DWORD *)v3 + 20) |= 0x80u;
      }
      else
      {
        *((_DWORD *)v3 + 20) |= 1u;
        strncpy(v3, v4 + 8, 0x3Fu);
        v3[63] = 0;
        *((_DWORD *)v3 + 19) = *((_DWORD *)v4 + 1);
        if ( !*((_DWORD *)v3 + 16) )
          *((_DWORD *)v3 + 16) = -1;
        *((_DWORD *)v3 + 18) = 0;
        *((_DWORD *)v3 + 17) = 0;
      }
      v2 = i;
    }
    ++v2;
    v3 += 92;
  }
  sub_30002480((int)Destination, 0, 0);
  return sub_30001620(Destination);
}
// 3000188D: variable 'v13' is possibly undefined
// 30001898: variable 'v12' is possibly undefined
// 300018A2: variable 'v11' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30092DA0: using guessed type int dword_30092DA0;
// 300954B8: using guessed type int dword_300954B8;
// 300ACCF8: using guessed type int (__cdecl *dword_300ACCF8)(_DWORD);

//----- (30001940) --------------------------------------------------------
int __cdecl sub_30001940(char **a1, int a2, int a3, _DWORD *a4)
{
  int v4; // ebp
  char *v5; // edi
  char *v6; // esi
  char *v7; // eax
  int v8; // eax
  int v9; // ecx
  int v10; // eax
  int v11; // ecx
  int v12; // eax
  int v13; // eax
  int v15; // [esp+10h] [ebp-54h]
  int v16; // [esp+18h] [ebp-4Ch]
  int v17; // [esp+1Ch] [ebp-48h]
  char v18[64]; // [esp+20h] [ebp-44h] BYREF
  unsigned int v19; // [esp+60h] [ebp-4h]
  unsigned int retaddr; // [esp+64h] [ebp+0h]

  v4 = 0;
  v19 = retaddr ^ dword_300705C0;
  v16 = 0;
  v5 = String;
  v15 = 0;
  v18[0] = 0;
  *a4 = 0;
  v17 = 0;
  while ( 1 )
  {
    while ( 1 )
    {
      if ( *((_DWORD *)v5 + 257) )
      {
        *((_DWORD *)v5 + 257) = 0;
        if ( !*((_DWORD *)v5 + 258) )
        {
          v6 = v5;
          goto LABEL_7;
        }
        *a1 = (char *)*((_DWORD *)v5 + 262);
        *((_DWORD *)v5 + 256) = *((_DWORD *)v5 + 261);
      }
      v7 = sub_3003F2E0(a1, 0);
      v5 = String;
      v6 = v7;
LABEL_7:
      if ( !v6 || !*v6 )
      {
        if ( *((_DWORD *)v5 + 257) )
        {
          sub_3003EF80("UngetToken called twice");
          v5 = String;
        }
        dword_300990CC = dword_300990C8;
        v4 = 1;
        *((_DWORD *)v5 + 257) = 1;
        if ( !strlen(v18) )
          return sub_30052A2E(retaddr ^ v19);
      }
      if ( !v6 )
        goto LABEL_20;
      if ( !sub_30040170(99999, v6, ",") )
        v4 = 1;
      if ( sub_30040170(99999, v6, "none") )
        break;
      *a4 |= 1u;
LABEL_53:
      if ( v4 )
        return sub_30052A2E(retaddr ^ v19);
    }
    if ( !sub_30040170(99999, v6, "none,") )
      break;
    if ( !sub_30040170(99999, v6, "NOT") )
      v6 = "MINUS";
LABEL_20:
    if ( !v4 && (!v6 || sub_30040170(99999, v6, "AND") && sub_30040170(99999, v6, "MINUS")) )
    {
      if ( v6[strlen(v6) - 1] == 44 )
      {
        v4 = 1;
        v6[strlen(v6) - 1] = 0;
      }
      if ( strlen(v18) )
        sub_30040290(64, v18, " ");
      sub_30040290(64, v18, v6);
      v5 = String;
    }
    if ( v6 && (!sub_30040170(99999, v6, "AND") || !sub_30040170(99999, v6, "MINUS")) || v4 )
    {
      if ( strlen(v18) )
        goto LABEL_41;
      if ( v4 )
      {
        sub_30001220("BG_ParseConditionBits: unexpected end of condition");
LABEL_40:
        v5 = String;
LABEL_41:
        if ( sub_30040170(99999, v18, "all") )
        {
          v10 = sub_30001450((int)&dword_30079DD8[32 * a3], v18, 1);
          if ( v10 < 0 )
          {
            v12 = sub_30001450(a2, v18, 0);
            *(&v16 + (v12 >> 5)) |= 1 << (v12 & 0x1F);
            v9 = v17;
            v8 = v16;
          }
          else
          {
            v11 = 2 * (v10 + 16 * a3);
            v8 = dword_3007A280[v11];
            v9 = dword_3007A284[v11];
            v16 = v8;
            v17 = v9;
          }
          v5 = String;
        }
        else
        {
          v8 = -1;
          v9 = -1;
          v16 = -1;
          v17 = -1;
        }
        if ( v15 )
        {
          *a4 &= ~v8;
          v13 = ~v9 & a4[1];
        }
        else
        {
          *a4 |= v8;
          v13 = v9 | a4[1];
        }
        a4[1] = v13;
        v18[0] = 0;
        if ( v6 && !sub_30040170(99999, v6, "MINUS") )
          v15 = 1;
        goto LABEL_53;
      }
      if ( !v6 || sub_30040170(99999, v6, "MINUS") )
      {
        sub_30001220("BG_ParseConditionBits: unexpected '%s'", v6);
        goto LABEL_40;
      }
      v15 = 1;
    }
  }
  *a4 |= 1u;
  return sub_30052A2E(retaddr ^ v19);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30079DD8: using guessed type int dword_30079DD8[];
// 3007A280: using guessed type int dword_3007A280[];
// 3007A284: using guessed type int dword_3007A284[];
// 300990C8: using guessed type int dword_300990C8;
// 300990CC: using guessed type int dword_300990CC;

//----- (30001CF0) --------------------------------------------------------
int __usercall sub_30001CF0@<eax>(_DWORD *a1@<esi>, char **a2)
{
  char *v2; // edi
  int v3; // ebp
  int v4; // eax
  char *v5; // edi
  int v6; // ecx
  int v8; // [esp+Ch] [ebp-8h] BYREF
  int i; // [esp+10h] [ebp-4h]

  v8 = 0;
  for ( i = 0; ; a1[3 * ++*a1] = i )
  {
    v2 = String;
    if ( !*((_DWORD *)String + 257) )
      goto LABEL_5;
    *((_DWORD *)String + 257) = 0;
    if ( *((_DWORD *)v2 + 258) )
    {
      *a2 = (char *)*((_DWORD *)v2 + 262);
      *((_DWORD *)v2 + 256) = *((_DWORD *)v2 + 261);
LABEL_5:
      v2 = sub_3003F2E0(a2, 0);
    }
    if ( !v2 || !*v2 )
      break;
    if ( !sub_30040170(99999, v2, "default") )
      return 1;
    v3 = sub_30001450((int)&off_300795D8, v2, 0);
    v4 = dword_30079628[2 * v3];
    if ( !v4 )
    {
      sub_30001940(a2, (int)(&off_3007962C)[2 * v3], v3, &v8);
      goto LABEL_24;
    }
    if ( v4 != 1 )
      goto LABEL_24;
    if ( !(&off_3007962C)[2 * v3] )
    {
      v8 = 1;
      goto LABEL_24;
    }
    v5 = String;
    if ( *((_DWORD *)String + 257) )
    {
      *((_DWORD *)String + 257) = 0;
      if ( !*((_DWORD *)v5 + 258) )
        goto LABEL_16;
      *a2 = (char *)*((_DWORD *)v5 + 262);
      *((_DWORD *)v5 + 256) = *((_DWORD *)v5 + 261);
    }
    v5 = sub_3003F2E0(a2, 0);
LABEL_16:
    if ( !v5 || !*v5 )
      sub_30001220("BG_ParseConditions: expected condition value, found end of line");
    if ( v5[strlen(v5) - 1] == 44 )
      v5[strlen(v5) - 1] = 0;
    v8 = sub_30001450((int)(&off_3007962C)[2 * v3], v5, 0);
LABEL_24:
    v6 = v8;
    a1[3 * *a1 + 1] = v3;
    a1[3 * *a1 + 2] = v6;
  }
  if ( !*a1 )
    sub_30001220("BG_ParseConditions: no conditions found");
  return 1;
}
// 300795D8: using guessed type char *off_300795D8;
// 30079628: using guessed type int dword_30079628[];
// 3007962C: using guessed type int *off_3007962C;

//----- (30001EB0) --------------------------------------------------------
char *__cdecl sub_30001EB0(char **a1, int *a2, int a3)
{
  char *v3; // esi
  int *v4; // ebx
  int v5; // ebp
  int v6; // eax
  char *result; // eax
  __int16 v8; // ax
  char *v9; // esi
  __int16 v10; // ax
  int v11; // eax
  int v12; // ecx
  int v13; // eax
  int v14; // ecx
  int v15; // eax
  int v16; // eax
  _DWORD *v17; // ecx
  int v18; // eax
  int v19; // eax
  int v20; // ecx
  int *v21; // eax
  int v22; // ecx
  int v23; // eax
  _DWORD *v24; // eax
  char *v25; // edi
  char *v26; // eax
  _DWORD *v27; // eax
  char *v28; // eax
  const char *v29; // esi
  int v30; // eax
  int v31; // ecx
  unsigned int v32; // kr00_4
  char *v33; // edi
  char *v34; // eax
  int v35; // eax
  unsigned int v36; // kr04_4

  v3 = String;
  v4 = 0;
LABEL_2:
  v5 = 0;
  while ( 1 )
  {
    v6 = *((_DWORD *)v3 + 257);
    if ( v5 < 1 )
    {
      if ( v6 )
      {
        *((_DWORD *)v3 + 257) = 0;
        *a1 = (char *)*((_DWORD *)v3 + 262);
        *((_DWORD *)v3 + 256) = *((_DWORD *)v3 + 261);
      }
      result = sub_3003F2E0(a1, 1);
      goto LABEL_11;
    }
    if ( !v6 )
      goto LABEL_10;
    *((_DWORD *)v3 + 257) = 0;
    result = (char *)*((_DWORD *)v3 + 258);
    if ( result )
    {
      *a1 = (char *)*((_DWORD *)v3 + 262);
      *((_DWORD *)v3 + 256) = *((_DWORD *)v3 + 261);
LABEL_10:
      result = sub_3003F2E0(a1, 0);
LABEL_11:
      v3 = result;
    }
    if ( !v3 || !*v3 )
      return result;
    if ( !sub_30040170(99999, v3, "}") )
      break;
    if ( !v5 )
    {
      if ( a2[28] >= 8 )
        sub_30001220("BG_ParseCommands: exceeded maximum number of animations (%i)", 8);
      v4 = &a2[4 * a2[28]++ + 29];
      *v4 = 0;
    }
    v8 = sub_30001450((int)&off_300794E8, v3, 1);
    *((_WORD *)v4 + v5) = v8;
    if ( v8 <= 0 )
    {
      v32 = strlen(v3);
      v3 = String;
      *a1 -= v32;
      goto LABEL_84;
    }
    v9 = String;
    if ( *((_DWORD *)String + 257) )
    {
      *((_DWORD *)String + 257) = 0;
      if ( !*((_DWORD *)v9 + 258) )
        goto LABEL_24;
      *a1 = (char *)*((_DWORD *)v9 + 262);
      *((_DWORD *)v9 + 256) = *((_DWORD *)v9 + 261);
    }
    v9 = sub_3003F2E0(a1, 0);
LABEL_24:
    if ( !v9 || !*v9 )
      sub_30001220("BG_ParseCommands: expected animation");
    v10 = sub_300012D0(v9);
    *((_WORD *)v4 + v5 + 2) = v10;
    v11 = 92 * v10 + a3;
    *((_WORD *)v4 + v5 + 4) = *(_WORD *)(v11 + 72);
    if ( !dword_300954B8 )
    {
      v12 = dword_3007A258;
      if ( !dword_3007A258 || *((_WORD *)v4 + v5) == 2 )
        goto LABEL_44;
      *(_DWORD *)(v11 + 84) |= 1 << dword_3007A258;
      if ( v12 == 16 || v12 == 17 )
      {
        v13 = 92 * *((__int16 *)v4 + v5 + 2);
        v14 = *(_DWORD *)(v13 + a3 + 68);
        v15 = a3 + v13;
        if ( v14 )
          *(_DWORD *)(v15 + 80) |= 2u;
      }
      v16 = 0;
      if ( *a2 <= 0 )
        goto LABEL_44;
      v17 = a2 + 1;
      while ( *v17 != 8 )
      {
        ++v16;
        v17 += 3;
        if ( v16 >= *a2 )
          goto LABEL_44;
      }
      v18 = a2[3 * v16 + 2];
      if ( v18 == 1 )
      {
        v19 = 92 * *((__int16 *)v4 + v5 + 2);
        v20 = *(_DWORD *)(v19 + a3 + 80);
        v21 = (int *)(v19 + a3 + 80);
        v22 = v20 | 0x10;
      }
      else
      {
        if ( v18 != 2 )
          goto LABEL_44;
        v21 = (int *)(92 * *((__int16 *)v4 + v5 + 2) + a3 + 80);
        v22 = *v21 | 0x20;
      }
      *v21 = v22;
LABEL_44:
      if ( dword_30079DD4 == 2 )
      {
        v23 = 92 * *((__int16 *)v4 + v5 + 2);
        *(_DWORD *)(v23 + a3 + 80) |= 8u;
        *(_DWORD *)(92 * *((__int16 *)v4 + v5 + 2) + a3 + 64) = 30;
      }
      else if ( dword_30079DD4 == 1 )
      {
        *(_DWORD *)(92 * *((__int16 *)v4 + v5 + 2) + a3 + 68) = 0;
        v24 = (_DWORD *)(92 * *((__int16 *)v4 + v5 + 2) + a3 + 80);
        *v24 |= 0x40u;
      }
    }
LABEL_48:
    v3 = String;
    while ( 1 )
    {
      if ( !*((_DWORD *)v3 + 257) )
        goto LABEL_53;
      *((_DWORD *)v3 + 257) = 0;
      if ( *((_DWORD *)v3 + 258) )
      {
        *a1 = (char *)*((_DWORD *)v3 + 262);
        *((_DWORD *)v3 + 256) = *((_DWORD *)v3 + 261);
LABEL_53:
        v26 = sub_3003F2E0(a1, 0);
        v3 = String;
        v25 = v26;
        goto LABEL_54;
      }
      v25 = v3;
LABEL_54:
      if ( !v25 || !*v25 )
        break;
      if ( !sub_30040170(99999, v25, "duration") )
      {
        if ( *((_DWORD *)v3 + 257) )
        {
          *((_DWORD *)v3 + 257) = 0;
          if ( !*((_DWORD *)v3 + 258) )
            goto LABEL_61;
          *a1 = (char *)*((_DWORD *)v3 + 262);
          *((_DWORD *)v3 + 256) = *((_DWORD *)v3 + 261);
        }
        v3 = sub_3003F2E0(a1, 0);
LABEL_61:
        if ( !v3 || !*v3 )
          sub_30001220("BG_ParseCommands: expected duration value");
        *((_WORD *)v4 + v5 + 4) = j__atol(v3);
        goto LABEL_48;
      }
      if ( sub_30040170(99999, v25, "turretanim") )
      {
        if ( sub_30040170(99999, v25, "blendtime") )
        {
          sub_3003F080();
          v3 = String;
          goto LABEL_80;
        }
        v28 = sub_3003F690(a1);
        v29 = v28;
        if ( !v28 || !*v28 )
          sub_30001220("BG_ParseCommands: expected blendtime value");
        if ( !dword_300954B8 )
          *(_DWORD *)(92 * *((__int16 *)v4 + v5 + 2) + a3 + 64) = j__atol(v29);
        goto LABEL_48;
      }
      if ( !dword_300954B8 )
      {
        v27 = (_DWORD *)(92 * *((__int16 *)v4 + v5 + 2) + a3 + 80);
        *v27 |= 4u;
      }
      if ( *((_WORD *)v4 + v5) != 3 )
      {
        sub_30001220("BG_ParseCommands: Turret animations can only be played on the 'both' body part");
        goto LABEL_48;
      }
    }
    if ( *((_DWORD *)v3 + 257) )
    {
      sub_3003EF80("UngetToken called twice");
      v3 = String;
    }
    v30 = dword_300990C8;
    *((_DWORD *)v3 + 257) = 1;
    dword_300990CC = v30;
LABEL_80:
    if ( *((_WORD *)v4 + v5) != 3 )
    {
      v31 = v5++;
      if ( v31 < 1 )
        continue;
    }
LABEL_84:
    while ( 2 )
    {
      if ( *((_DWORD *)v3 + 257) )
      {
        *((_DWORD *)v3 + 257) = 0;
        if ( !*((_DWORD *)v3 + 258) )
        {
          v33 = v3;
LABEL_89:
          if ( !v33 || !*v33 )
            goto LABEL_2;
          if ( sub_30040170(99999, v33, "sound") )
          {
            sub_30001220("BG_ParseCommands: unknown parameter '%s'", v33);
            v3 = String;
            continue;
          }
          if ( *((_DWORD *)v3 + 257) )
          {
            *((_DWORD *)v3 + 257) = 0;
            if ( *((_DWORD *)v3 + 258) )
            {
              *a1 = (char *)*((_DWORD *)v3 + 262);
              *((_DWORD *)v3 + 256) = *((_DWORD *)v3 + 261);
              goto LABEL_95;
            }
          }
          else
          {
LABEL_95:
            v3 = sub_3003F2E0(a1, 0);
          }
          if ( !v3 || !*v3 )
            sub_30001220("BG_ParseCommands: expected sound");
          if ( strstr(v3, ".wav") )
            sub_30001220("BG_ParseCommands: wav files not supported, only sound scripts");
          v35 = (*((int (__cdecl **)(char *))Destination + 159156))(v3);
          v3 = String;
          v4[3] = v35;
          continue;
        }
        *a1 = (char *)*((_DWORD *)v3 + 262);
        *((_DWORD *)v3 + 256) = *((_DWORD *)v3 + 261);
      }
      break;
    }
    v34 = sub_3003F2E0(a1, 0);
    v3 = String;
    v33 = v34;
    goto LABEL_89;
  }
  v36 = strlen(v3);
  result = (char *)a1;
  *a1 -= v36;
  return result;
}
// 300794E8: using guessed type char *off_300794E8;
// 30079DD4: using guessed type int dword_30079DD4;
// 3007A258: using guessed type int dword_3007A258;
// 300954B8: using guessed type int dword_300954B8;
// 300990C8: using guessed type int dword_300990C8;
// 300990CC: using guessed type int dword_300990CC;

//----- (30002480) --------------------------------------------------------
char *__cdecl sub_30002480(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // ebx
  char *v5; // eax
  int v6; // edx
  char *v7; // eax
  char *v8; // edi
  int v9; // esi
  int v10; // esi
  char *v11; // edi
  int v12; // edx
  int v13; // esi
  char *v14; // edi
  int v15; // edx
  char *v16; // eax
  char *v17; // eax
  int v18; // edx
  const char *v19; // ebx
  bool v20; // zf
  char *v21; // edi
  char *v22; // edx
  int v23; // eax
  int v24; // eax
  int *v25; // esi
  int v26; // edi
  char *v27; // edi
  int v28; // esi
  char *v29; // edi
  char *v30; // edx
  int v31; // eax
  int v32; // eax
  int *v33; // edi
  int v34; // eax
  char *result; // eax
  const char *v36; // [esp+0h] [ebp-128h]
  char *v37; // [esp+Ch] [ebp-11Ch] BYREF
  int v38; // [esp+10h] [ebp-118h]
  int *v39; // [esp+14h] [ebp-114h]
  int v40; // [esp+18h] [ebp-110h]
  int v41; // [esp+1Ch] [ebp-10Ch]
  int v42; // [esp+20h] [ebp-108h]
  int *v43; // [esp+24h] [ebp-104h]
  int v44; // [esp+2Ch] [ebp-FCh]
  _DWORD v45[62]; // [esp+30h] [ebp-F8h] BYREF

  v43 = 0;
  if ( !dword_300F0FC0 )
  {
    v3 = dword_30076898(15);
    if ( v3 <= 0 )
      sub_30021B10(1, (char *)&byte_3006AE5C, *(_DWORD *)off_300793A8);
    if ( (unsigned int)v3 >= 0x1869F )
      sub_30021B10(1, (char *)&byte_3006AE5C, *(_DWORD *)off_300793A8);
    dword_30076898(16);
    byte_3007A700[v3] = 0;
    dword_30076898(18);
    dword_300F0FC0 = 1;
  }
  v4 = 0;
  Destination = (char *)a1;
  dword_300954B8 = a2;
  dword_30092DA0 = a3;
  v44 = 0;
  sub_30001530();
  memset(dword_30079DD8, 0, 0x480u);
  memset(&unk_30092DA8, 0, 0x2710u);
  memset(dword_3007A25C, 0, 0x24u);
  dword_30092DA4 = 0;
  v42 = -1;
  v40 = -1;
  v41 = -1;
  v38 = 0;
  v39 = 0;
  v37 = byte_3007A700;
  sub_3003EE60("BG_AnimParseAnimScript");
  while ( 1 )
  {
    v5 = String;
    if ( *((_DWORD *)String + 257) )
    {
      *((_DWORD *)String + 257) = 0;
      v6 = *((_DWORD *)v5 + 261);
      v37 = (char *)*((_DWORD *)v5 + 262);
      *((_DWORD *)v5 + 256) = v6;
    }
    v7 = sub_3003F2E0(&v37, 1);
    v8 = v7;
    if ( !v7 || !*v7 )
      break;
    v9 = sub_30001450((int)&off_30079688, v7, 1);
    if ( v9 < 0 )
    {
      v10 = v44;
      switch ( v44 )
      {
        case 0:
          if ( sub_30040170(99999, v8, "set") )
            continue;
          v11 = String;
          if ( !*((_DWORD *)String + 257) )
            goto LABEL_21;
          *((_DWORD *)String + 257) = 0;
          if ( *((_DWORD *)v11 + 258) )
          {
            v12 = *((_DWORD *)v11 + 261);
            v37 = (char *)*((_DWORD *)v11 + 262);
            *((_DWORD *)v11 + 256) = v12;
LABEL_21:
            v11 = sub_3003F2E0(&v37, 0);
          }
          if ( !v11 || !*v11 )
            sub_30001220("BG_AnimParseAnimScript: expected condition type string");
          v13 = sub_30001450((int)&off_300795D8, v11, 0);
          if ( dword_30079628[2 * v13] )
            sub_30001220("BG_AnimParseAnimScript: can not make a define of type '%s'", v11);
          v14 = String;
          if ( !*((_DWORD *)String + 257) )
            goto LABEL_30;
          *((_DWORD *)String + 257) = 0;
          if ( *((_DWORD *)v14 + 258) )
          {
            v15 = *((_DWORD *)v14 + 261);
            v37 = (char *)*((_DWORD *)v14 + 262);
            *((_DWORD *)v14 + 256) = v15;
LABEL_30:
            v14 = sub_3003F2E0(&v37, 0);
          }
          if ( !v14 || !*v14 )
            sub_30001220("BG_AnimParseAnimScript: expected condition define string");
          v16 = sub_300014D0(&dword_30092DA4, v14, (int)&unk_30092DA8, 0x2710u);
          dword_30079DD8[32 * v13 + 2 * dword_3007A25C[v13]] = (int)v16;
          dword_30079DDC[32 * v13 + 2 * dword_3007A25C[v13]] = sub_300011D0(v16);
          v17 = String;
          if ( *((_DWORD *)String + 257) )
          {
            *((_DWORD *)String + 257) = 0;
            if ( !*((_DWORD *)v17 + 258) )
              goto LABEL_38;
            v18 = *((_DWORD *)v17 + 261);
            v37 = (char *)*((_DWORD *)v17 + 262);
            *((_DWORD *)v17 + 256) = v18;
          }
          v17 = sub_3003F2E0(&v37, 0);
LABEL_38:
          v19 = v17;
          if ( v17 )
          {
            if ( !sub_30040170(99999, v17, "=") )
              goto LABEL_42;
          }
          else
          {
            sub_30001220("BG_AnimParseAnimScript: expected '=', found end of line");
          }
          sub_30001220("BG_AnimParseAnimScript: expected '=', found '%s'", v19);
LABEL_42:
          sub_30001940(&v37, (int)(&off_3007962C)[2 * v13], v13, &dword_3007A280[32 * v13 + 2 * dword_3007A25C[v13]]);
          v4 = v38;
          ++dword_3007A25C[v13];
          continue;
        case 1:
        case 2:
          if ( sub_30040170(99999, v8, "{") )
          {
            if ( !sub_30040170(99999, v8, "}") )
            {
              v38 = --v4;
              if ( v4 < 0 )
                sub_30001220("BG_AnimParseAnimScript: unexpected '%s'", v8);
              v20 = v4 == 1;
              goto LABEL_93;
            }
            if ( v4 )
            {
              if ( v4 != 1 )
              {
                if ( v4 == 2 )
                {
                  if ( v42 >= 0 )
                    goto LABEL_82;
                  v37 -= strlen(v8);
                  if ( sub_300401D0(strlen(v8), v37, v8) )
                    sub_30001220("BG_AnimParseAnimScript: internal error");
                  memset(v45, 0, 0xF4u);
                  v24 = sub_30001CF0(v45, &v37);
                  v25 = v39;
                  v42 = v24;
                  if ( *v39 >= 128 )
                    sub_30001220("BG_AnimParseAnimScript: exceeded maximum items per script (%i)", 128);
                  v26 = a1;
                  if ( *(int *)(a1 + 636604) >= 2048 )
                    sub_30001220("BG_AnimParseAnimScript: exceeded maximum global items (%i)", 2048);
                  v25[*v25 + 1] = 244 * *(_DWORD *)(a1 + 636604) + a1 + 136892;
                  goto LABEL_119;
                }
                if ( v4 != 3 )
                  goto LABEL_82;
                v37 -= strlen(v8);
                if ( sub_300401D0(strlen(v8), v37, v8) )
                  sub_30001220("BG_AnimParseAnimScript: internal error");
                goto LABEL_81;
              }
              if ( v41 >= 0 )
                goto LABEL_82;
              v23 = sub_30001450((int)&off_300793D8, v8, 0);
              v41 = v23;
              if ( v10 == 1 )
              {
                v39 = (int *)(516 * (v23 + 18 * v40) + a1 + 47108);
                dword_3007A258 = v23;
                memset(v39, 0, 0x204u);
              }
              else
              {
                if ( v10 == 2 )
                  v39 = (int *)(516 * (v23 + 18 * v40) + a1 + 84260);
                memset(v39, 0, 0x204u);
              }
            }
            else
            {
              if ( v40 >= 0 )
                goto LABEL_82;
              if ( sub_30040170(99999, v8, "state") )
                sub_30001220("BG_AnimParseAnimScript: expected 'state'");
              v21 = sub_3003F690(&v37);
              if ( !v21 )
                sub_30001220("BG_AnimParseAnimScript: expected state type");
              v40 = sub_30001450((int)&off_300793AC, v21, 0);
              v22 = sub_3003F650(&v37);
              if ( !v22 || sub_30040170(99999, v22, "{") )
                sub_30001220("BG_AnimParseAnimScript: expected '{'");
              v38 = 1;
              v4 = 1;
            }
          }
          else
          {
            if ( v4 >= 3 )
              sub_30001220("BG_AnimParseAnimScript: unexpected '%s'", v8);
            if ( *(&v40 + v4) >= 0 )
              goto LABEL_88;
            sub_30001220("BG_AnimParseAnimScript: unexpected '%s'", v8);
            v38 = ++v4;
          }
          continue;
        case 3:
        case 4:
          if ( sub_30040170(99999, v8, "{") )
          {
            if ( sub_30040170(99999, v8, "}") )
            {
              if ( v4 )
              {
                if ( v4 == 1 )
                {
                  if ( v41 >= 0 )
                    goto LABEL_82;
                  v37 -= strlen(v8);
                  if ( sub_300401D0(strlen(v8), v37, v8) )
                    sub_30001220("BG_AnimParseAnimScript: internal error");
                  memset(v45, 0, 0xF4u);
                  v32 = sub_30001CF0(v45, &v37);
                  v25 = v39;
                  v41 = v32;
                  if ( *v39 >= 128 )
                    sub_30001220("BG_AnimParseAnimScript: exceeded maximum items per script (%i)", 128);
                  v26 = a1;
                  if ( *(int *)(a1 + 636604) >= 2048 )
                    sub_30001220("BG_AnimParseAnimScript: exceeded maximum global items (%i)", 2048);
                  v25[*v25 + 1] = 244 * *(_DWORD *)(a1 + 636604) + a1 + 136892;
LABEL_119:
                  v4 = v38;
                  ++*(_DWORD *)(v26 + 636604);
                  v33 = (int *)v25[++*v25];
                  v43 = v33;
                  qmemcpy(v33, v45, 0xF4u);
                }
                else
                {
                  if ( v4 != 2 )
                  {
LABEL_82:
                    sub_30001220("BG_AnimParseAnimScript: unexpected '%s'", v8);
                    continue;
                  }
                  v37 -= strlen(v8);
                  if ( sub_300401D0(strlen(v8), v37, v8) )
                    sub_30001220("BG_AnimParseAnimScript: internal error");
LABEL_81:
                  sub_30001EB0(&v37, v43, a1);
                }
              }
              else
              {
                if ( v40 >= 0 )
                  goto LABEL_82;
                if ( v10 == 3 )
                {
                  if ( sub_30040170(99999, v8, "statechange") )
                    sub_30001220("BG_AnimParseAnimScript: expected 'statechange', got '%s'", v8);
                  v27 = sub_3003F690(&v37);
                  if ( !v27 )
                    sub_30001220("BG_AnimParseAnimScript: expected <state type>");
                  v28 = sub_30001450((int)&off_300793AC, v27, 0);
                  v29 = sub_3003F690(&v37);
                  if ( !v29 )
                    sub_30001220("BG_AnimParseAnimScript: expected <state type>");
                  v40 = sub_30001450((int)&off_300793AC, v29, 0);
                  v39 = (int *)(516 * (v40 + 4 * v28) + a1 + 121412);
                  v30 = sub_3003F650(&v37);
                  if ( !v30 || sub_30040170(99999, v30, "{") )
                    sub_30001220("BG_AnimParseAnimScript: expected '{'");
                  v38 = 1;
                  v4 = 1;
                  memset(v39, 0, 0x204u);
                }
                else
                {
                  v31 = sub_30001450((int)&off_30079470, v8, 0);
                  v39 = (int *)(516 * v31 + a1 + 129668);
                  v40 = v31;
                  dword_30079DD4 = v31;
                  memset(v39, 0, 0x204u);
                }
              }
            }
            else
            {
              v38 = --v4;
              if ( v4 < 0 )
                sub_30001220("BG_AnimParseAnimScript: unexpected '%s'", v8);
              v20 = v4 == 0;
LABEL_93:
              if ( v20 )
                v39 = 0;
              *(&v40 + v4) = -1;
            }
          }
          else
          {
            if ( v4 >= 3 )
              sub_30001220("BG_AnimParseAnimScript: unexpected '%s'", v8);
            if ( *(&v40 + v4) < 0 )
              sub_30001220("BG_AnimParseAnimScript: unexpected '%s'", v8);
LABEL_88:
            v38 = ++v4;
          }
          break;
        default:
          continue;
      }
    }
    else
    {
      if ( v4 )
        sub_30001220("BG_AnimParseAnimScript: unexpected '%s'", v8);
      v44 = v9;
      dword_3007A258 = 0;
      dword_30079DD4 = -1;
    }
  }
  if ( v4 )
    sub_30001220("BG_AnimParseAnimScript: unexpected end of file: %s", v36);
  v34 = dword_30098CC0;
  *(_DWORD *)off_300793A8 = 0;
  if ( !dword_30098CC0 )
  {
    sub_30021B10(0, (char *)&byte_30063DE4);
    v34 = dword_30098CC0;
  }
  dword_30098CC0 = v34 - 1;
  result = (char *)&unk_30071B08 + 1116 * v34 - 1116;
  String = result;
  return result;
}
// 30002EA1: variable 'v36' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300793AC: using guessed type char *off_300793AC;
// 300793D8: using guessed type char *off_300793D8;
// 30079470: using guessed type char *off_30079470;
// 300795D8: using guessed type char *off_300795D8;
// 30079628: using guessed type int dword_30079628[];
// 3007962C: using guessed type int *off_3007962C;
// 30079688: using guessed type char *off_30079688;
// 30079DD4: using guessed type int dword_30079DD4;
// 30079DD8: using guessed type int dword_30079DD8[];
// 3007A258: using guessed type int dword_3007A258;
// 3007A25C: using guessed type int dword_3007A25C[];
// 3007A280: using guessed type int dword_3007A280[];
// 30092DA0: using guessed type int dword_30092DA0;
// 30092DA4: using guessed type int dword_30092DA4;
// 300954B8: using guessed type int dword_300954B8;
// 300F0FC0: using guessed type int dword_300F0FC0;

//----- (30002F00) --------------------------------------------------------
int __usercall sub_30002F00@<eax>(int *a1@<ecx>, int a2@<esi>)
{
  int v2; // ebx
  int v3; // edi
  int *i; // eax
  int v5; // ecx
  int v6; // edx

  v2 = *a1;
  v3 = 0;
  for ( i = a1 + 1; v3 < v2; i += 3 )
  {
    v5 = *i;
    v6 = dword_30079628[2 * *i];
    if ( v6 )
    {
      if ( v6 == 1 && *(_DWORD *)(a2 + 8 * v5 + 1116) != i[1] )
        return 0;
    }
    else if ( (*(_DWORD *)(a2 + 8 * v5 + 1116) & i[1]) == 0 && (*(_DWORD *)(a2 + 8 * v5 + 1120) & i[2]) == 0 )
    {
      return 0;
    }
    ++v3;
  }
  return 1;
}
// 30079628: using guessed type int dword_30079628[];

//----- (30002F60) --------------------------------------------------------
int *__usercall sub_30002F60@<eax>(_DWORD *a1@<eax>, int a2@<ecx>)
{
  int v2; // ebp
  int v3; // edi
  int **v4; // ebx
  int *v5; // esi

  v2 = *a1;
  v3 = 0;
  v4 = (int **)(a1 + 1);
  if ( (int)*a1 <= 0 )
    return 0;
  v5 = &dword_3018DC8C[300 * a2];
  while ( !sub_30002F00(*v4, (int)v5) )
  {
    ++v3;
    ++v4;
    if ( v3 >= v2 )
      return 0;
  }
  return *v4;
}
// 3018DC8C: using guessed type int dword_3018DC8C[];

//----- (30002FB0) --------------------------------------------------------
int __usercall sub_30002FB0@<eax>(int result@<eax>, _DWORD *a2@<edx>, int a3@<ecx>, int a4@<edi>, int a5, int a6, int a7)
{
  int v7; // ebp
  bool v8; // zf

  v7 = 0;
  if ( !result )
    result = *(_DWORD *)&Destination[92 * a3 + 72] + 50;
  switch ( a5 )
  {
    case 1:
      goto LABEL_7;
    case 2:
      goto LABEL_17;
    case 3:
LABEL_7:
      if ( (int)a2[27] < 50 || a7 )
      {
        if ( !a6 || (a2[28] & 0xFFFFFDFF) != a3 )
        {
          v7 = 1;
          a2[28] = a3 | ~(unsigned __int16)a2[28] & 0x200;
          v8 = a4 == 0;
LABEL_13:
          if ( !v8 )
            a2[27] = result;
          goto LABEL_15;
        }
        if ( a4 )
        {
          v8 = Destination[92 * a3 + 80] >= 0;
          goto LABEL_13;
        }
      }
LABEL_15:
      if ( a5 != 3 )
        goto LABEL_26;
      a3 = 0;
LABEL_17:
      if ( (int)a2[29] < 50 || a7 )
      {
        if ( !a6 || (a2[30] & 0xFFFFFDFF) != a3 )
        {
          a2[30] = a3 | ~(unsigned __int16)a2[30] & 0x200;
          if ( !a4 )
            goto LABEL_26;
          goto LABEL_25;
        }
        if ( a4 && Destination[92 * a3 + 80] < 0 )
        {
LABEL_25:
          a2[29] = result;
          goto LABEL_26;
        }
      }
LABEL_26:
      if ( v7 )
        return result;
      break;
  }
  return -1;
}

//----- (300030C0) --------------------------------------------------------
int __usercall sub_300030C0@<eax>(__int16 *a1@<eax>, _DWORD *a2, int a3, int a4, int a5)
{
  __int16 v6; // ax
  int v7; // esi
  int v8; // edi
  __int16 v9; // ax
  int v10; // ebx
  int result; // eax
  BOOL v12; // [esp+10h] [ebp-4h]

  v6 = *a1;
  v7 = -1;
  v8 = a3;
  v12 = 0;
  if ( v6 )
  {
    v7 = a1[4] + 50;
    if ( v6 == 1 || v6 == 3 )
      v12 = sub_30002FB0(v7, a2, a1[2], a3, v6, a4, a5) > -1;
    else
      sub_30002FB0(v7, a2, a1[2], a3, v6, a4, a5);
    v8 = a3;
  }
  v9 = a1[1];
  if ( v9 )
  {
    v7 = a1[4] + 50;
    if ( *a1 == 1 || *a1 == 3 )
      v12 = sub_30002FB0(v7, a2, a1[3], v8, v9, a4, a5) > -1;
    else
      sub_30002FB0(v7, a2, a1[3], v8, v9, a4, a5);
  }
  v10 = *((_DWORD *)a1 + 3);
  if ( v10 )
    (*((void (__cdecl **)(_DWORD, int))Destination + 159157))(a2[43], v10);
  if ( v12 )
    result = v7;
  else
    result = -1;
  return result;
}

//----- (300031F0) --------------------------------------------------------
int __cdecl sub_300031F0(_DWORD *a1, int a2, int a3, int a4)
{
  int v5; // ecx
  char *v6; // eax
  int **v7; // eax
  int v8; // ebp
  int v9; // edi
  int **v10; // ebx
  int *v11; // esi
  int *v12; // ebx
  int *v13; // [esp+4h] [ebp-8h]
  int **v14; // [esp+8h] [ebp-4h]

  if ( (int)a1[1] >= 6 )
    return -1;
  v5 = a2;
  v6 = &Destination[9288 * a2 + 516 * a3];
  v13 = (int *)(v6 + 47108);
  v7 = (int **)(v6 + 47112);
LABEL_4:
  v14 = v7;
  while ( v5 >= 0 )
  {
    v8 = *v13;
    if ( *v13 )
    {
      v9 = 0;
      v10 = v7;
      if ( v8 <= 0 )
        goto LABEL_16;
      v11 = &dword_3018DC8C[300 * a1[43]];
      while ( !sub_30002F00(*v10, (int)v11) )
      {
        ++v9;
        ++v10;
        if ( v9 >= v8 )
          goto LABEL_16;
      }
      v12 = *v10;
      if ( !v12 )
      {
LABEL_16:
        v5 = --a2;
        v13 -= 2322;
        v7 = v14 - 2322;
        goto LABEL_4;
      }
      if ( v12[28] )
      {
        sub_30003460(a1[43], 3, a3, 1);
        return sub_300030C0((__int16 *)&v12[4 * (a1[43] % v12[28]) + 29], a1, 0, a4, 0) != -1;
      }
      return -1;
    }
    --v5;
    v7 -= 2322;
    a2 = v5;
    v13 -= 2322;
    v14 = v7;
  }
  return -1;
}
// 3000326E: conditional instruction was optimized away because of 'ebx.4==0'
// 30003330: conditional instruction was optimized away because of 'ebx.4==0'
// 3018DC8C: using guessed type int dword_3018DC8C[];

//----- (30003460) --------------------------------------------------------
int *__usercall sub_30003460@<eax>(int a1@<eax>, int a2@<edx>, int a3@<ecx>, int a4)
{
  int v4; // eax
  int *result; // eax

  if ( !a4 || dword_30079628[2 * a2] )
  {
    result = (int *)(a2 + 150 * a1);
    dword_3018E0E8[2 * (_DWORD)result] = a3;
  }
  else
  {
    v4 = 2 * (a2 + 150 * a1);
    dword_3018E0E8[v4] = 0;
    dword_3018E0EC[v4] = 0;
    result = &dword_3018E0E8[(a3 >> 5) + v4];
    *result |= 1 << (a3 & 0x1F);
  }
  return result;
}
// 30079628: using guessed type int dword_30079628[];
// 3018E0E8: using guessed type int dword_3018E0E8[];
// 3018E0EC: using guessed type int dword_3018E0EC[];

//----- (300034D0) --------------------------------------------------------
int __usercall sub_300034D0@<eax>(int a1@<edx>, int a2@<ecx>, int a3@<esi>)
{
  int result; // eax

  result = *(_DWORD *)(a3 + 8 * a2 + 1116);
  if ( a1 && !dword_30079628[2 * a2] )
  {
    result = 0;
    while ( ((1 << (result & 0x1F)) & *(_DWORD *)(a3 + 4 * (2 * a2 + (result >> 5)) + 1116)) == 0 )
    {
      if ( (unsigned int)++result >= 0x40 )
        return 0;
    }
  }
  return result;
}
// 30079628: using guessed type int dword_30079628[];

//----- (300035B0) --------------------------------------------------------
int __cdecl sub_300035B0(_BYTE *a1)
{
  int v1; // esi
  int v2; // ecx
  int v3; // eax
  int v4; // eax
  int v5; // ecx
  int v6; // ecx
  int v7; // eax
  int v8; // eax
  int v9; // ecx
  int v10; // ecx
  int v11; // eax
  int v12; // eax
  int v13; // ecx
  BOOL v14; // ecx
  int v15; // eax
  int v16; // eax
  int v17; // ecx
  int result; // eax

  v1 = *(_DWORD *)a1;
  v2 = *(_DWORD *)(*(_DWORD *)a1 + 176);
  v3 = 300 * *(_DWORD *)(*(_DWORD *)a1 + 172);
  if ( dword_30079628[0] )
  {
    dword_3018E0E8[v3] = v2;
  }
  else
  {
    dword_3018E0E8[v3] = 0;
    dword_3018E0EC[v3] = 0;
    dword_3018E0E8[(v2 >> 5) + v3] |= 1 << (v2 & 0x1F);
  }
  v4 = 300 * *(_DWORD *)(v1 + 172);
  v5 = *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(v1 + 176)) + 116);
  if ( dword_30079630 )
  {
    dword_3018E0F0[v4] = v5;
  }
  else
  {
    dword_3018E0F0[v4] = 0;
    dword_3018E0F4[v4] = 0;
    dword_3018E0F0[(v5 >> 5) + v4] |= 1 << (v5 & 0x1F);
  }
  v6 = dword_30079660;
  v7 = *(_DWORD *)(v1 + 172);
  if ( (*(_DWORD *)(v1 + 128) & 0x200) != 0 )
  {
    v8 = 300 * v7;
    if ( dword_30079660 )
    {
      dword_3018E120[v8] = 1;
      goto LABEL_14;
    }
    dword_3018E120[v8] = 0;
    dword_3018E124[v8] = 0;
    v9 = 2;
  }
  else
  {
    v8 = 300 * v7;
    dword_3018E120[v8] = 0;
    if ( v6 )
      goto LABEL_14;
    dword_3018E124[v8] = 0;
    v9 = 1;
  }
  dword_3018E120[v8] = v9;
LABEL_14:
  v10 = dword_30079638;
  v11 = *(_DWORD *)(v1 + 172);
  if ( (*(_DWORD *)(v1 + 128) & 0xC000) != 0 )
  {
    v12 = 300 * v11;
    if ( dword_30079638 )
    {
      dword_3018E0F8[v12] = 1;
      goto LABEL_21;
    }
    dword_3018E0F8[v12] = 0;
    dword_3018E0FC[v12] = 0;
    v13 = 2;
  }
  else
  {
    v12 = 300 * v11;
    dword_3018E0F8[v12] = 0;
    if ( v10 )
      goto LABEL_21;
    dword_3018E0FC[v12] = 0;
    v13 = 1;
  }
  dword_3018E0F8[v12] = v13;
LABEL_21:
  v14 = *(float *)(v1 + 192) > 0.0;
  v15 = 300 * *(_DWORD *)(v1 + 172);
  if ( dword_30079648 )
  {
    dword_3018E108[v15] = v14;
  }
  else
  {
    dword_3018E108[v15] = 0;
    dword_3018E10C[v15] = 0;
    dword_3018E108[(v14 >> 5) + v15] |= 1 << (v14 & 0x1F);
  }
  v16 = *(_DWORD *)(v1 + 172);
  v17 = dword_30079658;
  if ( (a1[8] & 1) != 0 )
  {
    result = 300 * v16;
    if ( dword_30079658 )
    {
      dword_3018E118[result] = 1;
    }
    else
    {
      dword_3018E118[result] = 0;
      dword_3018E11C[result] = 0;
      dword_3018E118[result] = 2;
    }
  }
  else
  {
    result = 300 * v16;
    dword_3018E118[result] = 0;
    if ( !v17 )
    {
      dword_3018E11C[result] = 0;
      dword_3018E118[result] = 1;
    }
  }
  return result * 4;
}
// 30079628: using guessed type int dword_30079628[];
// 30079630: using guessed type int dword_30079630;
// 30079638: using guessed type int dword_30079638;
// 30079648: using guessed type int dword_30079648;
// 30079658: using guessed type int dword_30079658;
// 30079660: using guessed type int dword_30079660;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3018E0E8: using guessed type int dword_3018E0E8[];
// 3018E0EC: using guessed type int dword_3018E0EC[];
// 3018E0F0: using guessed type int dword_3018E0F0[];
// 3018E0F4: using guessed type int dword_3018E0F4[];
// 3018E0F8: using guessed type int dword_3018E0F8[];
// 3018E0FC: using guessed type int dword_3018E0FC[];
// 3018E108: using guessed type int dword_3018E108[];
// 3018E10C: using guessed type int dword_3018E10C[];
// 3018E118: using guessed type int dword_3018E118[];
// 3018E11C: using guessed type int dword_3018E11C[];
// 3018E120: using guessed type int dword_3018E120[];
// 3018E124: using guessed type int dword_3018E124[];

//----- (300037E0) --------------------------------------------------------
BOOL __usercall sub_300037E0@<eax>(int a1@<eax>)
{
  unsigned int v1; // esi

  v1 = a1 & 0xFFFFFDFF;
  if ( (a1 & 0xFFFFFDFF) >= *((_DWORD *)Destination + 11776) )
    sub_30021B10(1, (char *)&byte_3006AABC);
  return (Destination[92 * v1 + 84] & 0xC4) != 0;
}

//----- (30003820) --------------------------------------------------------
BOOL __usercall sub_30003820@<eax>(int a1@<eax>)
{
  unsigned int v1; // esi

  v1 = a1 & 0xFFFFFDFF;
  if ( (a1 & 0xFFFFFDFF) >= *((_DWORD *)Destination + 11776) )
    sub_30021B10(1, (char *)&byte_3006AABC);
  return (*(_DWORD *)&Destination[92 * v1 + 84] & 0x308) != 0;
}

//----- (30003870) --------------------------------------------------------
int __usercall sub_30003870@<eax>(_DWORD *a1@<esi>, _DWORD *a2, int a3, int a4)
{
  int v4; // ebp
  int v5; // ebx
  char *v6; // edi
  int result; // eax
  BOOL v8; // ebp
  const char *v9; // eax
  int v10; // [esp+28h] [ebp-1Ch]
  int v11; // [esp+2Ch] [ebp-18h]
  int v12; // [esp+38h] [ebp-Ch]
  BOOL v13; // [esp+3Ch] [ebp-8h]
  BOOL v14; // [esp+3Ch] [ebp-8h]

  v4 = -1;
  v10 = a1[4];
  v12 = 0;
  v11 = a1[5];
  if ( !v11 )
    v12 = 1;
  a1[4] = a3;
  v5 = a3 & 0xFFFFFDFF;
  if ( (a3 & 0xFFFFFDFF) >= *(_DWORD *)dword_300FDDA0 )
    sub_30021B10(1, (char *)&byte_3006AA8C, *(_DWORD *)dword_300FDDA0, v5);
  dword_300ACCF8(dword_3018DC60);
  if ( v5 )
  {
    v6 = (char *)&unk_300F25A0 + 92 * v5;
    a1[5] = v6;
    a1[6] = *((_DWORD *)v6 + 16);
    if ( a1 == a2 + 224 )
    {
      v13 = sub_300037E0(v10);
      if ( sub_300037E0(v5) != v13 || (v14 = sub_30003820(v10), sub_30003820(v5) != v14) )
        a2[297] = dword_300F2390 + 400;
      v4 = -1;
    }
  }
  else
  {
    v6 = 0;
    a1[5] = 0;
    a1[6] = 200;
  }
  if ( v12 && a1 == a2 + 224 )
  {
    a1[6] = 0;
    goto LABEL_26;
  }
  if ( !v6 )
    goto LABEL_19;
  if ( (int)a1[6] <= 0 )
  {
    if ( *((_DWORD *)v6 + 17) )
    {
      v4 = 120;
      goto LABEL_22;
    }
LABEL_19:
    if ( !v11 || (v4 = 250, !*(_DWORD *)(v11 + 68)) )
      v4 = 170;
  }
LABEL_22:
  if ( a2[297] - dword_300F2390 > v4 )
    v4 = a2[297] - dword_300F2390;
  if ( a1[6] < v4 )
    a1[6] = v4;
LABEL_26:
  if ( v6 && *((_DWORD *)v6 + 17) && dword_30076898(144) )
  {
    if ( v11 && *(_DWORD *)(v11 + 68) && sub_30033060() )
    {
      sub_300330D0();
    }
    else if ( dword_30076898(179) )
    {
      dword_30076898(180);
    }
  }
  if ( v11 )
    dword_30076898(135);
  result = a1 == a2 + 224;
  if ( v5 )
  {
    if ( a1 != a2 + 224 )
    {
      a2[253] = 0;
      a2[254] = 1;
    }
    if ( (v6[80] & 0x40) != 0 )
    {
      if ( dword_30076898(144) )
        sub_30021B10(1, "death animation '%s' is looping", v6);
      if ( a4 )
      {
        sub_30032FE0();
      }
      else
      {
        sub_30032F00();
        dword_30076898(146);
      }
    }
    else
    {
      v8 = *((_DWORD *)v6 + 17) && COERCE_FLOAT(dword_30076898(148)) == 0.0;
      dword_30076898(142);
      if ( v8 )
        dword_30076898(146);
    }
    result = a1 == a2 + 224;
    if ( a1 != a2 + 224 )
      goto LABEL_53;
  }
  else if ( a1 != a2 + 224 )
  {
LABEL_53:
    dword_30076898(142);
    result = dword_30076898(142);
    goto LABEL_54;
  }
LABEL_54:
  if ( dword_3029C24C == 1 )
  {
    v9 = "legs ";
    if ( a1 != a2 + 224 )
      v9 = "torso";
    result = Com_Printf("Anim-%s: %i, %s, (blend time) %i\n", v9, v5, (const char *)&unk_300F25A0 + 92 * v5, a1[6]);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300ACCF8: using guessed type int (__cdecl *dword_300ACCF8)(_DWORD);
// 300F2390: using guessed type int dword_300F2390;
// 3018DC64: using guessed type int dword_3018DC64;
// 3018DC68: using guessed type int dword_3018DC68;
// 3018DC7C: using guessed type int dword_3018DC7C;
// 3029C24C: using guessed type int dword_3029C24C;

//----- (30003E40) --------------------------------------------------------
int __usercall sub_30003E40@<eax>(int a1@<eax>, _DWORD *a2@<ecx>, int a3@<edi>, int a4)
{
  int v6; // eax
  int result; // eax
  unsigned int v9; // edx
  int v10; // ecx
  int v11; // ebx
  int v12; // ebp
  double v13; // st7
  double v14; // st7
  double v16; // st6
  unsigned __int8 v17; // c0
  unsigned __int8 v18; // c2
  int v19; // eax
  double v20; // st6
  unsigned int v21; // [esp+1Ch] [ebp-10h]
  int v22; // [esp+20h] [ebp-Ch]
  int v23; // [esp+24h] [ebp-8h]
  int v24; // [esp+30h] [ebp+4h]

  v6 = *(_DWORD *)(a1 + 20);
  if ( !v6 || (v24 = 1, (*(_BYTE *)(v6 + 80) & 2) == 0) )
    v24 = 0;
  dword_300ACCF8(dword_3018DC60);
  if ( a4 != *(_DWORD *)(a1 + 16) || (result = *(_DWORD *)(a1 + 20)) == 0 && (a4 & 0xFFFFFDFF) != 0 )
    result = sub_30003870((_DWORD *)a1, a2, a4, (*(_DWORD *)(a3 + 8) >> 11) & 1);
  v9 = a4 & 0xFFFFFDFF;
  v21 = a4 & 0xFFFFFDFF;
  if ( (a4 & 0xFFFFFDFF) != 0 )
  {
    v10 = *(_DWORD *)(a1 + 20);
    v22 = v10;
    v23 = *(_DWORD *)(v10 + 68);
    if ( v23 && (v11 = *(_DWORD *)(a1 + 44)) != 0 )
    {
      v12 = dword_300F2394;
      if ( dword_300F2394 != v11 )
      {
        if ( v24 )
        {
          v13 = fabs(*(float *)(a1 + 36) - *(float *)(a3 + 32));
        }
        else
        {
          v13 = sub_3003B280((float *)(a3 + 24), (float *)(a1 + 28));
          v9 = v21;
          v10 = v22;
        }
        v14 = v13 / ((double)(v12 - v11) * 0.001);
        *(float *)(a1 + 40) = v14 / (double)v23;
        v16 = *(float *)(a1 + 40);
        *(_DWORD *)(a1 + 44) = dword_300F2394;
        *(_DWORD *)(a1 + 28) = *(_DWORD *)(a3 + 24);
        *(_DWORD *)(a1 + 32) = *(_DWORD *)(a3 + 28);
        *(_DWORD *)(a1 + 36) = *(_DWORD *)(a3 + 32);
        if ( v17 | v18 )
        {
          if ( v16 < 0.0099999998 && v24 )
            *(_DWORD *)(a1 + 40) = 0;
          else
            *(_DWORD *)(a1 + 40) = 1036831949;
        }
        else if ( v16 > 2.0 )
        {
          if ( (*(_BYTE *)(v10 + 80) & 2) != 0 )
          {
            if ( *(float *)(a1 + 40) > 4.0 )
              *(_DWORD *)(a1 + 40) = 1082130432;
          }
          else
          {
            v19 = *(_DWORD *)(v10 + 68);
            if ( v19 <= 150 )
            {
              if ( v19 >= 20 )
              {
                v20 = 3.0 - (double)(v19 - 20) * 0.0076923077;
                if ( v20 < *(float *)(a1 + 40) )
                  *(float *)(a1 + 40) = v20;
              }
              else if ( *(float *)(a1 + 40) > 3.0 )
              {
                *(_DWORD *)(a1 + 40) = 1077936128;
              }
            }
            else
            {
              *(_DWORD *)(a1 + 40) = 0x40000000;
            }
          }
        }
        if ( dword_3029C24C == 2 )
          Com_Printf(
            "MoveSpeed: %s, %i, %4.4f : %1.4f\n",
            (const char *)&unk_300F25A0 + 92 * v9,
            dword_300F25E4[23 * v9],
            v14,
            *(float *)(a1 + 40));
      }
    }
    else
    {
      *(_DWORD *)(a1 + 40) = 1065353216;
      *(_DWORD *)(a1 + 44) = dword_300F2394;
      *(_DWORD *)(a1 + 28) = *(_DWORD *)(a3 + 24);
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a3 + 28);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a3 + 32);
    }
    result = *(_DWORD *)(a1 + 16);
    if ( result )
      result = dword_30076898(143);
  }
  return result;
}
// 30003F58: variable 'v17' is possibly undefined
// 30003F58: variable 'v18' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300ACCF8: using guessed type int (__cdecl *dword_300ACCF8)(_DWORD);
// 300F2394: using guessed type int dword_300F2394;
// 300F25E4: using guessed type int dword_300F25E4[];
// 3029C24C: using guessed type int dword_3029C24C;

//----- (300040B0) --------------------------------------------------------
void __usercall sub_300040B0(_DWORD *a1@<esi>)
{
  dword_300ACCF8(dword_3018DC60);
  if ( a1[4] )
  {
    if ( COERCE_FLOAT(dword_30076898(148)) == 0.0 )
    {
      a1[4] = 0;
      a1[5] = 0;
      a1[6] = 150;
    }
  }
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300ACCF8: using guessed type int (__cdecl *dword_300ACCF8)(_DWORD);
// 3018DC60: using guessed type int dword_3018DC60;

//----- (30004120) --------------------------------------------------------
void __usercall sub_30004120(_DWORD *a1@<ecx>, float *a2@<esi>, float a3, float a4, float a5, float a6)
{
  _DWORD *v6; // ecx
  _DWORD *v7; // ecx
  double v9; // st7
  char v10; // c0
  double v11; // st7
  float v12; // [esp+4h] [ebp-Ch]
  float v13; // [esp+4h] [ebp-Ch]
  float v14; // [esp+4h] [ebp-Ch]
  float v15; // [esp+8h] [ebp-8h]
  float v16; // [esp+8h] [ebp-8h]
  float v17; // [esp+8h] [ebp-8h]
  float v18; // [esp+8h] [ebp-8h]
  float v19; // [esp+8h] [ebp-8h]
  float v20; // [esp+Ch] [ebp-4h]
  float v21; // [esp+Ch] [ebp-4h]
  float v22; // [esp+Ch] [ebp-4h]
  float v23; // [esp+Ch] [ebp-4h]
  float v24; // [esp+Ch] [ebp-4h]
  float v25; // [esp+Ch] [ebp-4h]

  if ( !*a1 )
  {
    v12 = sub_3003DA20(*a2, a3);
    if ( v12 <= (double)a4 && -a4 <= v12 )
      return;
    *v6 = 1;
  }
  v13 = sub_3003DA20(a3, *a2);
  v15 = fabs(v13);
  v16 = v15 * 0.050000001;
  if ( v16 < 0.5 )
    v16 = 0.5;
  v9 = (double)dword_300F2398;
  if ( v10 )
  {
    v22 = v9;
    v18 = -(v22 * v16 * a6);
    if ( v18 > (double)v13 )
    {
      *v7 = 1;
    }
    else
    {
      v18 = v13;
      *v7 = 0;
    }
    v23 = (float)(unsigned __int16)(unsigned __int64)((v18 + *a2) * 182.04445);
    v11 = v23;
  }
  else
  {
    v20 = v9;
    v17 = v20 * v16 * a6;
    if ( v17 < (double)v13 )
    {
      *v7 = 1;
    }
    else
    {
      v17 = v13;
      *v7 = 0;
    }
    v21 = (float)(unsigned __int16)(unsigned __int64)((v17 + *a2) * 182.04445);
    v11 = v21;
  }
  v19 = v11 * 0.0054931641;
  *a2 = v19;
  v14 = sub_3003DA20(a3, v19);
  if ( v14 <= (double)a5 )
  {
    if ( -a5 > v14 )
    {
      v25 = (float)(unsigned __int16)(unsigned __int64)((a3 + a5) * 182.04445);
      *a2 = v25 * 0.0054931641;
    }
  }
  else
  {
    v24 = (float)(unsigned __int16)(unsigned __int64)((a3 - a5) * 182.04445);
    *a2 = v24 * 0.0054931641;
  }
}
// 30004162: variable 'v6' is possibly undefined
// 300041BE: variable 'v10' is possibly undefined
// 300041EB: variable 'v7' is possibly undefined
// 300F2398: using guessed type int dword_300F2398;

//----- (30004330) --------------------------------------------------------
void __usercall sub_30004330(int a1@<edi>, int a2)
{
  int v2; // eax
  int v3; // eax
  float v4; // ebp
  float v5; // eax
  int v6; // edx
  int v7; // eax
  _DWORD *v8; // ecx
  float *v9; // esi
  float v10; // eax
  int v11; // eax
  float v12; // eax
  double v14; // st7
  unsigned __int8 v15; // c0
  unsigned __int8 v16; // c3
  float v17; // [esp-1Ch] [ebp-3Ch]
  int v18; // [esp-18h] [ebp-38h]
  float v19; // [esp-10h] [ebp-30h]
  float v20; // [esp+0h] [ebp-20h]
  float v21; // [esp+0h] [ebp-20h]
  float v22; // [esp+4h] [ebp-1Ch]
  float v23; // [esp+8h] [ebp-18h]
  float v24; // [esp+Ch] [ebp-14h]
  float v25; // [esp+18h] [ebp-8h]
  float v26; // [esp+24h] [ebp+4h]

  v22 = *(float *)(a1 + 992);
  v23 = *(float *)(a1 + 1000);
  v20 = (float)(unsigned __int16)(unsigned __int64)(*(float *)(a1 + 1004) * 182.04445);
  v24 = v20 * 0.0054931641;
  if ( (*(_DWORD *)(a2 + 8) & 0xC000) != 0 )
  {
    *(_DWORD *)(a1 + 900) = 1;
  }
  else
  {
    v2 = *(_DWORD *)(a1 + 1140);
    if ( (v2 & 0x30000) != 0 )
    {
      *(_DWORD *)(a1 + 900) = 1;
    }
    else if ( (v2 & 6) != 0 )
    {
      if ( !sub_300034D0(1, 6, a1) )
        goto LABEL_9;
    }
    else
    {
      *(_DWORD *)(a1 + 900) = 1;
    }
  }
  *(_DWORD *)(a1 + 948) = 1;
  *(_DWORD *)(a1 + 956) = 1;
LABEL_9:
  v3 = *(_DWORD *)(a2 + 8);
  v21 = v24 + v22;
  v4 = v21;
  if ( (v3 & 1) != 0 )
  {
    v5 = v24;
    v4 = v24;
    v6 = 1119092736;
    goto LABEL_21;
  }
  if ( (*(_DWORD *)(a1 + 1140) & 0x30000) != 0 )
  {
    v5 = v24 + v22;
    v6 = 0;
    goto LABEL_21;
  }
  if ( (v3 & 0x40) != 0 )
  {
    v6 = 1119092736;
LABEL_20:
    v5 = v24;
    goto LABEL_21;
  }
  if ( (v3 & 0x400) != 0 )
  {
    v6 = 1110704128;
    goto LABEL_20;
  }
  if ( (v3 & 0x200) != 0 )
  {
    v5 = v24;
    v6 = 1119092736;
  }
  else
  {
    v6 = 1119092736;
    v25 = v22 * 0.30000001 + v24;
    v5 = v25;
  }
LABEL_21:
  sub_30004120((_DWORD *)(a1 + 948), (float *)(a1 + 944), v5, 0.0, *(float *)&v6, dword_301DD388);
  v7 = *(_DWORD *)(a2 + 8);
  if ( (v7 & 1) != 0 )
  {
    v19 = dword_301DD388;
    v8 = (_DWORD *)(a1 + 900);
    v18 = 0;
LABEL_30:
    v17 = v4;
    goto LABEL_31;
  }
  if ( (v7 & 0x40) != 0 )
  {
    v9 = (float *)(a1 + 896);
    *(_DWORD *)(a1 + 900) = 0;
    *(float *)(a1 + 896) = v21;
    goto LABEL_32;
  }
  v8 = (_DWORD *)(a1 + 900);
  if ( (dword_300F25F0[23 * (*(_DWORD *)(a2 + 204) & 0xFFFFFDFF)] & 0x30) == 0 )
  {
    v19 = dword_301DD388;
    if ( *v8 )
      v18 = 0;
    else
      v18 = 1109393408;
    goto LABEL_30;
  }
  *v8 = 0;
  v19 = dword_301DD388;
  v18 = 0;
  v17 = v24;
LABEL_31:
  v9 = (float *)(a1 + 896);
  sub_30004120(v8, (float *)(a1 + 896), v17, *(float *)&v18, 150.0, v19);
LABEL_32:
  if ( (*(_DWORD *)(a2 + 8) & 0xC000) != 0 )
  {
    v10 = v24;
LABEL_36:
    *(float *)(a1 + 944) = v10;
    *v9 = v10;
    goto LABEL_37;
  }
  if ( (*(_DWORD *)(a1 + 1140) & 0x30000) != 0 )
  {
    v10 = v24 + v22;
    goto LABEL_36;
  }
LABEL_37:
  v11 = *(_DWORD *)(a2 + 8);
  if ( (v11 & 1) != 0 || (v11 & 0xC000) != 0 || (*(_DWORD *)(a1 + 1140) & 0x30000) != 0 )
  {
    v12 = 0.0;
  }
  else
  {
    v14 = v23;
    if ( !(v15 | v16) )
      v14 = v14 - 360.0;
    v26 = v14 * 0.60000002;
    v12 = v26;
  }
  sub_30004120((_DWORD *)(a1 + 956), (float *)(a1 + 952), v12, 0.0, 45.0, 0.15000001);
}
// 30004584: variable 'v15' is possibly undefined
// 30004584: variable 'v16' is possibly undefined
// 300F25F0: using guessed type int dword_300F25F0[];

//----- (300045D0) --------------------------------------------------------
int __usercall sub_300045D0@<eax>(_DWORD *a1@<esi>, int a2)
{
  int v2; // ecx
  int v3; // eax
  int v4; // ecx
  int v5; // eax
  int v6; // ecx
  int v7; // eax
  int v8; // eax
  int v9; // ecx
  int v10; // ecx
  int v11; // eax
  int v12; // eax
  int v13; // ecx
  BOOL v14; // ecx
  int v15; // eax
  int v16; // ecx
  int v17; // eax
  int v18; // eax
  int v19; // ecx
  int v20; // ecx
  int v21; // eax
  int v22; // eax
  int v23; // ecx
  unsigned int v24; // eax
  int v25; // ecx
  int v26; // eax
  int v27; // ecx
  int result; // eax
  bool v29; // zf
  int v30; // eax

  v2 = a1[50];
  v3 = 300 * a1[36];
  if ( dword_30079628[0] )
  {
    dword_3018E0E8[v3] = v2;
  }
  else
  {
    dword_3018E0E8[v3] = 0;
    dword_3018E0EC[v3] = 0;
    dword_3018E0E8[(v2 >> 5) + v3] |= 1 << (v2 & 0x1F);
  }
  v4 = *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * a1[50]) + 116);
  v5 = 300 * a1[36];
  if ( dword_30079630 )
  {
    dword_3018E0F0[v5] = v4;
  }
  else
  {
    dword_3018E0F0[v5] = 0;
    dword_3018E0F4[v5] = 0;
    dword_3018E0F0[(v4 >> 5) + v5] |= 1 << (v4 & 0x1F);
  }
  v6 = dword_30079660;
  v7 = a1[36];
  if ( (a1[2] & 0x200) != 0 )
  {
    v8 = 300 * v7;
    if ( dword_30079660 )
    {
      dword_3018E120[v8] = 1;
      goto LABEL_14;
    }
    dword_3018E120[v8] = 0;
    dword_3018E124[v8] = 0;
    v9 = 2;
  }
  else
  {
    v8 = 300 * v7;
    dword_3018E120[v8] = 0;
    if ( v6 )
      goto LABEL_14;
    dword_3018E124[v8] = 0;
    v9 = 1;
  }
  dword_3018E120[v8] = v9;
LABEL_14:
  v10 = dword_30079638;
  v11 = a1[36];
  if ( (a1[2] & 0xC000) != 0 )
  {
    v12 = 300 * v11;
    if ( dword_30079638 )
    {
      dword_3018E0F8[v12] = 1;
      goto LABEL_21;
    }
    dword_3018E0F8[v12] = 0;
    dword_3018E0FC[v12] = 0;
    v13 = 2;
  }
  else
  {
    v12 = 300 * v11;
    dword_3018E0F8[v12] = 0;
    if ( v10 )
      goto LABEL_21;
    dword_3018E0FC[v12] = 0;
    v13 = 1;
  }
  dword_3018E0F8[v12] = v13;
LABEL_21:
  v14 = *(float *)(a2 + 1000) > 0.0;
  v15 = 300 * a1[36];
  if ( dword_30079648 )
  {
    dword_3018E108[v15] = v14;
  }
  else
  {
    dword_3018E108[v15] = 0;
    dword_3018E10C[v15] = 0;
    dword_3018E108[(v14 >> 5) + v15] |= 1 << (v14 & 0x1F);
  }
  v16 = dword_30079650;
  v17 = a1[36];
  if ( (a1[2] & 0x20) != 0 )
  {
    v18 = 300 * v17;
    if ( dword_30079650 )
    {
      dword_3018E110[v18] = 1;
      goto LABEL_31;
    }
    dword_3018E110[v18] = 0;
    dword_3018E114[v18] = 0;
    v19 = 2;
  }
  else
  {
    v18 = 300 * v17;
    dword_3018E110[v18] = 0;
    if ( v16 )
      goto LABEL_31;
    dword_3018E114[v18] = 0;
    v19 = 1;
  }
  dword_3018E110[v18] = v19;
LABEL_31:
  v20 = dword_30079658;
  v21 = a1[36];
  if ( (a1[2] & 0x400) != 0 )
  {
    v22 = 300 * v21;
    if ( dword_30079658 )
    {
      dword_3018E118[v22] = 1;
      goto LABEL_38;
    }
    dword_3018E118[v22] = 0;
    dword_3018E11C[v22] = 0;
    v23 = 2;
  }
  else
  {
    v22 = 300 * v21;
    dword_3018E118[v22] = 0;
    if ( v20 )
      goto LABEL_38;
    dword_3018E11C[v22] = 0;
    v23 = 1;
  }
  dword_3018E118[v22] = v23;
LABEL_38:
  v24 = 23 * (a1[51] & 0xFFFFFDFF);
  v25 = dword_300F25F4[v24];
  if ( v25 )
    dword_3018E100[300 * a1[36]] = v25;
  v26 = dword_300F25F0[v24];
  v27 = dword_30079668;
  if ( (v26 & 0x10) != 0 )
  {
    result = 300 * a1[36];
    if ( dword_30079668 )
    {
      dword_3018E128[result] = 1;
    }
    else
    {
      dword_3018E128[result] = 0;
      dword_3018E12C[result] = 0;
      dword_3018E128[result] = 2;
    }
  }
  else
  {
    v29 = (v26 & 0x20) == 0;
    v30 = a1[36];
    if ( v29 )
    {
      result = 300 * v30;
      dword_3018E128[result] = 0;
      if ( !v27 )
      {
        dword_3018E12C[result] = 0;
        dword_3018E128[result] = 1;
      }
    }
    else
    {
      result = 300 * v30;
      if ( dword_30079668 )
      {
        dword_3018E128[result] = 2;
      }
      else
      {
        dword_3018E128[result] = 0;
        dword_3018E12C[result] = 0;
        dword_3018E128[result] = 4;
      }
    }
  }
  return result * 4;
}
// 30079628: using guessed type int dword_30079628[];
// 30079630: using guessed type int dword_30079630;
// 30079638: using guessed type int dword_30079638;
// 30079648: using guessed type int dword_30079648;
// 30079650: using guessed type int dword_30079650;
// 30079658: using guessed type int dword_30079658;
// 30079660: using guessed type int dword_30079660;
// 30079668: using guessed type int dword_30079668;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 300F25F0: using guessed type int dword_300F25F0[];
// 300F25F4: using guessed type int dword_300F25F4[];
// 3018E0E8: using guessed type int dword_3018E0E8[];
// 3018E0EC: using guessed type int dword_3018E0EC[];
// 3018E0F0: using guessed type int dword_3018E0F0[];
// 3018E0F4: using guessed type int dword_3018E0F4[];
// 3018E0F8: using guessed type int dword_3018E0F8[];
// 3018E0FC: using guessed type int dword_3018E0FC[];
// 3018E100: using guessed type int dword_3018E100[];
// 3018E108: using guessed type int dword_3018E108[];
// 3018E10C: using guessed type int dword_3018E10C[];
// 3018E110: using guessed type int dword_3018E110[];
// 3018E114: using guessed type int dword_3018E114[];
// 3018E118: using guessed type int dword_3018E118[];
// 3018E11C: using guessed type int dword_3018E11C[];
// 3018E120: using guessed type int dword_3018E120[];
// 3018E124: using guessed type int dword_3018E124[];
// 3018E128: using guessed type int dword_3018E128[];
// 3018E12C: using guessed type int dword_3018E12C[];

//----- (30004960) --------------------------------------------------------
float __usercall sub_30004960@<eax>(float *a1@<eax>, int a2@<ecx>, int a3@<ebx>)
{
  int v4; // eax
  float result; // eax
  int v7; // ecx
  float v8; // ebp
  int v9; // edx
  float v10; // ecx
  double v12; // st7
  unsigned __int8 v13; // c0
  unsigned __int8 v14; // c3
  double v15; // st7
  float v16; // ecx
  float v17; // edx
  double v18; // st7
  int v19; // ecx
  double v20; // st7
  double v21; // st7
  double v22; // st7
  float v23; // esi
  float v24; // ebp
  double v25; // st7
  double v27; // st7
  unsigned __int8 v28; // c0
  unsigned __int8 v29; // c3
  double v30; // st7
  double v31; // st7
  double v32; // st7
  double v33; // st7
  double v34; // st7
  int v35; // ecx
  double v36; // st7
  double v37; // st7
  float v38; // edx
  float v39; // eax
  float v40; // edx
  float v41; // eax
  float v42; // edx
  float v43; // eax
  float v44; // edx
  float v45; // eax
  float v46; // edx
  float v47; // eax
  float v48; // edx
  float v49; // eax
  float v50; // edx
  float v51; // eax
  int v52; // ecx
  float v53; // ecx
  float v54; // edx
  float v55; // [esp+Ch] [ebp-94h]
  float v56; // [esp+Ch] [ebp-94h]
  float v57; // [esp+Ch] [ebp-94h]
  float v58; // [esp+Ch] [ebp-94h]
  float v59; // [esp+Ch] [ebp-94h]
  float v60; // [esp+Ch] [ebp-94h]
  float v61; // [esp+Ch] [ebp-94h]
  float v62; // [esp+Ch] [ebp-94h]
  float v63; // [esp+Ch] [ebp-94h]
  float v64; // [esp+Ch] [ebp-94h]
  float v65; // [esp+Ch] [ebp-94h]
  float v66; // [esp+Ch] [ebp-94h]
  float v67; // [esp+Ch] [ebp-94h]
  float v68; // [esp+Ch] [ebp-94h]
  float v69; // [esp+Ch] [ebp-94h]
  float v70; // [esp+Ch] [ebp-94h]
  float v71; // [esp+Ch] [ebp-94h]
  float v72; // [esp+Ch] [ebp-94h]
  float v73; // [esp+10h] [ebp-90h] BYREF
  float v74; // [esp+14h] [ebp-8Ch]
  float v75; // [esp+18h] [ebp-88h]
  float v76; // [esp+1Ch] [ebp-84h]
  float v77; // [esp+20h] [ebp-80h]
  float v78; // [esp+24h] [ebp-7Ch] BYREF
  int v79; // [esp+28h] [ebp-78h]
  float v80; // [esp+2Ch] [ebp-74h]
  float v81; // [esp+30h] [ebp-70h]
  float v82; // [esp+34h] [ebp-6Ch]
  float v83; // [esp+38h] [ebp-68h]
  float v84; // [esp+3Ch] [ebp-64h]
  float v85; // [esp+40h] [ebp-60h]
  int v86; // [esp+44h] [ebp-5Ch]
  float v87; // [esp+48h] [ebp-58h]
  float v88; // [esp+4Ch] [ebp-54h]
  float v89; // [esp+50h] [ebp-50h]
  float v90; // [esp+54h] [ebp-4Ch]
  float v91; // [esp+58h] [ebp-48h]
  float v92; // [esp+5Ch] [ebp-44h]
  float v93; // [esp+60h] [ebp-40h]
  float v94; // [esp+68h] [ebp-38h]
  float v95; // [esp+6Ch] [ebp-34h]
  float v96; // [esp+70h] [ebp-30h]
  float v97; // [esp+74h] [ebp-2Ch]
  float v98; // [esp+78h] [ebp-28h]
  float v99; // [esp+80h] [ebp-20h]
  float v100; // [esp+84h] [ebp-1Ch]
  float v101; // [esp+88h] [ebp-18h]
  float v102; // [esp+8Ch] [ebp-14h]
  float *v103; // [esp+98h] [ebp-8h]
  float *v104; // [esp+9Ch] [ebp-4h]

  v4 = *(_DWORD *)(a3 + 8);
  if ( (v4 & 0xC000) != 0 )
  {
    result = 0.0;
    memset(a1, 0, 0x60u);
    return result;
  }
  v7 = *(_DWORD *)(a3 + 144);
  v8 = *(float *)(a2 + 944);
  v87 = *(float *)(a2 + 896);
  v9 = *(_DWORD *)(a2 + 1140);
  v79 = v7;
  v10 = 0.0;
  v88 = 0.0;
  v86 = 0;
  if ( (v9 & 0x30000) == 0 )
  {
    v10 = *(float *)(a2 + 952);
    if ( (v4 & 0x40) != 0 )
    {
      v74 = sub_3003DB10(*(float *)(a2 + 952));
      v12 = v74;
      if ( v13 | v14 )
        v15 = v12 * 0.25;
      else
        v15 = v12 * 0.5;
      v74 = v15;
      v10 = v74;
    }
  }
  v80 = sub_3003DA20(*(float *)(a2 + 1000), v10);
  v81 = sub_3003DA20(*(float *)(a2 + 1004), v8);
  v74 = sub_3003DA20(v16, 0.0);
  v75 = sub_3003DA20(v8, v87);
  v18 = *(float *)(a3 + 228);
  v78 = *(float *)(a2 + 996);
  v19 = *(_DWORD *)(a3 + 8);
  v85 = v18;
  v83 = 0.0;
  v77 = (2.0 - COERCE_FLOAT(LODWORD(v78) & 0x7FFFFFFF)) * v78;
  v73 = 50.0 * v77;
  v78 = v73 * 0.92500001;
  v76 = v78;
  v82 = v78;
  v84 = v77 * -2.5;
  if ( (v19 & 1) == 0 )
    v87 = sub_3003DA20(v17, *(float *)(a2 + 1004));
  if ( (v19 & 0x40) == 0 )
  {
    if ( v77 == 0.0 )
      goto LABEL_33;
    v27 = v76;
    if ( (v19 & 0x20) != 0 )
    {
      if ( !(v28 | v29) )
      {
        v76 = v27 * 1.5;
        v30 = v82 * 1.5;
LABEL_32:
        v82 = v30;
LABEL_33:
        v88 = v73 * 0.075000003;
        v89 = v74 * 0.2;
        v62 = v75 * 0.40000001;
        v24 = v62;
        v90 = v62;
        v63 = v76 * 0.5;
        v23 = v63;
        v91 = v63;
        if ( dword_301E49AC == 4 )
        {
          v64 = (float)dword_300F2390;
          v31 = v64 * 0.003;
          v65 = (float)v79;
          v66 = sin(v31 + v65);
          v32 = v66 * 45.0;
        }
        else
        {
          if ( dword_301E49AC == 6 )
          {
            v67 = (float)dword_300F2390;
            v33 = v67 * 0.003;
            v68 = (float)v79;
            v69 = sin(v33 + v68);
            v34 = v89 - v69 * 45.0;
LABEL_41:
            v89 = v34;
LABEL_42:
            v92 = v74 * 0.30000001;
            v94 = v74 * 0.5;
            v95 = v75 * 0.2;
            v25 = v76 * -0.60000002;
            goto LABEL_43;
          }
          if ( *(float *)(a3 + 232) == 0.0 && *(float *)(a3 + 236) == 0.0 )
            goto LABEL_42;
          v32 = sub_3003DA20(*(float *)(a3 + 232), *(float *)(a3 + 236));
        }
        v34 = v32 + v89;
        goto LABEL_41;
      }
    }
    else if ( !(v28 | v29) )
    {
      v76 = v27 * 0.80000001;
      v30 = v82 * 0.80000001;
      goto LABEL_32;
    }
    v76 = v27 * 1.25;
    v30 = v82 * 1.25;
    goto LABEL_32;
  }
  if ( v77 != 0.0 )
    v82 = v82 * 0.5;
  v86 = *(_DWORD *)(a3 + 232);
  v103 = &v73;
  v104 = &v78;
  v55 = v75 * 3.1415927 / 180.0;
  v73 = cos(v55);
  v78 = sin(v55);
  v73 = 1.0 - v73;
  v83 = v73 * -24.0;
  v84 = v84 - v78 * 12.0;
  if ( v78 * v77 > 0.0 )
    v84 = v84 - v73 * v77 * 16.0;
  v89 = 0.0;
  v90 = v76 * -1.2;
  v91 = v76 * 0.30000001;
  if ( dword_301E49AC == 4 )
  {
    v56 = (float)dword_300F2390;
    v20 = v56 * 0.003;
    v57 = (float)v79;
    v58 = sin(v20 + v57);
    v21 = v58 * 45.0;
  }
  else if ( dword_301E49AC == 6 )
  {
    v59 = (float)dword_300F2390;
    v22 = v59 * 0.003;
    v60 = (float)v79;
    v61 = sin(v22 + v60);
    v21 = v61 * -45.0;
  }
  else
  {
    if ( *(float *)(a3 + 232) == 0.0 && *(float *)(a3 + 236) == 0.0 )
      goto LABEL_24;
    v21 = sub_3003DA20(*(float *)(a3 + 232), *(float *)(a3 + 236));
  }
  v89 = v21;
LABEL_24:
  v92 = 0.0;
  v94 = v74;
  v73 = v76 * 0.2;
  v23 = v73;
  v93 = v75 * 0.1 - v73;
  v24 = v93;
  v95 = v75 * 0.80000001 - v76 * -1.0;
  v25 = v76 * -0.2;
LABEL_43:
  v96 = v25;
  v35 = 0;
  v102 = 0.0;
  v97 = v80 * 0.30000001;
  v98 = v81 * 0.30000001;
  v99 = v80 * 0.69999999;
  v100 = v81 * 0.69999999;
  v101 = v82 * -0.30000001;
  if ( dword_301E49AC == 5 || dword_301E49AC == 6 )
  {
    v70 = (float)dword_300F2390;
    v36 = v70 * 0.003;
    v71 = (float)v79;
    v72 = sin(v36 + v71);
    v35 = 0;
    v37 = v72 * 45.0;
  }
  else
  {
    if ( *(float *)(a3 + 236) == 0.0 && *(float *)(a3 + 232) == 0.0 )
      goto LABEL_50;
    v37 = sub_3003DA20(*(float *)(a3 + 236), *(float *)(a3 + 232));
  }
  v102 = v37;
LABEL_50:
  v38 = v90;
  *a1 = v89;
  v39 = v91;
  a1[1] = v38;
  v40 = v92;
  a1[2] = v39;
  v41 = v94;
  a1[3] = v40;
  v42 = v95;
  a1[6] = v41;
  v43 = v96;
  a1[7] = v42;
  v44 = v97;
  a1[8] = v43;
  v45 = v98;
  a1[9] = v44;
  v46 = v99;
  a1[10] = v45;
  v47 = v100;
  a1[12] = v46;
  v48 = v101;
  a1[13] = v47;
  v49 = v102;
  *((_DWORD *)a1 + 11) = v35;
  a1[14] = v48;
  v50 = v87;
  a1[15] = v49;
  v51 = v88;
  *((_DWORD *)a1 + 16) = v35;
  *((_DWORD *)a1 + 17) = v35;
  v52 = v86;
  a1[4] = v24;
  a1[5] = v23;
  *((_DWORD *)a1 + 18) = v52;
  v53 = v83;
  a1[19] = v50;
  v54 = v84;
  a1[20] = v51;
  result = v85;
  a1[21] = v53;
  a1[22] = v54;
  a1[23] = result;
  return result;
}
// 300049E1: variable 'v13' is possibly undefined
// 300049E1: variable 'v14' is possibly undefined
// 30004A21: variable 'v16' is possibly undefined
// 30004AB7: variable 'v17' is possibly undefined
// 30004AC3: variable 'v19' is possibly undefined
// 30004CE8: variable 'v28' is possibly undefined
// 30004CE8: variable 'v29' is possibly undefined
// 30004FEF: variable 'v35' is possibly undefined
// 300F2390: using guessed type int dword_300F2390;
// 301E49AC: using guessed type int dword_301E49AC;

//----- (30005040) --------------------------------------------------------
void __usercall sub_30005040(float *a1@<edx>, float *a2@<ecx>, float a3)
{
  double v3; // st7
  double v4; // st7
  double v5; // st7

  v3 = *a1 - *a2;
  if ( v3 <= a3 )
  {
    if ( v3 >= -a3 )
      *a2 = *a1;
    else
      *a2 = *a2 - a3;
  }
  else
  {
    *a2 = a3 + *a2;
  }
  v4 = a1[1] - a2[1];
  if ( v4 <= a3 )
  {
    if ( v4 >= -a3 )
      a2[1] = a1[1];
    else
      a2[1] = a2[1] - a3;
  }
  else
  {
    a2[1] = a3 + a2[1];
  }
  v5 = a1[2] - a2[2];
  if ( v5 <= a3 )
  {
    if ( v5 >= -a3 )
      a2[2] = a1[2];
    else
      a2[2] = a2[2] - a3;
  }
  else
  {
    a2[2] = a3 + a2[2];
  }
}

//----- (30005100) --------------------------------------------------------
void __usercall sub_30005100(float *a1@<edx>, float *a2@<ecx>, float a3)
{
  double v3; // st7
  double v4; // st7
  double v5; // st7
  int v6; // [esp+0h] [ebp-10h]
  float v7; // [esp+4h] [ebp-Ch]
  float v8; // [esp+8h] [ebp-8h]
  float v9; // [esp+Ch] [ebp-4h]

  v7 = *a1 - *a2;
  v8 = a1[1] - a2[1];
  v3 = a1[2] - a2[2];
  v9 = v3;
  v4 = v3 * v9 + v8 * v8 + v7 * v7;
  if ( v4 != 0.0 )
  {
    *(float *)&v6 = v4;
    v5 = (1.5 - v4 * 0.5 * COERCE_FLOAT(1597463007 - (v6 >> 1)) * COERCE_FLOAT(1597463007 - (v6 >> 1)))
       * COERCE_FLOAT(1597463007 - (v6 >> 1))
       * a3;
    if ( v5 >= 1.0 )
    {
      *a2 = *a1;
      a2[1] = a1[1];
      a2[2] = a1[2];
    }
    else
    {
      *a2 = v7 * v5 + *a2;
      a2[1] = v8 * v5 + a2[1];
      a2[2] = v5 * v9 + a2[2];
    }
  }
}

//----- (300051C0) --------------------------------------------------------
int __usercall sub_300051C0@<eax>(int a1@<edx>, int a2, int a3)
{
  char **v3; // ebp
  float *v4; // ebx
  int v5; // esi
  int result; // eax
  int v7; // esi
  float v8; // [esp+0h] [ebp-78h]
  float *v9; // [esp+10h] [ebp-68h]
  float v10; // [esp+14h] [ebp-64h]
  float v11[18]; // [esp+18h] [ebp-60h] BYREF
  float v12[3]; // [esp+60h] [ebp-18h] BYREF
  float v13[3]; // [esp+6Ch] [ebp-Ch] BYREF

  sub_30004960(v11, a3, a1);
  v3 = off_30079670;
  v9 = v11;
  v4 = (float *)(a3 + 1020);
  v10 = (double)dword_300F2398 * 0.36000001;
  do
  {
    sub_30005040(v9, v4, v10);
    v5 = dword_30076898(175);
    if ( v5 >= 0 && dword_30076898(161) )
      sub_3001D320(v5, v4, &flt_300628EC);
    ++v3;
    v4 += 3;
    v9 += 3;
  }
  while ( (int)v3 < (int)&off_30079688 );
  sub_30005040(v12, (float *)(a3 + 1092), v10);
  v8 = (double)dword_300F2398 * 0.1;
  sub_30005100(v13, (float *)(a3 + 1104), v8);
  result = dword_30076898(175);
  v7 = result;
  if ( result >= 0 )
  {
    result = dword_30076898(160);
    if ( result )
      result = sub_3001D320(v7, (float *)(a3 + 1092), (_DWORD *)(a3 + 1104));
  }
  return result;
}
// 300628EC: using guessed type float flt_300628EC;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30079670: using guessed type char *off_30079670[7];
// 30079688: using guessed type char *off_30079688;
// 300F2398: using guessed type int dword_300F2398;

//----- (300052F0) --------------------------------------------------------
int __usercall sub_300052F0@<eax>(_DWORD *a1@<ebx>, int a2, _DWORD *a3)
{
  sub_30004330((int)a1, (int)a3);
  sub_300045D0(a3, (int)a1);
  sub_300040B0(a1 + 224);
  sub_300040B0(a1 + 236);
  if ( a1[253] && (a1[240] & 0xFFFFFDFF) == 0 )
  {
    a1[253] = 0;
    a1[254] = 1;
  }
  sub_30003E40((int)(a1 + 224), a1, (int)a3, a3[51]);
  return sub_30003E40((int)(a1 + 236), a1, (int)a3, a3[52]);
}

//----- (30005380) --------------------------------------------------------
int __usercall sub_30005380@<eax>(int a1@<eax>, int a2@<ebx>, int a3)
{
  int result; // eax
  int v5; // ebp
  char *v6; // esi
  _BYTE *v7; // edi
  __int16 v8; // ax
  int v9; // esi
  char *v10; // edi
  int v11; // eax
  __int16 v12; // dx
  bool v13; // zf
  const char *v14; // eax
  int v15; // [esp+8h] [ebp-8Ch]
  int v16; // [esp+Ch] [ebp-88h]
  int v17; // [esp+14h] [ebp-80h]
  int v18; // [esp+18h] [ebp-7Ch]
  __int16 v19[2]; // [esp+1Ch] [ebp-78h]
  int v20; // [esp+20h] [ebp-74h]
  char v21; // [esp+24h] [ebp-70h] BYREF

  result = a3;
  v15 = *(_DWORD *)(a3 + 200);
  if ( (*(_DWORD *)(a3 + 8) & 0xC000) != 0 )
    v15 = 0;
  if ( !*(_DWORD *)a2 || !*(_BYTE *)(a2 + 64) )
    return dword_30076898(166);
  if ( a1 )
  {
    if ( *(_DWORD *)(a2 + 1196) == v15 && !*(_DWORD *)(a2 + 1016) )
      return result;
    dword_30076898(166);
  }
  v19[0] = sub_30032050();
  if ( !v19[0] )
    sub_30021B10(1, (char *)&byte_3006A9EC, a2 + 64);
  sub_30032050();
  v18 = 0;
  v20 = 0;
  v17 = dword_30076898(50);
  v5 = 1;
  v6 = &v21;
  v7 = (_BYTE *)(a2 + 128);
  v16 = 6;
  do
  {
    if ( *v7 )
    {
      v8 = sub_30032050();
      *((_WORD *)v6 + 4) = v8;
      if ( !v8 )
        sub_30021B10(1, (char *)&byte_3006A9EC, v7);
      sub_30032050();
      *(_DWORD *)v6 = dword_30076898(50);
      *((_DWORD *)v6 + 1) = v7 + 384;
      *((_DWORD *)v6 + 3) = 0;
      ++v5;
      v6 += 16;
    }
    v7 += 64;
    --v16;
  }
  while ( v16 );
  v9 = v15;
  if ( v15 )
  {
    v10 = (char *)&unk_301AA4E0 + 408 * v15;
    if ( *((_DWORD *)v10 + 44) )
    {
      v11 = dword_30076898(50);
      v12 = *((_WORD *)v10 + 88);
      *(&v17 + 4 * v5) = v11;
      v13 = *(_DWORD *)(a2 + 1012) == 0;
      v19[8 * v5] = v12;
      v14 = "tag_weapon_left";
      if ( v13 )
        v14 = "tag_weapon_right";
      *(&v18 + 4 * v5) = (int)v14;
      *(&v20 + 4 * v5) = 0;
      v9 = v15;
    }
  }
  result = dword_30076898(165);
  *(_DWORD *)(a2 + 1196) = v9;
  *(_DWORD *)(a2 + 1016) = 0;
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30005380: using guessed type __int16 var_78[2];

//----- (30005590) --------------------------------------------------------
int sub_30005590()
{
  dword_300ACCB4("multiplayer", "root", &dword_3018DC7C);
  dword_300ACCB4("multiplayer", "torso", &dword_3018DC80);
  dword_300ACCB4("multiplayer", "legs", &dword_3018DC84);
  return dword_300ACCB4("multiplayer", "turning", &dword_3018DC88);
}
// 300ACCB4: using guessed type int (__cdecl *dword_300ACCB4)(_DWORD, _DWORD, _DWORD);
// 3018DC7C: using guessed type int dword_3018DC7C;
// 3018DC80: using guessed type int dword_3018DC80;
// 3018DC84: using guessed type int dword_3018DC84;
// 3018DC88: using guessed type int dword_3018DC88;

//----- (30005620) --------------------------------------------------------
int sub_30005620()
{
  int v0; // esi
  int result; // eax

  v0 = dword_300ACCB0("multiplayer");
  if ( !v0 )
    sub_30021B10(1, (char *)&byte_3006A994, "multiplayer");
  result = dword_3018DC80;
  dword_3018DC78 = v0;
  dword_3018DC60 = v0;
  dword_3018DC64 = dword_3018DC80;
  dword_3018DC68 = dword_3018DC84;
  dword_3018DC6C = dword_3018DC88;
  return result;
}
// 300ACCB0: using guessed type int (__cdecl *dword_300ACCB0)(_DWORD);
// 3018DC64: using guessed type int dword_3018DC64;
// 3018DC68: using guessed type int dword_3018DC68;
// 3018DC6C: using guessed type int dword_3018DC6C;
// 3018DC78: using guessed type int dword_3018DC78;
// 3018DC80: using guessed type int dword_3018DC80;
// 3018DC84: using guessed type int dword_3018DC84;
// 3018DC88: using guessed type int dword_3018DC88;

//----- (300057B0) --------------------------------------------------------
BOOL __usercall sub_300057B0@<eax>(int a1@<eax>, int a2@<ecx>, float *a3@<esi>)
{
  double v3; // st7
  double v4; // st7
  double v5; // st7
  BOOL result; // eax
  float v7[3]; // [esp+4h] [ebp-Ch] BYREF

  sub_30005970(a1, (int)v7, a2 + 12);
  v3 = a3[5] - v7[0];
  result = 0;
  if ( v3 <= 36.0 && v3 >= -36.0 )
  {
    v4 = a3[6] - v7[1];
    if ( v4 <= 36.0 && v4 >= -36.0 )
    {
      v5 = a3[7] - v7[2];
      if ( v5 <= 18.0 && v5 >= -88.0 )
        result = 1;
    }
  }
  return result;
}

//----- (30005840) --------------------------------------------------------
BOOL __usercall sub_30005840@<eax>(_DWORD *a1@<eax>, int a2@<ecx>, int a3)
{
  int v5; // eax
  char *v6; // eax
  int v7; // eax
  int v9; // eax

  v5 = *(_DWORD *)(a2 + 140);
  if ( v5 < 1 || v5 >= 70 )
    sub_30021B10(1, (char *)&byte_300698B8);
  v6 = (char *)&unk_30078328 + 48 * *(_DWORD *)(a2 + 140);
  if ( *(_DWORD *)(a2 + 144) != a1[43] )
  {
    switch ( *((_DWORD *)v6 + 8) )
    {
      case 0:
        sub_30021B10(1, (char *)&byte_30069898);
        return 0;
      case 1:
        v7 = *((_DWORD *)v6 + 9);
        if ( ((1 << (v7 & 0x1F)) & a1[(v7 >> 5) + 195]) != 0 )
        {
          if ( sub_300105C0(v7, (int)a1) <= 0 )
            return 0;
        }
        else if ( a3 )
        {
          return 0;
        }
        return 1;
      case 2:
        v9 = *((_DWORD *)v6 + 9);
        if ( ((1 << (v9 & 0x1F)) & a1[(v9 >> 5) + 195]) != 0 )
          return sub_300105C0(v9, (int)a1) > 0;
        if ( *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v9) + 736) && sub_300105C0(v9, (int)a1) > 0 )
          return 1;
        break;
      case 3:
        return a1[61] < a1[63];
      default:
        return 0;
    }
  }
  return 0;
}
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30005970) --------------------------------------------------------
void __usercall sub_30005970(int a1@<eax>, int a2@<ecx>, int a3@<ebx>)
{
  double v4; // st7
  int v5; // edx
  double v6; // st7
  double v7; // st7
  double v8; // st7
  int v9; // ecx
  double v10; // st7
  int v11; // ecx
  double v12; // st6
  double v13; // st5
  float v14; // [esp+8h] [ebp-14h]
  float v15; // [esp+8h] [ebp-14h]
  int v16; // [esp+Ch] [ebp-10h]
  float v17; // [esp+Ch] [ebp-10h]
  int v18; // [esp+Ch] [ebp-10h]
  float v19; // [esp+Ch] [ebp-10h]
  float v20; // [esp+Ch] [ebp-10h]
  float v21; // [esp+18h] [ebp-4h]

  switch ( *(_DWORD *)a3 )
  {
    case 0:
    case 1:
    case 8:
      *(_DWORD *)a2 = *(_DWORD *)(a3 + 12);
      *(_DWORD *)(a2 + 4) = *(_DWORD *)(a3 + 16);
      *(_DWORD *)(a2 + 8) = *(_DWORD *)(a3 + 20);
      return;
    case 2:
      v4 = (double)(a1 - *(_DWORD *)(a3 + 4)) * 0.001;
      goto LABEL_9;
    case 3:
      v5 = *(_DWORD *)(a3 + 4);
      if ( a1 > v5 + *(_DWORD *)(a3 + 8) )
        a1 = v5 + *(_DWORD *)(a3 + 8);
      v4 = (double)(a1 - v5) * 0.001;
      if ( v4 < 0.0 )
        v4 = 0.0;
      goto LABEL_9;
    case 4:
      v4 = sin((double)(a1 - *(_DWORD *)(a3 + 4)) / (double)*(int *)(a3 + 8) * 6.2831855);
LABEL_9:
      *(float *)a2 = v4 * *(float *)(a3 + 24) + *(float *)(a3 + 12);
      *(float *)(a2 + 4) = v4 * *(float *)(a3 + 28) + *(float *)(a3 + 16);
      *(float *)(a2 + 8) = v4 * *(float *)(a3 + 32) + *(float *)(a3 + 20);
      break;
    case 5:
      v6 = (double)(a1 - *(_DWORD *)(a3 + 4)) * 0.001;
      *(float *)a2 = v6 * *(float *)(a3 + 24) + *(float *)(a3 + 12);
      *(float *)(a2 + 4) = v6 * *(float *)(a3 + 28) + *(float *)(a3 + 16);
      *(float *)(a2 + 8) = v6 * *(float *)(a3 + 32) + *(float *)(a3 + 20) - v6 * v6 * 400.0;
      break;
    case 6:
      v7 = (double)(a1 - *(_DWORD *)(a3 + 4)) * 0.001;
      *(float *)a2 = v7 * *(float *)(a3 + 24) + *(float *)(a3 + 12);
      *(float *)(a2 + 4) = v7 * *(float *)(a3 + 28) + *(float *)(a3 + 16);
      *(float *)(a2 + 8) = v7 * *(float *)(a3 + 32) + *(float *)(a3 + 20) - v7 * v7 * 120.00001;
      break;
    case 7:
      v8 = (double)(a1 - *(_DWORD *)(a3 + 4)) * 0.001;
      *(float *)a2 = v8 * *(float *)(a3 + 24) + *(float *)(a3 + 12);
      *(float *)(a2 + 4) = v8 * *(float *)(a3 + 28) + *(float *)(a3 + 16);
      *(float *)(a2 + 8) = v8 * *(float *)(a3 + 32) + *(float *)(a3 + 20) - v8 * 80.0;
      break;
    case 9:
      v9 = *(_DWORD *)(a3 + 4);
      v16 = *(_DWORD *)(a3 + 8);
      if ( a1 > v9 + v16 )
        a1 = v9 + v16;
      v14 = (double)(a1 - v9) * 0.001;
      v17 = sqrt(
              *(float *)(a3 + 32) * *(float *)(a3 + 32)
            + *(float *)(a3 + 28) * *(float *)(a3 + 28)
            + *(float *)(a3 + 24) * *(float *)(a3 + 24))
          / ((double)v16
           * 0.001);
      sub_3003B600((float *)(a3 + 24), (float *)a2);
      v10 = v17 * v14 * v14 * 0.5;
      *(float *)a2 = v10 * *(float *)a2 + *(float *)(a3 + 12);
      *(float *)(a2 + 4) = v10 * *(float *)(a2 + 4) + *(float *)(a3 + 16);
      *(float *)(a2 + 8) = v10 * *(float *)(a2 + 8) + *(float *)(a3 + 20);
      break;
    case 0xA:
      v11 = *(_DWORD *)(a3 + 4);
      v18 = *(_DWORD *)(a3 + 8);
      if ( a1 > v11 + v18 )
        a1 = v11 + v18;
      v15 = (double)(a1 - v11) * 0.001;
      v19 = sqrt(
              *(float *)(a3 + 32) * *(float *)(a3 + 32)
            + *(float *)(a3 + 28) * *(float *)(a3 + 28)
            + *(float *)(a3 + 24) * *(float *)(a3 + 24))
          / ((double)v18
           * 0.001);
      sub_3003B600((float *)(a3 + 24), (float *)a2);
      v12 = v15 * *(float *)(a3 + 28) + *(float *)(a3 + 16);
      v21 = v15 * *(float *)(a3 + 32) + *(float *)(a3 + 20);
      v13 = v19 * v15 * v15 * -0.5;
      v20 = v13;
      *(float *)a2 = v13 * *(float *)a2 + v15 * *(float *)(a3 + 24) + *(float *)(a3 + 12);
      *(float *)(a2 + 4) = v20 * *(float *)(a2 + 4) + v12;
      *(float *)(a2 + 8) = v20 * *(float *)(a2 + 8) + v21;
      break;
    default:
      sub_30021B10(1, (char *)&byte_3006986C, *(_DWORD *)(a3 + 4));
      break;
  }
}

//----- (30005F90) --------------------------------------------------------
int __usercall sub_30005F90@<eax>(int result@<eax>, int a2@<ecx>, unsigned __int8 a3)
{
  if ( a2 )
  {
    *(_DWORD *)(result + 4 * (*(_DWORD *)(result + 132) & 3) + 136) = (unsigned __int8)a2;
    *(_DWORD *)(result + 4 * ((*(_DWORD *)(result + 132))++ & 3) + 152) = a3;
  }
  return result;
}

//----- (30005FD0) --------------------------------------------------------
int __usercall sub_30005FD0@<eax>(int a1@<eax>, int a2@<edi>, int a3@<esi>)
{
  double v3; // st7
  int v4; // eax
  unsigned int v5; // eax
  int v6; // eax
  unsigned int v7; // eax
  int v8; // eax
  int v9; // edx
  int v10; // ecx
  int v11; // ebx
  int v12; // eax
  double v13; // st7
  int v14; // eax
  int v15; // ebx
  int *v16; // ebp
  int v17; // edx
  int v18; // ecx
  int v19; // eax
  int v20; // edx
  int result; // eax
  int v22; // [esp+8h] [ebp-8h]
  float v23; // [esp+8h] [ebp-8h]
  int v24; // [esp+8h] [ebp-8h]

  *(_DWORD *)(a3 + 4) = (*(_DWORD *)(a2 + 12) & 0x30000) != 0 ? 1 : 7;
  *(_DWORD *)a3 = *(unsigned __int16 *)(a2 + 172);
  *(_DWORD *)(a3 + 12) = 1;
  *(_DWORD *)(a3 + 24) = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(a3 + 28) = *(_DWORD *)(a2 + 24);
  *(_DWORD *)(a3 + 32) = *(_DWORD *)(a2 + 28);
  if ( a1 )
  {
    *(float *)(a3 + 24) = (float)(int)(unsigned __int64)*(float *)(a3 + 24);
    *(float *)(a3 + 28) = (float)(int)(unsigned __int64)*(float *)(a3 + 28);
    *(float *)(a3 + 32) = (float)(int)(unsigned __int64)*(float *)(a3 + 32);
  }
  *(_DWORD *)(a3 + 48) = 1;
  *(_DWORD *)(a3 + 60) = *(_DWORD *)(a2 + 192);
  *(_DWORD *)(a3 + 64) = *(_DWORD *)(a2 + 196);
  *(_DWORD *)(a3 + 68) = *(_DWORD *)(a2 + 200);
  if ( a1 )
  {
    *(float *)(a3 + 60) = (float)(int)(unsigned __int64)*(float *)(a3 + 60);
    *(float *)(a3 + 64) = (float)(int)(unsigned __int64)*(float *)(a3 + 64);
    *(float *)(a3 + 68) = (float)(int)(unsigned __int64)*(float *)(a3 + 68);
  }
  v3 = (double)*(int *)(a2 + 124);
  if ( *(int *)(a2 + 124) > 128 )
    v3 = v3 - 256.0;
  *(float *)(a3 + 108) = v3;
  *(_DWORD *)(a3 + 204) = *(_DWORD *)(a2 + 112);
  *(_DWORD *)(a3 + 208) = *(_DWORD *)(a2 + 120);
  *(_DWORD *)(a3 + 144) = *(_DWORD *)(a2 + 172);
  *(_DWORD *)(a3 + 8) = *(_DWORD *)(a2 + 128);
  if ( (*(_DWORD *)(a2 + 128) & 0xC000) != 0 )
    *(_DWORD *)(a3 + 116) = *(_DWORD *)(a2 + 888);
  v4 = *(_DWORD *)(a3 + 8);
  if ( *(int *)(a2 + 4) < 6 )
    v5 = v4 & 0xFFFFFFFE;
  else
    v5 = v4 | 1;
  *(_DWORD *)(a3 + 8) = v5;
  v6 = *(_DWORD *)(a3 + 8);
  if ( (*(_BYTE *)(a2 + 12) & 0x20) != 0 )
    v7 = v6 | 0x200;
  else
    v7 = v6 & 0xFFFFFDFF;
  *(_DWORD *)(a3 + 8) = v7;
  *(_DWORD *)(a3 + 212) = *(_DWORD *)(a2 + 64);
  v8 = *(_DWORD *)(a2 + 204);
  v9 = *(_DWORD *)(a2 + 832);
  if ( v8 == v9 || (v10 = *(_DWORD *)(a2 + 828), v8 != v10) )
  {
    *(_DWORD *)(a3 + 228) = 0;
    *(_DWORD *)(a3 + 232) = 0;
    *(_DWORD *)(a3 + 236) = 0;
  }
  else
  {
    v11 = *(_DWORD *)(a2 + 212);
    if ( v11 )
    {
      v12 = *(_DWORD *)(a2 + 216);
      if ( v12 == v10 )
      {
        v22 = 400;
      }
      else if ( v12 == v9 )
      {
        v22 = *(_DWORD *)(a2 + 220) != 0 ? 200 : 400;
      }
      else
      {
        v22 = 200;
      }
      v13 = (double)(*(_DWORD *)a2 - v11) / (double)v22;
      v23 = v13;
      if ( v13 >= 0.0 )
      {
        if ( v23 > 1.0 )
          v23 = 1.0;
      }
      else
      {
        v23 = 0.0;
      }
      if ( !*(_DWORD *)(a2 + 220) )
        v23 = 1.0 - v23;
    }
    else
    {
      v23 = 1.0;
    }
    *(float *)(a3 + 228) = v23 * *(float *)(a2 + 964);
    *(float *)(a3 + 232) = sub_3003DB10(*(float *)(a2 + 968)) * v23;
    *(float *)(a3 + 236) = sub_3003DB10(*(float *)(a2 + 972)) * v23;
  }
  v14 = *(_DWORD *)(a2 + 132);
  if ( *(_DWORD *)(a2 + 976) - v14 >= 0 )
  {
    *(_DWORD *)(a3 + 160) = 0;
  }
  else
  {
    if ( v14 - *(_DWORD *)(a2 + 976) > 4 )
      *(_DWORD *)(a2 + 976) = v14 - 4;
    *(_DWORD *)(a3 + 160) = *(unsigned __int8 *)(a2 + 4 * ((*(_DWORD *)(a2 + 976))++ & 3) + 152);
  }
  v15 = *(_DWORD *)(a2 + 168);
  v24 = v15;
  if ( v15 != *(_DWORD *)(a2 + 132) )
  {
    v16 = (int *)off_300793A4;
    do
    {
      v17 = v15 & 3;
      v18 = 0;
      if ( *v16 > 0 )
      {
        v19 = *v16;
        do
        {
          if ( v19 == *(unsigned __int8 *)(a2 + 4 * v17 + 136) )
            break;
          v19 = v16[++v18];
        }
        while ( v19 > 0 );
        v15 = v24;
      }
      if ( v16[v18] < 0 )
      {
        *(_DWORD *)(a3 + 4 * (*(_DWORD *)(a3 + 164) & 3) + 168) = *(unsigned __int8 *)(a2 + 4 * v17 + 136);
        *(_DWORD *)(a3 + 4 * ((*(_DWORD *)(a3 + 164))++ & 3) + 184) = *(unsigned __int8 *)(a2 + 4 * v17 + 152);
      }
      v24 = ++v15;
    }
    while ( v15 != *(_DWORD *)(a2 + 132) );
  }
  v20 = *(unsigned __int8 *)(a2 + 176);
  *(_DWORD *)(a2 + 168) = *(_DWORD *)(a2 + 132);
  *(_DWORD *)(a3 + 200) = v20;
  result = *(unsigned __int16 *)(a2 + 84);
  *(_DWORD *)(a3 + 124) = result;
  return result;
}
// 300793A4: using guessed type void *off_300793A4;

//----- (300067B0) --------------------------------------------------------
int __cdecl sub_300067B0(int a1, int a2, float a3, float a4, float a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, float a15)
{
  double v15; // st7
  double v16; // st7
  float v17; // edx
  int v18; // eax
  int v19; // ecx
  int v20; // edx
  float v21; // eax
  double v22; // st7
  double v23; // st7
  int v24; // ecx
  bool v25; // zf
  double v26; // st7
  int v27; // edi
  void (__cdecl *v28)(float *, int *, float *, float *, float *, int, int); // ebx
  double v29; // st7
  double v31; // st7
  int v32; // ecx
  double v33; // st7
  double v34; // st7
  int v35; // eax
  int v36; // ecx
  double v37; // st7
  float v38; // eax
  float v39; // [esp+0h] [ebp-E8h]
  float v40; // [esp+4h] [ebp-E4h]
  float v41; // [esp+4h] [ebp-E4h]
  float v42; // [esp+4h] [ebp-E4h]
  int v43; // [esp+18h] [ebp-D0h] BYREF
  int v44; // [esp+1Ch] [ebp-CCh]
  float v45; // [esp+20h] [ebp-C8h]
  float v46; // [esp+24h] [ebp-C4h] BYREF
  int v47; // [esp+28h] [ebp-C0h]
  float v48; // [esp+2Ch] [ebp-BCh]
  int v49; // [esp+30h] [ebp-B8h] BYREF
  int v50; // [esp+34h] [ebp-B4h]
  float v51; // [esp+38h] [ebp-B0h]
  float v52; // [esp+3Ch] [ebp-ACh]
  int v53; // [esp+40h] [ebp-A8h] BYREF
  int v54; // [esp+44h] [ebp-A4h]
  float v55; // [esp+48h] [ebp-A0h]
  float v56; // [esp+4Ch] [ebp-9Ch] BYREF
  float v57; // [esp+50h] [ebp-98h]
  float v58; // [esp+54h] [ebp-94h]
  float v59; // [esp+58h] [ebp-90h]
  float v60; // [esp+5Ch] [ebp-8Ch]
  float v61; // [esp+60h] [ebp-88h] BYREF
  float v62; // [esp+64h] [ebp-84h]
  float v63; // [esp+68h] [ebp-80h]
  float v64; // [esp+6Ch] [ebp-7Ch] BYREF
  float v65; // [esp+70h] [ebp-78h]
  int v66; // [esp+74h] [ebp-74h]
  float v67; // [esp+78h] [ebp-70h]
  int v68; // [esp+7Ch] [ebp-6Ch]
  float v69; // [esp+80h] [ebp-68h] BYREF
  int v70; // [esp+84h] [ebp-64h]
  int v71; // [esp+88h] [ebp-60h]
  float v72; // [esp+8Ch] [ebp-5Ch]
  float v73; // [esp+98h] [ebp-50h]
  char v74; // [esp+AEh] [ebp-3Ah]
  int v75; // [esp+B0h] [ebp-38h]
  float v76; // [esp+B4h] [ebp-34h] BYREF
  float v77; // [esp+B8h] [ebp-30h]
  float v78; // [esp+BCh] [ebp-2Ch]
  float v79; // [esp+C0h] [ebp-28h]
  int v80; // [esp+C4h] [ebp-24h] BYREF
  float v81; // [esp+C8h] [ebp-20h]
  float v82; // [esp+CCh] [ebp-1Ch]
  float v83[3]; // [esp+D0h] [ebp-18h] BYREF
  float v84[3]; // [esp+DCh] [ebp-Ch] BYREF

  v52 = -a3;
  v66 = *(_DWORD *)(a2 + 8);
  v64 = *(float *)a2 - a3;
  v15 = v52 + *(float *)(a2 + 4);
  v75 = 0;
  v65 = v15;
  v61 = a3 + *(float *)a2;
  v62 = a3 + *(float *)(a2 + 4);
  v63 = a4 + *(float *)(a2 + 8);
  if ( dword_301E49AC )
    sub_3001B340(&v64, &v61);
  v68 = a14 != 0 ? 8519697 : 8454161;
  if ( !a9 )
  {
    v16 = *(float *)(a2 + 8) + 10.0;
    v65 = v52;
    v48 = v16;
    v64 = v52;
    v63 = a4;
    v17 = *(float *)(a2 + 8);
    v61 = a3;
    v18 = *(int *)a2;
    v62 = a3;
    v19 = *(int *)(a2 + 4);
    v45 = v17;
    v43 = v18;
    v46 = *(float *)&v18;
    v44 = v19;
    v47 = v19;
    v66 = 0;
    ((void (__cdecl *)(float *, int *, float *, float *, float *, int, int))a13)(
      &v69,
      &v43,
      &v64,
      &v61,
      &v46,
      a1,
      a14 != 0 ? 8519697 : 8454161);
    if ( v74 )
      return 0;
  }
  if ( a10 && a11 && *(float *)(a11 + 8) < 0.69999999 )
    return 0;
  *(float *)&v47 = a5 - 180.0;
  v64 = -6.0;
  v65 = -6.0;
  v66 = -1061158912;
  v61 = 6.0;
  v62 = 6.0;
  v63 = 6.0;
  v46 = 0.0;
  v48 = 0.0;
  sub_3003BEA0(&v46, v84, v83, &v76);
  v20 = *(int *)a2;
  v21 = *(float *)(a2 + 4);
  v52 = a4 - 6.0;
  v43 = v20;
  v22 = v52 + *(float *)(a2 + 8);
  *(float *)&v44 = v21;
  v45 = v22;
  v23 = a15 - 6.0;
  v60 = v23;
  v46 = v23 * v76 + *(float *)&v20;
  *(float *)&v47 = v60 * v77 + v21;
  v48 = v60 * v78 + v45;
  ((void (__cdecl *)(float *, int *, float *, float *, float *, int, int))a12)(&v69, &v43, &v64, &v61, &v46, a1, v68);
  v24 = dword_301E49AC;
  if ( dword_301E49AC )
  {
    sub_3001B3C0(v83, (int)&v43, 6.0);
    v24 = dword_301E49AC;
    if ( dword_301E49AC )
    {
      sub_3001B3C0(v84, (int)&v43, 6.0);
      v24 = dword_301E49AC;
    }
  }
  if ( v69 >= 1.0 )
  {
    if ( v24 )
      dword_30076898(199);
    v59 = a15;
    goto LABEL_35;
  }
  if ( !a10 )
  {
    v25 = v24 == 0;
    goto LABEL_22;
  }
  v75 = 1;
  v59 = v60 * v69 + 6.0;
  if ( a3 + 2.0 > v59 )
  {
    v25 = v24 == 0;
    goto LABEL_22;
  }
  v67 = v52 * 0.69999999 + 24.0;
  if ( v59 >= (double)v67 )
  {
    if ( v24 )
      dword_30076898(199);
LABEL_35:
    v28 = (void (__cdecl *)(float *, int *, float *, float *, float *, int, int))a12;
    v27 = v68;
    goto LABEL_36;
  }
  if ( v24 )
    dword_30076898(199);
  v75 = 0;
  v48 = v48 + 22.0;
  v56 = v46 - *(float *)&v43;
  v57 = *(float *)&v47 - *(float *)&v44;
  v58 = v48 - v45;
  v26 = sub_3003B600(&v56, &v76);
  v27 = v68;
  v79 = v26;
  v28 = (void (__cdecl *)(float *, int *, float *, float *, float *, int, int))a12;
  ((void (__cdecl *)(float *, int *, float *, float *, float *, int, int))a12)(&v69, &v43, &v64, &v61, &v46, a1, v68);
  if ( v69 >= 1.0 )
  {
    if ( dword_301E49AC )
      dword_30076898(199);
    v59 = a15;
  }
  else
  {
    v75 = 1;
    v29 = v79 * v69 + 6.0;
    v59 = v29;
    if ( v29 < v67 )
    {
      v25 = dword_301E49AC == 0;
LABEL_22:
      if ( !v25 )
        dword_30076898(199);
      return 0;
    }
    if ( dword_301E49AC )
      dword_30076898(199);
  }
LABEL_36:
  v31 = v76 * 24.0 + *(float *)a2;
  v49 = v70;
  *(float *)&v43 = v31;
  v50 = v71;
  v51 = v72;
  *(float *)&v44 = v77 * 24.0 + *(float *)(a2 + 4);
  v45 = v78 * 24.0 + *(float *)(a2 + 8) + v52;
  v46 = v31;
  v47 = v44;
  v67 = a3 * 2.5 + v52 - 6.0;
  v48 = v45 - v67;
  v28(&v69, &v43, &v64, &v61, &v46, a1, v27);
  if ( v69 == 1.0 )
    goto LABEL_50;
  if ( v73 < 0.69999999 )
    return 0;
  v32 = dword_301E49AC;
  if ( dword_301E49AC )
  {
    dword_30076898(199);
    v32 = dword_301E49AC;
  }
  v54 = v71;
  v53 = v70;
  v55 = v72;
  if ( v75 )
  {
    if ( (v69 * v67 + 6.0) * -0.75 > v59 - (v69 * v67 + 6.0) )
    {
      if ( !v32 )
        goto LABEL_97;
      goto LABEL_96;
    }
    if ( v32 )
      dword_30076898(199);
    v58 = v51 - v55;
    v56 = v76 * 6.0 + *(float *)&v49 - *(float *)&v53;
    v57 = v77 * 6.0 + *(float *)&v50 - *(float *)&v54;
    v58 = v78 * 6.0 + v58 + 6.0;
    sub_3003B3D0(&v56);
    v33 = v60 - 24.0;
    *(float *)&v47 = v57 * v33 + *(float *)&v44;
    v48 = v58 * v33 + v45;
    v46 = (v60 * v76 + *(float *)a2 + v56 * v33 + *(float *)&v43) * 0.5;
    *(float *)&v47 = (v60 * v77 + *(float *)(a2 + 4) + *(float *)&v47) * 0.5;
    v28(&v69, &v43, &v64, &v61, &v46, a1, v27);
    if ( v69 < 1.0 )
    {
      if ( dword_301E49AC )
        dword_30076898(199);
      v45 = v72 + 18.0;
      v43 = v70;
      v44 = v71;
      v48 = v48 + 18.0;
      v28(&v69, &v43, &v64, &v61, &v46, a1, v27);
      if ( v69 < 1.0 )
      {
LABEL_50:
        if ( !dword_301E49AC )
          goto LABEL_97;
        goto LABEL_96;
      }
    }
    if ( dword_301E49AC )
      dword_30076898(199);
    v49 = v70;
    v50 = v71;
    v51 = v72;
  }
  v45 = v51;
  v43 = v49;
  v46 = *(float *)&v49;
  v44 = v50;
  v47 = v50;
  v48 = v51 - (v51 - v55 + v51 - v55 + a3);
  v28(&v69, &v43, &v64, &v61, &v46, a1, v27);
  if ( v69 == 1.0 )
  {
    if ( !dword_301E49AC )
      goto LABEL_97;
    goto LABEL_96;
  }
  if ( v73 < 0.69999999 )
    return 0;
  if ( dword_301E49AC )
    dword_30076898(199);
  v34 = v52 + *(float *)(a2 + 8);
  v49 = v70;
  v35 = *(int *)a2;
  v45 = v34;
  v50 = v71;
  v36 = *(int *)(a2 + 4);
  v51 = v72;
  v43 = v35;
  v44 = v36;
  v46 = *(float *)&v35;
  v47 = v36;
  v48 = *(float *)(a2 + 8) - a3 * 1.5;
  v28(&v69, &v43, &v64, &v61, &v46, a1, v27);
  if ( v69 == 1.0 )
  {
    if ( !dword_301E49AC )
      goto LABEL_97;
    goto LABEL_96;
  }
  if ( v73 < 0.69999999 )
    return 0;
  if ( dword_301E49AC )
    dword_30076898(199);
  v56 = *(float *)&v53 - *(float *)&v70;
  v80 = v70;
  v81 = *(float *)&v71;
  v82 = v72;
  v57 = *(float *)&v54 - *(float *)&v71;
  v58 = v55 - v72;
  v79 = sub_3003BB50(&v56);
  v40 = v79;
  v56 = *(float *)&v49 - *(float *)&v53;
  v57 = *(float *)&v50 - *(float *)&v54;
  v58 = v51 - v55;
  v39 = sub_3003BB50(&v56);
  v37 = sub_3003DA20(v39, v40);
  if ( v37 < -50.0 || v37 > 70.0 )
  {
    if ( !dword_301E49AC || (dword_30076898(199), !dword_301E49AC) )
    {
LABEL_97:
      if ( !a10 )
      {
        if ( a6 )
          *(_DWORD *)a6 = 0;
        if ( a7 )
          *(_DWORD *)a7 = 0;
        if ( a8 )
          *(_DWORD *)a8 = 0;
        return 1;
      }
      return 0;
    }
LABEL_96:
    dword_30076898(199);
    goto LABEL_97;
  }
  v45 = v72 + 5.0;
  v44 = v71;
  v43 = v70;
  v46 = *(float *)&v53;
  v48 = v55 + 5.0;
  v47 = v54;
  v64 = 0.0;
  v65 = 0.0;
  v66 = 0;
  v61 = 0.0;
  v62 = 0.0;
  v63 = 0.0;
  v28(&v69, &v43, &v64, &v61, &v46, a1, v27);
  if ( v69 < 1.0 )
  {
    if ( !dword_301E49AC )
      goto LABEL_97;
    goto LABEL_96;
  }
  if ( dword_301E49AC )
    dword_30076898(199);
  v38 = v48;
  *(float *)&v43 = v46;
  v48 = v51 + 5.0;
  v45 = v38;
  v44 = v47;
  v46 = *(float *)&v49;
  v47 = v50;
  v28(&v69, &v43, &v64, &v61, &v46, a1, v27);
  if ( v69 < 1.0 )
  {
    if ( !dword_301E49AC )
      goto LABEL_97;
    goto LABEL_96;
  }
  if ( dword_301E49AC )
  {
    dword_30076898(199);
    if ( dword_301E49AC )
    {
      sub_3001B3C0(v83, (int)&v80, 6.0);
      if ( dword_301E49AC )
      {
        sub_3001B3C0(v84, (int)&v80, 6.0);
        if ( dword_301E49AC )
        {
          sub_3001B3C0(v83, (int)&v53, 6.0);
          if ( dword_301E49AC )
          {
            sub_3001B3C0(v84, (int)&v53, 6.0);
            if ( dword_301E49AC )
            {
              sub_3001B3C0(v83, (int)&v49, 6.0);
              if ( dword_301E49AC )
              {
                sub_3001B3C0(v84, (int)&v49, 6.0);
                if ( dword_301E49AC )
                {
                  dword_30076898(199);
                  if ( dword_301E49AC )
                    dword_30076898(199);
                }
              }
            }
          }
        }
      }
    }
  }
  if ( a6 )
    *(float *)a6 = v82 - *(float *)(a2 + 8) - 6.0;
  if ( a7 )
  {
    v56 = *(float *)&v80 - *(float *)&v53;
    v57 = v81 - *(float *)&v54;
    v58 = v82 - v55;
    v41 = sub_3003BB50(&v56);
    *(float *)a7 = sub_3003DB10(v41);
  }
  if ( a8 )
  {
    v56 = *(float *)&v53 - *(float *)&v49;
    v57 = *(float *)&v54 - *(float *)&v50;
    v58 = v55 - v51;
    v42 = sub_3003BB50(&v56);
    *(float *)a8 = sub_3003DB10(v42);
  }
  return 1;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E49AC: using guessed type int dword_301E49AC;

//----- (30007950) --------------------------------------------------------
char __usercall sub_30007950@<al>(int a1@<eax>, int a2@<ebx>, int a3, int a4, int a5, int a6, int a7)
{
  char result; // al
  int v9; // eax

  (*(void (__cdecl **)(int, int, int, int, int, int, int))(dword_301A0ED0 + 236))(a2, a3, a4, a5, a6, a7, a1);
  result = *(_BYTE *)(a2 + 47);
  if ( result )
  {
    if ( (*(_DWORD *)(a2 + 32) & 0x2000000) != 0 )
    {
      sub_30007A20(*(unsigned __int16 *)(a2 + 40));
      v9 = dword_301A0ED0;
      *(_DWORD *)(dword_301A0ED0 + 52) &= 0xFDFFFFFF;
      result = (*(int (__cdecl **)(int, int, int, int, int, int, unsigned int))(v9 + 236))(
                 a2,
                 a3,
                 a4,
                 a5,
                 a6,
                 a7,
                 a1 & 0xFDFFFFFF);
    }
  }
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300079E0) --------------------------------------------------------
int __fastcall sub_300079E0(int a1)
{
  int result; // eax

  result = *(_DWORD *)dword_301A0ED0;
  if ( a1 )
  {
    *(_DWORD *)(result + 4 * (*(_DWORD *)(result + 132) & 3) + 136) = (unsigned __int8)a1;
    *(_DWORD *)(result + 4 * ((*(_DWORD *)(result + 132))++ & 3) + 152) = 0;
  }
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30007A20) --------------------------------------------------------
void __usercall sub_30007A20(int a1@<edi>)
{
  int v1; // esi
  int v2; // ecx
  int v3; // eax
  _DWORD *v4; // edx

  if ( a1 != 1022 )
  {
    v1 = dword_301A0ED0;
    v2 = *(_DWORD *)(dword_301A0ED0 + 60);
    if ( v2 != 32 )
    {
      v3 = 0;
      if ( v2 <= 0 )
      {
LABEL_7:
        *(_DWORD *)(dword_301A0ED0 + 4 * v2 + 64) = a1;
        ++*(_DWORD *)(v1 + 60);
      }
      else
      {
        v4 = (_DWORD *)(dword_301A0ED0 + 64);
        while ( *v4 != a1 )
        {
          ++v3;
          ++v4;
          if ( v3 >= v2 )
            goto LABEL_7;
        }
      }
    }
  }
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30007A60) --------------------------------------------------------
void __usercall sub_30007A60(float *a1@<edx>, float *a2@<ecx>, float *a3@<esi>, float a4)
{
  double v4; // st7
  double v5; // st7

  v4 = a1[1] * a2[1] + a2[2] * a1[2] + *a1 * *a2;
  if ( v4 >= 0.0 )
    v5 = v4 / a4;
  else
    v5 = v4 * a4;
  *a3 = *a1 - v5 * *a2;
  a3[1] = a1[1] - v5 * a2[1];
  a3[2] = a1[2] - v5 * a2[2];
}

//----- (30007AE0) --------------------------------------------------------
double sub_30007AE0()
{
  double result; // st7

  if ( *(int *)(*(_DWORD *)dword_301A0ED0 + 16) < 1700 )
    result = (double)*(int *)(*(_DWORD *)dword_301A0ED0 + 16) * 0.00088235294 + 1.0;
  else
    result = 2.5;
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30007B40) --------------------------------------------------------
void sub_30007B40()
{
  _BYTE *v0; // esi
  int v1; // edx
  double v2; // st5
  long double v3; // st7
  double v4; // st7
  int v5; // ecx
  double v6; // st7
  unsigned __int8 v7; // al
  double v8; // st7
  double v9; // st7
  float v10; // [esp+8h] [ebp-8h]
  float v11; // [esp+Ch] [ebp-4h]

  v0 = (_BYTE *)dword_301A0ED0;
  v1 = *(_DWORD *)dword_301A0ED0;
  v2 = *(float *)(*(_DWORD *)dword_301A0ED0 + 40);
  if ( dword_301A0D4C )
    v2 = 0.0;
  v3 = sqrt(
         v2 * v2
       + *(float *)(*(_DWORD *)dword_301A0ED0 + 36) * *(float *)(*(_DWORD *)dword_301A0ED0 + 36)
       + *(float *)(*(_DWORD *)dword_301A0ED0 + 32) * *(float *)(*(_DWORD *)dword_301A0ED0 + 32));
  v10 = v3;
  if ( v3 >= 1.0 )
  {
    v4 = 0.0;
    if ( *(_BYTE *)(dword_301A0ED0 + 217) <= 1u )
    {
      if ( dword_301A0D4C )
      {
        if ( (dword_301A0D74 & 2) == 0 )
        {
          v5 = *(_DWORD *)(v1 + 12);
          if ( (v5 & 0x200) == 0 )
          {
            if ( v10 >= 100.0 )
              v6 = v10;
            else
              v6 = 100.0;
            if ( (v5 & 0x100) != 0 )
            {
              v6 = v6 * 0.30000001;
            }
            else if ( (v5 & 0x2000) != 0 )
            {
              if ( *(int *)(v1 + 16) > 1800 )
              {
                *(_DWORD *)(v1 + 12) = v5 & 0xFFFFDFFF;
                *(_DWORD *)(*(_DWORD *)v0 + 104) = 0;
              }
              else
              {
                v11 = v6;
                v6 = sub_30007AE0() * v11;
              }
            }
            v4 = v6 * (flt_301A0D44 * 5.5);
          }
        }
      }
    }
    v7 = v0[217];
    if ( v7 )
      v4 = v4 + (double)v7 * 1.0 * flt_301A0D44 * v10;
    if ( *(_DWORD *)(*(_DWORD *)v0 + 4) == 4 )
      v4 = v4 + 5.0 * flt_301A0D44 * v10;
    v8 = v10 - v4;
    if ( v8 < 0.0 )
      v8 = 0.0;
    v9 = v8 / v10;
    *(float *)(v1 + 32) = v9 * *(float *)(v1 + 32);
    *(float *)(v1 + 36) = v9 * *(float *)(v1 + 36);
    *(float *)(v1 + 40) = v9 * *(float *)(v1 + 40);
  }
  else
  {
    *(_DWORD *)(v1 + 40) = 0;
    *(_DWORD *)(v1 + 36) = 0;
    *(_DWORD *)(v1 + 32) = 0;
  }
}
// 30007C90: variable 'v1' is possibly undefined
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0D4C: using guessed type int dword_301A0D4C;
// 301A0D74: using guessed type int dword_301A0D74;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30007CB0) --------------------------------------------------------
void __usercall sub_30007CB0(float *a1@<edx>, float a2, float a3)
{
  int v3; // esi
  int v4; // ecx
  double v5; // st7
  double v6; // st7
  double v7; // st7
  float v8; // [esp+4h] [ebp-4h]

  v3 = dword_301A0ED0;
  v4 = *(_DWORD *)dword_301A0ED0;
  v5 = a2
     - (*(float *)(*(_DWORD *)dword_301A0ED0 + 40) * a1[2]
      + *(float *)(*(_DWORD *)dword_301A0ED0 + 36) * a1[1]
      + *a1 * *(float *)(*(_DWORD *)dword_301A0ED0 + 32));
  v8 = v5;
  if ( v5 > 0.0 )
  {
    if ( a2 >= 100.0 )
      v6 = a2;
    else
      v6 = 100.0;
    v7 = v6 * flt_301A0D44 * a3;
    if ( v7 > v8 )
      v7 = v8;
    if ( *(_DWORD *)(v4 + 84) != 1023 )
      v7 = v7 * (1.0 / *(float *)(v4 + 892));
    if ( v7 > v8 )
      v7 = v8;
    *(float *)(v4 + 32) = v7 * *a1 + *(float *)(v4 + 32);
    *(float *)(*(_DWORD *)v3 + 36) = v7 * a1[1] + *(float *)(*(_DWORD *)v3 + 36);
    *(float *)(*(_DWORD *)v3 + 40) = v7 * a1[2] + *(float *)(*(_DWORD *)v3 + 40);
  }
}
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30007D70) --------------------------------------------------------
double __usercall sub_30007D70@<st0>(char *a1@<eax>)
{
  int v2; // ebx
  int v3; // edi
  int v4; // ecx
  int v5; // eax
  int v6; // esi
  signed int v7; // eax
  double result; // st7
  int v9; // ecx
  long double v10; // st7
  int v11; // ecx
  int v12; // [esp+Ch] [ebp-4h]

  v2 = a1[21];
  v3 = a1[20];
  v4 = abs8(a1[20]);
  v5 = abs8(a1[21]);
  v12 = v4;
  if ( v5 > v4 )
  {
    v4 = v5;
    v12 = v5;
  }
  v6 = a1[22];
  v7 = abs32(v6);
  if ( v7 > v4 )
  {
    v4 = v7;
    v12 = v7;
  }
  if ( !v4 )
    return 0.0;
  v9 = *(_DWORD *)dword_301A0ED0;
  v10 = (double)*(int *)(*(_DWORD *)dword_301A0ED0 + 68)
      * (double)v12
      / (sqrt((double)(v3 * v3 + v2 * v2 + v6 * v6))
       * 127.0);
  if ( *(char *)(*(_DWORD *)dword_301A0ED0 + 12) >= 0 && *(float *)(v9 + 64) == 0.0 )
    result = v10 * *(float *)(v9 + 848);
  else
    result = v10 * *(float *)(v9 + 844);
  v11 = *(_DWORD *)(v9 + 4);
  if ( v11 == 2 )
    result = result * 3.0;
  if ( v11 == 3 )
    result = result * 6.0;
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30007E40) --------------------------------------------------------
double __cdecl sub_30007E40(_BYTE *a1)
{
  char v1; // al
  long double v2; // st7
  int v3; // ecx
  long double v4; // st7
  int v5; // esi
  double result; // st7
  long double v7; // st7
  long double v8; // st7
  int v9; // eax
  int v10; // eax
  int v11; // ebp
  int v12; // edi
  int v13; // ebx
  double v14; // st7
  double v15; // st7
  unsigned __int8 v16; // al
  int v17; // esi
  int v18; // esi
  float v19; // [esp+0h] [ebp-4h]
  float v20; // [esp+0h] [ebp-4h]

  v1 = a1[20];
  if ( v1 >= 0 )
    v2 = (double)v1;
  else
    v2 = (double)v1 * *(float *)(*(_DWORD *)dword_301A0ED0 + 864);
  v3 = (char)a1[21];
  v4 = fabs(v2);
  v5 = *(_DWORD *)dword_301A0ED0;
  v19 = fabs((double)v3 * *(float *)(*(_DWORD *)dword_301A0ED0 + 860));
  if ( v4 <= v19 )
    v4 = v19;
  if ( v4 == 0.0 )
    return 0.0;
  v7 = (double)*(int *)(v5 + 68) * v4 / (sqrt((double)(v1 * v1 + v3 * v3)) * 127.0);
  if ( *(char *)(v5 + 12) >= 0 && *(float *)(v5 + 64) == 0.0 )
    v8 = v7 * *(float *)(v5 + 848);
  else
    v8 = v7 * *(float *)(v5 + 844);
  v9 = *(_DWORD *)(v5 + 4);
  v20 = v8;
  if ( v9 == 2 )
  {
    result = v20 * 3.0;
  }
  else if ( v9 == 3 )
  {
    result = v20 * 6.0;
  }
  else
  {
    v10 = *(_DWORD *)(v5 + 204);
    if ( v10 == *(_DWORD *)(v5 + 832) )
      v11 = 2;
    else
      v11 = v10 == *(_DWORD *)(v5 + 828);
    v12 = *(_DWORD *)(v5 + 828);
    v13 = *(_DWORD *)(v5 + 832);
    v14 = sub_30009F60(v13, v12);
    if ( v14 == 0.0 )
    {
      v15 = sub_30009F60(v12, v13);
      if ( v15 == 0.0 )
      {
        result = v20;
        if ( v11 == 1 )
        {
          result = result * *(float *)(v5 + 852);
        }
        else if ( v11 == 2 )
        {
          result = result * *(float *)(v5 + 856);
        }
      }
      else
      {
        result = ((1.0 - v15) * *(float *)(v5 + 852) + v15 * *(float *)(v5 + 856)) * v20;
      }
    }
    else
    {
      result = ((1.0 - v14) * *(float *)(v5 + 856) + v14 * *(float *)(v5 + 852)) * v20;
    }
    v16 = *(_BYTE *)(dword_301A0ED0 + 217);
    if ( v16 )
      result = result * (1.0 - (double)v16 * 0.33333334 * (1.0 - 0.5));
  }
  v17 = *(_DWORD *)(v5 + 176);
  if ( v17 )
  {
    v18 = *(_DWORD *)(dword_300F0FB4 + 4 * v17);
    if ( *(float *)(v18 + 532) > 0.0 )
      result = result * *(float *)(v18 + 532);
  }
  if ( (a1[5] & 4) != 0 )
    result = result * 0.40000001;
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300082A0) --------------------------------------------------------
int sub_300082A0()
{
  int v1; // eax

  if ( (*(_BYTE *)(*(_DWORD *)dword_301A0ED0 + 12) & 0x10) != 0 )
    return 83;
  if ( (dword_301A0D74 & 0x2000) == 0 )
  {
    v1 = (dword_301A0D74 >> 20) & 0x1F;
    if ( v1 )
      return v1 + 70;
  }
  return 0;
}
// 301A0D74: using guessed type int dword_301A0D74;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300082D0) --------------------------------------------------------
int __cdecl sub_300082D0(float a1)
{
  int v1; // eax
  int v2; // ecx
  long double v3; // st7
  int v4; // esi
  double v5; // st6
  int result; // eax

  v1 = dword_301A0ED0;
  dword_301A0D50 = 0;
  dword_301A0D54 = 0;
  dword_301A0D4C = 0;
  *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 84) = 1023;
  v2 = *(_DWORD *)v1;
  v3 = (double)*(int *)(*(_DWORD *)v1 + 60) * (a1 + a1);
  if ( (*(_DWORD *)(*(_DWORD *)v1 + 12) & 0x2000) != 0 )
  {
    v4 = *(_DWORD *)(v2 + 16);
    if ( v4 <= 1800 )
    {
      if ( v4 < 1700 )
        v5 = (double)*(int *)(v2 + 16) * 0.00088235294 + 1.0;
      else
        v5 = 2.5;
      v3 = v3 / v5;
    }
  }
  *(float *)(v2 + 40) = sqrt(v3);
  *(_DWORD *)(*(_DWORD *)v1 + 12) |= 0x2008u;
  *(_DWORD *)(*(_DWORD *)v1 + 16) = 0;
  result = *(_DWORD *)v1;
  *(_DWORD *)(result + 104) = *(_DWORD *)(result + 28);
  return result;
}
// 301A0D4C: using guessed type int dword_301A0D4C;
// 301A0D50: using guessed type int dword_301A0D50;
// 301A0D54: using guessed type int dword_301A0D54;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30008360) --------------------------------------------------------
int sub_30008360()
{
  _BYTE *v0; // edi
  _DWORD *v1; // eax
  int v2; // edx
  int v3; // ecx
  int v5; // eax
  double v6; // st7
  float *v7; // ebx
  double v8; // st7
  double v9; // st7
  double v10; // st6
  int v11; // eax
  char v12; // al
  _DWORD *v13; // edi
  bool v14; // sf
  int v15; // eax
  char *v16; // eax
  int *v17; // eax
  int *v18; // esi
  int v19; // eax
  float v20; // [esp+8h] [ebp-18h] BYREF
  float v21; // [esp+Ch] [ebp-14h]
  float v22; // [esp+10h] [ebp-10h]
  float v23; // [esp+14h] [ebp-Ch] BYREF
  float v24; // [esp+18h] [ebp-8h]
  float v25; // [esp+1Ch] [ebp-4h]

  v0 = (_BYTE *)dword_301A0ED0;
  v1 = *(_DWORD **)dword_301A0ED0;
  if ( *(_DWORD *)(dword_301A0ED0 + 4) - *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 100) < 500 )
    return 0;
  v2 = v1[3];
  if ( (v2 & 0x800) != 0 )
    return 0;
  v3 = v1[51];
  if ( v3 == v1[208] || v3 == v1[207] || *(char *)(dword_301A0ED0 + 26) < 10 )
    return 0;
  if ( (v2 & 8) != 0 )
  {
    *(_BYTE *)(dword_301A0ED0 + 26) = 0;
    return 0;
  }
  sub_300082D0(39.0);
  v5 = *(_DWORD *)v0;
  if ( (*(_BYTE *)(*(_DWORD *)v0 + 12) & 0x10) != 0 )
  {
    v6 = *(float *)(v5 + 40) * 0.75;
    v22 = 0.0;
    *(float *)(v5 + 40) = v6;
    v20 = *(float *)&dword_301A0D20;
    v21 = *(float *)&dword_301A0D24;
    sub_3003B3D0(&v20);
    v7 = *(float **)v0;
    if ( flt_301A0D28 * *(float *)(*(_DWORD *)v0 + 96)
       + *(float *)&dword_301A0D24 * *(float *)(*(_DWORD *)v0 + 92)
       + *(float *)&dword_301A0D20 * *(float *)(*(_DWORD *)v0 + 88) >= 0.0 )
    {
      v9 = v20;
      v10 = v21;
    }
    else
    {
      v8 = (v22 * v7[24] + v21 * v7[23] + v20 * v7[22]) * -2.0;
      v23 = v8 * v7[22] + v20;
      v24 = v8 * v7[23] + v21;
      v25 = v8 * v7[24] + v22;
      sub_3003B3D0(&v23);
      v9 = v23;
      v10 = v24;
    }
    v7[8] = 128.0 * v9;
    *(float *)(*(_DWORD *)v0 + 36) = 128.0 * v10;
    *(_DWORD *)(*(_DWORD *)v0 + 12) &= 0xFFFFFFEF;
  }
  v11 = sub_300082A0();
  sub_300079E0(v11);
  *(float *)(*(_DWORD *)v0 + 984) = *(float *)(*(_DWORD *)v0 + 984) + 64.0;
  if ( *(float *)(*(_DWORD *)v0 + 984) > 255.0 )
    *(_DWORD *)(*(_DWORD *)v0 + 984) = 1132396544;
  v12 = v0[24];
  v13 = *(_DWORD **)v0;
  v14 = v12 < 0;
  v15 = v13[1];
  if ( v14 )
  {
    if ( v15 < 6 )
    {
      v16 = Destination + 131732;
      goto LABEL_21;
    }
  }
  else if ( v15 < 6 )
  {
    v16 = Destination + 131216;
LABEL_21:
    if ( *(_DWORD *)v16 )
    {
      v17 = sub_30002F60(v16, v13[43]);
      v18 = v17;
      if ( v17 )
      {
        if ( v17[28] )
        {
          v19 = rand();
          sub_300030C0((__int16 *)&v18[4 * (v19 % v18[28]) + 29], v13, 1, 0, 1);
        }
      }
    }
    return 1;
  }
  return 1;
}
// 301A0D20: using guessed type int dword_301A0D20;
// 301A0D24: using guessed type int dword_301A0D24;
// 301A0D28: using guessed type float flt_301A0D28;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30008570) --------------------------------------------------------
void sub_30008570()
{
  _BYTE *v0; // esi
  double v1; // st7
  double v2; // st7
  double v3; // st6
  int v4; // edx
  double v5; // st7
  float v6; // [esp+4h] [ebp-24h]
  float v7; // [esp+8h] [ebp-20h]
  float v8; // [esp+Ch] [ebp-1Ch]
  float v9; // [esp+Ch] [ebp-1Ch]
  float v10[4]; // [esp+10h] [ebp-18h] BYREF
  float v11; // [esp+20h] [ebp-8h]

  sub_30007B40();
  v0 = (_BYTE *)dword_301A0ED0;
  v1 = sub_30007D70((char *)(dword_301A0ED0 + 4));
  v6 = v1;
  if ( v1 == 0.0 )
  {
    v2 = 0.0;
    v11 = 0.0;
    v3 = 0.0;
  }
  else
  {
    v4 = (char)v0[26];
    v8 = (float)(char)v0[25];
    v5 = (double)(char)v0[24];
    v7 = v5;
    v2 = (v5 * *(float *)&dword_301A0D20 + v8 * flt_301A0D2C) * v6;
    v11 = (v7 * *(float *)&dword_301A0D24 + v8 * flt_301A0D30) * v6;
    v3 = (v7 * flt_301A0D28 + v8 * flt_301A0D34) * v6 + (double)v4 * v6;
  }
  if ( *(_DWORD *)(*(_DWORD *)v0 + 68) )
    v3 = v3 - (double)(16 * (v0[9] & 0x20)) + (double)(16 * (v0[9] & 0x10));
  v10[0] = v2;
  v10[1] = v11;
  v10[2] = v3;
  v9 = sub_3003B3D0(v10);
  sub_30007CB0(v10, v9, 8.0);
  sub_3000E240(0);
}
// 301A0D20: using guessed type int dword_301A0D20;
// 301A0D24: using guessed type int dword_301A0D24;
// 301A0D28: using guessed type float flt_301A0D28;
// 301A0D2C: using guessed type float flt_301A0D2C;
// 301A0D30: using guessed type float flt_301A0D30;
// 301A0D34: using guessed type float flt_301A0D34;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300086A0) --------------------------------------------------------
void sub_300086A0()
{
  int v0; // ebp
  int v1; // ecx
  int v2; // ecx
  int v3; // ecx
  char v4; // bl
  int v5; // ecx
  int v6; // ebx
  float *v7; // ecx
  double v8; // st7
  double v9; // st7
  float v10; // [esp+0h] [ebp-30h]
  float v11; // [esp+8h] [ebp-28h]
  float v12; // [esp+Ch] [ebp-24h]
  float v13; // [esp+Ch] [ebp-24h]
  int v14; // [esp+Ch] [ebp-24h]
  float v15; // [esp+Ch] [ebp-24h]
  float v16; // [esp+10h] [ebp-20h]
  float v17; // [esp+14h] [ebp-1Ch]
  float v18; // [esp+14h] [ebp-1Ch]
  float v19; // [esp+14h] [ebp-1Ch]
  float v20; // [esp+14h] [ebp-1Ch]
  float v21; // [esp+14h] [ebp-1Ch]
  float v22[6]; // [esp+18h] [ebp-18h] BYREF

  sub_30007B40();
  v6 = dword_301A0ED0;
  v14 = *(char *)(dword_301A0ED0 + 25);
  v16 = (float)*(char *)(dword_301A0ED0 + 24);
  qmemcpy(v22, (const void *)(dword_301A0ED0 + 4), sizeof(v22));
  v15 = (float)v14;
  v20 = sub_30007D70((char *)v22);
  flt_301A0D28 = 0.0;
  flt_301A0D34 = 0.0;
  sub_3003B3D0((float *)&dword_301A0D20);
  sub_3003B3D0(&flt_301A0D2C);
  v22[2] = 0.0;
  v22[0] = flt_301A0D2C * v15 + *(float *)&dword_301A0D20 * v16;
  v22[1] = flt_301A0D30 * v15 + *(float *)&dword_301A0D24 * v16;
  v21 = sub_3003B3D0(v22) * v20;
  sub_30007CB0(v22, v21, 1.0);
  if ( dword_301A0D50 )
  {
    v7 = *(float **)v6;
    v8 = flt_301A0D6C * *(float *)(*(_DWORD *)v6 + 36)
       + flt_301A0D70 * *(float *)(*(_DWORD *)v6 + 40)
       + flt_301A0D68 * *(float *)(*(_DWORD *)v6 + 32);
    if ( v8 >= 0.0 )
      v9 = v8 * 0.99900097;
    else
      v9 = v8 * 1.001;
    v7[8] = v7[8] - flt_301A0D68 * v9;
    v7[9] = v7[9] - flt_301A0D6C * v9;
    v7[10] = v7[10] - flt_301A0D70 * v9;
  }
  sub_3000E240(1);
  v0 = *(_DWORD *)dword_301A0ED0;
  v1 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12);
  if ( (v1 & 1) == 0 || (*(_DWORD *)(v0 + 128) & 0xC000) != 0 )
  {
    if ( (v1 & 0x10) != 0 )
    {
      v17 = sub_3003BA90((float *)(v0 + 88)) + 180.0;
      v13 = v17 - *(float *)(v0 + 196);
      v3 = (unsigned __int64)sub_3003DB10(v13);
      if ( (int)abs32(v3) > 90 )
        LOBYTE(v3) = v3 <= 0 ? -90 : 90;
      *(_DWORD *)(v0 + 124) = (char)v3;
    }
    else
    {
      v4 = *(_BYTE *)(dword_301A0ED0 + 24);
      v22[0] = *(float *)(v0 + 20) - *(float *)&dword_301A0D8C;
      v22[1] = *(float *)(v0 + 24) - *(float *)&dword_301A0D90;
      v22[2] = *(float *)(v0 + 28) - *(float *)&dword_301A0D94;
      if ( !v4 && !*(_BYTE *)(dword_301A0ED0 + 25)
        || *(_DWORD *)(v0 + 84) == 1023
        || (v18 = sqrt(v22[2] * v22[2] + v22[1] * v22[1] + v22[0] * v22[0]), v18 == 0.0)
        || flt_301A0D44 * 5.0 >= v18 )
      {
        *(_DWORD *)(v0 + 124) = 0;
      }
      else
      {
        sub_3003B600(v22, &v22[3]);
        sub_3003BCB0(&v22[3], &v22[3]);
        v10 = v22[4] - *(float *)(v0 + 196);
        v5 = (unsigned __int64)sub_3003DB10(v10);
        if ( v4 < 0 )
        {
          v19 = (float)v5;
          v11 = v19 + 180.0;
          v5 = (unsigned __int64)sub_3003DB10(v11);
        }
        if ( (int)abs32(v5) > 90 )
          LOBYTE(v5) = v5 <= 0 ? -90 : 90;
        *(_DWORD *)(v0 + 124) = (char)v5;
      }
    }
  }
  else
  {
    v12 = *(float *)(v0 + 872) - *(float *)(v0 + 196);
    v2 = (unsigned __int64)sub_3003DB10(v12);
    if ( (int)abs32(v2) > 90 )
      LOBYTE(v2) = v2 <= 0 ? -90 : 90;
    *(_DWORD *)(v0 + 124) = (char)v2;
  }
}
// 301A0D20: using guessed type int dword_301A0D20;
// 301A0D24: using guessed type int dword_301A0D24;
// 301A0D28: using guessed type float flt_301A0D28;
// 301A0D2C: using guessed type float flt_301A0D2C;
// 301A0D30: using guessed type float flt_301A0D30;
// 301A0D34: using guessed type float flt_301A0D34;
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0D50: using guessed type int dword_301A0D50;
// 301A0D68: using guessed type float flt_301A0D68;
// 301A0D6C: using guessed type float flt_301A0D6C;
// 301A0D70: using guessed type float flt_301A0D70;
// 301A0D8C: using guessed type int dword_301A0D8C;
// 301A0D90: using guessed type int dword_301A0D90;
// 301A0D94: using guessed type int dword_301A0D94;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30008810) --------------------------------------------------------
void __usercall sub_30008810(float a1@<ebp>)
{
  int v1; // ebp
  int v2; // ecx
  double v3; // st7
  int v4; // ecx
  double v5; // st7
  float v6; // ecx
  int v7; // ecx
  char v8; // bl
  int v9; // ecx
  int v10; // ecx
  int v11; // edx
  int v12; // eax
  int v13; // esi
  int v14; // ecx
  double v15; // st7
  int v16; // ebp
  double v17; // st7
  double v18; // st7
  double v19; // st6
  double v20; // st6
  double v21; // st7
  double v22; // st7
  double v23; // st7
  int v24; // eax
  int v25; // ecx
  int v26; // ecx
  int v27; // edx
  float *v28; // ecx
  double v29; // st7
  double v30; // st6
  double v31; // st5
  double v32; // st4
  double v33; // st4
  float *v34; // esi
  float *v35; // ebp
  float v37; // [esp+4h] [ebp-30h]
  float v38; // [esp+4h] [ebp-30h]
  float v39; // [esp+4h] [ebp-30h]
  float v40; // [esp+8h] [ebp-2Ch]
  float v41; // [esp+8h] [ebp-2Ch]
  float v42; // [esp+Ch] [ebp-28h]
  float v43; // [esp+Ch] [ebp-28h]
  float v44; // [esp+Ch] [ebp-28h]
  float v45; // [esp+10h] [ebp-24h] BYREF
  float v46; // [esp+14h] [ebp-20h]
  float v47; // [esp+18h] [ebp-1Ch]
  float v48[6]; // [esp+1Ch] [ebp-18h] BYREF

  v10 = dword_301A0ED0;
  v11 = *(_DWORD *)dword_301A0ED0;
  v12 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12);
  if ( (v12 & 0x2000) != 0 )
  {
    v13 = *(_DWORD *)(v11 + 16);
    if ( v13 <= 1800 )
    {
      if ( v13 )
        goto LABEL_10;
      if ( *(float *)(v11 + 104) + 18.0 <= *(float *)(v11 + 28) )
      {
        *(_DWORD *)(v11 + 16) = 1200;
        *(float *)(*(_DWORD *)v10 + 32) = *(float *)(*(_DWORD *)v10 + 32) * 0.5;
        *(float *)(*(_DWORD *)v10 + 36) = *(float *)(*(_DWORD *)v10 + 36) * 0.5;
        v14 = *(_DWORD *)v10;
        v15 = *(float *)(v14 + 40) * 0.5;
        goto LABEL_9;
      }
      *(_DWORD *)(v11 + 16) = 1800;
    }
    else
    {
      *(_DWORD *)(v11 + 12) = v12 & 0xFFFFDFFF;
      *(_DWORD *)(*(_DWORD *)v10 + 104) = 0;
    }
    *(float *)(*(_DWORD *)v10 + 32) = *(float *)(*(_DWORD *)v10 + 32) * 0.64999998;
    *(float *)(*(_DWORD *)v10 + 36) = *(float *)(*(_DWORD *)v10 + 36) * 0.64999998;
    v14 = *(_DWORD *)v10;
    v15 = *(float *)(v14 + 40) * 0.64999998;
LABEL_9:
    *(float *)(v14 + 40) = v15;
  }
LABEL_10:
  if ( sub_30008360() )
  {
    sub_300086A0();
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 100) = *(_DWORD *)(dword_301A0ED0 + 4);
    return;
  }
  sub_30007B40();
  v16 = dword_301A0ED0;
  v40 = (float)*(char *)(dword_301A0ED0 + 24);
  v17 = (double)*(char *)(dword_301A0ED0 + 25);
  qmemcpy(v48, (const void *)(dword_301A0ED0 + 4), sizeof(v48));
  v38 = v17;
  v43 = sub_30007E40(v48);
  v18 = flt_301A0D70 * 0.0;
  v19 = flt_301A0D6C * *(float *)&dword_301A0D24 + flt_301A0D68 * *(float *)&dword_301A0D20 + v18;
  if ( v19 >= 0.0 )
    v20 = v19 * 0.99900097;
  else
    v20 = v19 * 1.001;
  *(float *)&dword_301A0D20 = *(float *)&dword_301A0D20 - flt_301A0D68 * v20;
  *(float *)&dword_301A0D24 = *(float *)&dword_301A0D24 - flt_301A0D6C * v20;
  flt_301A0D28 = -(flt_301A0D70 * v20);
  v21 = v18 + flt_301A0D30 * flt_301A0D6C + flt_301A0D2C * flt_301A0D68;
  if ( v21 >= 0.0 )
    v22 = v21 * 0.99900097;
  else
    v22 = v21 * 1.001;
  flt_301A0D2C = flt_301A0D2C - flt_301A0D68 * v22;
  flt_301A0D30 = flt_301A0D30 - flt_301A0D6C * v22;
  flt_301A0D34 = -(flt_301A0D70 * v22);
  sub_3003B3D0((float *)&dword_301A0D20);
  sub_3003B3D0(&flt_301A0D2C);
  v48[2] = flt_301A0D34 * v38 + flt_301A0D28 * v40;
  v47 = v48[2];
  v45 = flt_301A0D2C * v38 + *(float *)&dword_301A0D20 * v40;
  v46 = flt_301A0D30 * v38 + *(float *)&dword_301A0D24 * v40;
  v23 = sub_3003B3D0(&v45);
  v24 = *(_DWORD *)v16;
  v25 = *(_DWORD *)(*(_DWORD *)v16 + 204);
  v44 = v23 * v43;
  if ( v25 == *(_DWORD *)(*(_DWORD *)v16 + 832) )
    v26 = 2;
  else
    v26 = v25 == *(_DWORD *)(v24 + 828);
  if ( (dword_301A0D74 & 2) != 0 || (*(_DWORD *)(v24 + 12) & 0x200) != 0 )
  {
    *(float *)&v27 = 1.0;
    goto LABEL_29;
  }
  if ( v26 != 1 )
  {
    if ( v26 != 2 )
    {
      v39 = 9.0;
      goto LABEL_30;
    }
    *(float *)&v27 = 12.0;
LABEL_29:
    v39 = *(float *)&v27;
    goto LABEL_30;
  }
  v39 = 19.0;
LABEL_30:
  if ( (*(_DWORD *)(v24 + 12) & 0x100) != 0 )
    v39 = v39 * 0.25;
  sub_30007CB0(&v45, v44, v39);
  if ( (dword_301A0D74 & 2) != 0 || (*(_DWORD *)(*(_DWORD *)v16 + 12) & 0x200) != 0 )
    *(float *)(*(_DWORD *)v16 + 40) = *(float *)(*(_DWORD *)v16 + 40)
                                    - (double)*(int *)(*(_DWORD *)v16 + 60) * flt_301A0D44;
  v28 = *(float **)v16;
  v41 = sqrt(
          *(float *)(*(_DWORD *)v16 + 40) * *(float *)(*(_DWORD *)v16 + 40)
        + *(float *)(*(_DWORD *)v16 + 36) * *(float *)(*(_DWORD *)v16 + 36)
        + *(float *)(*(_DWORD *)v16 + 32) * *(float *)(*(_DWORD *)v16 + 32));
  v29 = *(float *)(*(_DWORD *)v16 + 32);
  v30 = *(float *)(*(_DWORD *)v16 + 36);
  v31 = *(float *)(*(_DWORD *)v16 + 40);
  v32 = flt_301A0D70 * v28[10] + flt_301A0D6C * v28[9] + flt_301A0D68 * v28[8];
  if ( v32 >= 0.0 )
    v33 = v32 * 0.99900097;
  else
    v33 = v32 * 1.001;
  v28[8] = v28[8] - flt_301A0D68 * v33;
  v28[9] = v28[9] - flt_301A0D6C * v33;
  v28[10] = v28[10] - v33 * flt_301A0D70;
  v34 = (float *)(*(_DWORD *)v16 + 32);
  if ( v31 * *(float *)(*(_DWORD *)v16 + 40) + v30 * *(float *)(*(_DWORD *)v16 + 36) + v29 * *v34 > 0.0 )
  {
    sub_3003B3D0(v34);
    *(float *)(*(_DWORD *)v16 + 32) = v41 * *(float *)(*(_DWORD *)v16 + 32);
    *(float *)(*(_DWORD *)v16 + 36) = v41 * *(float *)(*(_DWORD *)v16 + 36);
    *(float *)(*(_DWORD *)v16 + 40) = v41 * *(float *)(*(_DWORD *)v16 + 40);
  }
  v35 = *(float **)v16;
  if ( v35[8] != 0.0 || v35[9] != 0.0 )
    sub_3000E240(0);
  v46 = a1;
  v1 = *(_DWORD *)dword_301A0ED0;
  v2 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12);
  if ( (v2 & 1) == 0 || (*(_DWORD *)(v1 + 128) & 0xC000) != 0 )
  {
    if ( (v2 & 0x10) != 0 )
    {
      v5 = sub_3003BA90((float *)(v1 + 88));
      v45 = v6;
      v47 = v5 + 180.0;
      v45 = v47 - *(float *)(v1 + 196);
      v7 = (unsigned __int64)sub_3003DB10(v45);
      if ( (int)abs32(v7) > 90 )
        LOBYTE(v7) = v7 <= 0 ? -90 : 90;
      *(_DWORD *)(v1 + 124) = (char)v7;
    }
    else
    {
      v8 = *(_BYTE *)(dword_301A0ED0 + 24);
      v48[0] = *(float *)(v1 + 20) - *(float *)&dword_301A0D8C;
      v48[1] = *(float *)(v1 + 24) - *(float *)&dword_301A0D90;
      v48[2] = *(float *)(v1 + 28) - *(float *)&dword_301A0D94;
      if ( !v8 && !*(_BYTE *)(dword_301A0ED0 + 25)
        || *(_DWORD *)(v1 + 84) == 1023
        || (v47 = sqrt(v48[2] * v48[2] + v48[1] * v48[1] + v48[0] * v48[0]), v47 == 0.0)
        || flt_301A0D44 * 5.0 >= v47 )
      {
        *(_DWORD *)(v1 + 124) = 0;
      }
      else
      {
        sub_3003B600(v48, &v48[3]);
        sub_3003BCB0(&v48[3], &v48[3]);
        v37 = v48[4] - *(float *)(v1 + 196);
        v9 = (unsigned __int64)sub_3003DB10(v37);
        v47 = *(float *)&v9;
        if ( v8 < 0 )
        {
          v47 = (float)SLODWORD(v47);
          v42 = v47 + 180.0;
          v9 = (unsigned __int64)sub_3003DB10(v42);
        }
        if ( (int)abs32(v9) > 90 )
          LOBYTE(v9) = v9 <= 0 ? -90 : 90;
        *(_DWORD *)(v1 + 124) = (char)v9;
      }
    }
  }
  else
  {
    v3 = *(float *)(v1 + 872);
    v45 = *(float *)(*(_DWORD *)dword_301A0ED0 + 12);
    v45 = v3 - *(float *)(v1 + 196);
    v4 = (unsigned __int64)sub_3003DB10(v45);
    if ( (int)abs32(v4) > 90 )
      LOBYTE(v4) = v4 <= 0 ? -90 : 90;
    *(_DWORD *)(v1 + 124) = (char)v4;
  }
}
// 30008810: could not find valid save-restore pair for ebp
// 30008810: could not find valid save-restore pair for edi
// 300080E7: variable 'v6' is possibly undefined
// 301A0D20: using guessed type int dword_301A0D20;
// 301A0D24: using guessed type int dword_301A0D24;
// 301A0D28: using guessed type float flt_301A0D28;
// 301A0D2C: using guessed type float flt_301A0D2C;
// 301A0D30: using guessed type float flt_301A0D30;
// 301A0D34: using guessed type float flt_301A0D34;
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0D68: using guessed type float flt_301A0D68;
// 301A0D6C: using guessed type float flt_301A0D6C;
// 301A0D70: using guessed type float flt_301A0D70;
// 301A0D74: using guessed type int dword_301A0D74;
// 301A0D8C: using guessed type int dword_301A0D8C;
// 301A0D90: using guessed type int dword_301A0D90;
// 301A0D94: using guessed type int dword_301A0D94;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30008C70) --------------------------------------------------------
int sub_30008C70()
{
  int result; // eax
  int v1; // edi
  float *v2; // esi
  long double v3; // st7
  float v4; // [esp+0h] [ebp-4h]

  result = dword_301A0D4C;
  if ( dword_301A0D4C )
  {
    v1 = dword_301A0ED0;
    v2 = (float *)(*(_DWORD *)dword_301A0ED0 + 32);
    v3 = sqrt(
           *v2 * *v2
         + *(float *)(*(_DWORD *)dword_301A0ED0 + 36) * *(float *)(*(_DWORD *)dword_301A0ED0 + 36)
         + *(float *)(*(_DWORD *)dword_301A0ED0 + 40) * *(float *)(*(_DWORD *)dword_301A0ED0 + 40))
       - 20.0;
    v4 = v3;
    if ( v3 > 0.0 )
    {
      sub_3003B3D0(v2);
      *(float *)(*(_DWORD *)v1 + 32) = v4 * *(float *)(*(_DWORD *)v1 + 32);
      result = *(_DWORD *)v1;
      *(float *)(*(_DWORD *)v1 + 36) = v4 * *(float *)(*(_DWORD *)v1 + 36);
      *(float *)(*(_DWORD *)v1 + 40) = v4 * *(float *)(*(_DWORD *)v1 + 40);
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 40) = 0;
      result = *(_DWORD *)v1;
      *(_DWORD *)(*(_DWORD *)v1 + 36) = 0;
      *(_DWORD *)(*(_DWORD *)v1 + 32) = 0;
    }
  }
  return result;
}
// 301A0D4C: using guessed type int dword_301A0D4C;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30008D10) --------------------------------------------------------
int sub_30008D10()
{
  char *v0; // edi
  int v1; // ecx
  long double v2; // st4
  long double v3; // st5
  long double v4; // st6
  int result; // eax
  float v6; // [esp+8h] [ebp-24h]
  float v7; // [esp+Ch] [ebp-20h]
  float v8; // [esp+10h] [ebp-1Ch]
  float v9; // [esp+10h] [ebp-1Ch]
  float v10[5]; // [esp+14h] [ebp-18h] BYREF
  float v11; // [esp+28h] [ebp-4h]

  v0 = (char *)dword_301A0ED0;
  *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 204) = dword_301A112C;
  *(_DWORD *)(*(_DWORD *)v0 + 836) = dword_301A112C;
  v1 = *(_DWORD *)v0;
  v2 = sqrt(
         *(float *)(*(_DWORD *)v0 + 32) * *(float *)(*(_DWORD *)v0 + 32)
       + *(float *)(*(_DWORD *)v0 + 36) * *(float *)(*(_DWORD *)v0 + 36)
       + *(float *)(*(_DWORD *)v0 + 40) * *(float *)(*(_DWORD *)v0 + 40));
  if ( v2 >= 1.0 )
  {
    if ( v2 >= 100.0 )
      v3 = v2;
    else
      v3 = 100.0;
    v4 = v2 - 5.5 * 1.5 * (flt_301A0D44 * v3);
    if ( v4 < 0.0 )
      v4 = 0.0;
    *(float *)(v1 + 32) = v4 / v2 * *(float *)(v1 + 32);
    *(float *)(*(_DWORD *)v0 + 36) = v4 / v2 * *(float *)(*(_DWORD *)v0 + 36);
    *(float *)(*(_DWORD *)v0 + 40) = v4 / v2 * *(float *)(*(_DWORD *)v0 + 40);
  }
  else
  {
    *(_DWORD *)(v1 + 32) = 0;
    *(_DWORD *)(*(_DWORD *)v0 + 36) = 0;
    *(_DWORD *)(*(_DWORD *)v0 + 40) = 0;
  }
  v8 = sub_30007D70(v0 + 4);
  v7 = (float)v0[24];
  v6 = (float)v0[25];
  v11 = (double)v0[26] + flt_301A0D34 * v6 + flt_301A0D28 * v7;
  v10[2] = v11;
  v10[0] = flt_301A0D2C * v6 + *(float *)&dword_301A0D20 * v7;
  v10[1] = flt_301A0D30 * v6 + *(float *)&dword_301A0D24 * v7;
  v9 = sub_3003B3D0(v10) * v8;
  sub_30007CB0(v10, v9, 9.0);
  *(float *)(*(_DWORD *)v0 + 20) = flt_301A0D44 * *(float *)(*(_DWORD *)v0 + 32) + *(float *)(*(_DWORD *)v0 + 20);
  result = *(_DWORD *)v0;
  *(float *)(*(_DWORD *)v0 + 24) = flt_301A0D44 * *(float *)(*(_DWORD *)v0 + 36) + *(float *)(*(_DWORD *)v0 + 24);
  *(float *)(*(_DWORD *)v0 + 28) = flt_301A0D44 * *(float *)(*(_DWORD *)v0 + 40) + *(float *)(*(_DWORD *)v0 + 28);
  return result;
}
// 300628EC: using guessed type float flt_300628EC;
// 301A0D20: using guessed type int dword_301A0D20;
// 301A0D24: using guessed type int dword_301A0D24;
// 301A0D28: using guessed type float flt_301A0D28;
// 301A0D2C: using guessed type float flt_301A0D2C;
// 301A0D30: using guessed type float flt_301A0D30;
// 301A0D34: using guessed type float flt_301A0D34;
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0ED0: using guessed type int dword_301A0ED0;
// 301A112C: using guessed type int dword_301A112C;

//----- (30008EF0) --------------------------------------------------------
int sub_30008EF0()
{
  char *v0; // edi
  char v1; // cl
  char v2; // al
  int v3; // ecx
  int result; // eax
  float v5; // [esp+8h] [ebp-28h]
  float v6; // [esp+8h] [ebp-28h]
  float v7; // [esp+8h] [ebp-28h]
  float v8; // [esp+8h] [ebp-28h]
  float v9; // [esp+Ch] [ebp-24h]
  float v10; // [esp+Ch] [ebp-24h]
  float v11; // [esp+Ch] [ebp-24h]
  float v12; // [esp+Ch] [ebp-24h]
  float v13; // [esp+10h] [ebp-20h]
  float v14; // [esp+10h] [ebp-20h]
  float v15; // [esp+10h] [ebp-20h]
  float v16; // [esp+10h] [ebp-20h]
  float v17; // [esp+10h] [ebp-20h]
  float v18; // [esp+10h] [ebp-20h]
  float v19; // [esp+14h] [ebp-1Ch]
  float v20; // [esp+18h] [ebp-18h]
  float v21; // [esp+1Ch] [ebp-14h]
  float v22; // [esp+20h] [ebp-10h]
  float v23; // [esp+20h] [ebp-10h]
  float v24; // [esp+24h] [ebp-Ch] BYREF
  float v25; // [esp+28h] [ebp-8h]
  float v26; // [esp+2Ch] [ebp-4h]

  v0 = (char *)dword_301A0ED0;
  *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 204) = dword_301A112C;
  *(_DWORD *)(*(_DWORD *)v0 + 836) = dword_301A112C;
  v1 = -127 * (v0[9] & 0x20) + v0[26];
  v0[26] = v1;
  v2 = v1 + 127 * (v0[9] & 0x10);
  v0[26] = v2;
  if ( v0[24] || v0[25] )
  {
    v15 = sqrt(
            *(float *)(*(_DWORD *)v0 + 32) * *(float *)(*(_DWORD *)v0 + 32)
          + *(float *)(*(_DWORD *)v0 + 36) * *(float *)(*(_DWORD *)v0 + 36)
          + *(float *)(*(_DWORD *)v0 + 40) * *(float *)(*(_DWORD *)v0 + 40));
    v9 = v15;
    if ( v15 >= 1.0 )
      goto LABEL_5;
LABEL_8:
    *(_DWORD *)(*(_DWORD *)v0 + 32) = 0;
    *(_DWORD *)(*(_DWORD *)v0 + 36) = 0;
    *(_DWORD *)(*(_DWORD *)v0 + 40) = 0;
    goto LABEL_13;
  }
  v13 = (float)v2;
  if ( v13 == 0.0 )
    goto LABEL_8;
  *(_DWORD *)(*(_DWORD *)v0 + 36) = 0;
  *(_DWORD *)(*(_DWORD *)v0 + 32) = 0;
  v9 = 127.0;
  *(float *)(*(_DWORD *)v0 + 40) = (float)v0[26];
LABEL_5:
  if ( v9 >= 100.0 )
    v14 = v9;
  else
    v14 = 100.0;
  v5 = 5.5 * 1.5;
  v16 = flt_301A0D44 * v14 * v5;
  v6 = v9 - v16;
  if ( v6 < 0.0 )
    v6 = 0.0;
  v7 = v6 / v9;
  *(float *)(*(_DWORD *)v0 + 32) = v7 * *(float *)(*(_DWORD *)v0 + 32);
  *(float *)(*(_DWORD *)v0 + 36) = v7 * *(float *)(*(_DWORD *)v0 + 36);
  *(float *)(*(_DWORD *)v0 + 40) = v7 * *(float *)(*(_DWORD *)v0 + 40);
LABEL_13:
  v19 = sub_30007D70(v0 + 4);
  v3 = v0[26];
  v8 = (float)v0[24];
  v10 = (float)v0[25];
  v17 = flt_301A0D34 * 0.0;
  v24 = v17 - flt_301A0D30;
  v25 = flt_301A0D2C - v17;
  v26 = flt_301A0D30 * 0.0 - flt_301A0D2C * 0.0;
  v20 = flt_301A0D2C * v10 + v24 * v8;
  v24 = v20;
  v21 = flt_301A0D30 * v10 + v25 * v8;
  v25 = v21;
  v22 = flt_301A0D34 * v10 + v26 * v8;
  v18 = (float)v3;
  v23 = v18 + v18 + v22;
  v26 = v23;
  v11 = sub_3003B3D0(&v24);
  v12 = v11 * v19;
  sub_30007CB0(&v24, v12, 9.0);
  *(float *)(*(_DWORD *)v0 + 20) = flt_301A0D44 * *(float *)(*(_DWORD *)v0 + 32) + *(float *)(*(_DWORD *)v0 + 20);
  result = *(_DWORD *)v0;
  *(float *)(*(_DWORD *)v0 + 24) = flt_301A0D44 * *(float *)(*(_DWORD *)v0 + 36) + *(float *)(*(_DWORD *)v0 + 24);
  *(float *)(*(_DWORD *)v0 + 28) = flt_301A0D44 * *(float *)(*(_DWORD *)v0 + 40) + *(float *)(*(_DWORD *)v0 + 28);
  return result;
}
// 300628EC: using guessed type float flt_300628EC;
// 301A0D2C: using guessed type float flt_301A0D2C;
// 301A0D30: using guessed type float flt_301A0D30;
// 301A0D34: using guessed type float flt_301A0D34;
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0ED0: using guessed type int dword_301A0ED0;
// 301A112C: using guessed type int dword_301A112C;

//----- (30009220) --------------------------------------------------------
int __cdecl sub_30009220(char a1)
{
  int v1; // eax
  int v2; // ecx
  int result; // eax

  if ( (dword_301A0D74 & 0x2000) != 0 )
    return 0;
  v1 = (dword_301A0D74 >> 20) & 0x1F;
  v2 = v1;
  if ( !v1 )
    return 0;
  if ( (a1 & 1) != 0 )
    return v1 + 47;
  if ( a1 < 0 || (result = v1 + 1, *(float *)(*(_DWORD *)dword_301A0ED0 + 64) != 0.0) )
    result = v2 + 24;
  return result;
}
// 301A0D74: using guessed type int dword_301A0D74;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30009270) --------------------------------------------------------
int sub_30009270()
{
  int v0; // eax
  int result; // eax

  if ( (dword_301A0D74 & 0x2000) == 0 && (v0 = (dword_301A0D74 >> 20) & 0x1F) != 0 )
    result = v0 + 24;
  else
    result = 0;
  return result;
}
// 301A0D74: using guessed type int dword_301A0D74;

//----- (30009290) --------------------------------------------------------
int sub_30009290()
{
  int v0; // eax
  int result; // eax

  if ( (dword_301A0D74 & 0x2000) == 0 && (v0 = (dword_301A0D74 >> 20) & 0x1F) != 0 )
    result = v0 + 1;
  else
    result = 0;
  return result;
}
// 301A0D74: using guessed type int dword_301A0D74;

//----- (300092B0) --------------------------------------------------------
int sub_300092B0()
{
  int result; // eax

  if ( (dword_301A0D74 & 0x2000) != 0 )
    result = 93;
  else
    result = ((dword_301A0D74 >> 20) & 0x1F) + 93;
  return result;
}
// 301A0D74: using guessed type int dword_301A0D74;

//----- (300092F0) --------------------------------------------------------
void sub_300092F0()
{
  int *v0; // esi
  double v1; // st7
  double v2; // st6
  double v3; // st6
  long double v4; // st4
  long double v5; // st7
  int v6; // ebp
  unsigned __int64 v7; // rax
  int v8; // ecx
  _DWORD *v9; // ebx
  int *v10; // eax
  int *v11; // edi
  int v12; // eax
  int v13; // edi
  int v14; // eax
  double v15; // st7
  int v16; // eax
  int v17; // eax
  int v18; // eax
  unsigned __int8 v19; // [esp+Ch] [ebp-18h]
  float v20; // [esp+1Ch] [ebp-8h]
  float v21; // [esp+20h] [ebp-4h]
  int v22; // [esp+20h] [ebp-4h]
  float v23; // [esp+20h] [ebp-4h]

  v0 = (int *)dword_301A0ED0;
  if ( *(_BYTE *)(dword_301A0ED0 + 217) == 3 )
    return;
  v1 = *(float *)&dword_301A0DA0;
  v2 = (double)*(int *)(*(_DWORD *)dword_301A0ED0 + 60);
  v21 = v2;
  v3 = -v2;
  v4 = v1 * v1 - (*(float *)&dword_301A0D94 - *(float *)(*(_DWORD *)dword_301A0ED0 + 28)) * (0.5 * v3) * 4.0;
  if ( v4 < 0.0 )
    return;
  v5 = (v1 + (-v1 - sqrt(v4)) / (0.5 * v3 + 0.5 * v3) * v3) * -1.0;
  v20 = v5 * v5 / (v21 + v21);
  if ( *(_DWORD *)(dword_301A0ED0 + 56) )
  {
    Com_Printf("landing vel: %.1f fall height: %.1f\n", (double)v5, v20);
    v0 = (int *)dword_301A0ED0;
  }
  if ( flt_301A0C08 <= (double)flt_301A1248
    || flt_301A1248 < 0.0
    || v20 <= (double)flt_301A1248
    || (dword_301A0D74 & 1) != 0
    || *(int *)(*v0 + 4) >= 6 )
  {
    goto LABEL_15;
  }
  if ( v20 >= (double)flt_301A0C08 )
  {
    v6 = 100;
LABEL_16:
    v22 = v6;
    goto LABEL_17;
  }
  v7 = (unsigned __int64)((v20 - flt_301A1248) / (flt_301A0C08 - flt_301A1248) * 100.0);
  v6 = v7;
  v22 = v7;
  if ( (v7 & 0x80000000) != 0i64 )
  {
LABEL_15:
    v6 = 0;
    goto LABEL_16;
  }
  if ( (int)v7 > 100 )
  {
    v6 = 100;
    goto LABEL_16;
  }
LABEL_17:
  if ( *((_BYTE *)v0 + 217) == 2 )
    v6 = (unsigned __int64)((double)v22 * 0.5);
  if ( v20 > 12.0 )
  {
    v8 = (unsigned __int64)(((v20 - 12.0) * 0.03846154 + 1.0) * 4.0);
    if ( v8 > 24 )
      LOBYTE(v8) = 24;
  }
  else
  {
    LOBYTE(v8) = 0;
  }
  if ( v6 )
  {
    v9 = (_DWORD *)*v0;
    if ( !*(_DWORD *)(*v0 + 108) && (int)v9[1] < 6 )
    {
      if ( *((_DWORD *)Destination + 33062) )
      {
        v10 = sub_30002F60((_DWORD *)Destination + 33062, v9[43]);
        v11 = v10;
        if ( v10 )
        {
          if ( v10[28] )
          {
            v12 = rand();
            sub_300030C0((__int16 *)&v11[4 * (v12 % v11[28]) + 29], v9, 1, 0, 1);
            v0 = (int *)dword_301A0ED0;
          }
        }
      }
    }
    if ( v0[14] )
    {
      Com_Printf("falling damage: %i\n", v6);
      v0 = (int *)dword_301A0ED0;
    }
    if ( v6 >= 100 || (dword_301A0D74 & 2) != 0 )
    {
      *(float *)(*v0 + 32) = *(float *)(*v0 + 32) * 0.67000002;
      *(float *)(*v0 + 36) = *(float *)(*v0 + 36) * 0.67000002;
      v14 = *v0;
      v15 = *(float *)(*v0 + 40) * 0.67000002;
    }
    else
    {
      v13 = 35 * v6 + 500;
      if ( v13 <= 2000 )
      {
        if ( v13 > 500 )
        {
          if ( v13 < 1500 )
            v23 = 0.5 - ((double)(35 * v6 + 500) - 500.0) * 0.001 * 0.30000001;
          else
            v23 = 0.2;
        }
        else
        {
          v23 = 0.5;
        }
      }
      else
      {
        v13 = 2000;
        v23 = 0.2;
      }
      if ( v0[14] > 1 )
      {
        Com_Printf("landing stun time: %i speed mult: %.2f\n", v13, v23);
        v0 = (int *)dword_301A0ED0;
      }
      *(_DWORD *)(*v0 + 16) = v13;
      *(_DWORD *)(*v0 + 12) |= 0x100u;
      *(float *)(*v0 + 32) = v23 * *(float *)(*v0 + 32);
      *(float *)(*v0 + 36) = v23 * *(float *)(*v0 + 36);
      v14 = *v0;
      v15 = v23 * *(float *)(*v0 + 40);
    }
    *(float *)(v14 + 40) = v15;
    if ( (dword_301A0D74 & 0x2000) != 0 )
      sub_30005F90(*v0, 116, v6);
    else
      sub_30005F90(*v0, ((dword_301A0D74 >> 20) & 0x1F) + 116, v6);
  }
  else if ( v20 > 4.0 )
  {
    if ( v20 >= 8.0 )
    {
      if ( v20 >= 12.0 )
      {
        v19 = v8;
        *(float *)(*v0 + 32) = *(float *)(*v0 + 32) * 0.67000002;
        *(float *)(*v0 + 36) = *(float *)(*v0 + 36) * 0.67000002;
        *(float *)(*v0 + 40) = *(float *)(*v0 + 40) * 0.67000002;
        v18 = sub_300092B0();
        sub_30005F90(*v0, v18, v19);
      }
      else
      {
        v17 = sub_30009290();
        sub_300079E0(v17);
      }
    }
    else
    {
      v16 = sub_30009270();
      sub_300079E0(v16);
    }
  }
}
// 301A0C08: using guessed type float flt_301A0C08;
// 301A0D74: using guessed type int dword_301A0D74;
// 301A0D94: using guessed type int dword_301A0D94;
// 301A0DA0: using guessed type int dword_301A0DA0;
// 301A0ED0: using guessed type int dword_301A0ED0;
// 301A1248: using guessed type float flt_301A1248;

//----- (30009720) --------------------------------------------------------
int __usercall sub_30009720@<eax>(int a1@<eax>)
{
  unsigned int v2; // esi
  int v3; // eax
  int *v5; // eax
  int v6; // eax
  float v7; // [esp+8h] [ebp-Ch] BYREF
  float v8; // [esp+Ch] [ebp-8h]
  float v9; // [esp+10h] [ebp-4h]

  v2 = 0;
  while ( 1 )
  {
    v7 = flt_300630E0[v2] + *(float *)(*(_DWORD *)dword_301A0ED0 + 20);
    v8 = flt_300630E4[v2] + *(float *)(*(_DWORD *)dword_301A0ED0 + 24);
    v9 = flt_300630E8[v2] + *(float *)(*(_DWORD *)dword_301A0ED0 + 28);
    sub_30007950(
      *(_DWORD *)(dword_301A0ED0 + 52),
      a1,
      (int)&v7,
      dword_301A0ED0 + 192,
      dword_301A0ED0 + 204,
      (int)&v7,
      *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 172));
    if ( !*(_BYTE *)(a1 + 47) )
      break;
    v2 += 3;
    if ( v2 >= 78 )
    {
      v3 = dword_301A0ED0;
      *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 84) = 1023;
      dword_301A0D50 = 0;
      dword_301A0D54 = 0;
      dword_301A0D4C = 0;
      *(_DWORD *)(*(_DWORD *)v3 + 12) &= 0xFFFFDFFF;
      *(_DWORD *)(*(_DWORD *)v3 + 104) = 0;
      return 0;
    }
  }
  v5 = (int *)dword_301A0ED0;
  *(float *)(*(_DWORD *)dword_301A0ED0 + 20) = v7;
  *(float *)(*v5 + 24) = v8;
  *(float *)(*v5 + 28) = v9;
  v7 = *(float *)(*v5 + 20);
  v8 = *(float *)(*v5 + 24);
  v9 = *(float *)(*v5 + 28) - 1.0;
  sub_30007950(v5[13], a1, *v5 + 20, (int)(v5 + 48), (int)(v5 + 51), (int)&v7, *(_DWORD *)(*v5 + 172));
  v6 = dword_301A0ED0;
  qmemcpy(&unk_301A0D58, (const void *)a1, 0x30u);
  *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 20) = *(_DWORD *)(a1 + 4);
  *(_DWORD *)(*(_DWORD *)v6 + 24) = *(_DWORD *)(a1 + 8);
  *(_DWORD *)(*(_DWORD *)v6 + 28) = *(_DWORD *)(a1 + 12);
  return 1;
}
// 300630E0: using guessed type float flt_300630E0[];
// 300630E4: using guessed type float flt_300630E4[];
// 300630E8: using guessed type float flt_300630E8[];
// 301A0D4C: using guessed type int dword_301A0D4C;
// 301A0D50: using guessed type int dword_301A0D50;
// 301A0D54: using guessed type int dword_301A0D54;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30009A50) --------------------------------------------------------
void __usercall sub_30009A50(int a1@<edi>, int a2@<esi>)
{
  int v2; // eax
  int v3; // ecx
  int v4; // edx
  bool v5; // sf
  _DWORD *v6; // edi
  int v7; // eax
  char *v8; // eax
  int *v9; // eax
  int *v10; // esi
  int v11; // eax
  int v12; // ecx
  double v13; // st7
  char *v14; // esi
  float *v15; // ecx
  _DWORD *v16; // ebp
  int v17; // eax
  char *v18; // eax
  int *v19; // eax
  int *v20; // edi
  int v21; // eax
  float v22; // [esp-4h] [ebp-4Ch]
  int v23; // [esp+0h] [ebp-48h] BYREF
  int v24; // [esp+4h] [ebp-44h]
  float v25; // [esp+8h] [ebp-40h]
  int v26; // [esp+Ch] [ebp-3Ch] BYREF
  int v27; // [esp+10h] [ebp-38h]
  float v28; // [esp+14h] [ebp-34h]
  float v29[12]; // [esp+18h] [ebp-30h] BYREF

  v23 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 20);
  v24 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 24);
  v26 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 20);
  v27 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 24);
  v12 = *(_DWORD *)dword_301A0ED0;
  if ( (*(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 128) & 0xC000) != 0 )
  {
    v25 = *(float *)(v12 + 28);
    v13 = *(float *)(*(_DWORD *)dword_301A0ED0 + 28) - 1.0;
  }
  else
  {
    v25 = *(float *)(v12 + 28) + 0.25;
    v13 = *(float *)(*(_DWORD *)dword_301A0ED0 + 28) - 0.25;
  }
  v28 = v13;
  sub_30007950(
    *(_DWORD *)(dword_301A0ED0 + 52),
    (int)v29,
    (int)&v23,
    dword_301A0ED0 + 192,
    dword_301A0ED0 + 204,
    (int)&v26,
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 172));
  qmemcpy(&unk_301A0D58, v29, 0x30u);
  if ( BYTE2(v29[11]) && !sub_30009720((int)v29) )
    return;
  if ( HIBYTE(v29[11]) )
  {
    v25 = *(float *)(*(_DWORD *)dword_301A0ED0 + 28) - 0.001;
    sub_30007950(
      *(_DWORD *)(dword_301A0ED0 + 52),
      (int)v29,
      (int)&v23,
      dword_301A0ED0 + 192,
      dword_301A0ED0 + 204,
      (int)&v26,
      *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 172));
    if ( HIBYTE(v29[11]) )
    {
      *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 84) = 1023;
      dword_301A0D50 = 0;
      dword_301A0D54 = 0;
      dword_301A0D4C = 0;
      return;
    }
    qmemcpy(&unk_301A0D58, v29, 0x30u);
  }
  if ( v29[0] == 1.0 )
  {
    v2 = dword_301A0ED0;
    v3 = *(_DWORD *)dword_301A0ED0;
    v4 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 84);
    v25 = v22;
    if ( v4 == 1023 )
    {
      v26 = *(_DWORD *)(v3 + 20);
      v27 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 24);
      v28 = *(float *)(*(_DWORD *)dword_301A0ED0 + 28) - 1.0;
      (*(void (__cdecl **)(float *, int, int, int, int *, _DWORD, _DWORD))(dword_301A0ED0 + 236))(
        v29,
        *(_DWORD *)dword_301A0ED0 + 20,
        dword_301A0ED0 + 192,
        dword_301A0ED0 + 204,
        &v26,
        *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 172),
        *(_DWORD *)(dword_301A0ED0 + 52));
      if ( v29[0] != 1.0 )
      {
        dword_301A0D54 = 1;
        goto LABEL_50;
      }
      goto LABEL_49;
    }
    if ( *(_DWORD *)(dword_301A0ED0 + 56) )
    {
      Com_Printf("%i:lift\n", *(_DWORD *)dword_300F0FB8);
      v2 = dword_301A0ED0;
    }
    v26 = *(_DWORD *)(*(_DWORD *)v2 + 20);
    v27 = *(_DWORD *)(*(_DWORD *)v2 + 24);
    v28 = *(float *)(*(_DWORD *)v2 + 28) - 64.0;
    (*(void (__cdecl **)(float *, int, int, int, int *, _DWORD, _DWORD))(v2 + 236))(
      v29,
      *(_DWORD *)v2 + 20,
      v2 + 192,
      v2 + 204,
      &v26,
      *(_DWORD *)(*(_DWORD *)v2 + 172),
      *(_DWORD *)(v2 + 52));
    if ( v29[0] == 1.0 )
    {
      v5 = *(char *)(dword_301A0ED0 + 24) < 0;
      v24 = a2;
      v23 = a1;
      v6 = *(_DWORD **)dword_301A0ED0;
      v7 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 4);
      if ( v5 )
      {
        if ( v7 < 6 )
        {
          v8 = Destination + 131732;
          goto LABEL_45;
        }
      }
      else if ( v7 < 6 )
      {
        v8 = Destination + 131216;
LABEL_45:
        if ( *(_DWORD *)v8 )
        {
          v9 = sub_30002F60(v8, v6[43]);
          v10 = v9;
          if ( v9 )
          {
            if ( v9[28] )
            {
              v11 = rand();
              sub_300030C0((__int16 *)&v10[4 * (v11 % v10[28]) + 29], v6, 1, 0, 1);
            }
          }
        }
        goto LABEL_49;
      }
    }
    else if ( v29[0] < 0.015625 )
    {
      dword_301A0D54 = 1;
      goto LABEL_50;
    }
LABEL_49:
    dword_301A0D54 = 0;
LABEL_50:
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 84) = 1023;
    dword_301A0D50 = 0;
    dword_301A0D4C = 0;
    return;
  }
  v14 = (char *)dword_301A0ED0;
  v15 = *(float **)dword_301A0ED0;
  if ( (*(_BYTE *)(*(_DWORD *)dword_301A0ED0 + 12) & 0x10) == 0
    && v15[10] > 0.0
    && v29[5] * v15[9] + v29[4] * v15[8] + v29[6] * v15[10] > 10.0 )
  {
    if ( *(_DWORD *)(dword_301A0ED0 + 56) )
    {
      Com_Printf("%i:kickoff\n", *(_DWORD *)dword_300F0FB8);
      v14 = (char *)dword_301A0ED0;
    }
    v16 = *(_DWORD **)v14;
    v17 = *(_DWORD *)(*(_DWORD *)v14 + 4);
    if ( v14[24] < 0 )
    {
      if ( v17 < 6 )
      {
        v18 = Destination + 131732;
        goto LABEL_21;
      }
    }
    else if ( v17 < 6 )
    {
      v18 = Destination + 131216;
LABEL_21:
      if ( *(_DWORD *)v18 )
      {
        v19 = sub_30002F60(v18, v16[43]);
        v20 = v19;
        if ( v19 )
        {
          if ( v19[28] )
          {
            v21 = rand();
            sub_300030C0((__int16 *)&v20[4 * (v21 % v20[28]) + 29], v16, 1, 0, 0);
            v14 = (char *)dword_301A0ED0;
          }
        }
      }
      goto LABEL_25;
    }
LABEL_25:
    dword_301A0D54 = 0;
    *(_DWORD *)(*(_DWORD *)v14 + 84) = 1023;
    dword_301A0D50 = 0;
    dword_301A0D4C = 0;
    return;
  }
  if ( v29[6] >= 0.69999999 )
  {
    dword_301A0D50 = 1;
    dword_301A0D54 = 1;
    dword_301A0D4C = 1;
    if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 84) == 1023 )
    {
      if ( *(_DWORD *)(dword_301A0ED0 + 56) )
        Com_Printf("%i:Land\n", *(_DWORD *)dword_300F0FB8);
      sub_300092F0();
      v14 = (char *)dword_301A0ED0;
    }
    *(_DWORD *)(*(_DWORD *)v14 + 84) = LOWORD(v29[10]);
    sub_30007A20(LOWORD(v29[10]));
  }
  else
  {
    if ( *(_DWORD *)(dword_301A0ED0 + 56) )
    {
      Com_Printf("%i:steep\n", *(_DWORD *)dword_300F0FB8);
      v14 = (char *)dword_301A0ED0;
    }
    *(_DWORD *)(*(_DWORD *)v14 + 84) = 1023;
    dword_301A0D4C = 0;
    dword_301A0D50 = 1;
    dword_301A0D54 = 1;
    *(_DWORD *)(*(_DWORD *)v14 + 12) &= 0xFFFFDFFF;
    *(_DWORD *)(*(_DWORD *)v14 + 104) = 0;
  }
}
// 30009A50: could not find valid save-restore pair for edi
// 3000988D: variable 'v22' is possibly undefined
// 301A0D4C: using guessed type int dword_301A0D4C;
// 301A0D50: using guessed type int dword_301A0D50;
// 301A0D54: using guessed type int dword_301A0D54;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30009D80) --------------------------------------------------------
int sub_30009D80()
{
  int v0; // eax
  int result; // eax
  _BYTE *v2; // esi
  float **v3; // eax
  int v4; // [esp+8h] [ebp-10h]
  int v5[2]; // [esp+Ch] [ebp-Ch] BYREF
  float v6; // [esp+14h] [ebp-4h]

  v0 = dword_301A0ED0;
  *(_BYTE *)(dword_301A0ED0 + 217) = 0;
  *(_BYTE *)(v0 + 216) = 0;
  v5[0] = *(_DWORD *)(*(_DWORD *)v0 + 20);
  v5[1] = *(_DWORD *)(*(_DWORD *)v0 + 24);
  v6 = *(float *)(*(_DWORD *)v0 + 812) + *(float *)(*(_DWORD *)v0 + 28) + 1.0;
  result = (*(int (__cdecl **)(int *, _DWORD, int))(v0 + 248))(v5, *(_DWORD *)(*(_DWORD *)v0 + 172), 32);
  if ( result )
  {
    v2 = (_BYTE *)dword_301A0ED0;
    v4 = (unsigned __int64)(*(float *)(*(_DWORD *)dword_301A0ED0 + 208) - *(float *)(*(_DWORD *)dword_301A0ED0 + 812));
    *(_BYTE *)(dword_301A0ED0 + 216) = result;
    v2[217] = 1;
    v6 = (double)(v4 / 2) + *(float *)(*(_DWORD *)v2 + 812) + *(float *)(*(_DWORD *)v2 + 28);
    result = (*((int (__cdecl **)(int *, _DWORD, int))v2 + 62))(v5, *(_DWORD *)(*(_DWORD *)v2 + 172), 32);
    if ( result )
    {
      v3 = (float **)dword_301A0ED0;
      *(_BYTE *)(dword_301A0ED0 + 217) = 2;
      v6 = (*v3)[203] + (*v3)[7] + (double)v4;
      result = ((int (__cdecl *)(int *, _DWORD, int))v3[62])(v5, *((_DWORD *)*v3 + 43), 32);
      if ( result )
      {
        result = dword_301A0ED0;
        *(_BYTE *)(dword_301A0ED0 + 217) = 3;
      }
    }
  }
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30009EA0) --------------------------------------------------------
int __usercall sub_30009EA0@<eax>(int a1@<eax>, int a2@<ecx>, int a3)
{
  if ( a1 == *(_DWORD *)(a2 + 828) )
    return 400;
  if ( a1 == *(_DWORD *)(a2 + 832) )
    return a3 != 0 ? 200 : 400;
  return 200;
}

//----- (30009ED0) --------------------------------------------------------
double __usercall sub_30009ED0@<st0>(int a1@<eax>, float *a2@<ebx>, int a3@<edi>)
{
  int v4; // ecx
  int v5; // eax
  int v6; // edx
  double result; // st7
  int v8; // ecx
  double v9; // st7

  if ( a1 )
  {
    v4 = *(_DWORD *)(a3 + 12);
    v5 = a3 + 12;
    v6 = 1;
    while ( 1 )
    {
      if ( v4 == a1 )
      {
        *a2 = (float)*(int *)(v5 + 8);
        return *(float *)(v5 + 4);
      }
      if ( v4 > a1 )
        break;
      v4 = *(_DWORD *)(v5 + 12);
      v5 += 12;
      ++v6;
      if ( v4 == -1 )
        goto LABEL_6;
    }
    v8 = a3 + 12 * v6 - 12;
    v9 = (double)(a1 - *(_DWORD *)v8) / (double)(*(_DWORD *)v5 - *(_DWORD *)v8);
    *a2 = (double)(*(_DWORD *)(v5 + 8) - *(_DWORD *)(v8 + 8)) * v9 + (double)*(int *)(v8 + 8);
    result = v9 * (*(float *)(v5 + 4) - *(float *)(v8 + 4)) + *(float *)(v8 + 4);
  }
  else
  {
LABEL_6:
    *a2 = (float)*(int *)(a3 + 8);
    result = *(float *)(a3 + 4);
  }
  return result;
}

//----- (30009F60) --------------------------------------------------------
double __usercall sub_30009F60@<st0>(int a1@<eax>, int a2@<ecx>)
{
  _DWORD *v3; // eax
  int v4; // edx
  double result; // st7
  int v6; // ecx
  int v7; // [esp+8h] [ebp-8h]

  v3 = *(_DWORD **)dword_301A0ED0;
  v4 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 212);
  if ( !v4 )
    return 0.0;
  if ( a1 != -1
    && a2 != -1
    && (a2 != v3[54] || a2 == v3[208] && (a1 != v3[207] || v3[55]) && (a1 != v3[209] || !v3[55])) )
  {
    return 0.0;
  }
  v6 = v3[54];
  if ( v6 == v3[207] )
  {
    v7 = 400;
  }
  else if ( v6 == v3[208] )
  {
    v7 = v3[55] != 0 ? 200 : 400;
  }
  else
  {
    v7 = 200;
  }
  result = (double)(*(_DWORD *)(dword_301A0ED0 + 4) - v4) / (double)v7;
  if ( result < 0.0 )
    return 0.0;
  if ( result > 1.0 )
    result = 1.0;
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000A060) --------------------------------------------------------
void sub_3000A060()
{
  int *v0; // ebp
  float *v1; // ecx
  int v2; // edx
  bool v3; // zf
  int v4; // ecx
  double v6; // st7
  unsigned __int8 v7; // c0
  unsigned __int8 v8; // c3
  int v9; // ebp
  double v10; // st7
  int v11; // ebp
  double v12; // st7
  int v13; // ebx
  int v14; // eax
  int v15; // ecx
  int v16; // edx
  int v17; // eax
  void *v18; // edi
  int v19; // edi
  int v20; // ecx
  double v21; // st7
  int v22; // edx
  int v23; // ecx
  int v24; // edx
  int v25; // edi
  int v26; // eax
  int v27; // edi
  _DWORD *v28; // eax
  int v29; // esi
  int v30; // ecx
  int v31; // edx
  int v32; // edi
  int v33; // eax
  int v34; // ecx
  void *v35; // edi
  int v36; // eax
  int v37; // ecx
  int v38; // eax
  int v39; // ebp
  int v40; // ecx
  float v41; // [esp+10h] [ebp-24h] BYREF
  int v42; // [esp+14h] [ebp-20h]
  float v43; // [esp+18h] [ebp-1Ch]
  float v44; // [esp+1Ch] [ebp-18h] BYREF
  float v45; // [esp+20h] [ebp-14h]
  float v46; // [esp+24h] [ebp-10h]
  int v47; // [esp+28h] [ebp-Ch]
  int v48; // [esp+2Ch] [ebp-8h]
  int v49; // [esp+30h] [ebp-4h]

  v0 = (int *)dword_301A0ED0;
  v1 = *(float **)dword_301A0ED0;
  v42 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 204);
  v2 = v42;
  if ( !v42 || v1[52] == 0.0 )
  {
    if ( *((_DWORD *)v1 + 1) == 4 )
      v1[52] = 0.0;
    else
      v1[52] = (float)v42;
    return;
  }
  if ( (double)v42 == v1[52] && !*((_DWORD *)v1 + 53) )
    return;
  v3 = v42 == *((_DWORD *)v1 + 207);
  v42 = 0;
  if ( !v3 && v2 != *((_DWORD *)v1 + 208) && v2 != *((_DWORD *)v1 + 209) )
  {
    v1[53] = 0.0;
    v4 = *v0;
    v6 = flt_301A0D44 * 180.0;
    if ( v7 | v8 )
    {
      *(float *)(v4 + 208) = *(float *)(v4 + 208) - v6;
      v11 = *v0;
      v12 = (double)*(int *)(v11 + 204);
      if ( v12 >= *(float *)(v11 + 208) )
        *(float *)(v11 + 208) = v12;
    }
    else
    {
      *(float *)(v4 + 208) = v6 + *(float *)(v4 + 208);
      v9 = *v0;
      v10 = (double)*(int *)(v9 + 204);
      if ( v10 <= *(float *)(v9 + 208) )
        *(float *)(v9 + 208) = v10;
    }
    return;
  }
  if ( *((_DWORD *)v1 + 53) )
  {
    v13 = *((_DWORD *)v1 + 55);
    v43 = v1[54];
    v14 = sub_30009EA0(SLODWORD(v43), (int)v1, v13);
    v17 = 100 * (v0[1] - v16) / v14;
    v42 = v17;
    if ( v17 < 0 )
    {
      v42 = 0;
      v17 = 0;
      goto LABEL_16;
    }
    if ( v17 <= 100 )
    {
      if ( v17 != 100 )
      {
LABEL_16:
        if ( LODWORD(v43) == *(_DWORD *)(v15 + 828) )
        {
          v18 = &unk_30078220;
        }
        else
        {
          if ( LODWORD(v43) == *(_DWORD *)(v15 + 832) )
          {
            if ( v13 )
              *(float *)(*v0 + 208) = sub_30009ED0(v17, &v41, (int)&unk_30078140);
            else
              *(float *)(*v0 + 208) = sub_30009ED0(v17, &v41, (int)&unk_300782C8);
LABEL_28:
            v19 = *v0;
            if ( fabs(*(float *)(*v0 + 224) - v41) > 0.05000000074505806 )
            {
              v20 = *(_DWORD *)(v19 + 36);
              v21 = v41 - *(float *)(v19 + 224);
              v22 = *(_DWORD *)(v19 + 40);
              v47 = *(_DWORD *)(v19 + 32);
              v3 = *(_DWORD *)(v19 + 84) == 1023;
              v48 = v20;
              v49 = v22;
              if ( v3 )
                v21 = v21 * 0.5;
              v44 = *(float *)&dword_301A0D20;
              v45 = *(float *)&dword_301A0D24;
              v46 = 0.0;
              v43 = v21 / flt_301A0D44;
              sub_3003B3D0(&v44);
              *(float *)(v19 + 32) = v44 * v43;
              *(float *)(*v0 + 36) = v45 * v43;
              *(float *)(*v0 + 40) = v46 * v43;
              sub_3000E240(1);
              v0 = (int *)dword_301A0ED0;
              *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 32) = v47;
              *(_DWORD *)(*v0 + 36) = v48;
              *(_DWORD *)(*v0 + 40) = v49;
              *(float *)(*v0 + 224) = v41;
            }
            goto LABEL_32;
          }
          v18 = &unk_300781B0;
        }
        *(float *)(*v0 + 208) = sub_30009ED0(v17, &v41, (int)v18);
        goto LABEL_28;
      }
    }
    else
    {
      v42 = 100;
    }
    *(float *)(v15 + 208) = (float)SLODWORD(v43);
    *(_DWORD *)(*v0 + 212) = 0;
    *(_DWORD *)(*v0 + 224) = 0;
  }
LABEL_32:
  v23 = *v0;
  if ( !*(_DWORD *)(*v0 + 212) )
  {
    if ( (double)*(int *)(v23 + 204) == *(float *)(v23 + 208) )
      return;
    *(_DWORD *)(v23 + 212) = v0[1];
    v37 = *v0;
    v38 = *(_DWORD *)(*v0 + 204);
    v3 = v38 == *(_DWORD *)(*v0 + 828);
    v42 = v38;
    if ( v3 )
    {
      *(_DWORD *)(v37 + 220) = 1;
      v39 = *v0;
      v40 = *(_DWORD *)(v39 + 832);
      v43 = *(float *)&v40;
      if ( (double)v40 >= *(float *)(v39 + 208) )
      {
        *(_DWORD *)(v39 + 216) = *(_DWORD *)(v39 + 828);
        return;
      }
    }
    else if ( v38 == *(_DWORD *)(v37 + 832) )
    {
      if ( (double)v42 < *(float *)(v37 + 208) )
      {
        *(_DWORD *)(v37 + 220) = 1;
        *(_DWORD *)(*v0 + 216) = *(_DWORD *)(*v0 + 832);
        return;
      }
      *(_DWORD *)(v37 + 220) = 0;
      v39 = *v0;
      v40 = *(_DWORD *)(v39 + 832);
    }
    else
    {
      if ( v38 != *(_DWORD *)(v37 + 836) )
        return;
      *(_DWORD *)(v37 + 220) = 0;
      v39 = *v0;
      v40 = *(_DWORD *)(v39 + 832);
      v43 = *(float *)&v40;
      if ( (double)v40 <= *(float *)(v39 + 208) )
      {
        *(_DWORD *)(v39 + 216) = *(_DWORD *)(v39 + 836);
        return;
      }
    }
    *(_DWORD *)(v39 + 216) = v40;
    return;
  }
  v24 = *(_DWORD *)(v23 + 204);
  v25 = *(_DWORD *)(v23 + 216);
  if ( v24 != v25
    && (v24 < v25 && (v26 = *(_DWORD *)(v23 + 220)) == 0 || v24 > v25 && (v26 = *(_DWORD *)(v23 + 220)) != 0) )
  {
    v27 = v42;
    *(_DWORD *)(v23 + 220) = v26 ^ 1;
    v28 = (_DWORD *)*v0;
    v29 = 100 - v27;
    v3 = *(_DWORD *)(*v0 + 220) == 0;
    v30 = *(_DWORD *)(*v0 + 216);
    v42 = 100 - v27;
    if ( v3 )
    {
      if ( v30 == v28[207] )
      {
        v28[54] = v28[208];
        goto LABEL_48;
      }
      if ( v30 == v28[208] )
      {
        v31 = v28[209];
        goto LABEL_47;
      }
    }
    else
    {
      if ( v30 == v28[209] )
      {
        v28[54] = v28[208];
        goto LABEL_48;
      }
      if ( v30 == v28[208] )
      {
        v31 = v28[207];
LABEL_47:
        v28[54] = v31;
        goto LABEL_48;
      }
    }
LABEL_48:
    if ( v29 == 100 )
    {
      *(float *)(*v0 + 208) = (float)*(int *)(*v0 + 216);
      *(_DWORD *)(*v0 + 212) = 0;
      *(_DWORD *)(*v0 + 224) = 0;
      return;
    }
    v32 = *v0;
    v43 = COERCE_FLOAT(sub_30009EA0(*(_DWORD *)(*v0 + 216), *v0, *(_DWORD *)(*v0 + 220)));
    *(_DWORD *)(v32 + 212) = v0[1] - (unsigned __int64)((double)SLODWORD(v43) * (double)v42 * 0.0099999998);
    v33 = *v0;
    v34 = *(_DWORD *)(*v0 + 216);
    if ( v34 == *(_DWORD *)(*v0 + 828) )
    {
      v35 = &unk_30078220;
    }
    else
    {
      if ( v34 == *(_DWORD *)(v33 + 832) )
      {
        v3 = *(_DWORD *)(v33 + 220) == 0;
        v36 = v29;
        if ( v3 )
          v35 = &unk_300782C8;
        else
          v35 = &unk_30078140;
        goto LABEL_58;
      }
      v35 = &unk_300781B0;
    }
    v36 = v29;
LABEL_58:
    sub_30009ED0(v36, &v41, (int)v35);
    *(float *)(*v0 + 224) = v41;
    return;
  }
}
// 3000A103: variable 'v7' is possibly undefined
// 3000A103: variable 'v8' is possibly undefined
// 3000A19B: variable 'v16' is possibly undefined
// 3000A1B6: variable 'v15' is possibly undefined
// 301A0D20: using guessed type int dword_301A0D20;
// 301A0D24: using guessed type int dword_301A0D24;
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000A600) --------------------------------------------------------
void sub_3000A600()
{
  _DWORD *v0; // eax
  int v1; // ecx
  char v2; // cl
  int v3; // ecx
  int v4; // edx
  _DWORD *v5; // ecx
  int v6; // esi
  int v7; // ecx
  char v8; // cl
  int v9; // ecx
  char v10; // cl
  int v11; // ecx
  bool v12; // zf
  int v13; // ecx
  int v14; // edx
  int v15; // esi
  bool v16; // sf
  int v17; // ecx
  int v18; // ecx
  int v19; // edx
  int v20; // edx
  int v21; // ecx
  int v22; // eax
  int v23; // ecx
  _DWORD *v24; // eax
  int v25; // ecx
  int v26; // edx
  int v27; // ecx
  unsigned int v28; // edx
  int v29; // eax
  double v30; // st7
  int v31; // esi
  int v32; // esi
  float v33; // [esp+0h] [ebp-64h]
  int v34; // [esp+10h] [ebp-54h]
  int v35; // [esp+18h] [ebp-4Ch]
  int v36; // [esp+1Ch] [ebp-48h] BYREF
  int v37; // [esp+20h] [ebp-44h]
  float v38; // [esp+24h] [ebp-40h]
  int v39[2]; // [esp+28h] [ebp-3Ch] BYREF
  float v40; // [esp+30h] [ebp-34h]
  float v41; // [esp+34h] [ebp-30h] BYREF
  int v42; // [esp+38h] [ebp-2Ch]
  int v43; // [esp+3Ch] [ebp-28h]
  float v44; // [esp+40h] [ebp-24h]
  int v45[7]; // [esp+44h] [ebp-20h] BYREF
  char v46; // [esp+62h] [ebp-2h]
  char v47; // [esp+63h] [ebp-1h]

  v0 = (_DWORD *)dword_301A0ED0;
  *(_DWORD *)(dword_301A0ED0 + 232) = 0;
  v1 = *v0;
  if ( *(_DWORD *)(*v0 + 4) == 4 )
  {
    v0[48] = -1056964608;
    v0[49] = -1056964608;
    v0[50] = -1056964608;
    v0[51] = 1090519040;
    v0[52] = 1090519040;
    v0[53] = 1098907648;
    *(_DWORD *)(*v0 + 12) &= 0xFFFFFFFC;
    v2 = *((_BYTE *)v0 + 9);
    if ( (v2 & 0x40) != 0 )
    {
      *((_BYTE *)v0 + 9) = v2 & 0xBF;
      v3 = *v0;
      *(_DWORD *)(v3 + 4 * (*(_DWORD *)(*v0 + 132) & 3) + 136) = 140;
      *(_DWORD *)(v3 + 4 * ((*(_DWORD *)(v3 + 132))++ & 3) + 152) = 0;
    }
    v0[59] = v0[61];
    *(_DWORD *)(*v0 + 128) |= 0x10u;
    *(_DWORD *)(*v0 + 204) = 0;
    *(_DWORD *)(*v0 + 208) = 0;
    return;
  }
  v4 = *(_DWORD *)(v1 + 12);
  v0[48] = *(_DWORD *)(v1 + 804);
  v35 = v4 & 1;
  v0[49] = *(_DWORD *)(*v0 + 808);
  v0[51] = *(_DWORD *)(*v0 + 816);
  v0[52] = *(_DWORD *)(*v0 + 820);
  v0[50] = *(_DWORD *)(*v0 + 812);
  v5 = (_DWORD *)*v0;
  if ( *(int *)(*v0 + 4) >= 6 )
  {
    v0[53] = v5[206];
    *(_DWORD *)(*v0 + 204) = *(_DWORD *)(*v0 + 840);
    if ( (*(_BYTE *)(*v0 + 12) & 1) != 0 )
      v0[59] = v0[60];
    else
      v0[59] = v0[61];
    *(_DWORD *)(*v0 + 128) |= 0x10u;
    sub_3000A060();
    return;
  }
  v6 = v5[32];
  if ( (v6 & 0xC000) == 0 )
  {
    v7 = v5[3];
    if ( (v7 & 0x4000) != 0 )
      goto LABEL_50;
    if ( (v7 & 0x10) != 0 )
    {
      v8 = *((_BYTE *)v0 + 9);
      if ( (v8 & 0xC0) != 0 )
      {
        *((_BYTE *)v0 + 9) = v8 & 0x3F;
        v9 = *v0;
        *(_DWORD *)(v9 + 4 * (*(_DWORD *)(*v0 + 132) & 3) + 136) = 140;
        *(_DWORD *)(v9 + 4 * ((*(_DWORD *)(v9 + 132))++ & 3) + 152) = 0;
      }
    }
    v10 = *((_BYTE *)v0 + 9);
    if ( (v10 & 0x40) != 0 )
    {
      v11 = *v0;
      if ( (*(_BYTE *)(*v0 + 12) & 1) != 0
        || *(_DWORD *)(v11 + 84) != 1023
        && (v12 = sub_300067B0(
                    *(_DWORD *)(v11 + 172),
                    v11 + 20,
                    *((float *)v0 + 51),
                    30.0,
                    *(float *)(v11 + 196),
                    v11 + 964,
                    v11 + 968,
                    v11 + 972,
                    0,
                    1,
                    0,
                    v0[61],
                    v0[60],
                    0,
                    60.0) == 0,
            v0 = (_DWORD *)dword_301A0ED0,
            !v12) )
      {
        *(_DWORD *)(*v0 + 12) |= 1u;
        *(_DWORD *)(*v0 + 12) &= 0xFFFFFFFD;
        goto LABEL_50;
      }
      if ( *(_DWORD *)(*v0 + 84) == 1023 )
        goto LABEL_50;
      *(_DWORD *)(*v0 + 12) |= 0x8000u;
      if ( (*((_BYTE *)v0 + 9) & 2) != 0 )
        goto LABEL_50;
      v13 = *v0;
      v14 = *(_DWORD *)(*v0 + 132);
      if ( (*(_BYTE *)(*v0 + 12) & 2) == 0 )
      {
        *(_DWORD *)(v13 + 4 * (*(_DWORD *)(*v0 + 132) & 3) + 136) = 140;
        goto LABEL_49;
      }
LABEL_48:
      *(_DWORD *)(v13 + 4 * (v14 & 3) + 136) = 141;
      goto LABEL_49;
    }
    v15 = *v0;
    v16 = v10 < 0;
    v17 = *(_DWORD *)(*v0 + 12);
    if ( v16 )
    {
      if ( (v17 & 1) == 0 )
      {
        *(_DWORD *)(v15 + 12) = v17 | 2;
        goto LABEL_50;
      }
      v0[53] = 1112014848;
      ((void (__cdecl *)(float *, int, _DWORD *, _DWORD *, int, _DWORD, unsigned int))v0[61])(
        &v41,
        *v0 + 20,
        v0 + 48,
        v0 + 51,
        *v0 + 20,
        *(_DWORD *)(*v0 + 172),
        v0[13] & 0xFDFFFFFF);
      v0 = (_DWORD *)dword_301A0ED0;
      if ( !v46 )
      {
        *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12) &= 0xFFFFFFFE;
        *(_DWORD *)(*v0 + 12) |= 2u;
        goto LABEL_50;
      }
    }
    else
    {
      if ( (v17 & 1) == 0 )
      {
        if ( (v17 & 2) == 0 )
          goto LABEL_50;
        v0[53] = *(_DWORD *)(v15 + 824);
        ((void (__cdecl *)(float *, int, _DWORD *, _DWORD *, int, _DWORD, unsigned int))v0[61])(
          &v41,
          *v0 + 20,
          v0 + 48,
          v0 + 51,
          *v0 + 20,
          *(_DWORD *)(*v0 + 172),
          v0[13] & 0xFDFFFFFF);
        v0 = (_DWORD *)dword_301A0ED0;
        if ( !v46 )
        {
          *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12) &= 0xFFFFFFFD;
          goto LABEL_50;
        }
        if ( (*(_BYTE *)(dword_301A0ED0 + 9) & 2) != 0 )
          goto LABEL_50;
        v13 = *(_DWORD *)dword_301A0ED0;
        v14 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 132);
        goto LABEL_48;
      }
      v0[53] = *(_DWORD *)(v15 + 824);
      ((void (__cdecl *)(float *, int, _DWORD *, _DWORD *, int, _DWORD, unsigned int))v0[61])(
        &v41,
        *v0 + 20,
        v0 + 48,
        v0 + 51,
        *v0 + 20,
        *(_DWORD *)(*v0 + 172),
        v0[13] & 0xFDFFFFFF);
      v0 = (_DWORD *)dword_301A0ED0;
      if ( !v46 )
      {
        v5 = *(_DWORD **)dword_301A0ED0;
        goto LABEL_38;
      }
      *(_DWORD *)(dword_301A0ED0 + 212) = 1112014848;
      ((void (__cdecl *)(float *, int, _DWORD *, _DWORD *, int, _DWORD, unsigned int))v0[61])(
        &v41,
        *v0 + 20,
        v0 + 48,
        v0 + 51,
        *v0 + 20,
        *(_DWORD *)(*v0 + 172),
        v0[13] & 0xFDFFFFFF);
      v0 = (_DWORD *)dword_301A0ED0;
      if ( !v46 )
      {
        *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12) &= 0xFFFFFFFE;
        *(_DWORD *)(*v0 + 12) |= 2u;
        goto LABEL_50;
      }
    }
    if ( (*((_BYTE *)v0 + 9) & 2) != 0 )
      goto LABEL_50;
    v13 = *v0;
    *(_DWORD *)(*v0 + 4 * (*(_DWORD *)(*v0 + 132) & 3) + 136) = 142;
LABEL_49:
    *(_DWORD *)(v13 + 4 * ((*(_DWORD *)(v13 + 132))++ & 3) + 152) = 0;
    goto LABEL_50;
  }
  if ( (v6 & 0x4000) == 0 )
  {
    if ( (v6 & 0x8000) == 0 )
      goto LABEL_38;
    goto LABEL_15;
  }
  if ( (v6 & 0x8000) != 0 )
  {
LABEL_15:
    if ( (v6 & 0x4000) == 0 )
    {
      v5[3] |= 2u;
      *(_DWORD *)(*v0 + 12) &= 0xFFFFFFFE;
      goto LABEL_50;
    }
LABEL_38:
    v5[3] &= 0xFFFFFFFC;
    goto LABEL_50;
  }
  v5[3] |= 1u;
  *(_DWORD *)(*v0 + 12) &= 0xFFFFFFFD;
LABEL_50:
  v18 = *v0;
  if ( !*(_DWORD *)(*v0 + 212) )
  {
    v19 = *(_DWORD *)(v18 + 12);
    if ( (v19 & 1) != 0 )
    {
      if ( *(_DWORD *)(v18 + 204) == *(_DWORD *)(v18 + 836) )
      {
        *(_DWORD *)(v18 + 204) = *(_DWORD *)(v18 + 832);
      }
      else
      {
        if ( dword_301E49AC >= 2 )
        {
          sub_300067B0(
            *(_DWORD *)(v18 + 172),
            v18 + 20,
            *((float *)v0 + 51),
            30.0,
            *(float *)(v18 + 196),
            0,
            0,
            0,
            0,
            *(_DWORD *)(v18 + 84) != 1023,
            0,
            v0[61],
            v0[60],
            0,
            60.0);
          v0 = (_DWORD *)dword_301A0ED0;
        }
        v20 = *(_DWORD *)(*v0 + 828);
        if ( *(_DWORD *)(*v0 + 204) != v20 )
        {
          *(_DWORD *)(*v0 + 204) = v20;
          v0[58] = 1;
          v21 = *(_DWORD *)(*v0 + 120);
          if ( (v21 & 0xFFFFFDFF) != 0 )
            *(_DWORD *)(*v0 + 120) = ~(_WORD)v21 & 0x200;
          *(_DWORD *)(*v0 + 12) |= 0x2000u;
          *(_DWORD *)(*v0 + 16) = 1800;
        }
      }
    }
    else if ( *(_DWORD *)(v18 + 204) == *(_DWORD *)(v18 + 828) )
    {
      *(_DWORD *)(v18 + 204) = *(_DWORD *)(v18 + 832);
      v0[58] = 1;
      v22 = *v0;
      v23 = *(_DWORD *)(v22 + 120);
      if ( (v23 & 0xFFFFFDFF) != 0 )
        *(_DWORD *)(v22 + 120) = ~(_WORD)v23 & 0x200;
    }
    else if ( (v19 & 2) != 0 )
    {
      *(_DWORD *)(v18 + 204) = *(_DWORD *)(v18 + 832);
    }
    else
    {
      *(_DWORD *)(v18 + 204) = *(_DWORD *)(v18 + 836);
    }
  }
  sub_3000A060();
  v24 = (_DWORD *)dword_301A0ED0;
  v25 = *(_DWORD *)dword_301A0ED0;
  v26 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 204);
  if ( v26 == *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 832) )
  {
    *(_DWORD *)(dword_301A0ED0 + 212) = 1112014848;
    *(_DWORD *)(*v24 + 128) |= 0x20u;
    v27 = *v24;
    v28 = *(_DWORD *)(*v24 + 128) & 0xFFFFFFBF;
  }
  else if ( v26 == *(_DWORD *)(v25 + 828) )
  {
    *(_DWORD *)(dword_301A0ED0 + 212) = 1106247680;
    *(_DWORD *)(*v24 + 128) |= 0x40u;
    v27 = *v24;
    v28 = *(_DWORD *)(*v24 + 128) & 0xFFFFFFDF;
  }
  else
  {
    *(_DWORD *)(dword_301A0ED0 + 212) = *(_DWORD *)(v25 + 824);
    v27 = *v24;
    v28 = *(_DWORD *)(*v24 + 128) & 0xFFFFFF9F;
  }
  *(_DWORD *)(v27 + 128) = v28;
  if ( (*(_BYTE *)(*v24 + 12) & 1) != 0 )
  {
    v24[59] = v24[60];
    *(_DWORD *)(*v24 + 128) |= 0x10u;
    if ( !v35 )
    {
      if ( *((_BYTE *)v24 + 24) || *((_BYTE *)v24 + 25) )
      {
        *(_DWORD *)(*v24 + 12) &= 0xFFFFFBFF;
        *(_DWORD *)(*v24 + 12) &= 0xFFFFFFDF;
      }
      v36 = *(_DWORD *)(*v24 + 20);
      v37 = *(_DWORD *)(*v24 + 24);
      v38 = *(float *)(*v24 + 28);
      v38 = v38 + 10.0;
      ((void (__cdecl *)(float *, int, _DWORD *, _DWORD *, int *, _DWORD, unsigned int))v24[60])(
        &v41,
        *v24 + 20,
        v24 + 48,
        v24 + 51,
        &v36,
        *(_DWORD *)(*v24 + 172),
        v24[13] & 0xFDFFFFFF);
      v36 = v42;
      v37 = v43;
      v38 = v44;
      (*(void (__cdecl **)(float *, int *, int, int, int, _DWORD, unsigned int))(dword_301A0ED0 + 240))(
        &v41,
        &v36,
        dword_301A0ED0 + 192,
        dword_301A0ED0 + 204,
        *(_DWORD *)dword_301A0ED0 + 20,
        *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 172),
        *(_DWORD *)(dword_301A0ED0 + 52) & 0xFDFFFFFF);
      v29 = dword_301A0ED0;
      *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 20) = v42;
      *(_DWORD *)(*(_DWORD *)v29 + 24) = v43;
      *(float *)(*(_DWORD *)v29 + 28) = v44;
      *(_DWORD *)(*(_DWORD *)v29 + 872) = *(_DWORD *)(*(_DWORD *)v29 + 196);
      v39[0] = *(_DWORD *)(*(_DWORD *)v29 + 20);
      v39[1] = *(_DWORD *)(*(_DWORD *)v29 + 24);
      v40 = *(float *)(*(_DWORD *)v29 + 28);
      v40 = v40 - 0.25;
      (*(void (__cdecl **)(float *, int, int, int, int *, _DWORD, unsigned int))(v29 + 240))(
        &v41,
        *(_DWORD *)v29 + 20,
        v29 + 192,
        v29 + 204,
        v39,
        *(_DWORD *)(*(_DWORD *)v29 + 172),
        *(_DWORD *)(v29 + 52) & 0xFDFFFFFF);
      if ( v47 || (v30 = v41, v41 >= 1.0) )
      {
        v31 = dword_301A0ED0;
        *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 876) = 0;
      }
      else
      {
        v31 = dword_301A0ED0;
        sub_3003ED60(*(float *)(*(_DWORD *)dword_301A0ED0 + 872), (int)v45);
        *(float *)(*(_DWORD *)v31 + 876) = v30;
      }
      v32 = *(_DWORD *)v31;
      v33 = *(float *)(v32 + 876) - *(float *)(v32 + 192);
      *(float *)&v34 = sub_3003DB10(v33);
      if ( *(float *)&v34 >= -45.0 )
      {
        if ( *(float *)&v34 <= 45.0 )
          *(_DWORD *)(v32 + 880) = *(_DWORD *)(v32 + 876);
        else
          *(float *)(v32 + 880) = *(float *)(v32 + 192) + 45.0;
      }
      else
      {
        *(float *)(v32 + 880) = *(float *)(v32 + 192) - 45.0;
      }
    }
  }
  else
  {
    v24[59] = v24[61];
    *(_DWORD *)(*v24 + 128) |= 0x10u;
  }
}
// 301A0ED0: using guessed type int dword_301A0ED0;
// 301E49AC: using guessed type int dword_301E49AC;

//----- (3000AF10) --------------------------------------------------------
char __usercall sub_3000AF10@<al>(char a1@<al>, int a2@<edx>, char a3@<cl>)
{
  int v3; // eax
  double v4; // st7
  double v5; // st7
  int v6; // eax
  int v7; // ecx
  int v8; // eax
  int v9; // ecx
  int v10; // eax
  float v12; // [esp+0h] [ebp-54h] BYREF
  float v13; // [esp+4h] [ebp-50h]
  float v14; // [esp+8h] [ebp-4Ch]
  int v15[3]; // [esp+Ch] [ebp-48h] BYREF
  float v16[3]; // [esp+18h] [ebp-3Ch] BYREF
  float v17[12]; // [esp+24h] [ebp-30h] BYREF

  LOBYTE(v3) = (a3 + 64) ^ (a1 + 64);
  if ( (v3 & 0x80u) != 0 )
  {
    LOBYTE(v3) = *(_BYTE *)(dword_301A0ED0 + 217);
    if ( (_BYTE)v3 )
    {
      if ( (_BYTE)v3 == 1 || (_BYTE)v3 == 2 )
      {
        v9 = *(_DWORD *)dword_301A0ED0;
        v10 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12);
        if ( (v10 & 1) != 0 )
        {
          *(_DWORD *)(v9 + 4 * (*(_DWORD *)(v9 + 132) & 3) + 136) = 67;
        }
        else if ( (v10 & 0x80u) == 0 && *(float *)(v9 + 64) == 0.0 )
        {
          *(_DWORD *)(v9 + 4 * (*(_DWORD *)(v9 + 132) & 3) + 136) = 21;
        }
        else
        {
          *(_DWORD *)(v9 + 4 * (*(_DWORD *)(v9 + 132) & 3) + 136) = 44;
        }
        v3 = *(_DWORD *)(v9 + 132) & 3;
        *(_DWORD *)(v9 + 4 * v3 + 152) = 0;
        ++*(_DWORD *)(v9 + 132);
      }
    }
    else
    {
      v3 = *(_DWORD *)dword_301A0ED0;
      if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 84) == 1023 )
      {
        if ( a2 && (*(_BYTE *)(v3 + 12) & 0x10) != 0 )
        {
          v15[0] = *(_DWORD *)(dword_301A0ED0 + 192);
          v4 = *(float *)(dword_301A0ED0 + 196);
          v15[2] = 1090519040;
          *(float *)v15 = *(float *)v15 + 6.0;
          *(float *)&v15[1] = v4 + 6.0;
          v12 = *(float *)(dword_301A0ED0 + 204);
          v13 = *(float *)(dword_301A0ED0 + 208);
          v5 = *(float *)(dword_301A0ED0 + 212);
          v14 = *(float *)(dword_301A0ED0 + 212);
          v12 = v12 - 6.0;
          v13 = v13 - 6.0;
          if ( v5 < 8.0 )
            v14 = 8.0;
          v6 = *(_DWORD *)(dword_301A0ED0 + 52) & 0xFDFEFFFF;
          v16[0] = *(float *)(*(_DWORD *)dword_301A0ED0 + 20) - *(float *)(*(_DWORD *)dword_301A0ED0 + 88) * 31.0;
          v16[1] = *(float *)(*(_DWORD *)dword_301A0ED0 + 24) - *(float *)(*(_DWORD *)dword_301A0ED0 + 92) * 31.0;
          v16[2] = *(float *)(*(_DWORD *)dword_301A0ED0 + 28) - *(float *)(*(_DWORD *)dword_301A0ED0 + 96) * 31.0;
          sub_30007950(
            v6,
            (int)v17,
            *(_DWORD *)dword_301A0ED0 + 20,
            (int)v15,
            (int)&v12,
            (int)v16,
            *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 172));
          v7 = (SLODWORD(v17[7]) >> 20) & 0x1F;
          if ( v17[0] == 1.0 || !v7 )
            v7 = 13;
          LOBYTE(v3) = sub_300079E0(v7 + 1);
        }
      }
      else if ( a2 )
      {
        v8 = sub_30009220(*(_DWORD *)(v3 + 12));
        LOBYTE(v3) = sub_300079E0(v8);
      }
    }
  }
  return v3;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000B110) --------------------------------------------------------
BOOL sub_3000B110()
{
  int v0; // edx

  v0 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 204);
  return v0 != *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 832)
      && v0 != *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 828)
      && (*(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12) & 0x80) == 0;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000B150) --------------------------------------------------------
void sub_3000B150()
{
  _DWORD **v0; // edi
  int v1; // ebp
  float v2; // esi
  int v3; // eax
  int v4; // eax
  int v5; // eax
  double v6; // st7
  double v7; // st7
  int v8; // eax
  int v9; // edi
  int v10; // ebx
  char v11; // al
  double v12; // st7
  float v13; // esi
  double v14; // st7
  int v15; // ebx
  int v16; // ebp
  double v17; // st7
  int v18; // eax
  double v19; // st7
  double v20; // st7
  double v21; // st7
  double v22; // st7
  int v23; // eax
  double v24; // st7
  double v25; // st7
  int v26; // esi
  int v27; // eax
  int v28; // ebp
  _DWORD *v29; // eax
  int v30; // ecx
  int v31; // eax
  _DWORD *v32; // eax
  int v33; // ecx
  int v34; // eax
  float v35; // [esp+8h] [ebp-Ch]
  float v36; // [esp+Ch] [ebp-8h]
  int v37; // [esp+Ch] [ebp-8h]
  int v38; // [esp+Ch] [ebp-8h]
  int v39; // [esp+10h] [ebp-4h]

  v0 = (_DWORD **)dword_301A0ED0;
  v1 = -1;
  if ( *(int *)(*(_DWORD *)dword_301A0ED0 + 4) >= 6 )
    return;
  *(float *)(dword_301A0ED0 + 220) = sqrt(
                                       *(float *)(*(_DWORD *)dword_301A0ED0 + 36)
                                     * *(float *)(*(_DWORD *)dword_301A0ED0 + 36)
                                     + *(float *)(*(_DWORD *)dword_301A0ED0 + 32)
                                     * *(float *)(*(_DWORD *)dword_301A0ED0 + 32));
  v2 = *(float *)v0;
  if ( ((*v0)[32] & 0xC000) != 0 )
  {
    v3 = *(_DWORD *)(LODWORD(v2) + 12);
    if ( (v3 & 1) != 0 )
    {
      sub_300031F0((_DWORD *)LODWORD(v2), 3, 3, 1);
    }
    else if ( (v3 & 2) != 0 )
    {
      sub_300031F0((_DWORD *)LODWORD(v2), 3, 2, 1);
    }
    else
    {
      sub_300031F0((_DWORD *)LODWORD(v2), 3, 1, 1);
    }
    return;
  }
  v4 = *(_DWORD *)(LODWORD(v2) + 204);
  v39 = v4 == *(_DWORD *)(LODWORD(v2) + 832) ? 2 : v4 == *(_DWORD *)(LODWORD(v2) + 828);
  if ( *(_DWORD *)(LODWORD(v2) + 84) == 1023 && *(_DWORD *)(LODWORD(v2) + 4) != 1 )
  {
    v5 = *(_DWORD *)(LODWORD(v2) + 12);
    if ( (v5 & 0x10) != 0 )
    {
      if ( (int)v0[1] - *(_DWORD *)(LODWORD(v2) + 100) < 300 )
        return;
      v6 = 0.5 * 190.5;
      v36 = *(float *)(LODWORD(v2) + 40);
      if ( (v5 & 0x80u) == 0 && *(float *)(LODWORD(v2) + 64) == 0.0 )
        v7 = v36 / (v6 * *(float *)(LODWORD(v2) + 848)) * 0.44999999;
      else
        v7 = v36 / (v6 * *(float *)(LODWORD(v2) + 844)) * 0.34999999;
      if ( v36 < 0.0 )
        v8 = sub_300031F0((_DWORD *)LODWORD(v2), 3, 17, 1);
      else
        v8 = sub_300031F0((_DWORD *)LODWORD(v2), 3, 16, 1);
      v9 = dword_301A0ED0;
      v10 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 8);
      v1 = v8;
      *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 8) = (unsigned __int8)(unsigned __int64)((double)dword_301A0D48 * v7
                                                                                     + (double)v10);
      sub_3000AF10(v10, 1, *(_DWORD *)(*(_DWORD *)v9 + 8));
      v0 = (_DWORD **)dword_301A0ED0;
    }
    v2 = *(float *)v0;
    if ( v39 == ((*v0)[3] & 3) )
      return;
  }
  if ( *(char *)(LODWORD(v2) + 12) < 0 || (v37 = 0, *(float *)(LODWORD(v2) + 64) != 0.0) )
    v37 = 1;
  if ( *((float *)v0 + 55) < 10.0 || *(_DWORD *)(LODWORD(v2) + 4) == 1 )
  {
    if ( *((float *)v0 + 55) < 1.0 )
      *(_DWORD *)(LODWORD(v2) + 8) = 0;
    v32 = *v0;
    v33 = (*v0)[51];
    if ( v33 == (*v0)[207] )
    {
      v34 = sub_300031F0(v32, 3, 3, 1);
    }
    else
    {
      if ( v33 != v32[208] )
        goto LABEL_94;
      v34 = sub_300031F0(v32, 3, 2, 1);
    }
    v0 = (_DWORD **)dword_301A0ED0;
    v1 = v34;
LABEL_94:
    if ( v1 >= 0 )
      return;
    goto LABEL_95;
  }
  v11 = *((_BYTE *)v0 + 24);
  v12 = (double)*(int *)(LODWORD(v2) + 68);
  if ( v11 )
  {
    if ( *((_BYTE *)v0 + 25) )
    {
      v12 = v12 * ((*(float *)(LODWORD(v2) + 860) - 1.0) * 0.75 + 1.0 + 1.0) * 0.5;
      if ( v11 < 0 )
      {
        v12 = v12 * (*(float *)(LODWORD(v2) + 864) + 1.0) * 0.5;
        sub_30003460(1);
        goto LABEL_38;
      }
    }
    else if ( v11 < 0 )
    {
      v12 = v12 * *(float *)(LODWORD(v2) + 864);
    }
    sub_30003460(1);
  }
  else if ( *((_BYTE *)v0 + 25) )
  {
    v12 = v12 * ((*(float *)(LODWORD(v2) + 860) - 1.0) * 0.75 + 1.0);
    sub_30003460(1);
  }
LABEL_38:
  v13 = *(float *)v0;
  if ( v37 )
    v14 = v12 * *(float *)(LODWORD(v13) + 844);
  else
    v14 = v12 * *(float *)(LODWORD(v13) + 848);
  v15 = *(_DWORD *)(LODWORD(v13) + 828);
  v35 = v14;
  v16 = *(_DWORD *)(LODWORD(v13) + 832);
  v17 = sub_30009F60(v16, v15);
  if ( v17 == 0.0 )
  {
    v22 = sub_30009F60(v15, v16);
    v18 = v39;
    if ( v22 == 0.0 )
    {
      v19 = v35;
      if ( v39 == 1 )
      {
        v19 = v19 * *(float *)(LODWORD(v13) + 852);
        goto LABEL_44;
      }
      if ( v39 == 2 )
      {
        v19 = v19 * *(float *)(LODWORD(v13) + 856);
        goto LABEL_57;
      }
    }
    else
    {
      v19 = ((1.0 - v22) * *(float *)(LODWORD(v13) + 852) + v22 * *(float *)(LODWORD(v13) + 856)) * v35;
    }
  }
  else
  {
    v18 = v39;
    v19 = ((1.0 - v17) * *(float *)(LODWORD(v13) + 856) + v17 * *(float *)(LODWORD(v13) + 852)) * v35;
  }
  if ( v18 == 1 )
  {
LABEL_44:
    v20 = *((float *)v0 + 55) / v19;
    if ( v37 )
      v21 = v20 * 0.23999999;
    else
      v21 = v20 * 0.25;
    if ( (*(_BYTE *)(LODWORD(v13) + 12) & 0x40) != 0 )
      v23 = sub_300031F0((_DWORD *)LODWORD(v13), 3, 9, 1);
    else
      v23 = sub_300031F0((_DWORD *)LODWORD(v13), 3, 8, 1);
    goto LABEL_74;
  }
  if ( v18 == 2 )
  {
LABEL_57:
    v24 = *((float *)v0 + 55) / v19;
    if ( v37 )
      v21 = v24 * 0.315;
    else
      v21 = v24 * 0.34;
    if ( (*(_BYTE *)(LODWORD(v13) + 12) & 0x40) != 0 )
    {
      if ( v37 )
        v23 = sub_300031F0((_DWORD *)LODWORD(v13), 3, 7, 1);
      else
        v23 = sub_300031F0((_DWORD *)LODWORD(v13), 3, 13, 1);
    }
    else if ( v37 )
    {
      v23 = sub_300031F0((_DWORD *)LODWORD(v13), 3, 6, 1);
    }
    else
    {
      v23 = sub_300031F0((_DWORD *)LODWORD(v13), 3, 12, 1);
    }
    goto LABEL_74;
  }
  v25 = *((float *)v0 + 55) / v19;
  if ( (*(_BYTE *)(LODWORD(v13) + 12) & 0x40) != 0 )
  {
    if ( v37 )
    {
      v21 = v25 * 0.32499999;
      v23 = sub_300031F0((_DWORD *)LODWORD(v13), 3, 5, 1);
    }
    else
    {
      v21 = v25 * 0.36000001;
      v23 = sub_300031F0((_DWORD *)LODWORD(v13), 3, 11, 1);
    }
  }
  else if ( v37 )
  {
    v21 = v25 * 0.30500001;
    v23 = sub_300031F0((_DWORD *)LODWORD(v13), 3, 4, 1);
  }
  else
  {
    v21 = v25 * 0.33500001;
    v23 = sub_300031F0((_DWORD *)LODWORD(v13), 3, 10, 1);
  }
LABEL_74:
  v26 = v23;
  sub_3000B110();
  v0 = (_DWORD **)dword_301A0ED0;
  v38 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 8);
  v28 = v27;
  *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 8) = (unsigned __int8)(unsigned __int64)((double)dword_301A0D48 * v21
                                                                                 + (double)v38);
  if ( !*((_BYTE *)v0 + 24) && !*((_BYTE *)v0 + 25) )
  {
    if ( *((float *)v0 + 55) > 120.0 )
      return;
    v29 = *v0;
    v30 = (*v0)[51];
    if ( v30 == (*v0)[207] )
    {
      v31 = sub_300031F0(v29, 3, 3, 1);
    }
    else
    {
      if ( v30 != v29[208] )
        goto LABEL_82;
      v31 = sub_300031F0(v29, 3, 2, 1);
    }
    v0 = (_DWORD **)dword_301A0ED0;
    v26 = v31;
LABEL_82:
    if ( v26 >= 0 )
      return;
LABEL_95:
    sub_300031F0(*v0, 3, 1, 1);
    return;
  }
  if ( v26 < 0 )
  {
    sub_300031F0(*v0, 3, 1, 1);
    v0 = (_DWORD **)dword_301A0ED0;
  }
  sub_3000AF10(v38, v28, (*v0)[2]);
}
// 3000B58F: variable 'v27' is possibly undefined
// 30003460: using guessed type double __cdecl sub_30003460(_DWORD);
// 3000B110: using guessed type double sub_3000B110(void);
// 301A0D48: using guessed type int dword_301A0D48;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000B6C0) --------------------------------------------------------
char sub_3000B6C0()
{
  double v0; // st7
  int v1; // eax
  double v2; // st7
  _DWORD *v3; // ecx
  int v4; // eax
  float v6[2]; // [esp+Ch] [ebp-48h] BYREF
  float v7; // [esp+14h] [ebp-40h]
  float v8[3]; // [esp+18h] [ebp-3Ch] BYREF
  char v9[47]; // [esp+24h] [ebp-30h] BYREF
  char v10; // [esp+53h] [ebp-1h]

  v0 = (double)dword_301A08AC;
  if ( v0 <= *(float *)(dword_301A0ED0 + 220) )
  {
    v2 = (*(float *)(dword_301A0ED0 + 220) - v0) / (double)(dword_301A15AC - dword_301A08AC);
    if ( v2 > 1.0 )
      v2 = 1.0;
    v1 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 56)
       + (unsigned __int64)((double)(dword_301A0AEC - dword_301A100C) * v2 + (double)dword_301A100C);
    if ( v1 < *(_DWORD *)(dword_301A0ED0 + 4) )
    {
      v8[0] = *(float *)(dword_301A0ED0 + 192) * 0.75;
      v8[1] = *(float *)(dword_301A0ED0 + 196) * 0.75;
      v8[2] = *(float *)(dword_301A0ED0 + 200) * 0.75;
      v6[0] = *(float *)(dword_301A0ED0 + 204) * 0.75;
      v6[1] = *(float *)(dword_301A0ED0 + 208) * 0.75;
      v7 = *(float *)(dword_301A0ED0 + 212) * 0.75;
      v7 = *(float *)(dword_301A0ED0 + 212) * 0.89999998;
      sub_30007950(
        2,
        (int)v9,
        *(_DWORD *)dword_301A0ED0 + 20,
        (int)v8,
        (int)v6,
        *(_DWORD *)dword_301A0ED0 + 20,
        *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 172));
      LOBYTE(v1) = v10;
      if ( v10 )
      {
        v3 = (_DWORD *)dword_301A0ED0;
        v4 = *(_DWORD *)dword_301A0ED0;
        *(_DWORD *)(v4 + 4 * (*(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 132) & 3) + 136) = 139;
        *(_DWORD *)(v4 + 4 * ((*(_DWORD *)(v4 + 132))++ & 3) + 152) = 0;
        v1 = *v3;
        *(_DWORD *)(*v3 + 56) = v3[1];
      }
    }
  }
  else
  {
    v1 = *(_DWORD *)dword_301A0ED0;
    if ( dword_301A0EEC + *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 56) < *(_DWORD *)(dword_301A0ED0 + 4) )
      *(_DWORD *)(v1 + 56) = 0;
  }
  return v1;
}
// 301A08AC: using guessed type int dword_301A08AC;
// 301A0AEC: using guessed type int dword_301A0AEC;
// 301A0ED0: using guessed type int dword_301A0ED0;
// 301A0EEC: using guessed type int dword_301A0EEC;
// 301A100C: using guessed type int dword_301A100C;
// 301A15AC: using guessed type int dword_301A15AC;

//----- (3000B850) --------------------------------------------------------
int sub_3000B850()
{
  int result; // eax
  _BYTE *v1; // ecx

  result = dword_301A0DA4;
  v1 = (_BYTE *)dword_301A0ED0;
  if ( dword_301A0DA4
    || *(_BYTE *)(dword_301A0ED0 + 217)
    && (result = *(_DWORD *)dword_301A0ED0,
        *(_DWORD *)(result + 4 * (*(_DWORD *)(result + 132) & 3) + 136) = 144,
        *(_DWORD *)(result + 4 * (*(_DWORD *)(result + 132) & 3) + 152) = 0,
        ++*(_DWORD *)(result + 132),
        dword_301A0DA4) )
  {
    if ( !v1[217] )
    {
      result = *(_DWORD *)v1;
      *(_DWORD *)(result + 4 * (*(_DWORD *)(*(_DWORD *)v1 + 132) & 3) + 136) = 145;
      *(_DWORD *)(result + 4 * ((*(_DWORD *)(result + 132))++ & 3) + 152) = 0;
    }
  }
  return result;
}
// 301A0DA4: using guessed type int dword_301A0DA4;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000B8E0) --------------------------------------------------------
int sub_3000B8E0()
{
  int v0; // ecx
  int v1; // edx
  int v2; // eax
  int v3; // eax
  int result; // eax
  int v5; // ecx

  v0 = dword_301A0ED0;
  v1 = *(_DWORD *)dword_301A0ED0;
  v2 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 16);
  if ( v2 )
  {
    if ( dword_301A0D48 < v2 )
    {
      *(_DWORD *)(v1 + 16) = v2 - dword_301A0D48;
    }
    else
    {
      *(_DWORD *)(v1 + 12) &= 0xFFFFDCFF;
      *(_DWORD *)(*(_DWORD *)v0 + 16) = 0;
    }
  }
  v3 = *(_DWORD *)(*(_DWORD *)v0 + 108);
  if ( v3 > 0 )
  {
    *(_DWORD *)(*(_DWORD *)v0 + 108) = v3 - dword_301A0D48;
    if ( *(int *)(*(_DWORD *)v0 + 108) < 0 )
      *(_DWORD *)(*(_DWORD *)v0 + 108) = 0;
  }
  result = *(_DWORD *)(*(_DWORD *)v0 + 116);
  if ( result > 0 )
  {
    *(_DWORD *)(*(_DWORD *)v0 + 116) = result - dword_301A0D48;
    v5 = *(_DWORD *)v0;
    result = *(_DWORD *)(v5 + 116);
    if ( result < 0 )
      *(_DWORD *)(v5 + 116) = 0;
  }
  return result;
}
// 301A0D48: using guessed type int dword_301A0D48;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000B960) --------------------------------------------------------
void __usercall sub_3000B960(int a1@<eax>, int a2@<esi>, void (__cdecl *a3)(float *, float *, int *, int *, float *, int, int))
{
  char v3; // al
  int v4; // ecx
  int v5; // edx
  int v6; // eax
  double v7; // st7
  unsigned __int8 v9; // c2
  unsigned __int8 v10; // c3
  double v11; // st7
  double v12; // st6
  long double v13; // st7
  int v14; // [esp-Ch] [ebp-80h]
  float v15; // [esp+0h] [ebp-74h]
  float v16; // [esp+Ch] [ebp-68h]
  float v17; // [esp+10h] [ebp-64h]
  float v18; // [esp+10h] [ebp-64h]
  float v19[3]; // [esp+14h] [ebp-60h] BYREF
  float v20[2]; // [esp+20h] [ebp-54h] BYREF
  float v21; // [esp+28h] [ebp-4Ch]
  int v22[3]; // [esp+2Ch] [ebp-48h] BYREF
  int v23[3]; // [esp+38h] [ebp-3Ch] BYREF
  float v24[12]; // [esp+44h] [ebp-30h] BYREF

  v3 = *(_BYTE *)(a1 + 5);
  v4 = 0;
  if ( (v3 & 0x30) != 0 && (*(_DWORD *)(a2 + 12) & 0x4000) == 0 )
  {
    v5 = *(_DWORD *)(a2 + 4);
    if ( v5 < 6 && (*(_DWORD *)(a2 + 84) != 1023 || v5 == 1) )
    {
      if ( (v3 & 0x10) != 0 )
        v4 = -1;
      if ( (v3 & 0x20) != 0 )
        ++v4;
    }
  }
  if ( (*(_DWORD *)(a2 + 128) & 0xC000) != 0 )
    v4 = 0;
  v6 = *(_DWORD *)(a2 + 204);
  if ( v6 == *(_DWORD *)(a2 + 832) || (v16 = 0.25, v6 != *(_DWORD *)(a2 + 828)) )
    v16 = 0.5;
  v7 = *(float *)(a2 + 64);
  if ( v4 )
  {
    if ( v4 <= 0 )
    {
      v17 = -v16;
      if ( v7 > v17 )
        v7 = v7 - (double)dword_301A0D48 * 0.0028571428 * v16;
      if ( v7 < v17 )
        v7 = v17;
    }
    else
    {
      if ( v7 < v16 )
        v7 = v7 + (double)dword_301A0D48 * 0.0028571428 * v16;
      if ( v7 > v16 )
        v7 = v16;
    }
  }
  else if ( v7 <= 0.0 )
  {
    if ( v7 < 0.0 )
    {
      v7 = v7 + (double)dword_301A0D48 * 0.0035714286 * v16;
      if ( v7 > 0.0 )
        v7 = 0.0;
    }
  }
  else
  {
    v7 = v7 - (double)dword_301A0D48 * 0.0035714286 * v16;
    if ( v7 < 0.0 )
      v7 = 0.0;
  }
  *(float *)(a2 + 64) = v7;
  if ( !(v10 | v9) )
  {
    v18 = v7;
    v11 = *(float *)(a2 + 20);
    v20[0] = *(float *)(a2 + 20);
    v12 = *(float *)(a2 + 24);
    v20[1] = *(float *)(a2 + 24);
    v21 = *(float *)(a2 + 28) + *(float *)(a2 + 208);
    v19[0] = v11;
    v19[1] = v12;
    v19[2] = v21;
    v15 = (float)(1 - 2 * (v18 < 0.0));
    sub_30040DF0(v19, *(float *)(a2 + 196), v15, 16.0, 20.0);
    v14 = *(_DWORD *)(a2 + 172);
    v23[0] = -1056964608;
    v23[1] = -1056964608;
    v23[2] = -1056964608;
    v22[0] = 1090519040;
    v22[1] = 1090519040;
    v22[2] = 1090519040;
    a3(v24, v20, v23, v22, v19, v14, 42008593);
    v13 = 1.0 - sqrt(1.0 - v24[0]);
    if ( v13 < fabs(*(float *)(a2 + 64)) )
      *(float *)(a2 + 64) = (double)(1 - 2 * (*(int *)(a2 + 64) < 0)) * v13;
  }
}
// 3000BABC: variable 'v10' is possibly undefined
// 3000BABC: variable 'v9' is possibly undefined
// 301A0D48: using guessed type int dword_301A0D48;

//----- (3000BBE0) --------------------------------------------------------
int __usercall sub_3000BBE0@<eax>(int a1@<eax>, float a2, int a3)
{
  float v5; // [esp+0h] [ebp-18h]
  float v6; // [esp+0h] [ebp-18h]
  float v7; // [esp+Ch] [ebp-Ch]
  float v8; // [esp+Ch] [ebp-Ch]
  float v9; // [esp+10h] [ebp-8h]
  float v10; // [esp+14h] [ebp-4h]
  float v11; // [esp+14h] [ebp-4h]
  float v12; // [esp+1Ch] [ebp+4h]

  v5 = a2 - *(float *)(a1 + 196);
  v7 = sub_3003DB10(v5);
  v10 = fabs(v7);
  v11 = v10 / 240.0;
  v9 = 1.0 - v11;
  v6 = a2 - v9 * v7;
  v8 = sub_3003DB70(v6);
  v12 = v9 * 60.0 + v11 * 45.0;
  return sub_300067B0(
           *(_DWORD *)(a1 + 172),
           a1 + 20,
           *(float *)(a1 + 816),
           30.0,
           v8,
           a1 + 964,
           a1 + 968,
           a1 + 972,
           1,
           *(_DWORD *)(a1 + 84) != 1023,
           0,
           a3,
           0,
           0,
           v12);
}

//----- (3000BCC0) --------------------------------------------------------
void __usercall sub_3000BCC0(int a1@<eax>, int a2, void (__cdecl *a3)(float *, float *, int *, int *, float *, int, int))
{
  int v4; // eax
  int v5; // ecx
  __int16 v6; // ax
  int v7; // ebx
  int v8; // edi
  double v9; // st7
  unsigned __int8 v11; // c0
  unsigned __int8 v12; // c3
  double v13; // st7
  float v14; // eax
  float v15; // ecx
  float v16; // edx
  double v17; // st7
  double v18; // st7
  double v19; // st7
  float v20; // ebp
  double v21; // st7
  int v22; // edi
  float v23; // ebx
  int v24; // edi
  bool v25; // c0
  bool v26; // c3
  double v27; // st7
  double v28; // st7
  unsigned __int8 v30; // c0
  unsigned __int8 v31; // c3
  double v32; // st7
  double v33; // st7
  double v35; // st7
  unsigned __int8 v36; // c0
  unsigned __int8 v37; // c3
  double v38; // st7
  double v40; // st7
  unsigned __int8 v41; // c0
  unsigned __int8 v42; // c3
  double v43; // st7
  int v44; // eax
  float v45; // [esp+0h] [ebp-70h]
  float v46; // [esp+4h] [ebp-6Ch]
  float v47; // [esp+Ch] [ebp-64h]
  float v48; // [esp+Ch] [ebp-64h]
  float v49; // [esp+Ch] [ebp-64h]
  float v50; // [esp+Ch] [ebp-64h]
  float v51; // [esp+Ch] [ebp-64h]
  float v52; // [esp+Ch] [ebp-64h]
  float v53; // [esp+Ch] [ebp-64h]
  float v54; // [esp+Ch] [ebp-64h]
  float v55; // [esp+Ch] [ebp-64h]
  float v56; // [esp+Ch] [ebp-64h]
  float v57; // [esp+Ch] [ebp-64h]
  float v58; // [esp+Ch] [ebp-64h]
  float v59; // [esp+Ch] [ebp-64h]
  float v60; // [esp+20h] [ebp-50h] BYREF
  float v61; // [esp+24h] [ebp-4Ch] BYREF
  float v62; // [esp+28h] [ebp-48h] BYREF
  float v63; // [esp+2Ch] [ebp-44h] BYREF
  int v64; // [esp+30h] [ebp-40h]
  float v65; // [esp+34h] [ebp-3Ch]
  float v66; // [esp+38h] [ebp-38h]
  float *v67; // [esp+3Ch] [ebp-34h]
  float v68; // [esp+40h] [ebp-30h]
  float v69; // [esp+44h] [ebp-2Ch]
  float v70; // [esp+48h] [ebp-28h]
  int v71[2]; // [esp+4Ch] [ebp-24h] BYREF
  float v72; // [esp+54h] [ebp-1Ch]
  float v73; // [esp+58h] [ebp-18h]
  float v74; // [esp+5Ch] [ebp-14h]
  float v75; // [esp+60h] [ebp-10h]
  float v76; // [esp+64h] [ebp-Ch]
  float v77; // [esp+68h] [ebp-8h]
  float v78; // [esp+6Ch] [ebp-4h]

  v4 = *(_DWORD *)(a1 + 4);
  if ( v4 != 5 )
  {
    if ( v4 < 6 )
    {
      v69 = *(float *)(a1 + 196);
      v5 = 0;
      do
      {
        v6 = *(_WORD *)(a2 + 4 * v5 + 8) + *(_WORD *)(a1 + 4 * v5 + 72);
        if ( !v5 )
        {
          if ( v6 <= 16000 )
          {
            if ( v6 < -16000 )
            {
              *(_DWORD *)(a1 + 72) = -16000 - *(_DWORD *)(a2 + 8);
              v6 = -16000;
            }
          }
          else
          {
            *(_DWORD *)(a1 + 72) = 16000 - *(_DWORD *)(a2 + 8);
            v6 = 16000;
          }
        }
        ++v5;
        v66 = (float)v6;
        *(float *)(a1 + 4 * v5 + 188) = v66 * 0.0054931641;
      }
      while ( v5 < 3 );
      v7 = *(_DWORD *)(a1 + 12);
      v70 = *(float *)(a1 + 196);
      if ( (v7 & 0x10) != 0 && *(_DWORD *)(a1 + 84) == 1023 )
      {
        v8 = dword_301A136C;
        if ( dword_301A136C )
        {
          *(float *)&v64 = sub_3003BA90((float *)(a1 + 88)) + 180.0;
          v47 = *(float *)&v64 - *(float *)(a1 + 196);
          v60 = sub_3003DB10(v47);
          v63 = (float)dword_301A136C;
          if ( v60 > (double)v63 || (v66 = (float)-v8, v60 < (double)v66) )
          {
            if ( v60 <= (double)v63 )
              v9 = v63 + v60;
            else
              v9 = v60 - v63;
            v60 = v9;
            *(_DWORD *)(a1 + 76) += (unsigned __int16)(unsigned __int64)(v60 * 182.04445);
            v66 = (float)dword_301A136C;
            if ( v11 | v12 )
              v13 = v66 + *(float *)&v64;
            else
              v13 = *(float *)&v64 - v66;
            v48 = v13;
            *(float *)(a1 + 196) = sub_3003DB70(v48);
          }
        }
      }
      if ( (v7 & 1) != 0 && (*(_DWORD *)(a1 + 128) & 0xC000) == 0 )
      {
        if ( dword_301E49AC )
        {
          v14 = *(float *)(a1 + 28);
          v15 = *(float *)(a1 + 20);
          v16 = *(float *)(a1 + 24);
          v66 = (float)*(int *)(a1 + 828);
          *(float *)v71 = v15;
          *(float *)&v71[1] = v16;
          v72 = v66 + v14;
          v68 = COERCE_FLOAT(&v62);
          v17 = *(float *)(a1 + 196);
          v67 = &v60;
          *(float *)&v64 = v17 * 0.017453292;
          v62 = cos(*(float *)&v64);
          v60 = sin(*(float *)&v64);
          v18 = *(float *)(a1 + 192) * 0.017453292;
          v67 = &v61;
          v68 = COERCE_FLOAT(&v63);
          *(float *)&v64 = v18;
          v61 = cos(*(float *)&v64);
          v63 = sin(*(float *)&v64);
          v76 = v61 * v62;
          v77 = v61 * v60;
          v78 = -v63;
          v73 = v76 * 18.0 + v15;
          v74 = v77 * 18.0 + v16;
          v75 = v78 * 18.0 + v72;
          dword_30076898(199);
          v46 = flt_301A0DC8 + *(float *)(a1 + 872);
          v45 = *(float *)(a1 + 872) - flt_301A0DC8;
          sub_3001B550((int)v71, 16.0, v45, v46);
        }
        v19 = *(float *)(a1 + 872) - *(float *)(a1 + 196);
        *(float *)&v64 = 0.0;
        v49 = v19;
        v60 = sub_3003DB10(v49);
        v68 = (float)(dword_301A0DCC - 5);
        if ( v60 > (double)v68
          || (v68 = (float)(5 - dword_301A0DCC), v60 < (double)v68)
          || (*(_BYTE *)(a2 + 20) || *(_BYTE *)(a2 + 21)) && v60 != 0.0 )
        {
          v66 = flt_301A0D44 * 55.0;
          if ( v66 <= fabs(v60) )
          {
            if ( v60 <= 0.0 )
              v21 = v66 + *(float *)(a1 + 872);
            else
              v21 = *(float *)(a1 + 872) - v66;
            v61 = v21;
            v20 = v61;
          }
          else
          {
            v20 = *(float *)(a1 + 196);
            v61 = v20;
          }
          v22 = 1;
          if ( sub_3000BBE0(a1, v20, (int)a3) )
          {
LABEL_49:
            if ( sub_300067B0(
                   *(_DWORD *)(a1 + 172),
                   a1 + 20,
                   *(float *)(a1 + 816),
                   30.0,
                   *(float *)(a1 + 196),
                   0,
                   0,
                   0,
                   1,
                   *(_DWORD *)(a1 + 84) != 1023,
                   0,
                   (int)a3,
                   0,
                   0,
                   45.0)
              && sub_300067B0(
                   *(_DWORD *)(a1 + 172),
                   a1 + 20,
                   *(float *)(a1 + 816),
                   30.0,
                   v20,
                   0,
                   0,
                   0,
                   1,
                   *(_DWORD *)(a1 + 84) != 1023,
                   0,
                   (int)a3,
                   0,
                   0,
                   45.0) )
            {
              *(float *)(a1 + 872) = v20;
            }
            else
            {
              v64 = 1;
            }
          }
          else
          {
            while ( v22 )
            {
              v68 = (float)(unsigned __int16)(unsigned __int64)((*(float *)(a1 + 872) - v61) * 182.04445);
              v62 = v68 * 0.0054931641;
              if ( v62 > 180.0 )
                v62 = v62 - 360.0;
              v60 = v62;
              if ( fabs(v62) <= 1.0 )
              {
                v22 = 0;
                v64 = 1;
              }
              else
              {
                v22 = 1;
                if ( v62 <= 0.0 )
                  v60 = -1.0;
                else
                  v60 = 1.0;
              }
              v50 = v61 + v60;
              v61 = sub_3003DB70(v50);
              v20 = v61;
              if ( sub_3000BBE0(a1, v61, (int)a3) )
                goto LABEL_49;
            }
          }
        }
        v51 = *(float *)(a1 + 872) - *(float *)(a1 + 196);
        v60 = sub_3003DB10(v51);
        if ( v60 != 0.0 )
        {
          v23 = *(float *)(a1 + 872);
          v61 = v23;
          LODWORD(v66) = 1;
          while ( 1 )
          {
            v24 = sub_300067B0(
                    *(_DWORD *)(a1 + 172),
                    a1 + 20,
                    *(float *)(a1 + 816),
                    30.0,
                    v23,
                    0,
                    0,
                    0,
                    1,
                    *(_DWORD *)(a1 + 84) != 1023,
                    0,
                    (int)a3,
                    0,
                    0,
                    45.0);
            if ( v24 )
            {
              if ( sub_3000BBE0(a1, v23, (int)a3) )
                break;
            }
            if ( v66 == 0.0 )
              goto LABEL_68;
            if ( fabs(v60) <= 1.0 )
            {
              v66 = 0.0;
            }
            else
            {
              LODWORD(v66) = 1;
              v25 = v60 < 0.0;
              v26 = v60 == 0.0;
              v60 = 1.0;
              if ( v25 || v26 )
                v60 = -1.0;
            }
            v64 = 1;
            v52 = v60 + *(float *)(a1 + 196);
            *(_DWORD *)(a1 + 76) += (unsigned __int16)(unsigned __int64)(v60 * 182.04445);
            v65 = sub_3003DB70(v52);
            v27 = *(float *)(a1 + 872) - v65;
            *(float *)(a1 + 196) = v65;
            v68 = (float)(unsigned __int16)(unsigned __int64)(v27 * 182.04445);
            v63 = v68 * 0.0054931641;
            if ( v63 > 180.0 )
              v63 = v63 - 360.0;
            v60 = v63;
            if ( !v24 )
            {
              v53 = v63 + v61;
              v61 = sub_3003DB70(v53);
              v23 = v61;
            }
          }
          *(float *)(a1 + 872) = v23;
        }
LABEL_68:
        v63 = (float)dword_301A0DCC;
        if ( v60 > (double)v63 || (v68 = (float)-dword_301A0DCC, v60 < (double)v68) )
        {
          if ( v60 <= (double)v63 )
            v28 = v63 + v60;
          else
            v28 = v60 - v63;
          v60 = v28;
          *(_DWORD *)(a1 + 76) += (unsigned __int16)(unsigned __int64)(v60 * 182.04445);
          v68 = (float)dword_301A0DCC;
          if ( v30 | v31 )
            v32 = v68 + *(float *)(a1 + 872);
          else
            v32 = *(float *)(a1 + 872) - v68;
          v54 = v32;
          *(float *)(a1 + 196) = sub_3003DB70(v54);
        }
        if ( *(float *)&v64 != 0.0 )
        {
          v33 = v69 - *(float *)(a1 + 196);
          *(_DWORD *)(a1 + 12) |= 0x8000u;
          v55 = v33;
          v62 = sub_3003DB10(v55);
          if ( fabs(v62) <= 1.0 )
          {
            v56 = v70 - *(float *)(a1 + 196);
            v70 = sub_3003DB10(v56);
            if ( v70 * v62 > 0.0 )
            {
              v62 = v62 * 0.98000002;
              v57 = v62 + *(float *)(a1 + 196);
              *(float *)(a1 + 196) = sub_3003DB70(v57);
              *(_DWORD *)(a1 + 76) += (unsigned __int16)(unsigned __int64)(v62 * 182.04445);
            }
          }
        }
        v58 = *(float *)(a1 + 880) - *(float *)(a1 + 192);
        v60 = sub_3003DB10(v58);
        if ( v60 > 45.0 || v60 < -45.0 )
        {
          v35 = v60;
          if ( v36 | v37 )
            v38 = v35 + 45.0;
          else
            v38 = v35 - 45.0;
          v60 = v38;
          v40 = *(float *)(a1 + 880);
          *(_DWORD *)(a1 + 72) += (unsigned __int16)(unsigned __int64)(v60 * 182.04445);
          if ( v41 | v42 )
            v43 = v40 + 45.0;
          else
            v43 = v40 - 45.0;
          v59 = v43;
          *(float *)(a1 + 192) = sub_3003DBF0(v59);
        }
      }
      v44 = *(_DWORD *)(a1 + 4);
      if ( v44 != 3 && v44 != 2 && v44 != 4 )
        sub_3000B960(a2, a1, a3);
    }
    else
    {
      if ( *(_DWORD *)(a1 + 248) == 999 )
      {
        v66 = (float)(__int16)(*(_WORD *)(a2 + 12) + *(_WORD *)(a1 + 76));
        *(_DWORD *)(a1 + 248) = (unsigned __int64)(v66 * 0.0054931641);
      }
      sub_3000B960(a2, a1, a3);
    }
  }
}
// 3000BE91: variable 'v11' is possibly undefined
// 3000BE91: variable 'v12' is possibly undefined
// 3000C52D: variable 'v30' is possibly undefined
// 3000C52D: variable 'v31' is possibly undefined
// 3000C671: variable 'v36' is possibly undefined
// 3000C671: variable 'v37' is possibly undefined
// 3000C6B7: variable 'v41' is possibly undefined
// 3000C6B7: variable 'v42' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0DC8: using guessed type float flt_301A0DC8;
// 301A0DCC: using guessed type int dword_301A0DCC;
// 301A136C: using guessed type int dword_301A136C;
// 301E49AC: using guessed type int dword_301E49AC;

//----- (3000C710) --------------------------------------------------------
void __usercall sub_3000C710(double a1@<st0>)
{
  int v1; // esi
  int v2; // ecx
  int v3; // eax
  int v4; // eax
  int v5; // edi
  double v6; // st7
  double v7; // st7
  int v8; // ecx
  int v9; // edi
  double v10; // st7
  int v11; // esi
  float v12; // [esp+0h] [ebp-1Ch]
  float v13; // [esp+0h] [ebp-1Ch]
  float v14; // [esp+Ch] [ebp-10h]
  float v15; // [esp+Ch] [ebp-10h]
  float v16; // [esp+10h] [ebp-Ch]
  float v17; // [esp+10h] [ebp-Ch]
  int v18; // [esp+14h] [ebp-8h]
  int v19; // [esp+14h] [ebp-8h]
  float v20; // [esp+18h] [ebp-4h]
  float v21; // [esp+18h] [ebp-4h]

  v1 = dword_301A0ED0;
  v2 = *(_DWORD *)dword_301A0ED0;
  if ( (*(_BYTE *)(*(_DWORD *)dword_301A0ED0 + 12) & 1) == 0 )
    return;
  if ( *(_DWORD *)(v2 + 84) == 1023 )
  {
    v3 = sub_300067B0(
           *(_DWORD *)(v2 + 172),
           v2 + 20,
           *(float *)(v2 + 816),
           30.0,
           *(float *)(v2 + 872),
           v2 + 964,
           v2 + 968,
           v2 + 972,
           1,
           0,
           dword_301A0D50 != 0 ? (unsigned int)&flt_301A0D68 : 0,
           *(_DWORD *)(dword_301A0ED0 + 244),
           *(_DWORD *)(dword_301A0ED0 + 240),
           0,
           60.0);
    v1 = dword_301A0ED0;
    if ( !v3 )
    {
      v4 = *(_DWORD *)dword_301A0ED0;
      *(_DWORD *)(v4 + 4 * (*(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 132) & 3) + 136) = 141;
      *(_DWORD *)(v4 + 4 * ((*(_DWORD *)(v4 + 132))++ & 3) + 152) = 0;
      *(_DWORD *)(*(_DWORD *)v1 + 12) |= 0x8000u;
    }
  }
  else
  {
    if ( !dword_301A0D50 )
    {
LABEL_10:
      v16 = 0.0;
      goto LABEL_11;
    }
    a1 = flt_301A0D70;
    if ( flt_301A0D70 < 0.69999999 )
    {
      *(_DWORD *)(v2 + 4 * (*(_DWORD *)(v2 + 132) & 3) + 136) = 141;
      *(_DWORD *)(v2 + 4 * ((*(_DWORD *)(v2 + 132))++ & 3) + 152) = 0;
    }
  }
  if ( !dword_301A0D50 )
    goto LABEL_10;
  sub_3003ED60(*(float *)(*(_DWORD *)v1 + 872), (int)&flt_301A0D68);
  v16 = a1;
LABEL_11:
  v5 = *(_DWORD *)v1;
  v12 = v16 - *(float *)(*(_DWORD *)v1 + 876);
  v14 = sub_3003DB10(v12);
  v6 = v14;
  if ( v14 != 0.0 )
  {
    *(float *)&v18 = flt_301A0D44 * 70.0;
    if ( COERCE_FLOAT(LODWORD(v14) & 0x7FFFFFFF) <= (double)*(float *)&v18 )
    {
      v7 = v14;
    }
    else
    {
      v20 = (float)(1 - 2 * (v14 < 0.0));
      v7 = v20 * *(float *)&v18;
    }
    *(float *)(v5 + 876) = v7 + *(float *)(v5 + 876);
    v6 = sub_3003DBF0(*(float *)(*(_DWORD *)v1 + 876));
    *(float *)(v8 + 876) = v6;
  }
  if ( dword_301A0D50 )
  {
    sub_3003ED60(*(float *)(*(_DWORD *)v1 + 196), (int)&flt_301A0D68);
    v17 = v6;
  }
  else
  {
    v17 = 0.0;
  }
  v9 = *(_DWORD *)v1;
  v13 = v17 - *(float *)(*(_DWORD *)v1 + 880);
  v15 = sub_3003DB10(v13);
  if ( v15 != 0.0 )
  {
    *(float *)&v19 = flt_301A0D44 * 70.0;
    if ( COERCE_FLOAT(LODWORD(v15) & 0x7FFFFFFF) <= (double)*(float *)&v19 )
    {
      v10 = v15;
    }
    else
    {
      v21 = (float)(1 - 2 * (v15 < 0.0));
      v10 = v21 * *(float *)&v19;
    }
    *(float *)(v9 + 880) = v10 + *(float *)(v9 + 880);
    v11 = *(_DWORD *)v1;
    *(float *)(v11 + 880) = sub_3003DBF0(*(float *)(v11 + 880));
  }
}
// 3000C914: variable 'v8' is possibly undefined
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0D50: using guessed type int dword_301A0D50;
// 301A0D68: using guessed type float flt_301A0D68;
// 301A0D70: using guessed type float flt_301A0D70;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000CA00) --------------------------------------------------------
int sub_3000CA00()
{
  int result; // eax

  result = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12);
  if ( (result & 1) != 0 )
  {
    result |= 0x400u;
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12) = result;
  }
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000CA20) --------------------------------------------------------
int sub_3000CA20()
{
  _BYTE *v0; // ecx
  int result; // eax
  int v2; // edx
  int v3; // ecx

  v0 = (_BYTE *)dword_301A0ED0;
  *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12) &= 0xFFFFFF7F;
  result = *(_DWORD *)v0;
  if ( *(int *)(*(_DWORD *)v0 + 4) < 6 && (v0[8] & 0x10) != 0 )
  {
    v2 = *(_DWORD *)(result + 12);
    if ( (v2 & 1) == 0 && (v2 & 0x20) != 0 )
    {
      v3 = *(_DWORD *)(result + 180);
      if ( v3 != 5 && v3 != 7 && v3 != 9 && v3 != 8 && v3 != 6 )
        *(_DWORD *)(result + 12) = v2 | 0x80;
    }
  }
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000CA80) --------------------------------------------------------
int *sub_3000CA80()
{
  int v0; // ebp
  int v1; // ebx
  int *result; // eax
  unsigned int v3; // edi
  int v4; // esi
  int v5; // ecx
  double v6; // st7
  double v7; // st7
  int v8; // ecx
  double v9; // st7
  double v10; // st6
  _DWORD *v11; // edi
  int *v12; // esi
  int v13; // eax
  float v14; // [esp+8h] [ebp-6Ch]
  int v15; // [esp+Ch] [ebp-68h]
  int v16; // [esp+14h] [ebp-60h] BYREF
  int v17; // [esp+18h] [ebp-5Ch]
  float v18; // [esp+1Ch] [ebp-58h]
  float v19; // [esp+20h] [ebp-54h] BYREF
  float v20; // [esp+24h] [ebp-50h]
  float v21; // [esp+28h] [ebp-4Ch]
  float v22; // [esp+2Ch] [ebp-48h] BYREF
  float v23; // [esp+30h] [ebp-44h]
  float v24; // [esp+34h] [ebp-40h]
  int v25[3]; // [esp+38h] [ebp-3Ch] BYREF
  float v26[7]; // [esp+44h] [ebp-30h] BYREF
  char v27; // [esp+60h] [ebp-14h]

  v0 = dword_301A0ED0;
  v1 = *(_DWORD *)dword_301A0ED0;
  if ( !*(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 16) || (result = *(int **)(v1 + 12), (BYTE1(result) & 3) == 0) )
  {
    v14 = 8.0;
    if ( !dword_301A0D4C )
      v14 = 30.0;
    v3 = *(_DWORD *)(v1 + 12);
    v4 = (v3 >> 4) & 1;
    if ( v4 && *(_DWORD *)(v1 + 84) == 1023 )
    {
      v15 = 1;
      *(float *)&v16 = -*(float *)(v1 + 88);
      *(float *)&v17 = -*(float *)(v1 + 92);
      v18 = -*(float *)(v1 + 96);
    }
    else
    {
      v15 = 0;
      v16 = dword_301A0D20;
      v17 = dword_301A0D24;
      v18 = 0.0;
      sub_3003B3D0((float *)&v16);
      v4 = (v3 >> 4) & 1;
    }
    *(_DWORD *)(v1 + 12) = v3 & 0xFFFFFFEF;
    result = *(int **)v0;
    if ( *(int *)(*(_DWORD *)v0 + 4) >= 6 )
    {
      result[21] = 1023;
      dword_301A0D50 = 0;
      dword_301A0D54 = 0;
      dword_301A0D4C = 0;
      return result;
    }
    v5 = result[51];
    if ( (v5 == result[208] || v5 != result[207]) && *(_DWORD *)(v0 + 4) - result[25] >= 300 )
    {
      v25[0] = *(_DWORD *)(v0 + 192);
      v6 = *(float *)(v0 + 196);
      v25[2] = 1090519040;
      *(float *)v25 = *(float *)v25 + 6.0;
      *(float *)&v25[1] = v6 + 6.0;
      v19 = *(float *)(v0 + 204);
      v20 = *(float *)(v0 + 208);
      v7 = *(float *)(v0 + 212);
      v21 = *(float *)(v0 + 212);
      v19 = v19 - 6.0;
      v20 = v20 - 6.0;
      if ( v7 < 8.0 )
        v21 = 8.0;
      v22 = *(float *)&v16 * v14 + *(float *)(*(_DWORD *)v0 + 20);
      v23 = *(float *)&v17 * v14 + *(float *)(*(_DWORD *)v0 + 24);
      v24 = v18 * v14 + *(float *)(*(_DWORD *)v0 + 28);
      sub_30007950(
        *(_DWORD *)(v0 + 52),
        (int)v26,
        *(_DWORD *)v0 + 20,
        (int)v25,
        (int)&v19,
        (int)&v22,
        *(_DWORD *)(*(_DWORD *)v0 + 172));
      if ( v26[0] < 1.0 && (v27 & 8) != 0 )
      {
        result = (int *)dword_301A0ED0;
        if ( dword_301A0D4C && *(char *)(dword_301A0ED0 + 24) <= 0 )
        {
LABEL_26:
          if ( v15 )
          {
            v11 = (_DWORD *)*result;
            if ( *(int *)(*result + 4) < 6 )
            {
              result = (int *)(Destination + 131216);
              if ( *((_DWORD *)Destination + 32804) )
              {
                result = sub_30002F60(result, v11[43]);
                v12 = result;
                if ( result )
                {
                  result = (int *)result[28];
                  if ( result )
                  {
                    v13 = rand();
                    result = (int *)sub_300030C0((__int16 *)&v12[4 * (v13 % v12[28]) + 29], v11, 1, 0, 1);
                  }
                }
              }
            }
          }
          return result;
        }
        *(float *)(*(_DWORD *)dword_301A0ED0 + 88) = v26[4];
        *(float *)(*result + 92) = v26[5];
        *(float *)(*result + 96) = v26[6];
        if ( v4 )
        {
LABEL_24:
          result = (int *)*result;
          result[3] |= 0x10u;
          return result;
        }
        v8 = *result;
        v9 = -*(float *)(*result + 88);
        v10 = -*(float *)(*result + 92);
        v18 = -*(float *)(*result + 96);
        v22 = v9 * v14 + *(float *)(v8 + 20);
        v23 = v10 * v14 + *(float *)(*result + 24);
        v24 = v18 * v14 + *(float *)(*result + 28);
        sub_30007950(result[13], (int)v26, *result + 20, (int)v25, (int)&v19, (int)&v22, *(_DWORD *)(*result + 172));
        if ( v26[0] < 1.0 && (v27 & 8) != 0 )
        {
          result = (int *)dword_301A0ED0;
          goto LABEL_24;
        }
      }
      result = (int *)dword_301A0ED0;
      goto LABEL_26;
    }
  }
  return result;
}
// 301A0D20: using guessed type int dword_301A0D20;
// 301A0D24: using guessed type int dword_301A0D24;
// 301A0D4C: using guessed type int dword_301A0D4C;
// 301A0D50: using guessed type int dword_301A0D50;
// 301A0D54: using guessed type int dword_301A0D54;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000CDD0) --------------------------------------------------------
int sub_3000CDD0()
{
  int result; // eax
  char *v1; // ebp
  char v2; // al
  char v3; // al
  int v4; // ecx
  double v6; // st7
  unsigned __int8 v7; // c0
  unsigned __int8 v8; // c3
  int v9; // ecx
  double v10; // st7
  int v11; // esi
  int v12; // ecx
  float v13; // [esp+0h] [ebp-3Ch]
  float v14; // [esp+14h] [ebp-28h]
  float v15; // [esp+14h] [ebp-28h]
  float v16; // [esp+14h] [ebp-28h]
  float v17; // [esp+14h] [ebp-28h]
  float v18; // [esp+14h] [ebp-28h]
  float v19; // [esp+18h] [ebp-24h]
  float v20; // [esp+18h] [ebp-24h]
  float v21; // [esp+18h] [ebp-24h]
  float v22; // [esp+18h] [ebp-24h]
  float v23; // [esp+18h] [ebp-24h]
  float v24; // [esp+18h] [ebp-24h]
  float v25; // [esp+1Ch] [ebp-20h]
  float v26; // [esp+1Ch] [ebp-20h]
  float v27; // [esp+1Ch] [ebp-20h]
  float v28; // [esp+1Ch] [ebp-20h]
  float v29; // [esp+1Ch] [ebp-20h]
  double v30; // [esp+1Ch] [ebp-20h]
  float v31; // [esp+24h] [ebp-18h] BYREF
  float v32; // [esp+28h] [ebp-14h]
  float v33; // [esp+30h] [ebp-Ch] BYREF
  float v34; // [esp+34h] [ebp-8h]
  float v35; // [esp+38h] [ebp-4h]

  if ( sub_30008360() )
  {
    sub_300086A0();
    result = dword_301A0ED0;
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 100) = *(_DWORD *)(dword_301A0ED0 + 4);
    return result;
  }
  v14 = (flt_301A0D28 + 0.25) * 2.5;
  if ( v14 <= 1.0 )
  {
    if ( v14 < -1.0 )
      v14 = -1.0;
  }
  else
  {
    v14 = 1.0;
  }
  flt_301A0D28 = 0.0;
  sub_3003B3D0((float *)&dword_301A0D20);
  flt_301A0D34 = 0.0;
  sub_3003B600(&flt_301A0D2C, &v33);
  v1 = (char *)dword_301A0ED0;
  sub_3003E3D0((float *)(*(_DWORD *)dword_301A0ED0 + 88), &flt_301A0D2C, &v33);
  v19 = sub_30007D70(v1 + 4);
  v2 = v1[24];
  v35 = 0.0;
  v34 = 0.0;
  v33 = 0.0;
  if ( v2 )
  {
    v25 = (float)v2;
    v35 = v25 * 0.5 * v19 * v14;
  }
  v3 = v1[25];
  if ( v3 )
  {
    v26 = (float)v3;
    v20 = v26 * v19 * 0.2;
    v33 = v20 * flt_301A0D2C;
    v34 = v20 * flt_301A0D30;
    v35 = v20 * flt_301A0D34 + v35;
  }
  v27 = sub_3003B600(&v33, &v31);
  sub_30007CB0(&v31, v27, 9.0);
  if ( !v1[24] )
  {
    v4 = *(_DWORD *)v1;
    v6 = (double)*(int *)(*(_DWORD *)v1 + 60);
    if ( v7 | v8 )
    {
      v29 = v6;
      *(float *)(v4 + 40) = v29 * flt_301A0D44 + *(float *)(v4 + 40);
      v9 = *(_DWORD *)v1;
      if ( *(float *)(*(_DWORD *)v1 + 40) <= 0.0 )
        goto LABEL_17;
    }
    else
    {
      v28 = v6;
      *(float *)(v4 + 40) = *(float *)(v4 + 40) - v28 * flt_301A0D44;
      v9 = *(_DWORD *)v1;
      if ( *(float *)(*(_DWORD *)v1 + 40) >= 0.0 )
        goto LABEL_17;
    }
    *(_DWORD *)(v9 + 40) = 0;
  }
LABEL_17:
  if ( !v1[25] )
  {
    v31 = flt_301A0D2C;
    v32 = flt_301A0D30;
    sub_3003B460(&v31);
    v15 = v32 * *(float *)(*(_DWORD *)v1 + 36) + v31 * *(float *)(*(_DWORD *)v1 + 32);
    if ( v15 != 0.0 )
    {
      v21 = -v15;
      *(float *)(*(_DWORD *)v1 + 32) = v21 * v31 + *(float *)(*(_DWORD *)v1 + 32);
      *(float *)(*(_DWORD *)v1 + 36) = v21 * v32 + *(float *)(*(_DWORD *)v1 + 36);
      v22 = 16.0 * flt_301A0D44 * v15;
      v30 = fabs(v22);
      if ( fabs(v15) > v30 )
      {
        if ( v30 < 1.0 )
          v22 = (float)(1 - 2 * (v22 < 0.0));
        v16 = v15 - v22;
        *(float *)(*(_DWORD *)v1 + 32) = v16 * v31 + *(float *)(*(_DWORD *)v1 + 32);
        *(float *)(*(_DWORD *)v1 + 36) = v16 * v32 + *(float *)(*(_DWORD *)v1 + 36);
      }
    }
  }
  if ( !dword_301A0D4C )
  {
    v17 = *(float *)(*(_DWORD *)v1 + 92) * *(float *)(*(_DWORD *)v1 + 36)
        + *(float *)(*(_DWORD *)v1 + 88) * *(float *)(*(_DWORD *)v1 + 32);
    v10 = v17;
    v18 = -500.0;
    v23 = -v10;
    *(float *)(*(_DWORD *)v1 + 32) = v23 * *(float *)(*(_DWORD *)v1 + 88) + *(float *)(*(_DWORD *)v1 + 32);
    *(float *)(*(_DWORD *)v1 + 36) = v23 * *(float *)(*(_DWORD *)v1 + 92) + *(float *)(*(_DWORD *)v1 + 36);
    if ( v35 <= 0.0 )
      v18 = -250.0;
    *(float *)(*(_DWORD *)v1 + 32) = v18 * *(float *)(*(_DWORD *)v1 + 88) + *(float *)(*(_DWORD *)v1 + 32);
    *(float *)(*(_DWORD *)v1 + 36) = v18 * *(float *)(*(_DWORD *)v1 + 92) + *(float *)(*(_DWORD *)v1 + 36);
  }
  sub_3000E240(0);
  v11 = *(_DWORD *)dword_301A0ED0;
  v24 = sub_3003BA90((float *)(*(_DWORD *)dword_301A0ED0 + 88)) + 180.0;
  v13 = v24 - *(float *)(v11 + 196);
  v12 = (unsigned __int64)sub_3003DB10(v13);
  if ( (int)abs32(v12) > 75 )
    LOBYTE(v12) = v12 <= 0 ? -75 : 75;
  result = (char)v12;
  *(_DWORD *)(v11 + 124) = (char)v12;
  return result;
}
// 3000CF5C: variable 'v7' is possibly undefined
// 3000CF5C: variable 'v8' is possibly undefined
// 301A0D20: using guessed type int dword_301A0D20;
// 301A0D28: using guessed type float flt_301A0D28;
// 301A0D2C: using guessed type float flt_301A0D2C;
// 301A0D30: using guessed type float flt_301A0D30;
// 301A0D34: using guessed type float flt_301A0D34;
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0D4C: using guessed type int dword_301A0D4C;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000D1B0) --------------------------------------------------------
void __usercall sub_3000D1B0(int a1@<edi>, float a2)
{
  int v3; // esi
  int v4; // edx
  char v5; // al
  char v6; // al
  int v7; // esi
  int v8; // ecx
  char v9; // al
  char v10; // dl
  char v11; // al
  char v12; // dl
  int v13; // eax
  int v14; // edx
  int v15; // eax
  int v16; // ecx
  int v17; // ecx
  unsigned int v18; // ecx
  _DWORD *v19; // eax
  int v20; // ecx
  int v21; // eax
  double v22; // st7
  int v23; // ecx
  _BYTE *v24; // eax
  char v25; // cl
  int v26; // ecx
  unsigned int v27; // edx
  int v28; // ecx
  int v29; // edx
  unsigned __int8 v31; // c0
  unsigned __int8 v32; // c3
  float v33; // [esp+10h] [ebp-8h]
  float v34; // [esp+14h] [ebp-4h]
  int v35; // [esp+1Ch] [ebp+4h]

  sub_300035B0((_BYTE *)LODWORD(a2));
  v3 = *(_DWORD *)dword_300F0FB8;
  *(_BYTE *)(LODWORD(a2) + 216) = 0;
  *(_BYTE *)(LODWORD(a2) + 217) = 0;
  v4 = *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 12);
  dword_301A0ED0 = LODWORD(a2);
  *(_DWORD *)dword_300F0FB8 = v3 + 1;
  if ( (v4 & 0x4000) != 0 )
  {
    v5 = *(_BYTE *)(LODWORD(a2) + 9) & 0xC2;
    *(_BYTE *)(LODWORD(a2) + 8) = 0;
    *(_BYTE *)(LODWORD(a2) + 9) = v5;
    *(_BYTE *)(LODWORD(a2) + 24) = 0;
    *(_BYTE *)(LODWORD(a2) + 25) = 0;
    *(_BYTE *)(LODWORD(a2) + 26) = 0;
  }
  v6 = *(_BYTE *)(LODWORD(a2) + 8);
  if ( (v6 & 2) != 0 )
  {
    *(_BYTE *)(LODWORD(a2) + 8) = v6 & 0x12;
    *(_BYTE *)(LODWORD(a2) + 9) &= 0xC2u;
    *(_BYTE *)(LODWORD(a2) + 24) = 0;
    *(_BYTE *)(LODWORD(a2) + 25) = 0;
    *(_BYTE *)(LODWORD(a2) + 26) = 0;
  }
  *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 12) &= 0xFFFF7FFF;
  if ( *(int *)(*(_DWORD *)LODWORD(a2) + 4) >= 6 )
    *(_DWORD *)(LODWORD(a2) + 52) &= 0xFDFFFFFF;
  v7 = *(_DWORD *)LODWORD(a2);
  v8 = *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 12);
  if ( (v8 & 1) == 0 )
  {
LABEL_19:
    *(_DWORD *)(v7 + 12) = v8 & 0xFFFFFBFF;
    goto LABEL_20;
  }
  v9 = *(_BYTE *)(LODWORD(a2) + 24);
  v10 = *(_BYTE *)(LODWORD(a2) + 48);
  if ( v9 == v10 || fabs((double)v10) >= fabs((double)v9) )
  {
    v11 = *(_BYTE *)(LODWORD(a2) + 25);
    v12 = *(_BYTE *)(LODWORD(a2) + 49);
    if ( v11 == v12 || fabs((double)v12) >= fabs((double)v11) )
    {
      if ( (v8 & 0x20) != 0 )
        goto LABEL_20;
      v13 = *(_DWORD *)(v7 + 180);
      if ( v13 )
      {
        if ( v13 != 1 && v13 != 2 && v13 != 5 )
          goto LABEL_20;
      }
      goto LABEL_19;
    }
  }
  if ( sub_30010C00() )
  {
    *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 12) &= 0xFFFFFBFF;
    *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 12) &= 0xFFFFFFDF;
  }
LABEL_20:
  v14 = dword_300F0FB4;
  dword_301A0DA8 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 176));
  v15 = *(_DWORD *)LODWORD(a2);
  v16 = *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 204);
  if ( v16 == *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 832) )
    v35 = 2;
  else
    v35 = v16 == *(_DWORD *)(v15 + 828);
  if ( (*(_BYTE *)(v15 + 12) & 0x20) != 0 && v35 == 1 )
  {
    *(_BYTE *)(LODWORD(a2) + 24) = 0;
    *(_BYTE *)(LODWORD(a2) + 25) = 0;
  }
  v17 = *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 128);
  if ( (*(_BYTE *)(LODWORD(a2) + 8) & 2) != 0 )
    v18 = v17 | 0x40000;
  else
    v18 = v17 & 0xFFFBFFFF;
  *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 128) = v18;
  *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 128) &= 0xFFFFFBFF;
  v19 = *(_DWORD **)LODWORD(a2);
  if ( *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 4) != 5 && (v19[3] & 0x800) == 0 )
  {
    v20 = v19[45];
    if ( (!v20 || v20 == 3)
      && v19[*(_DWORD *)(*(_DWORD *)(v14 + 4 * v19[44]) + 424) + 131]
      && (*(_BYTE *)(LODWORD(a2) + 8) & 1) != 0 )
    {
      v19[32] |= 0x400u;
    }
  }
  if ( *(int *)(*(_DWORD *)LODWORD(a2) + 4) < 6 && (*(_BYTE *)(LODWORD(a2) + 8) & 1) == 0 )
    *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 12) &= 0xFFFFF7FF;
  memset(&dword_301A0D20, 0, 0x8Cu);
  v21 = *(_DWORD *)(LODWORD(a2) + 4) - **(_DWORD **)LODWORD(a2);
  dword_301A0D48 = v21;
  if ( v21 >= 1 )
  {
    if ( v21 > 200 )
      dword_301A0D48 = 200;
  }
  else
  {
    dword_301A0D48 = 1;
  }
  **(_DWORD **)LODWORD(a2) = *(_DWORD *)(LODWORD(a2) + 4);
  dword_301A0D8C = *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 20);
  v22 = (double)dword_301A0D48 * 0.001;
  dword_301A0D90 = *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 24);
  dword_301A0D94 = *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 28);
  dword_301A0D98 = *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 32);
  dword_301A0D9C = *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 36);
  v23 = *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 40);
  flt_301A0D44 = v22;
  dword_301A0DA0 = v23;
  dword_301A0DA8 = *(_DWORD *)(v14 + 4 * *(_DWORD *)(*(_DWORD *)LODWORD(a2) + 176));
  sub_30011F30();
  sub_3000BCC0(
    *(_DWORD *)LODWORD(a2),
    LODWORD(a2) + 4,
    *(void (__cdecl **)(float *, float *, int *, int *, float *, int, int))(LODWORD(a2) + 244));
  sub_3003BEA0((float *)(*(_DWORD *)dword_301A0ED0 + 192), flt_301A0D38, &flt_301A0D2C, (float *)&dword_301A0D20);
  v24 = (_BYTE *)dword_301A0ED0;
  if ( *(char *)(dword_301A0ED0 + 26) < 10 )
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12) &= 0xFFFFFFF7;
  v25 = v24[24];
  if ( v25 < 0 )
  {
    v26 = *(_DWORD *)v24;
    v27 = *(_DWORD *)(*(_DWORD *)v24 + 12) | 0x40;
LABEL_50:
    *(_DWORD *)(v26 + 12) = v27;
    goto LABEL_51;
  }
  if ( v25 > 0 || v24[25] )
  {
    v26 = *(_DWORD *)v24;
    v27 = *(_DWORD *)(*(_DWORD *)v24 + 12) & 0xFFFFFFBF;
    goto LABEL_50;
  }
LABEL_51:
  if ( *(int *)(*(_DWORD *)v24 + 4) >= 6 )
  {
    v24[24] = 0;
    v24[25] = 0;
    v24[26] = 0;
  }
  if ( v35 == 1 && (*(_DWORD *)(*(_DWORD *)v24 + 12) & 0x400) != 0 )
  {
    v24[24] = 0;
    v24[25] = 0;
  }
  v28 = *(_DWORD *)v24;
  switch ( *(_DWORD *)(*(_DWORD *)v24 + 4) )
  {
    case 1:
    case 7:
      *(_DWORD *)(v28 + 12) &= 0xFFFFFFEF;
      *(_DWORD *)(*(_DWORD *)v24 + 84) = 1023;
      dword_301A0D50 = 0;
      dword_301A0D54 = 0;
      dword_301A0D4C = 0;
      sub_300109A0();
      sub_3000CA20();
      sub_3000A600();
      sub_3000B8E0();
      sub_3000B150();
      sub_300129A0();
      return;
    case 2:
      *(_DWORD *)(v28 + 12) &= 0xFFFFFFEF;
      sub_300109A0();
      sub_3000CA20();
      sub_30008D10();
      goto LABEL_58;
    case 3:
      *(_DWORD *)(v28 + 12) &= 0xFFFFFFEF;
      sub_300109A0();
      sub_3000CA20();
      sub_30008EF0();
      goto LABEL_58;
    case 4:
      *(_DWORD *)(v28 + 12) &= 0xFFFFFFEF;
      sub_300109A0();
      sub_3000CA20();
      sub_3000A600();
      sub_30008570();
LABEL_58:
      sub_3000B8E0();
      break;
    case 5:
      *(_DWORD *)(v28 + 12) &= 0xFFFFFFEF;
      break;
    default:
      if ( (*(_DWORD *)(v28 + 128) & 0xC000) != 0 )
      {
        *(_DWORD *)(v28 + 12) &= 0xFFFFFFEF;
        *(_DWORD *)(*(_DWORD *)v24 + 84) = 1023;
        dword_301A0D50 = 0;
        dword_301A0D54 = 0;
        dword_301A0D4C = 0;
        sub_300109A0();
        sub_3000CA20();
        sub_3000A600();
        sub_3000B8E0();
        sub_3000B150();
      }
      else
      {
        sub_30009D80();
        dword_301A0DA4 = *(unsigned __int8 *)(LODWORD(a2) + 217);
        sub_3000A600();
        sub_30009A50(a1, 6);
        sub_300109A0();
        sub_3000CA20();
        sub_3000C710(v22);
        if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 4) == 6 )
          sub_30008C70();
        sub_3000CA80();
        sub_3000B8E0();
        if ( (*(_BYTE *)(*(_DWORD *)dword_301A0ED0 + 12) & 0x10) != 0 )
        {
          sub_3000CDD0();
        }
        else if ( dword_301A0D4C )
        {
          sub_30008810(a2);
        }
        else
        {
          sub_300086A0();
        }
        sub_30009A50(a1, 6);
        sub_30009D80();
        sub_3000B150();
        sub_300129A0();
        sub_3000B6C0();
        sub_3000B850();
        v29 = dword_301A0ED0;
        v33 = *(float *)(*(_DWORD *)dword_301A0ED0 + 24) - *(float *)&dword_301A0D90;
        v34 = *(float *)(*(_DWORD *)dword_301A0ED0 + 28) - *(float *)&dword_301A0D94;
        if ( !(v31 | v32) )
        {
          *(float *)(*(_DWORD *)dword_301A0ED0 + 32) = 1.0
                                                     / flt_301A0D44
                                                     * (*(float *)(*(_DWORD *)dword_301A0ED0 + 20)
                                                      - *(float *)&dword_301A0D8C);
          *(float *)(*(_DWORD *)v29 + 36) = 1.0 / flt_301A0D44 * v33;
          *(float *)(*(_DWORD *)v29 + 40) = 1.0 / flt_301A0D44 * v34;
        }
        dword_30076898(101);
      }
      break;
  }
}
// 3000D4DB: conditional instruction was optimized away because of 'cl.1==0'
// 3000D731: variable 'v31' is possibly undefined
// 3000D731: variable 'v32' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0D20: using guessed type int dword_301A0D20;
// 301A0D2C: using guessed type float flt_301A0D2C;
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0D48: using guessed type int dword_301A0D48;
// 301A0D4C: using guessed type int dword_301A0D4C;
// 301A0D50: using guessed type int dword_301A0D50;
// 301A0D54: using guessed type int dword_301A0D54;
// 301A0D8C: using guessed type int dword_301A0D8C;
// 301A0D90: using guessed type int dword_301A0D90;
// 301A0D94: using guessed type int dword_301A0D94;
// 301A0D98: using guessed type int dword_301A0D98;
// 301A0D9C: using guessed type int dword_301A0D9C;
// 301A0DA0: using guessed type int dword_301A0DA0;
// 301A0DA4: using guessed type int dword_301A0DA4;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000D7B0) --------------------------------------------------------
int *__usercall sub_3000D7B0@<eax>(float a1@<esi>)
{
  int *result; // eax
  int v2; // edi
  bool v3; // zf
  int v4; // ecx
  int v5; // eax

  result = **(int ***)LODWORD(a1);
  v2 = *(_DWORD *)(LODWORD(a1) + 4);
  if ( v2 >= (int)result )
  {
    if ( v2 > (int)(result + 250) )
      **(_DWORD **)LODWORD(a1) = v2 - 1000;
    *(_DWORD *)(LODWORD(a1) + 60) = 0;
    result = *(int **)LODWORD(a1);
    v3 = **(_DWORD **)LODWORD(a1) == v2;
    dword_301A0ED0 = LODWORD(a1);
    if ( !v3 )
    {
      do
      {
        v4 = *result;
        v5 = v2 - *result;
        if ( *(_DWORD *)(LODWORD(a1) + 224) )
        {
          if ( v5 > *(_DWORD *)(LODWORD(a1) + 228) )
            v5 = *(_DWORD *)(LODWORD(a1) + 228);
        }
        else if ( v5 > 66 )
        {
          v5 = 66;
        }
        *(_DWORD *)(LODWORD(a1) + 4) = v5 + v4;
        sub_3000D1B0(v2, a1);
        result = *(int **)LODWORD(a1);
        if ( (*(_BYTE *)(*(_DWORD *)LODWORD(a1) + 12) & 8) != 0 )
          *(_BYTE *)(LODWORD(a1) + 26) = 20;
      }
      while ( **(_DWORD **)LODWORD(a1) != v2 );
    }
  }
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000D870) --------------------------------------------------------
int __cdecl sub_3000D870(float a1)
{
  return (int)(a1 + 9.313225746154785e-10);
}

//----- (3000D8A0) --------------------------------------------------------
int __cdecl sub_3000D8A0(_DWORD *a1, _DWORD *a2)
{
  int v2; // eax
  int result; // eax
  int v4; // ecx

  if ( (*(_BYTE *)(*(_DWORD *)dword_301A0ED0 + 12) & 1) == 0 )
    return 1;
  v2 = *(_DWORD *)dword_301A0ED0;
  result = sub_300067B0(
             *(_DWORD *)(v2 + 172),
             v2 + 20,
             *(float *)(v2 + 816),
             30.0,
             *(float *)(v2 + 872),
             v2 + 964,
             v2 + 968,
             v2 + 972,
             1,
             1,
             0,
             *(_DWORD *)(dword_301A0ED0 + 244),
             *(_DWORD *)(dword_301A0ED0 + 240),
             0,
             60.0);
  if ( !result )
  {
    v4 = dword_301A0ED0;
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 20) = *a1;
    *(_DWORD *)(*(_DWORD *)v4 + 24) = a1[1];
    *(_DWORD *)(*(_DWORD *)v4 + 28) = a1[2];
    *(_DWORD *)(*(_DWORD *)v4 + 32) = *a2;
    *(_DWORD *)(*(_DWORD *)v4 + 36) = a2[1];
    *(_DWORD *)(*(_DWORD *)v4 + 40) = a2[2];
  }
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000D980) --------------------------------------------------------
BOOL __cdecl PM_SlideMove(int a1)
{
  int *v1; // ebp
  int v2; // eax
  int v3; // edx
  float v4; // ecx
  float v5; // edx
  int v6; // ebx
  int v7; // eax
  int v8; // ecx
  _DWORD *v9; // edx
  int v10; // edi
  float *v11; // ecx
  float v12; // eax
  float v13; // edx
  float v14; // ecx
  int v15; // esi
  int v16; // edx
  float *v17; // ecx
  int v18; // ecx
  float *v19; // edx
  unsigned int v20; // ecx
  float *v21; // ebx
  double v23; // st7
  unsigned __int8 v24; // c0
  unsigned __int8 v25; // c2
  double v26; // st7
  double v28; // st7
  unsigned __int8 v29; // c0
  unsigned __int8 v30; // c2
  double v31; // st7
  int v32; // edx
  double v33; // st7
  float *v34; // edi
  double v36; // st7
  unsigned __int8 v37; // c0
  unsigned __int8 v38; // c2
  double v39; // st7
  double v41; // st7
  unsigned __int8 v42; // c0
  unsigned __int8 v43; // c2
  double v44; // st7
  int v45; // ecx
  float *v46; // edx
  int v47; // ecx
  float v49; // [esp+28h] [ebp-100h]
  float v50; // [esp+28h] [ebp-100h]
  float v51; // [esp+28h] [ebp-100h]
  float v52; // [esp+28h] [ebp-100h]
  float v53; // [esp+28h] [ebp-100h]
  float v54; // [esp+28h] [ebp-100h]
  float v55; // [esp+28h] [ebp-100h]
  float v56; // [esp+28h] [ebp-100h]
  float v57; // [esp+28h] [ebp-100h]
  float v58; // [esp+28h] [ebp-100h]
  float v59; // [esp+2Ch] [ebp-FCh]
  float v60; // [esp+2Ch] [ebp-FCh]
  float v61; // [esp+2Ch] [ebp-FCh]
  float v62; // [esp+2Ch] [ebp-FCh]
  float v63; // [esp+2Ch] [ebp-FCh]
  float v64; // [esp+2Ch] [ebp-FCh]
  float v65; // [esp+2Ch] [ebp-FCh]
  float v66; // [esp+2Ch] [ebp-FCh]
  float v67; // [esp+2Ch] [ebp-FCh]
  float v68; // [esp+2Ch] [ebp-FCh]
  float v69; // [esp+2Ch] [ebp-FCh]
  float v70; // [esp+2Ch] [ebp-FCh]
  float v71; // [esp+30h] [ebp-F8h]
  float v72; // [esp+30h] [ebp-F8h]
  int v73; // [esp+30h] [ebp-F8h]
  float v74; // [esp+34h] [ebp-F4h]
  float v75; // [esp+38h] [ebp-F0h]
  float v76; // [esp+3Ch] [ebp-ECh]
  float v77; // [esp+40h] [ebp-E8h]
  float v78; // [esp+44h] [ebp-E4h]
  float v79; // [esp+48h] [ebp-E0h]
  float v80; // [esp+4Ch] [ebp-DCh]
  int v81; // [esp+50h] [ebp-D8h]
  float v82; // [esp+54h] [ebp-D4h]
  float v83; // [esp+58h] [ebp-D0h]
  float v84; // [esp+5Ch] [ebp-CCh]
  float v85; // [esp+60h] [ebp-C8h] BYREF
  float v86; // [esp+64h] [ebp-C4h]
  float v87; // [esp+68h] [ebp-C0h]
  float v88; // [esp+6Ch] [ebp-BCh]
  int v89; // [esp+70h] [ebp-B8h]
  int v90; // [esp+74h] [ebp-B4h]
  int v91; // [esp+78h] [ebp-B0h]
  int v92; // [esp+7Ch] [ebp-ACh]
  float v93; // [esp+80h] [ebp-A8h]
  float *v94; // [esp+84h] [ebp-A4h]
  float *v95; // [esp+88h] [ebp-A0h]
  float v96[4]; // [esp+8Ch] [ebp-9Ch] BYREF
  float v97; // [esp+9Ch] [ebp-8Ch]
  float v98; // [esp+A0h] [ebp-88h]
  float v99; // [esp+A4h] [ebp-84h]
  unsigned __int16 v100; // [esp+B4h] [ebp-74h]
  char v101; // [esp+BAh] [ebp-6Eh]
  float v102[3]; // [esp+BCh] [ebp-6Ch] BYREF
  float v103; // [esp+C8h] [ebp-60h] BYREF
  float v104; // [esp+CCh] [ebp-5Ch] BYREF
  int v105[22]; // [esp+D0h] [ebp-58h] BYREF

  v1 = (int *)dword_301A0ED0;
  v2 = *(_DWORD *)dword_301A0ED0;
  v3 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 36);
  v91 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 32);
  v93 = *(float *)(v2 + 40);
  v92 = v3;
  if ( a1 )
  {
    v4 = *(float *)(v2 + 36);
    v77 = *(float *)(v2 + 32);
    v5 = *(float *)(v2 + 40);
    v88 = (float)*(int *)(v2 + 60);
    v78 = v4;
    v79 = v5 - v88 * flt_301A0D44;
    *(float *)(v2 + 40) = (v79 + *(float *)(v2 + 40)) * 0.5;
    v93 = v79;
    if ( dword_301A0D50 )
      sub_30007A60((float *)(*v1 + 32), &flt_301A0D68, (float *)(*v1 + 32), 1.001);
  }
  v80 = flt_301A0D44;
  if ( dword_301A0D50 )
  {
    v103 = flt_301A0D68;
    v104 = flt_301A0D6C;
    *(float *)v105 = flt_301A0D70;
    v6 = 1;
  }
  else
  {
    v6 = 0;
  }
  sub_3003B600((float *)(*v1 + 32), &v103 + 3 * v6);
  v81 = v6 + 1;
  v90 = 0;
  LODWORD(v88) = &v104 + 3 * v6 + 3;
  while ( 1 )
  {
    v102[0] = v80 * *(float *)(*v1 + 32) + *(float *)(*v1 + 20);
    v102[1] = v80 * *(float *)(*v1 + 36) + *(float *)(*v1 + 24);
    v102[2] = v80 * *(float *)(*v1 + 40) + *(float *)(*v1 + 28);
    sub_30007950(v1[13], (int)v96, *v1 + 20, (int)(v1 + 48), (int)(v1 + 51), (int)v102, *(_DWORD *)(*v1 + 172));
    if ( v101 )
    {
      *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 40) = 0;
      return 1;
    }
    v1 = (int *)dword_301A0ED0;
    if ( v96[0] > 0.0 )
    {
      *(float *)(*(_DWORD *)dword_301A0ED0 + 20) = v96[1];
      *(float *)(*v1 + 24) = v96[2];
      *(float *)(*v1 + 28) = v96[3];
    }
    if ( LODWORD(v96[0]) == 1065353216 )
    {
LABEL_60:
      if ( a1 )
      {
        *(float *)(*v1 + 32) = v77;
        *(float *)(*v1 + 36) = v78;
        *(float *)(*v1 + 40) = v79;
      }
      if ( *(_DWORD *)(*v1 + 16) )
      {
        v47 = v92;
        *(_DWORD *)(*v1 + 32) = v91;
        *(_DWORD *)(*v1 + 36) = v47;
        *(float *)(*v1 + 40) = v93;
      }
      return v90 != 0;
    }
    if ( v100 != 1022 )
    {
      v7 = v1[15];
      if ( v7 != 32 )
      {
        v8 = 0;
        if ( v7 <= 0 )
        {
LABEL_18:
          v1[v7 + 16] = v100;
          ++v1[15];
        }
        else
        {
          v9 = v1 + 16;
          while ( *v9 != v100 )
          {
            ++v8;
            ++v9;
            if ( v8 >= v7 )
              goto LABEL_18;
          }
        }
      }
    }
    v80 = v80 - v96[0] * v80;
    if ( v81 >= 8 )
    {
      if ( v1[14] >= 2 )
      {
        Com_Printf("%i:MAX_CLIP_PLANES\n", *(_DWORD *)dword_300F0FB8);
        v1 = (int *)dword_301A0ED0;
      }
      *(_DWORD *)(*v1 + 40) = 0;
      *(_DWORD *)(*v1 + 36) = 0;
      *(_DWORD *)(*v1 + 32) = 0;
      return 1;
    }
    v10 = 0;
    if ( v81 <= 0 )
      break;
    v11 = &v104;
    while ( v99 * v11[1] + v97 * *(v11 - 1) + v98 * *v11 <= 0.99900001 )
    {
      ++v10;
      v11 += 3;
      if ( v10 >= v81 )
        goto LABEL_28;
    }
    if ( v1[14] >= 2 )
    {
      Com_Printf("%i:recollided with plane normal (%.2f, %.2f, %.2f)\n", *(_DWORD *)dword_300F0FB8, v97, v98, v99);
      v1 = (int *)dword_301A0ED0;
    }
    *(float *)(*v1 + 32) = v97 + *(float *)(*v1 + 32);
    *(float *)(*v1 + 36) = v98 + *(float *)(*v1 + 36);
    *(float *)(*v1 + 40) = v99 + *(float *)(*v1 + 40);
    if ( v10 >= v81 )
      break;
LABEL_59:
    if ( ++v90 >= 4 )
      goto LABEL_60;
  }
LABEL_28:
  v12 = v88;
  v13 = v98;
  *(float *)(LODWORD(v88) - 4) = v97;
  v14 = v99;
  *(float *)LODWORD(v12) = v13;
  v15 = v81 + 1;
  *(float *)(LODWORD(v12) + 4) = v14;
  v16 = 0;
  v81 = v15;
  LODWORD(v88) = LODWORD(v12) + 12;
  v89 = 0;
  if ( v15 <= 0 )
    goto LABEL_59;
  v17 = &v104;
  while ( 1 )
  {
    v71 = *(v17 - 1) * *(float *)(*v1 + 32) + v17[1] * *(float *)(*v1 + 40) + *v17 * *(float *)(*v1 + 36);
    if ( v71 < 0.1 )
      break;
    ++v16;
    v17 += 3;
    if ( v16 >= v15 )
    {
      v89 = v16;
      goto LABEL_59;
    }
  }
  v89 = v16;
  v72 = -v71;
  if ( v72 > (double)flt_301A0D88 )
    flt_301A0D88 = v72;
  v18 = 3 * v16;
  v19 = (float *)*v1;
  v20 = 4 * v18;
  v21 = (float *)((char *)&v103 + v20);
  v49 = *(float *)(*v1 + 32) * *(float *)((char *)&v103 + v20)
      + *(float *)(*v1 + 36) * *(float *)((char *)&v103 + v20 + 4)
      + *(float *)(*v1 + 40) * *(float *)&v105[v20 / 4];
  v23 = v49;
  if ( v24 | v25 )
    v26 = v23 * 1.001;
  else
    v26 = v23 / 1.001;
  v50 = v26;
  v59 = v50 * *v21;
  v74 = v19[8] - v59;
  v60 = v50 * v21[1];
  v75 = v19[9] - v60;
  v61 = v50 * v21[2];
  v76 = v19[10] - v61;
  v51 = v77 * *v21 + v79 * v21[2] + v78 * v21[1];
  v28 = v51;
  if ( v29 | v30 )
    v31 = v28 * 1.001;
  else
    v31 = v28 / 1.001;
  v52 = v31;
  v32 = 0;
  v33 = v52 * *v21;
  v73 = 0;
  v94 = (float *)&v105[v20 / 4];
  v62 = v33;
  v95 = (float *)((char *)&v104 + v20);
  v34 = &v104;
  v82 = v77 - v62;
  v63 = v52 * v21[1];
  v83 = v78 - v63;
  v64 = v52 * v21[2];
  v84 = v79 - v64;
  while ( 1 )
  {
    if ( v32 != v89 && v75 * *v34 + v74 * *(v34 - 1) + v76 * v34[1] < 0.1 )
    {
      v53 = v75 * *v34 + v74 * *(v34 - 1) + v76 * v34[1];
      v36 = v53;
      v39 = v37 | v38 ? v36 * 1.001 : v36 / 1.001;
      v54 = v39;
      v65 = v54 * *(v34 - 1);
      v74 = v74 - v65;
      v66 = v54 * *v34;
      v75 = v75 - v66;
      v67 = v54 * v34[1];
      v76 = v76 - v67;
      v55 = v83 * *v34 + v82 * *(v34 - 1) + v84 * v34[1];
      v41 = v55;
      v44 = v42 | v43 ? v41 * 1.001 : v41 / 1.001;
      v56 = v44;
      v68 = v56 * *(v34 - 1);
      v82 = v82 - v68;
      v69 = v56 * *v34;
      v83 = v83 - v69;
      v70 = v56 * v34[1];
      v84 = v84 - v70;
      if ( v74 * *v21 + v76 * *v94 + v75 * *v95 < 0.0 )
        break;
    }
LABEL_57:
    ++v32;
    v34 += 3;
    v73 = v32;
    if ( v32 >= v15 )
    {
      *(float *)(*v1 + 32) = v74;
      *(float *)(*v1 + 36) = v75;
      *(float *)(*v1 + 40) = v76;
      v77 = v82;
      v78 = v83;
      v79 = v84;
      goto LABEL_59;
    }
  }
  v85 = v21[1] * v34[1] - *v34 * v21[2];
  v86 = *(v34 - 1) * v21[2] - *v21 * v34[1];
  v87 = *v34 * *v21 - *(v34 - 1) * v21[1];
  sub_3003B3D0(&v85);
  v45 = 0;
  v46 = &v104;
  v57 = v87 * *(float *)(*v1 + 40) + v86 * *(float *)(*v1 + 36) + v85 * *(float *)(*v1 + 32);
  v74 = v85 * v57;
  v75 = v86 * v57;
  v76 = v87 * v57;
  v58 = v87 * v79 + v86 * v78 + v85 * v77;
  v82 = v85 * v58;
  v83 = v86 * v58;
  v84 = v87 * v58;
  while ( v45 == v89 || v45 == v73 || v76 * v46[1] + v74 * *(v46 - 1) + v75 * *v46 >= 0.1 )
  {
    ++v45;
    v46 += 3;
    if ( v45 >= v81 )
    {
      v32 = v73;
      v15 = v81;
      goto LABEL_57;
    }
  }
  *(_DWORD *)(*v1 + 40) = 0;
  *(_DWORD *)(*v1 + 36) = 0;
  *(_DWORD *)(*v1 + 32) = 0;
  return 1;
}
// 3000DD61: variable 'v24' is possibly undefined
// 3000DD61: variable 'v25' is possibly undefined
// 3000DDB9: variable 'v77' is possibly undefined
// 3000DDBF: variable 'v79' is possibly undefined
// 3000DDC8: variable 'v78' is possibly undefined
// 3000DDE5: variable 'v29' is possibly undefined
// 3000DDE5: variable 'v30' is possibly undefined
// 3000DEC2: variable 'v37' is possibly undefined
// 3000DEC2: variable 'v38' is possibly undefined
// 3000DF49: variable 'v42' is possibly undefined
// 3000DF49: variable 'v43' is possibly undefined
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0D50: using guessed type int dword_301A0D50;
// 301A0D68: using guessed type float flt_301A0D68;
// 301A0D6C: using guessed type float flt_301A0D6C;
// 301A0D70: using guessed type float flt_301A0D70;
// 301A0D88: using guessed type float flt_301A0D88;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000E240) --------------------------------------------------------
void __usercall sub_3000E240(int a1@<eax>)
{
  int v1; // ecx
  int v2; // edx
  int v4; // eax
  _DWORD *v5; // ecx
  int v6; // edx
  int v7; // eax
  BOOL v8; // eax
  int *v9; // edi
  int v10; // ecx
  BOOL v11; // edx
  int v12; // eax
  double v13; // st7
  int v14; // eax
  int v15; // ecx
  double v16; // st7
  int v17; // eax
  int v18; // eax
  float *v19; // ecx
  int v20; // ecx
  double v21; // st7
  _DWORD *v22; // edi
  long double v23; // st7
  int v24; // eax
  int v25; // ebx
  int v26; // eax
  int v27; // ebx
  double v28; // st7
  int v29; // esi
  int v30; // ebx
  int v31; // esi
  float v32; // [esp+20h] [ebp-90h]
  float v33; // [esp+20h] [ebp-90h]
  float v34; // [esp+20h] [ebp-90h]
  float v35; // [esp+20h] [ebp-90h]
  float v36; // [esp+20h] [ebp-90h]
  int v37; // [esp+20h] [ebp-90h]
  float v38; // [esp+24h] [ebp-8Ch]
  float v39; // [esp+28h] [ebp-88h]
  float v40; // [esp+2Ch] [ebp-84h]
  int v41; // [esp+30h] [ebp-80h]
  int v42; // [esp+34h] [ebp-7Ch]
  float v43; // [esp+38h] [ebp-78h] BYREF
  float v44; // [esp+3Ch] [ebp-74h]
  float v45; // [esp+40h] [ebp-70h]
  float v46; // [esp+44h] [ebp-6Ch]
  float v47; // [esp+48h] [ebp-68h]
  float v48; // [esp+4Ch] [ebp-64h]
  int v49; // [esp+50h] [ebp-60h] BYREF
  int v50; // [esp+54h] [ebp-5Ch]
  float v51; // [esp+58h] [ebp-58h]
  int v52; // [esp+5Ch] [ebp-54h]
  int v53; // [esp+60h] [ebp-50h]
  int v54; // [esp+64h] [ebp-4Ch]
  int v55; // [esp+68h] [ebp-48h] BYREF
  int v56; // [esp+6Ch] [ebp-44h]
  int v57; // [esp+70h] [ebp-40h]
  float v58; // [esp+74h] [ebp-3Ch] BYREF
  float v59; // [esp+78h] [ebp-38h]
  float v60; // [esp+7Ch] [ebp-34h]
  float v61; // [esp+80h] [ebp-30h] BYREF
  int v62; // [esp+84h] [ebp-2Ch]
  int v63; // [esp+88h] [ebp-28h]
  int v64; // [esp+8Ch] [ebp-24h]
  float v65[6]; // [esp+90h] [ebp-20h] BYREF
  unsigned __int16 v66; // [esp+A8h] [ebp-8h]

  v1 = dword_301A0ED0;
  v2 = *(_DWORD *)dword_301A0ED0;
  v4 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12);
  v39 = 0.0;
  v41 = 0;
  if ( (v4 & 0x10) != 0 )
  {
    *(_DWORD *)(v2 + 12) = v4 & 0xFFFFDFFF;
    v42 = 0;
    *(_DWORD *)(*(_DWORD *)v1 + 104) = 0;
  }
  else if ( dword_301A0D50 )
  {
    v42 = 1;
  }
  else
  {
    v42 = 0;
    if ( (v4 & 0x2000) != 0 && *(_DWORD *)(v2 + 16) )
    {
      *(_DWORD *)(v2 + 12) = v4 & 0xFFFFDFFF;
      *(_DWORD *)(*(_DWORD *)v1 + 104) = 0;
    }
  }
  v43 = *(float *)(*(_DWORD *)v1 + 20);
  v44 = *(float *)(*(_DWORD *)v1 + 24);
  v45 = *(float *)(*(_DWORD *)v1 + 28);
  v5 = *(_DWORD **)v1;
  v6 = v5[9];
  v55 = v5[8];
  v7 = v5[10];
  v56 = v6;
  v57 = v7;
  v8 = PM_SlideMove(a1);
  v9 = (int *)dword_301A0ED0;
  v10 = *(_DWORD *)dword_301A0ED0;
  v11 = v8;
  v12 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12);
  v40 = 10.0;
  if ( (v12 & 1) == 0 )
    v40 = 18.0;
  if ( *(_DWORD *)(v10 + 84) == 1023 )
  {
    if ( (v12 & 0x2000) != 0 && *(_DWORD *)(v10 + 16) )
    {
      *(_DWORD *)(v10 + 12) = v12 & 0xFFFFDFFF;
      *(_DWORD *)(*v9 + 104) = 0;
    }
    if ( v11
      && (v10 = *v9, (*(_DWORD *)(*v9 + 12) & 0x2000) != 0)
      && (v32 = *(float *)(v10 + 104) + 39.0, v45 < (double)v32) )
    {
      v40 = 18.0;
      if ( v45 + 18.0 > v32 )
      {
        v13 = v32 - v45;
        v40 = v13;
        if ( v13 < 1.0 )
          return;
      }
      v41 = 1;
    }
    else
    {
      v10 = *v9;
      if ( (*(_BYTE *)(*v9 + 12) & 0x10) == 0 || *(float *)(v10 + 40) <= 0.0 )
        return;
    }
  }
  v46 = *(float *)(v10 + 20);
  v47 = *(float *)(v10 + 24);
  v48 = *(float *)(v10 + 28);
  v33 = v46 - v43;
  v52 = *(_DWORD *)(v10 + 32);
  v14 = *(_DWORD *)(v10 + 36);
  v15 = *(_DWORD *)(v10 + 40);
  v53 = v14;
  v38 = v47 - v44;
  v54 = v15;
  if ( v11 )
  {
    v59 = v44;
    v58 = v43;
    v60 = v40 + v45 + 1.0;
    sub_30007950(v9[13], (int)&v61, (int)&v43, (int)(v9 + 48), (int)(v9 + 51), (int)&v58, *(_DWORD *)(*v9 + 172));
    v16 = (v40 + 1.0) * v61 - 1.0;
    v39 = v16;
    if ( v16 >= 1.0 )
    {
      v17 = dword_301A0ED0;
      *(float *)(*(_DWORD *)dword_301A0ED0 + 20) = v58;
      *(float *)(*(_DWORD *)v17 + 24) = v59;
      *(float *)(*(_DWORD *)v17 + 28) = v45 + v39;
      *(_DWORD *)(*(_DWORD *)v17 + 32) = v55;
      *(_DWORD *)(*(_DWORD *)v17 + 36) = v56;
      *(_DWORD *)(*(_DWORD *)v17 + 40) = v57;
      PM_SlideMove(a1);
      v9 = (int *)dword_301A0ED0;
    }
    else
    {
      v9 = (int *)dword_301A0ED0;
      if ( *(_DWORD *)(dword_301A0ED0 + 56) )
      {
        Com_Printf("%i:not enough step room\n", *(_DWORD *)dword_300F0FB8);
        v9 = (int *)dword_301A0ED0;
      }
      v39 = 0.0;
    }
  }
  if ( v42 || v39 != 0.0 )
  {
    v49 = *(_DWORD *)(*v9 + 20);
    v50 = *(_DWORD *)(*v9 + 24);
    v51 = *(float *)(*v9 + 28) - v39;
    if ( v42 )
      v51 = v51 - 9.0;
    sub_30007950(v9[13], (int)&v61, *v9 + 20, (int)(v9 + 48), (int)(v9 + 51), (int)&v49, *(_DWORD *)(*v9 + 172));
    if ( v66 < 0x40u )
    {
      v18 = dword_301A0ED0;
      *(float *)(*(_DWORD *)dword_301A0ED0 + 20) = v46;
      *(float *)(*(_DWORD *)v18 + 24) = v47;
      *(float *)(*(_DWORD *)v18 + 28) = v48;
      *(_DWORD *)(*(_DWORD *)v18 + 32) = v52;
      *(_DWORD *)(*(_DWORD *)v18 + 36) = v53;
      *(_DWORD *)(*(_DWORD *)v18 + 40) = v54;
      return;
    }
    v9 = (int *)dword_301A0ED0;
    if ( v61 >= 1.0 )
    {
      if ( v39 != 0.0 )
        *(float *)(*(_DWORD *)dword_301A0ED0 + 28) = *(float *)(*(_DWORD *)dword_301A0ED0 + 28) - v39;
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 20) = v62;
      *(_DWORD *)(*v9 + 24) = v63;
      *(_DWORD *)(*v9 + 28) = v64;
      sub_30007A60((float *)(*v9 + 32), v65, (float *)(*v9 + 32), 1.001);
    }
  }
  v19 = (float *)*v9;
  if ( v33 * *(float *)(*v9 + 32) + v38 * *(float *)(*v9 + 36) + 0.001 >= (*(float *)(*v9 + 20) - v43)
                                                                        * *(float *)(*v9 + 32)
                                                                        + (*(float *)(*v9 + 24) - v44)
                                                                        * *(float *)(*v9 + 36) )
    goto LABEL_41;
  if ( v41 )
  {
    if ( v19[26] + 39.0 > v19[7] )
    {
LABEL_50:
      if ( v41 )
      {
        v20 = *v9;
        if ( *(float *)(*v9 + 28) - v48 > 0.0 )
        {
          v21 = *(float *)(v20 + 104) + 39.0 - *(float *)(v20 + 28);
          if ( v21 >= 0.1 )
          {
            v34 = sqrt((double)*(int *)(v20 + 60) * (v21 + v21));
            if ( *(float *)(v20 + 40) > (double)v34 )
            {
              if ( v9[14] )
              {
                Com_Printf("%i:adjusted jump vel: %.1f -> %.1f\n", *(_DWORD *)dword_300F0FB8, *(float *)(v20 + 40), v34);
                v9 = (int *)dword_301A0ED0;
              }
              *(float *)(*v9 + 40) = v34;
            }
          }
          else
          {
            *(_DWORD *)(v20 + 40) = 0;
          }
        }
      }
      goto LABEL_58;
    }
LABEL_41:
    v19[5] = v46;
    *(float *)(*v9 + 24) = v47;
    *(float *)(*v9 + 28) = v48;
    *(_DWORD *)(*v9 + 32) = v52;
    *(_DWORD *)(*v9 + 36) = v53;
    *(_DWORD *)(*v9 + 40) = v54;
    if ( v9[14] > 1 )
    {
      if ( v41 )
        Com_Printf("%i:didn't use jump step results because it went too high\n", *(_DWORD *)dword_300F0FB8);
      else
        Com_Printf("%i:didn't use step results\n", *(_DWORD *)dword_300F0FB8);
      v9 = (int *)dword_301A0ED0;
    }
    if ( v42 )
    {
      v49 = *(_DWORD *)(*v9 + 20);
      v50 = *(_DWORD *)(*v9 + 24);
      v51 = *(float *)(*v9 + 28) - 9.0;
      sub_30007950(v9[13], (int)&v61, *v9 + 20, (int)(v9 + 48), (int)(v9 + 51), (int)&v49, *(_DWORD *)(*v9 + 172));
      v9 = (int *)dword_301A0ED0;
      if ( v61 < 1.0 )
      {
        *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 20) = v62;
        *(_DWORD *)(*v9 + 24) = v63;
        *(_DWORD *)(*v9 + 28) = v64;
        sub_30007A60((float *)(*v9 + 32), v65, (float *)(*v9 + 32), 1.001);
        if ( v9[14] > 1 )
        {
          Com_Printf("%i:did down step after not using step results\n", *(_DWORD *)dword_300F0FB8);
          v9 = (int *)dword_301A0ED0;
        }
      }
    }
    goto LABEL_50;
  }
LABEL_58:
  if ( v42 )
  {
    if ( *(int *)(*v9 + 4) < 6 )
    {
      if ( sub_3000D8A0(&v43, &v55) )
      {
        v22 = (_DWORD *)dword_301A0ED0;
        v23 = *(float *)(*(_DWORD *)dword_301A0ED0 + 28) - v48;
        if ( fabs(v23) > 0.5 )
        {
          v35 = v23;
          v24 = sub_3000D870(v35);
          v25 = v24;
          if ( v24 )
          {
            if ( v22[14] )
            {
              if ( v41 )
                Com_Printf("%i:jump step %2i\n", *(_DWORD *)dword_300F0FB8, v24);
              else
                Com_Printf("%i:stepped %2i\n", *(_DWORD *)dword_300F0FB8, v24);
              v22 = (_DWORD *)dword_301A0ED0;
            }
            if ( v25 >= -16 )
            {
              if ( v25 > 24 )
                v25 = 24;
            }
            else
            {
              v25 = -16;
            }
            v26 = *v22;
            *(_DWORD *)(v26 + 4 * (*(_DWORD *)(*v22 + 132) & 3) + 136) = 143;
            v27 = v25 + 128;
            *(_DWORD *)(v26 + 4 * ((*(_DWORD *)(v26 + 132))++ & 3) + 152) = (unsigned __int8)v27;
            v36 = *(float *)(*v22 + 28) - v45;
            v28 = (1.0 - COERCE_FLOAT(LODWORD(v36) & 0x7FFFFFFF) / v40) * 0.80000001 + 0.19999999;
            *(float *)(*v22 + 32) = v28 * *(float *)(*v22 + 32);
            *(float *)(*v22 + 36) = v28 * *(float *)(*v22 + 36);
            *(float *)(*v22 + 40) = v28 * *(float *)(*v22 + 40);
            v29 = abs32(v27 - 128);
            if ( v29 > 3 )
            {
              v30 = *v22;
              if ( *(_DWORD *)(*v22 + 84) != 1023 )
              {
                if ( sub_3000B110() )
                {
                  v37 = v29 / 2;
                  if ( v29 / 2 > 4 )
                    v37 = 4;
                  v31 = *(_DWORD *)(v30 + 8);
                  *(_DWORD *)(v30 + 8) = (unsigned __int8)(unsigned __int64)((double)v37 * 1.25 + 7.0 + (double)v31);
                  sub_3000AF10(v31, 1, *(_DWORD *)(*v22 + 8));
                }
              }
            }
          }
        }
      }
    }
  }
}
// 301A0D50: using guessed type int dword_301A0D50;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (3000EA30) --------------------------------------------------------
int __cdecl sub_3000EA30(int a1, char *String1, int ArgList)
{
  int v3; // esi
  int result; // eax
  int v5; // esi
  int v6; // esi
  int v7; // esi
  int v8; // esi
  int v9; // esi

  switch ( ArgList )
  {
    case 8:
      v3 = 0;
      while ( _stricmp(String1, (&off_300774E4)[v3]) )
      {
        if ( ++v3 >= 3 )
          goto LABEL_7;
      }
      *(_DWORD *)(a1 + 112) = v3;
LABEL_7:
      if ( v3 != 3 )
        goto LABEL_44;
      sub_30021B10(1, (char *)&byte_30067FC8, String1, *(_DWORD *)(a1 + 4));
      result = 1;
      break;
    case 9:
      v5 = 0;
      while ( _stricmp(String1, (&off_30077528)[v5]) )
      {
        if ( ++v5 >= 8 )
          goto LABEL_14;
      }
      *(_DWORD *)(a1 + 116) = v5;
LABEL_14:
      if ( v5 != 8 )
        goto LABEL_44;
      sub_30021B10(1, (char *)&byte_30067FA4, String1, *(_DWORD *)(a1 + 4));
      result = 1;
      break;
    case 10:
      v6 = 0;
      while ( _stricmp(String1, (&off_300774F0)[v6]) )
      {
        if ( ++v6 >= 5 )
          goto LABEL_21;
      }
      *(_DWORD *)(a1 + 552) = v6;
LABEL_21:
      if ( v6 != 5 )
        goto LABEL_44;
      sub_30021B10(1, (char *)&byte_30067F74, String1, *(_DWORD *)(a1 + 4));
      result = 1;
      break;
    case 11:
      v7 = 0;
      while ( _stricmp(String1, (&off_30077504)[v7]) )
      {
        if ( ++v7 >= 6 )
          goto LABEL_28;
      }
      *(_DWORD *)(a1 + 120) = v7;
LABEL_28:
      if ( v7 != 6 )
        goto LABEL_44;
      sub_30021B10(1, (char *)&byte_30067F50, String1, *(_DWORD *)(a1 + 4));
      result = 1;
      break;
    case 12:
      v8 = 0;
      while ( _stricmp(String1, (&off_3007751C)[v8]) )
      {
        if ( ++v8 >= 3 )
          goto LABEL_35;
      }
      *(_DWORD *)(a1 + 128) = v8;
LABEL_35:
      if ( v8 != 3 )
        goto LABEL_44;
      sub_30021B10(1, (char *)&byte_30067F28, String1, *(_DWORD *)(a1 + 4));
      result = 1;
      break;
    case 13:
      v9 = 0;
      while ( _stricmp(String1, (&off_30077548)[v9]) )
      {
        if ( ++v9 >= 4 )
          goto LABEL_42;
      }
      *(_DWORD *)(a1 + 812) = v9;
LABEL_42:
      if ( v9 == 4 )
        sub_30021B10(1, (char *)&byte_30067EFC, String1, *(_DWORD *)(a1 + 4));
LABEL_44:
      result = 1;
      break;
    default:
      sub_30021B10(1, (char *)&byte_30067EE0, ArgList, *(_DWORD *)(a1 + 4));
      result = 0;
      break;
  }
  return result;
}

//----- (3000EC80) --------------------------------------------------------
char *__usercall sub_3000EC80@<eax>(char **a1@<ebx>, const char *a2@<edi>)
{
  char *result; // eax

  if ( *a2 )
  {
    strlen(a2);
    result = (char *)dword_30076898(205);
    strcpy(result, a2);
    *a1 = result;
  }
  else
  {
    result = (char *)dword_300957CC;
    *a1 = (char *)dword_300957CC;
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300957CC: using guessed type int dword_300957CC;

//----- (3000ECD0) --------------------------------------------------------
char *__cdecl sub_3000ECD0(char **a1, const char *a2)
{
  return sub_3000EC80(a1, a2);
}

//----- (3000ECF0) --------------------------------------------------------
_DWORD *__usercall sub_3000ECF0@<eax>(int a1@<eax>, int a2, int a3)
{
  int v3; // ebp
  _DWORD *result; // eax
  _DWORD *v6; // edi

  v3 = a3;
  result = (_DWORD *)dword_30076898(203);
  *(_DWORD *)(dword_300F0FB4 + 4 * a1) = result;
  *result = a1;
  result[1] = dword_300957CC;
  if ( a3 > 0 )
  {
    v6 = (_DWORD *)(a2 + 4);
    do
    {
      if ( !v6[1] )
        *(_DWORD *)((char *)result + *v6) = dword_300957CC;
      v6 += 3;
      --v3;
    }
    while ( v3 );
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300957CC: using guessed type int dword_300957CC;
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (3000EDF0) --------------------------------------------------------
int __cdecl sub_3000EDF0(int a1, int a2)
{
  char **v2; // esi
  char *v3; // edi
  int result; // eax
  _DWORD *v5; // ebx
  unsigned int v6; // eax
  char *v7; // edi
  int v9; // esi
  size_t v10; // edi
  int v11; // esi
  const char *v12; // esi
  char *v13; // edi
  int v14; // eax
  int i; // [esp+Ch] [ebp-2054h]
  size_t MaxCount; // [esp+14h] [ebp-204Ch] BYREF
  char Buffer[64]; // [esp+18h] [ebp-2048h] BYREF
  char Str1[8196]; // [esp+58h] [ebp-2008h] BYREF
  unsigned int v19; // [esp+205Ch] [ebp-4h]
  unsigned int retaddr; // [esp+2064h] [ebp+4h]

  v19 = retaddr ^ dword_300705C0;
  MaxCount = strlen("WEAPONFILE");
  dword_300957CC = dword_30076898(205);
  *(_BYTE *)dword_300957CC = 0;
  v2 = (char **)(sub_3000ECF0(0, (int)&off_30077558, 253) + 1);
  strlen("none");
  v3 = (char *)dword_30076898(205);
  strcpy(v3, "none");
  result = 0;
  *v2 = v3;
  dword_300F0FB0 = 0;
  for ( i = 0; i < a2; ++i )
  {
    v5 = sub_3000ECF0(++dword_300F0FB0, (int)&off_30077558, 253);
    sprintf(Buffer, "%s/", off_300774E0[0]);
    v6 = *(_DWORD *)(a1 + 4 * i) + strlen(*(const char **)(a1 + 4 * i)) + 1 - *(_DWORD *)(a1 + 4 * i);
    v7 = (char *)&MaxCount + 3;
    while ( *++v7 )
      ;
    qmemcpy(v7, *(const void **)(a1 + 4 * i), v6);
    sub_30021BD0("Parsing weapon file \"%s\"...\n", Buffer);
    v9 = dword_30076898(15);
    if ( v9 <= 0 )
      sub_30021B10(1, (char *)&byte_30067E8C, Buffer);
    v10 = MaxCount;
    dword_30076898(16);
    Str1[v10] = 0;
    if ( strncmp(Str1, "WEAPONFILE", v10) )
      sub_30021B10(1, (char *)&byte_30067E60, Buffer);
    v11 = v9 - v10;
    if ( v11 >= 0x2000 )
      sub_30021B10(1, (char *)&byte_30067E34, Buffer);
    memset(Str1, 0, 0x2000u);
    dword_30076898(16);
    Str1[v11] = 0;
    dword_30076898(18);
    if ( strchr(Str1, 34) || strchr(Str1, 59) )
      sub_30021B10(1, (char *)&byte_30067E10, Buffer);
    v12 = *(const char **)(a1 + 4 * i);
    if ( *v12 )
    {
      strlen(*(const char **)(a1 + 4 * i));
      v13 = (char *)dword_30076898(205);
      strcpy(v13, v12);
      v5[1] = v13;
    }
    else
    {
      v5[1] = dword_300957CC;
    }
    if ( !sub_30040C20(
            (int)&off_30077558,
            (int)v5,
            253,
            Str1,
            14,
            (int (__cdecl *)(int, const char *, _DWORD))sub_3000EA30,
            (void (__cdecl *)(int, const char *))sub_3000ECD0) )
    {
      v14 = dword_300F0FB0;
      *(_DWORD *)(dword_300F0FB4 + 4 * dword_300F0FB0) = 0;
      dword_300F0FB0 = v14 - 1;
    }
    result = i + 1;
  }
  return result;
}
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300774E0: using guessed type char *off_300774E0[31];
// 30077558: using guessed type char *off_30077558;
// 300957CC: using guessed type int dword_300957CC;
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (3000F0F0) --------------------------------------------------------
void sub_3000F0F0()
{
  int v0; // ebx
  int v1; // ebp
  int v2; // esi
  int v3; // edi
  int **v4; // edx
  int *v5; // eax
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *v9; // eax

  v0 = dword_300F0FB0;
  v1 = dword_300F0FB4;
  v2 = 1;
  if ( dword_300F0FB0 >= 4 )
  {
    v3 = 4;
    v4 = (int **)(dword_300F0FB4 + 12);
    do
    {
      v5 = *(v4 - 2);
      if ( v5[154] <= 0 )
        v5[266] = 995783694;
      else
        *((float *)v5 + 266) = 1.0 / (double)v5[154];
      if ( v5[155] <= 0 )
        v5[267] = 990057071;
      else
        *((float *)v5 + 267) = 1.0 / (double)v5[155];
      v6 = *(v4 - 1);
      if ( v6[154] <= 0 )
        v6[266] = 995783694;
      else
        *((float *)v6 + 266) = 1.0 / (double)v6[154];
      if ( v6[155] <= 0 )
        v6[267] = 990057071;
      else
        *((float *)v6 + 267) = 1.0 / (double)v6[155];
      v7 = *v4;
      if ( (*v4)[154] <= 0 )
        v7[266] = 995783694;
      else
        *((float *)v7 + 266) = 1.0 / (double)(*v4)[154];
      if ( v7[155] <= 0 )
        v7[267] = 990057071;
      else
        *((float *)v7 + 267) = 1.0 / (double)v7[155];
      v8 = v4[1];
      if ( v8[154] <= 0 )
        v8[266] = 995783694;
      else
        *((float *)v8 + 266) = 1.0 / (double)v8[154];
      if ( v8[155] <= 0 )
        v8[267] = 990057071;
      else
        *((float *)v8 + 267) = 1.0 / (double)v8[155];
      v3 += 4;
      v2 += 4;
      v4 += 4;
    }
    while ( v3 < v0 );
  }
  for ( ; v2 <= v0; ++v2 )
  {
    v9 = *(int **)(v1 + 4 * v2);
    if ( v9[154] <= 0 )
      v9[266] = 995783694;
    else
      *((float *)v9 + 266) = 1.0 / (double)v9[154];
    if ( v9[155] <= 0 )
      v9[267] = 990057071;
    else
      *((float *)v9 + 267) = 1.0 / (double)v9[155];
  }
}
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (3000F300) --------------------------------------------------------
char **sub_3000F300()
{
  int v0; // edi
  char **result; // eax
  int v2; // edx
  _DWORD *v3; // ecx
  char *v4; // ebx
  int *v5; // esi
  int v6; // ebx
  int v7; // edi
  int v8; // eax
  int v9; // [esp+Ch] [ebp-4h]

  v0 = dword_300F0FB0;
  result = &off_30078358;
  v2 = 1;
  if ( dword_300F0FB0 < 1 )
    goto LABEL_4;
  do
  {
    v3 = *(_DWORD **)(dword_300F0FB4 + 4 * v2);
    *result = (char *)v3[97];
    result[1] = (char *)v3[35];
    result[2] = (char *)v3[98];
    result[3] = 0;
    result[4] = (char *)v3[99];
    result[5] = (char *)v3[101];
    result[6] = (char *)v3[2];
    v4 = (char *)v3[102];
    result[9] = (char *)v2;
    result[7] = v4;
    result[8] = (char *)1;
    result[10] = (char *)v3[104];
    result[11] = (char *)v3[106];
    ++v2;
    result += 12;
  }
  while ( v2 <= v0 );
  if ( v2 < 70 )
  {
LABEL_4:
    v5 = (int *)(result + 9);
    v9 = 70 - v2;
    while ( 1 )
    {
      if ( *(v5 - 1) == 2 )
      {
        v6 = 1;
        if ( v0 >= 1 )
        {
          while ( 1 )
          {
            v7 = *(_DWORD *)(dword_300F0FB4 + 4 * v6);
            if ( !sub_30040170(strlen(*(const char **)(v7 + 4)), (char *)*(v5 - 3), *(char **)(v7 + 4)) )
              break;
            if ( ++v6 > dword_300F0FB0 )
              goto LABEL_12;
          }
          *v5 = v6;
          v5[1] = *(_DWORD *)(v7 + 416);
          v5[2] = *(_DWORD *)(v7 + 424);
        }
LABEL_12:
        if ( *v5 == -1 )
        {
          Com_Printf("^3WARNING^7: Could not find weapon for ammo item %s\n", (const char *)*(v5 - 3));
          v8 = *(_DWORD *)(dword_300F0FB4 + 4);
          *v5 = 1;
          v5[1] = *(_DWORD *)(v8 + 416);
          v5[2] = *(_DWORD *)(v8 + 424);
        }
      }
      v5 += 12;
      result = (char **)--v9;
      if ( !v9 )
        break;
      v0 = dword_300F0FB0;
    }
  }
  return result;
}
// 30078358: using guessed type char *off_30078358;
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (3000F460) --------------------------------------------------------
int sub_3000F460()
{
  int result; // eax
  _DWORD *v1; // ebx
  _BYTE *v2; // esi
  int v4; // ecx
  int v5; // eax
  char *v6; // edx
  int v7; // esi
  int v8; // edi
  int v9; // eax
  int v10; // ecx
  int v12; // ecx
  int v13; // eax
  _DWORD *v14; // ebp
  int v15; // ecx
  int v16; // eax
  int v17; // esi
  char *v18; // edx
  int v19; // edi
  int v20; // eax
  int v21; // ecx
  int v23; // eax
  bool v24; // cc
  int v25; // [esp+0h] [ebp-14h]
  int v26; // [esp+4h] [ebp-10h]
  _DWORD *v27; // [esp+8h] [ebp-Ch]
  int v28; // [esp+Ch] [ebp-8h]
  int v29; // [esp+10h] [ebp-4h]

  result = 1;
  v28 = 1;
  if ( dword_300F0FB0 >= 1 )
  {
    v26 = 4;
    do
    {
      v1 = *(_DWORD **)(v26 + dword_300F0FB4);
      v2 = (_BYTE *)v1[103];
      v27 = v1;
      if ( *v2 )
      {
        do
          *v2 = tolower((char)*v2);
        while ( *++v2 );
      }
      v4 = 0;
      v25 = 0;
      if ( dword_300957C8 > 0 )
      {
        while ( 1 )
        {
          v5 = dword_300958D0[v4];
          if ( v5 )
          {
            v6 = (char *)v1[103];
            if ( v6 )
              break;
          }
LABEL_38:
          v25 = ++v4;
          if ( v4 >= dword_300957C8 )
            goto LABEL_46;
        }
        v7 = 99999;
        v8 = v5 - (_DWORD)v6;
        do
        {
          v9 = v6[v8];
          v10 = *v6++;
          if ( !v7-- )
            break;
          if ( v9 != v10 )
          {
            if ( v9 >= 97 && v9 <= 122 )
              v9 -= 32;
            if ( v10 >= 97 && v10 <= 122 )
              v10 -= 32;
            if ( v9 != v10 )
            {
              if ( 2 * (v9 >= v10) != 1 )
              {
                v4 = v25;
                goto LABEL_38;
              }
              break;
            }
          }
        }
        while ( v9 );
        v12 = v1[107];
        v1[104] = v25;
        if ( dword_300955C0[v25] != v12 )
        {
          if ( v25 )
          {
            v13 = 1;
            v29 = 1;
            if ( v26 > 4 )
            {
              do
              {
                v14 = *(_DWORD **)(dword_300F0FB4 + 4 * v13);
                v15 = dword_300958D0[v25];
                v16 = v14[103];
                if ( v15 && v16 )
                {
                  v17 = 99999;
                  v18 = (char *)v14[103];
                  v19 = v15 - v16;
                  do
                  {
                    v20 = v18[v19];
                    v21 = *v18++;
                    if ( !v17-- )
                      break;
                    if ( v20 != v21 )
                    {
                      if ( v20 >= 97 && v20 <= 122 )
                        v20 -= 32;
                      if ( v21 >= 97 && v21 <= 122 )
                        v21 -= 32;
                      if ( v20 != v21 )
                      {
                        if ( 2 * (v20 >= v21) != 1 )
                        {
                          v1 = v27;
                          goto LABEL_44;
                        }
                        break;
                      }
                    }
                  }
                  while ( v20 );
                  v1 = v27;
                  if ( v14[107] == dword_300955C0[v25] )
                    sub_30021B10(1, (char *)&byte_30067D80, v27[103], v27[1], v27[107], v14[1], v14[107]);
                }
LABEL_44:
                v13 = ++v29;
              }
              while ( v29 < v28 );
            }
          }
        }
        v4 = v25;
      }
LABEL_46:
      if ( v4 == dword_300957C8 )
      {
        dword_300958D0[v4] = v1[103];
        v23 = dword_300957C8 + 1;
        dword_300955C0[v4] = v1[107];
        v1[104] = v4;
        dword_300957C8 = v23;
      }
      result = v28 + 1;
      v24 = ++v28 <= dword_300F0FB0;
      v26 += 4;
    }
    while ( v24 );
  }
  return result;
}
// 300957C8: using guessed type int dword_300957C8;
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (3000F6F0) --------------------------------------------------------
int sub_3000F6F0()
{
  int result; // eax
  _DWORD *v1; // edi
  _BYTE *v2; // esi
  int v4; // ebx
  int v5; // ebp
  char *v6; // esi
  char *v7; // edx
  int v8; // ecx
  int v9; // ebx
  char *v10; // edx
  _DWORD *v11; // esi
  char *v12; // ecx
  bool v13; // cc
  int v14; // [esp+0h] [ebp-8h]
  int v15; // [esp+4h] [ebp-4h]

  result = 1;
  v15 = 1;
  if ( dword_300F0FB0 >= 1 )
  {
    v14 = 4;
    do
    {
      v1 = *(_DWORD **)(v14 + dword_300F0FB4);
      v2 = (_BYTE *)v1[109];
      v1[110] = -1;
      if ( *v2 )
      {
        do
          *v2 = tolower((char)*v2);
        while ( *++v2 );
        v4 = dword_300957C4;
        v5 = 0;
        if ( dword_300957C4 > 0 )
        {
          v6 = (char *)v1[109];
          while ( 1 )
          {
            v7 = (char *)dword_300956C0[v5];
            if ( v7 )
            {
              if ( v6 && !sub_30040170(99999, v7, v6) )
                break;
            }
            if ( ++v5 >= v4 )
              goto LABEL_22;
          }
          v8 = v1[111];
          v1[110] = v5;
          if ( dword_300957D0[v5] != v8 && v5 )
          {
            v9 = 1;
            if ( v14 > 4 )
            {
              do
              {
                v10 = (char *)dword_300956C0[v5];
                v11 = *(_DWORD **)(dword_300F0FB4 + 4 * v9);
                v12 = (char *)v11[109];
                if ( v10 && v12 && !sub_30040170(99999, v10, v12) && v11[111] == dword_300957D0[v5] )
                  sub_30021B10(1, (char *)&byte_30067D18, v1[109], v1[1], v1[111], v11[1], v11[111]);
                ++v9;
              }
              while ( v9 < v15 );
            }
            v4 = dword_300957C4;
          }
        }
LABEL_22:
        if ( v5 == v4 )
        {
          dword_300956C0[v5] = v1[109];
          dword_300957D0[v5] = v1[111];
          v1[110] = v5;
          dword_300957C4 = v4 + 1;
        }
      }
      result = v15 + 1;
      v13 = ++v15 <= dword_300F0FB0;
      v14 += 4;
    }
    while ( v13 );
  }
  return result;
}
// 300957C4: using guessed type int dword_300957C4;
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (3000F8B0) --------------------------------------------------------
int sub_3000F8B0()
{
  int result; // eax
  _DWORD *v1; // ebx
  _BYTE *v2; // esi
  int v4; // ecx
  int v5; // eax
  char *v6; // edx
  int v7; // esi
  int v8; // edi
  int v9; // eax
  int v10; // ecx
  int v12; // ecx
  int v13; // eax
  _DWORD *v14; // ebp
  int v15; // ecx
  int v16; // eax
  int v17; // esi
  char *v18; // edx
  int v19; // edi
  int v20; // eax
  int v21; // ecx
  int v23; // eax
  bool v24; // cc
  int v25; // [esp+0h] [ebp-14h]
  int v26; // [esp+4h] [ebp-10h]
  _DWORD *v27; // [esp+8h] [ebp-Ch]
  int v28; // [esp+Ch] [ebp-8h]
  int v29; // [esp+10h] [ebp-4h]

  result = 1;
  v28 = 1;
  if ( dword_300F0FB0 >= 1 )
  {
    v26 = 4;
    do
    {
      v1 = *(_DWORD **)(v26 + dword_300F0FB4);
      v2 = (_BYTE *)v1[105];
      v27 = v1;
      if ( *v2 )
      {
        do
          *v2 = tolower((char)*v2);
        while ( *++v2 );
      }
      v4 = 0;
      v25 = 0;
      if ( dword_300957C0 > 0 )
      {
        while ( 1 )
        {
          v5 = dword_300954C0[v4];
          if ( v5 )
          {
            v6 = (char *)v1[105];
            if ( v6 )
              break;
          }
LABEL_38:
          v25 = ++v4;
          if ( v4 >= dword_300957C0 )
            goto LABEL_46;
        }
        v7 = 99999;
        v8 = v5 - (_DWORD)v6;
        do
        {
          v9 = v6[v8];
          v10 = *v6++;
          if ( !v7-- )
            break;
          if ( v9 != v10 )
          {
            if ( v9 >= 97 && v9 <= 122 )
              v9 -= 32;
            if ( v10 >= 97 && v10 <= 122 )
              v10 -= 32;
            if ( v9 != v10 )
            {
              if ( 2 * (v9 >= v10) != 1 )
              {
                v4 = v25;
                goto LABEL_38;
              }
              break;
            }
          }
        }
        while ( v9 );
        v12 = v1[108];
        v1[106] = v25;
        if ( dword_300959D0[v25] != v12 )
        {
          if ( v25 )
          {
            v13 = 1;
            v29 = 1;
            if ( v26 > 4 )
            {
              do
              {
                v14 = *(_DWORD **)(dword_300F0FB4 + 4 * v13);
                v15 = dword_300954C0[v25];
                v16 = v14[105];
                if ( v15 && v16 )
                {
                  v17 = 99999;
                  v18 = (char *)v14[105];
                  v19 = v15 - v16;
                  do
                  {
                    v20 = v18[v19];
                    v21 = *v18++;
                    if ( !v17-- )
                      break;
                    if ( v20 != v21 )
                    {
                      if ( v20 >= 97 && v20 <= 122 )
                        v20 -= 32;
                      if ( v21 >= 97 && v21 <= 122 )
                        v21 -= 32;
                      if ( v20 != v21 )
                      {
                        if ( 2 * (v20 >= v21) != 1 )
                        {
                          v1 = v27;
                          goto LABEL_44;
                        }
                        break;
                      }
                    }
                  }
                  while ( v20 );
                  v1 = v27;
                  if ( v14[108] == dword_300959D0[v25] )
                    sub_30021B10(1, (char *)&byte_30067CC0, v27[103], v27[1], v27[108], v14[1], v14[108]);
                }
LABEL_44:
                v13 = ++v29;
              }
              while ( v29 < v28 );
            }
          }
        }
        v4 = v25;
      }
LABEL_46:
      if ( v4 == dword_300957C0 )
      {
        dword_300954C0[v4] = v1[105];
        v23 = dword_300957C0 + 1;
        dword_300959D0[v4] = v1[108];
        v1[106] = v4;
        dword_300957C0 = v23;
      }
      result = v28 + 1;
      v24 = ++v28 <= dword_300F0FB0;
      v26 += 4;
    }
    while ( v24 );
  }
  return result;
}
// 300957C0: using guessed type int dword_300957C0;
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (3000FB40) --------------------------------------------------------
int sub_3000FB40()
{
  int v0; // ecx
  int v1; // edx
  int i; // eax
  int v3; // esi
  int result; // eax
  int v5; // esi
  int *v6; // ebx
  int v7; // ebp
  int v8; // edi
  int v9; // eax
  int v10; // [esp+4h] [ebp-8h]
  int v11; // [esp+8h] [ebp-4h]

  v0 = dword_300F0FB0;
  v1 = dword_300F0FB4;
  for ( i = 1; i <= v0; *(_DWORD *)(v3 + 776) = 0 )
    v3 = *(_DWORD *)(v1 + 4 * i++);
  result = 1;
  v10 = 1;
  if ( v0 >= 1 )
  {
    while ( 1 )
    {
      v5 = *(_DWORD *)(v1 + 4 * result);
      v11 = v5;
      if ( !*(_DWORD *)(v5 + 776) && **(_BYTE **)(v5 + 772) && !*(_DWORD *)(v5 + 776) )
      {
        v6 = (int *)(v5 + 776);
        while ( 1 )
        {
          v7 = 1;
          if ( v0 >= 1 )
          {
            while ( 1 )
            {
              v8 = *(_DWORD *)(dword_300F0FB4 + 4 * v7);
              if ( !_stricmp(*(const char **)(v5 + 772), *(const char **)(v8 + 4)) )
                break;
              if ( ++v7 > dword_300F0FB0 )
                goto LABEL_19;
            }
            v9 = *(_DWORD *)(v5 + 120);
            *v6 = v7;
            if ( v9 != *(_DWORD *)(v8 + 120) )
              sub_30021B10(1, (char *)&byte_30067C70, *(_DWORD *)(v5 + 4), *(_DWORD *)(v8 + 4));
            if ( *(_DWORD *)(v5 + 124) != *(_DWORD *)(v8 + 124) )
              sub_30021B10(1, (char *)&byte_30067C20, *(_DWORD *)(v5 + 4), *(_DWORD *)(v8 + 4));
          }
LABEL_19:
          if ( !*v6 )
            sub_30021B10(1, (char *)&byte_30067BEC, *(_DWORD *)(v5 + 772), *(_DWORD *)(v5 + 4));
          v5 = *(_DWORD *)(dword_300F0FB4 + 4 * v7);
          v6 = (int *)(v5 + 776);
          if ( *(_DWORD *)(v5 + 776) )
            break;
          v0 = dword_300F0FB0;
        }
        if ( v5 != v11 )
          sub_30021B10(1, (char *)&byte_30067BC4, *(_DWORD *)(v11 + 4), *(_DWORD *)(v11 + 772));
      }
      v0 = dword_300F0FB0;
      result = ++v10;
      if ( v10 > dword_300F0FB0 )
        break;
      v1 = dword_300F0FB4;
    }
  }
  return result;
}
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (3000FCF0) --------------------------------------------------------
int sub_3000FCF0()
{
  int v0; // edx
  char *v1; // eax
  int v2; // edx
  char v3; // cl
  char *v4; // eax
  int v5; // edx
  char v6; // cl
  int v7; // ecx
  int v8; // esi
  _DWORD *v9; // eax
  int v11; // [esp+Ch] [ebp-210Ch]
  int v12[64]; // [esp+10h] [ebp-2108h] BYREF
  char v13[8196]; // [esp+110h] [ebp-2008h] BYREF
  unsigned int v14; // [esp+2114h] [ebp-4h]
  unsigned int retaddr; // [esp+211Ch] [ebp+4h]

  v14 = retaddr ^ dword_300705C0;
  v0 = dword_30076898(200);
  dword_300F0FB4 = v0;
  if ( !v0 )
  {
    sub_30021B10(1, (char *)&byte_30067B9C);
    v0 = dword_300F0FB4;
  }
  memset(dword_300958D0, 0, sizeof(dword_300958D0));
  memset(dword_300954C0, 0, sizeof(dword_300954C0));
  dword_300955C0[0] = 0;
  dword_300959D0[0] = 0;
  memset(v12, 0, 0xFCu);
  dword_300958D0[0] = (int)"none";
  dword_300957C8 = 1;
  dword_300954C0[0] = (int)"none";
  dword_300957C0 = 1;
  if ( v11 )
  {
    v7 = 0;
    dword_300F0FB0 = 0;
    v8 = 1;
    v9 = (_DWORD *)(v0 + 12);
    do
    {
      if ( !*(v9 - 2) )
        break;
      ++v7;
      if ( !*(v9 - 1) )
        break;
      ++v7;
      if ( !*v9 )
        break;
      ++v7;
      if ( !v9[1] )
        break;
      ++v7;
      if ( !v9[2] )
        break;
      ++v7;
      if ( !v9[3] )
        break;
      ++v7;
      if ( !v9[4] )
        break;
      ++v7;
      if ( !v9[5] )
        break;
      ++v7;
      if ( !v9[6] )
        break;
      v8 += 9;
      ++v7;
      v9 += 9;
    }
    while ( v8 <= 63 );
    dword_300F0FB0 = v7;
  }
  else
  {
    v1 = &byte_301D1B20[dword_301CFB3C];
    v2 = v13 - &byte_301D1B20[dword_301CFB3C];
    do
    {
      v3 = *v1;
      v1[v2] = *v1;
      ++v1;
    }
    while ( v3 );
    v12[0] = (int)v13;
    v4 = v13;
    v5 = 1;
    while ( *v4 )
    {
      if ( *v4 == 32 )
      {
        *v4 = 0;
        v6 = *++v4;
        if ( !v6 )
          break;
        if ( v6 != 32 )
          v12[v5++] = (int)v4;
      }
      else
      {
        ++v4;
      }
    }
    sub_3000EDF0((int)v12, v5);
  }
  sub_3000F0F0();
  sub_3000F460();
  sub_3000F6F0();
  sub_3000F8B0();
  sub_3000F300();
  return sub_3000FB40();
}
// 3000FDA4: variable 'v11' is possibly undefined
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300957C0: using guessed type int dword_300957C0;
// 300957C8: using guessed type int dword_300957C8;
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301CFB3C: using guessed type int dword_301CFB3C;

//----- (30010000) --------------------------------------------------------
int __usercall sub_30010000@<eax>(const char *a1@<edi>)
{
  int v1; // esi

  v1 = 0;
  while ( _stricmp(a1, (&off_30077504)[v1]) )
  {
    if ( ++v1 >= 6 )
      return 0;
  }
  return v1;
}

//----- (300101D0) --------------------------------------------------------
int __usercall sub_300101D0@<eax>(int a1@<eax>, int a2@<ecx>)
{
  int v3; // esi
  int v4; // ebx
  int v6; // ebp
  int v7; // ebx
  bool v8; // cc
  int i; // eax
  int v10; // edx
  int v11; // esi
  int v12; // [esp+Ch] [ebp-Ch]
  int v13; // [esp+10h] [ebp-8h]
  int v14; // [esp+14h] [ebp-4h]

  v3 = 1 << (a1 & 0x1F);
  v4 = a1 >> 5;
  v13 = a1 >> 5;
  if ( (v3 & *(_DWORD *)(a2 + 4 * (a1 >> 5) + 780)) == 0 )
    return 0;
  v12 = *(_DWORD *)(dword_300F0FB4 + 4 * a1);
  v6 = sub_300103A0(a2, a1, 1);
  if ( v6 )
  {
    if ( *(_DWORD *)(v12 + 124) )
    {
      v7 = 1;
      if ( dword_300F0FB0 < 1 )
        goto LABEL_13;
      v14 = *(_DWORD *)(v12 + 124);
      while ( !v14 || ((1 << (v7 & 0x1F)) & *(_DWORD *)(a2 + 4 * (v7 >> 5) + 780)) == 0 || sub_300103A0(a2, v7, 1) )
      {
        if ( ++v7 > dword_300F0FB0 )
          goto LABEL_13;
      }
      v8 = v7 <= dword_300F0FB0;
      *(_BYTE *)(a2 + v6 + 788) = v7;
      if ( !v8 )
LABEL_13:
        *(_BYTE *)(a2 + v6 + 788) = 0;
      v4 = v13;
    }
    else
    {
      *(_BYTE *)(a2 + v6 + 788) = 0;
    }
  }
  *(_DWORD *)(a2 + 4 * v4 + 780) &= ~v3;
  for ( i = *(_DWORD *)(v12 + 776); i; i = *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * i) + 776) )
  {
    v10 = 1 << (i & 0x1F);
    v11 = *(_DWORD *)(a2 + 4 * (i >> 5) + 780);
    if ( (v11 & v10) == 0 )
      break;
    *(_DWORD *)(a2 + 4 * (i >> 5) + 780) = ~v10 & v11;
  }
  return 1;
}
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30010330) --------------------------------------------------------
int __usercall sub_30010330@<eax>(int a1@<eax>, int a2@<edi>, int a3@<esi>)
{
  int v3; // ecx

  if ( ((1 << (a1 & 0x1F)) & *(_DWORD *)(a2 + 4 * (a1 >> 5) + 780)) == 0 )
    return 0;
  v3 = *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * a1) + 120);
  switch ( v3 )
  {
    case 1:
    case 2:
      if ( a3 != 1 && a3 != 2 )
        return 0;
      break;
    case 3:
    case 4:
    case 5:
      if ( a3 != v3 )
        return 0;
      break;
    default:
      return 0;
  }
  *(_BYTE *)(a2 + a3 + 788) = a1;
  return 1;
}
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (300103A0) --------------------------------------------------------
int __usercall sub_300103A0@<eax>(int a1@<edi>, int a2, int a3)
{
  int result; // eax
  int v4; // ecx
  int v5; // esi
  int v6; // eax
  int v7; // esi

  if ( ((1 << (a2 & 0x1F)) & *(_DWORD *)(a1 + 4 * (a2 >> 5) + 780)) == 0 )
    return 0;
  v4 = a2;
  while ( 2 )
  {
    v5 = *(_DWORD *)(dword_300F0FB4 + 4 * v4);
    v6 = *(_DWORD *)(v5 + 120);
    switch ( v6 )
    {
      case 1:
      case 2:
        if ( *(char *)(a1 + 789) == v4 )
        {
          result = 1;
        }
        else
        {
          if ( *(char *)(a1 + 790) != v4 )
            goto LABEL_9;
          result = 2;
        }
        break;
      case 3:
      case 4:
      case 5:
        if ( *(char *)(v6 + a1 + 788) != v4 )
        {
LABEL_9:
          if ( a3 )
          {
            v7 = *(_DWORD *)(v5 + 776);
            if ( v7 )
              v4 = v7;
          }
          if ( v4 != a2 )
            continue;
          goto LABEL_13;
        }
        result = *(_DWORD *)(v5 + 120);
        break;
      default:
LABEL_13:
        result = 0;
        break;
    }
    return result;
  }
}
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30010460) --------------------------------------------------------
int __fastcall sub_30010460(int a1, int a2)
{
  int result; // eax

  result = *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * a1) + 120);
  switch ( result )
  {
    case 1:
    case 2:
      if ( *(_BYTE *)(a2 + 789) )
      {
        if ( *(_BYTE *)(a2 + 790) )
          goto LABEL_7;
        result = 2;
      }
      else
      {
        result = 1;
      }
      break;
    case 3:
    case 4:
    case 5:
      if ( *(_BYTE *)(result + a2 + 788) )
        goto LABEL_7;
      break;
    default:
LABEL_7:
      result = 0;
      break;
  }
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (300104C0) --------------------------------------------------------
int __usercall sub_300104C0@<eax>(int result@<eax>, int a2@<ecx>, int a3@<esi>)
{
  int v3; // ecx
  int v4; // ecx
  char v5; // cl
  char v6; // al
  char v7; // al
  char v8; // dl

  v3 = *(_DWORD *)(dword_300F0FB4 + 4 * a2);
  if ( !*(_DWORD *)(v3 + 124) )
    return 0;
  v4 = *(_DWORD *)(v3 + 120);
  switch ( v4 )
  {
    case 1:
    case 2:
      if ( result == 1 || result == 2 )
      {
        v5 = *(_BYTE *)(a3 + result + 788);
        if ( !v5 || *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v5) + 124) )
          return result;
      }
      v6 = *(_BYTE *)(a3 + 789);
      if ( !v6 || *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v6) + 124) )
        return 1;
      v7 = *(_BYTE *)(a3 + 790);
      if ( v7 && !*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v7) + 124) )
        return 0;
      result = 2;
      break;
    case 3:
    case 4:
    case 5:
      v8 = *(_BYTE *)(v4 + a3 + 788);
      if ( v8 && !*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v8) + 124) )
        return 0;
      return v4;
    default:
      return 0;
  }
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (300105C0) --------------------------------------------------------
int __usercall sub_300105C0@<eax>(int a1@<eax>, int a2@<esi>)
{
  _DWORD *v2; // edx
  int v3; // ebx
  int v4; // edi
  int result; // eax
  int i; // edx
  _DWORD *v7; // ecx
  int v8; // ecx
  int v9; // ebx
  int v10; // ecx
  int v11; // [esp+Ch] [ebp-204h]
  int v12[64]; // [esp+10h] [ebp-200h] BYREF
  int v13[64]; // [esp+110h] [ebp-100h] BYREF

  v2 = *(_DWORD **)(dword_300F0FB4 + 4 * a1);
  v3 = v2[104];
  v11 = v2[106];
  memset(v13, 0, sizeof(v13));
  memset(v12, 0, sizeof(v12));
  v4 = v2[110];
  if ( v4 < 0 )
  {
    if ( v2[184] )
      result = dword_300959D0[v11] - *(_DWORD *)(a2 + 4 * v11 + 524);
    else
      result = dword_300955C0[v3] - *(_DWORD *)(a2 + 4 * v3 + 268);
  }
  else
  {
    result = dword_300957D0[v4];
    for ( i = 1; i <= dword_300F0FB0; ++i )
    {
      if ( ((1 << (i & 0x1F)) & *(_DWORD *)(a2 + 4 * (i >> 5) + 780)) == 0 )
        continue;
      v7 = *(_DWORD **)(dword_300F0FB4 + 4 * i);
      if ( v7[110] != v4 )
        continue;
      if ( v7[184] )
      {
        v8 = v7[106];
        if ( !v12[v8] )
        {
          v9 = *(_DWORD *)(a2 + 4 * v8 + 524);
          v12[v8] = 1;
LABEL_10:
          result -= v9;
          continue;
        }
      }
      else
      {
        v10 = v7[104];
        if ( !v13[v10] )
        {
          v9 = *(_DWORD *)(a2 + 4 * v10 + 268);
          v13[v10] = 1;
          goto LABEL_10;
        }
      }
    }
  }
  return result;
}
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30010700) --------------------------------------------------------
int __usercall sub_30010700@<eax>(int a1@<eax>, int a2@<ebx>)
{
  _DWORD *v2; // edx
  int v3; // edi
  int v4; // esi
  int i; // edx
  _DWORD *v6; // eax
  int v7; // eax
  int v8; // ecx
  int v9; // eax
  int result; // eax
  int v11; // [esp+8h] [ebp-208h]
  int v12; // [esp+Ch] [ebp-204h]
  int v13[64]; // [esp+10h] [ebp-200h] BYREF
  int v14[64]; // [esp+110h] [ebp-100h] BYREF

  v2 = *(_DWORD **)(dword_300F0FB4 + 4 * a1);
  v12 = v2[106];
  v11 = v2[104];
  memset(v14, 0, sizeof(v14));
  memset(v13, 0, sizeof(v13));
  v3 = v2[110];
  v4 = 0;
  if ( v3 < 0 )
  {
    if ( v2[184] )
      result = *(_DWORD *)(a2 + 4 * v12 + 524);
    else
      result = *(_DWORD *)(a2 + 4 * v11 + 268);
  }
  else
  {
    for ( i = 1; i <= dword_300F0FB0; ++i )
    {
      if ( ((1 << (i & 0x1F)) & *(_DWORD *)(a2 + 4 * (i >> 5) + 780)) == 0 )
        continue;
      v6 = *(_DWORD **)(dword_300F0FB4 + 4 * i);
      if ( v6[110] != v3 )
        continue;
      if ( v6[184] )
      {
        v7 = v6[106];
        if ( !v13[v7] )
        {
          v8 = *(_DWORD *)(a2 + 4 * v7 + 524);
          v13[v7] = 1;
LABEL_10:
          v4 += v8;
          continue;
        }
      }
      else
      {
        v9 = v6[104];
        if ( !v14[v9] )
        {
          v8 = *(_DWORD *)(a2 + 4 * v9 + 268);
          v14[v9] = 1;
          goto LABEL_10;
        }
      }
    }
    result = v4;
  }
  return result;
}
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30010830) --------------------------------------------------------
double __usercall sub_30010830@<st0>(int a1@<eax>, int a2@<edx>, int a3@<ecx>)
{
  float *v4; // esi
  int v5; // edx
  int v6; // eax
  int v7; // edi
  double v8; // st7
  double result; // st7
  double v10; // st6
  int v11; // ecx
  int v12; // [esp+8h] [ebp-8h]

  v4 = *(float **)(dword_300F0FB4 + 4 * a2);
  v5 = *(_DWORD *)(a3 + 216);
  if ( (double)v5 == *(float *)(a3 + 208) || (v6 = *(_DWORD *)(a3 + 212)) == 0 )
  {
    v11 = *(_DWORD *)(a3 + 12);
    if ( (v11 & 1) != 0 )
    {
      result = v4[145];
    }
    else if ( (v11 & 2) != 0 )
    {
      result = v4[144];
    }
    else
    {
      result = v4[143];
    }
  }
  else
  {
    v7 = *(_DWORD *)(a3 + 828);
    if ( v5 == v7 )
    {
      v12 = 400;
    }
    else if ( v5 == *(_DWORD *)(a3 + 832) )
    {
      v12 = *(_DWORD *)(a3 + 220) != 0 ? 200 : 400;
    }
    else
    {
      v12 = 200;
    }
    v8 = (double)(a1 - v6) / (double)v12;
    if ( v8 >= 0.0 )
    {
      if ( v8 > 1.0 )
        v8 = 1.0;
    }
    else
    {
      v8 = 0.0;
    }
    if ( v5 == v7 )
    {
      result = v8 * (v4[145] - v4[144]) + v4[144];
    }
    else if ( v5 == *(_DWORD *)(a3 + 836) )
    {
      result = v8 * (v4[143] - v4[144]) + v4[144];
    }
    else
    {
      v10 = v4[144];
      if ( *(_DWORD *)(a3 + 220) )
        result = v8 * (v10 - v4[143]) + v4[143];
      else
        result = v8 * (v10 - v4[145]) + v4[145];
    }
  }
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (300109A0) --------------------------------------------------------
int sub_300109A0()
{
  int v0; // edx
  int v1; // ecx
  int v2; // eax
  int v3; // esi
  int v4; // eax
  unsigned int v5; // eax
  int v6; // edx
  int v7; // ecx
  int v8; // eax
  int result; // eax

  v0 = dword_301A0ED0;
  v1 = *(_DWORD *)dword_301A0ED0;
  v2 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 4);
  if ( v2 >= 6
    || (*(_BYTE *)(dword_301A0ED0 + 8) & 0x10) == 0
    || !*(_DWORD *)(dword_301A0DA8 + 716)
    || (v3 = *(_DWORD *)(v1 + 180), v3 == 2)
    || v3 == 1
    || v3 == 10
    || v3 == 11
    || !dword_301A0D54 && v2 != 1 )
  {
    v5 = *(_DWORD *)(v1 + 12) & 0xFFFFFFDF;
    goto LABEL_17;
  }
  v4 = *(_DWORD *)(v1 + 12);
  if ( (v4 & 1) == 0 )
  {
    v5 = v4 | 0x20;
LABEL_17:
    *(_DWORD *)(v1 + 12) = v5;
    goto LABEL_18;
  }
  if ( (*(_BYTE *)(dword_301A0ED0 + 32) & 0x10) == 0
    || !*(_BYTE *)(dword_301A0ED0 + 24) && !*(_BYTE *)(dword_301A0ED0 + 25) )
  {
    *(_DWORD *)(v1 + 12) = v4 | 0x20;
    *(_DWORD *)(*(_DWORD *)v0 + 12) |= 0x400u;
  }
LABEL_18:
  v6 = *(_DWORD *)v0;
  v7 = dword_30079660;
  v8 = *(_DWORD *)(v6 + 172);
  if ( (*(_BYTE *)(v6 + 12) & 0x20) != 0 )
  {
    result = 300 * v8;
    if ( dword_30079660 )
    {
      dword_3018E120[result] = 1;
    }
    else
    {
      dword_3018E120[result] = 0;
      dword_3018E124[result] = 0;
      dword_3018E120[result] = 2;
    }
  }
  else
  {
    result = 300 * v8;
    dword_3018E120[result] = 0;
    if ( !v7 )
    {
      dword_3018E124[result] = 0;
      dword_3018E120[result] = 1;
    }
  }
  return result * 4;
}
// 30079660: using guessed type int dword_30079660;
// 3018E120: using guessed type int dword_3018E120[];
// 3018E124: using guessed type int dword_3018E124[];
// 301A0D54: using guessed type int dword_301A0D54;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30010AA0) --------------------------------------------------------
void sub_30010AA0()
{
  int v0; // esi
  int v1; // edi
  float *v2; // ecx
  int v3; // eax
  double v4; // st7
  int v5; // ecx

  if ( !*(_DWORD *)(dword_301A0DA8 + 716) )
  {
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 184) = 0;
    return;
  }
  v0 = 0;
  v1 = dword_301A0ED0;
  if ( *(_DWORD *)(dword_301A0DA8 + 760) )
  {
    v2 = *(float **)dword_301A0ED0;
    v3 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180);
    if ( v3 == 5
      || v3 == 6
      || v3 == 7
      || v3 == 8
      || v3 == 9 && *((_DWORD *)v2 + 11) - *(_DWORD *)(dword_301A0DA8 + 992) > 0 )
    {
      goto LABEL_15;
    }
  }
  else
  {
    v2 = *(float **)dword_301A0ED0;
    if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180) == 5
      && *((_DWORD *)v2 + 11) - *(_DWORD *)(dword_301A0DA8 + 992) > 0 )
    {
      goto LABEL_15;
    }
  }
  if ( !*(_DWORD *)(dword_301A0DA8 + 720) )
  {
    v2 = *(float **)dword_301A0ED0;
    if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180) == 4 )
    {
LABEL_15:
      v0 = 0;
      goto LABEL_18;
    }
  }
  v2 = *(float **)dword_301A0ED0;
  if ( (*(_BYTE *)(*(_DWORD *)dword_301A0ED0 + 12) & 0x20) != 0 )
    v0 = 1;
LABEL_18:
  if ( *(_DWORD *)(dword_301A0DA8 + 744) && *((_DWORD *)v2 + 12) && *((_DWORD *)v2 + 45) == 3 || v0 )
  {
    if ( *((_DWORD *)v2 + 46) == 1065353216 )
      return;
    v4 = (double)dword_301A0D48 * *(float *)(dword_301A0DA8 + 1064) + v2[46];
  }
  else
  {
    if ( v2[46] == 0.0 )
      return;
    v4 = v2[46] - (double)dword_301A0D48 * *(float *)(dword_301A0DA8 + 1068);
  }
  v2[46] = v4;
  v5 = *(_DWORD *)v1;
  if ( *(float *)(*(_DWORD *)v1 + 184) < 1.0 )
  {
    if ( *(float *)(v5 + 184) <= 0.0 )
      *(_DWORD *)(v5 + 184) = 0;
  }
  else
  {
    *(_DWORD *)(v5 + 184) = 1065353216;
  }
}
// 30010AF1: conditional instruction was optimized away because of 'eax.4==0'
// 30010B7B: conditional instruction was optimized away because of 'esi.4==1'
// 301A0D48: using guessed type int dword_301A0D48;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30010C00) --------------------------------------------------------
int sub_30010C00()
{
  int v0; // edx
  int v1; // eax
  int v2; // ecx

  v0 = dword_301A0ED0;
  v1 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180);
  if ( !v1 || v1 == 1 || v1 == 2 || v1 == 5 || v1 == 7 || v1 == 9 || v1 == 8 || v1 == 6 )
    return 1;
  if ( v1 != 3 && v1 != 11 )
  {
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 44) = 0;
    *(_DWORD *)(*(_DWORD *)v0 + 48) = 0;
    v2 = *(_DWORD *)v0;
    *(_DWORD *)(v2 + 180) = 0;
    sub_30010E40(v2, 0);
    return 1;
  }
  return 0;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30010DC0) --------------------------------------------------------
int __fastcall sub_30010DC0(int a1)
{
  return *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 4 * *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * a1) + 424) + 524);
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30010E10) --------------------------------------------------------
int __cdecl sub_30010E10(int a1)
{
  int result; // eax

  result = *(_DWORD *)dword_301A0ED0;
  if ( *(int *)(*(_DWORD *)dword_301A0ED0 + 4) < 6 )
  {
    if ( *(_BYTE *)(dword_301A0ED0 + 10) )
      *(_DWORD *)(result + 980) = a1 | ~(unsigned __int16)*(_DWORD *)(result + 980) & 0x200;
  }
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30010E40) --------------------------------------------------------
int __fastcall sub_30010E40(int a1, int a2)
{
  int result; // eax
  int v3; // ecx

  result = dword_301A0ED0;
  if ( *(_BYTE *)(dword_301A0ED0 + 10) )
  {
    v3 = *(_DWORD *)dword_301A0ED0;
    result = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 980);
    if ( (result & 0xFFFFFDFF) != a2 && *(int *)(v3 + 4) < 6 )
    {
      result = a2 | ~(_WORD)result & 0x200;
      *(_DWORD *)(v3 + 980) = result;
    }
  }
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30010E80) --------------------------------------------------------
char sub_30010E80()
{
  int v0; // ecx
  int v1; // eax
  int v2; // edx

  v0 = dword_301A0ED0;
  LOBYTE(v1) = *(_BYTE *)(dword_301A0ED0 + 10);
  if ( (_BYTE)v1 )
  {
    v2 = *(_DWORD *)dword_301A0ED0;
    v1 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 980);
    if ( (v1 & 0xFFFFFDFF) != 0 )
    {
      if ( *(int *)(v2 + 4) < 6 )
        *(_DWORD *)(v2 + 980) = ~(_WORD)v1 & 0x200;
      v1 = *(_DWORD *)v0;
      *(_DWORD *)(*(_DWORD *)v0 + 180) = 0;
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180) = 0;
    }
  }
  else
  {
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180) = 0;
  }
  return v1;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30010ED0) --------------------------------------------------------
int __cdecl sub_30010ED0(int a1)
{
  int v1; // esi
  int v2; // eax
  int v3; // eax
  int v5; // ecx
  int v6; // ecx
  int v7; // eax
  int v8; // esi

  if ( !*(_DWORD *)(dword_301A0DA8 + 712) )
    return 0;
  v1 = dword_301A0ED0;
  v2 = *(_DWORD *)dword_301A0ED0;
  if ( ((1 << (*(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 176) & 0x1F)) & *(_DWORD *)(*(_DWORD *)dword_301A0ED0
                                                                                 + 4
                                                                                 * (*(int *)(*(_DWORD *)dword_301A0ED0
                                                                                           + 176) >> 5)
                                                                                 + 796)) == 0 )
    return 0;
  if ( *(_DWORD *)(v2 + 180) == 4 && a1 )
  {
    *(_DWORD *)(v2 + 4 * (*(int *)(*(_DWORD *)dword_301A0ED0 + 176) >> 5) + 796) &= ~(1 << (*(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 176) & 0x1F));
    v3 = *(_DWORD *)v1;
    *(_DWORD *)(v3 + 4 * (*(_DWORD *)(*(_DWORD *)v1 + 132) & 3) + 136) = 163;
    *(_DWORD *)(v3 + 4 * ((*(_DWORD *)(v3 + 132))++ & 3) + 152) = 0;
    v2 = *(_DWORD *)v1;
    if ( *(_DWORD *)(*(_DWORD *)v1 + 44) )
      return 1;
  }
  else if ( *(_DWORD *)(v2 + 44) )
  {
    v5 = *(_DWORD *)(v2 + 180);
    if ( v5 == 3 || v5 == 4 || v5 == 10 || v5 == 11 || *(_DWORD *)(v2 + 48) )
      return 0;
  }
  v6 = *(_DWORD *)(v2 + 180);
  if ( v6 == 4 )
  {
    sub_30010E80();
    return 0;
  }
  if ( !v6 )
  {
    if ( *(float *)(v2 + 184) <= 0.75 )
      sub_30010E10(4);
    else
      sub_30010E10(7);
    *(_DWORD *)(*(_DWORD *)v1 + 180) = 4;
    *(_DWORD *)(*(_DWORD *)v1 + 44) = *(_DWORD *)(dword_301A0DA8 + 472);
    v7 = *(_DWORD *)(dword_301A0DA8 + 476);
    if ( v7 && v7 < *(_DWORD *)(dword_301A0DA8 + 472) )
      *(_DWORD *)(*(_DWORD *)v1 + 48) = v7;
    else
      *(_DWORD *)(*(_DWORD *)v1 + 48) = 1;
    v8 = *(_DWORD *)v1;
    *(_DWORD *)(v8 + 4 * (*(_DWORD *)(v8 + 132) & 3) + 136) = 162;
    *(_DWORD *)(v8 + 4 * ((*(_DWORD *)(v8 + 132))++ & 3) + 152) = 0;
  }
  return 0;
}
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30011160) --------------------------------------------------------
int sub_30011160()
{
  _DWORD *v0; // edi
  int v1; // eax
  int v2; // esi
  int result; // eax
  int v4; // ecx
  int v5; // esi
  int v6; // ecx
  int v7; // eax
  int v8; // eax

  v6 = dword_301A0ED0;
  v7 = *(_DWORD *)dword_301A0ED0;
  if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0
                 + 4 * *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 176)) + 424)
                 + 524)
    || *(_DWORD *)(dword_301A0DA8 + 112) )
  {
    if ( *(int *)(v7 + 4) < 6 && *(_BYTE *)(dword_301A0ED0 + 10) )
      *(_DWORD *)(v7 + 980) = ~(unsigned __int16)*(_DWORD *)(v7 + 980) & 0x200 | 0xB;
    *(_DWORD *)(*(_DWORD *)v6 + 44) = *(_DWORD *)(dword_301A0DA8 + 488);
    v8 = *(_DWORD *)v6;
    *(_DWORD *)(*(_DWORD *)v6 + 4 * (*(_DWORD *)(*(_DWORD *)v6 + 132) & 3) + 136) = 151;
  }
  else
  {
    if ( *(int *)(v7 + 4) < 6 && *(_BYTE *)(dword_301A0ED0 + 10) )
      *(_DWORD *)(v7 + 980) = ~(unsigned __int16)*(_DWORD *)(v7 + 980) & 0x200 | 0xC;
    *(_DWORD *)(*(_DWORD *)v6 + 44) = *(_DWORD *)(dword_301A0DA8 + 492);
    v8 = *(_DWORD *)v6;
    *(_DWORD *)(*(_DWORD *)v6 + 4 * (*(_DWORD *)(*(_DWORD *)v6 + 132) & 3) + 136) = 152;
  }
  *(_DWORD *)(v8 + 4 * ((*(_DWORD *)(v8 + 132))++ & 3) + 152) = 0;
  *(_DWORD *)(*(_DWORD *)v6 + 180) = (*(_DWORD *)(*(_DWORD *)v6 + 180) == 8) + 5;
  v0 = *(_DWORD **)dword_301A0ED0;
  v1 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180);
  if ( v1 == 7 || v1 == 8 )
  {
    v2 = dword_301A0DA8;
    result = *(_DWORD *)(dword_301A0DA8 + 504);
    if ( result )
    {
      if ( result >= *(_DWORD *)(dword_301A0DA8 + 500) )
        result = *(_DWORD *)(dword_301A0DA8 + 500);
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    v2 = dword_301A0DA8;
    if ( v0[*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v0[44]) + 424) + 131] || *(_DWORD *)(dword_301A0DA8 + 112) )
      result = *(_DWORD *)(dword_301A0DA8 + 488);
    else
      result = *(_DWORD *)(dword_301A0DA8 + 492);
    v4 = *(_DWORD *)(dword_301A0DA8 + 496);
    if ( v4 && v4 < result )
      result = *(_DWORD *)(dword_301A0DA8 + 496);
  }
  if ( *(_DWORD *)(v2 + 712) && ((1 << (v0[44] & 0x1F)) & v0[((int)v0[44] >> 5) + 199]) != 0 )
  {
    if ( !result )
      result = v0[11];
    v5 = *(_DWORD *)(v2 + 476);
    if ( v5 < result )
      result = v5;
    if ( !result )
    {
      result = 1;
      v0[12] = 1;
      return result;
    }
  }
  else if ( !result )
  {
    return result;
  }
  v0[12] = result;
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30011270) --------------------------------------------------------
int sub_30011270()
{
  _DWORD *v0; // edi
  int v1; // eax
  int v2; // esi
  int v3; // ecx
  int v4; // esi
  int v5; // ebx
  _DWORD *v6; // edi
  int result; // eax
  int *v8; // eax
  int *v9; // esi
  int v10; // eax
  int v11; // eax

  v5 = dword_301A0ED0;
  v6 = *(_DWORD **)dword_301A0ED0;
  result = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180);
  if ( !result || result == 3 || result == 4 )
  {
    result = v6[44];
    if ( result )
    {
      if ( result <= dword_300F0FB0 )
      {
        if ( !*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * result) + 736) && (int)v6[1] < 6 )
        {
          if ( *((_DWORD *)Destination + 33707) )
          {
            v8 = sub_30002F60((_DWORD *)Destination + 33707, v6[43]);
            v9 = v8;
            if ( v8 )
            {
              if ( v8[28] )
              {
                v10 = rand();
                sub_300030C0((__int16 *)&v9[4 * (v10 % v9[28]) + 29], v6, 1, 0, 1);
                v5 = dword_301A0ED0;
              }
            }
          }
        }
        if ( !*(_DWORD *)(dword_301A0DA8 + 760) || !*(_DWORD *)(dword_301A0DA8 + 500) )
          return sub_30011160();
        sub_30010E10(13);
        *(_DWORD *)(*(_DWORD *)v5 + 44) = *(_DWORD *)(dword_301A0DA8 + 500);
        *(_DWORD *)(*(_DWORD *)v5 + 180) = 7;
        v11 = *(_DWORD *)v5;
        *(_DWORD *)(v11 + 4 * (*(_DWORD *)(*(_DWORD *)v5 + 132) & 3) + 136) = 153;
        *(_DWORD *)(v11 + 4 * ((*(_DWORD *)(v11 + 132))++ & 3) + 152) = 0;
        v0 = *(_DWORD **)dword_301A0ED0;
        v1 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180);
        if ( v1 == 7 || v1 == 8 )
        {
          v2 = dword_301A0DA8;
          result = *(_DWORD *)(dword_301A0DA8 + 504);
          if ( result )
          {
            if ( result >= *(_DWORD *)(dword_301A0DA8 + 500) )
              result = *(_DWORD *)(dword_301A0DA8 + 500);
          }
          else
          {
            result = 0;
          }
        }
        else
        {
          v2 = dword_301A0DA8;
          if ( v0[*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v0[44]) + 424) + 131]
            || *(_DWORD *)(dword_301A0DA8 + 112) )
          {
            result = *(_DWORD *)(dword_301A0DA8 + 488);
          }
          else
          {
            result = *(_DWORD *)(dword_301A0DA8 + 492);
          }
          v3 = *(_DWORD *)(dword_301A0DA8 + 496);
          if ( v3 && v3 < result )
            result = *(_DWORD *)(dword_301A0DA8 + 496);
        }
        if ( *(_DWORD *)(v2 + 712) && ((1 << (v0[44] & 0x1F)) & v0[((int)v0[44] >> 5) + 199]) != 0 )
        {
          if ( !result )
            result = v0[11];
          v4 = *(_DWORD *)(v2 + 476);
          if ( v4 < result )
            result = v4;
          if ( !result )
          {
            result = 1;
            v0[12] = 1;
            return result;
          }
        }
        else if ( !result )
        {
          return result;
        }
        v0[12] = result;
      }
    }
  }
  return result;
}
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300113A0) --------------------------------------------------------
void __cdecl sub_300113A0(int a1, int a2)
{
  int *v2; // esi
  int v3; // eax
  _DWORD *v4; // edi
  int v5; // ecx
  int v6; // eax
  int v7; // eax
  _DWORD *v8; // ebx
  int *v9; // eax
  int *v10; // edi
  int v11; // eax
  int v12; // edi
  int v13; // esi
  int v14; // esi
  int v15; // eax
  int v16; // [esp+8h] [ebp-8h]
  _DWORD *v17; // [esp+Ch] [ebp-4h]

  if ( a2 >= 0 && a2 <= dword_300F0FB0 )
  {
    v2 = (int *)dword_301A0ED0;
    if ( (!a2 || ((1 << (a2 & 0x1F)) & *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 4 * (a2 >> 5) + 780)) != 0)
      && *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180) != 2 )
    {
      *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 48) = 0;
      if ( a1
        && (v3 = *v2, ((1 << (a1 & 0x1F)) & *(_DWORD *)(*v2 + 4 * (a1 >> 5) + 780)) != 0)
        && *(int *)(v3 + 52) <= 0 )
      {
        v4 = *(_DWORD **)(dword_300F0FB4 + 4 * a1);
        v17 = v4;
        if ( !a2 || (v16 = 1, a2 != v4[194]) )
          v16 = 0;
        v5 = 1;
        if ( v4[184] && !*(_DWORD *)(v3 + 4 * v4[106] + 524) )
          v5 = 0;
        *(_DWORD *)(v3 + 52) = 0;
        if ( v16 )
        {
          v6 = *v2;
          *(_DWORD *)(v6 + 4 * (*(_DWORD *)(*v2 + 132) & 3) + 136) = 157;
          *(_DWORD *)(v6 + 4 * ((*(_DWORD *)(v6 + 132))++ & 3) + 152) = 0;
          sub_30010E10(15);
        }
        else
        {
          if ( v5 )
          {
            v7 = *v2;
            *(_DWORD *)(v7 + 4 * (*(_DWORD *)(*v2 + 132) & 3) + 136) = 156;
            *(_DWORD *)(v7 + 4 * ((*(_DWORD *)(v7 + 132))++ & 3) + 152) = 0;
            sub_30010E10(9);
          }
          v8 = (_DWORD *)*v2;
          if ( *(int *)(*v2 + 4) < 6 && *((_DWORD *)Destination + 33191) )
          {
            v9 = sub_30002F60((_DWORD *)Destination + 33191, v8[43]);
            v10 = v9;
            if ( v9 && v9[28] )
            {
              v11 = rand();
              sub_300030C0((__int16 *)&v10[4 * (v11 % v10[28]) + 29], v8, 1, 0, 0);
              v2 = (int *)dword_301A0ED0;
            }
            v4 = v17;
          }
        }
        *(_DWORD *)(*v2 + 180) = 2;
        sub_3000CA00();
        if ( v16 )
        {
          *(_DWORD *)(*v2 + 44) = v4[130];
          v12 = *v2;
          v13 = sub_300103A0(*v2, a1, 1);
          if ( v13 )
            sub_30010330(a2, v12, v13);
        }
        else
        {
          *(_DWORD *)(*v2 + 44) = v4[128];
        }
      }
      else
      {
        *(_DWORD *)(*v2 + 44) = 0;
        *(_DWORD *)(*v2 + 180) = 2;
        *(_DWORD *)(*v2 + 52) = 0;
        v14 = *v2;
        v15 = *(_DWORD *)(v14 + 12);
        if ( (v15 & 1) != 0 )
          *(_DWORD *)(v14 + 12) = v15 | 0x400;
      }
    }
  }
}
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300115F0) --------------------------------------------------------
int sub_300115F0()
{
  _BYTE *v0; // esi
  int v1; // eax
  int v2; // edx
  int v3; // ebx
  int v4; // ebp
  int v5; // edi
  int result; // eax
  int v7; // esi
  int v8; // eax
  int v9; // eax
  int v10; // edx
  int v11; // eax
  int v12; // esi
  _DWORD *v13; // ebx
  int *v14; // eax
  int *v15; // edi
  int v16; // eax

  v0 = (_BYTE *)dword_301A0ED0;
  v1 = *(_DWORD *)dword_301A0ED0;
  if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180) != 2 )
    return 0;
  v2 = *(_DWORD *)(v1 + 12);
  if ( (v2 & 0x10) != 0
    || (v3 = *(unsigned __int8 *)(dword_301A0ED0 + 10),
        ((1 << (*(_BYTE *)(dword_301A0ED0 + 10) & 0x1F)) & *(_DWORD *)(v1 + 4 * (v3 >> 5) + 780)) == 0)
    || (v2 & 0x100000) != 0
    || ((1 << (v3 & 0x1F)) & *(_DWORD *)(v1 + 4 * (v3 >> 5) + 780)) == 0
    || v3 > dword_300F0FB0 )
  {
    v3 = 0;
  }
  if ( ((1 << (v3 & 0x1F)) & *(_DWORD *)(v1 + 4 * (v3 >> 5) + 780)) == 0 )
    v3 = 0;
  v4 = *(_DWORD *)(v1 + 176);
  v5 = dword_300F0FB4;
  *(_DWORD *)(v1 + 176) = (unsigned __int8)v3;
  dword_301A0DA8 = *(_DWORD *)(v5 + 4 * *(_DWORD *)(*(_DWORD *)v0 + 176));
  if ( v4 == v3 )
  {
    *(_DWORD *)(*(_DWORD *)v0 + 180) = 0;
    if ( *(int *)(*(_DWORD *)v0 + 4) < 6 )
    {
      if ( v0[10] )
        *(_DWORD *)(*(_DWORD *)v0 + 980) = ~(unsigned __int16)*(_DWORD *)(*(_DWORD *)v0 + 980) & 0x200;
    }
    result = 1;
  }
  else if ( v4 )
  {
    *(_DWORD *)(*(_DWORD *)v0 + 180) = 1;
    v9 = *(_DWORD *)(*(_DWORD *)v0 + 12);
    if ( (v9 & 1) != 0 )
      *(_DWORD *)(*(_DWORD *)v0 + 12) = v9 | 0x400;
    if ( v3 && v3 == *(_DWORD *)(*(_DWORD *)(v5 + 4 * v4) + 776) )
    {
      v10 = *(_DWORD *)(*(_DWORD *)(v5 + 4 * v3) + 524);
    }
    else
    {
      v11 = *(_DWORD *)v0;
      *(_DWORD *)(v11 + 4 * (*(_DWORD *)(*(_DWORD *)v0 + 132) & 3) + 136) = 155;
      *(_DWORD *)(v11 + 4 * ((*(_DWORD *)(v11 + 132))++ & 3) + 152) = 0;
      v10 = *(_DWORD *)(*(_DWORD *)(v5 + 4 * v3) + 516);
    }
    *(_DWORD *)(*(_DWORD *)v0 + 44) = v10;
    sub_30003460(1);
    sub_30003460(1);
    if ( v3 && v3 == *(_DWORD *)(*(_DWORD *)(v5 + 4 * v4) + 776) )
    {
      v12 = *(_DWORD *)v0;
      if ( *(float *)(v12 + 984) < 128.0 )
        *(_DWORD *)(v12 + 984) = 1124073472;
      sub_30010E10(16);
      result = 1;
    }
    else
    {
      v13 = *(_DWORD **)v0;
      if ( *(int *)(*(_DWORD *)v0 + 4) < 6 )
      {
        if ( *((_DWORD *)Destination + 33320) )
        {
          v14 = sub_30002F60((_DWORD *)Destination + 33320, v13[43]);
          v15 = v14;
          if ( v14 )
          {
            if ( v14[28] )
            {
              v16 = rand();
              sub_300030C0((__int16 *)&v15[4 * (v16 % v15[28]) + 29], v13, 1, 0, 0);
              v0 = (_BYTE *)dword_301A0ED0;
            }
          }
        }
      }
      *(_DWORD *)(*(_DWORD *)v0 + 984) = 1132396544;
      sub_30010E10(10);
      result = 1;
    }
  }
  else
  {
    *(_DWORD *)(*(_DWORD *)v0 + 180) = 1;
    *(_DWORD *)(*(_DWORD *)v0 + 44) = *(_DWORD *)(*(_DWORD *)(v5 + 4 * v3) + 516);
    *(_DWORD *)(*(_DWORD *)v0 + 984) = 1132396544;
    sub_30010E10(10);
    v7 = *(_DWORD *)v0;
    v8 = *(_DWORD *)(v7 + 12);
    if ( (v8 & 1) != 0 )
      *(_DWORD *)(v7 + 12) = v8 | 0x400;
    result = 1;
  }
  return result;
}
// 30003460: using guessed type double __cdecl sub_30003460(_DWORD);
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300118A0) --------------------------------------------------------
int sub_300118A0()
{
  _BYTE *v0; // ecx

  v0 = (_BYTE *)dword_301A0ED0;
  if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180) != 1 )
    return 0;
  *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180) = 0;
  if ( *(int *)(*(_DWORD *)v0 + 4) < 6 )
  {
    if ( v0[10] )
      *(_DWORD *)(*(_DWORD *)v0 + 980) = ~(unsigned __int16)*(_DWORD *)(*(_DWORD *)v0 + 980) & 0x200;
  }
  return 1;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300118F0) --------------------------------------------------------
int sub_300118F0()
{
  int v0; // ecx
  int v1; // edx
  int v2; // esi
  int v3; // eax
  int v4; // ecx

  v0 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 176));
  v1 = *(_DWORD *)(v0 + 424);
  if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 4 * *(_DWORD *)(v0 + 416) + 268) )
  {
    v2 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 4 * v1 + 524);
    v3 = dword_300959D0[v1];
    if ( v2 < v3 )
    {
      if ( !*(_DWORD *)(dword_301A0DA8 + 756) )
        return 1;
      v4 = *(_DWORD *)(dword_301A0DA8 + 764);
      if ( v4 && v4 < v3 )
      {
        if ( v3 - v2 >= v4 )
          return 1;
      }
      else if ( !v2 )
      {
        return 1;
      }
    }
  }
  return 0;
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30011970) --------------------------------------------------------
int sub_30011970()
{
  int v0; // ecx
  int v1; // ebx
  int v2; // eax
  int v3; // ebp
  int v4; // edx
  int v5; // esi
  int v6; // ebx
  int v7; // esi
  int v8; // eax
  int v9; // eax
  _DWORD *v10; // esi
  int result; // eax
  int v12; // eax
  int v13; // edx
  int v14; // ecx

  if ( *(_DWORD *)(dword_301A0DA8 + 712) )
  {
    v7 = dword_301A0ED0;
    v8 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 176);
    if ( ((1 << (v8 & 0x1F)) & *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 4 * (v8 >> 5) + 796)) != 0 )
    {
      *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 4 * (v8 >> 5) + 796) &= ~(1 << (v8 & 0x1F));
      v9 = *(_DWORD *)v7;
      *(_DWORD *)(v9 + 4 * (*(_DWORD *)(*(_DWORD *)v7 + 132) & 3) + 136) = 163;
      *(_DWORD *)(v9 + 4 * ((*(_DWORD *)(v9 + 132))++ & 3) + 152) = 0;
      v10 = *(_DWORD **)v7;
      result = v10[45];
      if ( (result == 7 || result == 8) && !*(_DWORD *)(dword_301A0DA8 + 504) )
        return result;
      if ( v10[11] )
      {
        if ( result == 7 || result == 8 )
        {
          v12 = *(_DWORD *)(dword_301A0DA8 + 504);
          v13 = *(_DWORD *)(dword_301A0DA8 + 500);
          if ( v12 < v13 )
            goto LABEL_18;
        }
        else
        {
          if ( v10[*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v10[44]) + 424) + 131]
            || *(_DWORD *)(dword_301A0DA8 + 112) )
          {
            v12 = *(_DWORD *)(dword_301A0DA8 + 488);
          }
          else
          {
            v12 = *(_DWORD *)(dword_301A0DA8 + 492);
          }
          v13 = *(_DWORD *)(dword_301A0DA8 + 496);
          if ( !v13 || v13 >= v12 )
          {
LABEL_18:
            v14 = *(_DWORD *)(dword_301A0DA8 + 476);
            if ( v14 >= v12 )
              v14 = 1;
            result = v12 - v14;
            if ( result >= 1 )
            {
              v10[12] = result;
              return result;
            }
            goto LABEL_23;
          }
        }
        v12 = v13;
        goto LABEL_18;
      }
    }
  }
LABEL_23:
  v0 = *(_DWORD *)dword_301A0ED0;
  v1 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180);
  if ( v1 != 7 && v1 != 8 || (result = *(_DWORD *)(dword_301A0DA8 + 768)) != 0 )
  {
    v2 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(v0 + 176));
    v3 = *(_DWORD *)(v2 + 416);
    v4 = *(_DWORD *)(v0 + 4 * v3 + 268);
    v5 = *(_DWORD *)(v2 + 424);
    result = dword_300959D0[v5] - *(_DWORD *)(v0 + 4 * v5 + 524);
    if ( result > v4 )
      result = *(_DWORD *)(v0 + 4 * v3 + 268);
    if ( v1 == 7 || v1 == 8 )
    {
      v6 = *(_DWORD *)(dword_301A0DA8 + 768);
    }
    else
    {
      v6 = *(_DWORD *)(dword_301A0DA8 + 764);
      if ( !v6 )
      {
LABEL_36:
        if ( result )
        {
          *(_DWORD *)(v0 + 4 * v3 + 268) = v4 - result;
          *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 4 * v5 + 524) += result;
        }
        return result;
      }
    }
    if ( v6 < dword_300959D0[v5] && result > v6 )
      result = v6;
    goto LABEL_36;
  }
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30011AC0) --------------------------------------------------------
BOOL __cdecl sub_30011AC0(int a1)
{
  int v1; // esi
  _DWORD *v2; // eax
  int v3; // ecx
  BOOL result; // eax
  int v5; // ecx
  int v6; // ebp
  int v7; // edi
  int v8; // eax
  int v9; // edi
  _DWORD *v10; // eax
  int v11; // ecx
  int v12; // esi

  v1 = dword_301A0ED0;
  v2 = *(_DWORD **)dword_301A0ED0;
  v3 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180);
  if ( v3 != 7 && v3 != 8 )
  {
    if ( v3 == 9 )
    {
      v2[45] = 0;
      sub_30010E10(0);
      return 0;
    }
    if ( v3 != 5 && v3 != 6 )
      return 0;
    if ( a1 )
    {
      sub_30011970();
      v2 = *(_DWORD **)v1;
      if ( *(_DWORD *)(*(_DWORD *)v1 + 44) )
        return 1;
    }
    else if ( v2[11] )
    {
      return a1 != 0;
    }
    v5 = v2[44];
    v2[(v5 >> 5) + 199] &= ~(1 << (v5 & 0x1F));
    v6 = dword_301A0DA8;
    if ( *(_DWORD *)(dword_301A0DA8 + 760) )
    {
      v7 = *(_DWORD *)v1;
      if ( *(_DWORD *)(*(_DWORD *)v1 + 180) != 6 && sub_300118F0() )
      {
LABEL_14:
        sub_30011160();
        return 1;
      }
      if ( *(_DWORD *)(v6 + 508) )
      {
        *(_DWORD *)(v7 + 180) = 9;
        sub_30010E10(14);
        *(_DWORD *)(*(_DWORD *)v1 + 44) = *(_DWORD *)(dword_301A0DA8 + 508);
        v8 = *(_DWORD *)v1;
        *(_DWORD *)(v8 + 4 * (*(_DWORD *)(*(_DWORD *)v1 + 132) & 3) + 136) = 154;
        *(_DWORD *)(v8 + 4 * ((*(_DWORD *)(v8 + 132))++ & 3) + 152) = 0;
        return 1;
      }
      *(_DWORD *)(v7 + 180) = 0;
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)v1 + 180) = 0;
    }
    sub_30010E10(0);
    return a1 != 0;
  }
  if ( a1 )
    sub_30011970();
  v9 = *(_DWORD *)v1;
  if ( *(_DWORD *)(*(_DWORD *)v1 + 44) )
    return 1;
  if ( (*(_DWORD *)(v9 + 180) != 8
     || !*(_DWORD *)(v9 + 4 * *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(v9 + 176)) + 424) + 524))
    && sub_300118F0() )
  {
    goto LABEL_14;
  }
  v10 = (_DWORD *)(v9 + 4 * (*(int *)(v9 + 176) >> 5) + 796);
  *v10 &= ~(1 << (*(_DWORD *)(v9 + 176) & 0x1F));
  v11 = *(_DWORD *)v1;
  if ( *(_DWORD *)(dword_301A0DA8 + 508) )
  {
    *(_DWORD *)(v11 + 180) = 9;
    sub_30010E10(14);
    *(_DWORD *)(*(_DWORD *)v1 + 44) = *(_DWORD *)(dword_301A0DA8 + 508);
    v12 = *(_DWORD *)v1;
    *(_DWORD *)(v12 + 4 * (*(_DWORD *)(v12 + 132) & 3) + 136) = 154;
    *(_DWORD *)(v12 + 4 * ((*(_DWORD *)(v12 + 132))++ & 3) + 152) = 0;
    result = 1;
  }
  else
  {
    *(_DWORD *)(v11 + 180) = 0;
    sub_30010E10(0);
    result = 0;
  }
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30011D20) --------------------------------------------------------
int *sub_30011D20()
{
  int v0; // edi
  int v1; // edx
  int v2; // ecx
  int v3; // eax
  int v4; // esi
  int *result; // eax
  int *v6; // edi
  int v7; // eax
  int v8; // eax
  int v9; // ebx
  int v10; // ebp
  int v11; // [esp+0h] [ebp-4h]

  v0 = dword_301A0ED0;
  v11 = 0;
  v1 = *(_BYTE *)(dword_301A0ED0 + 9) & 8;
  if ( *(_DWORD *)(dword_301A0DA8 + 760) )
  {
    v2 = *(_DWORD *)dword_301A0ED0;
    v3 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180);
    if ( (v3 == 7 || v3 == 5) && (*(_BYTE *)(dword_301A0ED0 + 8) & 1) != 0 && (*(_BYTE *)(dword_301A0ED0 + 32) & 1) == 0 )
    {
      if ( v3 == 7 )
        *(_DWORD *)(v2 + 180) = 8;
      else
        *(_DWORD *)(v2 + 180) = 6;
    }
  }
  v4 = *(_DWORD *)v0;
  result = (int *)(*(_DWORD *)(*(_DWORD *)v0 + 180) - 1);
  switch ( *(_DWORD *)(*(_DWORD *)v0 + 180) )
  {
    case 1:
    case 2:
    case 0xA:
    case 0xB:
      return result;
    case 5:
    case 6:
    case 7:
    case 8:
    case 9:
      result = *(int **)(v0 + 232);
      if ( result )
      {
        result = *(int **)(*(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(v4 + 176)) + 736);
        if ( !result && *(int *)(v4 + 4) < 6 )
        {
          result = (int *)(Destination + 134828);
          if ( *((_DWORD *)Destination + 33707) )
          {
            result = sub_30002F60(result, *(_DWORD *)(v4 + 172));
            v6 = result;
            if ( result )
            {
              result = (int *)result[28];
              if ( result )
              {
                v7 = rand();
                result = (int *)sub_300030C0((__int16 *)&v6[4 * (v7 % v6[28]) + 29], (_DWORD *)v4, 1, 0, 1);
              }
            }
          }
        }
      }
      break;
    default:
      v8 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(v4 + 176));
      v9 = *(_DWORD *)(v8 + 416);
      v10 = *(_DWORD *)(v8 + 424);
      if ( v1 && sub_300118F0() )
        v11 = 1;
      if ( !*(_DWORD *)(v4 + 4 * v10 + 524)
        && *(_DWORD *)(v4 + 4 * v9 + 268)
        && *(_DWORD *)(v4 + 180) != 3
        && ((*(_BYTE *)(v4 + 12) & 1) == 0 || !*(_BYTE *)(v0 + 24) && !*(_BYTE *)(v0 + 25))
        || (result = (int *)v11) != 0 )
      {
        result = (int *)sub_30011270();
      }
      break;
  }
  return result;
}
// 30011D80: conditional instruction was optimized away because of 'eax.4==5'
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30011F30) --------------------------------------------------------
void sub_30011F30()
{
  int v0; // esi
  double v1; // st7
  _BYTE *v2; // edi
  _DWORD *v3; // ebx
  int v4; // ebp
  int v5; // eax
  double v6; // st7
  int *v7; // ecx
  double v8; // st7
  int v9; // ecx
  int v10; // edx
  int v11; // ecx
  float v12; // [esp+0h] [ebp-24h]
  float v13; // [esp+4h] [ebp-20h]
  float v14; // [esp+18h] [ebp-Ch]
  float v15; // [esp+1Ch] [ebp-8h]
  float v16; // [esp+20h] [ebp-4h]

  v0 = dword_301A0DA8;
  v1 = *(float *)(dword_301A0DA8 + 588);
  v2 = (_BYTE *)dword_301A0ED0;
  if ( v1 == 0.0 )
  {
    v15 = 1.0;
    v6 = 0.0;
  }
  else
  {
    v3 = *(_DWORD **)dword_301A0ED0;
    v4 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 84);
    if ( v4 != 1023 || v3[1] == 1 )
    {
      v5 = v3[32];
      if ( (v5 & 0x40) != 0 )
      {
        v1 = v1 * *(float *)(dword_301A0DA8 + 608);
      }
      else if ( (v5 & 0x20) != 0 )
      {
        v1 = v1 * *(float *)(dword_301A0DA8 + 604);
      }
    }
    else
    {
      v1 = v1 * 0.5;
    }
    v15 = flt_301A0D44 * v1;
    v6 = 0.0;
    if ( v3[46] != 1065353216 )
    {
      v14 = 0.0;
      if ( *(float *)(dword_301A0DA8 + 596) != 0.0 )
      {
        v7 = (int *)(dword_301A0ED0 + 12);
        v16 = 1.0 / flt_301A0D44;
        do
        {
          v13 = (double)v7[6] * 0.0054931641;
          v12 = (double)*v7 * 0.0054931641;
          v8 = sub_3003DA20(v12, v13);
          v7 = (int *)(v9 + 4);
          v6 = fabs(v8) * *(float *)(v0 + 596) * 0.0099999998 * v16 + v14;
          v14 = v6;
        }
        while ( v10 != 1 );
      }
      if ( *(float *)(v0 + 600) != 0.0 && (v2[24] || v2[25]) )
        v6 = v6 + *(float *)(v0 + 600);
      if ( v4 == 1023 && v3[1] != 1 )
        v6 = v6 + 1.28 + 1.28;
      v6 = v6 * flt_301A0D44;
    }
  }
  *(float *)(*(_DWORD *)v2 + 984) = (v6 - v15) * 255.0 + *(float *)(*(_DWORD *)v2 + 984);
  v11 = *(_DWORD *)v2;
  if ( *(float *)(*(_DWORD *)v2 + 984) >= 0.0 )
  {
    if ( *(float *)(v11 + 984) > 255.0 )
      *(_DWORD *)(v11 + 984) = 1132396544;
  }
  else
  {
    *(_DWORD *)(v11 + 984) = 0;
  }
}
// 3001201B: variable 'v9' is possibly undefined
// 30012031: variable 'v10' is possibly undefined
// 301A0D44: using guessed type float flt_301A0D44;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300120F0) --------------------------------------------------------
int sub_300120F0()
{
  _BYTE *v0; // esi
  int v1; // eax
  int v2; // edi
  int v3; // ecx
  int v4; // ecx
  int v5; // eax
  int v6; // edx
  int v7; // eax
  int v8; // esi

  v0 = (_BYTE *)dword_301A0ED0;
  v1 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 44);
  if ( v1 )
  {
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 44) = v1 - dword_301A0D48;
    v2 = *(_DWORD *)v0;
    if ( *(int *)(*(_DWORD *)v0 + 44) <= 0 )
    {
      if ( *(_DWORD *)(dword_301A0DA8 + 708)
        && (v0[8] & 1) != 0
        && (v3 = *(_DWORD *)(v2 + 176), v3 == (unsigned __int8)v0[10])
        && sub_30010DC0(v3) )
      {
        *(_DWORD *)(v2 + 44) = 1;
        v5 = *(_DWORD *)(*(_DWORD *)v0 + 180);
        if ( v5 == 4 )
        {
          sub_30010E80();
        }
        else if ( v5 == 3 || v5 == 10 || v5 == 11 )
        {
          sub_30010E40(v4, 0);
          *(_DWORD *)(*(_DWORD *)v0 + 180) = v6;
        }
      }
      else
      {
        *(_DWORD *)(v2 + 44) = 0;
      }
    }
  }
  v7 = *(_DWORD *)(*(_DWORD *)v0 + 48);
  if ( !v7 )
    return 0;
  *(_DWORD *)(*(_DWORD *)v0 + 48) = v7 - dword_301A0D48;
  v8 = *(_DWORD *)v0;
  if ( *(int *)(v8 + 48) > 0 )
    return 0;
  *(_DWORD *)(v8 + 48) = 0;
  return 1;
}
// 3001216F: variable 'v4' is possibly undefined
// 30012176: variable 'v6' is possibly undefined
// 301A0D48: using guessed type int dword_301A0D48;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300121C0) --------------------------------------------------------
void sub_300121C0()
{
  _DWORD *v0; // edx
  int v1; // eax
  int v2; // ebx
  int v3; // edx
  unsigned __int8 v4; // cl
  int v5; // eax

  v0 = *(_DWORD **)dword_301A0ED0;
  if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 44) )
  {
    v1 = v0[45];
    if ( v1 != 5 && v1 != 7 && v1 != 9 && v1 != 8 && v1 != 6 && v1 != 4 && (v1 == 3 || v1 == 10 || v1 == 11 || v0[12]) )
      return;
  }
  v2 = v0[3];
  if ( (v2 & 0x10) != 0 || (v2 & 0x100000) != 0 )
  {
    v3 = v0[44];
    if ( v3 )
      sub_300113A0(v3, 0);
    return;
  }
  v4 = *(_BYTE *)(dword_301A0ED0 + 10);
  v5 = v0[44];
  if ( v5 == v4 )
    goto LABEL_22;
  if ( (v2 & 0x4000) == 0 || !v5 )
  {
    if ( !v4 || ((1 << (v4 & 0x1F)) & v0[((int)v4 >> 5) + 195]) != 0 )
    {
      sub_300113A0(v5, v4);
      return;
    }
LABEL_22:
    if ( !v5 )
      return;
  }
  if ( ((1 << (v5 & 0x1F)) & v0[(v5 >> 5) + 195]) == 0 )
    sub_300113A0(v5, 0);
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300122C0) --------------------------------------------------------
int __cdecl sub_300122C0(int a1)
{
  int v1; // ecx
  int v2; // esi

  v2 = dword_301A0ED0;
  if ( (*(_BYTE *)(dword_301A0ED0 + 8) & 1) != 0 || a1 )
    return 0;
  if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180) == 3 )
    sub_30010E40(v1, 0);
  *(_DWORD *)(*(_DWORD *)v2 + 180) = 0;
  return 1;
}
// 300122E2: variable 'v1' is possibly undefined
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30012300) --------------------------------------------------------
int __cdecl sub_30012300(int a1)
{
  int v1; // ecx
  int v2; // esi
  int v3; // eax
  _DWORD *v4; // ebx
  int *v5; // eax
  int *v6; // edi
  int v7; // eax
  _DWORD *v8; // eax
  int v9; // esi
  int result; // eax

  v1 = dword_301A0DA8;
  v2 = dword_301A0ED0;
  if ( *(_DWORD *)(dword_301A0DA8 + 112) == 1 )
  {
    if ( !a1 )
    {
      if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0
                     + 4
                     * *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 176)) + 424)
                     + 524) )
      {
        *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 52) = *(_DWORD *)(dword_301A0DA8 + 528);
        sub_30010E10(17);
        v3 = *(_DWORD *)v2;
        *(_DWORD *)(v3 + 4 * (*(_DWORD *)(*(_DWORD *)v2 + 132) & 3) + 136) = 158;
        *(_DWORD *)(v3 + 4 * ((*(_DWORD *)(v3 + 132))++ & 3) + 152) = 0;
        v1 = dword_301A0DA8;
      }
      *(_DWORD *)(*(_DWORD *)v2 + 48) = *(_DWORD *)(v1 + 480);
      *(_DWORD *)(*(_DWORD *)v2 + 44) = 0;
    }
  }
  else
  {
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 48) = *(_DWORD *)(dword_301A0DA8 + 460);
    *(_DWORD *)(*(_DWORD *)v2 + 44) = *(_DWORD *)(dword_301A0DA8 + 468);
    if ( *(_DWORD *)(dword_301A0DA8 + 744) )
      *(_DWORD *)(*(_DWORD *)v2 + 48) = (unsigned __int64)((1.0 - *(float *)(*(_DWORD *)v2 + 184))
                                                         * (1.0
                                                          / *(float *)(dword_301A0DA8 + 1064)));
    v4 = *(_DWORD **)v2;
    if ( *(int *)(*(_DWORD *)v2 + 4) < 6 )
    {
      if ( *((_DWORD *)Destination + 32675) )
      {
        v5 = sub_30002F60((_DWORD *)Destination + 32675, v4[43]);
        v6 = v5;
        if ( v5 )
        {
          if ( v5[28] )
          {
            v7 = rand();
            sub_300030C0((__int16 *)&v6[4 * (v7 % v6[28]) + 29], v4, 1, 0, 1);
            v2 = dword_301A0ED0;
          }
        }
      }
    }
    if ( *(_DWORD *)(dword_301A0DA8 + 712) )
    {
      v8 = (_DWORD *)(*(_DWORD *)v2 + 4 * (*(int *)(*(_DWORD *)v2 + 176) >> 5) + 796);
      *v8 |= 1 << (*(_BYTE *)(*(_DWORD *)v2 + 176) & 0x1F);
    }
  }
  *(_DWORD *)(*(_DWORD *)v2 + 180) = 3;
  v9 = *(_DWORD *)v2;
  result = *(_DWORD *)(v9 + 12);
  if ( (result & 1) != 0 )
  {
    result |= 0x400u;
    *(_DWORD *)(v9 + 12) = result;
  }
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300124C0) --------------------------------------------------------
int sub_300124C0()
{
  _BYTE *v0; // esi
  int v1; // ecx
  int v2; // edx
  int result; // eax
  BOOL v4; // edx
  int v5; // ecx
  int v6; // eax

  v0 = (_BYTE *)dword_301A0ED0;
  v1 = *(_DWORD *)dword_301A0ED0;
  v2 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 176));
  result = 1;
  if ( *(int *)(*(_DWORD *)dword_301A0ED0 + 4 * *(_DWORD *)(v2 + 424) + 524) >= 1 )
    return result;
  v4 = *(_DWORD *)(v1 + 4 * *(_DWORD *)(v2 + 416) + 268) >= 1;
  if ( *(_DWORD *)(dword_301A0DA8 + 112) != 1 )
  {
    if ( !v4 )
    {
      *(_DWORD *)(v1 + 4 * (*(_DWORD *)(v1 + 132) & 3) + 136) = 149;
      *(_DWORD *)(v1 + 4 * ((*(_DWORD *)(v1 + 132))++ & 3) + 152) = 0;
      goto LABEL_5;
    }
LABEL_12:
    sub_30011270();
    return 0;
  }
  if ( v4 )
    goto LABEL_12;
LABEL_5:
  if ( v0[10] )
  {
    v5 = *(_DWORD *)v0;
    v6 = *(_DWORD *)(*(_DWORD *)v0 + 980);
    if ( (v6 & 0xFFFFFDFF) != 0 && *(int *)(v5 + 4) < 6 )
      *(_DWORD *)(v5 + 980) = ~(_WORD)v6 & 0x200;
  }
  *(_DWORD *)(*(_DWORD *)v0 + 44) += 500;
  return 0;
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30012590) --------------------------------------------------------
int sub_30012590()
{
  int v0; // ecx
  int v1; // eax
  int result; // eax

  v0 = *(_DWORD *)dword_301A0ED0;
  v1 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0
                 + 4 * *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 176)) + 424)
                 + 524);
  if ( *(float *)(*(_DWORD *)dword_301A0ED0 + 184) <= 0.75 )
    result = 3 - (v1 != 0);
  else
    result = 6 - (v1 != 0);
  if ( *(int *)(v0 + 4) < 6 )
  {
    if ( *(_BYTE *)(dword_301A0ED0 + 10) )
      *(_DWORD *)(v0 + 980) = result | ~(unsigned __int16)*(_DWORD *)(v0 + 980) & 0x200;
  }
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30012600) --------------------------------------------------------
void sub_30012600()
{
  int *v0; // ecx
  int v1; // ecx

  v0 = (int *)dword_301A0ED0;
  if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 184) != 1065353216 )
  {
    *(float *)(*(_DWORD *)dword_301A0ED0 + 984) = *(float *)(dword_301A0DA8 + 592) * 255.0
                                                + *(float *)(*(_DWORD *)dword_301A0ED0 + 984);
    v1 = *v0;
    if ( *(float *)(v1 + 984) > 255.0 )
      *(_DWORD *)(v1 + 984) = 1132396544;
  }
}
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30012740) --------------------------------------------------------
int sub_30012740()
{
  int v0; // ecx
  int v1; // eax
  int v2; // eax
  int v3; // ecx
  int result; // eax

  v0 = dword_301A0ED0;
  v1 = *(_DWORD *)(dword_301A0DA8 + 484) - *(_DWORD *)(dword_301A0DA8 + 464);
  if ( *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 44) < v1 )
    *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 44) = v1;
  v2 = *(_DWORD *)v0;
  *(_DWORD *)(v2 + 4 * (*(_DWORD *)(*(_DWORD *)v0 + 132) & 3) + 136) = 165;
  *(_DWORD *)(v2 + 4 * ((*(_DWORD *)(v2 + 132))++ & 3) + 152) = 0;
  *(_DWORD *)(*(_DWORD *)v0 + 180) = 11;
  v3 = *(_DWORD *)v0;
  result = *(_DWORD *)(v3 + 12);
  if ( (result & 1) != 0 )
  {
    result |= 0x400u;
    *(_DWORD *)(v3 + 12) = result;
  }
  return result;
}
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300127C0) --------------------------------------------------------
int sub_300127C0()
{
  int v0; // edx
  int v1; // ecx
  int v2; // eax
  int result; // eax
  int v4; // eax

  v0 = dword_301A0ED0;
  v1 = *(_DWORD *)dword_301A0ED0;
  v2 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180);
  if ( v2 == 10 )
  {
    sub_30012740();
    result = 1;
  }
  else if ( v2 == 11 )
  {
    if ( *(_BYTE *)(dword_301A0ED0 + 10) )
    {
      v4 = *(_DWORD *)(v1 + 980);
      if ( (v4 & 0xFFFFFDFF) != 0 && *(int *)(v1 + 4) < 6 )
        *(_DWORD *)(v1 + 980) = ~(_WORD)v4 & 0x200;
    }
    *(_DWORD *)(*(_DWORD *)v0 + 180) = 0;
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30012820) --------------------------------------------------------
int __cdecl sub_30012820(int a1)
{
  int result; // eax
  int v2; // ebx
  int v3; // ecx
  _DWORD *v4; // esi
  int *v5; // eax
  int *v6; // edi
  int v7; // eax
  int v8; // eax

  result = dword_301A0DA8;
  if ( *(_DWORD *)(dword_301A0DA8 + 452) )
  {
    result = a1;
    if ( !a1 )
    {
      v2 = dword_301A0ED0;
      v3 = *(_DWORD *)dword_301A0ED0;
      result = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 48);
      if ( !result
        || (result = *(_DWORD *)(v3 + 180), result == 5)
        || result == 7
        || result == 9
        || result == 8
        || result == 6 )
      {
        if ( (*(_BYTE *)(dword_301A0ED0 + 8) & 0x20) != 0 )
        {
          result = *(_DWORD *)(v3 + 12);
          if ( (result & 0x1000) == 0 )
          {
            *(_DWORD *)(v3 + 12) = result | 0x1000;
            v4 = *(_DWORD **)v2;
            result = *(_DWORD *)(*(_DWORD *)v2 + 180) - 1;
            switch ( *(_DWORD *)(*(_DWORD *)v2 + 180) )
            {
              case 1:
              case 2:
              case 0xA:
              case 0xB:
                return result;
              default:
                if ( (int)v4[1] < 6 )
                {
                  if ( *((_DWORD *)Destination + 34094) )
                  {
                    v5 = sub_30002F60((_DWORD *)Destination + 34094, v4[43]);
                    v6 = v5;
                    if ( v5 )
                    {
                      if ( v5[28] )
                      {
                        v7 = rand();
                        sub_300030C0((__int16 *)&v6[4 * (v7 % v6[28]) + 29], v4, 1, 0, 1);
                        v2 = dword_301A0ED0;
                      }
                    }
                  }
                }
                sub_30010E10(8);
                v8 = *(_DWORD *)v2;
                *(_DWORD *)(v8 + 4 * (*(_DWORD *)(*(_DWORD *)v2 + 132) & 3) + 136) = 164;
                *(_DWORD *)(v8 + 4 * ((*(_DWORD *)(v8 + 132))++ & 3) + 152) = 0;
                if ( *(_DWORD *)(dword_301A0DA8 + 464) )
                {
                  *(_DWORD *)(*(_DWORD *)v2 + 44) = *(_DWORD *)(dword_301A0DA8 + 484);
                  *(_DWORD *)(*(_DWORD *)v2 + 48) = *(_DWORD *)(dword_301A0DA8 + 464);
                  *(_DWORD *)(*(_DWORD *)v2 + 180) = 10;
                  result = sub_3000CA00();
                }
                else
                {
                  result = sub_30012740();
                }
                break;
            }
          }
        }
        else
        {
          *(_DWORD *)(v3 + 12) &= 0xFFFFEFFF;
        }
      }
    }
  }
  return result;
}
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (300129A0) --------------------------------------------------------
int *sub_300129A0()
{
  int v0; // esi
  int v1; // ecx
  _DWORD *v2; // edx
  int v3; // esi
  int v4; // edi
  int v5; // ecx
  int v6; // eax
  _BYTE *v7; // esi
  int *result; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  _DWORD *v12; // edi
  int *v13; // eax
  int *v14; // esi
  int v15; // eax
  int v16; // esi
  int **v17; // eax
  int v18; // ecx
  int v19; // edx

  v7 = (_BYTE *)dword_301A0ED0;
  result = *(int **)dword_301A0ED0;
  if ( (*(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 12) & 0x800) == 0 )
  {
    if ( result[1] >= 6 )
    {
      result[44] = 0;
      return result;
    }
    if ( (result[32] & 0xC000) == 0 )
    {
      if ( dword_301A16CC && dword_301A16CC != 3 )
      {
        sub_30012BF0();
        v7 = (_BYTE *)dword_301A0ED0;
      }
      if ( dword_301A17EC && dword_301A17EC != 3 )
      {
        sub_30012D40();
        v7 = (_BYTE *)dword_301A0ED0;
      }
      sub_30010AA0();
      if ( *(_DWORD *)(dword_301A0DA8 + 112) == 1 )
      {
        v9 = *(_DWORD *)(*(_DWORD *)v7 + 52);
        if ( v9 > 0 )
        {
          if ( *(_DWORD *)(dword_301A0DA8 + 732) )
            *(_DWORD *)(*(_DWORD *)v7 + 52) = v9 - dword_301A0D48;
          v10 = *(_DWORD *)v7;
          if ( *(int *)(*(_DWORD *)v7 + 52) <= 50 )
          {
            *(_DWORD *)(v10 + 52) = 50;
            v11 = *(_DWORD *)v7;
            *(_DWORD *)(v11 + 4 * (*(_DWORD *)(*(_DWORD *)v7 + 132) & 3) + 136) = 159;
            *(_DWORD *)(v11 + 4 * ((*(_DWORD *)(v11 + 132))++ & 3) + 152) = 0;
            result = *(int **)v7;
            *(_DWORD *)(*(_DWORD *)v7 + 44) = 1600;
            return result;
          }
          if ( (v7[8] & 1) != 0 && *(_DWORD *)(v10 + 48) - dword_301A0D48 <= 0 )
            *(_DWORD *)(v10 + 48) = dword_301A0D48 + 1;
          if ( (v7[8] & 1) == 0 )
          {
            v12 = *(_DWORD **)v7;
            if ( *(_DWORD *)(*(_DWORD *)v7 + 48) - dword_301A0D48 <= 0 && (int)v12[1] < 6 )
            {
              if ( *((_DWORD *)Destination + 32675) )
              {
                v13 = sub_30002F60((_DWORD *)Destination + 32675, v12[43]);
                v14 = v13;
                if ( v13 )
                {
                  if ( v13[28] )
                  {
                    v15 = rand();
                    sub_300030C0((__int16 *)&v14[4 * (v15 % v14[28]) + 29], v12, 1, 0, 1);
                  }
                }
              }
            }
          }
        }
      }
      v16 = sub_300120F0();
      sub_300121C0();
      sub_30011D20();
      sub_30012820(v16);
      result = (int *)sub_30010ED0(v16);
      if ( !result )
      {
        v17 = (int **)dword_301A0ED0;
        v18 = *(_DWORD *)dword_301A0ED0;
        if ( (*(_BYTE *)(*(_DWORD *)dword_301A0ED0 + 12) & 1) != 0
          && (*(_BYTE *)(dword_301A0ED0 + 24) || *(_BYTE *)(dword_301A0ED0 + 25))
          || (v19 = *(_DWORD *)(v18 + 180), v19 == 10)
          || v19 == 11 )
        {
          *(_DWORD *)(v18 + 984) = 1132396544;
        }
        if ( v16 || (result = *v17, !result[11]) && !result[12] )
        {
          result = (int *)sub_30011AC0(v16);
          if ( !result )
          {
            result = (int *)sub_300127C0();
            if ( !result )
            {
              result = (int *)sub_300115F0();
              if ( !result )
              {
                result = (int *)sub_300118A0();
                if ( !result )
                {
                  result = *(int **)(*(_DWORD *)dword_301A0ED0 + 176);
                  if ( result )
                  {
                    result = (int *)sub_300122C0(v16);
                    if ( !result )
                    {
                      sub_30012300(v16);
                      result = (int *)sub_300124C0();
                      if ( result )
                      {
                        v3 = dword_301A0ED0;
                        result = *(int **)dword_301A0ED0;
                        if ( !*(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 48) )
                        {
                          v4 = dword_300F0FB4;
                          v5 = *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * result[44]) + 424);
                          if ( result[v5 + 131] != -1 && (result[32] & 0xC000) == 0 )
                            --result[v5 + 131];
                          if ( *(_DWORD *)(dword_301A0DA8 + 112) == 1 )
                            *(_DWORD *)(*(_DWORD *)v3 + 44) = *(_DWORD *)(dword_301A0DA8 + 468);
                          sub_30012590();
                          v6 = *(_DWORD *)v3;
                          if ( *(_DWORD *)(*(_DWORD *)v3
                                         + 4 * *(_DWORD *)(*(_DWORD *)(v4 + 4 * *(_DWORD *)(*(_DWORD *)v3 + 176)) + 424)
                                         + 524) )
                            *(_DWORD *)(v6 + 4 * (*(_DWORD *)(*(_DWORD *)v3 + 132) & 3) + 136) = 159;
                          else
                            *(_DWORD *)(v6 + 4 * (*(_DWORD *)(*(_DWORD *)v3 + 132) & 3) + 136) = 161;
                          *(_DWORD *)(v6 + 4 * ((*(_DWORD *)(v6 + 132))++ & 3) + 152) = 0;
                          sub_30012600();
                          v0 = dword_301A0ED0;
                          v1 = *(_DWORD *)dword_301A0ED0;
                          result = *(int **)(*(_DWORD *)dword_301A0ED0 + 176);
                          v2 = *(_DWORD **)(dword_300F0FB4 + 4 * (_DWORD)result);
                          if ( v2[184] && !*(_DWORD *)(v1 + 4 * v2[106] + 524) && !*(_DWORD *)(v1 + 4 * v2[104] + 268) )
                          {
                            sub_300101D0((int)result, v1);
                            result = *(int **)v0;
                            result[(*(_DWORD *)(*(_DWORD *)v0 + 132) & 3) + 34] = 149;
                            result[(result[33]++ & 3) + 38] = 0;
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  return result;
}
// 300129A0: could not find valid save-restore pair for edi
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0D48: using guessed type int dword_301A0D48;
// 301A0DA8: using guessed type int dword_301A0DA8;
// 301A0ED0: using guessed type int dword_301A0ED0;
// 301A16CC: using guessed type int dword_301A16CC;
// 301A17EC: using guessed type int dword_301A17EC;

//----- (30012BF0) --------------------------------------------------------
int sub_30012BF0()
{
  int result; // eax
  int v1; // esi

  result = dword_301A0ED0;
  v1 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 180);
  if ( dword_30078134 != v1 )
  {
    Com_Printf(" %i %s_", *(_DWORD *)(dword_301A0ED0 + 4), off_300774DC[0]);
    dword_30078134 = v1;
    Com_Printf("WEAP_STATE -- ");
    switch ( v1 )
    {
      case 0:
        result = Com_Printf("WEAPON_READY\n");
        break;
      case 1:
        result = Com_Printf("WEAPON_RAISING\n");
        break;
      case 2:
        result = Com_Printf("WEAPON_DROPPING\n");
        break;
      case 3:
        result = Com_Printf("WEAPON_FIRING\n");
        break;
      case 4:
        result = Com_Printf("WEAPON_RECHAMBERING\n");
        break;
      case 5:
        result = Com_Printf("WEAPON_RELOADING\n");
        break;
      case 6:
        result = Com_Printf("WEAPON_RELOADING_INTERUPT\n");
        break;
      case 7:
        result = Com_Printf("WEAPON_RELOAD_START\n");
        break;
      case 8:
        result = Com_Printf("WEAPON_RELOAD_START_INTERUPT\n");
        break;
      case 9:
        result = Com_Printf("WEAPON_RELOAD_END\n");
        break;
      case 10:
        result = Com_Printf("WEAPON_MELEE_WINDUP\n");
        break;
      case 11:
        result = Com_Printf("WEAPON_MELEE_RELAX\n");
        break;
      default:
        result = Com_Printf("UNKNOWN\n");
        break;
    }
  }
  return result;
}
// 300774DC: using guessed type char *off_300774DC[32];
// 30078134: using guessed type int dword_30078134;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30012D40) --------------------------------------------------------
int sub_30012D40()
{
  unsigned int v0; // esi
  int result; // eax

  v0 = *(_DWORD *)(*(_DWORD *)dword_301A0ED0 + 980) & 0xFFFFFDFF;
  Com_Printf(" %i %s_", *(_DWORD *)(dword_301A0ED0 + 4), off_300774DC[0]);
  dword_30078138 = v0;
  Com_Printf("WEAP_ANIM -- ");
  switch ( v0 & 0xFFFFFDFF )
  {
    case 0u:
      result = Com_Printf("WEAP_IDLE\n");
      break;
    case 2u:
      result = Com_Printf("WEAP_ATTACK\n");
      break;
    case 3u:
      result = Com_Printf("WEAP_ATTACK_LASTSHOT\n");
      break;
    case 4u:
      result = Com_Printf("WEAP_RECHAMBER\n");
      break;
    case 5u:
      result = Com_Printf("WEAP_ADS_ATTACK\n");
      break;
    case 6u:
      result = Com_Printf("WEAP_ADS_ATTACK_LASTSHOT\n");
      break;
    case 7u:
      result = Com_Printf("WEAP_ADS_RECHAMBER\n");
      break;
    case 8u:
      result = Com_Printf("WEAP_MELEE_ATTACK\n");
      break;
    case 9u:
      result = Com_Printf("WEAP_DROP\n");
      break;
    case 0xAu:
      result = Com_Printf("WEAP_RAISE\n");
      break;
    case 0xBu:
      result = Com_Printf("WEAP_RELOAD\n");
      break;
    case 0xCu:
      result = Com_Printf("WEAP_RELOAD_EMPTY\n");
      break;
    case 0xDu:
      result = Com_Printf("WEAP_RELOAD_START\n");
      break;
    case 0xEu:
      result = Com_Printf("WEAP_RELOAD_END\n");
      break;
    case 0xFu:
      result = Com_Printf("WEAP_ALTSWITCHFROM\n");
      break;
    case 0x10u:
      result = Com_Printf("WEAP_ALTSWITCHTO\n");
      break;
    default:
      result = Com_Printf("UNKNOWN\n");
      break;
  }
  return result;
}
// 300774DC: using guessed type char *off_300774DC[32];
// 30078138: using guessed type int dword_30078138;
// 301A0ED0: using guessed type int dword_301A0ED0;

//----- (30012F00) --------------------------------------------------------
long double __usercall sub_30012F00@<st0>(_DWORD *a1@<eax>, float a2, float a3, float a4)
{
  int v4; // ecx
  double v5; // st7
  double v6; // st7
  float v8; // [esp+0h] [ebp-4h]

  v4 = a1[51];
  if ( v4 == a1[207] )
  {
    v5 = flt_301A1A28;
  }
  else if ( v4 == a1[208] )
  {
    v5 = flt_301A1B48;
  }
  else
  {
    v5 = flt_301A1C68;
  }
  v6 = v5 * a3;
  v8 = v6;
  if ( v6 > a4 )
    v8 = a4;
  return (sin(a2 * 4.0 + 1.5707964) * 0.2 + sin(a2 + a2)) * v8 * 0.75;
}
// 301A1A28: using guessed type float flt_301A1A28;
// 301A1B48: using guessed type float flt_301A1B48;
// 301A1C68: using guessed type float flt_301A1C68;

//----- (30012F80) --------------------------------------------------------
long double __usercall sub_30012F80@<st0>(_DWORD *a1@<eax>, float a2, float a3, float a4)
{
  int v4; // ecx
  double v5; // st7
  double v6; // st7

  v4 = a1[51];
  if ( v4 == a1[207] )
  {
    v5 = flt_301A1A28;
  }
  else if ( v4 == a1[208] )
  {
    v5 = flt_301A1B48;
  }
  else
  {
    v5 = flt_301A1C68;
  }
  v6 = v5 * a3;
  if ( v6 > a4 )
    v6 = a4;
  return v6 * sin(a2);
}
// 301A1A28: using guessed type float flt_301A1A28;
// 301A1B48: using guessed type float flt_301A1B48;
// 301A1C68: using guessed type float flt_301A1C68;

//----- (30012FD0) --------------------------------------------------------
void __cdecl sub_30012FD0(float *a1)
{
  float *v1; // ecx
  int v2; // esi
  int v3; // ebx
  float *v4; // edx
  double v5; // st7
  double v6; // st7
  double v7; // st7
  double v8; // st6
  double v9; // st6
  double v11; // st6
  unsigned __int8 v12; // c2
  unsigned __int8 v13; // c3
  double v14; // st6
  double v15; // st6
  double v17; // st5
  unsigned __int8 v18; // c0
  unsigned __int8 v19; // c2
  double v20; // st6
  double v21; // st6
  double v23; // st7
  unsigned __int8 v24; // c2
  unsigned __int8 v25; // c3
  double v26; // st7
  double v27; // st7
  double v29; // st6
  unsigned __int8 v30; // c0
  unsigned __int8 v31; // c2
  double v32; // st7
  double v33; // st7
  double v35; // st7
  unsigned __int8 v36; // c2
  unsigned __int8 v37; // c3
  double v38; // st7
  double v39; // st7
  double v41; // st6
  unsigned __int8 v42; // c0
  unsigned __int8 v43; // c2
  double v44; // st7
  double v45; // st7
  double v46; // st7
  float v47; // [esp+10h] [ebp-10h]
  float v48; // [esp+10h] [ebp-10h]
  float v49; // [esp+10h] [ebp-10h]
  float v50; // [esp+10h] [ebp-10h]
  float v51; // [esp+10h] [ebp-10h]
  float v52; // [esp+10h] [ebp-10h]
  float v53; // [esp+10h] [ebp-10h]
  float v54; // [esp+18h] [ebp-8h]
  float v55; // [esp+1Ch] [ebp-4h]

  v2 = *(_DWORD *)v1;
  v3 = *(_DWORD *)(*(_DWORD *)v1 + 128);
  v4 = *(float **)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)v1 + 176));
  if ( (v3 & 0x40) != 0 )
  {
    v5 = v4[96];
  }
  else if ( (v3 & 0x20) != 0 )
  {
    v5 = v4[95];
  }
  else
  {
    v5 = v4[94];
  }
  if ( v5 >= v1[1] || *(_DWORD *)(v2 + 180) == 5 )
  {
    v55 = 0.0;
    v7 = 0.0;
    v54 = 0.0;
  }
  else
  {
    v47 = (v1[1] - v5) / ((double)*(int *)(v2 + 68) - v5);
    if ( v47 < 0.0 )
    {
      v47 = 0.0;
    }
    else if ( v47 > 1.0 )
    {
      v47 = 1.0;
    }
    v6 = v47;
    if ( (*(_DWORD *)(*(_DWORD *)v1 + 128) & 0x40) != 0 )
    {
      v7 = v6 * v4[84];
      v54 = v47 * v4[85];
      v55 = v47 * v4[86];
    }
    else
    {
      if ( (v3 & 0x20) != 0 )
      {
        v7 = v6 * v4[75];
        v54 = v47 * v4[76];
        v8 = v47 * v4[77];
      }
      else
      {
        v7 = v6 * v4[66];
        v54 = v47 * v4[67];
        v8 = v47 * v4[68];
      }
      v55 = v8;
    }
  }
  if ( *(float *)(v2 + 184) != 0.0 )
  {
    v9 = 1.0 - *(float *)(v2 + 184);
    v7 = v7 * v9;
    v54 = v54 * v9;
    v55 = v9 * v55;
  }
  if ( v7 != v1[3] )
  {
    v11 = v7 - v1[3];
    if ( v13 | v12 )
      v14 = v11 * v4[93];
    else
      v14 = v11 * v4[92];
    v15 = v14 * v1[2];
    v17 = v1[2];
    if ( v18 | v19 )
    {
      v48 = v17 * 0.1;
      if ( v15 < v48 )
        v15 = v48;
      v20 = v15 + v1[3];
      v1[3] = v20;
      if ( v20 > v7 )
        v1[3] = v7;
    }
    else
    {
      v49 = v17 * -0.1;
      if ( v15 > v49 )
        v15 = v49;
      v21 = v15 + v1[3];
      v1[3] = v21;
      if ( v21 < v7 )
        v1[3] = v7;
    }
  }
  if ( v1[4] != v54 )
  {
    v23 = v54 - v1[4];
    if ( v25 | v24 )
      v26 = v23 * v4[93];
    else
      v26 = v23 * v4[92];
    v27 = v26 * v1[2];
    v29 = v1[2];
    if ( v30 | v31 )
    {
      v50 = v29 * 0.1;
      if ( v27 < v50 )
        v27 = v50;
      v32 = v27 + v1[4];
      v1[4] = v32;
      if ( v32 > v54 )
      {
LABEL_46:
        v1[4] = v54;
        goto LABEL_47;
      }
    }
    else
    {
      v51 = v29 * -0.1;
      if ( v27 > v51 )
        v27 = v51;
      v33 = v27 + v1[4];
      v1[4] = v33;
      if ( v33 < v54 )
        goto LABEL_46;
    }
  }
LABEL_47:
  if ( v1[5] != v55 )
  {
    v35 = v55 - v1[5];
    if ( v37 | v36 )
      v38 = v35 * v4[93];
    else
      v38 = v35 * v4[92];
    v39 = v38 * v1[2];
    v41 = v1[2];
    if ( v42 | v43 )
    {
      v52 = v41 * 0.1;
      if ( v39 < v52 )
        v39 = v52;
      v44 = v39 + v1[5];
      v1[5] = v44;
      if ( v44 > v55 )
        v1[5] = v55;
    }
    else
    {
      v53 = v41 * -0.1;
      if ( v39 > v53 )
        v39 = v53;
      v45 = v39 + v1[5];
      v1[5] = v45;
      if ( v45 < v55 )
        v1[5] = v55;
    }
  }
  if ( *(float *)(v2 + 184) == 0.0 )
  {
    *a1 = v1[3] + *a1;
    a1[1] = v1[4] + a1[1];
    a1[2] = v1[5] + a1[2];
  }
  else if ( *(float *)(v2 + 184) < 0.5 )
  {
    v46 = 1.0 - (*(float *)(v2 + 184) + *(float *)(v2 + 184));
    *a1 = v46 * v1[3] + *a1;
    a1[1] = v46 * v1[4] + a1[1];
    a1[2] = v46 * v1[5] + a1[2];
  }
}
// 30012FE0: variable 'v1' is possibly undefined
// 3001315C: variable 'v13' is possibly undefined
// 3001315C: variable 'v12' is possibly undefined
// 3001317C: variable 'v18' is possibly undefined
// 3001317C: variable 'v19' is possibly undefined
// 30013208: variable 'v25' is possibly undefined
// 30013208: variable 'v24' is possibly undefined
// 3001322A: variable 'v30' is possibly undefined
// 3001322A: variable 'v31' is possibly undefined
// 300132B7: variable 'v37' is possibly undefined
// 300132B7: variable 'v36' is possibly undefined
// 300132D9: variable 'v42' is possibly undefined
// 300132D9: variable 'v43' is possibly undefined
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30013410) --------------------------------------------------------
void __usercall sub_30013410(float *a1@<ecx>, float *a2@<edi>)
{
  int v2; // esi
  int v3; // edx
  double v4; // st7
  int v5; // eax
  double v6; // st6
  double v8; // st5
  unsigned __int8 v9; // c0
  unsigned __int8 v10; // c3
  double v11; // st5
  double v12; // st5
  double v13; // st7

  v2 = *(_DWORD *)a1;
  v3 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)a1 + 176));
  if ( *(_DWORD *)(v3 + 716) )
  {
    v4 = (*(float *)(v3 + 624) - *(float *)(v3 + 628)) * *(float *)(v2 + 184) + *(float *)(v3 + 628);
  }
  else if ( *(float *)(v3 + 628) == 0.0 )
  {
    v4 = 80.0;
  }
  else
  {
    v4 = *(float *)(v3 + 628);
  }
  v5 = *(_DWORD *)(v2 + 128);
  if ( (v5 & 0x40) != 0 )
  {
    v6 = *(float *)(v3 + 636);
  }
  else if ( (v5 & 0x20) != 0 )
  {
    v6 = *(float *)(v3 + 632);
  }
  else
  {
    v6 = 1.0;
  }
  if ( v6 != a1[6] )
  {
    v8 = a1[2] * 0.5;
    if ( v9 | v10 )
    {
      v12 = a1[6] - v8;
      a1[6] = v12;
      if ( v12 >= v6 )
        goto LABEL_16;
      goto LABEL_14;
    }
    v11 = v8 + a1[6];
    a1[6] = v11;
    if ( v11 > v6 )
    {
LABEL_14:
      a1[6] = v6;
      goto LABEL_16;
    }
  }
LABEL_16:
  v13 = v4 * a1[6];
  a2[2] = sin((double)*((int *)a1 + 7) * 0.00050000002) * v13 * 0.039999999 + a2[2];
  a2[1] = sin((double)*((int *)a1 + 7) * 0.00069999998) * v13 * 0.0099999998 + a2[1];
  *a2 = sin((double)*((int *)a1 + 7) * 0.001) * v13 * 0.0099999998 + *a2;
}
// 300134A4: variable 'v9' is possibly undefined
// 300134A4: variable 'v10' is possibly undefined
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30013520) --------------------------------------------------------
void __usercall sub_30013520(float *a1@<eax>, float *a2@<ebx>)
{
  int v2; // edi
  int v3; // edx
  double v4; // st7
  int v5; // ecx
  int v6; // esi
  double v7; // st6
  double v8; // st6
  double v9; // st6
  double v10; // st5
  double v11; // st5
  long double v12; // st4
  double v13; // st6
  double v14; // st6
  double v15; // st5
  double v16; // st5
  float v17; // [esp+8h] [ebp-14h]
  float v18; // [esp+Ch] [ebp-10h]
  float v19; // [esp+Ch] [ebp-10h]
  float v20; // [esp+Ch] [ebp-10h]
  float v21; // [esp+14h] [ebp-8h]

  v2 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)a1 + 176));
  v18 = (double)(unsigned __int8)*(_DWORD *)(*(_DWORD *)a1 + 8) * 0.024639944 + 6.2831855 + 7.0685835;
  v17 = a1[1] * 0.16;
  v4 = sub_30012F00((_DWORD *)*(_DWORD *)a1, v18, v17, 10.0) * -1.0;
  v5 = *(_DWORD *)(v3 + 204);
  v6 = *(_DWORD *)(v3 + 828);
  if ( v5 == v6 )
  {
    v7 = flt_301A1A28;
  }
  else if ( v5 == *(_DWORD *)(v3 + 832) )
  {
    v7 = flt_301A1B48;
  }
  else
  {
    v7 = flt_301A1C68;
  }
  v8 = v7 * v17;
  if ( v8 > 10.0 )
    v8 = 10.0;
  v21 = sin(v18) * v8 * -1.0;
  v19 = v18 - 0.47123894;
  v9 = v17 * 1.5;
  if ( v5 == v6 )
  {
    v10 = flt_301A1A28;
  }
  else if ( v5 == *(_DWORD *)(v3 + 832) )
  {
    v10 = flt_301A1B48;
  }
  else
  {
    v10 = flt_301A1C68;
  }
  v11 = v10 * v9;
  if ( v11 > 10.0 )
    v11 = 10.0;
  v12 = sin(v19);
  if ( v12 * v11 >= 0.0 )
  {
    v14 = 0.0;
  }
  else
  {
    if ( v5 == v6 )
    {
      v13 = v9 * flt_301A1A28;
    }
    else if ( v5 == *(_DWORD *)(v3 + 832) )
    {
      v13 = v9 * flt_301A1B48;
    }
    else
    {
      v13 = v9 * flt_301A1C68;
    }
    if ( v13 > 10.0 )
      v13 = 10.0;
    v20 = v12;
    v14 = v13 * v20;
  }
  v15 = *(float *)(v3 + 184);
  if ( v15 != 0.0 )
  {
    v16 = 1.0 - v15 * (1.0 - *(float *)(v2 + 564));
    v4 = v4 * v16;
    v21 = v21 * v16;
    v14 = v14 * v16;
  }
  *a2 = v4 + *a2;
  a2[1] = v21 + a2[1];
  a2[2] = v14 + a2[2];
}
// 30013586: variable 'v3' is possibly undefined
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A1A28: using guessed type float flt_301A1A28;
// 301A1B48: using guessed type float flt_301A1B48;
// 301A1C68: using guessed type float flt_301A1C68;

//----- (300136F0) --------------------------------------------------------
void __fastcall sub_300136F0(float *a1, float *a2)
{
  int v2; // edi
  int v3; // esi
  double v4; // st7
  double v5; // st6
  double v6; // st5
  double v7; // st6
  double v8; // st5
  double v9; // st6
  double v10; // st6
  double v11; // st7
  float v12; // [esp+4h] [ebp-8h]
  float v13; // [esp+8h] [ebp-4h]
  float v14; // [esp+8h] [ebp-4h]

  v2 = *((_DWORD *)a2 + 8);
  if ( v2 )
  {
    v3 = *(_DWORD *)a2;
    v4 = (*(float *)(*(_DWORD *)a2 + 184) + 1.0) * 0.5;
    v5 = 100.0 * v4;
    v13 = v4 * 400.0;
    if ( *(float *)(*(_DWORD *)a2 + 184) != 0.0 )
    {
      if ( *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(v3 + 176)) + 552) )
        v4 = v4 * (1.0 - *(float *)(v3 + 184) * 0.75);
    }
    v6 = (double)(*((_DWORD *)a2 + 7) - v2);
    if ( v6 >= v5 )
    {
      v9 = 1.0 - (v6 - v5) / v13;
      if ( v9 <= 0.0 )
        return;
      v10 = 1.0 - v9;
      v14 = v10;
      v8 = 1.0 - (2.0 - COERCE_FLOAT(LODWORD(v14) & 0x7FFFFFFF)) * v10;
    }
    else
    {
      v7 = v6 / v5;
      v12 = v7;
      v8 = (2.0 - COERCE_FLOAT(LODWORD(v12) & 0x7FFFFFFF)) * v7;
    }
    v11 = v4 * v8;
    *a1 = v11 * a2[9] * 0.5 + *a1;
    a1[1] = a1[1] - v11 * a2[10];
    a1[2] = v11 * a2[10] * 0.5 + a1[2];
  }
}
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30013820) --------------------------------------------------------
int __usercall sub_30013820@<eax>(float *a1@<edx>, float *a2@<ecx>, float a3, float a4, float a5, float a6, float a7, float a8)
{
  int result; // eax
  double v9; // st7
  double v10; // st7
  double v11; // st7
  double v12; // st7
  double v14; // st6
  unsigned __int8 v15; // c0
  unsigned __int8 v16; // c3
  double v17; // st7
  double v18; // st7
  double v19; // st7
  float v20; // [esp+4h] [ebp-4h]

  if ( fabs(*a1) < 0.25 && fabs(*a2) < 1.0 )
  {
    *a1 = 0.0;
    *a2 = 0.0;
    return 1;
  }
  v9 = a3 * *a2 + *a1;
  v20 = v9;
  *a1 = v9;
  if ( v9 <= a4 )
  {
    v10 = -a4;
    if ( v20 < v10 )
    {
      *a1 = v10;
      if ( *a2 < 0.0 )
        *a2 = 0.0;
    }
  }
  else
  {
    *a1 = a4;
    if ( *a2 > 0.0 )
      *a2 = 0.0;
  }
  if ( *a1 <= 0.0 )
  {
    if ( *a1 >= 0.0 )
      goto LABEL_15;
    v11 = a3 * a5 + *a2;
  }
  else
  {
    v11 = *a2 - a3 * a5;
  }
  *a2 = v11;
LABEL_15:
  v12 = *a2 - a3 * *a2 * a7;
  *a2 = v12;
  v14 = a3 * a8;
  if ( v15 | v16 )
  {
    v18 = v12 + v14;
    *a2 = v18;
    if ( v18 <= 0.0 )
      goto LABEL_20;
  }
  else
  {
    v17 = v12 - v14;
    *a2 = v17;
    if ( v17 >= 0.0 )
      goto LABEL_20;
  }
  *a2 = 0.0;
LABEL_20:
  if ( *a2 <= (double)a6 )
  {
    v19 = -a6;
    result = 0;
    if ( v19 > *a2 )
      *a2 = v19;
  }
  else
  {
    result = 0;
    *a2 = a6;
  }
  return result;
}
// 3001390A: variable 'v15' is possibly undefined
// 3001390A: variable 'v16' is possibly undefined

//----- (30013970) --------------------------------------------------------
float *__cdecl sub_30013970(float *a1, float *a2)
{
  float *v2; // edx
  float *result; // eax
  int v4; // esi
  double v5; // st7
  float v6; // ebx
  float v7; // ebp
  float v8; // [esp+4h] [ebp-14h]
  float v9; // [esp+8h] [ebp-10h]
  int v10; // [esp+8h] [ebp-10h]
  float v11; // [esp+Ch] [ebp-Ch]
  float v12; // [esp+10h] [ebp-8h]
  float v13; // [esp+14h] [ebp-4h]
  int v14; // [esp+14h] [ebp-4h]

  v2 = a1;
  result = *(float **)a1;
  v4 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)a1 + 176));
  if ( *(_DWORD *)(v4 + 716) )
  {
    v5 = result[46];
    v8 = a1[2];
    v12 = (*(float *)(v4 + 884) - *(float *)(v4 + 948)) * v5 + *(float *)(v4 + 948);
    v11 = (*(float *)(v4 + 888) - *(float *)(v4 + 952)) * v5 + *(float *)(v4 + 952);
    if ( v8 > 0.0 )
    {
      v9 = (*(float *)(v4 + 876) - *(float *)(v4 + 940)) * v5 + *(float *)(v4 + 940);
      v6 = v9;
      v13 = (*(float *)(v4 + 880) - *(float *)(v4 + 944)) * v5 + *(float *)(v4 + 944);
      v7 = v13;
      while ( 1 )
      {
        if ( v8 <= 0.005 )
        {
          v10 = LODWORD(v8);
          v8 = 0.0;
        }
        else
        {
          v10 = 1000593162;
          v8 = v8 - 0.005;
        }
        v14 = sub_30013820(v2 + 11, v2 + 14, *(float *)&v10, *(float *)(v4 + 640), v6, v7, v12, v11);
        if ( sub_30013820(a1 + 12, a1 + 15, *(float *)&v10, *(float *)(v4 + 644), v6, v7, v12, v11) )
        {
          if ( v14 )
            break;
        }
        if ( v8 <= 0.0 )
          break;
        v2 = a1;
      }
      v2 = a1;
    }
    result = a2;
    *a2 = v2[11] + *a2;
    a2[1] = v2[12] + a2[1];
    a2[2] = v2[13] + a2[2];
  }
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30013B00) --------------------------------------------------------
void __usercall sub_30013B00(int a1@<eax>, float *a2@<esi>)
{
  int v2; // ecx
  int v4; // ecx
  float *v5; // ecx

  v2 = *(_DWORD *)a2;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)a1 = 0;
  if ( *(float *)(v2 + 64) != 0.0 )
    *(float *)(a1 + 8) = (2.0 - fabs(*(float *)(v2 + 64))) * *(float *)(v2 + 64) * -2.0;
  v4 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)a2 + 176));
  if ( *(_DWORD *)(v4 + 716) )
    *(float *)a1 = *(float *)(v4 + 848) * *(float *)(*(_DWORD *)a2 + 184);
  sub_30012FD0((float *)a1);
  sub_30013410(v5, (float *)a1);
  sub_30013520(a2, (float *)a1);
  sub_300136F0((float *)a1, a2);
  sub_30013970(a2, (float *)a1);
  *(float *)a1 = sub_3003DA20(*(float *)a1, a2[17]);
  *(float *)(a1 + 4) = sub_3003DA20(*(float *)(a1 + 4), a2[18]);
}
// 30013B7B: variable 'v5' is possibly undefined
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30013BC0) --------------------------------------------------------
void __fastcall sub_30013BC0(float *a1, float *a2)
{
  int v2; // edi
  double v3; // st7
  double v4; // st6
  double v5; // st6
  double v6; // st5
  double v7; // st6
  double v8; // st6
  double v9; // st7
  float v10; // [esp+4h] [ebp-4h]
  float v11; // [esp+4h] [ebp-4h]
  float v12; // [esp+4h] [ebp-4h]

  v2 = *((_DWORD *)a1 + 1);
  if ( v2 )
  {
    v10 = *(float *)(*(_DWORD *)a1 + 184) * 0.5;
    v3 = 1.0 - v10;
    if ( *(float *)(*(_DWORD *)a1 + 184) != 0.0 )
    {
      if ( *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)a1 + 176)) + 552) )
        v3 = v3 * (v10 + 1.0);
    }
    v4 = (double)(*((_DWORD *)a1 + 2) - v2);
    if ( v4 >= 100.0 )
    {
      v7 = 1.0 - (v4 - 100.0) * 0.0024999999;
      if ( v7 <= 0.0 )
        return;
      v8 = 1.0 - v7;
      v12 = v8;
      v6 = 1.0 - (2.0 - COERCE_FLOAT(LODWORD(v12) & 0x7FFFFFFF)) * v8;
    }
    else
    {
      v5 = v4 * 0.0099999998;
      v11 = v5;
      v6 = (2.0 - COERCE_FLOAT(LODWORD(v11) & 0x7FFFFFFF)) * v5;
    }
    v9 = v3 * v6;
    *a2 = v9 * a1[3] + *a2;
    a2[2] = v9 * a1[4] + a2[2];
  }
}
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30013CD0) --------------------------------------------------------
void __usercall sub_30013CD0(float *a1@<ebx>, float *a2@<esi>)
{
  int v2; // edx
  int v3; // edi
  long double v4; // st7
  int v5; // edx
  long double v6; // st7
  int v7; // edx
  float v8; // [esp+0h] [ebp-4h]

  v2 = *(_DWORD *)a1;
  v3 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(*(_DWORD *)a1 + 176));
  if ( (*(_DWORD *)(*(_DWORD *)a1 + 128) & 0xC000) == 0 && *(float *)(v2 + 184) != 0.0 && *(float *)(v3 + 568) != 0.0 )
  {
    v8 = (double)(unsigned __int8)*(_DWORD *)(v2 + 8) * 0.024639944 + 6.2831855;
    v4 = sub_30012F00((_DWORD *)v2, v8, a1[5], 45.0);
    *a2 = *a2 - v4 * *(float *)(v3 + 568) * *(float *)(v5 + 184);
    v6 = sub_30012F80((_DWORD *)v5, v8, a1[5], 45.0);
    a2[1] = a2[1] - v6 * *(float *)(v3 + 568) * *(float *)(v7 + 184);
  }
}
// 30013D5D: variable 'v5' is possibly undefined
// 30013D7D: variable 'v7' is possibly undefined
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30013E00) --------------------------------------------------------
int __usercall sub_30013E00@<eax>(int a1@<eax>, float *a2@<edi>, int a3@<esi>, int a4, float a5, int a6)
{
  int v7; // ecx
  int result; // eax
  float v9; // edx
  double v10; // st7
  float v11; // eax
  float v12; // eax
  float v13; // ecx
  float v14; // ebx
  float v15; // [esp+8h] [ebp-38h]
  float v16; // [esp+8h] [ebp-38h]
  float v17; // [esp+8h] [ebp-38h]
  float v18; // [esp+8h] [ebp-38h]
  float v19; // [esp+8h] [ebp-38h]
  float v20; // [esp+Ch] [ebp-34h]
  float v21; // [esp+Ch] [ebp-34h]
  float v22; // [esp+Ch] [ebp-34h]
  float v23; // [esp+10h] [ebp-30h]
  float v24; // [esp+14h] [ebp-2Ch]
  float v25; // [esp+14h] [ebp-2Ch]
  float v26; // [esp+14h] [ebp-2Ch]
  float v27; // [esp+14h] [ebp-2Ch]
  float v28; // [esp+18h] [ebp-28h]
  float v29; // [esp+18h] [ebp-28h]
  float v30; // [esp+18h] [ebp-28h]
  float v31; // [esp+1Ch] [ebp-24h]
  float v32; // [esp+1Ch] [ebp-24h]
  float v33; // [esp+1Ch] [ebp-24h]
  float v34; // [esp+1Ch] [ebp-24h]
  float v35; // [esp+20h] [ebp-20h]
  float v36; // [esp+20h] [ebp-20h]
  double v37; // [esp+20h] [ebp-20h]
  float v38; // [esp+20h] [ebp-20h]
  float v39; // [esp+20h] [ebp-20h]
  double v40; // [esp+20h] [ebp-20h]
  float v41; // [esp+20h] [ebp-20h]
  float v42; // [esp+20h] [ebp-20h]
  double v43; // [esp+20h] [ebp-20h]
  float v44; // [esp+20h] [ebp-20h]
  float v45; // [esp+20h] [ebp-20h]
  double v46; // [esp+20h] [ebp-20h]
  float v47; // [esp+20h] [ebp-20h]
  float v48; // [esp+28h] [ebp-18h]
  float v49; // [esp+28h] [ebp-18h]
  float v50; // [esp+2Ch] [ebp-14h]
  float i; // [esp+2Ch] [ebp-14h]
  float v52; // [esp+38h] [ebp-8h]
  float v53; // [esp+3Ch] [ebp-4h]

  v7 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(a3 + 176));
  v15 = *(float *)(a3 + 184);
  if ( *(_DWORD *)(v7 + 716) )
  {
    if ( v15 > 0.0 )
    {
      result = *(_DWORD *)(v7 + 552);
      if ( result )
        return result;
    }
    v20 = (*(float *)(v7 + 676) - *(float *)(v7 + 648)) * v15 + *(float *)(v7 + 648);
    v23 = (*(float *)(v7 + 680) - *(float *)(v7 + 652)) * v15 + *(float *)(v7 + 652);
    v28 = (*(float *)(v7 + 684) - *(float *)(v7 + 656)) * v15 + *(float *)(v7 + 656);
    v31 = (*(float *)(v7 + 688) - *(float *)(v7 + 660)) * v15 + *(float *)(v7 + 660);
    v24 = (*(float *)(v7 + 692) - *(float *)(v7 + 664)) * v15 + *(float *)(v7 + 664);
    v16 = (*(float *)(v7 + 696) - *(float *)(v7 + 668)) * v15 + *(float *)(v7 + 668);
  }
  else
  {
    v23 = *(float *)(v7 + 652);
    v28 = *(float *)(v7 + 656);
    v31 = *(float *)(v7 + 660);
    v20 = *(float *)(v7 + 648);
    v24 = *(float *)(v7 + 664);
    v16 = *(float *)(v7 + 668);
  }
  v29 = v28 * a5;
  v32 = v31 * a5;
  v25 = v24 * a5;
  v17 = v16 * a5;
  v48 = sub_3003DA20(*(float *)(a3 + 192), *(float *)a4);
  v50 = sub_3003DA20(*(float *)(a3 + 196), *(float *)(a4 + 4));
  v35 = -v20;
  if ( v48 >= (double)v35 )
  {
    if ( v48 > (double)v20 )
      v48 = v9;
  }
  else
  {
    v48 = -v20;
  }
  if ( v50 >= (double)v35 )
  {
    if ( v50 > (double)v20 )
      v50 = v9;
  }
  else
  {
    v50 = -v20;
  }
  v52 = v50 * v25;
  v10 = v48 * v17;
  v18 = *(float *)(a1 + 4);
  v36 = v52 - v18;
  v26 = (float)a6;
  v27 = v26 * 0.001;
  v21 = v27 * v36 * v23;
  v37 = fabs(v36);
  if ( v37 <= 0.001000000047497451 || fabs(v21) > v37 )
  {
    v11 = v52;
  }
  else
  {
    v38 = v21 + v18;
    v11 = v38;
  }
  *(float *)(a1 + 4) = v11;
  v19 = *(float *)(a1 + 8);
  v53 = v10;
  v39 = v53 - v19;
  v22 = v27 * v39 * v23;
  v40 = fabs(v39);
  if ( v40 <= 0.001000000047497451 || fabs(v22) > v40 )
  {
    v12 = v10;
  }
  else
  {
    v41 = v22 + v19;
    v12 = v41;
  }
  *(float *)(a1 + 8) = v12;
  v49 = v48 * v29;
  for ( i = v50 * v32; v49 - *a2 > 180.0; v49 = v49 - 360.0 )
    ;
  for ( ; i - a2[1] > 180.0; i = i - 360.0 )
    ;
  v42 = v49 - *a2;
  v33 = v27 * v42 * v23;
  v43 = fabs(v42);
  if ( v43 <= 0.001000000047497451 || fabs(v33) > v43 )
  {
    v13 = v49;
  }
  else
  {
    v44 = v33 + *a2;
    v13 = v44;
  }
  v30 = a2[1];
  *a2 = v13;
  v45 = i - v30;
  v34 = v27 * v45 * v23;
  v46 = fabs(v45);
  if ( v46 <= 0.001000000047497451 || fabs(v34) > v46 )
  {
    v14 = i;
  }
  else
  {
    v47 = v34 + v30;
    v14 = v47;
  }
  *a2 = sub_3003DB10(v13);
  a2[1] = sub_3003DB10(v14);
  result = *(_DWORD *)(a3 + 192);
  *(_DWORD *)a4 = result;
  *(_DWORD *)(a4 + 4) = *(_DWORD *)(a3 + 196);
  *(_DWORD *)(a4 + 8) = *(_DWORD *)(a3 + 200);
  return result;
}
// 30013FBC: variable 'v9' is possibly undefined
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30014280) --------------------------------------------------------
int __usercall sub_30014280@<eax>(int a1@<eax>, float *a2@<ebx>, float *a3@<edi>)
{
  float *v3; // esi
  double v4; // st7
  int result; // eax
  double v6; // st7
  float v7; // [esp+0h] [ebp-Ch]
  float v8; // [esp+0h] [ebp-Ch]
  float v9; // [esp+8h] [ebp-4h]

  v9 = *(float *)(a1 + 184);
  v3 = *(float **)(dword_300F0FB4 + 4 * *(_DWORD *)(a1 + 176));
  if ( v9 == 1.0 )
  {
    v7 = (double)rand() * 0.000030517578 * (v3[224] - v3[223]) + v3[223];
    v4 = (double)rand() * 0.000030517578 * (v3[226] - v3[225]) + v3[225];
  }
  else
  {
    v7 = (double)rand() * 0.000030517578 * (v3[240] - v3[239]) + v3[239];
    v4 = (double)rand() * 0.000030517578 * (v3[242] - v3[241]) + v3[241];
  }
  *a3 = -v7;
  a3[1] = v4;
  a3[2] = v4 * -0.5;
  if ( v9 <= 0.0 )
  {
    v8 = (double)rand() * 0.000030517578 * (v3[232] - v3[231]) + v3[231];
    result = rand();
    v6 = (double)result * 0.000030517578 * (v3[234] - v3[233]) + v3[233];
  }
  else
  {
    v8 = (double)rand() * 0.000030517578 * (v3[216] - v3[215]) + v3[215];
    result = rand();
    v6 = (double)result * 0.000030517578 * (v3[218] - v3[217]) + v3[217];
  }
  *a2 = v8 + *a2;
  a2[1] = v6 + a2[1];
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30014450) --------------------------------------------------------
int sub_30014450()
{
  return 0;
}

//----- (30014480) --------------------------------------------------------
int sub_30014480()
{
  return 0;
}

//----- (30014490) --------------------------------------------------------
int sub_30014490()
{
  return dword_30076898(202);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300144B0) --------------------------------------------------------
int sub_300144B0()
{
  int v0; // edi
  _DWORD *v1; // esi
  int *v2; // esi
  int result; // eax
  int v4; // [esp+0h] [ebp-9004h] BYREF
  char v5[36852]; // [esp+4h] [ebp-9000h] BYREF
  int v6; // [esp+8FF8h] [ebp-Ch]

  dword_300ACBF0(0);
  sub_30005590();
  sub_30002480((int)&unk_300F25A0, (int)v5, (int)&v4);
  dword_300ACBFC(sub_30014490);
  sub_30005620();
  dword_300ACBF8();
  sub_300016C0();
  v0 = dword_3018DC78;
  v1 = &unk_3018E134;
  do
  {
    v6 = v0;
    *v1 = dword_30076898(132);
    v1 += 300;
  }
  while ( (int)v1 < (int)&flt_301A0D34 );
  v2 = (int *)&unk_301DA50C;
  do
  {
    v6 = v0;
    result = dword_30076898(132);
    *v2 = result;
    v2 += 300;
  }
  while ( (int)v2 < (int)&dword_301DCA8C );
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300ACBF0: using guessed type int (__cdecl *dword_300ACBF0)(_DWORD);
// 300ACBF8: using guessed type int (*dword_300ACBF8)(void);
// 300ACBFC: using guessed type int (__cdecl *dword_300ACBFC)(_DWORD);
// 3018DC78: using guessed type int dword_3018DC78;
// 301A0D34: using guessed type float flt_301A0D34;
// 301DCA8C: using guessed type int dword_301DCA8C;

//----- (30014510) --------------------------------------------------------
int sub_30014510()
{
  int i; // esi
  int result; // eax

  for ( i = 0; i < 64; ++i )
  {
    result = dword_30076898(166);
    dword_3020D3B0[i] = 0;
    dword_3020E3AC[i] = 0;
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300145B0) --------------------------------------------------------
int sub_300145B0()
{
  int i; // esi
  int result; // eax

  for ( i = 64; i < 1023; ++i )
  {
    result = dword_30076898(166);
    dword_3020D3B0[i] = 0;
    dword_3020E3AC[i] = 0;
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300145F0) --------------------------------------------------------
int __cdecl sub_300145F0(float *a1, int a2, int *a3)
{
  int v3; // ecx
  int result; // eax
  int v5; // ebp
  int v6; // edi
  int v7; // esi
  int v8; // ecx
  _DWORD *v9; // eax
  int v10; // ebx
  int v11; // ecx
  int v12; // edx
  int v13; // eax
  int v14; // edi
  int v15; // eax
  float v16; // eax
  double v17; // st7
  float v18; // eax
  float v19; // ecx
  int v20; // eax
  int v21; // ecx
  int *v22; // esi
  float *v23; // edi
  double v24; // st7
  int v25; // ecx
  int v26; // edx
  float v27; // eax
  int v28; // eax
  float v29; // ebp
  float v30; // ebx
  int v31; // eax
  BOOL v32; // esi
  float v33; // [esp+10h] [ebp-5Ch]
  float v34; // [esp+14h] [ebp-58h]
  float v35; // [esp+14h] [ebp-58h]
  float v36; // [esp+14h] [ebp-58h]
  float v37; // [esp+18h] [ebp-54h]
  float v38; // [esp+1Ch] [ebp-50h]
  int v39; // [esp+20h] [ebp-4Ch]
  int *v40; // [esp+24h] [ebp-48h]
  float v41; // [esp+28h] [ebp-44h]
  float v42; // [esp+28h] [ebp-44h]
  float v43; // [esp+2Ch] [ebp-40h]
  float v44; // [esp+2Ch] [ebp-40h]
  float v45; // [esp+2Ch] [ebp-40h]
  float v46; // [esp+2Ch] [ebp-40h]
  float v47; // [esp+2Ch] [ebp-40h]
  float v48; // [esp+30h] [ebp-3Ch]
  float v49; // [esp+30h] [ebp-3Ch]
  float v50; // [esp+38h] [ebp-34h]
  float v51; // [esp+40h] [ebp-2Ch]
  float v52; // [esp+44h] [ebp-28h] BYREF
  int v53; // [esp+48h] [ebp-24h]
  int v54; // [esp+4Ch] [ebp-20h]
  float v55; // [esp+50h] [ebp-1Ch] BYREF
  float v56; // [esp+54h] [ebp-18h]
  float v57; // [esp+58h] [ebp-14h]
  int v58; // [esp+5Ch] [ebp-10h]
  int v59; // [esp+60h] [ebp-Ch]
  int v60; // [esp+64h] [ebp-8h]
  float v61; // [esp+68h] [ebp-4h]

  v3 = dword_301E5F24;
  result = 1200 * *(_DWORD *)(dword_301E5F24 + 184);
  if ( *(int *)((char *)dword_3018DC8C + result) )
  {
    v5 = *(int *)((char *)dword_3018DCB8 + result);
    if ( v5 != 3 )
    {
      if ( v5 )
      {
        v6 = 0;
        if ( *(int *)(dword_301E5F24 + 8408) > 0 )
        {
          v7 = 0;
          do
          {
            v8 = *(_DWORD *)(v7 + v3 + 8416);
            v9 = (_DWORD *)((char *)&unk_30211940 + 552 * v8);
            if ( v9[61] == 1 )
            {
              v10 = v9[62];
              if ( (v10 & 1) == 0 && v8 >= 0 )
              {
                if ( dword_3018DC8C[300 * v8] )
                {
                  if ( dword_3018DCB8[300 * v8] == v5 )
                  {
                    v11 = 5 * v8;
                    dword_30210E70[v11] = dword_3020AF00;
                    dword_30210E74[v11] = v9[126];
                    v12 = v9[127];
                    v13 = v9[130];
                    dword_30210E78[v11] = v12;
                    dword_30210E7C[v11] = v13;
                    if ( (v10 & 0x80000) != 0 && dword_30210E80[v11] <= dword_3020AF00 )
                      dword_30210E80[v11] = dword_3020AF00 + 3000;
                  }
                }
              }
            }
            v3 = dword_301E5F24;
            ++v6;
            v7 += 240;
          }
          while ( v6 < *(_DWORD *)(dword_301E5F24 + 8408) );
        }
        if ( *(_DWORD *)(v3 + 972) )
        {
          v14 = 5 * (*(_DWORD *)(v3 + 972) & 0x3F);
          dword_30210E70[v14] = dword_3020AF00;
          v15 = *(int *)(dword_301E5F24 + 972) >> 15;
          v52 = (float)(4 * ((*(int *)(dword_301E5F24 + 972) >> 6) & 0x1FF) - 1020);
          *(float *)&v53 = (float)(4 * (v15 & 0x1FF) - 1020);
          if ( v52 == 1024.0 || v52 == -1020.0 || *(float *)&v53 == 1024.0 || *(float *)&v53 == -1020.0 )
          {
            sub_3003B460(&v52);
            v20 = v53;
            v21 = v54;
            *(float *)&dword_30210E74[v14] = v52;
            dword_30210E78[v14] = v20;
            dword_30210E7C[v14] = v21;
          }
          else
          {
            v16 = *(float *)(dword_301E5F24 + 36);
            v55 = *(float *)(dword_301E5F24 + 32);
            v57 = *(float *)(dword_301E5F24 + 40);
            v17 = v57 + *(float *)(dword_301E5F24 + 220);
            v56 = v16;
            v18 = *(float *)(dword_301E5F24 + 76);
            v19 = *(float *)(dword_301E5F24 + 208);
            v57 = v17;
            sub_30040DF0(&v55, v19, v18, 16.0, 20.0);
            *(float *)&dword_30210E74[v14] = v55 + v52;
            *(float *)&dword_30210E78[v14] = v56 + *(float *)&v53;
          }
          v43 = (float)*(char *)(dword_301E5F24 + 975);
          *(float *)&dword_30210E7C[v14] = v43 * 1.40625;
          if ( (*(_DWORD *)(dword_301E5F24 + 140) & 0x100000) != 0 && dword_30210E80[v14] <= dword_3020AF00 )
            dword_30210E80[v14] = dword_3020AF00 + 3000;
        }
        sub_3001B0A0();
        v22 = dword_30210E70;
        v40 = dword_30210E70;
        v39 = 0;
        v23 = (float *)dword_30210E74;
        v50 = flt_30211708 * a1[2] * 0.5 + *a1;
        v24 = flt_30211708 * a1[3] * 0.5 + a1[1];
        v25 = a3[1];
        v58 = *a3;
        v26 = a3[2];
        v27 = *((float *)a3 + 3);
        v59 = v25;
        v60 = v26;
        v61 = v27;
        v51 = v24 - (flt_30211708 - 1.0) * 160.0;
        do
        {
          if ( *v22 > dword_3020AF00 )
            *v22 = 0;
          if ( *v22 >= dword_3020AF00 - 800 && *(_DWORD *)(dword_301E5F24 + 184) != v39 )
          {
            if ( fabs(*v23) > 1.0 || fabs(v23[1]) > 1.0 )
            {
              v52 = *v23 - flt_3020D348;
              *(float *)&v53 = v23[1] - flt_3020D34C;
              v45 = (float)(unsigned __int16)(unsigned __int64)((sub_3003BA90(&v52) - flt_30210E68) * 182.04445);
              v34 = v45 * 0.0054931641;
              v46 = sqrt(*(float *)&v53 * *(float *)&v53 + v52 * v52);
              v33 = v46;
              v61 = v46;
              if ( v46 <= (double)flt_301DEB28 )
              {
                if ( v46 < (double)*(float *)&dword_301B0D28 )
                  v61 = *(float *)&dword_301B0D28;
              }
              else
              {
                v61 = flt_301DEB28;
              }
              v61 = v61 - *(float *)&dword_301B0D28;
              v61 = v61 / (flt_301DEB28 - *(float *)&dword_301B0D28);
              v61 = (flt_301DD148 - 1.0) * v61 + 1.0;
              if ( v46 <= (double)*(float *)&dword_301B0D28 )
              {
                if ( v46 < (double)flt_301DF788 )
                  v33 = flt_301DF788;
              }
              else
              {
                v33 = *(float *)&dword_301B0D28;
              }
            }
            else
            {
              v28 = (unsigned __int16)(unsigned __int64)((sub_3003BA90(v23) - flt_30210E68) * 182.04445);
              v33 = *(float *)&dword_301B0D28;
              v44 = (float)v28;
              v34 = v44 * 0.0054931641;
              v61 = (1.0 - flt_301DD148) * 0.5 + flt_301DD148;
            }
            v41 = ((v33 - flt_301DF788) / (*(float *)&dword_301B0D28 - flt_301DF788) * (1.0 - flt_301E3568)
                 + flt_301E3568)
                * flt_30211708
                * 43.75;
            v35 = v34 * 3.1415927 / 180.0;
            v38 = cos(v35);
            v37 = sin(v35);
            v48 = flt_30211708 * 10.0;
            v29 = v48;
            v30 = v48;
            v47 = v50 - v48 * 0.5 - v37 * v41;
            v42 = v51 - v48 * 0.5 - v38 * v41;
            v31 = v22[4];
            v49 = (float)(unsigned __int16)(unsigned __int64)((flt_3020D384 - v23[2]) * 182.04445);
            if ( v31 <= dword_3020AF00 )
              v32 = 0;
            else
              v32 = (v31 - dword_3020AF00) % 500 >= 250;
            dword_30076898(72);
            if ( v32 )
            {
              sub_3001A4A0(v47, v42, v29, v30, dword_301D98A0);
            }
            else
            {
              v36 = v49 * 0.0054931641;
              sub_3001A500(v47, v42, v29, v30, v36);
            }
            v22 = v40;
          }
          v23 += 5;
          v22 += 5;
          ++v39;
          v40 = v22;
        }
        while ( (int)v23 < (int)&dword_30211374 );
        result = dword_30076898(72);
      }
    }
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 3018DCB8: using guessed type int dword_3018DCB8[];
// 301B0D28: using guessed type int dword_301B0D28;
// 301DD148: using guessed type float flt_301DD148;
// 301DEB28: using guessed type float flt_301DEB28;
// 301DF788: using guessed type float flt_301DF788;
// 301E3568: using guessed type float flt_301E3568;
// 301E5F24: using guessed type int dword_301E5F24;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 30210E70: using guessed type int dword_30210E70[];
// 30210E74: using guessed type int dword_30210E74[];
// 30210E78: using guessed type int dword_30210E78[];
// 30210E7C: using guessed type int dword_30210E7C[];
// 30210E80: using guessed type int dword_30210E80[];
// 30211374: using guessed type int dword_30211374;
// 30211708: using guessed type float flt_30211708;

//----- (30014C70) --------------------------------------------------------
int __thiscall sub_30014C70(void *this)
{
  int result; // eax
  int v2; // esi
  int v3; // eax
  void *String; // [esp+0h] [ebp-4h] BYREF

  String = this;
  result = dword_30210680 + 1000;
  if ( dword_3020AF00 <= dword_30210680 + 1000 )
  {
    v2 = dword_3021067C;
    if ( !dword_3021067C )
      return result;
  }
  else
  {
    v2 = -1;
  }
  dword_30076898(13);
  v3 = j__atol((const char *)&String);
  sub_300403F0("gc %i %i", v2, v3);
  return dword_30076898(22);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;
// 3021067C: using guessed type int dword_3021067C;
// 30210680: using guessed type int dword_30210680;

//----- (30014CD0) --------------------------------------------------------
int sub_30014CD0()
{
  sub_300403F0("%i", dword_3029C12C + 10);
  return dword_30076898(9);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3029C12C: using guessed type int dword_3029C12C;

//----- (30014D00) --------------------------------------------------------
int sub_30014D00()
{
  sub_300403F0("%i", dword_3029C12C - 10);
  return dword_30076898(9);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3029C12C: using guessed type int dword_3029C12C;

//----- (30014D30) --------------------------------------------------------
int sub_30014D30()
{
  return sub_300219D0(
           "(%i %i %i) : %i\n",
           (unsigned int)(unsigned __int64)flt_3020D348,
           (unsigned int)(unsigned __int64)flt_3020D34C,
           (unsigned int)(unsigned __int64)flt_3020D350,
           (unsigned int)(unsigned __int64)flt_3020D384);
}
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;

//----- (30014D70) --------------------------------------------------------
int sub_30014D70()
{
  int result; // eax

  result = dword_3020FDE4;
  if ( dword_3020FDE4 )
  {
    result = dword_3020AF00;
    dword_3020FDE4 = 0;
    dword_3020FDEC = dword_3020AF00;
  }
  return result;
}
// 3020AF00: using guessed type int dword_3020AF00;
// 3020FDE4: using guessed type int dword_3020FDE4;
// 3020FDEC: using guessed type int dword_3020FDEC;

//----- (30014D90) --------------------------------------------------------
int sub_30014D90()
{
  int result; // eax

  result = dword_3020AF00;
  if ( dword_3020F7AC + 2000 < dword_3020AF00 )
  {
    dword_3020F7AC = dword_3020AF00;
    dword_30076898(24);
    result = 0;
    if ( dword_3020FDE4 )
      return result;
    dword_3020F7B0 = 0;
    dword_3020FDF0 = 0;
  }
  dword_3020FDE4 = 1;
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;
// 3020F7AC: using guessed type int dword_3020F7AC;
// 3020F7B0: using guessed type int dword_3020F7B0;
// 3020FDE4: using guessed type int dword_3020FDE4;
// 3020FDF0: using guessed type int dword_3020FDF0;

//----- (30014DE0) --------------------------------------------------------
int sub_30014DE0()
{
  unsigned int v1; // [esp+4h] [ebp-4h]
  unsigned int retaddr; // [esp+8h] [ebp+0h]

  v1 = retaddr ^ dword_300705C0;
  sub_30041A30();
  dword_300F0F60 = 0;
  sub_30023700("ui_mp/hud.txt", 5);
  dword_300F0FAC = 0;
  return sub_30052A2E(retaddr ^ v1);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F60: using guessed type int dword_300F0F60;
// 300F0FAC: using guessed type int dword_300F0FAC;

//----- (30014E30) --------------------------------------------------------
int sub_30014E30()
{
  int result; // eax
  int v1; // eax
  int v2; // [esp+0h] [ebp-4h]

  result = dword_30076898(12);
  if ( result >= 6 )
  {
    dword_30076898(13);
    j__atol(&byte_30096790);
    dword_30076898(13);
    j__atol(&byte_30096790);
    dword_30076898(13);
    j__atol(&byte_30096790);
    dword_30076898(13);
    v2 = j__atol(&byte_30096790);
    dword_30076898(13);
    v1 = j__atol(&byte_30096790);
    *(float *)&dword_301D95FC = (double)v2 * 0.0039215689;
    dword_301D9608 = 1000 * v1;
    result = dword_3020AF00 + 1000 * v1;
    dword_301D9604 = dword_3020AF00;
    if ( result <= dword_3020AF00 )
      dword_301D9600 = dword_301D95FC;
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D95FC: using guessed type int dword_301D95FC;
// 301D9600: using guessed type int dword_301D9600;
// 301D9604: using guessed type int dword_301D9604;
// 301D9608: using guessed type int dword_301D9608;
// 3020AF00: using guessed type int dword_3020AF00;

//----- (30014F20) --------------------------------------------------------
int sub_30014F20()
{
  int v0; // eax
  int result; // eax
  float v2; // [esp+Ch] [ebp-114h]
  char String[260]; // [esp+18h] [ebp-108h] BYREF
  unsigned int v4; // [esp+11Ch] [ebp-4h]
  unsigned int retaddr; // [esp+124h] [ebp+4h]

  v4 = retaddr ^ dword_300705C0;
  v0 = dword_30076898(12) - 2;
  if ( !v0 )
    goto LABEL_5;
  if ( v0 != 1 )
    return sub_300219D0("USAGE: cg_shellshock <duration> <filename?>\n");
  dword_30076898(13);
  result = sub_30030160(String);
  if ( result )
  {
LABEL_5:
    dword_30076898(13);
    v2 = atof(String) * 1000.0;
    sub_30030220((int)&unk_301D6584);
    result = dword_3020AF00;
    dword_30211390 = dword_3020AF00;
    dword_30211394 = (int)(v2 + 9.313225746154785e-10);
  }
  return result;
}
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;
// 30211390: using guessed type int dword_30211390;
// 30211394: using guessed type int dword_30211394;

//----- (30015010) --------------------------------------------------------
int sub_30015010()
{
  int result; // eax
  char v1[64]; // [esp+0h] [ebp-44h] BYREF
  unsigned int v2; // [esp+40h] [ebp-4h]
  unsigned int retaddr; // [esp+44h] [ebp+0h]

  v2 = retaddr ^ dword_300705C0;
  if ( dword_30076898(12) == 2 )
  {
    dword_30076898(13);
    sub_30030160(v1);
    result = sub_30052A2E(retaddr ^ v2);
  }
  else
  {
    sub_300219D0("USAGE: cg_shellshock_load <name>\n");
    result = sub_30052A2E(retaddr ^ v2);
  }
  return result;
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30015080) --------------------------------------------------------
int sub_30015080()
{
  int result; // eax
  char v1[64]; // [esp+0h] [ebp-44h] BYREF
  unsigned int v2; // [esp+40h] [ebp-4h]
  unsigned int retaddr; // [esp+44h] [ebp+0h]

  v2 = retaddr ^ dword_300705C0;
  if ( dword_30076898(12) == 2 )
  {
    dword_30076898(13);
    sub_30030080(v1);
    result = sub_30052A2E(retaddr ^ v2);
  }
  else
  {
    sub_300219D0("USAGE: cg_shellshock_save <name>\n");
    result = sub_30052A2E(retaddr ^ v2);
  }
  return result;
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300150F0) --------------------------------------------------------
int sub_300150F0()
{
  int v0; // esi
  char v2[128]; // [esp+0h] [ebp-104h] BYREF
  char v3[128]; // [esp+80h] [ebp-84h] BYREF
  unsigned int v4; // [esp+100h] [ebp-4h]
  unsigned int retaddr; // [esp+104h] [ebp+0h]

  v4 = retaddr ^ dword_300705C0;
  if ( dword_3020AF00 <= dword_30210680 + 1000 )
  {
    v0 = dword_3021067C;
    if ( dword_3021067C != -1 )
    {
      dword_30076898(14);
      sub_30040370(v3, 0x80u, aTellI, v0, v2);
      dword_30076898(24);
    }
  }
  return sub_30052A2E(retaddr ^ v4);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;
// 3021067C: using guessed type int dword_3021067C;
// 30210680: using guessed type int dword_30210680;

//----- (30015190) --------------------------------------------------------
int sub_30015190()
{
  int result; // eax

  result = dword_301E5F20;
  if ( dword_301E5F20 )
  {
    if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0x20000) != 0 )
      result = dword_30076898(123);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E5F20: using guessed type int dword_301E5F20;

//----- (300151C0) --------------------------------------------------------
int sub_300151C0()
{
  int *v0; // eax
  char v2[64]; // [esp+0h] [ebp-44h] BYREF
  unsigned int v3; // [esp+40h] [ebp-4h]
  unsigned int retaddr; // [esp+44h] [ebp+0h]

  v3 = retaddr ^ dword_300705C0;
  if ( dword_30076898(12) == 2 )
  {
    if ( dword_301E5F20 && *(_DWORD *)(dword_301E5F20 + 16) != 5 && (*(_DWORD *)(dword_301E5F20 + 24) & 0x20000) == 0 )
    {
      v0 = sub_30023B20("cgame", "CGAME_NOSPECTATORVOICECHAT");
      sub_300219D0("%s\n", (const char *)v0);
      return sub_30052A2E(retaddr ^ v3);
    }
    dword_30076898(13);
    sub_300403F0("cmd vsay %s\n", v2);
    dword_30076898(22);
  }
  return sub_30052A2E(retaddr ^ v3);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E5F20: using guessed type int dword_301E5F20;

//----- (30015270) --------------------------------------------------------
int sub_30015270()
{
  int *v0; // eax
  char v2[64]; // [esp+0h] [ebp-44h] BYREF
  unsigned int v3; // [esp+40h] [ebp-4h]
  unsigned int retaddr; // [esp+44h] [ebp+0h]

  v3 = retaddr ^ dword_300705C0;
  if ( dword_30076898(12) == 2 )
  {
    if ( dword_301E5F20 && *(_DWORD *)(dword_301E5F20 + 16) != 5 && (*(_DWORD *)(dword_301E5F20 + 24) & 0x20000) == 0 )
    {
      v0 = sub_30023B20("cgame", "CGAME_NOSPECTATORVOICECHAT");
      sub_300219D0("%s\n", (const char *)v0);
      return sub_30052A2E(retaddr ^ v3);
    }
    dword_30076898(13);
    sub_300403F0("cmd vsay_team %s\n", v2);
    dword_30076898(22);
  }
  return sub_30052A2E(retaddr ^ v3);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E5F20: using guessed type int dword_301E5F20;

//----- (30015320) --------------------------------------------------------
int sub_30015320()
{
  char *v0; // ecx
  int v1; // esi
  void (__stdcall *v3)(); // esi

  dword_30076898(13);
  v0 = "viewpos";
  v1 = 0;
  if ( !"viewpos" )
    return 0;
  while ( sub_30040170(99999, &byte_30096790, v0) )
  {
    v0 = (&off_30062FE0)[2 * v1++];
    if ( !v0 )
      return 0;
  }
  v3 = (void (__stdcall *)())*(&off_30062FDC + 2 * v1);
  if ( v3 )
    v3();
  return 1;
}
// 30062FD8: using guessed type char *off_30062FD8;
// 30062FDC: using guessed type int (*off_30062FDC)();
// 30062FE0: using guessed type char *off_30062FE0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30015380) --------------------------------------------------------
int sub_30015380()
{
  char **v0; // esi
  char *v1; // eax

  if ( "viewpos" )
  {
    v0 = &off_30062FD8;
    do
    {
      dword_30076898(23);
      v1 = v0[2];
      v0 += 2;
    }
    while ( v1 );
  }
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  dword_30076898(23);
  return dword_30076898(23);
}
// 30062FD8: using guessed type char *off_30062FD8;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30015820) --------------------------------------------------------
int __usercall sub_30015820@<eax>(int result@<eax>, float a2, float a3, float a4, float a5)
{
  float v5; // [esp+0h] [ebp-34h]
  float v6; // [esp+4h] [ebp-30h]
  float v7; // [esp+8h] [ebp-2Ch]
  float v8; // [esp+Ch] [ebp-28h]

  if ( result == 1 || result == 2 )
  {
    dword_30076898(72);
    v8 = flt_301D5A48 * a5;
    v7 = flt_301D5A44 * a4;
    v6 = flt_301D5A48 * a3;
    v5 = flt_301D5A44 * a2;
    sub_30032820(LODWORD(v5), LODWORD(v6), LODWORD(v7), LODWORD(v8), 0, 0, 1065353216, 1065353216, dword_301D9620);
    result = dword_30076898(72);
  }
  return result;
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301D9620: using guessed type int dword_301D9620;

//----- (300158E0) --------------------------------------------------------
int sub_300158E0()
{
  int v0; // eax
  int v1; // eax
  int v2; // eax

  v0 = dword_30076898(206);
  sub_300403F0("num vars:    %d", v0);
  dword_30076898(54);
  v1 = dword_30076898(207);
  sub_300403F0("num threads: %d", v1);
  dword_30076898(54);
  v2 = dword_30076898(208);
  sub_300403F0("string usage: %d", v2);
  return dword_30076898(54);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30015A70) --------------------------------------------------------
double __cdecl sub_30015A70(float a1)
{
  _BYTE *v1; // eax
  int v2; // ecx

  v1 = (_BYTE *)sub_300403F0(
                  "time:%i snap:%i cmd:%i",
                  *(_DWORD *)(dword_301E5F20 + 8),
                  *(_DWORD *)dword_301E5F18,
                  dword_301D5A50);
  sub_300402E0(v2, v1);
  sub_3001A8E0();
  return a1 + 20.0;
}
// 30015AAB: variable 'v2' is possibly undefined
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 301D5A50: using guessed type int dword_301D5A50;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (30015AE0) --------------------------------------------------------
double __cdecl CG_DrawFPS(float a1)
{
  int v1; // eax
  int v2; // ecx
  int v3; // esi
  int v4; // eax
  int v5; // edx
  int v6; // edi
  int *v7; // edx
  int v8; // ecx
  int v9; // edi
  int v10; // edi
  int v11; // ecx
  int v12; // edi
  int v13; // ecx
  int v14; // edi
  int v15; // ecx
  int v16; // edi
  int v17; // ecx
  int v18; // edi
  int v19; // ecx
  int v20; // edi
  int v21; // ecx
  int *v22; // ecx
  long double v23; // st7
  double v24; // st6
  int v25; // esi
  _BYTE *v26; // ecx
  char v27; // dl
  int v28; // esi
  _BYTE *v29; // ecx
  char v30; // dl
  int v31; // esi
  _BYTE *v32; // edx
  char v33; // cl
  int v34; // esi
  _BYTE *v35; // edx
  char v36; // cl
  int v37; // esi
  _BYTE *v38; // edx
  char v39; // cl
  int v40; // esi
  _BYTE *v41; // edx
  char v42; // cl
  int v43; // esi
  _BYTE *v44; // edx
  char v45; // cl
  int v47; // [esp+20h] [ebp-28h]
  int v48; // [esp+20h] [ebp-28h]
  int v49; // [esp+28h] [ebp-20h]
  float v50; // [esp+3Ch] [ebp-Ch]
  float v51; // [esp+3Ch] [ebp-Ch]
  float v52; // [esp+3Ch] [ebp-Ch]
  float v53; // [esp+3Ch] [ebp-Ch]
  float v54; // [esp+40h] [ebp-8h]
  int v55; // [esp+44h] [ebp-4h]
  float v56; // [esp+4Ch] [ebp+4h]
  float v57; // [esp+4Ch] [ebp+4h]
  float v58; // [esp+4Ch] [ebp+4h]
  float v59; // [esp+4Ch] [ebp+4h]

  v1 = dword_30076898(6);
  v2 = v1 - dword_30095B58;
  dword_30095B58 = v1;
  v3 = 0;
  v4 = 0x7FFFFFFF;
  v5 = dword_30095B54 + 1;
  dword_30095AD0[dword_30095B54 % 32] = v2;
  dword_30095B54 = v5;
  if ( v5 < 32 )
    return a1;
  v6 = 0;
  v7 = (int *)&unk_30095AD4;
  do
  {
    v8 = *(v7 - 1);
    v9 = v8 + v6;
    if ( v4 > v8 )
      v4 = *(v7 - 1);
    if ( v3 < v8 )
      v3 = *(v7 - 1);
    v10 = *v7 + v9;
    if ( v4 > *v7 )
      v4 = *v7;
    if ( v3 < *v7 )
      v3 = *v7;
    v11 = v7[1];
    v12 = v11 + v10;
    if ( v4 > v11 )
      v4 = v7[1];
    if ( v3 < v11 )
      v3 = v7[1];
    v13 = v7[2];
    v14 = v13 + v12;
    if ( v4 > v13 )
      v4 = v7[2];
    if ( v3 < v13 )
      v3 = v7[2];
    v15 = v7[3];
    v16 = v15 + v14;
    if ( v4 > v15 )
      v4 = v7[3];
    if ( v3 < v15 )
      v3 = v7[3];
    v17 = v7[4];
    v18 = v17 + v16;
    if ( v4 > v17 )
      v4 = v7[4];
    if ( v3 < v17 )
      v3 = v7[4];
    v19 = v7[5];
    v20 = v19 + v18;
    if ( v4 > v19 )
      v4 = v7[5];
    if ( v3 < v19 )
      v3 = v7[5];
    v21 = v7[6];
    v6 = v21 + v20;
    if ( v4 > v21 )
      v4 = v7[6];
    if ( v3 < v21 )
      v3 = v7[6];
    v7 += 8;
  }
  while ( (int)v7 < (int)&dword_30095B54 );
  v47 = v6;
  v49 = v4;
  v22 = dword_30095AD0;
  v23 = 0.0;
  do
  {
    v24 = (double)*v22++;
    v50 = (double)v6 * 0.03125;
    v23 = v23 + fabs(v24 - v50);
  }
  while ( (int)v22 < (int)&dword_30095B50 );
  if ( !v6 )
    v47 = 1;
  if ( v4 <= 0 )
    v49 = 1;
  v51 = 32000.0 / (double)v47;
  v55 = (int)(v51 + 9.313225746154785e-10);
  v52 = 1000.0 / (double)v3;
  v48 = (int)(v52 + 9.313225746154785e-10);
  v53 = 1000.0 / (double)v49;
  v25 = 0;
  v54 = v23 * 0.03125;
  v26 = (_BYTE *)sub_300403F0(
                   "%ifps(%i-%i,%i)",
                   v55,
                   v48,
                   (int)(v53 + 9.313225746154785e-10),
                   (int)(v54 + 9.313225746154785e-10));
  while ( *v26 )
  {
    if ( *v26 == 94 && (v27 = v26[1]) != 0 && v27 != 94 && v27 >= 48 && v27 <= 57 )
    {
      v26 += 2;
    }
    else
    {
      ++v25;
      ++v26;
    }
  }
  sub_3001A8E0();
  a1 = a1 + 20.0;
  if ( dword_301DC60C <= 1 )
    return a1;
  dword_30076898(108);
  v28 = 0;
  v29 = (_BYTE *)sub_300403F0("%i/%i tris", dword_30095B5C / 3, dword_30095B60 / 3);
  while ( *v29 )
  {
    if ( *v29 == 94 && (v30 = v29[1]) != 0 && v30 != 94 && v30 >= 48 && v30 <= 57 )
    {
      v29 += 2;
    }
    else
    {
      ++v28;
      ++v29;
    }
  }
  sub_3001A9C0();
  v56 = a1 + 16.0;
  v31 = 0;
  v32 = (_BYTE *)sub_300403F0("%i vert", dword_30095B64);
  while ( *v32 )
  {
    if ( *v32 == 94 && (v33 = v32[1]) != 0 && v33 != 94 && v33 >= 48 && v33 <= 57 )
    {
      v32 += 2;
    }
    else
    {
      ++v31;
      ++v32;
    }
  }
  sub_3001A9C0();
  v57 = v56 + 16.0;
  v34 = 0;
  v35 = (_BYTE *)sub_300403F0("%i prim", dword_30095B68);
  while ( *v35 )
  {
    if ( *v35 == 94 && (v36 = v35[1]) != 0 && v36 != 94 && v36 >= 48 && v36 <= 57 )
    {
      v35 += 2;
    }
    else
    {
      ++v34;
      ++v35;
    }
  }
  sub_3001A9C0();
  v58 = v57 + 16.0;
  v37 = 0;
  v38 = (_BYTE *)sub_300403F0("%i ents", dword_30095B78);
  while ( *v38 )
  {
    if ( *v38 == 94 && (v39 = v38[1]) != 0 && v39 != 94 && v39 >= 48 && v39 <= 57 )
    {
      v38 += 2;
    }
    else
    {
      ++v37;
      ++v38;
    }
  }
  sub_3001A9C0();
  v59 = v58 + 16.0;
  v40 = 0;
  v41 = (_BYTE *)sub_300403F0(
                   "%.2f/%.2f/%.2f mb  ",
                   (double)dword_30095B74 * 0.00000095367432,
                   (double)(dword_30095B6C - dword_30095B70) * 0.00000095367432,
                   (double)dword_30095B6C * 0.00000095367432);
  while ( *v41 )
  {
    if ( *v41 == 94 && (v42 = v41[1]) != 0 && v42 != 94 && v42 >= 48 && v42 <= 57 )
    {
      v41 += 2;
    }
    else
    {
      ++v40;
      ++v41;
    }
  }
  sub_3001A9C0();
  a1 = v59 + 16.0;
  if ( flt_30095B7C == 0.0 )
    return a1;
  v43 = 0;
  v44 = (_BYTE *)sub_300403F0("%.2f dc  ", flt_30095B7C);
  while ( *v44 )
  {
    if ( *v44 == 94 && (v45 = v44[1]) != 0 && v45 != 94 && v45 >= 48 && v45 <= 57 )
    {
      v44 += 2;
    }
    else
    {
      ++v43;
      ++v44;
    }
  }
  sub_3001A9C0();
  return a1 + 16.0;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30095AD0: using guessed type int dword_30095AD0[];
// 30095B50: using guessed type int dword_30095B50;
// 30095B54: using guessed type int dword_30095B54;
// 30095B58: using guessed type int dword_30095B58;
// 30095B5C: using guessed type int dword_30095B5C;
// 30095B60: using guessed type int dword_30095B60;
// 30095B64: using guessed type int dword_30095B64;
// 30095B68: using guessed type int dword_30095B68;
// 30095B6C: using guessed type int dword_30095B6C;
// 30095B70: using guessed type int dword_30095B70;
// 30095B74: using guessed type int dword_30095B74;
// 30095B78: using guessed type int dword_30095B78;
// 30095B7C: using guessed type float flt_30095B7C;
// 301DC60C: using guessed type int dword_301DC60C;

//----- (30016150) --------------------------------------------------------
void sub_30016150()
{
  float v0; // [esp+0h] [ebp-4h]

  v0 = 0.0;
  if ( dword_301DDECC )
    v0 = sub_30015A70(0.0);
  if ( dword_301DC60C )
    CG_DrawFPS(v0);
}
// 301DC60C: using guessed type int dword_301DC60C;
// 301DDECC: using guessed type int dword_301DDECC;

//----- (30016190) --------------------------------------------------------
int sub_30016190()
{
  int result; // eax
  int v1; // ebx
  int v2; // ecx
  int i; // edi
  double v4; // st7
  char *v5; // edx
  char v6; // al
  float v7; // [esp+0h] [ebp-5Ch]
  float v8; // [esp+4h] [ebp-58h]
  float v9; // [esp+8h] [ebp-54h]
  float v10; // [esp+Ch] [ebp-50h]
  float v11; // [esp+34h] [ebp-28h]
  float v12; // [esp+3Ch] [ebp-20h]

  result = dword_301DFF6C;
  if ( dword_301DFF6C >= 8 )
  {
    v1 = 8;
  }
  else
  {
    v1 = dword_301DFF6C;
    if ( dword_301DFF6C <= 0 )
      return result;
  }
  v2 = dword_301D95E4;
  if ( dword_301D95E4 != dword_301D95E0 )
  {
    if ( dword_3020AF00 - dword_301D95C0[dword_301D95E4 % v1] > dword_3029BA6C )
      v2 = ++dword_301D95E4;
    for ( i = dword_301D95E0 - 1; i >= v2; --i )
    {
      v4 = flt_3029BA68 - (double)(dword_3020AF00 - dword_301D95C0[i % v1]);
      if ( v4 > 200.0 || v4 * 0.0049999999 > 0.0 )
      {
        v5 = (char *)&unk_301D8D48 + 271 * (i % v1);
        if ( v5 )
        {
          if ( *v5 == 94 )
          {
            v6 = v5[1];
            if ( v6 )
            {
              if ( v6 != 94 && v6 >= 48 && v6 <= 57 )
                dword_30076898(94);
            }
          }
        }
        v12 = (float)(10 * (i - dword_301D95E0) + 84);
        v11 = (float)(dword_30076898(52) + 24);
        dword_30076898(72);
        v10 = flt_301D5A48 * 10.0;
        v9 = flt_301D5A44 * v11;
        v8 = flt_301D5A48 * v12;
        v7 = flt_301D5A44 * 0.0;
        sub_30032820(LODWORD(v7), LODWORD(v8), LODWORD(v9), LODWORD(v10), 0, 0, 1065353216, 1065353216, dword_301D9620);
        dword_30076898(54);
        v2 = dword_301D95E4;
      }
    }
    result = dword_30076898(72);
  }
  return result;
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301D95C0: using guessed type int dword_301D95C0[];
// 301D95E0: using guessed type int dword_301D95E0;
// 301D95E4: using guessed type int dword_301D95E4;
// 301D9620: using guessed type int dword_301D9620;
// 301DFF6C: using guessed type int dword_301DFF6C;
// 3020AF00: using guessed type int dword_3020AF00;
// 3029BA68: using guessed type float flt_3029BA68;
// 3029BA6C: using guessed type int dword_3029BA6C;

//----- (30016460) --------------------------------------------------------
int *__usercall sub_30016460@<eax>(int *result@<eax>)
{
  if ( result )
  {
    dword_301A2184[dword_301A2384 & 0x7F] = result[1];
    dword_301A1F84[dword_301A2384 & 0x7F] = *result;
  }
  else
  {
    result = (int *)(dword_301A2384 & 0x7F);
    dword_301A2184[(_DWORD)result] = -1;
  }
  ++dword_301A2384;
  return result;
}
// 301A2384: using guessed type int dword_301A2384;

//----- (300164B0) --------------------------------------------------------
void sub_300164B0()
{
  int v0; // eax
  int v1; // [esp+20h] [ebp-18h]

  dword_30076898(83);
  dword_30076898(84);
  if ( v1 > *(_DWORD *)(dword_301E5F20 + 12) && v1 <= dword_3020AF00 )
  {
    sub_30023B20("cgame", "CGAME_CONNECTIONINTERRUPTED");
    dword_30076898(52);
    dword_30076898(54);
    if ( (dword_3020AF00 & 0x200) == 0 )
    {
      v0 = sub_300322A0();
      sub_3001A4A0(296.0, 416.0, 48.0, 48.0, v0);
    }
  }
}
// 300164FE: variable 'v1' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;

//----- (300165E0) --------------------------------------------------------
void sub_300165E0()
{
  int v0; // esi
  int v1; // edi
  double v2; // st7
  double v3; // st7
  double v4; // st7
  double v5; // st7
  int v6; // edi
  int v7; // ecx
  double v8; // st7
  float v9; // [esp+0h] [ebp-90h]
  float v10; // [esp+4h] [ebp-8Ch]
  float v11; // [esp+Ch] [ebp-84h]
  int v12; // [esp+20h] [ebp-70h]
  float v13; // [esp+30h] [ebp-60h]
  float v14; // [esp+30h] [ebp-60h]
  float v15; // [esp+30h] [ebp-60h]
  float v16; // [esp+34h] [ebp-5Ch]
  float v17; // [esp+38h] [ebp-58h]
  float v18; // [esp+3Ch] [ebp-54h]
  float v19; // [esp+40h] [ebp-50h]
  float v20; // [esp+44h] [ebp-4Ch]
  float v21; // [esp+48h] [ebp-48h]
  float v22; // [esp+4Ch] [ebp-44h]
  float v23; // [esp+50h] [ebp-40h]

  if ( dword_301E5BAC && !dword_301D5A58 )
  {
    dword_30076898(72);
    sub_3001A4A0(585.0, 340.0, 48.0, 48.0, dword_301D964C);
    v0 = -1;
    v1 = 0;
    v19 = flt_301D5A44 * 585.0;
    v21 = flt_301D5A48 * 340.0;
    v18 = flt_301D5A44 * 48.0;
    v20 = flt_301D5A48 * 48.0;
    v2 = v20 * 0.33333334;
    v16 = v2;
    v23 = v2 + v21;
    if ( v18 > 0.0 )
    {
      v17 = 0.0;
      while ( 1 )
      {
        v22 = v16 * 0.0033333334;
        v3 = (double)dword_301A1D80[((_BYTE)dword_301A1F80 - (_BYTE)v1 - 1) & 0x7F] * v22;
        v13 = v3;
        if ( v3 > 0.0 )
          break;
        if ( v13 < 0.0 )
        {
          if ( v0 != 2 )
          {
            v0 = 2;
            dword_30076898(94);
            dword_30076898(72);
          }
          v4 = -v13;
          v14 = v4;
          if ( v4 > v16 )
            v14 = v16;
          v12 = dword_301D960C;
          v11 = v14;
          v10 = v23;
          goto LABEL_17;
        }
LABEL_18:
        v5 = (double)++v1;
        v17 = v5;
        if ( v5 >= v18 )
          goto LABEL_19;
      }
      if ( v0 != 1 )
      {
        v0 = 1;
        dword_30076898(94);
        dword_30076898(72);
      }
      if ( v13 > (double)v16 )
        v13 = v16;
      v12 = dword_301D960C;
      v11 = v13;
      v10 = v23 - v13;
LABEL_17:
      v9 = v18 + v19 - v17;
      sub_30032820(LODWORD(v9), LODWORD(v10), 1065353216, LODWORD(v11), 0, 0, 0, 0, v12);
      goto LABEL_18;
    }
LABEL_19:
    v6 = 0;
    if ( v18 > 0.0 )
    {
      while ( 1 )
      {
        v7 = ((_BYTE)dword_301A2384 - (_BYTE)v6 - 1) & 0x7F;
        v8 = (double)dword_301A2184[v7];
        if ( v8 > 0.0 )
          break;
        v15 = v8;
        if ( v15 < 0.0 )
        {
          if ( v0 != 4 )
          {
            v0 = 4;
            dword_30076898(94);
            dword_30076898(72);
          }
          goto LABEL_31;
        }
LABEL_32:
        if ( (double)++v6 >= v18 )
          goto LABEL_33;
      }
      if ( (dword_301A1F84[v7] & 1) != 0 )
      {
        if ( v0 != 5 )
        {
          v0 = 5;
          dword_30076898(94);
LABEL_26:
          dword_30076898(72);
          goto LABEL_31;
        }
      }
      else if ( v0 != 3 )
      {
        v0 = 3;
        dword_30076898(94);
        goto LABEL_26;
      }
LABEL_31:
      dword_30076898(73);
      goto LABEL_32;
    }
LABEL_33:
    dword_30076898(72);
    if ( dword_301E54EC || dword_301E596C )
      sub_3001A8E0();
  }
  sub_300164B0();
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301A1F80: using guessed type int dword_301A1F80;
// 301A2384: using guessed type int dword_301A2384;
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301D5A58: using guessed type int dword_301D5A58;
// 301D960C: using guessed type int dword_301D960C;
// 301E54EC: using guessed type int dword_301E54EC;
// 301E596C: using guessed type int dword_301E596C;
// 301E5BAC: using guessed type int dword_301E5BAC;

//----- (30016A70) --------------------------------------------------------
char __usercall sub_30016A70@<al>(int a1@<eax>, int a2, float a3, float a4)
{
  int v4; // esi
  int v5; // edi
  const char *v6; // eax
  int v7; // esi
  int v8; // eax
  char *v10; // [esp+8h] [ebp-4h]

  v4 = a1;
  LOBYTE(a1) = dword_3021023C;
  v5 = 0;
  if ( !dword_3021023C || v4 >= dword_3021064C )
  {
    v6 = (const char *)sub_30023C90();
    strncpy(byte_30210248, v6, 0x3FFu);
    dword_3021064C = v4;
    v7 = 0;
    byte_30210647 = 0;
    while ( byte_30210248[0] )
    {
      v8 = dword_30076898(59);
      if ( v8 == 10 )
        goto LABEL_10;
      if ( ++v7 < 75 )
      {
        if ( !v5 )
          continue;
      }
      else
      {
        v5 = 1;
      }
      if ( v8 == 32 )
      {
        byte_30210248[-1] = 10;
LABEL_10:
        v5 = 0;
        v7 = 0;
      }
    }
    dword_3021023C = dword_3020AF00 + 2000;
    dword_30210244 = (unsigned __int64)a3;
    dword_30210240 = (unsigned __int64)a4;
    LOBYTE(a1) = byte_30210248[0];
    dword_30210648 = 1;
    v10 = byte_30210248;
    while ( *v10 )
    {
      a1 = dword_30076898(59);
      if ( a1 == 10 )
      {
        ++dword_30210648;
      }
      else if ( a1 == 92 )
      {
        LOBYTE(a1) = (_BYTE)v10;
        if ( *v10 == 110 )
        {
          LOBYTE(a1) = (_BYTE)v10 + 1;
          ++dword_30210648;
          ++v10;
        }
      }
    }
  }
  return a1;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;
// 3021023C: using guessed type int dword_3021023C;
// 30210240: using guessed type int dword_30210240;
// 30210244: using guessed type int dword_30210244;
// 30210647: using guessed type char byte_30210647;
// 30210648: using guessed type int dword_30210648;
// 3021064C: using guessed type int dword_3021064C;

//----- (30016BD0) --------------------------------------------------------
int sub_30016BD0()
{
  char *v0; // esi
  double v1; // st7
  int i; // eax
  char v3; // dl
  char *v4; // ecx
  char v5; // dl
  char v6; // dl
  char v7; // dl
  char v8; // dl
  char v9; // al
  float v11; // [esp+8h] [ebp-42Ch]
  float v12; // [esp+28h] [ebp-40Ch]
  char v13[4]; // [esp+30h] [ebp-404h] BYREF
  char v14[1020]; // [esp+34h] [ebp-400h] BYREF
  unsigned int v15; // [esp+430h] [ebp-4h]
  unsigned int retaddr; // [esp+434h] [ebp+0h]

  v15 = retaddr ^ dword_300705C0;
  if ( dword_3021023C )
  {
    if ( sub_3001ABD0((unsigned __int64)(flt_301DFE48 * 1000.0), dword_3021023C) )
    {
      dword_30076898(72);
      v0 = &byte_30210248;
      v1 = (double)dword_30076898(53);
      v11 = (double)dword_30210244 - v1 * 0.5 * (double)dword_30210648 - v1;
      while ( 1 )
      {
        for ( i = 0; i < 75; i += 5 )
        {
          v3 = v0[i];
          v4 = &v0[i];
          if ( !v3 || v3 == 10 )
            break;
          v13[i] = v3;
          v5 = v0[i + 1];
          if ( !v5 || v5 == 10 )
          {
            ++i;
            break;
          }
          v13[i + 1] = v5;
          v6 = v0[i + 2];
          if ( !v6 || v6 == 10 )
          {
            i += 2;
            break;
          }
          v13[i + 2] = v6;
          v7 = v0[i + 3];
          if ( !v7 || v7 == 10 )
          {
            i += 3;
            break;
          }
          v13[i + 3] = v7;
          v8 = v0[i + 4];
          if ( !v8 || v8 == 10 )
          {
            i += 4;
            break;
          }
          v4[v14 - v0] = v8;
        }
        v13[i] = 0;
        dword_30076898(52);
        dword_30076898(54);
        v9 = *v0;
        v12 = v1 * 1.2;
        v11 = v12 + v11;
        if ( !*v0 )
          break;
        while ( v9 != 10 )
        {
          v9 = *++v0;
          if ( !v9 )
            goto LABEL_25;
        }
        if ( !*v0 )
          break;
        ++v0;
      }
LABEL_25:
      dword_30076898(72);
    }
    else
    {
      dword_3021023C = 0;
      dword_3021064C = 0;
    }
  }
  return sub_30052A2E(retaddr ^ v15);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301DFE48: using guessed type float flt_301DFE48;
// 3021023C: using guessed type int dword_3021023C;
// 30210244: using guessed type int dword_30210244;
// 30210648: using guessed type int dword_30210648;
// 3021064C: using guessed type int dword_3021064C;
// 30016BD0: using guessed type char var_400[1020];

//----- (30016E00) --------------------------------------------------------
void __usercall sub_30016E00(float *a1@<edi>, float *a2@<esi>)
{
  float v2; // [esp+0h] [ebp-30h] BYREF
  float v3; // [esp+4h] [ebp-2Ch]
  float v4; // [esp+8h] [ebp-28h]
  float v5; // [esp+Ch] [ebp-24h] BYREF
  float v6; // [esp+10h] [ebp-20h]
  float v7; // [esp+18h] [ebp-18h]
  float *v8; // [esp+1Ch] [ebp-14h]
  float v9; // [esp+20h] [ebp-10h]
  float v10; // [esp+24h] [ebp-Ch]
  float v11; // [esp+28h] [ebp-8h]
  float v12; // [esp+2Ch] [ebp-4h]

  v6 = *(float *)&dword_30210944 * 0.017453292;
  v3 = cos(v6);
  v4 = sin(v6);
  v8 = &v2;
  v6 = *(float *)&dword_30210940 * 0.017453292;
  v9 = COERCE_FLOAT(&v5);
  v2 = cos(v6);
  v5 = sin(v6);
  v10 = v2 * v3;
  v11 = v2 * v4;
  v12 = -v5;
  v7 = flt_3020D35C * v12 + flt_3020D358 * v11 + flt_3020D354 * v10;
  if ( v7 <= 0.0 || flt_3020D340 <= 0.0 || flt_3020D344 <= 0.0 )
  {
    *a1 = 0.0;
    *a2 = 0.0;
  }
  else
  {
    v9 = tan(flt_3020D340 * 0.0087266462);
    *a1 = (flt_3020D368 * v12 + flt_3020D364 * v11 + flt_3020D360 * v10) / (v9 * v7) * -320.0;
    v9 = tan(flt_3020D344 * 0.0087266462);
    *a2 = (*(float *)&dword_3020D374 * v12 + *(float *)&dword_3020D370 * v11 + *(float *)&dword_3020D36C * v10)
        / (v9
         * v7)
        * -240.0;
  }
}
// 3020D340: using guessed type float flt_3020D340;
// 3020D344: using guessed type float flt_3020D344;
// 3020D354: using guessed type float flt_3020D354;
// 3020D358: using guessed type float flt_3020D358;
// 3020D35C: using guessed type float flt_3020D35C;
// 3020D360: using guessed type float flt_3020D360;
// 3020D364: using guessed type float flt_3020D364;
// 3020D368: using guessed type float flt_3020D368;
// 3020D36C: using guessed type int dword_3020D36C;
// 3020D370: using guessed type int dword_3020D370;
// 3020D374: using guessed type int dword_3020D374;
// 30210940: using guessed type int dword_30210940;
// 30210944: using guessed type int dword_30210944;

//----- (30016FB0) --------------------------------------------------------
int __thiscall sub_30016FB0(float *this)
{
  float v1; // eax
  double v2; // st7
  unsigned __int8 v4; // c0
  unsigned __int8 v5; // c3
  double v6; // st7
  unsigned __int8 v8; // c0
  unsigned __int8 v9; // c3
  int result; // eax

  v1 = flt_3020AFCC;
  *this = 0.0;
  if ( !**(_BYTE **)(dword_3020D238 + 548) && !*(_DWORD *)(dword_3020D238 + 552) || v1 == 0.0 )
    goto LABEL_10;
  if ( dword_3020D20C )
  {
    v2 = v1 - (1.0 - *(float *)(dword_3020D238 + 540));
    *this = v2;
    if ( !(v4 | v5) )
      *this = v2 / *(float *)(dword_3020D238 + 540);
  }
  else
  {
    v6 = v1 - (1.0 - *(float *)(dword_3020D238 + 544));
    *this = v6;
    if ( !(v8 | v9) )
      *this = v6 / *(float *)(dword_3020D238 + 544);
  }
  if ( *this > 0.0099999998 )
    result = 1;
  else
LABEL_10:
    result = 0;
  return result;
}
// 30017013: variable 'v4' is possibly undefined
// 30017013: variable 'v5' is possibly undefined
// 3001703C: variable 'v8' is possibly undefined
// 3001703C: variable 'v9' is possibly undefined
// 3020AFCC: using guessed type float flt_3020AFCC;
// 3020D20C: using guessed type int dword_3020D20C;
// 3020D238: using guessed type int dword_3020D238;

//----- (30017070) --------------------------------------------------------
double sub_30017070()
{
  int v1; // ebx
  double v2; // st7
  double v3; // st6
  int v4; // esi
  float v5; // ebp
  float v6; // edi
  double v7; // st6
  double v8; // st7
  int v9; // eax
  double v10; // st6
  double v11; // st7
  float v12; // [esp+0h] [ebp-6Ch]
  float v13; // [esp+0h] [ebp-6Ch]
  float v14; // [esp+0h] [ebp-6Ch]
  float v15; // [esp+0h] [ebp-6Ch]
  float v16; // [esp+4h] [ebp-68h]
  float v17; // [esp+4h] [ebp-68h]
  float v18; // [esp+8h] [ebp-64h]
  float v19; // [esp+8h] [ebp-64h]
  float v20; // [esp+8h] [ebp-64h]
  float v21; // [esp+8h] [ebp-64h]
  float v22; // [esp+Ch] [ebp-60h]
  float v23; // [esp+Ch] [ebp-60h]
  float v24; // [esp+Ch] [ebp-60h]
  int v25; // [esp+Ch] [ebp-60h]
  float v26; // [esp+Ch] [ebp-60h]
  float v27; // [esp+Ch] [ebp-60h]
  int v28; // [esp+20h] [ebp-4Ch]
  float v29; // [esp+34h] [ebp-38h]
  float v30; // [esp+38h] [ebp-34h]
  float v31; // [esp+3Ch] [ebp-30h]
  float v32; // [esp+40h] [ebp-2Ch]
  float v33; // [esp+44h] [ebp-28h]
  float v34; // [esp+44h] [ebp-28h]
  float v35; // [esp+44h] [ebp-28h]
  float v36; // [esp+48h] [ebp-24h]
  float v37; // [esp+48h] [ebp-24h]
  float v38; // [esp+48h] [ebp-24h]
  float v39; // [esp+48h] [ebp-24h]
  int v40; // [esp+4Ch] [ebp-20h]
  int v41; // [esp+4Ch] [ebp-20h]
  float v42; // [esp+50h] [ebp-1Ch] BYREF
  float v43; // [esp+54h] [ebp-18h] BYREF
  float v44; // [esp+58h] [ebp-14h] BYREF
  int v45; // [esp+5Ch] [ebp-10h]
  int v46; // [esp+60h] [ebp-Ch]
  int v47; // [esp+64h] [ebp-8h]
  int v48; // [esp+68h] [ebp-4h]

  v45 = 1065353216;
  v46 = 1065353216;
  v47 = 1065353216;
  v48 = 1065353216;
  if ( !sub_30016FB0(&v44) )
    return 1.0;
  v48 = LODWORD(v44);
  v1 = *(_DWORD *)dword_3020D238;
  v40 = *(_DWORD *)dword_3020D238;
  sub_30016E00(&v43, &v42);
  v29 = *(float *)(dword_3020D238 + 556) * flt_301D5A44;
  v32 = *(float *)(dword_3020D238 + 560) * flt_301D5A48;
  v30 = flt_301D5A44 * v43 + (double)dword_3020D338 * 0.5 + (double)dword_3020D330;
  v31 = flt_301D5A48 * v42 + (double)dword_3020D33C * 0.5 + (double)dword_3020D334;
  dword_30076898(72);
  if ( **(_BYTE **)(dword_3020D238 + 548) )
  {
    v2 = v31 - v32;
    v36 = v2;
    v3 = v30 - v29;
    v4 = dword_301AA644[102 * v1];
    v33 = v3;
    v5 = v33;
    sub_30032820(LODWORD(v33), LODWORD(v36), LODWORD(v29), LODWORD(v32), 0, 0, 1065353216, 1065353216, v4);
    sub_30032820(LODWORD(v30), LODWORD(v36), LODWORD(v29), LODWORD(v32), 1065353216, 0, 0, 1065353216, v4);
    sub_30032820(LODWORD(v33), LODWORD(v31), LODWORD(v29), LODWORD(v32), 0, 1065353216, 1065353216, 0, v4);
    v6 = v31;
    sub_30032820(LODWORD(v30), LODWORD(v31), LODWORD(v29), LODWORD(v32), 1065353216, 1065353216, 0, 0, v4);
    if ( v3 > 0.0 )
    {
      v22 = (float)dword_3020D33C;
      sub_30032820(0, 0, LODWORD(v33), LODWORD(v22), 0, 0, 0, 1065353216, v4);
    }
    v34 = v29 + v30;
    v7 = (double)dword_3020D338;
    if ( v34 < v7 )
    {
      v23 = (float)dword_3020D33C;
      v18 = v7 - v34;
      sub_30032820(LODWORD(v34), 0, LODWORD(v18), LODWORD(v23), 0, 0, 0, 1065353216, v4);
    }
    if ( v2 > 0.0 )
    {
      v19 = v29 + v29;
      sub_30032820(LODWORD(v5), 0, LODWORD(v19), LODWORD(v36), 0, 0, 1065353216, 0, v4);
    }
    v37 = v32 + v31;
    v8 = (double)dword_3020D33C;
    if ( v37 < v8 )
    {
      v24 = v8 - v37;
      v20 = v29 + v29;
      sub_30032820(LODWORD(v5), LODWORD(v37), LODWORD(v20), LODWORD(v24), 0, 0, 1065353216, 0, v4);
    }
    v1 = v40;
  }
  else
  {
    v6 = v31;
  }
  v9 = *(_DWORD *)(dword_3020D238 + 552);
  if ( v9 )
  {
    switch ( v9 )
    {
      case 1:
        v10 = (double)*(int *)(dword_3020D238 + 240);
        v38 = flt_301D5A44 * v10;
        v28 = dword_301AA63C[102 * v1];
        *(float *)&v41 = flt_301D5A48 * v10;
        v25 = v41;
        v21 = v38;
        v16 = ((double)dword_3020D33C - *(float *)&v41) * 0.5 + flt_301D5A48 * v42 + (double)dword_3020D334;
        v11 = ((double)dword_3020D338 - v38) * 0.5 + flt_301D5A44 * v43 + (double)dword_3020D330;
LABEL_23:
        v15 = v11;
        sub_30032820(LODWORD(v15), LODWORD(v16), LODWORD(v21), v25, 0, 0, 1065353216, 1065353216, v28);
        break;
      case 2:
        goto LABEL_22;
      case 3:
        v47 = 0;
        v46 = 0;
        v45 = 0;
        dword_30076898(72);
        v26 = v32 * 1.8;
        v17 = v31 - v32 * 0.89999998;
        v12 = v30 - 1.0;
        sub_30032820(LODWORD(v12), LODWORD(v17), 1077936128, LODWORD(v26), 0, 0, 1065353216, 1065353216, dword_301D9610);
        v28 = dword_301D9614;
        v25 = 1077936128;
        v21 = v29 * 1.8;
        v16 = v31 - 1.0;
        v11 = v30 - v29 * 0.89999998;
        goto LABEL_23;
      case 4:
LABEL_22:
        v47 = 0;
        v46 = 0;
        v45 = 0;
        dword_30076898(72);
        v27 = v32 * 0.89999998;
        v13 = v30 - 1.0;
        sub_30032820(LODWORD(v13), LODWORD(v6), 1077936128, LODWORD(v27), 0, 0, 1065353216, 1065353216, dword_301D9610);
        v39 = v29 * 0.75;
        v35 = v31 - 1.0;
        v14 = v30 - v29 * 0.89999998;
        sub_30032820(LODWORD(v14), LODWORD(v35), LODWORD(v39), 1077936128, 0, 0, 1065353216, 1065353216, dword_301D9614);
        v28 = dword_301D9614;
        v25 = 1077936128;
        v21 = v39;
        v16 = v35;
        v11 = v29 * 0.15000001 + v30;
        goto LABEL_23;
    }
  }
  dword_30076898(72);
  return 1.0 - v44;
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301AA63C: using guessed type int dword_301AA63C[];
// 301AA644: using guessed type int dword_301AA644[];
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301D9610: using guessed type int dword_301D9610;
// 301D9614: using guessed type int dword_301D9614;
// 3020D238: using guessed type int dword_3020D238;
// 3020D330: using guessed type int dword_3020D330;
// 3020D334: using guessed type int dword_3020D334;
// 3020D338: using guessed type int dword_3020D338;
// 3020D33C: using guessed type int dword_3020D33C;

//----- (300176A0) --------------------------------------------------------
void sub_300176A0()
{
  int v0; // esi
  int v1; // edi
  double v2; // st7
  float v3; // [esp+0h] [ebp-44h]
  float v4; // [esp+4h] [ebp-40h]
  float v5; // [esp+2Ch] [ebp-18h]
  float v6; // [esp+30h] [ebp-14h]

  if ( dword_301DCF0C )
  {
    if ( !dword_3029D32C && !dword_3020AF10 )
    {
      v0 = *((_DWORD *)&unk_30211940 + 138 * dword_3020B28C + 50);
      if ( v0 )
      {
        v1 = *(_DWORD *)(dword_300F0FB4 + 4 * v0);
        if ( **(_BYTE **)(v1 + 232) )
        {
          if ( *(float *)&dword_301DF668 >= 0.0099999998 )
          {
            dword_30076898(72);
            v2 = (double)*(int *)(v1 + 240);
            v6 = flt_301D5A44 * v2;
            v5 = v2 * flt_301D5A48;
            v4 = ((double)dword_3020D33C - v5) * 0.5 + flt_301D5A48 * 0.0 + (double)dword_3020D334;
            v3 = ((double)dword_3020D338 - v6) * 0.5 + flt_301D5A44 * 0.0 + (double)dword_3020D330;
            sub_30032820(
              LODWORD(v3),
              LODWORD(v4),
              LODWORD(v6),
              LODWORD(v5),
              0,
              0,
              1065353216,
              1065353216,
              dword_301AA63C[102 * v0]);
          }
        }
      }
    }
  }
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301AA63C: using guessed type int dword_301AA63C[];
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301DCF0C: using guessed type int dword_301DCF0C;
// 301DF668: using guessed type int dword_301DF668;
// 3020AF10: using guessed type int dword_3020AF10;
// 3020B28C: using guessed type int dword_3020B28C;
// 3020D330: using guessed type int dword_3020D330;
// 3020D334: using guessed type int dword_3020D334;
// 3020D338: using guessed type int dword_3020D338;
// 3020D33C: using guessed type int dword_3020D33C;
// 3029D32C: using guessed type int dword_3029D32C;

//----- (300177F0) --------------------------------------------------------
void sub_300177F0()
{
  int v0; // ebx
  double v1; // st7
  int v2; // ecx
  double v3; // st7
  double v4; // st7
  double v5; // st7
  int v6; // eax
  int v7; // esi
  double v8; // st7
  double v9; // st7
  int v10; // ecx
  double v11; // st7
  double v12; // st7
  int v13; // edi
  int v14; // esi
  float v15; // [esp+0h] [ebp-C0h]
  float v16; // [esp+4h] [ebp-BCh]
  float v17; // [esp+4h] [ebp-BCh]
  float v18; // [esp+4h] [ebp-BCh]
  float v19; // [esp+8h] [ebp-B8h]
  float v20; // [esp+8h] [ebp-B8h]
  float v21; // [esp+14h] [ebp-ACh]
  float v22; // [esp+1Ch] [ebp-A4h]
  float v23; // [esp+20h] [ebp-A0h]
  float v24; // [esp+34h] [ebp-8Ch]
  float v25; // [esp+34h] [ebp-8Ch]
  float v26; // [esp+34h] [ebp-8Ch]
  float v27; // [esp+34h] [ebp-8Ch]
  float v28; // [esp+38h] [ebp-88h]
  float v29; // [esp+38h] [ebp-88h]
  float v30; // [esp+38h] [ebp-88h]
  float v31; // [esp+38h] [ebp-88h]
  float v32; // [esp+3Ch] [ebp-84h]
  float v33; // [esp+40h] [ebp-80h]
  float v34; // [esp+44h] [ebp-7Ch]
  float v35; // [esp+48h] [ebp-78h] BYREF
  float v36; // [esp+4Ch] [ebp-74h] BYREF
  int v37; // [esp+50h] [ebp-70h]
  int v38; // [esp+54h] [ebp-6Ch]
  int v39; // [esp+58h] [ebp-68h]
  float v40; // [esp+5Ch] [ebp-64h]
  int v41; // [esp+60h] [ebp-60h]
  int v42[7]; // [esp+64h] [ebp-5Ch]
  int v43; // [esp+80h] [ebp-40h]
  int v44[7]; // [esp+84h] [ebp-3Ch]
  int v45; // [esp+A0h] [ebp-20h]
  int v46[7]; // [esp+A4h] [ebp-1Ch]

  v24 = flt_3020AFCC;
  v37 = 1065353216;
  v38 = 1065353216;
  v39 = 1065353216;
  v40 = 0.0;
  v33 = 1.0;
  v34 = 0.0;
  if ( !dword_3020AF10 )
  {
    v40 = *(float *)&dword_301DF668;
    if ( (dword_3020AF94 & 0xC000) != 0 )
    {
      if ( dword_3020B28C != 1023 )
        sub_300176A0();
      return;
    }
    if ( dword_3020B298 == 9 )
    {
      v39 = 1048576000;
      v37 = 1048576000;
    }
    v0 = *(_DWORD *)dword_3020D238;
    if ( *(_DWORD *)dword_3020D238 )
    {
      v1 = sub_30017070() * *(float *)&dword_301DF668;
      v40 = v1;
      if ( v1 >= 0.0099999998
        && dword_301DCF0C
        && !dword_3029D32C
        && (v24 != 1.0 || !dword_301DF9CC)
        && dword_3020AFC8 != 10
        && dword_3020AFC8 != 11
        && dword_3020AFC8 != 5
        && dword_3020AFC8 != 1
        && dword_3020AFC8 != 2 )
      {
        sub_30016E00(&v36, &v35);
        dword_30076898(72);
        v2 = dword_3020D238;
        if ( v24 == 0.0 )
        {
LABEL_32:
          if ( !dword_301E464C )
          {
            v36 = 0.0;
            v35 = v34;
          }
          if ( **(_BYTE **)(v2 + 232) )
          {
            v32 = flt_301D5A44 * v36;
            v25 = flt_301D5A48 * v35;
            v29 = (float)*(int *)(v2 + 240);
            if ( *(_DWORD *)(v2 + 112) == 1 )
            {
              v7 = dword_3020AF48;
              if ( dword_3020AF48 )
              {
                if ( *(_DWORD *)(v2 + 732) )
                {
                  if ( dword_30210770 % 1000 < dword_3020AF48 % 1000 && (unsigned int)(dword_3020AF48 / 1000) < 4 )
                  {
                    sub_30022E80();
                    v7 = dword_3020AF48;
                  }
                  dword_30210770 = v7;
                  v29 = (double)(v7 % 1000) * 0.0099999998 + v29;
                }
              }
            }
            v30 = v29 * v33;
            v20 = ((double)dword_3020D33C - v30) * 0.5 + (double)dword_3020D334 + v25;
            v17 = ((double)dword_3020D338 - v30) * 0.5 + (double)dword_3020D330 + v32;
            sub_30032820(
              LODWORD(v17),
              LODWORD(v20),
              LODWORD(v30),
              LODWORD(v30),
              0,
              0,
              1065353216,
              1065353216,
              dword_301AA63C[102 * v0]);
            v2 = dword_3020D238;
          }
          if ( **(_BYTE **)(v2 + 236) )
          {
            v8 = sub_30017070() * (1.0 - flt_3020B2EC * 0.0039215689) * *(float *)&dword_301DF668;
            v40 = v8;
            if ( v8 < flt_301E2FC8 )
              v40 = flt_301E2FC8;
            dword_30076898(72);
            v9 = sub_30010830(*(_DWORD *)(dword_301E5F20 + 8), v0, (int)&dword_3020AF14);
            v10 = dword_3020D238;
            v11 = (v9 + (*(float *)(dword_3020D238 + 584) - v9) * (flt_3020B2EC * 0.0039215689)) * v33;
            v31 = 640.0 / flt_3020D340 * v11;
            v12 = v11 * (480.0 / flt_3020D344);
            v26 = (float)*(int *)(dword_3020D238 + 248);
            if ( v31 < (double)v26 )
              v31 = (float)*(int *)(dword_3020D238 + 248);
            if ( v12 < v26 )
              v12 = v26;
            v13 = dword_301AA640[102 * v0];
            v14 = 0;
            v43 = -1090519040;
            v44[0] = -1082130432;
            v44[1] = 0;
            v44[2] = -1090519040;
            v44[3] = -1090519040;
            v44[4] = 0;
            v44[5] = -1082130432;
            v44[6] = -1090519040;
            v41 = 0;
            v42[0] = -1082130432;
            v42[1] = 1065353216;
            v42[2] = 0;
            v42[3] = 0;
            v42[4] = 1065353216;
            v42[5] = -1082130432;
            v42[6] = 0;
            v45 = 0;
            v46[0] = -1082130432;
            v46[1] = 0;
            v46[2] = 0;
            v46[3] = 0;
            v46[4] = 0;
            v46[5] = -1082130432;
            v46[6] = 0;
            while ( 1 )
            {
              v27 = (double)*(int *)(v10 + 244) * v33;
              v23 = (double)(v14 & 1) * 90.0;
              v22 = (float)(((v14 - 2) >> 1) & 1);
              v21 = (float)((v14 >> 1) & 1);
              v18 = (v12 * *(float *)&v42[2 * v14] + v35) * flt_301D5A48
                  + v27 * *(float *)&v44[2 * v14]
                  + *(float *)&v46[2 * v14]
                  - *(float *)&v42[2 * v14] * *(float *)(v10 + 612) * v27
                  + (double)dword_3020D33C * 0.5
                  + (double)dword_3020D334;
              v15 = (v31 * *((float *)&v41 + 2 * v14) + v36) * flt_301D5A44
                  + v27 * *((float *)&v43 + 2 * v14)
                  + *((float *)&v45 + 2 * v14)
                  - *((float *)&v41 + 2 * v14) * *(float *)(v10 + 612) * v27
                  + (double)dword_3020D338 * 0.5
                  + (double)dword_3020D330;
              sub_30032930(
                LODWORD(v15),
                LODWORD(v18),
                LODWORD(v27),
                LODWORD(v27),
                0,
                LODWORD(v21),
                1065353216,
                LODWORD(v22),
                LODWORD(v23),
                v13);
              if ( ++v14 >= 4 )
                break;
              v10 = dword_3020D238;
            }
          }
LABEL_53:
          dword_30076898(72);
          return;
        }
        if ( dword_3020D20C )
        {
          v3 = v24 - (1.0 - *(float *)(dword_3020D238 + 852));
          if ( v3 <= 0.0 )
            goto LABEL_26;
          v4 = v3 / *(float *)(dword_3020D238 + 852);
        }
        else
        {
          v5 = v24 - (1.0 - *(float *)(dword_3020D238 + 856));
          if ( v5 <= 0.0 )
            goto LABEL_26;
          v4 = v5 / *(float *)(dword_3020D238 + 856);
        }
        if ( v4 > 0.0 )
        {
          v33 = 1.0 - 0.5 * v4;
          v34 = 480.0 / flt_3020D344 * *(float *)(dword_3020D238 + 848) * v4;
        }
LABEL_26:
        if ( !dword_301DF9CC )
        {
          if ( v33 < 1.0 )
          {
            v6 = dword_301AA63C[102 * v0];
            if ( v6 || (v6 = sub_300322A0(), v2 = dword_3020D238, v6) )
            {
              v28 = (double)*(int *)(v2 + 240) * (1.5 - v33);
              v19 = ((double)dword_3020D33C - v28) * 0.5 + flt_301D5A48 * v35 + (double)dword_3020D334;
              v16 = ((double)dword_3020D338 - v28) * 0.5 + flt_301D5A44 * v36 + (double)dword_3020D330;
              sub_30032820(LODWORD(v16), LODWORD(v19), LODWORD(v28), LODWORD(v28), 0, 0, 1065353216, 1065353216, v6);
              v2 = dword_3020D238;
            }
          }
          if ( v24 == 1.0 )
            goto LABEL_53;
        }
        goto LABEL_32;
      }
    }
  }
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30032930: using guessed type double __cdecl sub_30032930(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301AA63C: using guessed type int dword_301AA63C[];
// 301AA640: using guessed type int dword_301AA640[];
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301DCF0C: using guessed type int dword_301DCF0C;
// 301DF668: using guessed type int dword_301DF668;
// 301DF9CC: using guessed type int dword_301DF9CC;
// 301E2FC8: using guessed type float flt_301E2FC8;
// 301E464C: using guessed type int dword_301E464C;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF10: using guessed type int dword_3020AF10;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020AF48: using guessed type int dword_3020AF48;
// 3020AF94: using guessed type int dword_3020AF94;
// 3020AFC8: using guessed type int dword_3020AFC8;
// 3020AFCC: using guessed type float flt_3020AFCC;
// 3020B28C: using guessed type int dword_3020B28C;
// 3020B298: using guessed type int dword_3020B298;
// 3020B2EC: using guessed type float flt_3020B2EC;
// 3020D20C: using guessed type int dword_3020D20C;
// 3020D238: using guessed type int dword_3020D238;
// 3020D330: using guessed type int dword_3020D330;
// 3020D334: using guessed type int dword_3020D334;
// 3020D338: using guessed type int dword_3020D338;
// 3020D33C: using guessed type int dword_3020D33C;
// 3020D340: using guessed type float flt_3020D340;
// 3020D344: using guessed type float flt_3020D344;
// 30210770: using guessed type int dword_30210770;
// 3029D32C: using guessed type int dword_3029D32C;

//----- (30017EE0) --------------------------------------------------------
unsigned __int16 sub_30017EE0()
{
  unsigned __int16 result; // ax
  int v1[3]; // [esp+0h] [ebp-48h] BYREF
  float v2[3]; // [esp+Ch] [ebp-3Ch] BYREF
  float v3[10]; // [esp+18h] [ebp-30h] BYREF
  unsigned __int16 v4; // [esp+40h] [ebp-8h]

  *(float *)v1 = flt_3020D348;
  *(float *)&v1[1] = flt_3020D34C;
  *(float *)&v1[2] = flt_3020D350;
  v2[0] = flt_3020D354 * 8192.0 + flt_3020D348;
  v2[1] = flt_3020D358 * 8192.0 + flt_3020D34C;
  v2[2] = flt_3020D35C * 8192.0 + flt_3020D350;
  sub_3002A3A0(
    33554433,
    (int)v2,
    (int)&flt_300628EC,
    v3,
    (int)v1,
    (int)&flt_300628EC,
    *(_DWORD *)(dword_301E5F20 + 184));
  result = v4;
  if ( v4 < 0x40u )
  {
    dword_3021067C = v4;
    dword_30210680 = dword_3020AF00;
  }
  return result;
}
// 300628EC: using guessed type float flt_300628EC;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 3020D354: using guessed type float flt_3020D354;
// 3020D358: using guessed type float flt_3020D358;
// 3020D35C: using guessed type float flt_3020D35C;
// 3021067C: using guessed type int dword_3021067C;
// 30210680: using guessed type int dword_30210680;

//----- (30017FA0) --------------------------------------------------------
int sub_30017FA0()
{
  int result; // eax

  result = dword_3020AF10;
  if ( !dword_3020AF10 )
  {
    result = dword_301E5F20;
    if ( *(_DWORD *)(dword_301E5F20 + 912) )
    {
      dword_3021069C = dword_3020AF00;
      dword_302106A0 = dword_3029CEAC;
      dword_30210698 = *(_DWORD *)(dword_301E5F20 + 912);
      dword_302106A4 = *(_DWORD *)(dword_301E5F20 + 916);
      result = *(_DWORD *)(dword_301E5F20 + 920);
      dword_302106A8 = result;
    }
  }
  return result;
}
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF10: using guessed type int dword_3020AF10;
// 30210698: using guessed type int dword_30210698;
// 3021069C: using guessed type int dword_3021069C;
// 302106A0: using guessed type int dword_302106A0;
// 302106A4: using guessed type int dword_302106A4;
// 302106A8: using guessed type int dword_302106A8;
// 3029CEAC: using guessed type int dword_3029CEAC;

//----- (30018000) --------------------------------------------------------
int sub_30018000()
{
  int result; // eax
  int v1; // ecx
  int v2; // ecx

  result = dword_301DCF0C;
  if ( dword_301DCF0C >= 0 )
  {
    result = dword_301E488C;
    if ( dword_301E488C )
    {
      result = dword_3020AF10;
      if ( !dword_3020AF10 )
      {
        sub_30017EE0();
        result = (int)sub_3001ABD0(150, dword_30210680);
        if ( result )
        {
          result = dword_3021067C;
          if ( dword_3021067C <= 64 )
          {
            v1 = 300 * *(_DWORD *)(dword_301E5F20 + 184);
            if ( dword_3018DC8C[v1] )
            {
              v2 = dword_3018DCB8[v1];
              if ( v2 )
              {
                result = 1200 * dword_3021067C;
                if ( dword_3018DC8C[300 * dword_3021067C] )
                {
                  if ( v2 == 3 || dword_3018DCB8[300 * dword_3021067C] == v2 )
                  {
                    result = sub_300403F0("%s", &byte_3018DC98[result]);
                    if ( result )
                    {
                      if ( *(_BYTE *)result )
                      {
                        sub_30040310((char *)result);
                        result = sub_30032560();
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 3018DCB8: using guessed type int dword_3018DCB8[];
// 301DCF0C: using guessed type int dword_301DCF0C;
// 301E488C: using guessed type int dword_301E488C;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF10: using guessed type int dword_3020AF10;
// 3021067C: using guessed type int dword_3021067C;
// 30210680: using guessed type int dword_30210680;
// 3021068C: using guessed type int dword_3021068C;
// 30210690: using guessed type int dword_30210690;

//----- (300181B0) --------------------------------------------------------
void sub_300181B0()
{
  int v0; // eax
  int v1; // ecx
  bool v2; // cc
  double v4; // st7
  unsigned __int8 v5; // c0
  unsigned __int8 v6; // c3
  double v7; // st7
  double v8; // st7
  int v9; // [esp+0h] [ebp-14h]

  if ( dword_301D9604 + dword_301D9608 >= dword_3020AF00 )
  {
    if ( *(float *)&dword_301D9600 != *(float *)&dword_301D95FC )
    {
      v0 = dword_30076898(6);
      v1 = v0 - dword_30095B50;
      v2 = v0 - dword_30095B50 < 500;
      v9 = v0 - dword_30095B50;
      dword_30095B50 = v0;
      if ( v2 && v1 > 0 )
      {
        v4 = (double)v9 / (double)dword_301D9608;
        if ( v5 | v6 )
        {
          v8 = v4 + *(float *)&dword_301D9600;
          *(float *)&dword_301D9600 = v8;
          if ( v8 > *(float *)&dword_301D95FC )
            dword_301D9600 = dword_301D95FC;
        }
        else
        {
          v7 = *(float *)&dword_301D9600 - v4;
          *(float *)&dword_301D9600 = v7;
          if ( v7 < *(float *)&dword_301D95FC )
            dword_301D9600 = dword_301D95FC;
        }
      }
    }
  }
  else
  {
    dword_301D9600 = dword_301D95FC;
  }
  if ( *(float *)&dword_301D9600 > 0.0 )
    sub_30019EE0();
}
// 30018233: variable 'v5' is possibly undefined
// 30018233: variable 'v6' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30095B50: using guessed type int dword_30095B50;
// 301D95FC: using guessed type int dword_301D95FC;
// 301D9600: using guessed type int dword_301D9600;
// 301D9604: using guessed type int dword_301D9604;
// 301D9608: using guessed type int dword_301D9608;
// 3020AF00: using guessed type int dword_3020AF00;

//----- (300182E0) --------------------------------------------------------
int sub_300182E0()
{
  int result; // eax

  result = dword_301E5F20;
  if ( dword_301E5F20 )
  {
    result = dword_30210794;
    if ( dword_30210794 > dword_3020AF00 )
      result = sub_30019EE0();
  }
  return result;
}
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 30210794: using guessed type int dword_30210794;
// 30210798: using guessed type int dword_30210798;

//----- (30018380) --------------------------------------------------------
int sub_30018380()
{
  int result; // eax
  float v1; // edi
  double v2; // st7
  float v3; // ebx
  int *v4; // esi
  int v5; // ecx
  bool v6; // zf
  double v7; // st7
  float v8; // [esp+0h] [ebp-3Ch] BYREF
  float v9; // [esp+4h] [ebp-38h] BYREF
  int v10; // [esp+8h] [ebp-34h]
  int v11; // [esp+Ch] [ebp-30h]
  int v12; // [esp+10h] [ebp-2Ch]
  int v13; // [esp+14h] [ebp-28h]
  float v14; // [esp+18h] [ebp-24h]
  float v15[6]; // [esp+1Ch] [ebp-20h] BYREF
  float v16; // [esp+34h] [ebp-8h]
  float v17; // [esp+38h] [ebp-4h]

  result = dword_301E5F20;
  v11 = 1065353216;
  v12 = 1065353216;
  v13 = 1065353216;
  v14 = 0.0;
  if ( dword_301E5F20 )
  {
    if ( sub_30016FB0(&v9) )
    {
      result = dword_301E476C;
      if ( !dword_301E476C )
        return result;
      sub_30016E00(&v9, &v8);
      v9 = v9 + 320.0;
      v8 = v8 + 240.0;
    }
    else
    {
      v9 = 320.0;
      v8 = 240.0;
    }
    v1 = v8;
    v2 = flt_301DEFA8 * 0.5;
    v3 = v9;
    v4 = dword_302106FC;
    v16 = -v2;
    v15[0] = v16;
    v15[4] = v2;
    v15[2] = v2;
    v15[3] = flt_301DD808;
    v15[1] = flt_301DD808;
    v17 = flt_301DDC88 + flt_301DD808;
    v15[5] = v17;
    do
    {
      v5 = v4[1];
      result = dword_3020AF00 - *v4;
      v6 = dword_3020AF00 == *v4;
      v10 = v5;
      v8 = *(float *)&result;
      if ( result >= 0 && !v6 && result < v5 )
      {
        v9 = sub_3003BA90(&flt_3020D354) - *((float *)v4 + 2);
        v7 = 2.0 - ((double)SLODWORD(v8) + (double)SLODWORD(v8)) / (double)v10;
        if ( v7 <= 1.0 )
          v14 = v7;
        else
          v14 = 1.0;
        dword_30076898(72);
        *(float *)&result = COERCE_FLOAT(sub_3001A6C0(v15, v3, v1, (int)&unk_30062FB4, v9));
      }
      v4 += 3;
    }
    while ( (int)v4 < (int)&dword_3021075C );
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301DD808: using guessed type float flt_301DD808;
// 301DDC88: using guessed type float flt_301DDC88;
// 301DEFA8: using guessed type float flt_301DEFA8;
// 301E476C: using guessed type int dword_301E476C;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020D354: using guessed type float flt_3020D354;
// 302106FC: using guessed type int dword_302106FC[];
// 3021075C: using guessed type int dword_3021075C;

//----- (30018500) --------------------------------------------------------
int sub_30018500()
{
  int result; // eax
  char *v1; // eax

  result = dword_302106B8;
  if ( dword_302106B8 && dword_3020AF00 - dword_302106B8 > 2500 )
  {
    v1 = sub_30043350("voiceMenu");
    if ( v1 )
      sub_300433E0((int)v1);
    result = dword_30076898(9);
    dword_302106B8 = 0;
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;
// 302106B8: using guessed type int dword_302106B8;

//----- (30018590) --------------------------------------------------------
void sub_30018590()
{
  if ( flt_30210654 != 0.0 )
  {
    if ( dword_30210650 - dword_3020AF00 > 0 )
    {
      if ( flt_30210674 * (1.0 - (double)(dword_30210650 - dword_3020AF00) * flt_30210654)
         + *(float *)&dword_30210664 * ((double)(dword_30210650 - dword_3020AF00) * flt_30210654) == 0.0 )
        return;
    }
    else
    {
      dword_30210658 = dword_30210668;
      dword_30210664 = LODWORD(flt_30210674);
      dword_3021065C = dword_3021066C;
      dword_30210660 = dword_30210670;
      if ( flt_30210674 == 0.0 )
      {
        flt_30210654 = 0.0;
        return;
      }
    }
    sub_30019EE0();
  }
}
// 3020AF00: using guessed type int dword_3020AF00;
// 30210650: using guessed type int dword_30210650;
// 30210654: using guessed type float flt_30210654;
// 30210658: using guessed type int dword_30210658;
// 3021065C: using guessed type int dword_3021065C;
// 30210660: using guessed type int dword_30210660;
// 30210664: using guessed type int dword_30210664;
// 30210668: using guessed type int dword_30210668;
// 3021066C: using guessed type int dword_3021066C;
// 30210670: using guessed type int dword_30210670;
// 30210674: using guessed type float flt_30210674;

//----- (300186B0) --------------------------------------------------------
int sub_300186B0()
{
  int result; // eax
  int v1; // ebx
  int v2; // esi
  int v3; // edi
  int v4; // eax
  int v5; // edi
  float *v6; // esi
  const char *v7; // eax
  float v8; // [esp+34h] [ebp-D28h]
  int v9; // [esp+3Ch] [ebp-D20h]
  char String[1024]; // [esp+54h] [ebp-D08h] BYREF
  char v11[1024]; // [esp+454h] [ebp-908h] BYREF
  char v12; // [esp+864h] [ebp-4F8h] BYREF
  unsigned int v13; // [esp+D58h] [ebp-4h]
  unsigned int retaddr; // [esp+D60h] [ebp+4h]

  v13 = retaddr ^ dword_300705C0;
  result = dword_30076898(219);
  v1 = result;
  if ( result > 0 )
  {
    dword_30076898(11);
    dword_30076898(11);
    v2 = j__atol(String);
    dword_30076898(11);
    v3 = j__atol(String);
    dword_30076898(11);
    v4 = j__atol(String);
    sub_300403F0(
      "CPU: ^3%%%i ^73D provider: ^3%s ^7bits: ^3%i ^7kHz: ^3%i ^7chan: ^3%i",
      v9,
      v11,
      v2,
      v3,
      (v4 != 0) + 1);
    result = sub_3001A810();
    v5 = 0;
    v8 = 98.0;
    if ( v1 > 0 )
    {
      v6 = (float *)&v12;
      do
      {
        v7 = (const char *)*((_DWORD *)v6 - 4);
        if ( v7 )
          sub_300403F0(
            "%2i %-50s vol:^3%04.2f ^7rvol:^3%04.2f ^7pit:^3%04.2f ^7hz:^3%5i",
            v5,
            v7,
            *(v6 - 3),
            *(v6 - 2),
            *v6,
            *((_DWORD *)v6 - 1));
        else
          sub_300403F0("%2i", v5);
        result = dword_30076898(54);
        ++v5;
        v6 += 5;
        v8 = v8 + 16.0;
      }
      while ( v5 < v1 );
    }
  }
  return result;
}
// 300187A0: variable 'v9' is possibly undefined
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;

//----- (30018910) --------------------------------------------------------
int *sub_30018910()
{
  int *result; // eax

  if ( !dword_3020FDE4 || (result = sub_3001ABD0(100, dword_3020FDEC)) != 0 )
    result = (int *)dword_30076898(26);
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E52A8: using guessed type float flt_301E52A8;
// 3020FDE4: using guessed type int dword_3020FDE4;
// 3020FDEC: using guessed type int dword_3020FDEC;
// 30211708: using guessed type float flt_30211708;

//----- (300189D0) --------------------------------------------------------
int *sub_300189D0()
{
  int *result; // eax

  if ( !dword_3020FDE4 || (result = sub_3001ABD0(100, dword_3020FDEC)) != 0 )
    result = (int *)dword_30076898(27);
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E52A8: using guessed type float flt_301E52A8;
// 3020FDE4: using guessed type int dword_3020FDE4;
// 3020FDEC: using guessed type int dword_3020FDEC;

//----- (30018A80) --------------------------------------------------------
int sub_30018A80()
{
  int result; // eax

  result = dword_301E01AC;
  if ( dword_301E01AC >= 0 && (dword_3029CB4C || dword_301E01AC) )
    result = dword_30076898(28);
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E01AC: using guessed type int dword_301E01AC;
// 3029CB4C: using guessed type int dword_3029CB4C;

//----- (30018B10) --------------------------------------------------------
int sub_30018B10()
{
  int result; // eax

  result = dword_301DEA0C;
  if ( dword_301DEA0C )
    result = dword_30076898(29);
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301DEA0C: using guessed type int dword_301DEA0C;

//----- (30018BA0) --------------------------------------------------------
int sub_30018BA0()
{
  int v0; // edi
  int result; // eax
  int v2; // esi
  int v3; // ecx
  double v4; // st7
  float v5; // [esp+8h] [ebp-30h]
  float v6; // [esp+Ch] [ebp-2Ch]
  int v7; // [esp+10h] [ebp-28h]
  int v8; // [esp+14h] [ebp-24h]

  v0 = dword_30076898(6);
  dword_30076898(188);
  result = v8;
  v2 = 0;
  v5 = 2.0;
  v6 = 200.0;
  if ( v8 > 0 )
  {
    v3 = v7;
    do
    {
      if ( *(_DWORD *)(v3 + 8 * v2) >= v0 )
      {
        dword_30076898(73);
        v3 = v7;
      }
      v4 = v5 + 34.0;
      v5 = v4;
      if ( v4 + 32.0 > 68.0 )
      {
        v5 = 2.0;
        v6 = v6 + 34.0;
      }
      result = v8;
      ++v2;
    }
    while ( v2 < v8 );
  }
  return result;
}
// 30018BC4: variable 'v8' is possibly undefined
// 30018BE5: variable 'v7' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;

//----- (30018DA0) --------------------------------------------------------
int sub_30018DA0()
{
  void *v0; // esp
  int result; // eax
  unsigned int v2; // [esp+2040h] [ebp-4h]
  unsigned int retaddr; // [esp+2044h] [ebp+0h]

  if ( dword_301E3B0C )
    return sub_300186B0();
  if ( dword_301E41CC )
    return sub_300158E0();
  result = dword_301E5DEC;
  if ( dword_301E5DEC )
  {
    v0 = alloca(8260);
    v2 = retaddr ^ dword_300705C0;
    if ( dword_30076898(109) )
    {
      sub_3001A9C0();
      sub_3001A9C0();
      sub_3001A9C0();
    }
    result = sub_30052A2E(retaddr ^ v2);
  }
  return result;
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E3B0C: using guessed type int dword_301E3B0C;
// 301E41CC: using guessed type int dword_301E41CC;
// 301E5DEC: using guessed type int dword_301E5DEC;

//----- (30018DD0) --------------------------------------------------------
int __usercall sub_30018DD0@<eax>(int a1@<esi>)
{
  double v1; // st7
  double v2; // st7
  double v4; // st6
  char v5; // c0
  double v6; // st6
  int result; // eax
  int v8; // [esp+0h] [ebp-8h]
  float v9; // [esp+0h] [ebp-8h]
  float v10; // [esp+4h] [ebp-4h]

  v8 = dword_3020AF00 - *(_DWORD *)a1;
  if ( v8 < 0 )
    return 0;
  v1 = (double)v8;
  v10 = v1;
  if ( v1 >= *(float *)(a1 + 8) )
    return 0;
  v9 = 1.0 - sub_3003B280(&flt_3020D348, (float *)(a1 + 16)) / *(float *)(a1 + 12);
  v2 = (1.0 - v10 / *(float *)(a1 + 8)) * *(float *)(a1 + 4);
  v4 = v9;
  if ( v5 )
    v6 = v4 / v2;
  else
    v6 = v4 * v2;
  result = 1;
  *(float *)(a1 + 28) = v6;
  *(float *)(a1 + 32) = v2;
  return result;
}
// 30018E2F: variable 'v5' is possibly undefined
// 3020AF00: using guessed type int dword_3020AF00;
// 3020D348: using guessed type float flt_3020D348;

//----- (30018E60) --------------------------------------------------------
void __cdecl sub_30018E60(float a1, int a2, int a3)
{
  int *v3; // ecx
  int v4; // edx
  int v5; // eax
  int v6; // ecx
  int v7; // edi
  int v8; // edx
  float *v9; // ecx
  double v10; // st7
  int v11[9]; // [esp+0h] [ebp-24h] BYREF

  if ( a1 > 0.0 )
  {
    v4 = *v3;
    *(float *)&v11[1] = a1;
    *(float *)&v11[2] = (float)a2;
    v5 = v3[1];
    v6 = v3[2];
    v7 = dword_3020AF00;
    v11[4] = v4;
    v11[0] = dword_3020AF00;
    v11[5] = v5;
    v11[6] = v6;
    v11[3] = a3;
    sub_30018DD0((int)v11);
    v8 = 0;
    v9 = (float *)&unk_30210DB4;
    while ( *(_DWORD *)v9 <= v7 && (double)dword_3020AF00 < (double)*(int *)v9 + v9[2] )
    {
      v9 += 9;
      ++v8;
      if ( (int)v9 >= (int)&flt_30210E44 )
      {
        v10 = *(float *)&v11[7];
        if ( flt_30210DD0 < (double)*(float *)&v11[7] )
        {
          v8 = 0;
          v10 = flt_30210DD0;
        }
        if ( flt_30210DF4 < v10 )
        {
          v8 = 1;
          v10 = flt_30210DF4;
        }
        if ( flt_30210E18 < v10 )
        {
          v8 = 2;
          v10 = flt_30210E18;
        }
        if ( flt_30210E3C >= v10 )
        {
          if ( v8 == 4 )
            return;
        }
        else
        {
          v8 = 3;
        }
        break;
      }
    }
    qmemcpy((char *)&unk_30210DB4 + 36 * v8, v11, 0x24u);
  }
}
// 30018E78: variable 'v3' is possibly undefined
// 3020AF00: using guessed type int dword_3020AF00;
// 30210DD0: using guessed type float flt_30210DD0;
// 30210DF4: using guessed type float flt_30210DF4;
// 30210E18: using guessed type float flt_30210E18;
// 30210E3C: using guessed type float flt_30210E3C;
// 30210E44: using guessed type float flt_30210E44;

//----- (30018F90) --------------------------------------------------------
void sub_30018F90()
{
  float *v0; // edi
  float v1; // [esp+8h] [ebp-Ch]
  float v2; // [esp+Ch] [ebp-8h]
  float v3; // [esp+10h] [ebp-4h]
  int v4; // [esp+10h] [ebp-4h]

  v2 = 0.0;
  v1 = 0.0;
  v0 = &flt_30210DD0;
  v3 = (double)dword_3020AF00 * 0.0016666667;
  do
  {
    if ( sub_30018DD0((int)(v0 - 7)) && *v0 > (double)v1 )
    {
      v1 = *v0;
      v2 = v0[1];
    }
    v0 += 9;
  }
  while ( (int)v0 < (int)&dword_30210E60 );
  if ( flt_30210E48 > (double)v1 )
  {
    v1 = flt_30210E48;
    v2 = flt_30210E48;
  }
  if ( v1 > 0.0 )
  {
    if ( v1 > 1.0 )
      v1 = 1.0;
    *(float *)&dword_3020D380 = sin(v3 * 25.132742 + flt_30210E44) * v1 * v2 * 18.0 + *(float *)&dword_3020D380;
    flt_3020D384 = sin(v3 * 47.12389 + flt_30210E44) * v1 * v2 * 16.0 + flt_3020D384;
    *(float *)&dword_3020D388 = sin(v3 * 37.699112 + flt_30210E44) * v1 * v2 * 10.0 + *(float *)&dword_3020D388;
  }
  else
  {
    v4 = rand();
    flt_30210E44 = ((double)v4 * 0.000030517578 + (double)v4 * 0.000030517578 - 1.0) * 3.1415927;
  }
}
// 3020AF00: using guessed type int dword_3020AF00;
// 3020D380: using guessed type int dword_3020D380;
// 3020D388: using guessed type int dword_3020D388;
// 30210DD0: using guessed type float flt_30210DD0;
// 30210E44: using guessed type float flt_30210E44;
// 30210E48: using guessed type float flt_30210E48;

//----- (30019100) --------------------------------------------------------
int sub_30019100()
{
  sub_30023B20("cgame", "CGAME_SPECTATOR");
  dword_30076898(52);
  return dword_30076898(54);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300191B0) --------------------------------------------------------
int sub_300191B0()
{
  int v0; // eax
  const char *v1; // ecx
  int result; // eax
  int *v3; // eax
  int *v4; // eax
  unsigned int v5; // eax
  int v6; // eax
  int *v7; // eax
  int *v8; // esi
  int *v9; // eax
  int *v10; // eax
  int *v11; // esi
  int *v12; // eax
  int v13; // [esp-Ch] [ebp-234h]
  const char *v14[8]; // [esp+4h] [ebp-224h] BYREF
  char v15[256]; // [esp+24h] [ebp-204h] BYREF
  char Destination[256]; // [esp+124h] [ebp-104h] BYREF
  unsigned int v17; // [esp+224h] [ebp-4h]
  unsigned int retaddr; // [esp+228h] [ebp+0h]

  v17 = retaddr ^ dword_300705C0;
  v14[1] = (const char *)1065353216;
  v14[2] = (const char *)1065353216;
  v14[3] = 0;
  v14[4] = (const char *)1065353216;
  if ( dword_301DA05C > dword_3020AF00 || dword_301D5C40 )
  {
    if ( sub_30048880(v14, "vote yes") )
      strncpy(Destination, v14[0], 0xFFu);
    else
      strncpy(Destination, "vote yes", 0xFFu);
    Destination[255] = 0;
    if ( sub_30048880(v14, "vote no") )
      strncpy(v15, v14[0], 0xFFu);
    else
      strncpy(v15, "vote no", 0xFFu);
    v15[255] = 0;
  }
  if ( dword_301DA05C <= dword_3020AF00 )
  {
    if ( dword_301D5C40 )
    {
      if ( dword_301D5C4C )
      {
        dword_301D5C4C = 0;
        sub_30022ED0();
      }
      v5 = (int)((unsigned __int64)(274877907i64 * (dword_301D5C40 - dword_30076898(6))) >> 32) >> 6;
      v6 = (v5 >> 31) + v5;
      if ( v6 < 0 )
        v6 = 0;
      v13 = v6;
      if ( (*(_DWORD *)(dword_301E5F20 + 140) & 0x20000) != 0 )
      {
        v7 = sub_30023B20("cgame", "CGAME_VOTE");
        sub_300403F0("%s(%i):%s", (const char *)v7, v13, byte_301D5C50);
        sub_30032560();
        v8 = sub_30023B20("cgame", "CGAME_NO");
        v9 = sub_30023B20("cgame", "CGAME_YES");
        sub_300403F0("%s:%i, %s:%i", (const char *)v9, dword_301D5C44, (const char *)v8, dword_301D5C48);
      }
      else
      {
        v10 = sub_30023B20("cgame", "CGAME_VOTE");
        sub_300403F0("%s(%i):%s", (const char *)v10, v13, byte_301D5C50);
        sub_30032560();
        v11 = sub_30023B20("cgame", "CGAME_NO");
        v12 = sub_30023B20("cgame", "CGAME_YES");
        sub_300403F0(
          "%s(%s):%i, %s(%s):%i",
          (const char *)v12,
          Destination,
          dword_301D5C44,
          (const char *)v11,
          v15,
          dword_301D5C48);
      }
      sub_30032560();
    }
LABEL_30:
    result = sub_30052A2E(retaddr ^ v17);
  }
  else
  {
    v0 = dword_301DA058;
    switch ( dword_301DA058 )
    {
      case -4:
        v1 = "CGAME_SERVERHOSTTEAMKILLED";
        goto LABEL_16;
      case -3:
        v1 = "CGAME_COMPLAINTSERVERHOST";
        goto LABEL_16;
      case -2:
        v1 = "CGAME_COMPLAINTDISMISSED";
        goto LABEL_16;
      case -1:
        v1 = "CGAME_COMPLAINTFILED";
LABEL_16:
        if ( sub_30023B20("cgame", v1) )
        {
          v14[0] = 0;
          v14[7] = (const char *)1045779797;
          v14[6] = (const char *)1128792064;
          v14[5] = (const char *)1090519040;
          dword_30076898(54);
          return sub_30052A2E(retaddr ^ v17);
        }
        v0 = dword_301DA058;
LABEL_19:
        if ( !dword_3018DC8C[300 * v0] )
          goto LABEL_30;
        v3 = sub_30023B20("cgame", "CGAME_COMPLAINTTEAMKILLFILE");
        sub_300403F0((const char *)v3, &byte_3018DC98[1200 * dword_301DA058]);
        sub_30032560();
        v4 = sub_30023B20("cgame", "CGAME_PRESSYESNO");
        sub_300403F0((const char *)v4, Destination, v15);
        sub_30032560();
        result = sub_30052A2E(retaddr ^ v17);
        break;
      default:
        goto LABEL_19;
    }
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301D5C40: using guessed type int dword_301D5C40;
// 301D5C44: using guessed type int dword_301D5C44;
// 301D5C48: using guessed type int dword_301D5C48;
// 301D5C4C: using guessed type int dword_301D5C4C;
// 301D9900: using guessed type int dword_301D9900;
// 301DA058: using guessed type int dword_301DA058;
// 301DA05C: using guessed type int dword_301DA05C;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;

//----- (300195C0) --------------------------------------------------------
int sub_300195C0()
{
  int result; // eax
  int v1; // edx
  int *v2; // eax
  int *v3; // eax
  int v4; // [esp-Ch] [ebp-2Ch]

  result = dword_301D5F70;
  if ( dword_301D5F70 )
  {
    v1 = (dword_301D5F70 - dword_30076898(6)) / 1000;
    if ( v1 < 0 )
      v1 = 0;
    if ( dword_301D5F74 )
    {
      v2 = sub_30023B20("cgame", "CGAME_PAUSED");
      sub_300403F0("%s\n%s", (const char *)v2, byte_301D5F78);
    }
    else
    {
      v4 = v1;
      v3 = sub_30023B20("cgame", "CGAME_PAUSED");
      sub_300403F0("%s: %i \n%s", (const char *)v3, v4, byte_301D5F78);
    }
    dword_30076898(52);
    dword_30076898(53);
    result = dword_30076898(54);
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5F70: using guessed type int dword_301D5F70;
// 301D5F74: using guessed type int dword_301D5F74;

//----- (30019710) --------------------------------------------------------
int __usercall sub_30019710@<eax>(double a1@<st0>)
{
  dword_30076898(125);
  dword_3020FDEC = dword_3020AF00;
  dword_3020FDE4 = 1;
  return sub_3002CAE0(a1);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;
// 3020FDE4: using guessed type int dword_3020FDE4;
// 3020FDEC: using guessed type int dword_3020FDEC;

//----- (30019740) --------------------------------------------------------
int sub_30019740()
{
  int result; // eax
  bool v1; // zf
  int *v2; // eax
  int *v3; // eax
  int *v4; // eax
  const char *v5; // [esp+0h] [ebp-18h] BYREF
  int v6; // [esp+4h] [ebp-14h]
  int v7; // [esp+8h] [ebp-10h]
  int v8; // [esp+Ch] [ebp-Ch]
  int v9; // [esp+10h] [ebp-8h]
  int v10; // [esp+14h] [ebp-4h]

  result = dword_3029C90C;
  v7 = 1065353216;
  v8 = 1065353216;
  v9 = 1065353216;
  v10 = 1065353216;
  if ( dword_3029C90C )
  {
    result = dword_301E5F20;
    if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0xC0000) != 0 )
    {
      sub_300484D0();
      v1 = (*(_DWORD *)(dword_301E5F20 + 24) & 0x40000) == 0;
      v6 = 1138032640;
      if ( !v1 )
      {
        if ( !sub_30048880(&v5, "+attack") )
          v5 = "+attack";
        v2 = sub_30023B20("cgame", "CGAME_FOLLOWNEXTPLAYER");
        sub_300403F0((const char *)v2, v5);
        sub_30032560();
        if ( !sub_30048880(&v5, "+melee") )
          v5 = "+melee";
        v3 = sub_30023B20("cgame", "CGAME_FOLLOWPREVIOUSPLAYER");
        sub_300403F0((const char *)v3, v5);
        sub_30032560();
        v6 = 1138688000;
      }
      result = dword_301E5F20;
      if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0x80000) != 0
        && (sub_30048880(&v5, "toggle cl_run") || (result = sub_30048880(&v5, "+speed")) != 0) )
      {
        v4 = sub_30023B20("cgame", "CGAME_FOLLOWSTOP");
        sub_300403F0((const char *)v4, v5);
        result = sub_30032560();
      }
    }
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 301E5F20: using guessed type int dword_301E5F20;
// 3029C90C: using guessed type int dword_3029C90C;

//----- (300198E0) --------------------------------------------------------
int sub_300198E0()
{
  int v1; // eax

  if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0x10000) == 0 )
    return 0;
  v1 = 300 * *(_DWORD *)(dword_301E5F20 + 184);
  if ( dword_3018DC8C[v1] )
    sub_300403F0(aCgameFollowing, &byte_3018DC98[v1 * 4]);
  else
    sub_300403F0(aCgameFollowing, "?");
  dword_30076898(57);
  dword_30076898(52);
  dword_30076898(54);
  return 1;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301E5F20: using guessed type int dword_301E5F20;

//----- (300199E0) --------------------------------------------------------
void __usercall sub_300199E0(double a1@<st0>)
{
  int v1; // eax
  void *v2; // ecx

  if ( !dword_301E5F0C && !dword_301E5F10 )
  {
    if ( dword_3021099C || !dword_301DF30C )
    {
LABEL_19:
      sub_300181B0();
      return;
    }
    sub_30018590();
    sub_300182E0();
    sub_30018380();
    v1 = *(_DWORD *)(dword_301E5F20 + 16);
    if ( v1 == 5 )
    {
      sub_30019710(a1);
      return;
    }
    if ( v1 == 4 )
    {
      sub_30019100();
      sub_30018000();
      sub_30016190();
      if ( !dword_301DDDAC )
      {
LABEL_15:
        if ( !sub_3002CAE0(a1) )
        {
          sub_30019740();
          sub_300198E0();
        }
        sub_300191B0();
        sub_300195C0();
        sub_300165E0();
        sub_30018BA0();
        sub_30018DA0();
        sub_30016150();
        if ( !sub_3002CAE0(a1) )
        {
          sub_30016BD0();
          sub_30018910();
          sub_300189D0();
          sub_30018A80();
          sub_30018B10();
          dword_30076898(30);
        }
        goto LABEL_19;
      }
    }
    else
    {
      if ( v1 < 6 )
      {
        sub_300177F0();
        sub_30018000();
        sub_30039120();
      }
      sub_30016190();
      if ( !dword_301DDDAC )
        goto LABEL_15;
      sub_3004C9F0();
      sub_30018500();
    }
    sub_30020C10(v2);
    goto LABEL_15;
  }
}
// 30019A83: variable 'v2' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301DDDAC: using guessed type int dword_301DDDAC;
// 301DF30C: using guessed type int dword_301DF30C;
// 301E5F0C: using guessed type int dword_301E5F0C;
// 301E5F10: using guessed type int dword_301E5F10;
// 301E5F20: using guessed type int dword_301E5F20;
// 3021099C: using guessed type int dword_3021099C;

//----- (30019B10) --------------------------------------------------------
int __cdecl sub_30019B10(int a1)
{
  const char *v1; // eax
  int v2; // esi
  double v3; // st7
  double v5; // st7
  int v6; // ecx
  float v7; // [esp+0h] [ebp-8Ch]
  float v8; // [esp+4h] [ebp-88h]
  float v9; // [esp+8h] [ebp-84h]
  float v10; // [esp+Ch] [ebp-80h]
  char v11; // [esp+24h] [ebp-68h]
  float v12; // [esp+2Ch] [ebp-60h]
  float v13; // [esp+2Ch] [ebp-60h]
  int v14; // [esp+30h] [ebp-5Ch]
  float v15; // [esp+34h] [ebp-58h]
  float v16; // [esp+38h] [ebp-54h]
  float v17; // [esp+3Ch] [ebp-50h]
  char String[68]; // [esp+44h] [ebp-48h] BYREF
  unsigned int v19; // [esp+88h] [ebp-4h]
  unsigned int retaddr; // [esp+8Ch] [ebp+0h]

  v19 = retaddr ^ dword_300705C0;
  if ( dword_301E5F20 )
  {
    if ( a1 )
    {
      if ( a1 == 1 )
      {
        v13 = flt_301E40A8 * -0.5;
      }
      else if ( a1 == 2 )
      {
        v13 = flt_301E40A8 * 0.5;
      }
      else
      {
        v13 = 0.0;
        sub_30021A30("CG_DrawActive: Undefined stereoView", v11);
      }
    }
    else
    {
      v13 = 0.0;
    }
    v15 = flt_3020D348;
    v16 = flt_3020D34C;
    v17 = flt_3020D350;
    if ( v13 != 0.0 )
    {
      v5 = -v13;
      flt_3020D348 = flt_3020D360 * v5 + flt_3020D348;
      flt_3020D34C = flt_3020D364 * v5 + flt_3020D34C;
      flt_3020D350 = v5 * flt_3020D368 + flt_3020D350;
    }
    v6 = dword_3020D37C | 0x10;
    dword_3020D37C |= 0x10u;
    if ( !dword_301DF0CC )
      dword_3020D37C = v6 & 0xFFFFFFEF;
    dword_30076898(69);
    if ( v13 != 0.0 )
    {
      flt_3020D348 = v15;
      flt_3020D34C = v16;
      flt_3020D350 = v17;
    }
    sub_3002FFF0(dword_30211378);
    sub_3001AB30();
    sub_300199E0();
    return sub_30052A2E(retaddr ^ v19);
  }
  if ( dword_300F0FA0 )
    return sub_30052A2E(retaddr ^ v19);
  dword_300F0FA0 = 1;
  if ( byte_301DD4B0 )
    dword_30076898(9);
  if ( byte_301E5730 )
    dword_30076898(9);
  if ( dword_301AA3CC )
    dword_30076898(9);
  v1 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]]);
  if ( !v1 || !*v1 || (sub_300403F0("levelshots/%s.tga", v1), sub_30020CA0(0), (v2 = dword_30076898(88)) == 0) )
  {
    sub_30020CA0(0);
    v2 = dword_30076898(88);
  }
  dword_30076898(72);
  v10 = flt_301D5A48 * 480.0;
  v9 = flt_301D5A44 * 640.0;
  v8 = flt_301D5A48 * 0.0;
  v7 = flt_301D5A44 * 0.0;
  sub_30032820(LODWORD(v7), LODWORD(v8), LODWORD(v9), LODWORD(v10), 0, 0, 1065353216, 1065353216, v2);
  dword_30076898(11);
  v14 = j__atol(String);
  if ( v14 > 0 )
  {
    v3 = (double)dword_30076898(63) / (double)v14;
    v12 = v3;
    if ( v3 > 1.0 )
      v12 = 1.0;
    sub_3001A260(200.0, 468.0, 240.0, 10.0, v12);
  }
  dword_30076898(25);
  --dword_300F0FA0;
  return sub_30052A2E(retaddr ^ v19);
}
// 30019D50: variable 'v11' is possibly undefined
// 300199E0: using guessed type int sub_300199E0(void);
// 3001AB30: using guessed type int sub_3001AB30(void);
// 30020CA0: using guessed type _DWORD __cdecl sub_30020CA0(_DWORD);
// 3002FFF0: using guessed type int __thiscall sub_3002FFF0(_DWORD);
// 30032820: using guessed type _DWORD __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300404B0: using guessed type int __thiscall sub_300404B0(_DWORD);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FA0: using guessed type int dword_300F0FA0;
// 301AA3CC: using guessed type int dword_301AA3CC;
// 301CFB20: using guessed type int dword_301CFB20[];
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301DD4B0: using guessed type char byte_301DD4B0;
// 301DF0CC: using guessed type int dword_301DF0CC;
// 301E40A8: using guessed type float flt_301E40A8;
// 301E5730: using guessed type char byte_301E5730;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 3020D360: using guessed type float flt_3020D360;
// 3020D364: using guessed type float flt_3020D364;
// 3020D368: using guessed type float flt_3020D368;
// 3020D37C: using guessed type int dword_3020D37C;
// 30211378: using guessed type int dword_30211378;

//----- (30019EE0) --------------------------------------------------------
int __cdecl sub_30019EE0()
{
  dword_30076898(72);
  sub_30032820();
  return dword_30076898(72);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;

//----- (30019FD0) --------------------------------------------------------
int __usercall sub_30019FD0@<eax>(int a1@<edx>, char a2@<bl>)
{
  if ( (a2 & 8) == 0 && a1 )
    *(float *)(a1 + 12) = flt_301E52A8 * *(float *)(a1 + 12);
  if ( (a2 & 0x10) != 0 )
    sub_30019EE0();
  return sub_30019EE0();
}
// 301E52A8: using guessed type float flt_301E52A8;

//----- (3001A260) --------------------------------------------------------
int __cdecl sub_3001A260()
{
  return sub_30019FD0(0, 24);
}

//----- (3001A2E0) --------------------------------------------------------
void __cdecl sub_3001A2E0(float a1, float a2, float a3, float a4, float a5)
{
  double v5; // st7
  float v6; // [esp+0h] [ebp-30h]
  float v7; // [esp+34h] [ebp+4h]
  float v8; // [esp+38h] [ebp+8h]
  float v9; // [esp+40h] [ebp+10h]
  float v10; // [esp+44h] [ebp+14h]

  v7 = flt_301D5A44 * a1;
  v8 = flt_301D5A48 * a2;
  v5 = flt_301D5A44 * a3;
  v9 = flt_301D5A48 * a4;
  v10 = flt_301D5A44 * a5;
  sub_30032820(LODWORD(v7), LODWORD(v8), LODWORD(v10), LODWORD(v9), 0, 0, 0, 0, dword_301D960C);
  v6 = v7 + v5 - v10;
  sub_30032820(LODWORD(v6), LODWORD(v8), LODWORD(v10), LODWORD(v9), 0, 0, 0, 0, dword_301D960C);
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301D960C: using guessed type int dword_301D960C;

//----- (3001A380) --------------------------------------------------------
void __cdecl sub_3001A380(float a1, float a2, float a3, float a4, float a5)
{
  double v5; // st7
  float v6; // [esp+0h] [ebp-2Ch]
  float v7; // [esp+30h] [ebp+4h]
  float v8; // [esp+34h] [ebp+8h]
  float v9; // [esp+38h] [ebp+Ch]
  float v10; // [esp+40h] [ebp+14h]

  v7 = flt_301D5A44 * a1;
  v8 = flt_301D5A48 * a2;
  v9 = flt_301D5A44 * a3;
  v5 = flt_301D5A48 * a4;
  v10 = flt_301D5A48 * a5;
  sub_30032820(LODWORD(v7), LODWORD(v8), LODWORD(v9), LODWORD(v10), 0, 0, 0, 0, dword_301D960C);
  v6 = v8 + v5 - v10;
  sub_30032820(LODWORD(v7), LODWORD(v6), LODWORD(v9), LODWORD(v10), 0, 0, 0, 0, dword_301D960C);
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301D960C: using guessed type int dword_301D960C;

//----- (3001A420) --------------------------------------------------------
int __cdecl sub_3001A420(float a1, float a2, float a3, float a4, float a5)
{
  dword_30076898(72);
  sub_3001A380(a1, a2, a3, a4, a5);
  sub_3001A2E0(a1, a2, a3, a4, a5);
  return dword_30076898(72);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E52A8: using guessed type float flt_301E52A8;

//----- (3001A4A0) --------------------------------------------------------
void __cdecl sub_3001A4A0(float a1, float a2, float a3, float a4, int a5)
{
  float v5; // [esp+0h] [ebp-24h]
  float v6; // [esp+4h] [ebp-20h]
  float v7; // [esp+8h] [ebp-1Ch]
  float v8; // [esp+Ch] [ebp-18h]

  v8 = flt_301D5A48 * a4;
  v7 = flt_301D5A44 * a3;
  v6 = flt_301D5A48 * a2;
  v5 = flt_301D5A44 * a1;
  sub_30032820(LODWORD(v5), LODWORD(v6), LODWORD(v7), LODWORD(v8), 0, 0, 1065353216, 1065353216, a5);
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;

//----- (3001A500) --------------------------------------------------------
int __cdecl sub_3001A500(float a1, float a2, float a3, float a4, float a5)
{
  double v5; // st7
  double v6; // st6
  double v7; // st7
  float v9[3]; // [esp+0h] [ebp-44h] BYREF
  float v10; // [esp+Ch] [ebp-38h]
  float v11; // [esp+10h] [ebp-34h]
  float v12; // [esp+14h] [ebp-30h]
  float v13; // [esp+18h] [ebp-2Ch]
  float v14; // [esp+1Ch] [ebp-28h]
  float v15; // [esp+24h] [ebp-20h]
  float v16; // [esp+28h] [ebp-1Ch]
  float v17; // [esp+2Ch] [ebp-18h]
  float v18; // [esp+30h] [ebp-14h]
  float v19; // [esp+34h] [ebp-10h]
  float v20; // [esp+38h] [ebp-Ch]
  float v21; // [esp+3Ch] [ebp-8h]
  float v22; // [esp+40h] [ebp-4h]
  float v23; // [esp+48h] [ebp+4h]
  float v24; // [esp+4Ch] [ebp+8h]
  float v25; // [esp+50h] [ebp+Ch]
  float v26; // [esp+54h] [ebp+10h]

  LODWORD(v9[2]) = v9;
  LODWORD(v9[1]) = &a5;
  v23 = flt_301D5A44 * a1;
  v24 = flt_301D5A48 * a2;
  v25 = flt_301D5A44 * a3;
  v26 = flt_301D5A48 * a4;
  v10 = a5 * 3.1415927 * 0.0055555557;
  v9[0] = cos(v10);
  a5 = sin(v10);
  v5 = v25 * 0.5;
  v6 = v26 * 0.5;
  v10 = v5 + v23;
  v11 = v24 + v6;
  v12 = v5 * v9[0];
  v13 = v5 * a5;
  v14 = a5 * v6;
  v7 = v6 * v9[0];
  v15 = -1.0 * v12 + v10 - -1.0 * v13;
  v16 = -1.0 * v7 + -1.0 * v14 + v11;
  v17 = 1.0 * v12 + v10 - -1.0 * v13;
  v18 = -1.0 * v7 + 1.0 * v14 + v11;
  v19 = 1.0 * v12 + v10 - 1.0 * v13;
  v20 = 1.0 * v7 + 1.0 * v14 + v11;
  v21 = -1.0 * v12 + v10 - 1.0 * v13;
  v22 = 1.0 * v7 + -1.0 * v14 + v11;
  return dword_30076898(76);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;

//----- (3001A6C0) --------------------------------------------------------
int __usercall sub_3001A6C0@<eax>(float *a1@<edx>, float a2, float a3, int a4, float a5)
{
  double v5; // st7
  double v6; // st6
  double v7; // st5
  float v9[3]; // [esp+0h] [ebp-44h] BYREF
  float v10; // [esp+Ch] [ebp-38h]
  float v11; // [esp+10h] [ebp-34h]
  float v12; // [esp+1Ch] [ebp-28h]
  float v13; // [esp+20h] [ebp-24h]
  float v14; // [esp+24h] [ebp-20h]
  float v15; // [esp+28h] [ebp-1Ch]
  float v16; // [esp+2Ch] [ebp-18h]
  float v17; // [esp+30h] [ebp-14h]
  float v18; // [esp+34h] [ebp-10h]
  float v19; // [esp+38h] [ebp-Ch]
  float v20; // [esp+3Ch] [ebp-8h]
  float v21; // [esp+40h] [ebp-4h]

  LODWORD(v9[2]) = v9;
  LODWORD(v9[1]) = &a5;
  v10 = a5 * 3.1415927 * 0.0055555557;
  v9[0] = cos(v10);
  a5 = sin(v10);
  v5 = flt_301D5A44 * v9[0];
  v6 = flt_301D5A44 * a5;
  v12 = flt_301D5A48 * a5;
  v13 = flt_301D5A48 * v9[0];
  v7 = flt_301D5A44 * a2;
  v11 = flt_301D5A48 * a3;
  v14 = v5 * *a1 + v7 - v6 * a1[1];
  v15 = v12 * *a1 + v13 * a1[1] + v11;
  v16 = v5 * a1[2] + v7 - v6 * a1[3];
  v17 = v13 * a1[3] + v12 * a1[2] + v11;
  v18 = v5 * a1[4] + v7 - v6 * a1[5];
  v19 = v13 * a1[5] + v12 * a1[4] + v11;
  v20 = v5 * a1[6] + v7 - v6 * a1[7];
  v21 = v13 * a1[7] + v12 * a1[6] + v11;
  return dword_30076898(76);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;

//----- (3001A810) --------------------------------------------------------
int __cdecl sub_3001A810()
{
  return dword_30076898(54);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;

//----- (3001A8E0) --------------------------------------------------------
int __cdecl sub_3001A8E0()
{
  return dword_30076898(54);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001A9C0) --------------------------------------------------------
int __cdecl sub_3001A9C0()
{
  return dword_30076898(54);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001AAA0) --------------------------------------------------------
void __usercall sub_3001AAA0(int a1@<eax>, int a2, int a3, int a4, int a5)
{
  float v5; // [esp+0h] [ebp-24h]
  float v6; // [esp+4h] [ebp-20h]
  float v7; // [esp+8h] [ebp-1Ch]
  float v8; // [esp+Ch] [ebp-18h]
  float v9; // [esp+10h] [ebp-14h]
  float v10; // [esp+14h] [ebp-10h]
  float v11; // [esp+1Ch] [ebp-8h]
  float v12; // [esp+20h] [ebp-4h]

  v11 = (float)a3;
  v12 = (float)a2;
  v10 = (double)(a5 + a3) * 0.015625;
  v9 = (double)(a4 + a2) * 0.015625;
  v8 = v11 * 0.015625;
  v7 = v12 * 0.015625;
  v6 = (float)a5;
  v5 = (float)a4;
  sub_30032820(
    LODWORD(v12),
    LODWORD(v11),
    LODWORD(v5),
    LODWORD(v6),
    LODWORD(v7),
    LODWORD(v8),
    LODWORD(v9),
    LODWORD(v10),
    a1);
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (3001AB30) --------------------------------------------------------
void sub_3001AB30()
{
  int v0; // ebx
  int v1; // ebp
  int v2; // esi
  int v3; // edi
  int v4; // edi
  int v5; // [esp+10h] [ebp-8h]
  int v6; // [esp+14h] [ebp-4h]

  v0 = dword_301D5A28;
  v1 = dword_301D5A2C;
  v2 = dword_3020D334;
  if ( dword_3020D330 || dword_3020D334 || dword_3020D338 != dword_301D5A28 || dword_3020D33C != dword_301D5A2C )
  {
    v5 = dword_3020D330;
    v6 = dword_3020D338 + dword_3020D330 - 1;
    v3 = dword_3020D33C + dword_3020D334 - 1;
    sub_3001AAA0(dword_301D9650, 0, 0, dword_301D5A28, dword_3020D334);
    sub_3001AAA0(dword_301D9650, 0, v3, v0, v1 - v3);
    v4 = v3 - v2 + 1;
    sub_3001AAA0(dword_301D9650, 0, v2, v5, v4);
    sub_3001AAA0(dword_301D9650, v6, v2, v0 - v6, v4);
  }
}
// 301D5A28: using guessed type int dword_301D5A28;
// 301D5A2C: using guessed type int dword_301D5A2C;
// 301D9650: using guessed type int dword_301D9650;
// 3020D330: using guessed type int dword_3020D330;
// 3020D334: using guessed type int dword_3020D334;
// 3020D338: using guessed type int dword_3020D338;
// 3020D33C: using guessed type int dword_3020D33C;

//----- (3001ABD0) --------------------------------------------------------
int *__fastcall sub_3001ABD0(int a1, int a2)
{
  int *result; // eax
  double v3; // st7
  int v4; // [esp+0h] [ebp-4h]

  if ( !a2 || dword_3020AF00 - a2 >= a1 )
    return 0;
  v4 = a1 - (dword_3020AF00 - a2);
  if ( v4 >= 100 )
    v3 = 1.0;
  else
    v3 = (double)v4 * 0.0099999998;
  dword_30095B88 = 1065353216;
  dword_30095B84 = 1065353216;
  dword_30095B80 = 1065353216;
  result = &dword_30095B80;
  flt_30095B8C = flt_301E52A8 * v3;
  return result;
}
// 30095B80: using guessed type int dword_30095B80;
// 30095B84: using guessed type int dword_30095B84;
// 30095B88: using guessed type int dword_30095B88;
// 30095B8C: using guessed type float flt_30095B8C;
// 301E52A8: using guessed type float flt_301E52A8;
// 3020AF00: using guessed type int dword_3020AF00;

//----- (3001AD70) --------------------------------------------------------
void sub_3001AD70()
{
  int v0; // esi
  double v1; // st7
  unsigned __int8 v3; // c0
  unsigned __int8 v4; // c3
  float v5; // [esp+Ch] [ebp-10h]
  float v6; // [esp+Ch] [ebp-10h]
  int v7; // [esp+10h] [ebp-Ch]
  float v8; // [esp+10h] [ebp-Ch]
  float v9; // [esp+10h] [ebp-Ch]
  float v10; // [esp+14h] [ebp-8h]
  float v11; // [esp+14h] [ebp-8h]
  float v12; // [esp+18h] [ebp-4h]
  float v13; // [esp+18h] [ebp-4h]
  float v14; // [esp+18h] [ebp-4h]

  v12 = (float)(unsigned __int16)(unsigned __int64)((flt_3020D384 - flt_30210E5C) * 182.04445);
  v13 = v12 * 0.0054931641;
  if ( dword_300F0FA4 <= dword_3020AF00 )
  {
    v0 = dword_3020AF00 - dword_300F0FA4;
    v10 = (float)(dword_3020AF00 - dword_300F0FA4);
    if ( v10 <= 500.0 )
    {
      dword_300F0FA4 = dword_3020AF00;
      v11 = sub_3003DA20(dword_30210E60, v13);
      if ( v0 <= 0 )
      {
LABEL_30:
        v14 = (float)(unsigned __int16)(unsigned __int64)((v11 + v13) * 182.04445);
        dword_30210E60 = v14 * 0.0054931641;
        return;
      }
      while ( 1 )
      {
        if ( v0 <= 5 )
        {
          v7 = v0;
          v0 = 0;
        }
        else
        {
          v7 = 5;
          v0 -= 5;
        }
        v8 = (float)v7;
        v9 = v8 * 0.001;
        if ( fabs(v11) < 0.25 && fabs(flt_30210E64) < 1.0 )
        {
          flt_30210E64 = 0.0;
          dword_30210E60 = v13;
          return;
        }
        v5 = (float)(unsigned __int16)(unsigned __int64)((flt_30210E64 * v9 + v11) * 182.04445);
        v6 = v5 * 0.0054931641;
        if ( v6 > 180.0 )
          v6 = v6 - 360.0;
        v11 = v6;
        if ( v6 <= 0.0 )
        {
          if ( v6 >= 0.0 )
            goto LABEL_16;
          v1 = v9 * 1000.0 + flt_30210E64;
        }
        else
        {
          v1 = flt_30210E64 - v9 * 1000.0;
        }
        flt_30210E64 = v1;
LABEL_16:
        flt_30210E64 = flt_30210E64 - (flt_30210E64 * v9 + flt_30210E64 * v9);
        if ( v3 | v4 )
        {
          if ( v6 < 0.0 )
            flt_30210E64 = flt_30210E64 - flt_30210E64 * v9 * 3.5;
          flt_30210E64 = flt_30210E64 + v9;
          if ( flt_30210E64 <= 0.0 )
          {
LABEL_25:
            if ( flt_30210E64 <= 30000.0 )
            {
              if ( flt_30210E64 < -30000.0 )
                flt_30210E64 = -30000.0;
            }
            else
            {
              flt_30210E64 = 30000.0;
            }
            goto LABEL_29;
          }
          flt_30210E64 = 0.0;
        }
        else
        {
          if ( v6 > 0.0 )
            flt_30210E64 = flt_30210E64 - flt_30210E64 * v9 * 3.5;
          flt_30210E64 = flt_30210E64 - v9;
          if ( flt_30210E64 >= 0.0 )
            goto LABEL_25;
          flt_30210E64 = 0.0;
        }
LABEL_29:
        if ( v0 <= 0 )
          goto LABEL_30;
      }
    }
  }
  dword_300F0FA4 = dword_3020AF00;
  dword_30210E60 = v13;
  flt_30210E64 = 0.0;
}
// 3001AF43: variable 'v3' is possibly undefined
// 3001AF43: variable 'v4' is possibly undefined
// 300F0FA4: using guessed type int dword_300F0FA4;
// 3020AF00: using guessed type int dword_3020AF00;
// 30210E5C: using guessed type float flt_30210E5C;
// 30210E64: using guessed type float flt_30210E64;

//----- (3001B0A0) --------------------------------------------------------
void sub_3001B0A0()
{
  int v0; // esi
  double v1; // st7
  double v2; // st6
  double v3; // st6
  unsigned __int8 v5; // c0
  unsigned __int8 v6; // c3
  float v7; // [esp+0h] [ebp-10h]
  float v8; // [esp+0h] [ebp-10h]
  float v9; // [esp+8h] [ebp-8h]
  int v10; // [esp+8h] [ebp-8h]
  float v11; // [esp+8h] [ebp-8h]
  float v12; // [esp+Ch] [ebp-4h]

  if ( !dword_301DE34C )
  {
    flt_30210E68 = flt_3020D384;
    return;
  }
  if ( dword_300F0FA8 != dword_3020AF00 )
  {
    v12 = flt_3020D384;
    if ( dword_300F0FA8 <= dword_3020AF00 )
    {
      v0 = dword_3020AF00 - dword_300F0FA8;
      if ( (double)(dword_3020AF00 - dword_300F0FA8) <= 500.0 )
      {
        dword_300F0FA8 = dword_3020AF00;
        v1 = sub_3003DA20(flt_30210E68, flt_3020D384);
        if ( fabs(v1) > 10.0 )
        {
          v9 = v1;
          if ( v9 >= 0.0 )
            v1 = 10.0;
          else
            v1 = -10.0;
        }
        if ( v0 <= 0 )
        {
LABEL_35:
          v8 = v1 + v12;
          flt_30210E68 = sub_3003DAE0(v8);
          return;
        }
        while ( 1 )
        {
          if ( v0 <= 5 )
          {
            v10 = v0;
            v0 = 0;
          }
          else
          {
            v10 = 5;
            v0 -= 5;
          }
          v11 = (double)v10 * 0.001;
          if ( fabs(v1) < 0.5 && fabs(flt_30210E6C) < 2.0 )
          {
            flt_30210E68 = v12;
            flt_30210E6C = 0.0;
            return;
          }
          v7 = flt_30210E6C * v11 + v1;
          v1 = sub_3003DB10(v7);
          if ( v1 <= 0.0 )
          {
            if ( v1 >= 0.0 )
              v2 = flt_30210E6C;
            else
              v2 = v11 * 1500.0 + flt_30210E6C;
          }
          else
          {
            v2 = flt_30210E6C - v11 * 1500.0;
          }
          v3 = v2 - v11 * v2 * 3.0;
          if ( v5 | v6 )
          {
            if ( v1 < 0.0 )
              v3 = v3 - v11 * v3 * 5.0;
            flt_30210E6C = v11 + v11 + v3;
            if ( flt_30210E6C <= 0.0 )
            {
LABEL_30:
              if ( flt_30210E6C <= 2000.0 )
              {
                if ( flt_30210E6C < -2000.0 )
                  flt_30210E6C = -2000.0;
              }
              else
              {
                flt_30210E6C = 2000.0;
              }
              goto LABEL_34;
            }
            flt_30210E6C = 0.0;
          }
          else
          {
            if ( v1 > 0.0 )
              v3 = v3 - v11 * v3 * 5.0;
            flt_30210E6C = v3 - (v11 + v11);
            if ( flt_30210E6C >= 0.0 )
              goto LABEL_30;
            flt_30210E6C = 0.0;
          }
LABEL_34:
          if ( v0 <= 0 )
            goto LABEL_35;
        }
      }
    }
    dword_300F0FA8 = dword_3020AF00;
    flt_30210E68 = flt_3020D384;
    flt_30210E6C = 0.0;
  }
}
// 3001B212: variable 'v5' is possibly undefined
// 3001B212: variable 'v6' is possibly undefined
// 300F0FA8: using guessed type int dword_300F0FA8;
// 301DE34C: using guessed type int dword_301DE34C;
// 3020AF00: using guessed type int dword_3020AF00;
// 30210E6C: using guessed type float flt_30210E6C;

//----- (3001B340) --------------------------------------------------------
int __usercall sub_3001B340@<eax>(float *a1@<eax>, float *a2@<edx>)
{
  int v3; // eax
  float *v4; // ecx
  double v5; // st7
  double v6; // st7
  double v7; // st7
  unsigned int i; // esi
  int result; // eax
  char v10; // [esp+8h] [ebp-5Ch] BYREF

  v3 = 0;
  v4 = (float *)&v10;
  do
  {
    if ( (v3 & 1) != 0 )
      v5 = *a2;
    else
      v5 = *a1;
    *(v4 - 1) = v5;
    if ( (v3 & 2) != 0 )
      v6 = a2[1];
    else
      v6 = a1[1];
    *v4 = v6;
    if ( (v3 & 4) != 0 )
      v7 = a2[2];
    else
      v7 = a1[2];
    v4[1] = v7;
    ++v3;
    v4 += 3;
  }
  while ( v3 < 8 );
  for ( i = 0; i < 0x60; i += 8 )
    result = dword_30076898(199);
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001B3C0) --------------------------------------------------------
unsigned int __usercall sub_3001B3C0@<eax>(float *a1@<eax>, int a2, float a3)
{
  unsigned int v3; // esi
  float *v4; // eax
  char *v5; // edx
  long double v6; // st7
  float *v7; // eax
  unsigned int result; // eax
  char *v9; // edi
  unsigned int v10; // esi
  float *v11; // [esp-4h] [ebp-10Ch]
  float v12; // [esp+10h] [ebp-F8h] BYREF
  float v13; // [esp+14h] [ebp-F4h] BYREF
  float v14; // [esp+18h] [ebp-F0h]
  float v15; // [esp+1Ch] [ebp-ECh] BYREF
  float v16; // [esp+20h] [ebp-E8h]
  float v17; // [esp+24h] [ebp-E4h]
  float v18; // [esp+28h] [ebp-E0h] BYREF
  float v19; // [esp+2Ch] [ebp-DCh]
  float v20; // [esp+30h] [ebp-D8h]
  float *v21; // [esp+34h] [ebp-D4h]
  float v22; // [esp+38h] [ebp-D0h]
  float v23; // [esp+3Ch] [ebp-CCh]
  float v24; // [esp+40h] [ebp-C8h]
  float *v25; // [esp+44h] [ebp-C4h]
  char v26; // [esp+48h] [ebp-C0h] BYREF
  char v27; // [esp+4Ch] [ebp-BCh] BYREF

  sub_3003B600(a1, &v18);
  sub_3003C080(&v15, &v18);
  v3 = 0;
  v4 = &v12;
  v14 = 0.0;
  v21 = &v12;
  v25 = &v13;
  v5 = &v27;
  v22 = v19 * v17 - v20 * v16;
  v23 = v20 * v15 - v18 * v17;
  v24 = v18 * v16 - v19 * v15;
  do
  {
    v14 = (float)SLODWORD(v14);
    v14 = v14 * 0.39269909;
    v11 = v4;
    v6 = sin(v14);
    v7 = v25;
    *v21 = cos(v14);
    *v7 = v6;
    v4 = v11;
    ++v3;
    v5 += 12;
    v14 = *(float *)&v3;
    v13 = v13 * a3;
    v12 = v12 * a3;
    *((float *)v5 - 4) = v15 * v12 + v22 * v13 + *(float *)a2;
    *((float *)v5 - 3) = v16 * v12 + v23 * v13 + *(float *)(a2 + 4);
    *((float *)v5 - 2) = v17 * v12 + v24 * v13 + *(float *)(a2 + 8);
  }
  while ( v3 < 0x10 );
  result = 0;
  v9 = &v26;
  do
  {
    v10 = result + 1;
    dword_30076898(199);
    result = v10;
    v9 += 12;
  }
  while ( v10 < 0x10 );
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001B550) --------------------------------------------------------
char *__usercall sub_3001B550@<eax>(int a1@<eax>, float a2, float a3, float a4)
{
  double v5; // st7
  unsigned int v6; // edi
  char *v7; // edx
  float *v8; // eax
  double v9; // st7
  char *result; // eax
  int v11; // edi
  int v12; // esi
  int v13; // [esp+0h] [ebp-D8h]
  float v14; // [esp+0h] [ebp-D8h]
  float v15; // [esp+4h] [ebp-D4h]
  float v16; // [esp+8h] [ebp-D0h] BYREF
  float v17; // [esp+Ch] [ebp-CCh] BYREF
  float *v18; // [esp+10h] [ebp-C8h]
  float *v19; // [esp+14h] [ebp-C4h]
  char v20; // [esp+18h] [ebp-C0h] BYREF
  char v21; // [esp+1Ch] [ebp-BCh] BYREF

  v5 = (a4 - a3) * 0.06666667;
  v15 = v5;
  if ( v5 < 0.0 )
  {
    a3 = a3 - 360.0;
    v15 = (a4 - a3) * 0.06666667;
  }
  v6 = 0;
  v13 = 0;
  v19 = &v17;
  v18 = &v16;
  v7 = &v21;
  do
  {
    v14 = ((double)v13 * v15 + a3) * 3.1415927 * 0.0055555557;
    v8 = v18;
    *v19 = cos(v14);
    *v8 = sin(v14);
    v9 = v17 * a2;
    ++v6;
    *((_DWORD *)v7 + 1) = *(_DWORD *)(a1 + 8);
    v7 += 12;
    v13 = v6;
    *((float *)v7 - 4) = v9 + *(float *)a1;
    *((float *)v7 - 3) = v16 * a2 + *(float *)(a1 + 4);
  }
  while ( v6 < 0x10 );
  result = &v20;
  v11 = 15;
  do
  {
    v12 = (int)(result + 12);
    dword_30076898(199);
    --v11;
    result = (char *)v12;
  }
  while ( v11 );
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001B6A0) --------------------------------------------------------
int __usercall sub_3001B6A0@<eax>(_BYTE *a1@<eax>, const char *ArgList, int a3)
{
  int v3; // ebx
  int i; // esi
  const char *v6; // eax

  v3 = 0;
  for ( i = 0; i < 23; ++i )
  {
    if ( *a1 )
    {
      *(_DWORD *)(a3 + 4 * i) = dword_30076898(223);
    }
    else
    {
      if ( !a1[1] )
      {
        v6 = (const char *)dword_30076898(198);
        sub_300219D0("no entry for effect type '%s' on surface type '%s'\n", ArgList, v6);
        ++v3;
      }
      *(_DWORD *)(a3 + 4 * i) = 0;
    }
    a1 += 64;
  }
  return v3;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001B710) --------------------------------------------------------
int __cdecl sub_3001B710(const char *a1, _BYTE *a2, int a3, int a4, int a5)
{
  char *v5; // ebx
  int v6; // ecx
  char *v7; // eax
  _BYTE *v8; // ecx
  const char *v9; // edi
  char v10; // al
  int v11; // ebx
  int i; // esi
  char *v13; // edi
  int v14; // eax
  int v15; // ebp
  char *v16; // eax
  int v17; // eax
  char *v18; // edi
  int v19; // eax
  int v20; // eax

  v5 = String;
  while ( 1 )
  {
    while ( 1 )
    {
LABEL_2:
      if ( *((_DWORD *)v5 + 257) )
      {
        *((_DWORD *)v5 + 257) = 0;
        v6 = *((_DWORD *)v5 + 261);
        a2 = (_BYTE *)*((_DWORD *)v5 + 262);
        *((_DWORD *)v5 + 256) = v6;
      }
      v7 = sub_3003F2E0(&a2, 1);
      v8 = a2;
      v9 = v7;
      if ( !a2 )
        return 0;
      v10 = *v7;
      if ( *v9 )
      {
        if ( v10 != 35 )
          break;
      }
      v20 = (char)*a2;
      v5 = String;
      if ( *a2 )
      {
        while ( 1 )
        {
          ++v8;
          if ( v20 == 10 )
            break;
          v20 = (char)*v8;
          if ( !*v8 )
          {
            a2 = v8;
            goto LABEL_2;
          }
        }
LABEL_30:
        ++*((_DWORD *)v5 + 256);
      }
LABEL_31:
      a2 = v8;
    }
    v11 = a3;
    for ( i = 0; i < v11; ++i )
    {
      if ( !_stricmp(*(const char **)(a4 + 4 * i), v9) )
        break;
    }
    if ( i == v11 )
      return sub_300403F0("unknown effect type '%s' in first column of file '%s'", v9, a1);
    v13 = String;
    if ( *((_DWORD *)String + 257) )
    {
      *((_DWORD *)String + 257) = 0;
      if ( !*((_DWORD *)v13 + 258) )
        goto LABEL_15;
      v14 = *((_DWORD *)v13 + 261);
      a2 = (_BYTE *)*((_DWORD *)v13 + 262);
      *((_DWORD *)v13 + 256) = v14;
    }
    v13 = sub_3003F2E0(&a2, 0);
LABEL_15:
    if ( !*v13 )
      return sub_300403F0("missing surface type in second column of file '%s'", a1);
    v15 = dword_30076898(197);
    if ( v15 < 0 )
      return sub_300403F0("unknown surface type '%s' in second column of file '%s'", v13, a1);
    v5 = String;
    if ( *((_DWORD *)String + 257) )
    {
      *((_DWORD *)String + 257) = 0;
      if ( !*((_DWORD *)v5 + 258) )
      {
        v16 = v5;
        goto LABEL_22;
      }
      v17 = *((_DWORD *)v5 + 261);
      a2 = (_BYTE *)*((_DWORD *)v5 + 262);
      *((_DWORD *)v5 + 256) = v17;
    }
    v16 = sub_3003F2E0(&a2, 0);
    v5 = String;
LABEL_22:
    v18 = (char *)(((v15 + 23 * i) << 6) + a5);
    v18[63] = 0;
    strcpy(v18, v16);
    if ( v18[63] )
      return sub_300403F0("effect filename '%s' in third column of file '%s' is longer than %i characters", v16, a1, 63);
    if ( !*v16 )
      v18[1] = 1;
    v8 = a2;
    if ( a2 )
    {
      v19 = (char)*a2;
      if ( !*a2 )
        goto LABEL_31;
      while ( 1 )
      {
        ++v8;
        if ( v19 == 10 )
          goto LABEL_30;
        v19 = (char)*v8;
        if ( !*v8 )
        {
          a2 = v8;
          goto LABEL_2;
        }
      }
    }
  }
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001B960) --------------------------------------------------------
int __cdecl sub_3001B960(char *String1, char *String2)
{
  return _stricmp(*(const char **)String1, *(const char **)String2);
}

//----- (3001B980) --------------------------------------------------------
int sub_3001B980()
{
  unsigned int v0; // eax
  signed int v1; // esi
  signed int v2; // edi
  const char *i; // ecx
  char *v4; // ebx
  int v5; // edi
  _BYTE *v6; // esi
  char *v7; // edi
  int v8; // eax
  int v9; // ebx
  char *v10; // edi
  unsigned int k; // esi
  int result; // eax
  int v13; // [esp+Ch] [ebp-1741Ch]
  signed int j; // [esp+10h] [ebp-17418h]
  char ArgList[4]; // [esp+18h] [ebp-17410h] BYREF
  const char *v16; // [esp+1Ch] [ebp-1740Ch]
  const char *v17; // [esp+20h] [ebp-17408h]
  const char *v18; // [esp+24h] [ebp-17404h]
  const char *v19; // [esp+28h] [ebp-17400h]
  const char *v20; // [esp+2Ch] [ebp-173FCh]
  const char *v21; // [esp+30h] [ebp-173F8h]
  const char *v22; // [esp+34h] [ebp-173F4h]
  const char *v23; // [esp+38h] [ebp-173F0h]
  int v24[9]; // [esp+3Ch] [ebp-173ECh]
  char v25[13248]; // [esp+60h] [ebp-173C8h] BYREF
  int v26[4096]; // [esp+3420h] [ebp-14008h] BYREF
  char v27; // [esp+7420h] [ebp-10008h] BYREF
  unsigned int v28; // [esp+17424h] [ebp-4h]
  unsigned int retaddr; // [esp+1742Ch] [ebp+4h]

  v28 = retaddr ^ dword_300705C0;
  *(_DWORD *)ArgList = "bullet_small_normal";
  v16 = "bullet_small_reflect";
  v17 = "bullet_large_normal";
  v18 = "bullet_large_reflect";
  v19 = "grenade_bounce";
  v20 = "grenade_explode";
  v21 = "rocket_explode";
  v22 = "molotov_explode_normal";
  v23 = "molotov_explode_reflect";
  v24[0] = (int)&dword_301D9D18;
  v24[1] = (int)&dword_301D9D74;
  v24[2] = (int)&dword_301D9DD0;
  v24[3] = (int)&dword_301D9E2C;
  v24[4] = (int)&dword_301D9E88;
  v24[5] = (int)&dword_301D9EE4;
  v24[6] = (int)&dword_301D9F40;
  v24[7] = (int)&unk_301D9F9C;
  v24[8] = (int)&unk_301D9FF8;
  v0 = dword_30076898(19);
  v1 = v0;
  v13 = v0;
  if ( v0 )
  {
    if ( v0 > 0x1000 )
    {
      v13 = 4096;
      v1 = 4096;
    }
  }
  else
  {
    sub_30021A30("No CSV files in the fx directory to identify impact effects\n");
  }
  v2 = 0;
  for ( i = &v27; v2 < v1; i += strlen(i) + 1 )
    v26[v2++] = (int)i;
  sub_3004D690((unsigned int)v26, v1, 4, (int (__cdecl *)(unsigned int, _BYTE *))sub_3001B960);
  memset(v25, 0, sizeof(v25));
  for ( j = 0; j < v1; ++j )
  {
    v4 = (char *)sub_300403F0("fx/%s", (const char *)v26[j]);
    v5 = dword_30076898(15);
    if ( v5 >= 0 )
    {
      v6 = (_BYTE *)dword_30076898(189);
      dword_30076898(16);
      dword_30076898(18);
      v6[v5] = 0;
      sub_3003EE60(v4);
      *((_DWORD *)String + 259) = 1;
      v7 = (char *)sub_3001B710(v4, v6, 9, (int)ArgList, (int)v25);
      v8 = dword_30098CC0;
      if ( !dword_30098CC0 )
      {
        sub_30021B10(dword_30098CC0, (char *)&byte_30063DE4);
        v8 = dword_30098CC0;
      }
      dword_30098CC0 = v8 - 1;
      String = (char *)&unk_30071B08 + 1116 * v8 - 1116;
      dword_30076898(190);
      if ( v7 )
        sub_30021A30(v7);
      v1 = v13;
    }
  }
  v9 = 0;
  v10 = v25;
  for ( k = 0; k < 9; ++k )
  {
    result = sub_3001B6A0(v10, *(const char **)&ArgList[k * 4], v24[k]);
    v9 += result;
    v10 += 1472;
  }
  if ( v9 )
    result = sub_30021A30("%i missing entries in effect CSV files (see console for details)", v9);
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D9D18: using guessed type int dword_301D9D18;
// 301D9D74: using guessed type int dword_301D9D74;
// 301D9DD0: using guessed type int dword_301D9DD0;
// 301D9E2C: using guessed type int dword_301D9E2C;
// 301D9E88: using guessed type int dword_301D9E88;
// 301D9EE4: using guessed type int dword_301D9EE4;
// 301D9F40: using guessed type int dword_301D9F40;

//----- (3001BC40) --------------------------------------------------------
int __fastcall sub_3001BC40(float *a1, _DWORD *a2)
{
  int result; // eax

  if ( ((_DWORD)a1[2] & 0x10000) != 0 )
  {
    if ( a1[132] == 0.0 && a1[133] == 0.0 && a1[134] == 0.0 )
    {
      a1[132] = a1[126];
      a1[133] = a1[127];
      a1[134] = a1[128];
    }
    a2[3] = *((_DWORD *)a1 + 132);
    a2[4] = *((_DWORD *)a1 + 133);
    result = a2[1] | 0x80;
    a2[5] = *((_DWORD *)a1 + 134);
    a2[1] = result;
  }
  else
  {
    result = 0;
    a1[134] = 0.0;
    a1[133] = 0.0;
    a1[132] = 0.0;
  }
  return result;
}

//----- (3001BCF0) --------------------------------------------------------
int __usercall sub_3001BCF0@<eax>(int a1@<ebx>)
{
  int result; // eax
  int v2; // esi
  int v3; // edx
  int v4; // ecx
  int v5[42]; // [esp+8h] [ebp-A8h] BYREF
  unsigned int retaddr; // [esp+B4h] [ebp+4h]

  v5[41] = retaddr ^ dword_300705C0;
  result = *(_DWORD *)(a1 + 8);
  if ( (result & 0x100) == 0 )
  {
    sub_3001E5A0(*(_DWORD *)a1, *(_DWORD *)(a1 + 4));
    result = dword_30076898(163);
    v2 = result;
    if ( result )
    {
      v3 = *(_DWORD *)(a1 + 512);
      memset(v5, 0, 0x9Cu);
      v4 = *(_DWORD *)(a1 + 508);
      v5[17] = *(_DWORD *)(a1 + 504);
      v5[19] = v3;
      v5[21] = v5[17];
      v5[23] = v3;
      v5[18] = v4;
      v5[22] = v4;
      sub_3003DE80((float *)&v5[7], (float *)(a1 + 516));
      v5[36] = v2;
      v5[37] = a1;
      v5[0] = 1;
      sub_3001BC40((float *)a1, v5);
      result = dword_30076898(61);
    }
  }
  return result;
}
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001BF50) --------------------------------------------------------
int __usercall sub_3001BF50@<eax>(int *a1@<ebx>)
{
  int result; // eax
  int v2; // eax
  int v3; // esi
  float *v4; // edx
  int v5; // eax
  int v6; // ecx
  char *v7; // [esp+Ch] [ebp-ACh]
  int v8[42]; // [esp+10h] [ebp-A8h] BYREF
  unsigned int retaddr; // [esp+BCh] [ebp+4h]

  v8[41] = retaddr ^ dword_300705C0;
  if ( a1[35] >= 70 )
    sub_30021A30("Bad item index %i on entity", a1[35]);
  result = a1[2];
  if ( (result & 0x100) == 0 )
  {
    v2 = a1[35];
    v7 = (char *)&unk_30078328 + 48 * v2;
    if ( dword_301E02C0[9 * v2] )
    {
      if ( !dword_301E02C0[9 * v2 + 1] )
        sub_30021A30("No XModel loaded for item index %i (%s)", v2, *((const char **)&unk_30078328 + 12 * v2 + 6));
      sub_3001E5A0(*a1, a1[1]);
      result = dword_30076898(163);
      v3 = result;
      if ( result )
      {
        memset(v8, 0, 0x9Cu);
        v4 = (float *)(a1 + 129);
        if ( *((_DWORD *)v7 + 8) == 1 )
        {
          sub_3003DE80((float *)&v8[7], v4);
          v8[16] = 1065353216;
        }
        else
        {
          sub_3003DE80((float *)&v8[7], v4);
        }
        v5 = a1[127];
        v6 = a1[128];
        v8[17] = a1[126];
        v8[21] = v8[17];
        v8[18] = v5;
        v8[19] = v6;
        v8[22] = v5;
        v8[23] = v6;
        v8[36] = v3;
        v8[37] = (int)a1;
        v8[0] = 1;
        result = dword_30076898(61);
      }
    }
    else
    {
      result = sub_300379F0(v2);
    }
  }
  return result;
}
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001C0C0) --------------------------------------------------------
int __usercall sub_3001C0C0@<eax>(int a1@<eax>)
{
  int v2; // ecx
  int v3; // edi
  float *v4; // eax
  float *v5; // ecx
  int result; // eax
  float v7[3]; // [esp+18h] [ebp-Ch] BYREF

  v2 = *(_DWORD *)(a1 + 132);
  if ( v2 )
  {
    v3 = v2 + 524;
    if ( *(_DWORD *)(a1 + 156) == 0xFFFFFF )
    {
      v4 = &flt_301D7548[3 * *(_DWORD *)(a1 + 140)];
      v7[0] = *(float *)(a1 + 504) + flt_301D7548[3 * *(_DWORD *)(a1 + 140)];
      v7[1] = *(float *)(a1 + 508) + v4[1];
      v7[2] = *(float *)(a1 + 512) + v4[2];
      if ( v3 < 0 || v3 >= 2048 )
        sub_30021A30("CG_ConfigString: bad index: %i", v2 + 12);
      v5 = v7;
    }
    else
    {
      if ( v3 < 0 || v3 >= 2048 )
        sub_30021A30("CG_ConfigString: bad index: %i", v2 + 12);
      v5 = (float *)(a1 + 504);
    }
    sub_30022ED0(*(_DWORD *)a1, v5);
  }
  result = *(_DWORD *)(a1 + 128);
  if ( result )
    result = dword_30076898(66);
  return result;
}
// 30022ED0: using guessed type _DWORD __cdecl sub_30022ED0(_DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001C220) --------------------------------------------------------
int sub_3001C220()
{
  int v1; // [esp-24h] [ebp-2Ch]

  v1 = dword_30076898(130);
  dword_30076898(133);
  dword_30076898(129);
  dword_30076898(131);
  dword_30076898(129);
  dword_30076898(131);
  return v1;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (3001C2B0) --------------------------------------------------------
int __usercall sub_3001C2B0@<eax>(int a1@<esi>)
{
  float v1; // edx
  float v2; // edx
  float v3; // edx
  float *v4; // edx
  int v5; // ecx
  int v6; // edx
  int v7; // ecx
  double v8; // st7
  unsigned __int8 v10; // c0
  unsigned __int8 v11; // c3
  int v12; // eax
  float v13; // edx
  int v14; // ebx
  int v15; // ebx
  int v16; // ebx
  float v18[2]; // [esp+10h] [ebp-1Ch]
  float v19[2]; // [esp+18h] [ebp-14h]
  float v20; // [esp+20h] [ebp-Ch] BYREF
  float v21; // [esp+24h] [ebp-8h]
  int v22; // [esp+28h] [ebp-4h]

  dword_30076898(163);
  if ( (dword_3020AF94 & 0xC000) != 0 && dword_3020B28C == *(_DWORD *)a1 && !dword_3020AF10 )
  {
    v19[0] = sub_3003D9B0(*(float *)(a1 + 212), *(float *)(a1 + 452), dword_3020AEF8);
    v19[1] = sub_3003D9B0(*(float *)(a1 + 92), *(float *)(a1 + 332), v1);
    v18[0] = sub_3003D9B0(*(float *)(a1 + 96), *(float *)(a1 + 336), v2);
    v18[1] = sub_3003D9B0(*(float *)(a1 + 100), *(float *)(a1 + 340), v3);
    v4 = (float *)(a1 + 516);
    v5 = 0;
    while ( 1 )
    {
      v8 = sub_3003DA20(*(float *)((char *)&dword_3020D380 + v5), *v4);
      *(float *)((char *)&v20 + v7) = v8;
      if ( !(v10 | v11) )
        break;
      if ( v8 < *(float *)((char *)v18 + v7) )
      {
        v12 = *(_DWORD *)((char *)v18 + v7);
        goto LABEL_9;
      }
LABEL_10:
      v5 = v7 + 4;
      v4 = (float *)(v6 + 4);
      if ( v5 >= 8 )
        goto LABEL_13;
    }
    v12 = *(_DWORD *)((char *)v19 + v7);
LABEL_9:
    *(_DWORD *)((char *)&v20 + v7) = v12;
    goto LABEL_10;
  }
  v20 = sub_3003D9B0(*(float *)(a1 + 104), *(float *)(a1 + 344), dword_3020AEF8);
  v21 = sub_3003D9B0(*(float *)(a1 + 108), *(float *)(a1 + 348), v13);
LABEL_13:
  v22 = 0;
  v14 = dword_30076898(175);
  if ( v14 >= 0 && dword_30076898(161) )
    sub_3001D320(v14, &v20, &flt_300628EC);
  v15 = dword_30076898(175);
  if ( v15 >= 0 && dword_30076898(161) )
    sub_3001D320(v15, &v20, &flt_300628EC);
  v20 = sub_3003D9B0(*(float *)(a1 + 112), *(float *)(a1 + 352), dword_3020AEF8);
  v21 = 0.0;
  v16 = dword_30076898(175);
  if ( v16 >= 0 && dword_30076898(161) )
    sub_3001D320(v16, &v20, &flt_300628EC);
  dword_30076898(178);
  v18[0] = 0.1;
  v19[0] = 1.0;
  return dword_30076898(139);
}
// 3001C31F: variable 'v1' is possibly undefined
// 3001C334: variable 'v2' is possibly undefined
// 3001C349: variable 'v3' is possibly undefined
// 3001C376: variable 'v7' is possibly undefined
// 3001C37C: variable 'v10' is possibly undefined
// 3001C37C: variable 'v11' is possibly undefined
// 3001C39F: variable 'v6' is possibly undefined
// 3001C3D0: variable 'v13' is possibly undefined
// 300628EC: using guessed type float flt_300628EC;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF10: using guessed type int dword_3020AF10;
// 3020AF94: using guessed type int dword_3020AF94;
// 3020B28C: using guessed type int dword_3020B28C;
// 3020D380: using guessed type int dword_3020D380;

//----- (3001C560) --------------------------------------------------------
int __usercall sub_3001C560@<eax>(int a1@<ebx>)
{
  int result; // eax
  int v2; // esi
  double v3; // st7
  int v4; // edx
  double v5; // st6
  int v6; // eax
  int v7; // ecx
  int v8[42]; // [esp+8h] [ebp-A8h] BYREF
  unsigned int retaddr; // [esp+B4h] [ebp+4h]

  v8[41] = retaddr ^ dword_300705C0;
  result = *(_DWORD *)(a1 + 8);
  if ( (result & 0x100) == 0 )
  {
    sub_3001E5A0(*(_DWORD *)a1, *(_DWORD *)(a1 + 4));
    result = dword_30076898(163);
    v2 = result;
    if ( result )
    {
      v3 = *(float *)(a1 + 504);
      v4 = *(_DWORD *)(a1 + 508);
      memset(v8, 0, 0x9Cu);
      *(float *)&v8[17] = v3;
      v5 = *(float *)(a1 + 508);
      v8[18] = *(int *)(a1 + 508);
      v6 = *(int *)(a1 + 512);
      *(float *)&v8[3] = v3;
      v7 = *(_DWORD *)(a1 + 504);
      *(float *)&v8[4] = v5;
      v8[19] = v6;
      v8[22] = v4;
      v8[23] = v6;
      v8[21] = v7;
      *(float *)&v8[5] = *(float *)&v6 + 32.0;
      v8[1] = 128;
      sub_3003DE80((float *)&v8[7], (float *)(a1 + 516));
      v8[36] = v2;
      v8[37] = a1;
      v8[0] = 1;
      result = dword_30076898(61);
    }
  }
  return result;
}
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001C670) --------------------------------------------------------
int __usercall sub_3001C670@<eax>(int a1@<ebx>)
{
  char *v1; // ebp
  int v2; // esi
  int v3; // edx
  int v4; // eax
  int v5; // ecx
  int v7[41]; // [esp+18h] [ebp-ACh] BYREF
  unsigned int v8; // [esp+BCh] [ebp-8h]
  unsigned int retaddr; // [esp+C4h] [ebp+0h]

  v8 = retaddr ^ dword_300705C0;
  if ( (*(_DWORD *)(a1 + 8) & 0x100) == 0 )
  {
    if ( *(_DWORD *)(a1 + 200) > dword_300F0FB0 )
      *(_DWORD *)(a1 + 200) = 0;
    v1 = (char *)&unk_301AA4E0 + 408 * *(_DWORD *)(a1 + 200);
    if ( *((_DWORD *)v1 + 50) )
      sub_30022ED0();
    sub_3001E5A0(*(_DWORD *)a1, *(_DWORD *)(a1 + 4));
    v2 = dword_30076898(163);
    if ( v2 )
    {
      if ( *((float *)v1 + 75) != 0.0 )
        sub_300326D0();
      v3 = *(_DWORD *)(a1 + 508);
      memset(v7, 0, 0x9Cu);
      v4 = *(_DWORD *)(a1 + 512);
      v7[17] = *(_DWORD *)(a1 + 504);
      v7[21] = v7[17];
      v5 = *((_DWORD *)v1 + 79);
      v7[18] = v3;
      v7[19] = v4;
      v7[22] = v3;
      v7[23] = v4;
      v7[1] = v5 | 0x40;
      sub_3003DE80((float *)&v7[7], (float *)(a1 + 516));
      v7[36] = v2;
      v7[37] = a1;
      v7[0] = 1;
      dword_30076898(61);
      if ( *((_DWORD *)v1 + 84) && !*(_DWORD *)(a1 + 496) )
      {
        if ( dword_30076898(224) >= 0 )
          dword_30076898(230);
        *(_DWORD *)(a1 + 496) = 1;
      }
    }
  }
  return sub_30052A2E(retaddr ^ v8);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB0: using guessed type int dword_300F0FB0;

//----- (3001C840) --------------------------------------------------------
int __cdecl sub_3001C840(int a1)
{
  int result; // eax
  int v2; // edx
  int v3; // eax
  int v4; // ecx
  int v5; // ecx
  int v6; // [esp+10h] [ebp-B8h]
  float v7[3]; // [esp+14h] [ebp-B4h] BYREF
  int v8[42]; // [esp+20h] [ebp-A8h] BYREF
  unsigned int retaddr; // [esp+CCh] [ebp+4h]

  v8[41] = retaddr ^ dword_300705C0;
  result = *(_DWORD *)(a1 + 8);
  if ( (result & 0x100) == 0 )
  {
    result = dword_30076898(163);
    v6 = result;
    if ( *(_DWORD *)(a1 + 156) == 0xFFFFFF || result )
    {
      v2 = *(_DWORD *)(a1 + 512);
      memset(v8, 0, 0x9Cu);
      v3 = *(_DWORD *)(a1 + 504);
      v4 = *(_DWORD *)(a1 + 508);
      v8[19] = v2;
      v8[23] = v2;
      v8[17] = v3;
      v8[18] = v4;
      v8[21] = v3;
      v8[22] = v4;
      sub_3003BEA0((float *)(a1 + 516), (float *)&v8[13], v7, (float *)&v8[7]);
      v5 = *(_DWORD *)(a1 + 156);
      *(float *)&v8[10] = 0.0 - v7[0];
      v8[1] = 64;
      *(float *)&v8[11] = 0.0 - v7[1];
      *(float *)&v8[12] = 0.0 - v7[2];
      if ( v5 == 0xFFFFFF )
      {
        v8[2] = dword_301D6D48[*(_DWORD *)(a1 + 140)];
        v8[0] = 0;
      }
      else
      {
        v8[36] = v6;
        v8[37] = a1;
        v8[0] = 1;
      }
      result = dword_30076898(61);
    }
  }
  return result;
}
// 300628EC: using guessed type float flt_300628EC;
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001C990) --------------------------------------------------------
int __cdecl sub_3001C990(int a1)
{
  int result; // eax
  int v2; // edx
  int v3; // eax
  int v4; // ecx
  int v5; // eax
  int v6; // [esp+10h] [ebp-B8h]
  float v7[3]; // [esp+14h] [ebp-B4h] BYREF
  int v8[42]; // [esp+20h] [ebp-A8h] BYREF
  unsigned int retaddr; // [esp+CCh] [ebp+4h]

  v8[41] = retaddr ^ dword_300705C0;
  result = *(_DWORD *)(a1 + 8);
  if ( (result & 0x100) == 0 )
  {
    sub_3001E5A0(*(_DWORD *)a1, *(_DWORD *)(a1 + 4));
    result = dword_30076898(163);
    v6 = result;
    if ( *(_DWORD *)(a1 + 156) == 0xFFFFFF || result )
    {
      v2 = *(_DWORD *)(a1 + 512);
      memset(v8, 0, 0x9Cu);
      v3 = *(_DWORD *)(a1 + 504);
      v4 = *(_DWORD *)(a1 + 508);
      v8[19] = v2;
      v8[23] = v2;
      v8[17] = v3;
      v8[18] = v4;
      v8[21] = v3;
      v8[22] = v4;
      sub_3003BEA0((float *)(a1 + 516), (float *)&v8[13], v7, (float *)&v8[7]);
      v5 = *(_DWORD *)(a1 + 156);
      v8[1] = 64;
      *(float *)&v8[10] = 0.0 - v7[0];
      *(float *)&v8[11] = 0.0 - v7[1];
      *(float *)&v8[12] = 0.0 - v7[2];
      if ( v5 == 0xFFFFFF )
      {
        v8[2] = dword_301D6D48[*(_DWORD *)(a1 + 140)];
        v8[0] = 0;
      }
      else
      {
        v8[36] = v6;
        v8[37] = a1;
        v8[0] = 1;
        sub_3001BC40((float *)a1, v8);
      }
      result = dword_30076898(61);
    }
  }
  return result;
}
// 300628EC: using guessed type float flt_300628EC;
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001CB00) --------------------------------------------------------
int __fastcall sub_3001CB00(int a1, _DWORD *a2)
{
  int v2; // ecx
  int v3; // eax
  int v4; // ecx
  int v5; // eax
  int v6; // ecx
  int v8[42]; // [esp+8h] [ebp-A8h] BYREF
  unsigned int retaddr; // [esp+B4h] [ebp+4h]

  v8[41] = retaddr ^ dword_300705C0;
  memset(v8, 0, 0x9Cu);
  v2 = a2[7];
  v8[17] = a2[6];
  v3 = a2[8];
  v8[18] = v2;
  v4 = a2[23];
  v8[19] = v3;
  v5 = a2[24];
  v8[21] = v4;
  v6 = a2[25];
  v8[22] = v5;
  v8[23] = v6;
  v8[7] = 1065353216;
  v8[8] = 0;
  v8[9] = 0;
  v8[10] = 0;
  v8[11] = 1065353216;
  v8[12] = 0;
  v8[13] = 0;
  v8[14] = 0;
  v8[15] = 1065353216;
  v8[0] = 6;
  v8[1] = 64;
  return dword_30076898(61);
}
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001CBC0) --------------------------------------------------------
int __usercall sub_3001CBC0@<eax>(_DWORD *a1@<esi>)
{
  int v1; // edx
  int v2; // ecx
  int v3; // eax
  int v4; // ecx
  int v5; // edx
  int v6; // eax
  int v7; // ecx
  int v8; // edx
  int v9; // eax
  int v10; // ecx
  int v12[42]; // [esp+8h] [ebp-A8h] BYREF
  unsigned int retaddr; // [esp+B4h] [ebp+4h]

  v1 = a1[128];
  v12[41] = retaddr ^ dword_300705C0;
  memset(v12, 0, 0x9Cu);
  v2 = a1[127];
  v12[17] = a1[126];
  v12[21] = a1[23];
  v3 = a1[40];
  v12[18] = v2;
  v4 = a1[24];
  v12[19] = v1;
  v5 = a1[25];
  v12[22] = v4;
  v12[23] = v5;
  if ( v3 < 0 || v3 >= 162 )
  {
    v7 = 0;
    v8 = 0;
    v9 = 0;
  }
  else
  {
    v6 = 3 * v3;
    v7 = dword_300760D0[v6];
    v8 = dword_300760D4[v6];
    v9 = dword_300760D8[v6];
  }
  v12[8] = v8;
  v12[7] = v7;
  v12[9] = v9;
  sub_3003C080((float *)&v12[10], (float *)&v12[7]);
  v10 = a1[28];
  *(float *)&v12[10] = 0.0 - *(float *)&v12[10];
  v12[0] = 11;
  v12[20] = 0;
  v12[32] = v10;
  *(float *)&v12[11] = 0.0 - *(float *)&v12[11];
  *(float *)&v12[12] = 0.0 - *(float *)&v12[12];
  *(float *)&v12[13] = *(float *)&v12[8] * *(float *)&v12[12] - *(float *)&v12[9] * *(float *)&v12[11];
  *(float *)&v12[14] = *(float *)&v12[9] * *(float *)&v12[10] - *(float *)&v12[7] * *(float *)&v12[12];
  *(float *)&v12[15] = *(float *)&v12[7] * *(float *)&v12[11] - *(float *)&v12[8] * *(float *)&v12[10];
  return dword_30076898(61);
}
// 300628EC: using guessed type float flt_300628EC;
// 300705C0: using guessed type int dword_300705C0;
// 300760D0: using guessed type int dword_300760D0[];
// 300760D4: using guessed type int dword_300760D4[];
// 300760D8: using guessed type int dword_300760D8[];
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001CD20) --------------------------------------------------------
float *__usercall sub_3001CD20@<eax>(int a1@<eax>, float *a2@<edi>, float *a3@<esi>, int a4, int a5, float *a6)
{
  char *v6; // eax
  int v7; // ecx
  float *result; // eax
  int v9; // ebp
  double v10; // st7
  double v11; // st6
  float v12; // edx
  float v13; // ecx
  char *v14; // [esp+0h] [ebp-34h]
  int v15; // [esp+0h] [ebp-34h]
  float v16; // [esp+4h] [ebp-30h] BYREF
  float v17; // [esp+8h] [ebp-2Ch]
  float v18; // [esp+Ch] [ebp-28h]
  float v19[2]; // [esp+10h] [ebp-24h] BYREF
  float v20; // [esp+18h] [ebp-1Ch]
  float v21[3]; // [esp+1Ch] [ebp-18h] BYREF
  float v22[3]; // [esp+28h] [ebp-Ch] BYREF

  if ( a6 )
  {
    a6[2] = 0.0;
    a6[1] = 0.0;
    *a6 = 0.0;
  }
  if ( a1 <= 0 || a1 >= 1022 )
  {
    *a3 = *a2;
    result = (float *)*((_DWORD *)a2 + 1);
    *((_DWORD *)a3 + 1) = result;
    a3[2] = a2[2];
  }
  else
  {
    v6 = (char *)&unk_30211940 + 552 * a1;
    v7 = *((_DWORD *)v6 + 1);
    v14 = v6;
    if ( v7 == 5 || v7 == 8 )
    {
      v9 = (int)(v6 + 12);
      sub_30005970(a4, (int)v19, (int)(v6 + 12));
      v15 = (int)(v14 + 48);
      sub_30005970(a4, (int)v22, v15);
      sub_30005970(a5, (int)&v16, v9);
      sub_30005970(a5, (int)v21, v15);
      v10 = v16 - v19[0];
      result = a6;
      v11 = v17 - v19[1];
      v20 = v18 - v20;
      v16 = v21[0] - v22[0];
      v17 = v21[1] - v22[1];
      v18 = v21[2] - v22[2];
      *a3 = v10 + *a2;
      a3[1] = v11 + a2[1];
      a3[2] = v20 + a2[2];
      if ( a6 )
      {
        v12 = v17;
        *a6 = v16;
        v13 = v18;
        a6[1] = v12;
        a6[2] = v13;
      }
    }
    else
    {
      result = *(float **)a2;
      *a3 = *a2;
      a3[1] = a2[1];
      a3[2] = a2[2];
    }
  }
  return result;
}

//----- (3001CE70) --------------------------------------------------------
void sub_3001CE70()
{
  int v0; // eax
  double v1; // st7
  int v2; // [esp+4h] [ebp-4h]

  v0 = *(_DWORD *)(dword_301E5F20 + 8);
  v2 = *(_DWORD *)(dword_301E5F24 + 8) - v0;
  if ( !v2 || (v1 = (double)(dword_3020AF00 - v0) / (double)v2, dword_3020AEF8 = v1, v1 < 0.0) )
    dword_3020AEF8 = 0.0;
}
// 301E5F20: using guessed type int dword_301E5F20;
// 301E5F24: using guessed type int dword_301E5F24;
// 3020AF00: using guessed type int dword_3020AF00;

//----- (3001CED0) --------------------------------------------------------
void __usercall sub_3001CED0(int a1@<ecx>, int a2@<edi>)
{
  int v2; // eax
  int v3; // esi
  int i; // ebp
  int v5; // eax

  if ( a2 >= 0 && a2 < 64 )
  {
    v2 = dword_30076898(151);
    if ( v2 > 0 )
    {
      v3 = 0;
      for ( i = v2; i; --i )
      {
        if ( *(_WORD *)(v3 + a1 + 4) == 1 )
        {
          if ( !_stricmp(*(const char **)(v3 + a1), "anim_gunhand = \"left\"") )
          {
            v5 = 300 * a2;
            dword_3018E080[300 * a2] = 1;
LABEL_10:
            dword_3018E084[v5] = 1;
            goto LABEL_11;
          }
          if ( !_stricmp(*(const char **)(v3 + a1), "anim_gunhand = \"right\"") )
          {
            v5 = 300 * a2;
            dword_3018E080[300 * a2] = 0;
            goto LABEL_10;
          }
        }
LABEL_11:
        v3 += 12;
      }
    }
  }
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018E080: using guessed type int dword_3018E080[];
// 3018E084: using guessed type int dword_3018E084[];

//----- (3001CF80) --------------------------------------------------------
int sub_3001CF80()
{
  int v0; // ebx
  int v1; // esi
  int v2; // ecx
  int v3; // eax
  int v4; // ecx
  int v5; // ebx
  int v6; // edi
  int *v7; // esi
  int result; // eax
  float v9; // [esp+14h] [ebp-10h]
  float v10; // [esp+14h] [ebp-10h]
  float v11; // [esp+14h] [ebp-10h]
  float v12; // [esp+18h] [ebp-Ch] BYREF
  float v13; // [esp+1Ch] [ebp-8h]
  float v14; // [esp+20h] [ebp-4h]

  dword_30076898(149);
  v0 = 0;
  if ( *(int *)(dword_301E5F24 + 8408) > 0 )
  {
    v1 = 0;
    do
    {
      if ( dword_30076898(163) )
      {
        dword_30076898(150);
        sub_3001CED0(v2, *(_DWORD *)(v1 + dword_301E5F24 + 8416));
      }
      ++v0;
      v1 += 240;
    }
    while ( v0 < *(_DWORD *)(dword_301E5F24 + 8408) );
  }
  v9 = (float)(360 * (dword_3020AF00 & 0xFFF));
  flt_30210E48 = 0.0;
  dword_3020D2A0 = 0;
  dword_3020D2A8 = 0;
  dword_3020D2D0 = 0;
  dword_3020D2D8 = 0;
  dword_3020D300 = 0;
  dword_3020D308 = 0;
  flt_3020D2A4 = v9 / 4095.0;
  v10 = (float)(360 * (dword_3020AF00 & 0x7FF));
  flt_3020D2D4 = v10 / 2048.0;
  v11 = (float)(360 * (dword_3020AF00 & 0x3FF));
  flt_3020D304 = v11 / 1024.0;
  sub_3003BEA0((float *)&dword_3020D2A0, flt_3020D2C4, &v12, flt_3020D2AC);
  flt_3020D2B8 = 0.0 - v12;
  flt_3020D2BC = 0.0 - v13;
  flt_3020D2C0 = 0.0 - v14;
  sub_3003BEA0((float *)&dword_3020D2D0, flt_3020D2F4, &v12, flt_3020D2DC);
  flt_3020D2E8 = 0.0 - v12;
  flt_3020D2EC = 0.0 - v13;
  flt_3020D2F0 = 0.0 - v14;
  sub_3003BEA0((float *)&dword_3020D300, flt_3020D324, &v12, flt_3020D30C);
  flt_3020D318 = 0.0 - v12;
  flt_3020D31C = 0.0 - v13;
  flt_3020D320 = 0.0 - v14;
  sub_30005FD0(0, (int)&dword_3020AF14, (int)&unk_3020D0D0);
  qmemcpy(&dword_3020CFE0, &unk_3020D0D0, 0xF0u);
  v3 = dword_301E5F24;
  if ( (*(_DWORD *)(dword_301E5F24 + 24) & 0x30000) != 0 )
  {
    if ( dword_30076898(163) )
    {
      dword_30076898(150);
      sub_3001CED0(v4, *(_DWORD *)(dword_301E5F24 + 184));
    }
    if ( dword_3020CFE4 < 12 )
    {
      sub_3001E490((int)&dword_3020CFE0);
      sub_3001E870(&dword_3020CFE0);
    }
    v3 = dword_301E5F24;
  }
  v5 = 0;
  if ( *(int *)(v3 + 8408) > 0 )
  {
    v6 = 0;
    do
    {
      v7 = (int *)((char *)&unk_30211940 + 552 * *(_DWORD *)(v6 + v3 + 8416));
      if ( v7[1] < 12 )
      {
        sub_3001E490((int)&unk_30211940 + 552 * *(_DWORD *)(v6 + v3 + 8416));
        sub_3001E870(v7);
        v3 = dword_301E5F24;
      }
      ++v5;
      v6 += 240;
    }
    while ( v5 < *(_DWORD *)(v3 + 8408) );
  }
  result = dword_301E5A8C;
  if ( dword_301E5A8C >= 0 && dword_301E5A8C < 1024 && !dword_3029D32C )
  {
    result = dword_30076898(163);
    if ( result )
      result = dword_30076898(153);
  }
  return result;
}
// 3001D003: variable 'v2' is possibly undefined
// 3001D221: variable 'v4' is possibly undefined
// 300628EC: using guessed type float flt_300628EC;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E5A8C: using guessed type int dword_301E5A8C;
// 301E5F24: using guessed type int dword_301E5F24;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020CFE4: using guessed type int dword_3020CFE4;
// 3020D2A0: using guessed type int dword_3020D2A0;
// 3020D2A4: using guessed type float flt_3020D2A4;
// 3020D2A8: using guessed type int dword_3020D2A8;
// 3020D2B8: using guessed type float flt_3020D2B8;
// 3020D2BC: using guessed type float flt_3020D2BC;
// 3020D2C0: using guessed type float flt_3020D2C0;
// 3020D2D0: using guessed type int dword_3020D2D0;
// 3020D2D4: using guessed type float flt_3020D2D4;
// 3020D2D8: using guessed type int dword_3020D2D8;
// 3020D2E8: using guessed type float flt_3020D2E8;
// 3020D2EC: using guessed type float flt_3020D2EC;
// 3020D2F0: using guessed type float flt_3020D2F0;
// 3020D300: using guessed type int dword_3020D300;
// 3020D304: using guessed type float flt_3020D304;
// 3020D308: using guessed type int dword_3020D308;
// 3020D318: using guessed type float flt_3020D318;
// 3020D31C: using guessed type float flt_3020D31C;
// 3020D320: using guessed type float flt_3020D320;
// 30210E48: using guessed type float flt_30210E48;
// 3029D32C: using guessed type int dword_3029D32C;

//----- (3001D320) --------------------------------------------------------
int __usercall sub_3001D320@<eax>(int a1@<ecx>, float *a2@<ebx>, _DWORD *a3)
{
  int v4; // esi
  float v5; // ecx
  float v6; // ecx
  int result; // eax
  int v8[4]; // [esp+14h] [ebp-40h] BYREF
  int v9[4]; // [esp+24h] [ebp-30h] BYREF
  float v10[4]; // [esp+34h] [ebp-20h] BYREF
  float v11[4]; // [esp+44h] [ebp-10h] BYREF
  float v12; // [esp+58h] [ebp+4h]
  float v13; // [esp+58h] [ebp+4h]
  float v14; // [esp+58h] [ebp+4h]

  v4 = 32 * a1 + dword_30076898(159);
  v12 = a2[1] * 0.0087266462;
  v8[0] = 0;
  v8[1] = 0;
  *(float *)&v8[3] = cos(v12);
  *(float *)&v8[2] = sin(v12);
  v5 = *a2;
  v9[0] = 0;
  v13 = v5 * 0.0087266462;
  v9[2] = 0;
  *(float *)&v9[3] = cos(v13);
  *(float *)&v9[1] = sin(v13);
  v6 = a2[2];
  v10[1] = 0.0;
  v14 = v6 * 0.0087266462;
  v10[2] = 0.0;
  v10[3] = cos(v14);
  v10[0] = sin(v14);
  sub_3003D390((float *)v8, v11, (float *)v9);
  sub_3003D390(v11, (float *)v4, v10);
  *(_DWORD *)(v4 + 16) = 0;
  *(_DWORD *)(v4 + 20) = *a3;
  *(_DWORD *)(v4 + 24) = a3[1];
  result = a3[2];
  *(_DWORD *)(v4 + 28) = result;
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001D4F0) --------------------------------------------------------
int __cdecl sub_3001D4F0(int a1)
{
  int v1; // edi

  v1 = dword_30076898(175);
  if ( v1 < 0 )
    return 0;
  sub_3001E780(a1);
  return (v1 << 6) + dword_30076898(158);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001D540) --------------------------------------------------------
int __cdecl sub_3001D540(int a1, int a2)
{
  int v2; // edi
  float *v3; // ebp
  float v5; // ecx
  float v6; // edx
  float v7; // eax
  float v8[3]; // [esp+10h] [ebp-3Ch] BYREF
  float v9[6]; // [esp+1Ch] [ebp-30h] BYREF
  float v10[6]; // [esp+34h] [ebp-18h] BYREF

  v2 = dword_30076898(175);
  if ( v2 < 0 )
    return 0;
  sub_3001E780(a1);
  v3 = (float *)((v2 << 6) + dword_30076898(158));
  if ( !v3 )
    return 0;
  sub_3003BEA0((float *)(a1 + 516), v10, v8, v9);
  v5 = *(float *)(a1 + 504);
  v6 = *(float *)(a1 + 508);
  v7 = *(float *)(a1 + 512);
  v9[3] = 0.0 - v8[0];
  v10[3] = v5;
  v10[4] = v6;
  v10[5] = v7;
  v9[4] = 0.0 - v8[1];
  v9[5] = 0.0 - v8[2];
  sub_3003C7E0(v9, a2, v3);
  return 1;
}
// 300628EC: using guessed type float flt_300628EC;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001D610) --------------------------------------------------------
int __cdecl sub_3001D610(int a1)
{
  int v1; // esi
  int v3; // eax
  int v4[12]; // [esp+14h] [ebp-30h] BYREF

  v1 = dword_30076898(175);
  if ( v1 < 0 )
    return 0;
  if ( !dword_30076898(169) )
  {
    dword_30076898(171);
    dword_30076898(152);
    dword_30076898(172);
  }
  v3 = dword_30076898(158);
  v4[0] = dword_30210978;
  v4[1] = dword_3021097C;
  v4[2] = dword_30210980;
  v4[3] = dword_30210984;
  v4[4] = dword_30210988;
  v4[5] = dword_3021098C;
  v4[6] = dword_30210990;
  v4[7] = dword_30210994;
  v4[8] = dword_30210998;
  v4[9] = dword_3021096C;
  v4[10] = dword_30210970;
  v4[11] = dword_30210974;
  sub_3003C7E0((float *)v4, a1, (float *)((v1 << 6) + v3));
  return 1;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3021096C: using guessed type int dword_3021096C;
// 30210970: using guessed type int dword_30210970;
// 30210974: using guessed type int dword_30210974;
// 30210978: using guessed type int dword_30210978;
// 3021097C: using guessed type int dword_3021097C;
// 30210980: using guessed type int dword_30210980;
// 30210984: using guessed type int dword_30210984;
// 30210988: using guessed type int dword_30210988;
// 3021098C: using guessed type int dword_3021098C;
// 30210990: using guessed type int dword_30210990;
// 30210994: using guessed type int dword_30210994;
// 30210998: using guessed type int dword_30210998;

//----- (3001D770) --------------------------------------------------------
int __cdecl sub_3001D770(int a1)
{
  int v1; // ebx
  void *v3; // esp
  int v4; // eax
  int v5; // esi
  float *v6; // eax
  _DWORD *v8; // edx
  int v9; // ebx
  double v10; // st7
  double v11; // st6
  double v12; // st5
  int v13; // ecx
  _DWORD *v14; // edx
  double v15; // st7
  double v16; // st6
  double v17; // st5
  double v18; // st7
  double v19; // st6
  double v20; // st5
  double v21; // st7
  double v22; // st6
  double v23; // st5
  double v24; // st7
  double v25; // st6
  double v26; // st5
  double v27; // st7
  double v28; // st6
  double v29; // st5
  double v30; // st7
  double v31; // st6
  double v32; // st5
  double v33; // st7
  double v34; // st6
  double v35; // st5
  double v36; // st7
  double v37; // st6
  double v38; // st5
  double v39; // st7
  double v40; // st6
  double v41; // st5
  double v42; // st7
  double v43; // st6
  double v44; // st5
  double v45; // st7
  double v46; // st6
  double v47; // st5
  _DWORD v48[3]; // [esp+0h] [ebp-Ch]

  v1 = dword_30076898(175);
  if ( v1 < 0 )
    return 0;
  v3 = alloca(4 * dword_30076898(174));
  dword_30076898(177);
  v4 = dword_30076898(158);
  v5 = v48[v1];
  v6 = (float *)((v1 << 6) + v4);
  v8 = &unk_30062DF0;
  v9 = 2;
  do
  {
    v10 = *(float *)(v5 + 12 * *v8);
    v11 = *(float *)(v5 + 12 * v8[1] + 4);
    v12 = *(float *)(v5 + 12 * v8[2] + 8);
    v13 = a1 + 24;
    v14 = v8 + 6;
    *(float *)(v13 - 24) = v10 * *v6 + v12 * v6[8] + v11 * v6[4] + v6[12];
    *(float *)(v13 - 20) = v10 * v6[1] + v12 * v6[9] + v11 * v6[5] + v6[13];
    *(float *)(v13 - 16) = v10 * v6[2] + v12 * v6[10] + v11 * v6[6] + v6[14];
    v15 = *(float *)(v5 + 12 * *(v14 - 3));
    v16 = *(float *)(v5 + 12 * *(v14 - 2) + 4);
    v17 = *(float *)(v5 + 12 * *(v14 - 1) + 8);
    *(float *)(v13 - 12) = v15 * *v6 + v17 * v6[8] + v16 * v6[4] + v6[12];
    *(float *)(v13 - 8) = v15 * v6[1] + v17 * v6[9] + v16 * v6[5] + v6[13];
    *(float *)(v13 - 4) = v15 * v6[2] + v17 * v6[10] + v16 * v6[6] + v6[14];
    v18 = *(float *)(v5 + 12 * *v14);
    v19 = *(float *)(v5 + 12 * v14[1] + 4);
    v20 = *(float *)(v5 + 12 * v14[2] + 8);
    v13 += 24;
    v14 += 6;
    *(float *)(v13 - 24) = v18 * *v6 + v20 * v6[8] + v19 * v6[4] + v6[12];
    *(float *)(v13 - 20) = v18 * v6[1] + v20 * v6[9] + v19 * v6[5] + v6[13];
    *(float *)(v13 - 16) = v18 * v6[2] + v20 * v6[10] + v19 * v6[6] + v6[14];
    v21 = *(float *)(v5 + 12 * *(v14 - 3));
    v22 = *(float *)(v5 + 12 * *(v14 - 2) + 4);
    v23 = *(float *)(v5 + 12 * *(v14 - 1) + 8);
    *(float *)(v13 - 12) = v21 * *v6 + v23 * v6[8] + v22 * v6[4] + v6[12];
    *(float *)(v13 - 8) = v21 * v6[1] + v23 * v6[9] + v22 * v6[5] + v6[13];
    *(float *)(v13 - 4) = v21 * v6[2] + v23 * v6[10] + v22 * v6[6] + v6[14];
    v24 = *(float *)(v5 + 12 * *v14);
    v25 = *(float *)(v5 + 12 * v14[1] + 4);
    v26 = *(float *)(v5 + 12 * v14[2] + 8);
    v13 += 24;
    v14 += 6;
    *(float *)(v13 - 24) = v24 * *v6 + v26 * v6[8] + v25 * v6[4] + v6[12];
    *(float *)(v13 - 20) = v24 * v6[1] + v26 * v6[9] + v25 * v6[5] + v6[13];
    *(float *)(v13 - 16) = v24 * v6[2] + v26 * v6[10] + v25 * v6[6] + v6[14];
    v27 = *(float *)(v5 + 12 * *(v14 - 3));
    v28 = *(float *)(v5 + 12 * *(v14 - 2) + 4);
    v29 = *(float *)(v5 + 12 * *(v14 - 1) + 8);
    *(float *)(v13 - 12) = v27 * *v6 + v29 * v6[8] + v28 * v6[4] + v6[12];
    *(float *)(v13 - 8) = v27 * v6[1] + v29 * v6[9] + v28 * v6[5] + v6[13];
    *(float *)(v13 - 4) = v27 * v6[2] + v29 * v6[10] + v28 * v6[6] + v6[14];
    v30 = *(float *)(v5 + 12 * *v14);
    v31 = *(float *)(v5 + 12 * v14[1] + 4);
    v32 = *(float *)(v5 + 12 * v14[2] + 8);
    v13 += 24;
    v14 += 6;
    *(float *)(v13 - 24) = v30 * *v6 + v32 * v6[8] + v31 * v6[4] + v6[12];
    *(float *)(v13 - 20) = v30 * v6[1] + v32 * v6[9] + v31 * v6[5] + v6[13];
    *(float *)(v13 - 16) = v30 * v6[2] + v32 * v6[10] + v31 * v6[6] + v6[14];
    v33 = *(float *)(v5 + 12 * *(v14 - 3));
    v34 = *(float *)(v5 + 12 * *(v14 - 2) + 4);
    v35 = *(float *)(v5 + 12 * *(v14 - 1) + 8);
    *(float *)(v13 - 12) = v33 * *v6 + v35 * v6[8] + v34 * v6[4] + v6[12];
    *(float *)(v13 - 8) = v33 * v6[1] + v35 * v6[9] + v34 * v6[5] + v6[13];
    *(float *)(v13 - 4) = v33 * v6[2] + v35 * v6[10] + v34 * v6[6] + v6[14];
    v36 = *(float *)(v5 + 12 * *v14);
    v37 = *(float *)(v5 + 12 * v14[1] + 4);
    v38 = *(float *)(v5 + 12 * v14[2] + 8);
    v13 += 24;
    v14 += 6;
    *(float *)(v13 - 24) = v36 * *v6 + v38 * v6[8] + v37 * v6[4] + v6[12];
    *(float *)(v13 - 20) = v36 * v6[1] + v38 * v6[9] + v37 * v6[5] + v6[13];
    *(float *)(v13 - 16) = v36 * v6[2] + v38 * v6[10] + v37 * v6[6] + v6[14];
    v39 = *(float *)(v5 + 12 * *(v14 - 3));
    v40 = *(float *)(v5 + 12 * *(v14 - 2) + 4);
    v41 = *(float *)(v5 + 12 * *(v14 - 1) + 8);
    *(float *)(v13 - 12) = v39 * *v6 + v41 * v6[8] + v40 * v6[4] + v6[12];
    *(float *)(v13 - 8) = v39 * v6[1] + v41 * v6[9] + v40 * v6[5] + v6[13];
    *(float *)(v13 - 4) = v39 * v6[2] + v41 * v6[10] + v40 * v6[6] + v6[14];
    v42 = *(float *)(v5 + 12 * *v14);
    v43 = *(float *)(v5 + 12 * v14[1] + 4);
    v44 = *(float *)(v5 + 12 * v14[2] + 8);
    a1 = v13 + 24;
    v8 = v14 + 6;
    --v9;
    *(float *)(a1 - 24) = v42 * *v6 + v44 * v6[8] + v43 * v6[4] + v6[12];
    *(float *)(a1 - 20) = v42 * v6[1] + v44 * v6[9] + v43 * v6[5] + v6[13];
    *(float *)(a1 - 16) = v42 * v6[2] + v44 * v6[10] + v43 * v6[6] + v6[14];
    v45 = *(float *)(v5 + 12 * *(v8 - 3));
    v46 = *(float *)(v5 + 12 * *(v8 - 2) + 4);
    v47 = *(float *)(v5 + 12 * *(v8 - 1) + 8);
    *(float *)(a1 - 12) = v45 * *v6 + v47 * v6[8] + v46 * v6[4] + v6[12];
    *(float *)(a1 - 8) = v45 * v6[1] + v47 * v6[9] + v46 * v6[5] + v6[13];
    *(float *)(a1 - 4) = v45 * v6[2] + v47 * v6[10] + v46 * v6[6] + v6[14];
  }
  while ( v9 );
  return 1;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001E0C0) --------------------------------------------------------
int __usercall sub_3001E0C0@<eax>(int a1@<edi>)
{
  int result; // eax
  int v2; // eax
  int v3; // esi
  bool v4; // sf
  int v5; // esi
  int v6; // ebx
  float v7; // [esp+0h] [ebp-10h]

  result = *(_DWORD *)(a1 + 160);
  if ( result && *(_DWORD *)(a1 + 216) )
  {
    if ( result + 524 < 0 || result + 524 >= 2048 )
      sub_30021A30("CG_ConfigString: bad index: %i", result + 12);
    v2 = dword_30076898(193);
    v3 = *(_DWORD *)(a1 + 216);
    v4 = v3 + 524 < 0;
    v5 = v3 + 524;
    v6 = v2;
    if ( v4 || v5 >= 2048 )
      sub_30021A30("CG_ConfigString: bad index: %i", v5);
    result = dword_30076898(193);
    if ( v6 )
    {
      if ( result )
      {
        v7 = (*(float *)(a1 + 452) - *(float *)(a1 + 212)) * dword_3020AEF8 + *(float *)(a1 + 212);
        result = sub_30032C10(v6, result, LODWORD(v7), *(_DWORD *)a1);
      }
    }
  }
  return result;
}
// 30032C10: using guessed type _DWORD __cdecl sub_30032C10(_DWORD, _DWORD, _DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001E1A0) --------------------------------------------------------
void __usercall sub_3001E1A0(int a1@<eax>)
{
  unsigned __int64 v2; // rax
  int v3; // ecx
  int v4; // eax
  float v5; // [esp+8h] [ebp-18h]
  float v6; // [esp+14h] [ebp-Ch]
  float v7; // [esp+18h] [ebp-8h]
  float v8; // [esp+1Ch] [ebp-4h]

  if ( dword_3020AF00 <= *(_DWORD *)(a1 + 540) )
  {
    *(_DWORD *)(a1 + 540) = dword_3020AF00;
  }
  else
  {
    v2 = (unsigned __int64)*(float *)(a1 + 108);
    if ( dword_3020AF00 - *(_DWORD *)(a1 + 540) < (int)v2 )
      return;
    do
    {
      v3 = v2 + *(_DWORD *)(a1 + 540);
      *(_DWORD *)(a1 + 540) = v3;
    }
    while ( dword_3020AF00 - v3 > (int)v2 );
  }
  v5 = *(float *)(a1 + 104);
  if ( v5 == 0.0
    || (v6 = *(float *)(a1 + 504) - *(float *)&dword_3020AF28,
        v7 = *(float *)(a1 + 508) - *(float *)&dword_3020AF2C,
        v8 = *(float *)(a1 + 512) - *(float *)&dword_3020AF30,
        v5 * v5 > v8 * v8 + v7 * v7 + v6 * v6) )
  {
    v4 = *(_DWORD *)(a1 + 216);
    if ( v4 <= 0 || v4 >= 64 )
    {
      sub_300219D0("ERROR: CG_PlayFx called with invalid effect id %i\n", *(_DWORD *)(a1 + 216));
    }
    else if ( *(float *)(a1 + 92) * *(float *)(a1 + 92)
            + *(float *)(a1 + 96) * *(float *)(a1 + 96)
            + *(float *)(a1 + 100) * *(float *)(a1 + 100) == 0.0 )
    {
      dword_30076898(228);
    }
    else
    {
      dword_30076898(229);
    }
  }
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF28: using guessed type int dword_3020AF28;
// 3020AF2C: using guessed type int dword_3020AF2C;
// 3020AF30: using guessed type int dword_3020AF30;

//----- (3001E310) --------------------------------------------------------
void __usercall sub_3001E310(int a1@<esi>)
{
  double v1; // st7
  int v2; // edx
  float v3; // ecx
  double v4; // st7
  int v5; // edx
  float v6; // [esp+8h] [ebp-1Ch]
  float v7; // [esp+Ch] [ebp-18h] BYREF
  float v8; // [esp+10h] [ebp-14h]
  float v9; // [esp+14h] [ebp-10h]
  float v10; // [esp+18h] [ebp-Ch] BYREF
  float v11; // [esp+1Ch] [ebp-8h]
  float v12; // [esp+20h] [ebp-4h]

  v6 = dword_3020AEF8;
  sub_30005970(*(_DWORD *)(dword_301E5F20 + 8), (int)&v7, a1 + 12);
  sub_30005970(*(_DWORD *)(dword_301E5F24 + 8), (int)&v10, a1 + 252);
  *(float *)(a1 + 504) = (v10 - v7) * v6 + v7;
  *(float *)(a1 + 508) = (v11 - v8) * v6 + v8;
  *(float *)(a1 + 512) = (v12 - v9) * v6 + v9;
  sub_30005970(*(_DWORD *)(dword_301E5F20 + 8), (int)&v7, a1 + 48);
  sub_30005970(*(_DWORD *)(dword_301E5F24 + 8), (int)&v10, a1 + 288);
  *(float *)(a1 + 516) = sub_3003D9B0(v7, v10, v6);
  *(float *)(a1 + 520) = sub_3003D9B0(v8, v11, v6);
  *(float *)(a1 + 524) = sub_3003D9B0(v9, v12, v6);
  if ( *(_DWORD *)(a1 + 244) == 1 )
  {
    v1 = sub_3003D9B0(*(float *)(a1 + 108), *(float *)(a1 + 348), v6);
    *(float *)(v2 + 992) = v1;
    *(_DWORD *)(v2 + 1000) = *(_DWORD *)(a1 + 516);
    *(_DWORD *)(v2 + 1004) = *(_DWORD *)(a1 + 520);
    *(_DWORD *)(v2 + 1008) = *(_DWORD *)(a1 + 524);
    v3 = *(float *)(a1 + 212);
    *(_DWORD *)(a1 + 516) = 0;
    *(_DWORD *)(a1 + 524) = 0;
    v4 = sub_3003D9B0(v3, *(float *)(a1 + 452), v6);
    *(float *)(v5 + 996) = v4;
  }
}
// 3001E430: variable 'v2' is possibly undefined
// 3001E47B: variable 'v5' is possibly undefined
// 301E5F20: using guessed type int dword_301E5F20;
// 301E5F24: using guessed type int dword_301E5F24;

//----- (3001E490) --------------------------------------------------------
void __cdecl sub_3001E490(int a1)
{
  int v1; // eax
  int *v2; // esi
  int v3; // eax
  int *v4; // eax
  int v5; // edx

  v1 = *(_DWORD *)(a1 + 12);
  if ( v1 == 1 || v1 == 3 && *(int *)a1 < 64 )
  {
    sub_3001E310(a1);
    return;
  }
  sub_30005970(dword_3020AF00, a1 + 504, a1 + 12);
  v2 = (int *)(a1 + 516);
  sub_30005970(dword_3020AF00, a1 + 516, a1 + 48);
  v3 = *(_DWORD *)(a1 + 4);
  if ( v3 == 1 )
  {
    v4 = &dword_3018DC8C[300 * *(_DWORD *)(a1 + 144)];
  }
  else
  {
    if ( v3 != 2 )
      goto LABEL_10;
    v4 = (int *)((char *)&unk_301DA064 + 1200 * *(_DWORD *)a1 - 76800);
  }
  v4[248] = *(_DWORD *)(a1 + 108);
  v4[250] = *v2;
  v4[251] = *(_DWORD *)(a1 + 520);
  v4[252] = *(_DWORD *)(a1 + 524);
  v5 = *(_DWORD *)(a1 + 212);
  *(_DWORD *)(a1 + 524) = 0;
  *v2 = 0;
  v4[249] = v5;
LABEL_10:
  if ( (_UNKNOWN *)a1 != &unk_3020CFE0 )
    sub_3001CD20(
      *(_DWORD *)(a1 + 124),
      (float *)(a1 + 504),
      (float *)(a1 + 504),
      *(_DWORD *)(dword_301E5F20 + 8),
      dword_3020AF00,
      0);
}
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;

//----- (3001E5A0) --------------------------------------------------------
int __usercall sub_3001E5A0@<eax>(int a1@<esi>, int a2)
{
  int v2; // ebx
  int v3; // eax
  int v4; // edi

  v2 = dword_30076898(163);
  v3 = dword_30076898(50);
  v4 = v3;
  if ( v2 )
  {
    if ( v3 && dword_3020D3B0[a1] == a2 && dword_3020E3AC[a1] == v3 )
      return v2;
    dword_30076898(166);
    v2 = 0;
    dword_3020D3B0[a1] = 0;
    dword_3020E3AC[a1] = 0;
  }
  if ( !v4 )
    return v2;
  if ( a2 == 11 )
  {
    if ( sub_3001C220() )
      dword_30076898(132);
  }
  dword_30076898(165);
  dword_3020D3B0[a1] = a2;
  dword_3020E3AC[a1] = v4;
  return dword_30076898(163);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001E6E0) --------------------------------------------------------
int __usercall sub_3001E6E0@<eax>(int a1@<eax>, int a2@<ecx>)
{
  int result; // eax

  if ( *(_DWORD *)(a2 + 4) == 1 )
  {
    result = dword_30076898(163);
    if ( dword_3018DC8C[300 * *(_DWORD *)(a2 + 144)] )
      result = sub_300051C0(a2, a1, (int)&dword_3018DC8C[300 * *(_DWORD *)(a2 + 144)]);
  }
  else
  {
    result = *(_DWORD *)(a2 + 4) - 11;
    if ( *(_DWORD *)(a2 + 4) == 11 )
      result = sub_3001C2B0(a2);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];

//----- (3001E740) --------------------------------------------------------
int __usercall sub_3001E740@<eax>(int a1@<esi>, int a2)
{
  int result; // eax

  result = dword_30076898(170);
  if ( !result )
  {
    dword_30076898(152);
    sub_3001E6E0(a1, a2);
    result = dword_30076898(172);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001E780) --------------------------------------------------------
int __cdecl sub_3001E780(int a1)
{
  int result; // eax
  char v2[16]; // [esp+8h] [ebp-10h] BYREF

  result = dword_30076898(169);
  if ( !result )
  {
    dword_30076898(171);
    dword_30076898(152);
    sub_3001E6E0((int)v2, a1);
    result = dword_30076898(172);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001E7E0) --------------------------------------------------------
int __usercall sub_3001E7E0@<eax>(int a1@<edi>)
{
  int result; // eax
  char v2[16]; // [esp+8h] [ebp-10h] BYREF

  dword_30076898(163);
  result = dword_30076898(169);
  if ( !result )
  {
    dword_30076898(171);
    dword_30076898(152);
    if ( a1 < 1024 )
      sub_3001E6E0((int)v2, (int)&unk_30211940 + 552 * a1);
    result = dword_30076898(172);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001E870) --------------------------------------------------------
void __usercall sub_3001E870(int *a1@<eax>)
{
  sub_3001C0C0((int)a1);
  switch ( a1[1] )
  {
    case 0:
      sub_3001BCF0((int)a1);
      break;
    case 1:
      sub_30029580((int)a1);
      break;
    case 2:
      sub_30029770((int)a1);
      break;
    case 3:
      sub_3001BF50(a1);
      break;
    case 4:
      sub_3001C670((int)a1);
      break;
    case 5:
      sub_3001C840((int)a1);
      break;
    case 6:
      sub_3001CBC0(a1);
      break;
    case 7:
      return;
    case 8:
      sub_3001C990((int)a1);
      break;
    case 9:
      sub_3001E0C0((int)a1);
      break;
    case 10:
      sub_3001E1A0((int)a1);
      break;
    case 11:
      sub_3001C560((int)a1);
      break;
    default:
      sub_30021A30("Bad entity type: %i\n", a1[1]);
      break;
  }
}

//----- (3001E940) --------------------------------------------------------
int __cdecl sub_3001E940(int a1)
{
  int v1; // ebx
  int v2; // ebp
  int *v3; // ebx
  char *v4; // edi
  int *v6; // ebp
  char *v7; // edi
  int v9; // eax
  int v10; // ebp
  int v11; // eax
  int v13; // [esp+8h] [ebp-84h]
  int v14; // [esp+Ch] [ebp-80h]
  int v15[4]; // [esp+10h] [ebp-7Ch] BYREF
  int v16[7]; // [esp+20h] [ebp-6Ch] BYREF
  int v17; // [esp+3Ch] [ebp-50h] BYREF
  char Source[35]; // [esp+40h] [ebp-4Ch] BYREF
  char v19; // [esp+63h] [ebp-29h] BYREF
  char Destination[36]; // [esp+64h] [ebp-28h] BYREF
  unsigned int v21; // [esp+88h] [ebp-4h]
  unsigned int retaddr; // [esp+8Ch] [ebp+0h]

  v21 = retaddr ^ dword_300705C0;
  v1 = *(_DWORD *)(a1 + 116);
  v2 = *(_DWORD *)(a1 + 120);
  v16[0] = 1065353216;
  v16[1] = 1065353216;
  v16[2] = 1065353216;
  v16[3] = 1065353216;
  v15[0] = 1065353216;
  v15[1] = 1065353216;
  v15[2] = 1065353216;
  v15[3] = 1065353216;
  v16[4] = 1065353216;
  v16[5] = 1065353216;
  v16[6] = 1065353216;
  v17 = 1065353216;
  v14 = v1;
  v13 = v2;
  if ( v1 < 0 || v1 >= 64 )
    sub_30021A30("CG_Obituary: target out of range");
  v3 = &dword_3018DC8C[300 * v1];
  if ( *v3 )
  {
    strncpy(Destination, (const char *)v3 + 12, 0x1Fu);
    Destination[31] = 0;
    v4 = &v19;
    while ( *++v4 )
      ;
    strcpy(v4, "^7");
    sub_3002BCA0(v15, v3[12]);
    if ( dword_3018DC8C[300 * dword_301E5F04] )
    {
      if ( v2 < 0 || v2 >= 64 )
      {
        v9 = 1022;
        v6 = 0;
        Source[0] = 0;
      }
      else
      {
        v6 = &dword_3018DC8C[300 * v2];
        if ( !*v6 )
          return sub_30052A2E(retaddr ^ v21);
        strncpy(Source, (const char *)v6 + 12, 0x1Fu);
        Source[31] = 0;
        v7 = (char *)&v17 + 3;
        while ( *++v7 )
          ;
        strcpy(v7, "^7");
        sub_3002BCA0(v16, v6[12]);
        if ( v14 == *(_DWORD *)(dword_301E5F20 + 184) )
        {
          strncpy(&byte_3020FDF8, Source, 0x1Fu);
          byte_3020FE17 = 0;
        }
        v9 = v13;
      }
      if ( v9 == v14 )
      {
        Source[0] = 0;
      }
      else if ( v9 == *(_DWORD *)(dword_301E5F20 + 184) )
      {
        v10 = v6[12];
        if ( v10 && v3[12] == v10 )
          v11 = sub_300403F0(aCgameYoukilled_0, Destination, "CGAME_TEAMMATE");
        else
          v11 = sub_300403F0(aCgameYoukilled, Destination);
        sub_30016A70(1, v11, 400.0, 9.6000004);
      }
      dword_30076898(4);
    }
  }
  return sub_30052A2E(retaddr ^ v21);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301E5F04: using guessed type int dword_301E5F04;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020FE17: using guessed type char byte_3020FE17;

//----- (3001ED00) --------------------------------------------------------
int __usercall sub_3001ED00@<eax>(int a1@<eax>)
{
  int result; // eax
  bool v2; // zf

  dword_302106C8 = a1;
  result = 48 * a1;
  v2 = *(int *)((char *)&dword_30078348 + result) == 1;
  dword_302106CC = dword_3020AF00;
  dword_302106D0 = dword_3020AF00;
  if ( v2 )
  {
    result = *(int *)((char *)&dword_3007834C + result);
    if ( !*(_DWORD *)dword_301CF58C )
    {
      dword_302106D4 = dword_3020AF00;
      sub_300403F0("%i", result);
      result = dword_30076898(9);
    }
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30078348: using guessed type int dword_30078348;
// 3007834C: using guessed type int dword_3007834C;
// 3020AF00: using guessed type int dword_3020AF00;
// 302106C8: using guessed type int dword_302106C8;
// 302106CC: using guessed type int dword_302106CC;
// 302106D0: using guessed type int dword_302106D0;
// 302106D4: using guessed type int dword_302106D4;

//----- (3001EDA0) --------------------------------------------------------
int __fastcall sub_3001EDA0(int a1, int a2)
{
  int v2; // eax

  v2 = *(_DWORD *)(a2 + 160);
  if ( v2 <= 0 || v2 >= 64 )
    return sub_300219D0("ERROR: CG_PlayFx called with invalid effect id %i\n", *(_DWORD *)(a2 + 160));
  if ( a1 )
    return dword_30076898(229);
  return dword_30076898(228);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001EE00) --------------------------------------------------------
int __thiscall sub_3001EE00(void *this)
{
  int result; // eax

  if ( (int)this + 844 < 0 || (int)this + 844 >= 2048 )
    sub_30021A30("CG_ConfigString: bad index: %i", (_BYTE)this + 76);
  result = dword_30076898(224);
  if ( result >= 0 )
    result = dword_30076898(230);
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001EE90) --------------------------------------------------------
void __usercall sub_3001EE90(float *a1@<eax>, int a2@<ecx>, int a3@<edi>, int a4)
{
  int v5; // ebx
  double v6; // st7
  unsigned __int64 v7; // rax
  int v8; // eax
  double v9; // st7
  int v10; // ebx
  int v11; // eax
  int v12; // eax
  int v13; // eax
  _BYTE *v14; // eax
  _BYTE *v15; // eax
  int v16; // esi
  int v17; // eax
  _DWORD *v18; // ecx
  int v19; // ecx
  char v20; // al
  int v21; // [esp+Ch] [ebp-14h]
  int v22; // [esp+10h] [ebp-10h]
  int v23[3]; // [esp+14h] [ebp-Ch] BYREF

  if ( !a3 )
  {
    if ( dword_301E3F8C )
      sub_300219D0("CG_EntityEvent:ZERO EVENT\n");
    return;
  }
  v21 = *((_DWORD *)a1 + 40);
  if ( dword_301E3F8C )
  {
    sub_300219D0("ent:%3i  event:%3i ", *(_DWORD *)a1, a3);
    if ( dword_301E3F8C )
      sub_300219D0("CG_EntityEvent:%s\n", off_300793A0[a3]);
  }
  v5 = *((_DWORD *)a1 + 36);
  if ( v5 < 0 || v5 >= 64 )
    v5 = 0;
  if ( a3 < 1 )
    goto LABEL_33;
  if ( a3 < 24 )
  {
    if ( dword_301E4D0C )
      sub_30022EA0();
LABEL_14:
    sub_30022ED0();
    return;
  }
  if ( a3 < 47 || a3 < 70 )
  {
    if ( dword_301E4D0C )
      sub_30022EA0();
    goto LABEL_14;
  }
  if ( a3 < 93 )
  {
    sub_30022EA0();
    sub_30022ED0();
    return;
  }
  if ( a3 < 116 )
  {
    sub_30022EA0();
    if ( v5 == dword_3020AFC0 )
    {
      dword_3020D29C = dword_3020AF00;
      flt_3020D298 = -(double)v21;
    }
    return;
  }
  if ( a3 >= 139 )
  {
LABEL_33:
    switch ( a3 )
    {
      case 139:
      case 144:
      case 145:
      case 164:
      case 189:
      case 194:
      case 198:
      case 199:
      case 200:
        goto LABEL_101;
      case 140:
        if ( v5 != dword_3020AFC0 )
          goto LABEL_42;
        if ( !dword_301DCDEC )
          goto LABEL_44;
        return;
      case 141:
        if ( v5 != dword_3020AFC0 )
          goto LABEL_42;
        if ( !dword_301DCDEC )
          goto LABEL_44;
        return;
      case 142:
        if ( v5 != dword_3020AFC0 )
          goto LABEL_42;
        if ( !dword_301DCDEC )
LABEL_44:
          dword_30076898(10);
        return;
      case 143:
        if ( v5 == dword_3020AFC0 )
        {
          if ( !dword_301E5F08 && !dword_301E54EC && !dword_301E596C )
          {
            v8 = dword_3020AF00 - dword_3020D294;
            if ( dword_3020AF00 - dword_3020D294 >= 100 )
            {
              v9 = 0.0;
            }
            else
            {
              v22 = 100 - v8;
              v9 = (double)(100 - v8) * flt_3020D290 * 0.0099999998 * 0.89999998;
            }
            v22 = v21 - 128;
            flt_3020D290 = (double)(v21 - 128) + v9;
            if ( flt_3020D290 <= 24.0 )
            {
              if ( flt_3020D290 < -16.0 )
                flt_3020D290 = -16.0;
              dword_3020D294 = dword_3020AF00;
            }
            else
            {
              flt_3020D290 = 24.0;
              dword_3020D294 = dword_3020AF00;
            }
          }
        }
        else
        {
LABEL_42:
          sub_30021BD0("Event %s just for client %i was sent to other clients\n", off_300793A0[a3], v5);
        }
        return;
      case 146:
      case 147:
      case 148:
        v10 = *((_DWORD *)a1 + 40);
        if ( v10 >= 1 && v10 < 70 )
        {
          if ( a3 == 146 || a3 == 148 )
            sub_30022EA0();
          if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0x30000) != 0 && *(_DWORD *)a1 == *(_DWORD *)(dword_301E5F20 + 184) )
            sub_3001ED00(v10);
        }
        return;
      case 149:
        if ( !*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * *((_DWORD *)a1 + 50)) + 736) )
          goto LABEL_78;
        goto LABEL_79;
      case 150:
      case 165:
      case 167:
      case 173:
      case 174:
      case 175:
      case 176:
      case 187:
      case 188:
      case 195:
        return;
      case 151:
        v11 = 102 * *((_DWORD *)a1 + 50);
        if ( dword_301AA5C0[v11] )
          goto LABEL_101;
        v12 = dword_301AA5C4[v11];
LABEL_67:
        if ( v12 )
          goto LABEL_101;
        return;
      case 152:
        v13 = 102 * *((_DWORD *)a1 + 50);
        if ( dword_301AA5C4[v13] || dword_301AA5C0[v13] )
          goto LABEL_101;
        return;
      case 153:
        if ( dword_301AA5C8[102 * *((_DWORD *)a1 + 50)] )
          goto LABEL_101;
        return;
      case 154:
        v12 = dword_301AA5CC[102 * *((_DWORD *)a1 + 50)];
        goto LABEL_67;
      case 155:
        v12 = dword_301AA5D0[102 * *((_DWORD *)a1 + 50)];
        goto LABEL_67;
      case 156:
        if ( dword_301AA5D8[102 * *((_DWORD *)a1 + 50)] )
          goto LABEL_101;
        return;
      case 157:
        if ( dword_301AA5D4[102 * *((_DWORD *)a1 + 50)] )
          goto LABEL_101;
        return;
      case 158:
        v12 = dword_301AA5AC[102 * *((_DWORD *)a1 + 50)];
        goto LABEL_67;
      case 159:
      case 160:
      case 161:
      case 168:
        if ( a4 )
          sub_3003A2A0(a1, (int)a1, a3);
        return;
      case 162:
        if ( a4 && dword_301AA5BC[102 * *((_DWORD *)a1 + 50)] )
          goto LABEL_101;
        return;
      case 163:
        if ( a4 )
          sub_3003A160(a3);
        return;
      case 166:
        sub_3003B0C0(*((_DWORD *)a1 + 40), v23);
        sub_30022EA0();
        return;
      case 169:
        if ( a4 )
          goto LABEL_88;
        return;
      case 170:
        if ( a4 )
        {
LABEL_88:
          sub_3003A2A0(a1, (int)a1, a3);
          sub_3003A2A0(a1, (int)a1, a3);
        }
        return;
      case 172:
        sub_30022DE0(*((_DWORD *)a1 + 40) + 524);
        sub_30022ED0();
        return;
      case 177:
        sub_3003B0C0(*((_DWORD *)a1 + 40), v23);
        sub_30022ED0();
        if ( dword_301D9E88[*((_DWORD *)a1 + 34)] )
          dword_30076898(229);
        return;
      case 178:
        sub_3003B0C0(*((_DWORD *)a1 + 40), v23);
        sub_30022ED0();
        if ( dword_301D9EE4[*((_DWORD *)a1 + 34)] )
          dword_30076898(229);
        if ( dword_301AA628[102 * *((_DWORD *)a1 + 50)] )
          dword_30076898(229);
        v14 = (_BYTE *)dword_301AA62C[102 * *((_DWORD *)a1 + 50)];
        if ( v14 && *v14 )
          sub_30022ED0();
        return;
      case 179:
        goto LABEL_113;
      case 180:
        dword_30210774 = 1;
LABEL_113:
        sub_3003B0C0(*((_DWORD *)a1 + 40), v23);
        sub_30022ED0();
        if ( dword_301D9F40[*((_DWORD *)a1 + 34)] )
          dword_30076898(229);
        if ( dword_301AA628[102 * *((_DWORD *)a1 + 50)] )
          dword_30076898(229);
        v15 = (_BYTE *)dword_301AA62C[102 * *((_DWORD *)a1 + 50)];
        if ( v15 && *v15 )
          sub_30022ED0();
        dword_30210774 = 0;
        return;
      case 185:
        sub_30036250(*((_DWORD *)a1 + 55), (int)(a1 + 23), a1 + 6);
        return;
      case 190:
        sub_3001CB00(a2, a1);
        return;
      case 191:
        sub_3001EDA0(0, (int)a1);
        return;
      case 192:
        sub_3003B0C0(*((_DWORD *)a1 + 54), v23);
        sub_3001EDA0((int)v23, (int)a1);
        return;
      case 193:
        sub_3001EE00(*((void **)a1 + 40));
        return;
      case 196:
        if ( dword_301AA5D8[102 * *((_DWORD *)a1 + 50)] )
LABEL_78:
          sub_30022EA0();
LABEL_79:
        if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0x30000) == 0
          || *(_DWORD *)a1 != *(_DWORD *)(dword_301E5F20 + 184)
          || !dword_301E5F20 )
        {
          return;
        }
        v16 = dword_300F0FB4;
        if ( !*(_DWORD *)(dword_3020D238 + 124) )
          goto LABEL_137;
        v17 = 1;
        if ( dword_300F0FB0 < 1 )
          goto LABEL_137;
        break;
      case 197:
        *((_DWORD *)a1 + 125) = dword_3020AF00;
LABEL_101:
        sub_30022EA0();
        return;
      case 201:
        sub_3001E940((int)a1);
        return;
      default:
        sub_30021A30("Unknown event: '%s'", off_300793A0[a3]);
        return;
    }
    while ( 1 )
    {
      if ( ((1 << (v17 & 0x1F)) & dword_3020B220[v17 >> 5]) != 0 )
      {
        v18 = *(_DWORD **)(dword_300F0FB4 + 4 * v17);
        if ( v18[31] )
        {
          if ( v18[30] == *(_DWORD *)(dword_3020D238 + 120) && dword_3020B020[v18[104]] + dword_3020B120[v18[106]] )
            break;
        }
      }
      if ( ++v17 > dword_300F0FB0 )
      {
LABEL_137:
        if ( !sub_300103A0((int)&dword_3020AF14, *(_DWORD *)dword_3020D238, 1) )
        {
LABEL_142:
          sub_30039E80(1, 1);
          return;
        }
        v21 = 1;
        v22 = 2;
        v23[0] = 3;
        v23[1] = 4;
        v23[2] = 5;
        v19 = 0;
        while ( 1 )
        {
          v20 = byte_3020B228[*(&v21 + v19)];
          if ( v20 )
          {
            if ( dword_3020B020[*(_DWORD *)(*(_DWORD *)(v16 + 4 * v20) + 416)]
               + dword_3020B120[*(_DWORD *)(*(_DWORD *)(v16 + 4 * v20) + 424)] )
            {
              break;
            }
          }
          if ( (unsigned int)++v19 >= 5 )
            goto LABEL_142;
        }
        v17 = byte_3020B228[*(&v21 + v19)];
        break;
      }
    }
    sub_300398B0(v17, *(int *)dword_301CF58C);
  }
  else
  {
    sub_30022EA0();
    sub_30022EA0();
    if ( v5 == dword_3020AFC0 )
    {
      v6 = (flt_301A0C08 - flt_301A1248) * ((double)v21 * 0.0099999998) + flt_301A1248;
      if ( v6 > 12.0 )
      {
        v7 = (unsigned __int64)(((v6 - 12.0) * 0.03846154 + 1.0) * 4.0);
        v21 = v7;
        if ( (int)v7 <= 24 )
        {
          if ( (int)v7 <= 0 )
            return;
        }
        else
        {
          v21 = 24;
        }
        dword_3020D29C = dword_3020AF00;
        flt_3020D298 = -(double)v21;
        return;
      }
    }
  }
}
// 3001EF66: conditional instruction was optimized away because of 'edi.4<0'
// 3001EFB1: conditional instruction was optimized away because of 'edi.4<0'
// 3001EFBD: conditional instruction was optimized away because of 'edi.4<0'
// 3001EFFC: conditional instruction was optimized away because of 'edi.4<0'
// 3001F043: conditional instruction was optimized away because of 'edi.4<0'
// 3001F933: variable 'a2' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300793A0: using guessed type char **off_300793A0;
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301A0C08: using guessed type float flt_301A0C08;
// 301A1248: using guessed type float flt_301A1248;
// 301AA5AC: using guessed type int dword_301AA5AC[];
// 301AA5BC: using guessed type int dword_301AA5BC[];
// 301AA5C0: using guessed type int dword_301AA5C0[];
// 301AA5C4: using guessed type int dword_301AA5C4[];
// 301AA5C8: using guessed type int dword_301AA5C8[];
// 301AA5CC: using guessed type int dword_301AA5CC[];
// 301AA5D0: using guessed type int dword_301AA5D0[];
// 301AA5D4: using guessed type int dword_301AA5D4[];
// 301AA5D8: using guessed type int dword_301AA5D8[];
// 301AA628: using guessed type int dword_301AA628[];
// 301AA62C: using guessed type int dword_301AA62C[];
// 301D98E8: using guessed type int dword_301D98E8;
// 301D98EC: using guessed type int dword_301D98EC;
// 301D9C9C: using guessed type int dword_301D9C9C;
// 301D9CA0: using guessed type int dword_301D9CA0;
// 301D9CA4: using guessed type int dword_301D9CA4;
// 301D9CAC: using guessed type int dword_301D9CAC;
// 301D9CB0: using guessed type int dword_301D9CB0;
// 301D9CB4: using guessed type int dword_301D9CB4;
// 301D9CD0: using guessed type int dword_301D9CD0;
// 301D9CD4: using guessed type int dword_301D9CD4;
// 301D9D08: using guessed type int dword_301D9D08;
// 301DCDEC: using guessed type int dword_301DCDEC;
// 301E3F8C: using guessed type int dword_301E3F8C;
// 301E4D0C: using guessed type int dword_301E4D0C;
// 301E54EC: using guessed type int dword_301E54EC;
// 301E596C: using guessed type int dword_301E596C;
// 301E5F08: using guessed type int dword_301E5F08;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020AFC0: using guessed type int dword_3020AFC0;
// 3020B220: using guessed type int dword_3020B220[];
// 3020D238: using guessed type int dword_3020D238;
// 3020D290: using guessed type float flt_3020D290;
// 3020D294: using guessed type int dword_3020D294;
// 3020D298: using guessed type float flt_3020D298;
// 3020D29C: using guessed type int dword_3020D29C;
// 30210774: using guessed type int dword_30210774;

//----- (3001FAA0) --------------------------------------------------------
void __usercall sub_3001FAA0(int a1@<eax>, int a2@<ecx>)
{
  _DWORD *v4; // esi
  int v5[3]; // [esp+Ch] [ebp-18h] BYREF
  int v6[3]; // [esp+18h] [ebp-Ch] BYREF

  if ( a1 )
  {
    v4 = (_DWORD *)(a2 + 240);
    if ( dword_301E3F8C )
      sub_300219D0("ent:%3i  preevent:%3i CG_EntityPreEvent:%s\n", *v4, a1, off_300793A0[a1]);
    switch ( a1 )
    {
      case 159:
      case 160:
      case 161:
        goto LABEL_11;
      case 162:
        if ( dword_301AA5BC[102 * *(_DWORD *)(a2 + 440)] )
          sub_30022EA0();
        break;
      case 163:
        sub_3003A160(a1);
        break;
      case 168:
        sub_30018E60(0.050000001, 100, 1120403456);
LABEL_11:
        sub_3003A2A0(v4, a2, a1);
        break;
      case 169:
      case 170:
        sub_3003A2A0(v4, a2, a1);
        sub_3003A2A0(v4, a2, a1);
        break;
      case 173:
      case 174:
        sub_3003B0C0(*(_DWORD *)(a2 + 400), v6);
        sub_3003B0C0(*(_DWORD *)(a2 + 456), v5);
        sub_3003AD90(a1, (float *)(a2 + 504), *(_DWORD *)(a2 + 376), *(_DWORD *)(a2 + 356));
        break;
      case 175:
      case 176:
        sub_3003AE40((float *)(a2 + 504), *(_DWORD *)(a2 + 376), *(_DWORD *)(a2 + 356));
        break;
      case 195:
        sub_30018E60(*(float *)(a2 + 344), *(_DWORD *)(a2 + 324), *(_DWORD *)(a2 + 348));
        break;
      default:
        return;
    }
  }
  else if ( dword_301E3F8C )
  {
    sub_300219D0("CG_EntityPreEvent:ZERO EVENT\n");
  }
}
// 300793A0: using guessed type char **off_300793A0;
// 301AA5BC: using guessed type int dword_301AA5BC[];
// 301E3F8C: using guessed type int dword_301E3F8C;

//----- (3001FCA0) --------------------------------------------------------
void __usercall sub_3001FCA0(int a1@<esi>)
{
  int v1; // ecx
  int v2; // eax
  int v3; // ecx
  int v4; // ecx
  int v5; // ebp
  unsigned __int8 i; // bl
  int v7; // eax
  int v8; // edi
  int v9; // edx

  if ( *(int *)(a1 + 4) <= 12 )
  {
    v2 = *(_DWORD *)(a1 + 164);
    if ( v2 )
    {
      v3 = *(_DWORD *)(a1 + 488);
      if ( v2 < v3 )
        *(_DWORD *)(a1 + 488) = v3 - 256;
      if ( v2 - *(_DWORD *)(a1 + 488) > 4 )
        *(_DWORD *)(a1 + 488) = v2 - 4;
      if ( *(_DWORD *)(a1 + 488) < v2 )
      {
        sub_3001E490(a1);
        v5 = *(_DWORD *)(a1 + 488);
        for ( i = *(_BYTE *)(a1 + 160); v5 != *(_DWORD *)(a1 + 164); ++v5 )
        {
          v7 = v5 & 3;
          v8 = *(_DWORD *)(a1 + 4 * v7 + 168);
          *(_DWORD *)(a1 + 160) = *(_DWORD *)(a1 + 4 * v7 + 184);
          sub_3001EE90((float *)a1, v4, v8, 0);
        }
        v9 = *(_DWORD *)(a1 + 164);
        *(_DWORD *)(a1 + 160) = i;
        *(_DWORD *)(a1 + 488) = v9;
      }
      else
      {
        *(_DWORD *)(a1 + 488) = v2;
      }
    }
    else
    {
      *(_DWORD *)(a1 + 488) = 0;
    }
  }
  else if ( !*(_DWORD *)(a1 + 488) )
  {
    *(_DWORD *)(a1 + 488) = 1;
    sub_3001E490(a1);
    sub_3001EE90((float *)a1, v1, *(_DWORD *)(a1 + 4) - 12, 0);
  }
}
// 3001FCD4: variable 'v1' is possibly undefined
// 3001FD70: variable 'v4' is possibly undefined

//----- (3001FDA0) --------------------------------------------------------
void __usercall sub_3001FDA0(int a1@<esi>)
{
  int v1; // eax
  int v2; // ecx
  int v3; // edi
  unsigned __int8 i; // bl
  int v5; // ecx
  int v6; // eax

  if ( *(int *)(a1 + 244) <= 12 )
  {
    v1 = *(_DWORD *)(a1 + 404);
    if ( v1 )
    {
      v2 = *(_DWORD *)(a1 + 492);
      if ( v1 < v2 )
        *(_DWORD *)(a1 + 492) = v2 - 256;
      if ( v1 - *(_DWORD *)(a1 + 492) > 4 )
        *(_DWORD *)(a1 + 492) = v1 - 4;
      if ( *(_DWORD *)(a1 + 492) < v1 )
      {
        sub_3001E490(a1);
        v3 = *(_DWORD *)(a1 + 492);
        for ( i = *(_BYTE *)(a1 + 160); v3 != *(_DWORD *)(a1 + 404); ++v3 )
        {
          v5 = v3 & 3;
          v6 = *(_DWORD *)(a1 + 4 * v5 + 408);
          *(_DWORD *)(a1 + 400) = *(_DWORD *)(a1 + 4 * v5 + 424);
          sub_3001FAA0(v6, a1);
        }
        v1 = *(_DWORD *)(a1 + 404);
        *(_DWORD *)(a1 + 160) = i;
      }
      *(_DWORD *)(a1 + 492) = v1;
    }
    else
    {
      *(_DWORD *)(a1 + 492) = 0;
    }
  }
  else if ( !*(_DWORD *)(a1 + 492) )
  {
    *(_DWORD *)(a1 + 492) = 1;
    sub_3001E490(a1);
    sub_3001FAA0(*(_DWORD *)(a1 + 244) - 12, a1);
  }
}

//----- (3001FEA0) --------------------------------------------------------
double __usercall sub_3001FEA0@<st0>(int a1@<esi>)
{
  double result; // st7

  if ( *(float *)(a1 + 44) == 0.0 )
    result = (double)dword_30076898(52);
  else
    result = (double)dword_30076898(58) * *(float *)(a1 + 44);
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3001FF00) --------------------------------------------------------
int __thiscall sub_3001FF00(_DWORD *this)
{
  int result; // eax

  switch ( *this )
  {
    case 4:
      result = this[23] - dword_3020AF00 + 999;
      goto LABEL_6;
    case 5:
    case 7:
    case 9:
      result = dword_3020AF00 - this[23];
      goto LABEL_6;
    case 6:
      result = this[23] - dword_3020AF00 + 99;
      goto LABEL_6;
    case 8:
      result = this[23] - dword_3020AF00;
LABEL_6:
      if ( result < 0 )
        return 0;
      return result;
    default:
      return 0;
  }
}
// 3020AF00: using guessed type int dword_3020AF00;

//----- (3001FF70) --------------------------------------------------------
int __thiscall sub_3001FF70(_DWORD *this)
{
  int v1; // eax
  int v2; // esi
  int v3; // ecx
  int result; // eax
  int v5; // [esp-8h] [ebp-Ch]
  int v6; // [esp-4h] [ebp-8h]

  v1 = sub_3001FF00(this);
  v2 = v1 / 1000 / 3600;
  v3 = v1 / 1000 % 3600;
  v6 = v3 % 60;
  v5 = v3 / 60;
  if ( v2 )
    result = sub_300403F0("%i:%02i:%02i", v2, v5, v6);
  else
    result = sub_300403F0("%i:%02i", v5, v6);
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);

//----- (3001FFF0) --------------------------------------------------------
int __thiscall sub_3001FFF0(_DWORD *this)
{
  int v1; // eax
  int v2; // esi
  int v3; // ecx
  int v4; // edi
  int result; // eax
  int v6; // [esp-8h] [ebp-10h]
  int v7; // [esp-4h] [ebp-Ch]

  v1 = sub_3001FF00(this);
  v2 = v1 / 100 / 36000;
  v3 = v1 / 100 % 36000;
  v4 = v3 / 600;
  v3 %= 600;
  v7 = v3 % 10;
  v6 = v3 / 10;
  if ( v2 )
    result = sub_300403F0("%i:%02i:%02i.%i", v2, v4, v6, v7);
  else
    result = sub_300403F0("%i:%02i.%i", v4, v6, v7);
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);

//----- (300200B0) --------------------------------------------------------
double __usercall sub_300200B0@<st0>(int *a1@<eax>, int a2@<esi>)
{
  double result; // st7
  int v3; // edx
  double v4; // st6
  int v5; // [esp+0h] [ebp-Ch]

  if ( a1[12] )
    result = (double)a1[12];
  else
    result = *(float *)(a2 + 40);
  v3 = a1[18];
  if ( v3 > 0 && dword_3020AF00 - a1[17] < v3 )
  {
    v5 = a1[15];
    if ( v5 )
      v4 = (double)v5;
    else
      v4 = *(float *)(a2 + 40);
    result = 1.0 / (double)a1[18] * (double)(dword_3020AF00 - a1[17]) * (result - v4) + v4;
  }
  return result;
}
// 3020AF00: using guessed type int dword_3020AF00;

//----- (30020120) --------------------------------------------------------
double __usercall sub_30020120@<st0>(int *a1@<eax>, int a2@<esi>)
{
  double result; // st7
  int v3; // edx
  double v4; // st6
  int v5; // [esp+0h] [ebp-Ch]

  if ( a1[13] )
    result = (double)a1[13];
  else
    result = *(float *)(a2 + 40);
  v3 = a1[18];
  if ( v3 > 0 && dword_3020AF00 - a1[17] < v3 )
  {
    v5 = a1[16];
    if ( v5 )
      v4 = (double)v5;
    else
      v4 = *(float *)(a2 + 40);
    result = 1.0 / (double)a1[18] * (double)(dword_3020AF00 - a1[17]) * (result - v4) + v4;
  }
  return result;
}
// 3020AF00: using guessed type int dword_3020AF00;

//----- (300201E0) --------------------------------------------------------
double __usercall sub_300201E0@<st0>(int *a1@<eax>, int a2@<ecx>)
{
  double result; // st7

  switch ( *a1 )
  {
    case 1:
    case 2:
    case 4:
    case 5:
    case 6:
    case 7:
      result = *(float *)(a2 + 40);
      goto LABEL_4;
    case 3:
    case 8:
    case 9:
      result = sub_30020120(a1, a2);
LABEL_4:
      if ( *(_DWORD *)(a2 + 16) )
      {
        if ( result < *(float *)(a2 + 40) )
          result = *(float *)(a2 + 40);
      }
      break;
    default:
      result = 0.0;
      break;
  }
  return result;
}

//----- (30020240) --------------------------------------------------------
double __usercall sub_30020240@<st0>(int *a1@<eax>, int a2@<esi>)
{
  int v2; // edx
  int v3; // ecx
  double result; // st7
  int v5; // eax
  int v6; // eax

  v2 = a1[22];
  if ( v2 <= 0 || (v3 = dword_3020AF00 - a1[21], v3 >= v2) )
    result = (double)a1[1];
  else
    result = (double)(v3 * (a1[1] - a1[19])) * (1.0 / (double)a1[22]) + (double)a1[19];
  v5 = a1[5];
  if ( v5 )
  {
    v6 = v5 - 1;
    if ( v6 )
    {
      if ( v6 == 1 )
        result = result - *(float *)(a2 + 8);
    }
    else
    {
      result = result - *(float *)(a2 + 8) * 0.5;
    }
  }
  return result;
}
// 3020AF00: using guessed type int dword_3020AF00;

//----- (300202B0) --------------------------------------------------------
double __usercall sub_300202B0@<st0>(int *a1@<eax>, int a2@<esi>)
{
  int v2; // edx
  int v3; // ecx
  double result; // st7
  int v5; // eax
  int v6; // eax

  v2 = a1[22];
  if ( v2 <= 0 || (v3 = dword_3020AF00 - a1[21], v3 >= v2) )
    result = (double)a1[2];
  else
    result = (double)(v3 * (a1[2] - a1[20])) * (1.0 / (double)a1[22]) + (double)a1[20];
  v5 = a1[6];
  if ( v5 )
  {
    v6 = v5 - 1;
    if ( v6 )
    {
      if ( v6 == 1 )
        result = result - *(float *)(a2 + 12);
    }
    else
    {
      result = result - *(float *)(a2 + 12) * 0.5;
    }
  }
  return result;
}
// 3020AF00: using guessed type int dword_3020AF00;

//----- (30020320) --------------------------------------------------------
int __usercall sub_30020320@<eax>(int a1@<edx>, int a2@<edi>, int a3)
{
  int result; // eax
  int v4; // ecx
  int i; // esi
  char *v6; // ebx
  char v7; // dl
  int v8; // ebx
  char v9; // dl
  char v10; // dl
  double v11; // st7

  result = 0;
  v4 = 0;
  for ( i = a1 - 1; result < i; ++v4 )
  {
    v6 = (char *)(*(_DWORD *)(a2 + 16) + v4);
    v7 = *v6;
    if ( !*v6 )
      break;
    if ( v7 == 37 && v6[1] == 115 )
    {
      v4 += 2;
      break;
    }
    ++result;
    *(_BYTE *)(v4 + a3) = v7;
  }
  v8 = 0;
  if ( result < i )
  {
    do
    {
      v9 = *(_BYTE *)(v8 + *(_DWORD *)(a2 + 24));
      if ( !v9 )
        break;
      *(_BYTE *)(result + a3) = v9;
      ++result;
      ++v8;
    }
    while ( result < i );
    for ( ; result < i; ++v4 )
    {
      v10 = *(_BYTE *)(v4 + *(_DWORD *)(a2 + 16));
      if ( !v10 )
        break;
      *(_BYTE *)(result + a3) = v10;
      ++result;
    }
  }
  *(_BYTE *)(result + a3) = 0;
  v11 = *(float *)(a2 + 28) + *(float *)(a2 + 20);
  *(_DWORD *)(a2 + 24) = a3;
  *(float *)(a2 + 28) = v11;
  *(_DWORD *)(a2 + 16) = &byte_30063AC4;
  *(_DWORD *)(a2 + 20) = 0;
  return result;
}

//----- (300203B0) --------------------------------------------------------
int __usercall sub_300203B0@<eax>(int a1@<eax>, int a2, int a3)
{
  int v5; // eax
  int v6; // eax
  double v7; // st7
  double v8; // st7
  int v9; // eax
  int v10; // edi
  double v11; // st7
  int v12; // ecx
  double v13; // st7
  int result; // eax
  int v15; // [esp+1Ch] [ebp+4h]

  v5 = *(_DWORD *)(a2 + 16);
  if ( v5 )
  {
    v6 = v5 - 1;
    if ( v6 )
    {
      if ( v6 == 1 )
      {
        *(_DWORD *)(a1 + 32) = 5;
        v7 = *(float *)(a2 + 12) * 0.33333334;
        *(_DWORD *)(a1 + 40) = 1098907648;
        *(_DWORD *)(a1 + 44) = 1090519040;
        *(float *)(a1 + 36) = v7;
      }
    }
    else
    {
      *(_DWORD *)(a1 + 32) = 4;
      v8 = *(float *)(a2 + 12) * 0.33333334;
      *(_DWORD *)(a1 + 40) = 1098907648;
      *(_DWORD *)(a1 + 44) = 1098907648;
      *(float *)(a1 + 36) = v8;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 32) = 0;
    *(float *)(a1 + 36) = *(float *)(a2 + 12) * 0.25;
    v15 = dword_30076898(53);
    *(_DWORD *)(a1 + 44) = 0;
    *(float *)(a1 + 40) = (float)v15;
  }
  v9 = *(_DWORD *)(a2 + 44);
  if ( v9 )
  {
    v10 = v9 + 1244;
    if ( v9 + 1244 < 0 || v10 >= 2048 )
      sub_30021A30("CG_ConfigString: bad index: %i", v9 - 36);
    *(_DWORD *)(a1 + 16) = sub_30023C90((char *)&byte_301D1B20 + dword_301CFB20[v10], "hudelem string");
  }
  else
  {
    *(_DWORD *)(a1 + 16) = &byte_30063AC4;
  }
  switch ( *(_DWORD *)a2 )
  {
    case 1:
      if ( !*(_DWORD *)(a2 + 104) )
        goto LABEL_19;
      *(_DWORD *)(a1 + 24) = sub_30023C40();
      break;
    case 2:
      *(_DWORD *)(a1 + 24) = sub_300403F0("%g", *(float *)(a2 + 100));
      break;
    case 4:
    case 5:
      *(_DWORD *)(a1 + 24) = sub_3001FF70(a2);
      break;
    case 6:
    case 7:
      *(_DWORD *)(a1 + 24) = sub_3001FFF0(a2);
      break;
    default:
LABEL_19:
      *(_DWORD *)(a1 + 24) = &byte_30063AC4;
      break;
  }
  if ( **(_BYTE **)(a1 + 16) && **(_BYTE **)(a1 + 24) )
    sub_30020320(a3);
  if ( **(_BYTE **)(a1 + 16) )
    *(float *)(a1 + 20) = sub_3001FEA0();
  else
    *(_DWORD *)(a1 + 20) = 0;
  if ( **(_BYTE **)(a1 + 24) )
    *(float *)(a1 + 28) = sub_3001FEA0();
  else
    *(_DWORD *)(a1 + 28) = 0;
  switch ( *(_DWORD *)a2 )
  {
    case 1:
    case 2:
    case 4:
    case 5:
    case 6:
    case 7:
      v11 = *(float *)(a1 + 28) + *(float *)(a1 + 20);
      break;
    case 3:
    case 8:
    case 9:
      v11 = sub_300200B0() + *(float *)(a1 + 20);
      break;
    default:
      v11 = 0.0;
      break;
  }
  *(float *)(a1 + 8) = v11;
  *(float *)(a1 + 12) = sub_300201E0(a1);
  *(float *)a1 = sub_30020240();
  *(float *)(a1 + 4) = sub_300202B0();
  v12 = *(_DWORD *)(a2 + 40);
  if ( v12 <= 0 || dword_3020AF00 - *(_DWORD *)(a2 + 36) >= v12 )
  {
    *(float *)(a1 + 48) = (double)*(unsigned __int8 *)(a2 + 28) * 0.0039215689;
    *(float *)(a1 + 52) = (double)*(unsigned __int8 *)(a2 + 29) * 0.0039215689;
    *(float *)(a1 + 56) = (double)*(unsigned __int8 *)(a2 + 30) * 0.0039215689;
    result = *(unsigned __int8 *)(a2 + 31);
    *(float *)(a1 + 60) = (double)result * 0.0039215689;
  }
  else
  {
    v13 = (double)(dword_3020AF00 - *(_DWORD *)(a2 + 36)) / (double)*(int *)(a2 + 40);
    *(float *)(a1 + 48) = ((double)(*(unsigned __int8 *)(a2 + 28) - *(unsigned __int8 *)(a2 + 32)) * v13
                         + (double)*(unsigned __int8 *)(a2 + 32))
                        * 0.0039215689;
    *(float *)(a1 + 52) = ((double)(*(unsigned __int8 *)(a2 + 29) - *(unsigned __int8 *)(a2 + 33)) * v13
                         + (double)*(unsigned __int8 *)(a2 + 33))
                        * 0.0039215689;
    *(float *)(a1 + 56) = ((double)(*(unsigned __int8 *)(a2 + 30) - *(unsigned __int8 *)(a2 + 34)) * v13
                         + (double)*(unsigned __int8 *)(a2 + 34))
                        * 0.0039215689;
    result = *(unsigned __int8 *)(a2 + 35);
    *(float *)(a1 + 60) = ((double)(*(unsigned __int8 *)(a2 + 31) - result) * v13 + (double)result) * 0.0039215689;
  }
  return result;
}
// 3001FEA0: using guessed type double sub_3001FEA0(void);
// 3001FF70: using guessed type int __thiscall sub_3001FF70(_DWORD);
// 3001FFF0: using guessed type int __thiscall sub_3001FFF0(_DWORD);
// 300200B0: using guessed type double sub_300200B0(void);
// 300201E0: using guessed type double __thiscall sub_300201E0(_DWORD);
// 30020240: using guessed type double sub_30020240(void);
// 300202B0: using guessed type double sub_300202B0(void);
// 30020320: using guessed type _DWORD __cdecl sub_30020320(_DWORD);
// 30023C40: using guessed type int sub_30023C40(void);
// 30023C90: using guessed type _DWORD __cdecl sub_30023C90(_DWORD, _DWORD);
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301CFB20: using guessed type int dword_301CFB20[];
// 3020AF00: using guessed type int dword_3020AF00;

//----- (30020720) --------------------------------------------------------
int sub_30020720()
{
  return dword_30076898(54);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300207B0) --------------------------------------------------------
int __fastcall sub_300207B0(float *a1, int *a2)
{
  int v4; // ebp
  char *v5; // edi
  double v7; // st7
  int v8; // ebx
  int v9; // ebx
  float v10; // edi
  float v12; // [esp+8h] [ebp-58h]
  float v13; // [esp+8h] [ebp-58h]
  float v14; // [esp+Ch] [ebp-54h]
  float v15; // [esp+10h] [ebp-50h]
  float v16; // [esp+10h] [ebp-50h]
  float v17; // [esp+10h] [ebp-50h]
  float v18; // [esp+10h] [ebp-50h]
  float v19; // [esp+14h] [ebp-4Ch]
  int v20; // [esp+18h] [ebp-48h] BYREF
  char v21[64]; // [esp+1Ch] [ebp-44h] BYREF
  unsigned int v22; // [esp+5Ch] [ebp-4h]
  unsigned int retaddr; // [esp+60h] [ebp+0h]

  v22 = retaddr ^ dword_300705C0;
  if ( sub_30025F30(a2[14], (int)v21, 0x3Au) )
  {
    sub_30020CA0(0);
    v4 = dword_30076898(88);
    v5 = (char *)&v20 + 3;
    while ( *++v5 )
      ;
    strcpy(v5, "Needle");
    sub_30020CA0(0);
    v20 = dword_30076898(88);
    v15 = (float)sub_3001FF00(a2);
    if ( a2[24] )
    {
      v7 = v15 * 360.0;
      v16 = (float)a2[24];
      v17 = (float)(unsigned __int16)(unsigned __int64)(v7 / v16 * 182.04445);
    }
    else
    {
      v17 = (float)(unsigned __int16)(unsigned __int64)(v15 * 1.0922667);
    }
    v18 = v17 * 0.0054931641;
    v19 = sub_300200B0(a2, (int)a1);
    v14 = sub_30020120(a2, (int)a1);
    v8 = a2[6];
    if ( v8 )
    {
      v9 = v8 - 1;
      if ( v9 )
      {
        if ( v9 == 1 )
        {
          v12 = a1[3] + a1[1] - v14;
          v10 = v12;
        }
        else
        {
          v10 = 0.0;
        }
      }
      else
      {
        v13 = (a1[3] - v14) * 0.5 + a1[1];
        v10 = v13;
      }
    }
    else
    {
      v10 = a1[1];
    }
    dword_30076898(72);
    sub_3001A4A0(*a1, v10, v19, v14, v4);
    sub_3001A500(*a1, v10, v19, v14, v18);
    dword_30076898(72);
  }
  return sub_30052A2E(retaddr ^ v22);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30020980) --------------------------------------------------------
int __fastcall sub_30020980(float *a1, int *a2)
{
  int v4; // ebx
  int v5; // edi
  int v6; // edi
  float v8; // [esp+8h] [ebp-50h]
  float v9; // [esp+Ch] [ebp-4Ch]
  float v10; // [esp+10h] [ebp-48h]
  char v11[64]; // [esp+14h] [ebp-44h] BYREF
  unsigned int v12; // [esp+54h] [ebp-4h]
  unsigned int retaddr; // [esp+58h] [ebp+0h]

  v12 = retaddr ^ dword_300705C0;
  if ( sub_30025F30(a2[14], (int)v11, 0x40u) )
  {
    v4 = sub_300322A0();
    v10 = sub_300200B0(a2, (int)a1);
    v9 = sub_30020120(a2, (int)a1);
    v5 = a2[6];
    if ( v5 )
    {
      v6 = v5 - 1;
      if ( v6 )
      {
        if ( v6 == 1 )
          v8 = a1[3] + a1[1] - v9;
        else
          v8 = 0.0;
      }
      else
      {
        v8 = (a1[3] - v9) * 0.5 + a1[1];
      }
    }
    else
    {
      v8 = a1[1];
    }
    dword_30076898(72);
    sub_3001A4A0(*a1, v8, v10, v9, v4);
    dword_30076898(72);
  }
  return sub_30052A2E(retaddr ^ v12);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30020A70) --------------------------------------------------------
int __usercall sub_30020A70@<eax>(int *a1@<esi>)
{
  int result; // eax
  float v2[16]; // [esp+0h] [ebp-2044h] BYREF
  char v3[8192]; // [esp+40h] [ebp-2004h] BYREF
  unsigned int v4; // [esp+2040h] [ebp-4h]
  unsigned int retaddr; // [esp+2044h] [ebp+0h]

  v4 = retaddr ^ dword_300705C0;
  sub_300203B0((int)v2, (int)a1, (int)v3);
  if ( *(_BYTE *)LODWORD(v2[4]) )
  {
    sub_30020720();
    v2[0] = v2[0] + v2[5];
  }
  switch ( *a1 )
  {
    case 1:
    case 2:
    case 4:
    case 5:
    case 6:
    case 7:
      if ( !*(_BYTE *)LODWORD(v2[6]) )
        goto LABEL_8;
      sub_30020720();
      result = sub_30052A2E(retaddr ^ v4);
      break;
    case 3:
      sub_30020980(v2, a1);
      goto LABEL_8;
    case 8:
    case 9:
      sub_300207B0(v2, a1);
      result = sub_30052A2E(retaddr ^ v4);
      break;
    default:
LABEL_8:
      result = sub_30052A2E(retaddr ^ v4);
      break;
  }
  return result;
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;

//----- (30020BB0) --------------------------------------------------------
unsigned int __fastcall sub_30020BB0(int a1, unsigned int a2)
{
  int v2; // edi
  unsigned int v3; // esi
  int v4; // ecx
  _DWORD *v5; // eax
  int v6; // ecx
  _DWORD *v7; // eax

  v2 = dword_301E5F20 + 12;
  v3 = 0;
  v4 = 0;
  v5 = (_DWORD *)(dword_301E5F20 + 4932);
  do
  {
    if ( !*v5 )
      break;
    *(_DWORD *)(a2 + 4 * v3++) = v5;
    ++v4;
    v5 += 28;
  }
  while ( v4 < 31 );
  v6 = 0;
  v7 = (_DWORD *)(v2 + 1448);
  do
  {
    if ( !*v7 )
      break;
    *(_DWORD *)(a2 + 4 * v3++) = v7;
    ++v6;
    v7 += 28;
  }
  while ( v6 < 31 );
  sub_3004D690(a2, v3, 4, (int (__cdecl *)(unsigned int, _BYTE *))sub_30020B70);
  return v3;
}
// 30020B70: using guessed type int sub_30020B70();
// 301E5F20: using guessed type int dword_301E5F20;

//----- (30020C10) --------------------------------------------------------
int __thiscall sub_30020C10(void *this)
{
  int result; // eax
  int v2; // ebx
  int v3; // edi
  int v4[62]; // [esp+4h] [ebp-F8h] BYREF

  result = sub_30020BB0((int)this, (unsigned int)v4);
  v2 = result;
  if ( result )
  {
    v3 = 0;
    if ( result > 0 )
    {
      do
        result = sub_30020A70((int *)v4[v3++]);
      while ( v3 < v2 );
    }
  }
  return result;
}

//----- (30020CA0) --------------------------------------------------------
int __cdecl sub_30020CA0(int a1)
{
  const char *v1; // eax
  const char *v2; // eax
  char v3; // al
  const char *v4; // edi
  int *v5; // esi
  char String[64]; // [esp+44h] [ebp-444h] BYREF
  char v8; // [esp+84h] [ebp-404h] BYREF
  unsigned int v9; // [esp+484h] [ebp-4h]
  unsigned int retaddr; // [esp+488h] [ebp+0h]

  v9 = retaddr ^ dword_300705C0;
  if ( dword_301E5F20 && !a1 || dword_300F0FA0 )
    return sub_30052A2E(retaddr ^ v9);
  dword_300F0FA0 = 1;
  if ( a1 )
  {
    if ( !dword_301AA3CC )
    {
      dword_30076898(9);
      sub_3002F3A0();
      sub_3002F3A0();
      dword_30076898(9);
      dword_30076898(125);
      dword_30076898(212);
      dword_30076898(9);
    }
  }
  else
  {
    if ( byte_301DD4B0 )
      dword_30076898(9);
    if ( byte_301E5730 )
      dword_30076898(9);
    if ( dword_301AA3CC )
      dword_30076898(9);
  }
  if ( a1 )
  {
    dword_30076898(11);
    v1 = &v8;
LABEL_16:
    if ( *v1 )
    {
      sub_300403F0("levelshots/%s.tga", v1);
      sub_30020CA0(0);
      if ( dword_30076898(88) )
        goto LABEL_19;
    }
    goto LABEL_18;
  }
  v1 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]], "mapname");
  if ( v1 )
    goto LABEL_16;
LABEL_18:
  sub_30020CA0(0);
  dword_30076898(88);
LABEL_19:
  dword_30076898(72);
  sub_30032820();
  if ( a1 )
  {
    v2 = (const char *)dword_30076898(127);
    sub_30023B20("cgame", v2);
    dword_30076898(52);
    sub_30032560();
    dword_30076898(126);
    dword_30076898(52);
    sub_30032560();
    v3 = dword_30076898(6);
    switch ( (v3 / -18) & 3 )
    {
      case 1:
        v4 = ".";
        break;
      case 2:
        v4 = "..";
        break;
      case 3:
        v4 = "...";
        break;
      default:
        v4 = &byte_30063AC4;
        break;
    }
    v5 = sub_30023B20("cgame", "CGAME_WAITINGFORSERVERLOAD");
    dword_30076898(52);
    sub_300403F0("%s%s", (const char *)v5, v4);
    sub_30032560();
  }
  else
  {
    dword_30076898(11);
    if ( j__atol(String) > 0 )
    {
      dword_30076898(63);
      sub_3001A260();
    }
  }
  dword_30076898(25);
  --dword_300F0FA0;
  return sub_30052A2E(retaddr ^ v9);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FA0: using guessed type int dword_300F0FA0;
// 301AA3CC: using guessed type int dword_301AA3CC;
// 301CFB20: using guessed type int dword_301CFB20[];
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301DD4B0: using guessed type char byte_301DD4B0;
// 301E5730: using guessed type char byte_301E5730;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (30021160) --------------------------------------------------------
_DWORD *sub_30021160()
{
  _DWORD *result; // eax

  memset(&unk_301A2700, 0, 0x7600u);
  dword_301A9D24 = (int)&dword_301A9D20;
  dword_301A9D20 = (int)&dword_301A9D20;
  dword_301A9D00 = (int)&unk_301A2700;
  result = &unk_301A2704;
  do
  {
    *result = result + 58;
    result += 59;
  }
  while ( (int)result < (int)&unk_301A9C18 );
  dword_300F0F9C = 0;
  return result;
}
// 300F0F9C: using guessed type int dword_300F0F9C;
// 301A9D00: using guessed type int dword_301A9D00;
// 301A9D20: using guessed type int dword_301A9D20;
// 301A9D24: using guessed type int dword_301A9D24;

//----- (300211F0) --------------------------------------------------------
_DWORD *sub_300211F0()
{
  _DWORD *v0; // edx
  _DWORD *v1; // esi
  int v2; // ecx

  v0 = (_DWORD *)dword_301A9D00;
  if ( !dword_301A9D00 )
  {
    v1 = (_DWORD *)dword_301A9D20;
    if ( !*(_DWORD *)dword_301A9D20 )
    {
      sub_30021A30("CG_FreeLocalEntity: not active");
      v0 = (_DWORD *)dword_301A9D00;
    }
    v2 = v1[1];
    --dword_300F0F9C;
    *(_DWORD *)(*v1 + 4) = v2;
    *(_DWORD *)v1[1] = *v1;
    v1[1] = v0;
    v0 = v1;
  }
  ++dword_300F0F9C;
  dword_301A9D00 = v0[1];
  memset(v0, 0, 0xECu);
  v0[1] = dword_301A9D24;
  *v0 = &dword_301A9D20;
  *(_DWORD *)dword_301A9D24 = v0;
  dword_301A9D24 = (int)v0;
  return v0;
}
// 300F0F9C: using guessed type int dword_300F0F9C;
// 301A9D00: using guessed type int dword_301A9D00;
// 301A9D20: using guessed type int dword_301A9D20;
// 301A9D24: using guessed type int dword_301A9D24;

//----- (30021280) --------------------------------------------------------
int __usercall sub_30021280@<eax>(int a1@<eax>)
{
  float v3[3]; // [esp+Ch] [ebp-24h] BYREF
  float v4[3]; // [esp+18h] [ebp-18h] BYREF
  float v5[3]; // [esp+24h] [ebp-Ch] BYREF

  sub_30005970(dword_3020AF00, (int)v3, a1 + 24);
  sub_3003B600((float *)(a1 + 48), v4);
  v5[0] = flt_3029D8C8 * v4[0] + v3[0];
  v5[1] = flt_3029D8C8 * v4[1] + v3[1];
  v5[2] = flt_3029D8C8 * v4[2] + v3[2];
  return sub_3003A810(v3, v5);
}
// 3020AF00: using guessed type int dword_3020AF00;
// 3029D8C8: using guessed type float flt_3029D8C8;

//----- (30021300) --------------------------------------------------------
int __usercall sub_30021300@<eax>(int a1@<esi>)
{
  double v1; // st7

  v1 = (double)(*(_DWORD *)(a1 + 16) - dword_3020AF00) * *(float *)(a1 + 20) * 255.0;
  *(_BYTE *)(a1 + 188) = (unsigned __int64)(v1 * *(float *)(a1 + 60));
  *(_BYTE *)(a1 + 189) = (unsigned __int64)(v1 * *(float *)(a1 + 64));
  *(_BYTE *)(a1 + 190) = (unsigned __int64)(v1 * *(float *)(a1 + 68));
  *(_BYTE *)(a1 + 191) = (unsigned __int64)(v1 * *(float *)(a1 + 72));
  return dword_30076898(61);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;

//----- (30021370) --------------------------------------------------------
_DWORD *__usercall sub_30021370@<eax>(int a1@<esi>)
{
  double v1; // st7
  double v2; // st6
  double v3; // st5
  double v4; // st3
  int v5; // eax
  int v6; // ecx
  int v7; // edx
  _DWORD *result; // eax

  v1 = (double)(*(_DWORD *)(a1 + 16) - dword_3020AF00) * *(float *)(a1 + 20);
  *(_BYTE *)(a1 + 191) = (unsigned __int64)(v1 * *(float *)(a1 + 72) * 255.0);
  if ( (*(_BYTE *)(a1 + 12) & 1) == 0 )
    *(float *)(a1 + 204) = (1.0 - v1) * *(float *)(a1 + 76) + 8.0;
  v2 = *(float *)(a1 + 152) - flt_3020D34C;
  v3 = *(float *)(a1 + 156) - flt_3020D350;
  v4 = *(float *)(a1 + 148) - flt_3020D348;
  if ( sqrt(v3 * v3 + v2 * v2 + v4 * v4) >= *(float *)(a1 + 76) )
    return (_DWORD *)dword_30076898(61);
  if ( !*(_DWORD *)a1 )
    sub_30021A30("CG_FreeLocalEntity: not active");
  v5 = dword_300F0F9C;
  *(_DWORD *)(*(_DWORD *)a1 + 4) = *(_DWORD *)(a1 + 4);
  v6 = *(_DWORD *)a1;
  v7 = dword_301A9D00;
  dword_300F0F9C = v5 - 1;
  result = *(_DWORD **)(a1 + 4);
  *result = v6;
  *(_DWORD *)(a1 + 4) = v7;
  dword_301A9D00 = a1;
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0F9C: using guessed type int dword_300F0F9C;
// 301A9D00: using guessed type int dword_301A9D00;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;

//----- (30021450) --------------------------------------------------------
void sub_30021450()
{
  int *v0; // esi
  int *v1; // edi
  int v2; // eax
  int *v3; // ecx
  int v4; // edx
  int v5; // eax
  int v6; // eax

  v0 = (int *)dword_301A9D20;
  if ( (int *)dword_301A9D20 != &dword_301A9D20 )
  {
    do
    {
      v1 = (int *)*v0;
      if ( dword_3020AF00 < v0[4] )
      {
        v5 = v0[2];
        if ( v5 )
        {
          v6 = v5 - 1;
          if ( v6 )
          {
            if ( v6 == 1 )
              sub_30021280((int)v0);
            else
              sub_30021A30("Bad leType: %i", v0[2]);
          }
          else
          {
            sub_30021370((int)v0);
          }
        }
        else
        {
          sub_30021300((int)v0);
        }
      }
      else
      {
        if ( !v1 )
          sub_30021A30("CG_FreeLocalEntity: not active");
        v2 = dword_300F0F9C;
        *(_DWORD *)(*v0 + 4) = v0[1];
        v3 = (int *)*v0;
        v4 = dword_301A9D00;
        dword_300F0F9C = v2 - 1;
        *(_DWORD *)v0[1] = v3;
        v0[1] = v4;
        dword_301A9D00 = (int)v0;
      }
      v0 = v1;
    }
    while ( v1 != &dword_301A9D20 );
  }
}
// 300F0F9C: using guessed type int dword_300F0F9C;
// 301A9D00: using guessed type int dword_301A9D00;
// 301A9D20: using guessed type int dword_301A9D20;
// 3020AF00: using guessed type int dword_3020AF00;

//----- (30021500) --------------------------------------------------------
float *__usercall sub_30021500@<eax>(float *result@<eax>, _DWORD *a2@<edx>, int a3@<ecx>)
{
  char *v3; // ecx

  if ( a3 >= 0 )
  {
    if ( a3 >= 1024 )
    {
      if ( a3 - 1024 < 64 )
      {
        *a2 = dword_3021096C;
        a2[1] = dword_30210970;
        a2[2] = dword_30210974;
        *(_DWORD *)result = dword_30210978;
        *((_DWORD *)result + 1) = dword_3021097C;
        *((_DWORD *)result + 2) = dword_30210980;
        *((_DWORD *)result + 3) = dword_30210984;
        *((_DWORD *)result + 4) = dword_30210988;
        *((_DWORD *)result + 5) = dword_3021098C;
        *((_DWORD *)result + 6) = dword_30210990;
        *((_DWORD *)result + 7) = dword_30210994;
        *((_DWORD *)result + 8) = dword_30210998;
      }
    }
    else
    {
      v3 = (char *)&unk_30211940 + 552 * a3;
      *a2 = *((_DWORD *)v3 + 126);
      a2[1] = *((_DWORD *)v3 + 127);
      a2[2] = *((_DWORD *)v3 + 128);
      result = sub_3003DE80(result, (float *)v3 + 129);
    }
  }
  return result;
}
// 30021545: conditional instruction was optimized away because of 'ecx.4<0'
// 3021096C: using guessed type int dword_3021096C;
// 30210970: using guessed type int dword_30210970;
// 30210974: using guessed type int dword_30210974;
// 30210978: using guessed type int dword_30210978;
// 3021097C: using guessed type int dword_3021097C;
// 30210980: using guessed type int dword_30210980;
// 30210984: using guessed type int dword_30210984;
// 30210988: using guessed type int dword_30210988;
// 3021098C: using guessed type int dword_3021098C;
// 30210990: using guessed type int dword_30210990;
// 30210994: using guessed type int dword_30210994;
// 30210998: using guessed type int dword_30210998;

//----- (300215C0) --------------------------------------------------------
float *__usercall sub_300215C0@<eax>(int a1@<eax>, float *a2@<edx>, _DWORD *a3@<ecx>)
{
  int v3; // eax
  float *result; // eax
  float v6[3]; // [esp+Ch] [ebp-Ch] BYREF

  v3 = 138 * a1;
  *a3 = dword_30211B38[v3];
  a3[1] = dword_30211B3C[v3];
  a3[2] = dword_30211B40[v3];
  result = sub_3003BEA0((float *)((char *)&unk_30211B44 + v3 * 4), a2 + 6, v6, a2);
  a2[3] = 0.0 - v6[0];
  a2[4] = 0.0 - v6[1];
  a2[5] = 0.0 - v6[2];
  return result;
}
// 300628EC: using guessed type float flt_300628EC;
// 30211B38: using guessed type int dword_30211B38[];
// 30211B3C: using guessed type int dword_30211B3C[];
// 30211B40: using guessed type int dword_30211B40[];

//----- (30021650) --------------------------------------------------------
int __cdecl vmMain(int ArgList, int a2, int a3, int a4, float a5, float a6, float a7, float a8, float a9, int a10, float a11, int a12, int a13)
{
  int result; // eax
  int v14; // [esp+28h] [ebp-4h]

  v14 = 0;
  switch ( ArgList )
  {
    case 0:
      result = 2;
      break;
    case 1:
      sub_30024330(a2, a3, a4);
      result = 0;
      break;
    case 2:
      sub_30024790();
      result = 0;
      break;
    case 3:
      result = sub_30015320();
      break;
    case 4:
      sub_30035180(a4, SLODWORD(a7), a2, *(float *)&a3, SLODWORD(a5), SLODWORD(a6));
      result = 0;
      break;
    case 5:
      result = sub_300219B0();
      break;
    case 6:
    case 9:
      goto LABEL_20;
    case 7:
      result = sub_300284F0(a2, a3);
      break;
    case 8:
      dword_301B1298 = dword_301D95EC;
      result = 0;
      dword_301B1294 = dword_301D95E8;
      break;
    case 10:
      result = dword_301D6084[a2];
      break;
    case 11:
      sub_3001E740(a4, a2);
      result = 0;
      break;
    case 12:
      sub_3001E7E0(a2);
      result = 0;
      break;
    case 13:
      sub_30021500((float *)a4, (_DWORD *)a3, a2);
      result = 0;
      break;
    case 14:
      sub_300215C0(a2, (float *)a4, (_DWORD *)a3);
      result = 0;
      break;
    case 15:
      sub_30024900(a2, a3, a5, a6, a7, a8, a9, a10, a11, a12, a13);
      result = 0;
      break;
    case 16:
      sub_3001A810();
      result = 0;
      break;
    case 17:
      result = (int)sub_30041780((const void *)a2);
      break;
    case 18:
    case 19:
      result = 0;
      break;
    default:
      sub_30021A30("vmMain: unknown command %i", ArgList);
      v14 = -1;
LABEL_20:
      result = v14;
      break;
  }
  return result;
}
// 301B1294: using guessed type int dword_301B1294;
// 301B1298: using guessed type int dword_301B1298;
// 301D6084: using guessed type int dword_301D6084[];
// 301D95E8: using guessed type int dword_301D95E8;
// 301D95EC: using guessed type int dword_301D95EC;

//----- (300218C0) --------------------------------------------------------
int sub_300218C0()
{
  char **v0; // esi
  int v1; // edi
  char String[1024]; // [esp+8h] [ebp-404h] BYREF
  unsigned int v4; // [esp+408h] [ebp-4h]
  unsigned int retaddr; // [esp+40Ch] [ebp+0h]

  v4 = retaddr ^ dword_300705C0;
  v0 = &off_300769A8;
  v1 = 173;
  do
  {
    dword_30076898(7);
    v0 += 4;
    --v1;
  }
  while ( v1 );
  dword_30076898(11);
  dword_301D5A58 = j__atol(String);
  dword_30076898(9);
  dword_30076898(9);
  dword_30076898(9);
  return sub_30052A2E(retaddr ^ v4);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300769A8: using guessed type char *off_300769A8;
// 301D5A58: using guessed type int dword_301D5A58;

//----- (300219B0) --------------------------------------------------------
int sub_300219B0()
{
  int result; // eax

  if ( dword_3020AF00 <= dword_30210680 + 1000 )
    result = dword_3021067C;
  else
    result = -1;
  return result;
}
// 3020AF00: using guessed type int dword_3020AF00;
// 3021067C: using guessed type int dword_3021067C;
// 30210680: using guessed type int dword_30210680;

//----- (300219D0) --------------------------------------------------------
int sub_300219D0(char *Format, ...)
{
  char Buffer[1024]; // [esp+0h] [ebp-404h] BYREF
  unsigned int v3; // [esp+400h] [ebp-4h]
  unsigned int retaddr; // [esp+404h] [ebp+0h]
  va_list va; // [esp+40Ch] [ebp+8h] BYREF

  va_start(va, Format);
  v3 = retaddr ^ dword_300705C0;
  vsprintf(Buffer, Format, va);
  dword_30076898(0);
  return sub_30052A2E(retaddr ^ v3);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30021A30) --------------------------------------------------------
int sub_30021A30(char *Format, ...)
{
  char Buffer[1024]; // [esp+0h] [ebp-404h] BYREF
  unsigned int v3; // [esp+400h] [ebp-4h]
  unsigned int retaddr; // [esp+404h] [ebp+0h]
  va_list va; // [esp+40Ch] [ebp+8h] BYREF

  va_start(va, Format);
  v3 = retaddr ^ dword_300705C0;
  vsprintf(Buffer, Format, va);
  dword_30076898(1);
  return sub_30052A2E(retaddr ^ v3);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30021A90) --------------------------------------------------------
int sub_30021A90()
{
  return dword_30076898(2);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30021AB0) --------------------------------------------------------
int sub_30021AB0()
{
  return dword_30076898(3);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30021B10) --------------------------------------------------------
int sub_30021B10(int a1, char *Format, ...)
{
  char Buffer[1024]; // [esp+0h] [ebp-404h] BYREF
  unsigned int v4; // [esp+400h] [ebp-4h]
  unsigned int retaddr; // [esp+404h] [ebp+0h]
  va_list va; // [esp+410h] [ebp+Ch] BYREF

  va_start(va, Format);
  v4 = retaddr ^ dword_300705C0;
  vsprintf(Buffer, Format, va);
  sub_30021A30("%s", Buffer);
  return sub_30052A2E(retaddr ^ v4);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;

//----- (30021B70) --------------------------------------------------------
int Com_Printf(char *Format, ...)
{
  char Buffer[1024]; // [esp+0h] [ebp-404h] BYREF
  unsigned int v3; // [esp+400h] [ebp-4h]
  unsigned int retaddr; // [esp+404h] [ebp+0h]
  va_list va; // [esp+40Ch] [ebp+8h] BYREF

  va_start(va, Format);
  v3 = retaddr ^ dword_300705C0;
  vsprintf(Buffer, Format, va);
  sub_300219D0("%s", Buffer);
  return sub_30052A2E(retaddr ^ v3);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;

//----- (30021BD0) --------------------------------------------------------
int sub_30021BD0(char *Format, ...)
{
  char Buffer[1024]; // [esp+0h] [ebp-404h] BYREF
  unsigned int v3; // [esp+400h] [ebp-4h]
  unsigned int retaddr; // [esp+404h] [ebp+0h]
  va_list va; // [esp+40Ch] [ebp+8h] BYREF

  va_start(va, Format);
  v3 = retaddr ^ dword_300705C0;
  if ( dword_3029CB4C )
  {
    vsprintf(Buffer, Format, va);
    sub_300219D0("%s", Buffer);
  }
  return sub_30052A2E(retaddr ^ v3);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 3029CB4C: using guessed type int dword_3029CB4C;

//----- (30021C40) --------------------------------------------------------
char *sub_30021C40()
{
  dword_30076898(13);
  return &byte_30096790;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30021C60) --------------------------------------------------------
int __usercall sub_30021C60@<eax>(const char *a1@<ebx>, int a2@<edi>)
{
  int i; // esi
  const char *v3; // eax
  char Buffer[256]; // [esp+4h] [ebp-104h] BYREF
  unsigned int v6; // [esp+104h] [ebp-4h]
  unsigned int retaddr; // [esp+108h] [ebp+0h]

  v6 = retaddr ^ dword_300705C0;
  for ( i = 0; i < 23; ++i )
  {
    v3 = (const char *)dword_30076898(198);
    sprintf(Buffer, "%s_%s", a1, v3);
    *(_DWORD *)(a2 + 4 * i) = dword_30076898(192);
  }
  return sub_30052A2E(retaddr ^ v6);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30021CE0) --------------------------------------------------------
int sub_30021CE0()
{
  int v0; // esi
  int v1; // eax
  int result; // eax

  v0 = dword_30076898(89);
  sub_3002E110("mp/axis_chat.voice", (int)&unk_302FBC60, 64);
  sub_3002E110("mp/allies_chat.voice", (int)&unk_30344DA8, 64);
  v1 = dword_30076898(89);
  sub_300219D0("voice chat memory size = %d\n", v0 - v1);
  dword_301D9CC0 = dword_30076898(192);
  dword_301D9CC4 = dword_30076898(192);
  dword_301D9CC8 = dword_30076898(192);
  dword_301D9CCC = dword_30076898(192);
  dword_301D98E0 = dword_30076898(192);
  dword_301D98E4 = dword_30076898(192);
  dword_301D9D08 = dword_30076898(192);
  dword_301D98E8 = dword_30076898(192);
  dword_301D9900 = dword_30076898(192);
  dword_301D98EC = dword_30076898(192);
  dword_301D9CD0 = dword_30076898(192);
  dword_301D9CD4 = dword_30076898(192);
  dword_301D9CDC = dword_30076898(192);
  dword_301D9CE0 = dword_30076898(192);
  dword_301D9CE4 = dword_30076898(192);
  dword_301D9CE8 = dword_30076898(192);
  dword_301D9CD8 = dword_30076898(192);
  dword_301D9D04 = dword_30076898(192);
  dword_301D9CF0 = dword_30076898(192);
  dword_301D9CF4 = dword_30076898(192);
  dword_301D9CF8 = dword_30076898(192);
  dword_301D9CFC = dword_30076898(192);
  dword_301D9D00 = dword_30076898(192);
  sub_30021C60("grenade_bounce", (int)&dword_301D9904);
  sub_30021C60("grenade_explode", (int)&dword_301D9960);
  sub_30021C60("rocket_explode", (int)&dword_301D99BC);
  sub_30021C60("bullet_small", (int)&dword_301D9A74);
  sub_30021C60("bullet_large", (int)&dword_301D9AD0);
  sub_30021C60("step_run", (int)&unk_301D9B2C);
  sub_30021C60("step_walk", (int)&unk_301D9B88);
  sub_30021C60("step_prone", (int)&unk_301D9BE4);
  sub_30021C60("land", (int)&unk_301D9C40);
  dword_301D9C9C = dword_30076898(192);
  dword_301D9CA0 = dword_30076898(192);
  dword_301D9CA4 = dword_30076898(192);
  dword_301D9CA8 = dword_30076898(192);
  dword_301D9CAC = dword_30076898(192);
  dword_301D9CB0 = dword_30076898(192);
  dword_301D9CB4 = dword_30076898(192);
  dword_301D9CB8 = dword_30076898(192);
  dword_301D9CBC = dword_30076898(192);
  result = dword_30076898(192);
  dword_301D9CEC = result;
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D98E0: using guessed type int dword_301D98E0;
// 301D98E4: using guessed type int dword_301D98E4;
// 301D98E8: using guessed type int dword_301D98E8;
// 301D98EC: using guessed type int dword_301D98EC;
// 301D9900: using guessed type int dword_301D9900;
// 301D9904: using guessed type int dword_301D9904;
// 301D9960: using guessed type int dword_301D9960;
// 301D99BC: using guessed type int dword_301D99BC;
// 301D9A74: using guessed type int dword_301D9A74;
// 301D9AD0: using guessed type int dword_301D9AD0;
// 301D9C9C: using guessed type int dword_301D9C9C;
// 301D9CA0: using guessed type int dword_301D9CA0;
// 301D9CA4: using guessed type int dword_301D9CA4;
// 301D9CA8: using guessed type int dword_301D9CA8;
// 301D9CAC: using guessed type int dword_301D9CAC;
// 301D9CB0: using guessed type int dword_301D9CB0;
// 301D9CB4: using guessed type int dword_301D9CB4;
// 301D9CB8: using guessed type int dword_301D9CB8;
// 301D9CBC: using guessed type int dword_301D9CBC;
// 301D9CC0: using guessed type int dword_301D9CC0;
// 301D9CC4: using guessed type int dword_301D9CC4;
// 301D9CC8: using guessed type int dword_301D9CC8;
// 301D9CCC: using guessed type int dword_301D9CCC;
// 301D9CD0: using guessed type int dword_301D9CD0;
// 301D9CD4: using guessed type int dword_301D9CD4;
// 301D9CD8: using guessed type int dword_301D9CD8;
// 301D9CDC: using guessed type int dword_301D9CDC;
// 301D9CE0: using guessed type int dword_301D9CE0;
// 301D9CE4: using guessed type int dword_301D9CE4;
// 301D9CE8: using guessed type int dword_301D9CE8;
// 301D9CEC: using guessed type int dword_301D9CEC;
// 301D9CF0: using guessed type int dword_301D9CF0;
// 301D9CF4: using guessed type int dword_301D9CF4;
// 301D9CF8: using guessed type int dword_301D9CF8;
// 301D9CFC: using guessed type int dword_301D9CFC;
// 301D9D00: using guessed type int dword_301D9D00;
// 301D9D04: using guessed type int dword_301D9D04;
// 301D9D08: using guessed type int dword_301D9D08;

//----- (30022080) --------------------------------------------------------
int sub_30022080()
{
  char *v0; // eax
  int i; // esi
  int v2; // ebp
  const char *v3; // eax
  int v4; // eax
  double v5; // st7
  const char *v6; // eax
  int v7; // eax
  double v8; // st7
  const char *v9; // eax
  int v10; // eax
  double v11; // st7
  char *v12; // eax
  char *v13; // eax
  char *v14; // eax
  float *v15; // ebx
  float *v16; // ecx
  int j; // eax
  double v18; // st7
  char *v19; // eax
  int v20; // esi
  _DWORD *v21; // edi
  _BYTE *v22; // eax
  int v23; // esi
  _DWORD *v24; // edi
  int v25; // ebp
  char *v26; // esi
  _DWORD *v27; // ebx
  _BYTE *v28; // edi
  char *v29; // eax
  char v31; // [esp-38h] [ebp-DCh]
  char v32; // [esp-18h] [ebp-BCh]
  char v33; // [esp+0h] [ebp-A4h]
  char v34; // [esp+0h] [ebp-A4h]
  char v35; // [esp+0h] [ebp-A4h]
  char v36; // [esp+0h] [ebp-A4h]
  char v37; // [esp+0h] [ebp-A4h]
  char v38; // [esp+0h] [ebp-A4h]
  float v39; // [esp+10h] [ebp-94h]
  float v40; // [esp+10h] [ebp-94h]
  float v41; // [esp+10h] [ebp-94h]
  int v42; // [esp+18h] [ebp-8Ch]
  int v43; // [esp+18h] [ebp-8Ch]
  int v44; // [esp+18h] [ebp-8Ch]
  int v45; // [esp+30h] [ebp-74h]
  int v46; // [esp+34h] [ebp-70h]
  int v47; // [esp+38h] [ebp-6Ch]
  int v48; // [esp+3Ch] [ebp-68h]
  char v49[12]; // [esp+4Ch] [ebp-58h] BYREF
  char String[68]; // [esp+58h] [ebp-4Ch] BYREF
  unsigned int v51; // [esp+9Ch] [ebp-8h]
  unsigned int retaddr; // [esp+A4h] [ebp+0h]

  v51 = retaddr ^ dword_300705C0;
  Com_Printf("^5---------- Fx System Initialization ---------\n", v33);
  dword_30076898(232);
  Com_Printf("^5----- Fx System Initialization Complete -----\n", v34);
  strncpy(&byte_3020F3AC, " - textures", 0x3FFu);
  byte_3020F7AB = 0;
  v0 = (char *)sub_300403F0("LOADING... %s\n", " - textures");
  sub_300219D0(v0, v35);
  dword_30076898(25);
  for ( i = 0; i < 11; ++i )
    dword_301D98A8[i] = sub_300322A0(off_30077470[i], 5);
  dword_301D9648 = sub_300322A0("gfx/2d/net.tga", 5);
  dword_301D964C = sub_300322A0("lagometer", 5);
  dword_301D9634 = sub_300322A0("headiconDisconnected", 5);
  dword_301D9638 = sub_300322A0("headiconYouInKillCam", 5);
  sub_300322A0("killIconMelee", 5);
  sub_300322A0("killIconSuicide", 5);
  sub_300322A0("killIconFalling", 5);
  sub_300322A0("killIconCrush", 5);
  sub_300322A0("killIconDrown", 5);
  sub_300322A0("killIconSlime", 5);
  sub_300322A0("killIconDied", 5);
  dword_301D9644 = sub_300322A0("gfx/misc/tracer", 4);
  dword_301D963C = sub_300322A0("gfx/2d/select", 5);
  dword_301D9660 = sub_300322A0("hintActivate", 5);
  dword_301D9664 = sub_300322A0("hintNoActivate", 5);
  dword_301D9668 = sub_300322A0("hintDoor", 5);
  dword_301D966C = sub_300322A0("hintNoDoor", 5);
  dword_301D9670 = sub_300322A0("hintMg42", 5);
  dword_301D9674 = sub_300322A0("hintHealth", 5);
  dword_301D9678 = sub_300322A0("hintLadder", 5);
  dword_301D967C = sub_300322A0("hintFriendly", 5);
  dword_301D9880 = sub_300322A0("hudStanceStand", 5);
  dword_301D9884 = sub_300322A0("hudStanceCrouch", 5);
  dword_301D9888 = sub_300322A0("hudStanceProne", 5);
  dword_301D988C = sub_300322A0("hudStanceFlash", 5);
  dword_301D9890 = sub_300322A0("hudObjective", 5);
  dword_301D9894 = sub_300322A0("hudObjectiveUp", 5);
  dword_301D9898 = sub_300322A0("hudObjectiveDown", 5);
  dword_301D989C = sub_300322A0("gfx/hud/hud@objective_friendly.tga", 5);
  dword_301D98A0 = sub_300322A0("gfx/hud/hud@objective_friendly_chat.tga", 5);
  dword_301D98A4 = sub_300322A0("hudHitDirection", 5);
  v2 = 1;
  if ( !dword_301E5F20 && !dword_300F0FA0 )
  {
    dword_300F0FA0 = 1;
    if ( byte_301DD4B0 )
      dword_30076898(9);
    if ( byte_301E5730 )
      dword_30076898(9);
    if ( dword_301AA3CC )
      dword_30076898(9);
    v3 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]]);
    if ( !v3 || !*v3 || (v4 = sub_300403F0("levelshots/%s.tga", v3), !sub_300324D0(v4, 2)) )
      sub_300324D0("menu/art/unknownmap", 2);
    dword_30076898(72);
    dword_30076898(73);
    dword_30076898(11);
    v42 = j__atol(String);
    v45 = 1061997773;
    v46 = 1061997773;
    v47 = 1061997773;
    v48 = 1061997773;
    if ( v42 > 0 )
    {
      v5 = (double)dword_30076898(63) / (double)v42;
      v39 = v5;
      if ( v5 > 1.0 )
        v39 = 1.0;
      sub_3001A260(200.0, 468.0, 240.0, 10.0, v39);
    }
    dword_30076898(25);
    --dword_300F0FA0;
  }
  dword_301D9D0C = dword_30076898(88);
  if ( !dword_301E5F20 && !dword_300F0FA0 )
  {
    dword_300F0FA0 = 1;
    if ( byte_301DD4B0 )
      dword_30076898(9);
    if ( byte_301E5730 )
      dword_30076898(9);
    if ( dword_301AA3CC )
      dword_30076898(9);
    v6 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]]);
    if ( !v6 || !*v6 || (v7 = sub_300403F0("levelshots/%s.tga", v6), !sub_300324D0(v7, 2)) )
      sub_300324D0("menu/art/unknownmap", 2);
    dword_30076898(72);
    dword_30076898(73);
    dword_30076898(11);
    v43 = j__atol(String);
    v45 = 1061997773;
    v46 = 1061997773;
    v47 = 1061997773;
    v48 = 1061997773;
    if ( v43 > 0 )
    {
      v8 = (double)dword_30076898(63) / (double)v43;
      v40 = v8;
      if ( v8 > 1.0 )
        v40 = 1.0;
      sub_3001A260(200.0, 468.0, 240.0, 10.0, v40);
    }
    dword_30076898(25);
    --dword_300F0FA0;
  }
  dword_301D9D10 = dword_30076898(88);
  if ( !dword_301E5F20 && !dword_300F0FA0 )
  {
    dword_300F0FA0 = 1;
    if ( byte_301DD4B0 )
      dword_30076898(9);
    if ( byte_301E5730 )
      dword_30076898(9);
    if ( dword_301AA3CC )
      dword_30076898(9);
    v9 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]]);
    if ( !v9 || !*v9 || (v10 = sub_300403F0("levelshots/%s.tga", v9), !sub_300324D0(v10, 2)) )
      sub_300324D0("menu/art/unknownmap", 2);
    dword_30076898(72);
    dword_30076898(73);
    dword_30076898(11);
    v44 = j__atol(String);
    v45 = 1061997773;
    v46 = 1061997773;
    v47 = 1061997773;
    v48 = 1061997773;
    if ( v44 > 0 )
    {
      v11 = (double)dword_30076898(63) / (double)v44;
      v41 = v11;
      if ( v11 > 1.0 )
        v41 = 1.0;
      sub_3001A260(200.0, 468.0, 240.0, 10.0, v41);
    }
    dword_30076898(25);
    --dword_300F0FA0;
  }
  dword_301D9D14 = dword_30076898(88);
  dword_301D9650 = sub_300322A0("gfx/2d/backtile", 5);
  dword_301D9654 = sub_300322A0("hudNoWeaponIcon", 5);
  dword_301D98D8 = sub_300322A0("flareShader", 4);
  dword_301D9620 = sub_300322A0("hudColorBar", 5);
  dword_301D961C = sub_300322A0("hudAlliedIcon", 5);
  dword_301D9618 = sub_300322A0("hudAxisIcon", 5);
  strncpy(&byte_3020F3AC, " - models", 0x3FFu);
  byte_3020F7AB = 0;
  v12 = (char *)sub_300403F0("LOADING... %s\n", " - models");
  sub_300219D0(v12, v31);
  dword_30076898(25);
  dword_301D962C = sub_300322A0("headiconVoiceChat", 2);
  dword_301D9630 = sub_300322A0("headiconTalkBalloon", 2);
  dword_301D9628 = sub_300322A0("railCore", 1);
  sub_3002CBE0();
  memset(&dword_301E02C0, 0, 0x2400u);
  memset(&unk_301AA4E0, 0, 0x6600u);
  strncpy(&byte_3020F3AC, " - items", 0x3FFu);
  byte_3020F7AB = 0;
  v13 = (char *)sub_300403F0("LOADING... %s\n", " - items");
  sub_300219D0(v13, v32);
  dword_30076898(25);
  sub_30037AC0();
  dword_301D98D4 = sub_300322A0("markShadow", 4);
  dword_301D98DC = sub_300322A0("wake", 4);
  strncpy(&byte_3020F3AC, " - inline models", 0x3FFu);
  byte_3020F7AB = 0;
  v14 = (char *)sub_300403F0("LOADING... %s\n", " - inline models");
  sub_300219D0(v14, v36);
  dword_30076898(25);
  dword_301D6D44 = dword_30076898(32);
  if ( dword_301D6D44 > 1 )
  {
    v15 = (float *)&unk_301D7554;
    do
    {
      sub_30040370("*%i", v2);
      dword_301D6D48[v2] = sub_30032050(v49, 7);
      dword_30076898(77);
      v16 = v15;
      for ( j = 0; j < 12; *(v16 - 1) = (v18 - *(float *)((char *)&v48 + j)) * 0.5 + *(float *)((char *)&v48 + j) )
      {
        v18 = *(float *)((char *)&v45 + j);
        j += 4;
        ++v16;
      }
      ++v2;
      v15 = v16;
    }
    while ( v2 < dword_301D6D44 );
  }
  strncpy(&byte_3020F3AC, " - server models", 0x3FFu);
  byte_3020F7AB = 0;
  v19 = (char *)sub_300403F0("LOADING... %s\n", " - server models");
  sub_300219D0(v19, v37);
  dword_30076898(25);
  v20 = 269;
  v21 = &unk_301D6088;
  do
  {
    if ( v20 < 0 || v20 >= 2048 )
      sub_30021A30("CG_ConfigString: bad index: %i", v20);
    v22 = &byte_301D1B20[*(v21 - 6221)];
    if ( !*v22 )
      break;
    ++v20;
    *v21++ = sub_30032050(v22, 7);
  }
  while ( v20 - 268 < 256 );
  v23 = 781;
  v24 = &unk_301D6488;
  do
  {
    if ( v23 < 0 || v23 >= 2048 )
      sub_30021A30("CG_ConfigString: bad index: %i", v23);
    if ( !byte_301D1B20[*(v24 - 5965)] )
      break;
    ++v23;
    *v24++ = dword_30076898(223);
  }
  while ( v23 - 780 < 64 );
  v25 = 1101;
  v26 = (char *)&unk_301D6600;
  v27 = &unk_301D0C54;
  do
  {
    if ( v25 < 0 || v25 >= 2048 )
      sub_30021A30("CG_ConfigString: bad index: %i", v25);
    v28 = &byte_301D1B20[*v27];
    if ( !*v28 )
      break;
    if ( !sub_30030160() )
      sub_30021A30("couldn't register shell shock '%s' -- see console\n", (char)v28);
    sub_30030220();
    ++v27;
    ++v25;
    v26 += 124;
  }
  while ( v25 - 1100 < 16 );
  sub_3001B980();
  dword_301DA054 = dword_30076898(223);
  strncpy(&byte_3020F3AC, " - game media done", 0x3FFu);
  byte_3020F7AB = 0;
  v29 = (char *)sub_300403F0("LOADING... %s\n", " - game media done");
  sub_300219D0(v29, v38);
  dword_30076898(25);
  return sub_30052A2E(retaddr ^ v51);
}
// 300220A2: variable 'v33' is possibly undefined
// 300220BD: variable 'v34' is possibly undefined
// 300220F6: variable 'v35' is possibly undefined
// 30022A5C: variable 'v31' is possibly undefined
// 30022AF1: variable 'v32' is possibly undefined
// 30022B5C: variable 'v36' is possibly undefined
// 30022C2E: variable 'v37' is possibly undefined
// 30022DA2: variable 'v38' is possibly undefined
// 3001B980: using guessed type int sub_3001B980(void);
// 3002CBE0: using guessed type int sub_3002CBE0(void);
// 30030160: using guessed type int sub_30030160(void);
// 30030220: using guessed type int sub_30030220(void);
// 30032050: using guessed type _DWORD __cdecl sub_30032050(_DWORD, _DWORD);
// 300322A0: using guessed type _DWORD __cdecl sub_300322A0(_DWORD, _DWORD);
// 300324D0: using guessed type _DWORD __cdecl sub_300324D0(_DWORD, _DWORD);
// 30037AC0: using guessed type int sub_30037AC0(void);
// 30040370: using guessed type int sub_30040370(const char *, ...);
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300404B0: using guessed type int __thiscall sub_300404B0(_DWORD);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30077470: using guessed type char *off_30077470[11];
// 300F0FA0: using guessed type int dword_300F0FA0;
// 301AA3CC: using guessed type int dword_301AA3CC;
// 301CFB20: using guessed type int dword_301CFB20[];
// 301D6D44: using guessed type int dword_301D6D44;
// 301D9618: using guessed type int dword_301D9618;
// 301D961C: using guessed type int dword_301D961C;
// 301D9620: using guessed type int dword_301D9620;
// 301D9628: using guessed type int dword_301D9628;
// 301D962C: using guessed type int dword_301D962C;
// 301D9630: using guessed type int dword_301D9630;
// 301D9634: using guessed type int dword_301D9634;
// 301D9638: using guessed type int dword_301D9638;
// 301D963C: using guessed type int dword_301D963C;
// 301D9644: using guessed type int dword_301D9644;
// 301D9648: using guessed type int dword_301D9648;
// 301D9650: using guessed type int dword_301D9650;
// 301D9660: using guessed type int dword_301D9660;
// 301D9664: using guessed type int dword_301D9664;
// 301D9668: using guessed type int dword_301D9668;
// 301D966C: using guessed type int dword_301D966C;
// 301D9670: using guessed type int dword_301D9670;
// 301D9674: using guessed type int dword_301D9674;
// 301D9678: using guessed type int dword_301D9678;
// 301D967C: using guessed type int dword_301D967C;
// 301D9880: using guessed type int dword_301D9880;
// 301D9884: using guessed type int dword_301D9884;
// 301D9888: using guessed type int dword_301D9888;
// 301D988C: using guessed type int dword_301D988C;
// 301D9890: using guessed type int dword_301D9890;
// 301D9894: using guessed type int dword_301D9894;
// 301D9898: using guessed type int dword_301D9898;
// 301D989C: using guessed type int dword_301D989C;
// 301D98A8: using guessed type int dword_301D98A8[];
// 301D98D8: using guessed type int dword_301D98D8;
// 301D98DC: using guessed type int dword_301D98DC;
// 301D9D0C: using guessed type int dword_301D9D0C;
// 301D9D10: using guessed type int dword_301D9D10;
// 301D9D14: using guessed type int dword_301D9D14;
// 301DA054: using guessed type int dword_301DA054;
// 301DD4B0: using guessed type char byte_301DD4B0;
// 301E02C0: using guessed type int dword_301E02C0;
// 301E5730: using guessed type char byte_301E5730;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020F7AB: using guessed type char byte_3020F7AB;

//----- (30022DE0) --------------------------------------------------------
_BYTE *__cdecl sub_30022DE0(int ArgList)
{
  if ( ArgList < 0 || ArgList >= 2048 )
    sub_30021A30("CG_ConfigString: bad index: %i", ArgList);
  return &byte_301D1B20[dword_301CFB20[ArgList]];
}
// 301CFB20: using guessed type int dword_301CFB20[];

//----- (30022E10) --------------------------------------------------------
int sub_30022E10()
{
  const char *v0; // esi
  const char *v1; // eax

  v0 = &byte_301D1B20[dword_301CFB2C];
  sub_300404B0(&byte_301D1B20[dword_301CFB2C], "n");
  dword_30076898(193);
  v1 = (const char *)sub_300404B0(v0, "t");
  j__atol(v1);
  return dword_30076898(215);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301CFB2C: using guessed type int dword_301CFB2C;
// 3020AF00: using guessed type int dword_3020AF00;

//----- (30022E80) --------------------------------------------------------
int sub_30022E80()
{
  return sub_30022ED0();
}
// 301E5F20: using guessed type int dword_301E5F20;

//----- (30022EA0) --------------------------------------------------------
int sub_30022EA0()
{
  return sub_30022ED0();
}

//----- (30022ED0) --------------------------------------------------------
int sub_30022ED0()
{
  int result; // eax
  int v1; // esi
  int v2; // edi
  float v3; // [esp+0h] [ebp-20h]
  float v4; // [esp+10h] [ebp-10h]

  result = dword_30076898(193);
  v1 = result;
  if ( result )
  {
    v2 = dword_30076898(195);
    if ( v2 && *(_DWORD *)(v1 + 8) )
    {
      v4 = flt_3029D208 * 1000.0;
      if ( (int)(v4 + 9.313225746154785e-10) > v2 )
      {
        v3 = flt_3029D208 * 1000.0;
        sub_3000D870(v3);
      }
      dword_30076898(5);
    }
    result = v2;
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3029D208: using guessed type float flt_3029D208;

//----- (30022F90) --------------------------------------------------------
int __cdecl sub_30022F90(int a1)
{
  int v1; // ecx
  int v2; // edi
  char *v4; // [esp+8h] [ebp-430h] BYREF
  int v5; // [esp+Ch] [ebp-42Ch] BYREF
  int v6; // [esp+10h] [ebp-428h] BYREF
  int v7; // [esp+14h] [ebp-424h] BYREF
  int v8; // [esp+18h] [ebp-420h] BYREF
  int v9; // [esp+1Ch] [ebp-41Ch] BYREF
  int v10; // [esp+20h] [ebp-418h] BYREF
  char v11[1024]; // [esp+34h] [ebp-404h] BYREF
  unsigned int v12; // [esp+434h] [ebp-4h]
  unsigned int retaddr; // [esp+438h] [ebp+0h]

  v12 = retaddr ^ dword_300705C0;
  v2 = v1;
  if ( dword_30076898(98) && !sub_30040170(99999, v11, "{") && dword_30076898(98) )
  {
    while ( sub_30040170(99999, v11, "}") )
    {
      if ( sub_30040170(99999, v11, "font") )
      {
        if ( sub_30040170(99999, v11, "smallFont") )
        {
          if ( sub_30040170(99999, v11, "bigfont") )
          {
            if ( sub_30040170(99999, v11, "extrabigfont") )
            {
              if ( sub_30040170(99999, v11, "boldFont") )
              {
                if ( sub_30040170(99999, v11, "consoleFont") )
                {
                  if ( sub_30040170(99999, v11, "gradientbar") )
                  {
                    if ( sub_30040170(99999, v11, "menuEnterSound") )
                    {
                      if ( sub_30040170(99999, v11, "menuExitSound") )
                      {
                        if ( sub_30040170(99999, v11, "itemFocusSound") )
                        {
                          if ( sub_30040170(99999, v11, "menuBuzzSound") )
                          {
                            if ( sub_30040170(99999, v11, "cursor") )
                            {
                              if ( sub_30040170(99999, v11, "fadeClamp") )
                              {
                                if ( sub_30040170(99999, v11, "fadeCycle") )
                                {
                                  if ( sub_30040170(99999, v11, "fadeAmount") )
                                  {
                                    if ( sub_30040170(99999, v11, "fadeInAmount") )
                                    {
                                      if ( sub_30040170(99999, v11, "shadowX") )
                                      {
                                        if ( sub_30040170(99999, v11, "shadowY") )
                                        {
                                          if ( !sub_30040170(99999, v11, "shadowColor") )
                                          {
                                            if ( !sub_30041DC0(v2, (int)&unk_301CF4B8) )
                                              return sub_30052A2E(retaddr ^ v12);
                                            dword_301CF4C8 = dword_301CF4C4;
                                          }
                                        }
                                        else if ( !sub_30041C80(&flt_301CF4B4, v2) )
                                        {
                                          return sub_30052A2E(retaddr ^ v12);
                                        }
                                      }
                                      else if ( !sub_30041C80(&flt_301CF4B0, v2) )
                                      {
                                        return sub_30052A2E(retaddr ^ v12);
                                      }
                                    }
                                    else if ( !sub_30041C80(&flt_301CF4AC, v2) )
                                    {
                                      return sub_30052A2E(retaddr ^ v12);
                                    }
                                  }
                                  else if ( !sub_30041C80(&flt_301CF4A8, v2) )
                                  {
                                    return sub_30052A2E(retaddr ^ v12);
                                  }
                                }
                                else if ( !sub_30041E70(&dword_301CF4A4, v2) )
                                {
                                  return sub_30052A2E(retaddr ^ v12);
                                }
                              }
                              else if ( !sub_30041C80(&flt_301CF4A0, v2) )
                              {
                                return sub_30052A2E(retaddr ^ v12);
                              }
                            }
                            else
                            {
                              if ( !sub_300420D0((char **)&dword_301B12A4) )
                                return sub_30052A2E(retaddr ^ v12);
                              dword_301CF45C = sub_300324D0();
                            }
                          }
                          else
                          {
                            if ( !sub_300420D0(&v4) )
                              return sub_30052A2E(retaddr ^ v12);
                            dword_301CF498 = sub_30032BB0();
                          }
                        }
                        else
                        {
                          if ( !sub_300420D0(&v4) )
                            return sub_30052A2E(retaddr ^ v12);
                          dword_301CF49C = sub_30032BB0();
                        }
                      }
                      else
                      {
                        if ( !sub_300420D0(&v4) )
                          return sub_30052A2E(retaddr ^ v12);
                        dword_301CF494 = sub_30032BB0();
                      }
                    }
                    else
                    {
                      if ( !sub_300420D0(&v4) )
                        return sub_30052A2E(retaddr ^ v12);
                      dword_301CF490 = sub_30032BB0();
                    }
                  }
                  else
                  {
                    if ( !sub_300420D0(&v4) )
                      return sub_30052A2E(retaddr ^ v12);
                    dword_301CF460 = sub_300324D0();
                  }
                }
                else
                {
                  if ( !sub_300420D0(&v4) || !sub_30041E70(&v9, v2) )
                    return sub_30052A2E(retaddr ^ v12);
                  dword_301B11F0(v4, v9, &unk_301CA414, a1);
                }
              }
              else
              {
                if ( !sub_300420D0(&v4) || !sub_30041E70(&v7, v2) )
                  return sub_30052A2E(retaddr ^ v12);
                dword_301B11F0(v4, v7, &unk_301C53CC, a1);
              }
            }
            else
            {
              if ( !sub_300420D0(&v4) || !sub_30041E70(&v6, v2) )
                return sub_30052A2E(retaddr ^ v12);
              dword_301B11F0(v4, v6, &unk_301C0384, a1);
            }
          }
          else
          {
            if ( !sub_300420D0(&v4) || !sub_30041E70(&v5, v2) )
              return sub_30052A2E(retaddr ^ v12);
            dword_301B11F0(v4, v5, &unk_301BB33C, a1);
          }
        }
        else
        {
          if ( !sub_300420D0(&v4) || !sub_30041E70(&v10, v2) )
            return sub_30052A2E(retaddr ^ v12);
          dword_301B11F0(v4, v10, &unk_301B62F4, a1);
        }
      }
      else
      {
        if ( !sub_300420D0(&v4) || !sub_30041E70(&v8, v2) )
          return sub_30052A2E(retaddr ^ v12);
        dword_301B11F0(v4, v8, &unk_301B12AC, a1);
      }
      if ( !dword_30076898(98) )
        return sub_30052A2E(retaddr ^ v12);
    }
  }
  return sub_30052A2E(retaddr ^ v12);
}
// 30022FB7: variable 'v1' is possibly undefined
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301B11F0: using guessed type int (__cdecl *dword_301B11F0)(_DWORD, _DWORD, _DWORD, _DWORD);
// 301B12A4: using guessed type int dword_301B12A4;
// 301CF45C: using guessed type int dword_301CF45C;
// 301CF460: using guessed type int dword_301CF460;
// 301CF490: using guessed type int dword_301CF490;
// 301CF494: using guessed type int dword_301CF494;
// 301CF498: using guessed type int dword_301CF498;
// 301CF49C: using guessed type int dword_301CF49C;
// 301CF4C4: using guessed type int dword_301CF4C4;
// 301CF4C8: using guessed type int dword_301CF4C8;

//----- (30023540) --------------------------------------------------------
int __usercall sub_30023540@<eax>(int a1@<esi>)
{
  int v1; // ebx
  char v3[1024]; // [esp+14h] [ebp-404h] BYREF
  unsigned int v4; // [esp+414h] [ebp-4h]
  unsigned int retaddr; // [esp+418h] [ebp+0h]

  v4 = retaddr ^ dword_300705C0;
  v1 = dword_30076898(96);
  if ( v1 || (v1 = dword_30076898(96)) != 0 )
  {
    while ( dword_30076898(98) )
    {
      if ( v3[0] == 125 )
        break;
      if ( sub_30040170(99999, v3, "assetGlobalDef") )
      {
        if ( !sub_30040170(99999, v3, "menudef") )
          sub_3004C970(v1, a1);
      }
      else if ( !sub_30022F90(a1) )
      {
        break;
      }
    }
    dword_30076898(97);
  }
  return sub_30052A2E(retaddr ^ v4);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30023630) --------------------------------------------------------
int __usercall sub_30023630@<eax>(int a1@<eax>, char **a2)
{
  char *v3; // eax
  char *v5; // eax
  char *v6; // edi

  v3 = String;
  if ( *((_DWORD *)String + 257) )
  {
    *((_DWORD *)String + 257) = 0;
    *a2 = (char *)*((_DWORD *)v3 + 262);
    *((_DWORD *)v3 + 256) = *((_DWORD *)v3 + 261);
  }
  if ( *sub_3003F2E0(a2, 1) != 123 )
    return 0;
  while ( 1 )
  {
    v5 = String;
    if ( *((_DWORD *)String + 257) )
    {
      *((_DWORD *)String + 257) = 0;
      *a2 = (char *)*((_DWORD *)v5 + 262);
      *((_DWORD *)v5 + 256) = *((_DWORD *)v5 + 261);
    }
    v6 = sub_3003F2E0(a2, 1);
    if ( !v6 )
      break;
    if ( !sub_30040170(99999, v6, "}") )
      return 1;
    if ( !*v6 )
      break;
    sub_30023540(a1);
  }
  return 0;
}

//----- (30023700) --------------------------------------------------------
int __usercall sub_30023700@<eax>(const char *a1@<edi>, int a2)
{
  int v2; // ebp
  int v3; // esi
  int result; // eax
  char *v5; // eax
  int v6; // ecx
  char *v7; // eax
  char *v8; // esi
  char v9; // al
  int v10; // eax
  int v11; // [esp+Ch] [ebp-8h]
  char *v12; // [esp+10h] [ebp-4h] BYREF

  v2 = dword_30076898(6);
  v3 = dword_30076898(15);
  if ( !v11 )
  {
    sub_300403F0("^3menu file not found: %s, using default\n", a1);
    dword_30076898(1);
    v3 = dword_30076898(15);
    sub_300403F0("^1default menu file not found: ui/hud.txt, unable to continue!\n", a1);
    dword_30076898(1);
  }
  if ( v3 < 4096 )
  {
    dword_30076898(16);
    byte_30096B90[v3] = 0;
    dword_30076898(18);
    sub_3003F180(byte_30096B90);
    dword_300F0F60 = 0;
    v12 = byte_30096B90;
    do
    {
      v5 = String;
      if ( *((_DWORD *)String + 257) )
      {
        *((_DWORD *)String + 257) = 0;
        v6 = *((_DWORD *)v5 + 261);
        v12 = (char *)*((_DWORD *)v5 + 262);
        *((_DWORD *)v5 + 256) = v6;
      }
      v7 = sub_3003F2E0(&v12, 1);
      v8 = v7;
      if ( !v7 )
        break;
      v9 = *v7;
      if ( !*v8 )
        break;
    }
    while ( v9 != 125 && sub_30040170(99999, v8, "}") && (sub_30040170(99999, v8, "loadmenu") || sub_30023630(a2, &v12)) );
    v10 = dword_30076898(6);
    result = Com_Printf("UI menu load time = %d milli seconds\n", v10 - v2);
  }
  else
  {
    sub_300403F0("^1menu file too large: %s is %i, max allowed is %i", a1, v3, 4096);
    dword_30076898(1);
    result = dword_30076898(18);
  }
  return result;
}
// 3002372C: variable 'v11' is possibly undefined
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0F60: using guessed type int dword_300F0F60;

//----- (300238B0) --------------------------------------------------------
int __cdecl sub_300238B0(float a1)
{
  int v1; // edx
  int v2; // ecx
  _DWORD *v3; // eax
  int result; // eax
  int v5; // ecx
  _DWORD *v6; // eax

  v1 = 0;
  if ( a1 == 5.0 )
  {
    v2 = dword_3020F7B0;
    if ( dword_3020F7B0 > 0 )
    {
      v3 = &unk_3020F7F4;
      do
      {
        if ( *v3 == 1 )
          ++v1;
        v3 += 6;
        --v2;
      }
      while ( v2 );
      return v1;
    }
    return 0;
  }
  if ( a1 != 6.0 )
  {
    result = dword_3020F7B0;
    if ( a1 == 11.0 )
      return result;
    return 0;
  }
  v5 = dword_3020F7B0;
  if ( dword_3020F7B0 <= 0 )
    return 0;
  v6 = &unk_3020F7F4;
  do
  {
    if ( *v6 == 2 )
      ++v1;
    v6 += 6;
    --v5;
  }
  while ( v5 );
  return v1;
}
// 3020F7B0: using guessed type int dword_3020F7B0;

//----- (30023930) --------------------------------------------------------
const char *sub_30023930()
{
  return &byte_30063AC4;
}

//----- (30023940) --------------------------------------------------------
int sub_30023940()
{
  return 0;
}

//----- (30023960) --------------------------------------------------------
int sub_30023960()
{
  char String[128]; // [esp+4h] [ebp-84h] BYREF
  unsigned int v2; // [esp+84h] [ebp-4h]
  unsigned int retaddr; // [esp+88h] [ebp+0h]

  v2 = retaddr ^ dword_300705C0;
  memset(String, 0, sizeof(String));
  dword_30076898(11);
  atof(String);
  return sub_30052A2E(retaddr ^ v2);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300239D0) --------------------------------------------------------
int __cdecl sub_300239D0(int a1)
{
  if ( a1 != 39 )
  {
    if ( a1 != 50 )
      return 0;
    if ( byte_3020FDF8 )
      sub_300403F0("Fragged by %s", &byte_3020FDF8);
  }
  return dword_30076898(52);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30023A50) --------------------------------------------------------
int __cdecl sub_30023A50()
{
  return dword_30076898(103);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30023A90) --------------------------------------------------------
int sub_30023A90()
{
  return dword_30076898(104);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30023AB0) --------------------------------------------------------
int __cdecl sub_30023AB0()
{
  dword_30076898(107);
  return dword_30076898(106);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30023B00) --------------------------------------------------------
int sub_30023B00()
{
  return dword_30076898(105);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30023B20) --------------------------------------------------------
int *__usercall sub_30023B20@<eax>(const char *a1@<eax>, const char *a2@<ecx>)
{
  int *result; // eax

  result = (int *)dword_30076898(56);
  if ( !result )
  {
    if ( dword_301DFD2C )
    {
      if ( dword_301DEE8C )
        sub_30021B10(7, "Could not translate %s string \"%s\"", a1, a2);
      else
        Com_Printf("^3WARNING: Could not translate %s string \"%s\"\n", a1, a2);
      strcpy((char *)&dword_30095B90, "^1UNLOCALIZED(^7");
      strcat((char *)&dword_30095B90, a2);
      strcat((char *)&dword_30095B90, "^1)^7");
      result = &dword_30095B90;
    }
    else
    {
      strcpy((char *)&dword_30095B90, a2);
      result = &dword_30095B90;
    }
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30095B90: using guessed type int dword_30095B90;
// 301DEE8C: using guessed type int dword_301DEE8C;
// 301DFD2C: using guessed type int dword_301DFD2C;

//----- (30023C30) --------------------------------------------------------
int *__cdecl sub_30023C30(const char *a1)
{
  return sub_30023B20("cgame", a1);
}

//----- (30023C40) --------------------------------------------------------
const char *__usercall sub_30023C40@<eax>(int a1@<eax>)
{
  int v2; // esi

  if ( !a1 )
    return &byte_30063AC4;
  v2 = a1 + 1244;
  if ( a1 + 1244 < 0 || v2 >= 2048 )
    sub_30021A30("CG_ConfigString: bad index: %i", a1 - 36);
  return (const char *)sub_30023C90(&byte_301D1B20[dword_301CFB20[v2]], "hudelem string");
}
// 30023C90: using guessed type _DWORD __cdecl sub_30023C90(_DWORD, _DWORD);
// 301CFB20: using guessed type int dword_301CFB20[];

//----- (30023C90) --------------------------------------------------------
int sub_30023C90()
{
  const char *v0; // esi
  char v1; // al
  int i; // edi
  char v3; // cl
  const char *v4; // edx
  char v5; // al
  char v6; // cl
  int v7; // ebx
  size_t v8; // ebp
  char *v9; // ebx
  int v11; // edi
  char *v12; // esi
  int v13; // edi
  const char *v14; // ecx
  char *v15; // esi
  char *v16; // edi
  char *v18; // [esp-1Ch] [ebp-434h]
  char *Source; // [esp+8h] [ebp-410h] BYREF
  const char *v20; // [esp+Ch] [ebp-40Ch]
  const char *v21; // [esp+10h] [ebp-408h]
  char Destination[1024]; // [esp+14h] [ebp-404h] BYREF
  unsigned int v23; // [esp+414h] [ebp-4h]
  unsigned int retaddr; // [esp+418h] [ebp+0h]

  v23 = retaddr ^ dword_300705C0;
  v0 = (const char *)dword_30076898(57);
  v1 = *v0;
  for ( i = 0; v1; ++i )
  {
    v3 = v0[i + 1];
    if ( !v3 || !v0[i + 2] || !v0[i + 3] || !v0[i + 4] )
      break;
    if ( v1 == 91 && v3 == 123 )
    {
      v4 = &v0[i];
      v21 = &v0[i];
      if ( &v0[i] )
      {
        v5 = v0[i];
        if ( v5 )
        {
          while ( 1 )
          {
            v6 = v0[i + 1];
            if ( !v6 )
              break;
            if ( v5 == 125 && v6 == 93 )
            {
              v20 = &v0[i];
              if ( &v0[i] )
              {
                v7 = &v0[i] - v4 - 1;
                strncpy(Destination, v4 + 2, &v0[i] - v4 - 2);
                *((_BYTE *)&v21 + v7 + 3) = 0;
                sub_300484D0();
                if ( sub_30048880(&Source, Destination) )
                {
                  v8 = strlen(Source);
                  dword_300F0F98 ^= 1u;
                  v9 = &byte_30095F90[1024 * dword_300F0F98];
                  if ( *v20 )
                  {
                    while ( v0[++i] )
                      ;
                  }
                  if ( (int)&v21[i + v8 - (_DWORD)v20] < 1024 )
                  {
                    v11 = v21 - v0 + 2;
                    strncpy(&byte_30095F90[1024 * dword_300F0F98], v0, v21 - v0 + 1);
                    v12 = &v9[v21 - v0 + 1];
                    v18 = Source;
                    v9[v11 - 1] = 0;
                    strncpy(v12, v18, v8);
                    v13 = dword_300F0F98;
                    v14 = v20;
                    v12[v8] = 0;
                    v15 = &v12[v8];
                    v16 = (char *)&unk_30096390 + (v13 << 10) - (_DWORD)v15;
                    strncpy(v15, v14 + 1, (size_t)(v16 - 1));
                    v15[(_DWORD)v16 - 1] = 0;
                  }
                  else
                  {
                    Com_Printf("String too long to add key binding: %s\n", v0);
                  }
                }
              }
              return sub_30052A2E(retaddr ^ v23);
            }
            v5 = v0[++i];
            if ( !v5 )
              return sub_30052A2E(retaddr ^ v23);
          }
        }
      }
      return sub_30052A2E(retaddr ^ v23);
    }
    v1 = v0[i + 1];
  }
  return sub_30052A2E(retaddr ^ v23);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0F98: using guessed type int dword_300F0F98;

//----- (30023E80) --------------------------------------------------------
int sub_30023E80()
{
  const char *v0; // edi
  char v2; // [esp+4h] [ebp-404h] BYREF
  unsigned int v3; // [esp+404h] [ebp-4h]
  unsigned int retaddr; // [esp+408h] [ebp+0h]

  v3 = retaddr ^ dword_300705C0;
  dword_301B11A0 = (int)sub_300324D0;
  dword_301B11A4 = (int)sub_30032800;
  dword_301B11A8 = (int)sub_3001A4A0;
  dword_301B11AC = (int)sub_30032820;
  dword_301B11B0 = (int)sub_30032560;
  dword_301B11B4 = (int)sub_30032510;
  dword_301B11B8 = (int)sub_30032540;
  dword_301B11BC = (int)sub_30032620;
  dword_301B11C0 = (int)sub_30023C30;
  dword_301B11C4 = (int)sub_30023C90;
  dword_301B11CC = (int)sub_30032050;
  dword_301B11D0 = (int)sub_300329D0;
  dword_301B11D4 = (int)sub_30019EE0;
  dword_301B11D8 = (int)sub_3001A420;
  dword_301B11DC = (int)sub_3001A2E0;
  dword_301B11E0 = (int)sub_3001A380;
  dword_301B11E4 = (int)sub_30032670;
  dword_301B11E8 = (int)sub_30032680;
  dword_301B11EC = (int)sub_300327C0;
  dword_301B11F0 = sub_300324F0;
  dword_301B11F4 = (int)sub_30027F20;
  dword_301B11F8 = (int)sub_30027900;
  dword_301B11FC = (int)sub_30027AB0;
  dword_301B1200 = (int)nullsub_4;
  dword_301B1204 = (int)sub_30028600;
  dword_301B1210 = (int)sub_30031C80;
  dword_301B1208 = (int)sub_30031CB0;
  dword_301B120C = (int)sub_30023960;
  dword_301B1214 = (int)sub_30022DE0;
  dword_301B1218 = (int)sub_300325C0;
  dword_301B1224 = (int)sub_30022E80;
  dword_301B1228 = (int)sub_300238A0;
  dword_301B122C = (int)sub_300238B0;
  dword_301B1238 = (int)sub_30023940;
  dword_301B1230 = (int)sub_30023930;
  dword_301B123C = (int)nullsub_3;
  dword_301B1254 = (int)sub_30033800;
  dword_301B1250 = (int)sub_300337E0;
  dword_301B124C = (int)sub_30033820;
  dword_301B125C = (int)sub_30021B10;
  dword_301B1260 = (int)Com_Printf;
  dword_301B1268 = (int)sub_300239D0;
  dword_301B126C = (int)sub_30032BB0;
  dword_301B1270 = (int)sub_30023A50;
  dword_301B1274 = (int)sub_30023A90;
  dword_301B1278 = (int)sub_30023AB0;
  dword_301B127C = (int)sub_30023B00;
  dword_300F0F4C = (int)&dword_301B11A0;
  dword_300F0F60 = 0;
  dword_30076898(9);
  dword_30076898(11);
  v0 = &v2;
  if ( !v2 )
    v0 = "ui_mp/hud.txt";
  sub_30023700(v0, 5);
  return sub_30052A2E(retaddr ^ v3);
}
// 300238A0: using guessed type int sub_300238A0();
// 30023950: using guessed type int nullsub_3();
// 300285F0: using guessed type int nullsub_4();
// 30031CB0: using guessed type int sub_30031CB0();
// 300324F0: using guessed type int __cdecl sub_300324F0(int, int, int, int);
// 30032510: using guessed type double __cdecl sub_30032510(_DWORD, _DWORD, _DWORD, _DWORD);
// 30032540: using guessed type double __cdecl sub_30032540(_DWORD, _DWORD);
// 30032670: using guessed type int sub_30032670();
// 300327C0: using guessed type int sub_300327C0();
// 30032800: using guessed type int sub_30032800();
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 300329D0: using guessed type int sub_300329D0();
// 30033800: using guessed type int sub_30033800();
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F60: using guessed type int dword_300F0F60;
// 301B11A0: using guessed type int dword_301B11A0;
// 301B11A4: using guessed type int dword_301B11A4;
// 301B11A8: using guessed type int dword_301B11A8;
// 301B11AC: using guessed type int dword_301B11AC;
// 301B11B0: using guessed type int dword_301B11B0;
// 301B11B4: using guessed type int dword_301B11B4;
// 301B11B8: using guessed type int dword_301B11B8;
// 301B11BC: using guessed type int dword_301B11BC;
// 301B11C0: using guessed type int dword_301B11C0;
// 301B11C4: using guessed type int dword_301B11C4;
// 301B11CC: using guessed type int dword_301B11CC;
// 301B11D0: using guessed type int dword_301B11D0;
// 301B11D4: using guessed type int dword_301B11D4;
// 301B11D8: using guessed type int dword_301B11D8;
// 301B11DC: using guessed type int dword_301B11DC;
// 301B11E0: using guessed type int dword_301B11E0;
// 301B11E4: using guessed type int dword_301B11E4;
// 301B11E8: using guessed type int dword_301B11E8;
// 301B11EC: using guessed type int dword_301B11EC;
// 301B11F0: using guessed type int (__cdecl *dword_301B11F0)(_DWORD, _DWORD, _DWORD, _DWORD);
// 301B11F4: using guessed type int dword_301B11F4;
// 301B11F8: using guessed type int dword_301B11F8;
// 301B11FC: using guessed type int dword_301B11FC;
// 301B1200: using guessed type int dword_301B1200;
// 301B1204: using guessed type int dword_301B1204;
// 301B1208: using guessed type int dword_301B1208;
// 301B120C: using guessed type int dword_301B120C;
// 301B1210: using guessed type int dword_301B1210;
// 301B1214: using guessed type int dword_301B1214;
// 301B1218: using guessed type int dword_301B1218;
// 301B1224: using guessed type int dword_301B1224;
// 301B1228: using guessed type int dword_301B1228;
// 301B122C: using guessed type int dword_301B122C;
// 301B1230: using guessed type int dword_301B1230;
// 301B1238: using guessed type int dword_301B1238;
// 301B123C: using guessed type int dword_301B123C;
// 301B124C: using guessed type int dword_301B124C;
// 301B1250: using guessed type int dword_301B1250;
// 301B1254: using guessed type int dword_301B1254;
// 301B125C: using guessed type int dword_301B125C;
// 301B1260: using guessed type int dword_301B1260;
// 301B1268: using guessed type int dword_301B1268;
// 301B126C: using guessed type int dword_301B126C;
// 301B1270: using guessed type int dword_301B1270;
// 301B1274: using guessed type int dword_301B1274;
// 301B1278: using guessed type int dword_301B1278;
// 301B127C: using guessed type int dword_301B127C;

//----- (300240F0) --------------------------------------------------------
int sub_300240F0()
{
  int result; // eax

  sub_30020CA0(0);
  dword_301CF460 = dword_30076898(88);
  sub_30020CA0(0);
  dword_301CF474 = dword_30076898(88);
  sub_30020CA0(0);
  dword_301CF468 = dword_30076898(88);
  sub_30020CA0(0);
  dword_301CF464 = dword_30076898(88);
  sub_30020CA0(0);
  dword_301CF46C = dword_30076898(88);
  sub_30020CA0(0);
  dword_301CF470 = dword_30076898(88);
  sub_30020CA0(0);
  dword_301CF478 = dword_30076898(88);
  sub_30020CA0(0);
  dword_301CF488 = dword_30076898(88);
  sub_30020CA0(0);
  result = dword_30076898(88);
  dword_301CF48C = result;
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301CF460: using guessed type int dword_301CF460;
// 301CF464: using guessed type int dword_301CF464;
// 301CF468: using guessed type int dword_301CF468;
// 301CF46C: using guessed type int dword_301CF46C;
// 301CF470: using guessed type int dword_301CF470;
// 301CF474: using guessed type int dword_301CF474;
// 301CF478: using guessed type int dword_301CF478;
// 301CF488: using guessed type int dword_301CF488;
// 301CF48C: using guessed type int dword_301CF48C;

//----- (300241F0) --------------------------------------------------------
char *sub_300241F0()
{
  const char *v0; // eax
  char *result; // eax

  dword_301D5C40 = j__atol(&byte_301D1B20[dword_301CFB5C]);
  if ( dword_301D5C40 )
    dword_301D5C40 += dword_30076898(6);
  dword_301D5C44 = j__atol(&byte_301D1B20[dword_301CFB64]);
  dword_301D5C48 = j__atol(&byte_301D1B20[dword_301CFB68]);
  v0 = (const char *)dword_30076898(57);
  result = strncpy(byte_301D5C50, v0, 0xFFu);
  byte_301D5D4F = 0;
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301CFB5C: using guessed type int dword_301CFB5C;
// 301CFB64: using guessed type int dword_301CFB64;
// 301CFB68: using guessed type int dword_301CFB68;
// 301D5C40: using guessed type int dword_301D5C40;
// 301D5C44: using guessed type int dword_301D5C44;
// 301D5C48: using guessed type int dword_301D5C48;
// 301D5D4F: using guessed type char byte_301D5D4F;

//----- (30024330) --------------------------------------------------------
char *__usercall sub_30024330@<eax>(int a1@<edx>, int a2, int a3)
{
  const char *v3; // eax
  char *v4; // eax
  char *v5; // eax
  char *v6; // eax
  char *v7; // eax
  char *v8; // eax
  char *v9; // eax
  char *v10; // eax
  char *result; // eax
  int v12; // [esp+14h] [ebp+8h]

  memset(dword_301CFB20, 0, 0xCAC4u);
  memset(dword_301E5F00, 0, 0x2B49Cu);
  memset(&unk_30211940, 0, 0x8A000u);
  memset(&unk_301AA4E0, 0, 0x6600u);
  memset(dword_301E02C0, 0, sizeof(dword_301E02C0));
  memset(&unk_300F25A0, 0, 0xAE2ECu);
  dword_300F2390 = 0;
  dword_300F2394 = 0;
  dword_300F2398 = 0;
  dword_3018DC70 = (int)sub_30032BB0;
  dword_3018DC74 = (int)sub_30022EA0;
  dword_301E5F04 = a3;
  dword_301D5A54 = a1;
  dword_301D5A50 = a2;
  dword_301D960C = sub_300322A0();
  dword_301D9610 = sub_300322A0();
  dword_301D9614 = sub_300322A0();
  sub_300218C0();
  sub_30015380();
  dword_30076898(78);
  flt_301D5A44 = (double)dword_301D5A28 * 0.0015625;
  flt_301D5A48 = (double)dword_301D5A2C * 0.0020833334;
  dword_30076898(79);
  if ( strcmp(&byte_301D1B20[dword_301CFB28], "cod") )
    sub_30021A30("Client/Server game mismatch: %s/%s", "cod", &byte_301D1B20[dword_301CFB28]);
  dword_301D6078 = j__atol(&byte_301D1B20[dword_301CFB54]);
  v12 = rand();
  flt_301DA060 = (double)v12 * 0.000030517578 + (double)v12 * 0.000030517578 - 1.0;
  sub_3002D040();
  sub_3002D0F0();
  sub_3000FCF0();
  sub_300144B0();
  strncpy(&byte_3020F3AC, "collision map", 0x3FFu);
  byte_3020F7AB = 0;
  v4 = (char *)sub_300403F0("LOADING... %s\n", "collision map");
  sub_300219D0(v4);
  dword_30076898(25);
  dword_30076898(31);
  sub_30041A30();
  strncpy(&byte_3020F3AC, "graphics", 0x3FFu);
  byte_3020F7AB = 0;
  v5 = (char *)sub_300403F0("LOADING... %s\n", "graphics");
  sub_300219D0(v5);
  dword_30076898(25);
  memset(&dword_3020D330, 0, 0x50u);
  dword_30076898(60);
  strncpy(&byte_3020F3AC, &byte_301D5B80, 0x3FFu);
  byte_3020F7AB = 0;
  if ( byte_301D5B80 )
  {
    v6 = (char *)sub_300403F0("LOADING... %s\n", &byte_301D5B80);
    sub_300219D0(v6);
  }
  dword_30076898(25);
  dword_30076898(44);
  strncpy(&byte_3020F3AC, "sound aliases", 0x3FFu);
  byte_3020F7AB = 0;
  v7 = (char *)sub_300403F0("LOADING... %s\n", "sound aliases");
  sub_300219D0(v7);
  dword_30076898(25);
  dword_30076898(191);
  strncpy(&byte_3020F3AC, "sounds", 0x3FFu);
  byte_3020F7AB = 0;
  v8 = (char *)sub_300403F0("LOADING... %s\n", "sounds");
  sub_300219D0(v8);
  dword_30076898(25);
  sub_30021CE0();
  strncpy(&byte_3020F3AC, "game media", 0x3FFu);
  byte_3020F7AB = 0;
  v9 = (char *)sub_300403F0("LOADING... %s\n", "game media");
  sub_300219D0(v9);
  dword_30076898(25);
  sub_30022080();
  strncpy(&byte_3020F3AC, "clients", 0x3FFu);
  byte_3020F7AB = 0;
  v10 = (char *)sub_300403F0("LOADING... %s\n", "clients");
  sub_300219D0(v10);
  dword_30076898(25);
  sub_300240F0();
  sub_30023E80();
  sub_30021160();
  sub_300247E0();
  byte_3020F3AC = 0;
  sub_3002D4F0();
  strncpy(&byte_3020F3AC, &byte_30063AC4, 0x3FFu);
  byte_3020F7AB = 0;
  dword_30076898(25);
  flt_30210E5C = atof(&byte_301D1B20[dword_301CFB4C]);
  dword_30076898(46);
  dword_30076898(212);
  sub_30022E10();
  result = sub_300241F0();
  dword_301D5F74 = 0;
  if ( dword_301DD5CC == 1 )
  {
    dword_301D5F70 = 0;
  }
  else
  {
    dword_301D5F70 = j__atol(&byte_301D1B20[dword_301D1490]);
    if ( dword_301D5F70 )
    {
      dword_301D5F74 = 1;
      dword_301D5F70 += dword_30076898(6);
    }
    v3 = (const char *)dword_30076898(57);
    result = strncpy(byte_301D5F78, v3, 0xFFu);
    byte_301D6077 = 0;
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F2390: using guessed type int dword_300F2390;
// 300F2394: using guessed type int dword_300F2394;
// 300F2398: using guessed type int dword_300F2398;
// 3018DC70: using guessed type int dword_3018DC70;
// 3018DC74: using guessed type int dword_3018DC74;
// 301CFB20: using guessed type int dword_301CFB20[];
// 301CFB28: using guessed type int dword_301CFB28;
// 301CFB4C: using guessed type int dword_301CFB4C;
// 301CFB54: using guessed type int dword_301CFB54;
// 301D1490: using guessed type int dword_301D1490;
// 301D5A28: using guessed type int dword_301D5A28;
// 301D5A2C: using guessed type int dword_301D5A2C;
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301D5A50: using guessed type int dword_301D5A50;
// 301D5A54: using guessed type int dword_301D5A54;
// 301D5F70: using guessed type int dword_301D5F70;
// 301D5F74: using guessed type int dword_301D5F74;
// 301D6077: using guessed type char byte_301D6077;
// 301D6078: using guessed type int dword_301D6078;
// 301D960C: using guessed type int dword_301D960C;
// 301D9610: using guessed type int dword_301D9610;
// 301D9614: using guessed type int dword_301D9614;
// 301DA060: using guessed type float flt_301DA060;
// 301DD5CC: using guessed type int dword_301DD5CC;
// 301E5F04: using guessed type int dword_301E5F04;
// 3020D330: using guessed type int dword_3020D330;
// 3020F7AB: using guessed type char byte_3020F7AB;
// 30210E5C: using guessed type float flt_30210E5C;

//----- (30024790) --------------------------------------------------------
int sub_30024790()
{
  dword_30076898(108);
  dword_30076898(216);
  sub_300379B0();
  sub_30014510();
  sub_300145B0();
  return dword_30076898(201);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300247E0) --------------------------------------------------------
char *sub_300247E0()
{
  char *result; // eax
  _DWORD *v1; // ecx
  int v2; // edx

  memset(&unk_3029D9E0, 0, 0x5D000u);
  dword_302FA9E4 = (int)&dword_302FA9E0;
  dword_302FA9E0 = (int)&dword_302FA9E0;
  dword_3029D9D0 = (int)&unk_3029D9E0;
  result = (char *)&unk_3029DB54;
  v1 = &unk_3029D9E0;
  v2 = 1023;
  do
  {
    v1[1] = result;
    v1 = result;
    result += 372;
    --v2;
  }
  while ( v2 );
  return result;
}
// 3029D9D0: using guessed type int dword_3029D9D0;
// 302FA9E0: using guessed type int dword_302FA9E0;
// 302FA9E4: using guessed type int dword_302FA9E4;

//----- (30024870) --------------------------------------------------------
_DWORD *sub_30024870()
{
  _DWORD *v0; // edx
  _DWORD *v1; // esi
  int v2; // edi

  v0 = (_DWORD *)dword_3029D9D0;
  if ( !dword_3029D9D0 )
  {
    v1 = (_DWORD *)dword_302FA9E0;
    v2 = *(_DWORD *)(dword_302FA9E0 + 8);
    do
    {
      if ( v2 != v1[2] )
        break;
      if ( !*v1 )
      {
        sub_30021A30("CG_FreeLocalEntity: not active");
        v0 = (_DWORD *)dword_3029D9D0;
      }
      *(_DWORD *)(*v1 + 4) = v1[1];
      *(_DWORD *)v1[1] = *v1;
      v1[1] = v0;
      v0 = v1;
      v1 = (_DWORD *)dword_302FA9E0;
      dword_3029D9D0 = (int)v0;
    }
    while ( dword_302FA9E0 );
  }
  dword_3029D9D0 = v0[1];
  memset(v0, 0, 0x174u);
  v0[1] = dword_302FA9E4;
  *v0 = &dword_302FA9E0;
  *(_DWORD *)dword_302FA9E4 = v0;
  dword_302FA9E4 = (int)v0;
  return v0;
}
// 3029D9D0: using guessed type int dword_3029D9D0;
// 302FA9E0: using guessed type int dword_302FA9E0;
// 302FA9E4: using guessed type int dword_302FA9E4;

//----- (30024900) --------------------------------------------------------
int __cdecl sub_30024900(int a1, int a2, float a3, float a4, float a5, float a6, float a7, int a8, float a9, int a10, int a11)
{
  float *v11; // ecx
  unsigned __int64 v12; // rax
  int v13; // esi
  char *v14; // ebx
  char *v15; // eax
  int v16; // ecx
  float *v17; // eax
  int v18; // edx
  float v20; // [esp+4h] [ebp-925Ch]
  float v21; // [esp+4h] [ebp-925Ch]
  float v22; // [esp+4h] [ebp-925Ch]
  int v23; // [esp+4h] [ebp-925Ch]
  float v24; // [esp+8h] [ebp-9258h]
  float v25; // [esp+8h] [ebp-9258h]
  float v26; // [esp+8h] [ebp-9258h]
  int v27; // [esp+8h] [ebp-9258h]
  float v28; // [esp+Ch] [ebp-9254h] BYREF
  float v29; // [esp+10h] [ebp-9250h]
  float v30; // [esp+14h] [ebp-924Ch]
  int v31; // [esp+18h] [ebp-9248h] BYREF
  float v32; // [esp+1Ch] [ebp-9244h]
  float v33; // [esp+20h] [ebp-9240h]
  int v34; // [esp+24h] [ebp-923Ch] BYREF
  float v35; // [esp+28h] [ebp-9238h]
  float v36; // [esp+2Ch] [ebp-9234h]
  float v37; // [esp+30h] [ebp-9230h]
  float v38; // [esp+34h] [ebp-922Ch]
  float v39; // [esp+38h] [ebp-9228h]
  float v40; // [esp+3Ch] [ebp-9224h]
  float v41; // [esp+40h] [ebp-9220h]
  float v42; // [esp+44h] [ebp-921Ch]
  float v43; // [esp+48h] [ebp-9218h]
  float v44; // [esp+4Ch] [ebp-9214h]
  float v45; // [esp+50h] [ebp-9210h]
  float v46; // [esp+54h] [ebp-920Ch]
  float v47; // [esp+58h] [ebp-9208h]
  float v48; // [esp+5Ch] [ebp-9204h]
  char v49[37368]; // [esp+68h] [ebp-91F8h] BYREF

  LODWORD(v12) = dword_301A9E2C;
  if ( dword_301A9E2C )
  {
    LODWORD(v12) = dword_30210774;
    if ( !dword_30210774 )
    {
      if ( a11 < 0 )
        a11 = 20000;
      sub_3003B600(v11, &v28);
      sub_3003C080((float *)&v31, &v28);
      sub_3003B770(&v28, (int)&v34, (int)&v31, a3);
      *(float *)&v31 = v36 * v29 - v35 * v30;
      v32 = *(float *)&v34 * v30 - v36 * v28;
      v33 = v35 * v28 - *(float *)&v34 * v29;
      v20 = *(float *)&v31 * a9;
      v24 = *(float *)&v34 * a9;
      v37 = *(float *)a2 - v20 - v24;
      v40 = v20 + *(float *)a2 - v24;
      v43 = (*(float *)&v34 + *(float *)&v31) * a9 + *(float *)a2;
      v46 = *(float *)a2 - v20 + v24;
      v25 = v32 * a9;
      v21 = v35 * a9;
      v38 = *(float *)(a2 + 4) - v25 - v21;
      v41 = v25 + *(float *)(a2 + 4) - v21;
      v44 = (v32 + v35) * a9 + *(float *)(a2 + 4);
      v47 = *(float *)(a2 + 4) - v25 + v21;
      v26 = v33 * a9;
      v22 = v36 * a9;
      v39 = *(float *)(a2 + 8) - v26 - v22;
      v42 = v26 + *(float *)(a2 + 8) - v22;
      v45 = (v33 + v36) * a9 + *(float *)(a2 + 8);
      v48 = *(float *)(a2 + 8) - v26 + v22;
      v13 = dword_30076898(43);
      v12 = (unsigned __int64)(a7 * 255.0);
      if ( v13 > 0 )
      {
        v14 = v49;
        v27 = v13;
        do
        {
          if ( *(int *)v14 > 10 )
            *(_DWORD *)v14 = 10;
          if ( *(int *)v14 > 0 )
          {
            v15 = &v49[32 * *((_DWORD *)v14 - 1) + 4628];
            v16 = *(_DWORD *)v14;
            do
            {
              HIBYTE(v23) = (unsigned __int64)(a7 * 255.0);
              BYTE2(v23) = (unsigned __int64)(a6 * 255.0);
              BYTE1(v23) = (unsigned __int64)(a5 * 255.0);
              LOBYTE(v23) = (unsigned __int64)(a4 * 255.0);
              *(_DWORD *)v15 = v23;
              v15 += 32;
              --v16;
            }
            while ( v16 );
          }
          if ( a10 )
          {
            dword_30076898(64);
          }
          else
          {
            v17 = (float *)sub_30024870();
            *((_DWORD *)v17 + 2) = dword_3020AF00;
            *((_DWORD *)v17 + 4) = a8;
            v17[3] = *((float *)v14 - 2);
            v18 = *(_DWORD *)v14;
            v17[5] = a4;
            *((_DWORD *)v17 + 10) = v18;
            v17[7] = a6;
            *((_DWORD *)v17 + 92) = a11;
            v17[6] = a5;
            v17[8] = a7;
            qmemcpy(v17 + 12, &v49[32 * *((_DWORD *)v14 - 1) + 4600], 32 * *(_DWORD *)v14);
          }
          v14 += 12;
          LODWORD(v12) = --v27;
        }
        while ( v27 );
      }
    }
  }
  return v12;
}
// 3002494B: variable 'v11' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301A9E2C: using guessed type int dword_301A9E2C;
// 3020AF00: using guessed type int dword_3020AF00;
// 30210774: using guessed type int dword_30210774;

//----- (30024C90) --------------------------------------------------------
int sub_30024C90()
{
  int result; // eax
  int v1; // esi
  int *v2; // ebp
  int v3; // eax
  double v4; // st7
  unsigned __int64 v5; // rax
  int v6; // ecx
  int v7; // ebx
  double v8; // st7
  _BYTE *v9; // edi
  int v10; // [esp+0h] [ebp-8h]
  int v11; // [esp+4h] [ebp-4h]

  result = dword_301A9E2C;
  if ( dword_301A9E2C )
  {
    v1 = dword_302FA9E4;
    if ( (int *)dword_302FA9E4 != &dword_302FA9E0 )
    {
      do
      {
        v2 = *(int **)(v1 + 4);
        v11 = *(_DWORD *)(v1 + 368);
        v3 = *(_DWORD *)(v1 + 8) + v11;
        if ( dword_3020AF00 <= v3 )
        {
          v10 = v3 - dword_3020AF00;
          v4 = (double)v11 * 0.5;
          if ( (double)(v3 - dword_3020AF00) < v4 )
          {
            v5 = (unsigned __int64)((double)v10 * 255.0 / v4);
            if ( *(_DWORD *)(v1 + 16) )
            {
              v6 = 0;
              if ( *(int *)(v1 + 40) > 0 )
              {
                HIDWORD(v5) = v1 + 79;
                do
                {
                  *(_BYTE *)HIDWORD(v5) = v5;
                  ++v6;
                  HIDWORD(v5) += 32;
                }
                while ( v6 < *(_DWORD *)(v1 + 40) );
              }
            }
            else
            {
              v7 = 0;
              if ( *(int *)(v1 + 40) > 0 )
              {
                v8 = (double)(int)(unsigned __int64)((double)v10 * 255.0 / v4);
                v9 = (_BYTE *)(v1 + 77);
                do
                {
                  *(v9 - 1) = (unsigned __int64)(v8 * *(float *)(v1 + 20));
                  *v9 = (unsigned __int64)(v8 * *(float *)(v1 + 24));
                  v9[1] = (unsigned __int64)(v8 * *(float *)(v1 + 28));
                  ++v7;
                  v9 += 32;
                }
                while ( v7 < *(_DWORD *)(v1 + 40) );
              }
            }
          }
          result = dword_30076898(64);
        }
        else
        {
          if ( !*(_DWORD *)v1 )
            sub_30021A30("CG_FreeLocalEntity: not active");
          *(_DWORD *)(*(_DWORD *)v1 + 4) = *(_DWORD *)(v1 + 4);
          result = dword_3029D9D0;
          **(_DWORD **)(v1 + 4) = *(_DWORD *)v1;
          *(_DWORD *)(v1 + 4) = result;
          dword_3029D9D0 = v1;
        }
        v1 = (int)v2;
      }
      while ( v2 != &dword_302FA9E0 );
    }
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301A9E2C: using guessed type int dword_301A9E2C;
// 3020AF00: using guessed type int dword_3020AF00;
// 3029D9D0: using guessed type int dword_3029D9D0;
// 302FA9E0: using guessed type int dword_302FA9E0;
// 302FA9E4: using guessed type int dword_302FA9E4;

//----- (30024F50) --------------------------------------------------------
int __usercall sub_30024F50@<eax>(float *a1@<esi>, int a2, int a3)
{
  int result; // eax

  result = dword_3020AFC4;
  if ( dword_3020AFC4 )
  {
    dword_30076898(72);
    sub_3001A4A0(*a1, a1[1], a1[2], a1[3], a3);
    result = dword_30076898(72);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AFC4: using guessed type int dword_3020AFC4;

//----- (30024FA0) --------------------------------------------------------
int *sub_30024FA0()
{
  int *result; // eax
  int v1; // ecx
  const char **v2; // eax

  result = sub_3001ABD0(1800, dword_302106D4);
  if ( result )
  {
    if ( *(int *)dword_301CF58C >= 0
      && *(int *)dword_301CF58C < dword_300F0FB0
      && ((1 << (dword_301CF58C[0] & 0x1F)) & dword_3020B220[*(int *)dword_301CF58C >> 5]) != 0 )
    {
      v1 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)dword_301CF58C);
    }
    else
    {
      v1 = dword_3020D238;
    }
    result = *(int **)v1;
    if ( *(_DWORD *)v1 )
    {
      v2 = (const char **)((char *)&unk_301AA4E0 + 408 * (_DWORD)result);
      if ( **(_BYTE **)(v1 + 108) )
        sub_300403F0("%s / %s", v2[41], v2[42]);
      else
        sub_300403F0("%s", v2[41]);
      dword_30076898(52);
      result = (int *)sub_30032560();
    }
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3020B220: using guessed type int dword_3020B220[];
// 3020D238: using guessed type int dword_3020D238;
// 302106D4: using guessed type int dword_302106D4;

//----- (300250C0) --------------------------------------------------------
int *__usercall sub_300250C0@<eax>(float *a1@<esi>, int a2, int a3, int a4)
{
  int *result; // eax
  int v5; // ecx
  const char **v6; // eax
  float v7; // [esp+4h] [ebp-18h]
  float v8; // [esp+8h] [ebp-14h]

  result = sub_3001ABD0(1800, dword_302106D4);
  if ( result )
  {
    if ( *(int *)dword_301CF58C >= 0
      && *(int *)dword_301CF58C < dword_300F0FB0
      && ((1 << (dword_301CF58C[0] & 0x1F)) & dword_3020B220[*(int *)dword_301CF58C >> 5]) != 0 )
    {
      v5 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)dword_301CF58C);
    }
    else
    {
      v5 = dword_3020D238;
    }
    result = *(int **)v5;
    if ( *(_DWORD *)v5 )
    {
      v6 = (const char **)((char *)&unk_301AA4E0 + 408 * (_DWORD)result);
      if ( **(_BYTE **)(v5 + 108) )
        sub_300403F0("%s / %s", v6[41], v6[42]);
      else
        sub_300403F0("%s", v6[41]);
      v7 = (double)dword_30076898(52) + 36.0;
      v8 = a1[2] + *a1 - v7;
      dword_30076898(72);
      sub_3001A4A0(v8, a1[1], v7, a1[3], a4);
      result = (int *)dword_30076898(72);
    }
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3020B220: using guessed type int dword_3020B220[];
// 3020D238: using guessed type int dword_3020D238;
// 302106D4: using guessed type int dword_302106D4;

//----- (30025200) --------------------------------------------------------
int *__usercall sub_30025200@<eax>(float *a1@<esi>)
{
  int *result; // eax
  int **v2; // eax
  char *v3; // edi

  if ( dword_3020AFC4 || (result = sub_3001ABD0(1800, dword_302106D4)) != 0 )
  {
    if ( *(int *)dword_301CF58C >= 0
      && *(int *)dword_301CF58C < dword_300F0FB0
      && ((1 << (dword_301CF58C[0] & 0x1F)) & dword_3020B220[*(int *)dword_301CF58C >> 5]) != 0 )
    {
      v2 = *(int ***)(dword_300F0FB4 + 4 * *(_DWORD *)dword_301CF58C);
    }
    else
    {
      v2 = (int **)dword_3020D238;
    }
    result = *v2;
    if ( result )
    {
      v3 = (char *)&unk_301AA4E0 + 408 * (_DWORD)result;
      result = (int *)*((_DWORD *)v3 + 71);
      if ( result )
      {
        dword_30076898(72);
        sub_3001A4A0(*a1, a1[1], a1[2], a1[3], *((_DWORD *)v3 + 71));
        result = (int *)dword_30076898(72);
      }
    }
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3020AFC4: using guessed type int dword_3020AFC4;
// 3020B220: using guessed type int dword_3020B220[];
// 3020D238: using guessed type int dword_3020D238;
// 302106D4: using guessed type int dword_302106D4;

//----- (300252C0) --------------------------------------------------------
int __cdecl sub_300252C0(float *a1, int a2)
{
  int v2; // ecx
  float *v3; // edi
  int v4; // esi
  bool v5; // cc
  int v6; // eax
  int v7; // eax
  int v8; // ecx
  int v9; // esi
  int v10; // eax
  int v11; // ebx
  char *v12; // edi
  double v13; // st7
  int i; // esi
  char *v15; // ecx
  int *v16; // eax
  double v17; // st7
  int v19; // [esp+10h] [ebp-174h]
  int *v20; // [esp+14h] [ebp-170h]
  float v21; // [esp+14h] [ebp-170h]
  int v22; // [esp+18h] [ebp-16Ch]
  int v23; // [esp+1Ch] [ebp-168h]
  float v24; // [esp+20h] [ebp-164h] BYREF
  float v25; // [esp+24h] [ebp-160h]
  float v26; // [esp+28h] [ebp-15Ch]
  float v27; // [esp+2Ch] [ebp-158h]
  int v28; // [esp+30h] [ebp-154h]
  int v29; // [esp+34h] [ebp-150h]
  int v30; // [esp+38h] [ebp-14Ch]
  int v31; // [esp+3Ch] [ebp-148h]
  float v32; // [esp+40h] [ebp-144h]
  int v33[4]; // [esp+44h] [ebp-140h]
  int v34[24]; // [esp+54h] [ebp-130h]
  int v35[24]; // [esp+B4h] [ebp-D0h]
  int v36[24]; // [esp+114h] [ebp-70h]
  int v37[4]; // [esp+174h] [ebp-10h] BYREF

  v2 = dword_3020AF00;
  v3 = a1;
  if ( dword_301DEC4C )
  {
    if ( dword_30076984 > dword_3020AF00 || dword_30076988 != (dword_3020AF20 & 3) )
      dword_30076984 = dword_3020AF00;
  }
  else
  {
    dword_30076984 = -1;
  }
  v29 = *(_DWORD *)a2;
  v30 = *(_DWORD *)(a2 + 4);
  v4 = *(_DWORD *)(a2 + 8);
  v27 = (flt_30211708 - 1.0) * 112.0 + *a1;
  dword_30076988 = dword_3020AF20 & 3;
  v31 = v4;
  if ( (dword_3020AF20 & 0x8000) != 0 )
  {
    v5 = dword_3007698C <= dword_3020AF00;
    if ( dword_3007698C >= dword_3020AF00 )
      goto LABEL_10;
    dword_3007698C = dword_3020AF00 + 1500;
  }
  v5 = dword_3007698C <= dword_3020AF00;
LABEL_10:
  if ( !v5 )
  {
    sub_30023B20("cgame", "CGAME_PRONE_BLOCKED");
    v6 = dword_30076898(52);
    v32 = fabs(sin((double)(dword_3007698C - dword_3020AF00) * 0.00066666666 * 540.0 * 3.1415927 * 0.0055555557));
    v25 = 320.0 - (double)v6 * 0.5;
    dword_30076898(54);
    v2 = dword_3020AF00;
  }
  if ( dword_30076984 + 3000 > v2 )
  {
    v36[3] = 0;
    v36[4] = 0;
    v36[5] = 0;
    v36[7] = 0;
    v36[8] = 0;
    v36[21] = 0;
    v36[9] = 0;
    v36[22] = 0;
    v36[10] = 0;
    v36[23] = 0;
    v36[11] = 0;
    v36[19] = (int)"+prone";
    v35[10] = 0;
    v35[21] = (int)"+prone";
    v35[1] = 0;
    v35[11] = 0;
    v36[18] = (int)"goprone";
    v35[2] = 0;
    v35[18] = (int)"goprone";
    v35[13] = 0;
    v34[1] = 0;
    v36[0] = (int)"+gostand";
    v35[6] = (int)"+gostand";
    v34[6] = (int)"+gostand";
    v35[3] = 0;
    v35[14] = 0;
    v35[20] = (int)"toggleprone";
    v34[2] = 0;
    v34[7] = (int)"toggleprone";
    v35[4] = 0;
    v35[15] = 0;
    v34[3] = 0;
    v34[9] = 0;
    v35[5] = 0;
    v35[16] = 0;
    v34[4] = 0;
    v34[10] = 0;
    v34[19] = 0;
    v36[1] = (int)"+moveup";
    v36[2] = 0;
    v36[6] = 0;
    v36[12] = (int)"gocrouch";
    v36[13] = (int)"togglecrouch";
    v36[14] = (int)"lowerstance";
    v36[15] = (int)"+movedown";
    v36[16] = 0;
    v36[17] = 0;
    v36[20] = 0;
    v35[0] = 0;
    v35[7] = (int)"raisestance";
    v35[8] = (int)"+moveup";
    v35[9] = 0;
    v35[12] = 0;
    v35[17] = 0;
    v35[19] = (int)"lowerstance";
    v35[22] = 0;
    v35[23] = 0;
    v34[0] = 0;
    v34[5] = 0;
    v34[8] = 0;
    v34[11] = 0;
    v34[12] = (int)"gocrouch";
    v34[13] = (int)"togglecrouch";
    v34[14] = (int)"raisestance";
    v34[15] = (int)"+movedown";
    v34[16] = (int)"+moveup";
    v34[17] = 0;
    v34[18] = 0;
    v34[20] = 0;
    v34[21] = 0;
    v34[22] = 0;
    v34[23] = 0;
    v33[0] = (int)"CGAME_STANCEHINT_JUMP";
    v33[1] = (int)"CGAME_STANCEHINT_STAND";
    v33[2] = (int)"CGAME_STANCEHINT_CROUCH";
    v33[3] = (int)"CGAME_STANCEHINT_PRONE";
    sub_300484D0();
    if ( dword_30076984 + 2000 <= dword_3020AF00 )
      v32 = (double)(dword_30076984 - dword_3020AF00 + 3000) * 0.001;
    else
      v32 = 1.0;
    v7 = dword_30076898(53);
    v8 = dword_30076988 & 1;
    v9 = 0;
    v25 = (float)v7;
    v20 = v37;
    v10 = 0;
    v26 = 0.0;
    v22 = v8;
    v19 = 0;
    v23 = 0;
    while ( 2 )
    {
      v11 = 0;
      *v20 = 0;
      if ( v8 )
      {
        v12 = *(char **)((char *)v34 + v10);
      }
      else if ( (dword_30076988 & 2) != 0 )
      {
        v12 = *(char **)((char *)v35 + v10);
      }
      else
      {
        v12 = *(char **)((char *)v36 + v10);
      }
      v24 = *(float *)&v12;
      while ( v12 )
      {
        if ( sub_30048750(v12) )
        {
          *v20 = (int)v12;
          ++LODWORD(v26);
          break;
        }
        ++v11;
        v9 += 4;
        if ( v22 )
        {
          v12 = *(char **)((char *)v34 + v9);
        }
        else if ( (dword_30076988 & 2) != 0 )
        {
          v12 = *(char **)((char *)v35 + v9);
        }
        else
        {
          v12 = *(char **)((char *)v36 + v9);
        }
        if ( v11 >= 6 )
          break;
      }
      v10 = v23 + 24;
      v9 = v19 + 24;
      v5 = v23 + 24 < 96;
      v24 = *(float *)&v12;
      v23 += 24;
      v19 += 24;
      ++v20;
      if ( v5 )
      {
        v8 = v22;
        continue;
      }
      break;
    }
    v3 = a1;
    v21 = a1[3] * 0.5 + a1[1] - 1.5;
    if ( LODWORD(v26) == 1 )
    {
      v13 = v25 * 0.5 + v21;
    }
    else
    {
      if ( LODWORD(v26) != 3 )
        goto LABEL_40;
      v13 = v21 - (v25 * 0.5 + 1.5);
    }
    v21 = v13;
LABEL_40:
    for ( i = 0; i < 4; ++i )
    {
      v15 = (char *)v37[i];
      if ( v15 )
      {
        sub_30048880(&v24, v15);
        v16 = sub_30023B20("cgame", (const char *)v33[i]);
        sub_300403F0((const char *)v16, v24);
        v26 = v27 + a1[2];
        dword_30076898(54);
        v21 = v25 + v21 + 1.5;
      }
    }
  }
  v32 = *(float *)(a2 + 12);
  dword_30076898(72);
  v26 = flt_301D5A48 * v3[3];
  v24 = flt_301D5A48 * v3[1];
  v25 = 0.0;
  *(float *)&v28 = flt_301D5A44 * v27;
  dword_30076898(73);
  if ( dword_30076984 + 1000 > dword_3020AF00 )
  {
    if ( flt_301DFC08 >= 0.0 )
    {
      if ( flt_301DFC08 <= 1.0 )
        v29 = LODWORD(flt_301DFC08);
      else
        v29 = 1065353216;
    }
    else
    {
      v29 = 0;
    }
    if ( flt_3029BDC8 >= 0.0 )
    {
      if ( flt_3029BDC8 <= 1.0 )
        v30 = LODWORD(flt_3029BDC8);
      else
        v30 = 1065353216;
    }
    else
    {
      v30 = 0;
    }
    if ( flt_301E2EA8 >= 0.0 )
    {
      if ( flt_301E2EA8 <= 1.0 )
        v31 = LODWORD(flt_301E2EA8);
      else
        v31 = 1065353216;
    }
    else
    {
      v31 = 0;
    }
    v28 = dword_30076984 - dword_3020AF00 + 1000;
    v32 = (double)v28 * 0.001 * 0.80000001;
    dword_30076898(72);
    v17 = flt_301D5A48 * v3[3];
    *(float *)&v28 = 1.0;
    v25 = v17;
    v26 = flt_301D5A44 * v3[2];
    v27 = flt_301D5A44 * v27;
    dword_30076898(73);
  }
  return dword_30076898(72);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30076984: using guessed type int dword_30076984;
// 30076988: using guessed type int dword_30076988;
// 3007698C: using guessed type int dword_3007698C;
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301D9880: using guessed type int dword_301D9880;
// 301D9884: using guessed type int dword_301D9884;
// 301D9888: using guessed type int dword_301D9888;
// 301D988C: using guessed type int dword_301D988C;
// 301DEC4C: using guessed type int dword_301DEC4C;
// 301DFC08: using guessed type float flt_301DFC08;
// 301E2EA8: using guessed type float flt_301E2EA8;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF20: using guessed type int dword_3020AF20;
// 30211708: using guessed type float flt_30211708;
// 3029BDC8: using guessed type float flt_3029BDC8;

//----- (30025B70) --------------------------------------------------------
int __usercall sub_30025B70@<eax>(float *a1@<eax>)
{
  float v2; // [esp+0h] [ebp-10h]
  float v3; // [esp+4h] [ebp-Ch]
  float v4; // [esp+8h] [ebp-8h]
  float v5; // [esp+Ch] [ebp-4h]

  v5 = (*a1 - -25.0) * flt_30211708 - 25.0;
  v4 = (a1[1] - 345.0) * flt_30211708 + 345.0 - (flt_30211708 - 1.0) * 160.0;
  v3 = flt_30211708 * a1[2];
  v2 = flt_30211708 * a1[3];
  sub_3001AD70();
  dword_30076898(72);
  sub_3001A500(v5, v4, v3, v2, dword_30210E60);
  return dword_30076898(72);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30211708: using guessed type float flt_30211708;

//----- (30025C30) --------------------------------------------------------
int __usercall sub_30025C30@<eax>(float *a1@<edi>, float *a2@<esi>, int a3)
{
  int v3; // ebx
  double v4; // st7
  double v5; // st7
  int v6; // ebx
  double v7; // st7
  double v8; // st7
  float v10; // [esp+8h] [ebp-14h]
  float v11; // [esp+Ch] [ebp-10h]
  float v12; // [esp+Ch] [ebp-10h]
  float v13; // [esp+10h] [ebp-Ch]
  float v14; // [esp+10h] [ebp-Ch]
  float v15; // [esp+14h] [ebp-8h]
  float v16; // [esp+14h] [ebp-8h]
  float v17; // [esp+18h] [ebp-4h]
  float v18; // [esp+18h] [ebp-4h]

  v3 = dword_301E5F20 + 12;
  if ( *(_DWORD *)(dword_301E5F20 + 256)
    && *(_DWORD *)(dword_301E5F20 + 264)
    && (v4 = (double)*(int *)(dword_301E5F20 + 256) / (double)*(int *)(dword_301E5F20 + 264), v10 = v4, v4 >= 0.0) )
  {
    if ( v10 > 1.0 )
      v10 = 1.0;
  }
  else
  {
    v10 = 0.0;
  }
  if ( v10 > 0.0 )
  {
    v17 = flt_301D5A44 * *a1;
    v15 = a1[1] * flt_301D5A48;
    v13 = v10 * a1[2] * flt_301D5A44;
    v11 = a1[3] * flt_301D5A48;
    if ( v10 <= 0.5 )
    {
      a2[1] = (v10 + 0.2) * a2[1] + 0.30000001;
    }
    else
    {
      v5 = 1.0 - v10;
      *a2 = v5 * *a2 + v5 * *a2;
      a2[2] = v5 * a2[2] + v5 * a2[2];
    }
    dword_30076898(72);
    sub_30032820(LODWORD(v17), LODWORD(v15), LODWORD(v13), LODWORD(v11), 0, 0, LODWORD(v10), 1065353216, a3);
  }
  v6 = *(_DWORD *)(v3 + 172);
  if ( dword_30076998 == v6 )
  {
    if ( v10 >= (double)*(float *)&dword_300F0F94 )
    {
      dword_300F0F94 = LODWORD(v10);
      dword_30076994 = dword_30076990;
    }
    else if ( dword_30076994 )
    {
      dword_30076994 -= dword_3020AEFC;
      if ( dword_30076994 < 0 )
        dword_30076994 = 0;
    }
    else
    {
      v7 = *(float *)&dword_300F0F94 - (double)dword_3020AEFC * 0.0012000001;
      *(float *)&dword_300F0F94 = v7;
      if ( v7 <= v10 )
      {
        dword_300F0F94 = LODWORD(v10);
        dword_30076994 = dword_30076990;
      }
    }
  }
  else
  {
    dword_30076998 = v6;
    dword_300F0F94 = LODWORD(v10);
    dword_30076994 = dword_30076990;
  }
  if ( *(float *)&dword_300F0F94 > (double)v10 )
  {
    v18 = (v10 * a1[2] + *a1) * flt_301D5A44;
    v16 = a1[1] * flt_301D5A48;
    v14 = (*(float *)&dword_300F0F94 - v10) * a1[2] * flt_301D5A44;
    v8 = a1[3] * flt_301D5A48;
    *a2 = 1.0;
    a2[1] = 0.0;
    v12 = v8;
    a2[2] = 0.0;
    dword_30076898(72);
    sub_30032820(
      LODWORD(v18),
      LODWORD(v16),
      LODWORD(v14),
      LODWORD(v12),
      LODWORD(v10),
      0,
      dword_300F0F94,
      1065353216,
      a3);
  }
  return dword_30076898(72);
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30076990: using guessed type int dword_30076990;
// 30076994: using guessed type int dword_30076994;
// 30076998: using guessed type int dword_30076998;
// 300F0F94: using guessed type int dword_300F0F94;
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (30025EC0) --------------------------------------------------------
int sub_30025EC0()
{
  sub_30023B20("cgame", "CGAME_HEALTH");
  return dword_30076898(54);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30025F30) --------------------------------------------------------
int __usercall sub_30025F30@<eax>(int a1@<eax>, int a2, unsigned int a3)
{
  int v3; // esi
  _BYTE *v4; // ecx
  char *v5; // eax
  int v6; // edx
  char v7; // cl

  if ( a1 <= 0 || a1 >= 128 )
    return 0;
  v3 = a1 + 1500;
  if ( a1 + 1500 < 0 || v3 >= 2048 )
    sub_30021A30("CG_ConfigString: bad index: %i", a1 + 1500);
  v4 = &byte_301D1B20[dword_301CFB20[v3]];
  if ( !*v4 || strlen(&byte_301D1B20[dword_301CFB20[v3]]) >= a3 )
    return 0;
  v5 = &byte_301D1B20[dword_301CFB20[v3]];
  v6 = a2 - (_DWORD)v4;
  do
  {
    v7 = *v5;
    v5[v6] = *v5;
    ++v5;
  }
  while ( v7 );
  return 1;
}
// 301CFB20: using guessed type int dword_301CFB20[];

//----- (30025FB0) --------------------------------------------------------
int __cdecl sub_30025FB0(int a1)
{
  int v1; // ecx
  int v2; // esi
  char v3; // al
  char *i; // ecx
  const char *v5; // eax
  const char *v6; // edx
  unsigned int v7; // eax
  char *v8; // edi
  int v11[2]; // [esp+4h] [ebp-50h]
  const char *v12; // [esp+Ch] [ebp-48h] BYREF
  char v13[64]; // [esp+10h] [ebp-44h] BYREF
  unsigned int v14; // [esp+50h] [ebp-4h]
  unsigned int retaddr; // [esp+54h] [ebp+0h]

  v14 = retaddr ^ dword_300705C0;
  v2 = v1;
  v11[0] = (int)&byte_30063AC4;
  v11[1] = (int)"_up";
  v12 = "_down";
  if ( !a1 || !sub_30025F30(a1, (int)v13, 0x40u) )
    return sub_30052A2E(retaddr ^ v14);
  v3 = v13[0];
  for ( i = v13; v3; v3 = *++i )
  {
    if ( v3 == 46 )
      break;
    *i = v3;
  }
  v5 = (const char *)v11[v2];
  *i = 0;
  v6 = v5;
  v7 = strlen(v5) + 1;
  v8 = (char *)&v12 + 3;
  while ( *++v8 )
    ;
  qmemcpy(v8, v6, v7);
  sub_30020CA0(0);
  dword_30076898(88);
  return sub_30052A2E(retaddr ^ v14);
}
// 30025FC7: variable 'v1' is possibly undefined
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30026090) --------------------------------------------------------
int __usercall sub_30026090@<eax>(float *a1@<eax>, int a2, int *a3)
{
  int result; // eax
  int i; // edi
  _DWORD *v6; // esi
  int v7; // eax
  float *v8; // eax
  float v9; // ecx
  float v10; // edx
  float v11; // eax
  int v12; // ecx
  int v13; // edx
  int v14; // esi
  float v15; // [esp+10h] [ebp-5Ch]
  float v16; // [esp+10h] [ebp-5Ch]
  float v17; // [esp+14h] [ebp-58h]
  float v18; // [esp+14h] [ebp-58h]
  float v19; // [esp+18h] [ebp-54h]
  float v20; // [esp+1Ch] [ebp-50h]
  float v21; // [esp+20h] [ebp-4Ch]
  float v22; // [esp+20h] [ebp-4Ch]
  float v23; // [esp+20h] [ebp-4Ch]
  float v24; // [esp+20h] [ebp-4Ch]
  float v25; // [esp+20h] [ebp-4Ch]
  float v26; // [esp+20h] [ebp-4Ch]
  float v27; // [esp+24h] [ebp-48h]
  float v28; // [esp+28h] [ebp-44h]
  float v29; // [esp+2Ch] [ebp-40h]
  float v30; // [esp+30h] [ebp-3Ch]
  float v31; // [esp+34h] [ebp-38h]
  float v32; // [esp+34h] [ebp-38h]
  float v33; // [esp+34h] [ebp-38h]
  float v34; // [esp+34h] [ebp-38h]
  float v35; // [esp+34h] [ebp-38h]
  float v36; // [esp+38h] [ebp-34h]
  float v37; // [esp+3Ch] [ebp-30h]
  float v38; // [esp+40h] [ebp-2Ch]
  float v39; // [esp+44h] [ebp-28h] BYREF
  float v40; // [esp+48h] [ebp-24h]
  float v41; // [esp+4Ch] [ebp-20h]
  float v42; // [esp+50h] [ebp-1Ch]
  float v43; // [esp+54h] [ebp-18h]
  float v44; // [esp+58h] [ebp-14h]
  int v45; // [esp+5Ch] [ebp-10h]
  int v46; // [esp+60h] [ebp-Ch]
  int v47; // [esp+64h] [ebp-8h]
  float v48; // [esp+68h] [ebp-4h]

  sub_3001B0A0();
  result = dword_3018DC8C[300 * *(_DWORD *)(dword_301E5F20 + 184)];
  v36 = flt_30211708 * a1[2] * 0.5 + *a1;
  v37 = flt_30211708 * a1[3] * 0.5 + a1[1] - (flt_30211708 - 1.0) * 160.0;
  if ( result )
  {
    for ( i = 0; i < 448; i += 28 )
    {
      v6 = (_DWORD *)(i + dword_301E5F20 + 1012);
      if ( *v6 == 4 )
      {
        v7 = *(_DWORD *)(i + dword_301E5F20 + 1028);
        if ( v7 == 1023 )
        {
          v9 = *(float *)(i + dword_301E5F20 + 1016);
          v10 = *(float *)(i + dword_301E5F20 + 1020);
          v11 = *(float *)(i + dword_301E5F20 + 1024);
        }
        else
        {
          v8 = (float *)((char *)&unk_30211940 + 552 * v7);
          v9 = v8[126];
          v10 = v8[127];
          v11 = v8[128];
        }
        v42 = v9;
        v43 = v10;
        v44 = v11;
        v39 = v9 - flt_3020D348;
        v40 = v10 - flt_3020D34C;
        v41 = v11 - flt_3020D350;
        v21 = (float)(unsigned __int16)(unsigned __int64)((sub_3003BA90(&v39) - flt_30210E68) * 182.04445);
        v31 = v21 * 0.0054931641;
        v22 = sqrt(v40 * v40 + v39 * v39);
        v12 = *a3;
        v13 = a3[1];
        v15 = v22;
        v47 = a3[2];
        v45 = v12;
        v46 = v13;
        if ( v22 > (double)*(float *)&dword_301B0D28 )
        {
          if ( v22 < (double)flt_301DEB28 )
          {
            v27 = 0.0;
            v23 = flt_301DEB28 - *(float *)&dword_301B0D28;
            if ( v23 != 0.0 )
              v27 = (v15 - *(float *)&dword_301B0D28) / v23;
            v48 = 1.0 - (1.0 - flt_301DD148) * v27;
          }
          else
          {
            v48 = flt_301DD148;
          }
        }
        else
        {
          v48 = 1.0;
        }
        if ( v15 > (double)flt_301DF788 )
        {
          if ( v15 < (double)*(float *)&dword_301B0D28 )
          {
            v28 = 0.0;
            v24 = *(float *)&dword_301B0D28 - flt_301DF788;
            if ( v24 != 0.0 )
              v28 = (*(float *)&dword_301B0D28 - v15) / v24;
            v17 = 1.0 - (1.0 - flt_301E3568) * v28;
          }
          else
          {
            v17 = 1.0;
          }
        }
        else
        {
          v17 = flt_301E3568;
        }
        v18 = flt_30211708 * v17 * 43.75;
        v32 = v31 * 3.1415927 / 180.0;
        v20 = cos(v32);
        v19 = sin(v32);
        v33 = flt_30211708 * 20.0;
        v29 = v33;
        v30 = v33;
        v34 = v36 - v33 * 0.5 - v19 * v18;
        v14 = sub_30025FB0(v6[6]);
        dword_30076898(72);
        v38 = flt_301D5A44 * v34;
        v25 = v37 - v30 * 0.5 - v20 * v18;
        v16 = flt_301D5A48 * v25;
        v26 = flt_301D5A44 * v29;
        v35 = flt_301D5A48 * v30;
        sub_30032820(LODWORD(v38), LODWORD(v16), LODWORD(v26), LODWORD(v35), 0, 0, 1065353216, 1065353216, v14);
      }
    }
    result = dword_30076898(72);
  }
  return result;
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301B0D28: using guessed type int dword_301B0D28;
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301DD148: using guessed type float flt_301DD148;
// 301DEB28: using guessed type float flt_301DEB28;
// 301DF788: using guessed type float flt_301DF788;
// 301E3568: using guessed type float flt_301E3568;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 30211708: using guessed type float flt_30211708;

//----- (30026490) --------------------------------------------------------
int __usercall sub_30026490@<eax>(float *a1@<eax>, int a2)
{
  float v3; // [esp+0h] [ebp-10h]
  float v4; // [esp+4h] [ebp-Ch]
  float v5; // [esp+8h] [ebp-8h]
  float v6; // [esp+Ch] [ebp-4h]

  v6 = ((*a1 - -25.0) * flt_30211708 - 25.0) * flt_301D5A44;
  v5 = ((a1[1] - 345.0) * flt_30211708 + 345.0 - (flt_30211708 - 1.0) * 160.0) * flt_301D5A48;
  v4 = flt_30211708 * a1[2] * flt_301D5A44;
  v3 = flt_30211708 * a1[3] * flt_301D5A48;
  dword_30076898(72);
  sub_30032820(LODWORD(v6), LODWORD(v5), LODWORD(v4), LODWORD(v3), 0, 0, 1065353216, 1065353216, a2);
  return dword_30076898(72);
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 30211708: using guessed type float flt_30211708;

//----- (30026560) --------------------------------------------------------
int __cdecl sub_30026560(float *a1, int a2, int a3)
{
  float *v3; // ebp
  int v4; // edi
  int v5; // esi
  int v6; // eax
  int *v7; // eax
  bool v8; // cc
  double v9; // st7
  int v10; // edi
  int v11; // esi
  char *v12; // ebx
  double v13; // st7
  int v14; // eax
  int *v15; // esi
  int *v16; // eax
  const char *v17; // eax
  int *v18; // esi
  int *v19; // eax
  const char *v20; // eax
  int *v21; // edi
  char *v22; // eax
  char *v23; // ebx
  char *v24; // ebx
  const char *v25; // eax
  const char *v26; // esi
  unsigned int v27; // eax
  char *v28; // edi
  unsigned int v30; // eax
  char *v31; // edi
  int *v33; // esi
  char *v34; // eax
  char *v35; // ebx
  char *v36; // ebx
  const char *v37; // eax
  const char *v38; // esi
  unsigned int v39; // eax
  char *v40; // edi
  unsigned int v42; // eax
  char *v43; // edi
  _BYTE *v45; // eax
  int v46; // eax
  const char *v47; // ebp
  char *v48; // edx
  char v49; // cl
  char *v50; // eax
  int v51; // ebx
  int v52; // ebx
  int *v53; // eax
  int *v54; // esi
  unsigned int v55; // eax
  char *v56; // edi
  unsigned int v58; // eax
  char *v59; // edi
  int *v61; // eax
  int *v62; // eax
  float v64; // [esp+10h] [ebp-848h]
  float v65; // [esp+14h] [ebp-844h]
  const char *v66; // [esp+18h] [ebp-840h]
  const char *v67; // [esp+18h] [ebp-840h]
  float v68; // [esp+18h] [ebp-840h]
  float v69; // [esp+1Ch] [ebp-83Ch]
  const char *v70; // [esp+20h] [ebp-838h]
  const char *v71; // [esp+20h] [ebp-838h]
  char *v72; // [esp+34h] [ebp-824h]
  char *v73; // [esp+34h] [ebp-824h]
  int *v74; // [esp+38h] [ebp-820h] BYREF
  int *v75; // [esp+3Ch] [ebp-81Ch]
  float v76; // [esp+40h] [ebp-818h]
  float v77; // [esp+44h] [ebp-814h]
  float v78; // [esp+48h] [ebp-810h]
  float v79; // [esp+4Ch] [ebp-80Ch]
  int v80; // [esp+50h] [ebp-808h] BYREF
  char Destination[1023]; // [esp+54h] [ebp-804h] BYREF
  char v82; // [esp+453h] [ebp-405h] BYREF
  char Str[1024]; // [esp+454h] [ebp-404h] BYREF
  unsigned int v84; // [esp+854h] [ebp-4h]
  unsigned int retaddr; // [esp+858h] [ebp+0h]

  v3 = a1;
  v4 = dword_3029D44C;
  v84 = retaddr ^ dword_300705C0;
  v79 = 1.0;
  v78 = 0.0;
  if ( dword_3029D44C )
  {
    sub_30017FA0();
    v5 = dword_30210698;
    v6 = dword_301D9658[dword_30210698];
    v80 = v6;
    if ( dword_30210698 < 0 || dword_30210698 > 1 )
    {
      if ( v6 )
      {
        v7 = sub_3001ABD0(dword_302106A0, dword_3021069C);
        v75 = v7;
        if ( v7 )
        {
          v8 = v4 < 3;
          if ( v4 == 3 )
          {
            *((float *)v7 + 3) = (sin((double)dword_3020AF00 * 0.0066666668) + 1.0) * *((float *)v7 + 3) * 0.5;
            v4 = dword_3029D44C;
            v5 = dword_30210698;
            v8 = dword_3029D44C < 3;
          }
          if ( v8 )
          {
            if ( v4 == 2 )
            {
              LODWORD(v76) = dword_3021069C % 1000;
              v9 = (double)(dword_3021069C % 1000) * 0.0099999998;
            }
            else
            {
              v9 = (sin((double)dword_3020AF00 * 0.0066666668) + 1.0) * 0.5 * 10.0;
            }
            v77 = v9;
            v76 = v77 * 0.5;
          }
          else
          {
            v76 = 0.0;
            v77 = 0.0;
          }
          if ( v5 < 10 || v5 > 73 )
          {
            if ( v5 < 74 || v5 > 137 )
            {
              if ( dword_302106A8 < 0 )
              {
                if ( v5 == 7 )
                {
                  sub_300484D0();
                  sub_30048880(&v74, "+activate");
                  v61 = sub_30023B20("cgame", "CGAME_PICKUPHEALTH");
                  sub_300403F0((const char *)v61, v74);
                  sub_30032510();
                  sub_30032540(a2, a3);
                  sub_30032560();
                }
              }
              else
              {
                v45 = sub_30022DE0(dword_302106A8 + 1212);
                if ( v45 && *v45 )
                {
                  v46 = sub_30023C90();
                  v47 = (const char *)v46;
                  v48 = &Str[-v46];
                  do
                  {
                    v49 = *(_BYTE *)v46;
                    v48[v46] = *(_BYTE *)v46;
                    ++v46;
                  }
                  while ( v49 );
                  sub_30040230(Str);
                  v50 = strstr(Str, "[%s]");
                  if ( v50 )
                  {
                    v51 = v50 - Str;
                    strncpy(Str, v47, v50 - Str + 1);
                    Str[v51 + 1] = 0;
                    v52 = v51 + 3;
                    sub_300484D0();
                    if ( sub_30048880(&v74, "+activate") )
                      v53 = v74;
                    else
                      v53 = sub_30023B20("cgame", "KEY_USE");
                    v54 = v53;
                    v55 = strlen((const char *)v53) + 1;
                    v56 = &v82;
                    while ( *++v56 )
                      ;
                    qmemcpy(v56, v54, v55);
                    v58 = strlen(&v47[v52]) + 1;
                    v59 = &v82;
                    while ( *++v59 )
                      ;
                    qmemcpy(v59, &v47[v52], v58);
                  }
                  sub_30032510();
                  sub_30032540(a2, a3);
                  sub_30032560();
                  v3 = a1;
                }
              }
            }
            else
            {
              v73 = (char *)&unk_301AA4E0 + 408 * v5 - 29784;
              v33 = sub_30023B20("cgame", "CGAME_PICKUPAMMO");
              v34 = strstr((const char *)v33, "[%s]");
              v35 = v34;
              if ( v34 && *v34 )
              {
                sub_300484D0();
                sub_30048880(&v74, "+activate");
                v36 = v35 + 1;
                strncpy(Destination, (const char *)v33, v36 - (char *)v33);
                v37 = (const char *)v74;
                Destination[v36 - (char *)v33] = 0;
                v38 = v37;
                v39 = strlen(v37) + 1;
                v40 = (char *)&v80 + 3;
                while ( *++v40 )
                  ;
                qmemcpy(v40, v38, v39);
                v42 = strlen(v36 + 2) + 1;
                v43 = (char *)&v80 + 3;
                while ( *++v43 )
                  ;
                qmemcpy(v43, v36 + 2, v42);
              }
              else
              {
                strcpy(Destination, (const char *)v33);
              }
              sub_300403F0(Destination, *((_DWORD *)v73 + 41));
              sub_30032510();
              sub_30032540(a2, a3);
              sub_30032560();
            }
          }
          else
          {
            v10 = *(_DWORD *)(dword_300F0FB4 + 4 * v5 - 36);
            v11 = v5 - 9;
            v12 = (char *)&unk_301AA4E0 + 408 * v11;
            v72 = v12;
            if ( *(_DWORD *)(v10 + 740) )
            {
              v13 = a1[2];
              v79 = 2.0;
              v78 = v13 * -0.5;
            }
            if ( sub_30010460(v11, (int)&dword_3020AF14) )
            {
              v21 = sub_30023B20("cgame", "CGAME_PICKUPNEWWEAPON");
              v22 = strstr((const char *)v21, "[%s]");
              v23 = v22;
              if ( v22 && *v22 )
              {
                sub_300484D0();
                sub_30048880(&v74, "+activate");
                v24 = v23 + 1;
                strncpy(Destination, (const char *)v21, v24 - (char *)v21);
                v25 = (const char *)v74;
                Destination[v24 - (char *)v21] = 0;
                v26 = v25;
                v27 = strlen(v25) + 1;
                v28 = (char *)&v80 + 3;
                while ( *++v28 )
                  ;
                qmemcpy(v28, v26, v27);
                v30 = strlen(v24 + 2) + 1;
                v31 = (char *)&v80 + 3;
                while ( *++v31 )
                  ;
                qmemcpy(v31, v24 + 2, v30);
              }
              else
              {
                strcpy(Destination, (const char *)v21);
              }
              sub_300403F0(Destination, *((_DWORD *)v72 + 41));
            }
            else
            {
              sub_300484D0();
              sub_30048880(&v74, "+activate");
              v14 = *(_DWORD *)(v10 + 120);
              if ( *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * dword_3020AFC4) + 120) == v14 )
              {
                if ( dword_3020AFC4 == v11 )
                  return sub_30052A2E(retaddr ^ v84);
                v15 = sub_30023B20("cgame", "CGAME_FOR");
                v16 = sub_30023B20("cgame", "CGAME_SWAPWEAPONS");
                v70 = (const char *)*((_DWORD *)v12 + 41);
                v66 = (const char *)dword_301AA584[102 * dword_3020AFC4];
                v17 = (const char *)sub_300403F0((const char *)v16, v74);
                sub_300403F0("%s %s %s %s", v17, v66, (const char *)v15, v70);
              }
              else
              {
                if ( byte_3020B228[v14] == v11 )
                  return sub_30052A2E(retaddr ^ v84);
                v18 = sub_30023B20("cgame", "CGAME_FOR");
                v19 = sub_30023B20("cgame", "CGAME_SWAPWEAPONS");
                v71 = (const char *)*((_DWORD *)v12 + 41);
                v67 = (const char *)dword_301AA584[102 * byte_3020B228[*(_DWORD *)(v10 + 120)]];
                v20 = (const char *)sub_300403F0((const char *)v19, v74);
                sub_300403F0("%s %s %s %s", v20, v67, (const char *)v18, v71);
              }
            }
            sub_30032510();
            sub_30032540(a2, a3);
            sub_30032560();
          }
          dword_30076898(72);
          v69 = v3[3] + v77;
          v68 = v79 * v3[2] + v77;
          v65 = v3[1] - v76;
          v64 = *v3 - v76 + v78;
          sub_3001A4A0(v64, v65, v68, v69, v80);
          dword_30076898(72);
          if ( dword_302106A4 )
          {
            v62 = v75;
            *v75 = 0;
            v62[1] = 0;
            v62[2] = 1065353216;
            v62[3] = 1056964608;
            sub_30019FD0(0, 0);
          }
        }
        else
        {
          dword_30076898(72);
          dword_30210698 = 0;
        }
      }
    }
  }
  return sub_30052A2E(retaddr ^ v84);
}
// 30032540: using guessed type double __cdecl sub_30032540(_DWORD, _DWORD);
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301AA584: using guessed type int dword_301AA584[];
// 301D9658: using guessed type int dword_301D9658[];
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020AFC4: using guessed type int dword_3020AFC4;
// 30210698: using guessed type int dword_30210698;
// 3021069C: using guessed type int dword_3021069C;
// 302106A0: using guessed type int dword_302106A0;
// 302106A4: using guessed type int dword_302106A4;
// 302106A8: using guessed type int dword_302106A8;
// 3029D44C: using guessed type int dword_3029D44C;

//----- (30026E20) --------------------------------------------------------
char *__usercall sub_30026E20@<eax>(int a1@<edi>, int a2)
{
  char *result; // eax
  int v3; // ebp
  int v4; // eax
  int v5; // ebp
  int v6; // ecx
  int v7; // ebp
  int v8; // [esp+0h] [ebp-14h]
  int v9; // [esp+4h] [ebp-10h]
  int v10; // [esp+8h] [ebp-Ch]

  result = (char *)dword_3020AFC4;
  if ( dword_3020AFC4 )
  {
    result = (char *)&unk_30211940 + 552 * *(_DWORD *)(dword_301E5F20 + 184);
    if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0x20000) == 0
      || (v3 = *(_DWORD *)dword_301CF58C, *(int *)dword_301CF58C < 0)
      || *(int *)dword_301CF58C >= dword_300F0FB0 )
    {
      v3 = *((_DWORD *)result + 50);
    }
    if ( v3 )
    {
      v8 = 1;
      v10 = 1;
      v4 = sub_30010700(v3, (int)&dword_3020AF14);
      v5 = *(_DWORD *)(dword_300F0FB4 + 4 * v3);
      v9 = v4;
      if ( *(_DWORD *)(v5 + 736) )
      {
        v6 = -1;
      }
      else
      {
        v6 = dword_3020B120[*(_DWORD *)(v5 + 424)];
        if ( v6 >= 0 )
        {
LABEL_11:
          if ( v6 > 999 )
            v6 = 999;
          if ( v4 < 0 )
            v8 = 0;
          if ( v4 > 999 )
          {
            v9 = 999;
            v4 = 999;
          }
          if ( v10 )
          {
            sub_300403F0("%2i", v6);
            v4 = v9;
          }
          if ( v8 )
            v7 = sub_300403F0("%i", v4);
          else
            v7 = 0;
          result = (char *)v8;
          if ( v10 )
          {
            if ( v8 )
            {
              sub_30032560();
              sub_30032510(v7, a1, a2, 0);
              sub_30032560();
            }
            dword_30076898(52);
            result = (char *)sub_30032560();
          }
          else if ( v8 )
          {
            sub_30032510(v7, a1, a2, 0);
            result = (char *)sub_30032560();
          }
          return result;
        }
      }
      v10 = 0;
      goto LABEL_11;
    }
  }
  return result;
}
// 30032510: using guessed type double __cdecl sub_30032510(_DWORD, _DWORD, _DWORD, _DWORD);
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020AFC4: using guessed type int dword_3020AFC4;

//----- (300270B0) --------------------------------------------------------
int __usercall sub_300270B0@<eax>(int a1@<ecx>, float *a2@<ebx>)
{
  int v2; // eax
  int *v4; // eax
  char v6[16]; // [esp+34h] [ebp-14h] BYREF
  unsigned int v7; // [esp+44h] [ebp-4h]
  unsigned int retaddr; // [esp+48h] [ebp+0h]

  v7 = retaddr ^ dword_300705C0;
  v2 = dword_301DCA8C;
  if ( dword_301DCA8C < 0 || dword_301DCA8C >= dword_301A24C0 )
  {
    v2 = 0;
    dword_301DCA8C = 0;
  }
  v4 = &dword_3018DC8C[300 * dword_301A23A0[v2]];
  if ( *v4 )
  {
    if ( a1 )
    {
      dword_30076898(72);
      sub_3001A4A0(*a2, a2[1], a2[2], a2[3], a1);
      dword_30076898(72);
      return sub_30052A2E(retaddr ^ v7);
    }
    sub_30040370(v6, 0x10u, "%i", v4[15]);
    dword_30076898(52);
    sub_30032560();
  }
  return sub_30052A2E(retaddr ^ v7);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301A23A0: using guessed type int dword_301A23A0[];
// 301A24C0: using guessed type int dword_301A24C0;
// 301DCA8C: using guessed type int dword_301DCA8C;

//----- (300271D0) --------------------------------------------------------
int *sub_300271D0()
{
  int v0; // eax
  int *result; // eax

  v0 = dword_301DCA8C;
  if ( dword_301DCA8C < 0 || dword_301DCA8C >= dword_301A24C0 )
  {
    v0 = 0;
    dword_301DCA8C = 0;
  }
  result = &dword_3018DC8C[300 * dword_301A23A0[v0]];
  if ( *result )
    result = (int *)dword_30076898(54);
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301A23A0: using guessed type int dword_301A23A0[];
// 301A24C0: using guessed type int dword_301A24C0;
// 301DCA8C: using guessed type int dword_301DCA8C;

//----- (30027260) --------------------------------------------------------
int *__usercall sub_30027260@<eax>(int a1@<eax>)
{
  int v1; // esi
  const char *v2; // esi
  int *result; // eax

  v1 = a1 + 44;
  if ( a1 + 44 < 0 || v1 >= 2048 )
    sub_30021A30("CG_ConfigString: bad index: %i", a1 + 44);
  v2 = &byte_301D1B20[dword_301CFB20[v1]];
  if ( !v2 || !*v2 )
    v2 = "CGAME_UNKNOWN";
  result = (int *)dword_30076898(56);
  if ( !result )
  {
    if ( dword_301DFD2C )
    {
      if ( dword_301DEE8C )
        sub_30021B10(7, "Could not translate map location string \"%s\"", (char)v2);
      else
        Com_Printf("^3WARNING: Could not translate map location string \"%s\"\n", (char)v2);
      strcpy((char *)&dword_30097B90, "^1UNLOCALIZED(^7");
      strcat((char *)&dword_30097B90, v2);
      strcat((char *)&dword_30097B90, "^1)^7");
      result = &dword_30097B90;
    }
    else
    {
      strcpy((char *)&dword_30097B90, v2);
      result = &dword_30097B90;
    }
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30097B90: using guessed type int dword_30097B90;
// 301CFB20: using guessed type int dword_301CFB20[];
// 301DEE8C: using guessed type int dword_301DEE8C;
// 301DFD2C: using guessed type int dword_301DFD2C;

//----- (300273A0) --------------------------------------------------------
int *sub_300273A0()
{
  int v0; // eax
  int *result; // eax

  v0 = dword_301DCA8C;
  if ( dword_301DCA8C < 0 || dword_301DCA8C >= dword_301A24C0 )
  {
    v0 = 0;
    dword_301DCA8C = 0;
  }
  result = &dword_3018DC8C[300 * dword_301A23A0[v0]];
  if ( *result )
  {
    sub_30027260(result[14]);
    result = (int *)dword_30076898(54);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301A23A0: using guessed type int dword_301A23A0[];
// 301A24C0: using guessed type int dword_301A24C0;
// 301DCA8C: using guessed type int dword_301DCA8C;

//----- (30027430) --------------------------------------------------------
int *sub_30027430()
{
  int *result; // eax

  result = &dword_3018DC8C[300 * *(_DWORD *)(dword_301E5F20 + 184)];
  if ( *result )
  {
    sub_30027260(result[14]);
    result = (int *)dword_30076898(54);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301E5F20: using guessed type int dword_301E5F20;

//----- (300274B0) --------------------------------------------------------
int __cdecl sub_300274B0(int a1, float a2)
{
  int v2; // ecx
  int v3; // ebx
  int v4; // eax
  int v5; // eax
  int v6; // edi
  int v8; // ebx
  char *v9; // edi
  char v10; // al
  int v11; // [esp+Ch] [ebp-40h]
  char v12[16]; // [esp+38h] [ebp-14h] BYREF
  unsigned int v13; // [esp+48h] [ebp-4h]
  unsigned int retaddr; // [esp+4Ch] [ebp+0h]

  v3 = v2;
  v13 = retaddr ^ dword_300705C0;
  v4 = *(_DWORD *)(dword_301E5F20 + 184);
  if ( v4 == dword_301E5F04 )
  {
    v6 = *(_DWORD *)(dword_301E5F20 + 256);
  }
  else
  {
    v5 = 300 * v4;
    if ( !dword_3018DC8C[v5] )
      return sub_30052A2E(retaddr ^ v13);
    v6 = dword_3018DCC8[v5];
  }
  if ( v6 < 0 )
    v6 = 0;
  if ( v2 )
  {
    dword_30076898(72);
    sub_3001A4A0(*(float *)a1, *(float *)(a1 + 4), *(float *)(a1 + 8), *(float *)(a1 + 12), v3);
    dword_30076898(72);
    return sub_30052A2E(retaddr ^ v13);
  }
  dword_30076898(72);
  v11 = (unsigned __int64)*(float *)a1;
  if ( v6 > 999 )
    v6 = 999;
  sub_30040370(v12, 0x10u, "%i", v6);
  v8 = strlen(v12);
  if ( v8 > 3 )
    v8 = 3;
  v9 = v12;
  if ( v12[0] )
  {
    do
    {
      if ( !v8 )
        break;
      dword_30076898(73);
      v10 = *++v9;
      --v8;
      v11 += (unsigned __int64)(a2 * 20.0);
    }
    while ( v10 );
  }
  return sub_30052A2E(retaddr ^ v13);
}
// 30027592: conditional instruction was optimized away because of 'edi.4<3E8u'
// 300274C2: variable 'v2' is possibly undefined
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 3018DCC8: using guessed type int dword_3018DCC8[];
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301E5F04: using guessed type int dword_301E5F04;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (300276D0) --------------------------------------------------------
int sub_300276D0()
{
  char v1[16]; // [esp+18h] [ebp-14h] BYREF
  unsigned int v2; // [esp+28h] [ebp-4h]
  unsigned int retaddr; // [esp+2Ch] [ebp+0h]

  v2 = retaddr ^ dword_300705C0;
  if ( dword_301D607C == -9999 )
    sub_30040370(v1, 0x10u, "-");
  else
    sub_30040370(v1, 0x10u, "%i", dword_301D607C);
  dword_30076898(52);
  dword_30076898(54);
  return sub_30052A2E(retaddr ^ v2);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D607C: using guessed type int dword_301D607C;

//----- (300277B0) --------------------------------------------------------
int sub_300277B0()
{
  char v1[16]; // [esp+18h] [ebp-14h] BYREF
  unsigned int v2; // [esp+28h] [ebp-4h]
  unsigned int retaddr; // [esp+2Ch] [ebp+0h]

  v2 = retaddr ^ dword_300705C0;
  if ( dword_301D6080 == -9999 )
    sub_30040370(v1, 0x10u, "-");
  else
    sub_30040370(v1, 0x10u, "%i", dword_301D6080);
  dword_30076898(52);
  dword_30076898(54);
  return sub_30052A2E(retaddr ^ v2);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D6080: using guessed type int dword_301D6080;

//----- (30027890) --------------------------------------------------------
int __thiscall sub_30027890(float *this)
{
  int result; // eax

  result = 1200 * *(_DWORD *)(dword_301E5F20 + 184);
  if ( *(int *)((char *)dword_3018DC8C + result) )
    result = sub_30015820(*(int *)((char *)dword_3018DCB8 + result), *this, this[1], this[2], this[3]);
  return result;
}
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 3018DCB8: using guessed type int dword_3018DCB8[];
// 301E5F20: using guessed type int dword_301E5F20;

//----- (30027900) --------------------------------------------------------
double __cdecl sub_30027900(int a1, int a2)
{
  char *v2; // eax
  int v3; // eax
  int *v4; // eax
  double result; // st7
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // ecx
  int v11; // ecx

  v2 = (char *)&unk_30211940 + 552 * *(_DWORD *)(dword_301E5F20 + 184);
  switch ( a1 )
  {
    case 4:
      v11 = 300 * *(_DWORD *)(dword_301E5F20 + 184);
      if ( !dword_3018DC8C[v11] )
        goto LABEL_18;
      result = (double)dword_3018DCC8[v11];
      break;
    case 5:
      v6 = *((_DWORD *)v2 + 50);
      if ( !v6 )
        goto LABEL_22;
      v7 = *(_DWORD *)(dword_300F0FB4 + 4 * v6);
      if ( a2 == 1 )
        result = (double)*(int *)(dword_301E5F20 + 4 * *(_DWORD *)(v7 + 416) + 280)
               / (double)dword_300955C0[*(_DWORD *)(v7 + 416)];
      else
        result = (double)*(int *)(dword_301E5F20 + 4 * *(_DWORD *)(v7 + 416) + 280);
      break;
    case 21:
      v10 = 300 * *(_DWORD *)(dword_301E5F20 + 184);
      if ( dword_3018DC8C[v10] )
        result = (double)dword_3018DCC0[v10];
      else
LABEL_18:
        result = 0.0;
      break;
    case 27:
      result = (double)dword_301D6080;
      break;
    case 28:
      result = (double)dword_301D607C;
      break;
    case 41:
      v3 = dword_301DCA8C;
      if ( dword_301DCA8C < 0 || dword_301DCA8C >= dword_301A24C0 )
      {
        v3 = 0;
        dword_301DCA8C = 0;
      }
      v4 = &dword_3018DC8C[300 * dword_301A23A0[v3]];
      if ( *v4 )
        goto LABEL_22;
      result = (double)v4[15];
      break;
    case 70:
      v8 = *((_DWORD *)v2 + 50);
      if ( !v8 )
        goto LABEL_22;
      v9 = *(_DWORD *)(dword_300F0FB4 + 4 * v8);
      if ( a2 == 1 )
        result = (double)*(int *)(dword_301E5F20 + 4 * *(_DWORD *)(v9 + 424) + 536)
               / (double)dword_300959D0[*(_DWORD *)(v9 + 424)];
      else
        result = (double)*(int *)(dword_301E5F20 + 4 * *(_DWORD *)(v9 + 424) + 536);
      break;
    default:
LABEL_22:
      result = -1.0;
      break;
  }
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 3018DCC0: using guessed type int dword_3018DCC0[];
// 3018DCC8: using guessed type int dword_3018DCC8[];
// 301A23A0: using guessed type int dword_301A23A0[];
// 301A24C0: using guessed type int dword_301A24C0;
// 301D607C: using guessed type int dword_301D607C;
// 301D6080: using guessed type int dword_301D6080;
// 301DCA8C: using guessed type int dword_301DCA8C;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (30027AB0) --------------------------------------------------------
BOOL __cdecl sub_30027AB0(int a1)
{
  if ( (a1 & 0x8000) != 0 )
    return dword_301DCA8C == dword_301A24C0;
  if ( (a1 & 0x10000) != 0 )
    return dword_301DCA8C != dword_301A24C0;
  return (a1 & 0x80u) != 0 && *(int *)(dword_301E5F20 + 256) < 25
      || (a1 & 0x4000) != 0 && *(int *)(dword_301E5F20 + 256) > 25;
}
// 301A24C0: using guessed type int dword_301A24C0;
// 301DCA8C: using guessed type int dword_301DCA8C;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (30027B20) --------------------------------------------------------
int sub_30027B20()
{
  return dword_30076898(54);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30027B80) --------------------------------------------------------
int sub_30027B80()
{
  return dword_30076898(54);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30027BE0) --------------------------------------------------------
int sub_30027BE0()
{
  return dword_30076898(54);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30027C70) --------------------------------------------------------
char sub_30027C70()
{
  char result; // al

  result = byte_3020FDF8;
  if ( byte_3020FDF8 )
  {
    sub_300403F0("Fragged by %s", &byte_3020FDF8);
    if ( byte_3020FDF8 )
      sub_300403F0("Fragged by %s", &byte_3020FDF8);
    dword_30076898(52);
    result = dword_30076898(54);
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30027D40) --------------------------------------------------------
int sub_30027D40()
{
  int result; // eax

  result = dword_301D607C;
  if ( dword_301D607C != -9999 )
  {
    sub_300403F0("%2i", dword_301D607C);
    result = dword_30076898(54);
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D607C: using guessed type int dword_301D607C;

//----- (30027DB0) --------------------------------------------------------
int sub_30027DB0()
{
  int result; // eax

  result = dword_301D6080;
  if ( dword_301D6080 != -9999 )
  {
    sub_300403F0("%2i", dword_301D6080);
    result = dword_30076898(54);
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D6080: using guessed type int dword_301D6080;

//----- (30027E30) --------------------------------------------------------
int sub_30027E30()
{
  return dword_30076898(54);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30027E90) --------------------------------------------------------
int __usercall sub_30027E90@<eax>(float *a1@<eax>, int a2)
{
  float v3; // [esp+0h] [ebp-10h]
  float v4; // [esp+4h] [ebp-Ch]
  float v5; // [esp+8h] [ebp-8h]
  float v6; // [esp+Ch] [ebp-4h]

  v6 = flt_301D5A44 * *a1;
  v5 = a1[1] * flt_301D5A48;
  v4 = a1[2] * flt_301D5A44;
  v3 = a1[3] * flt_301D5A48;
  dword_30076898(72);
  sub_30032820(LODWORD(v6), LODWORD(v5), LODWORD(v4), LODWORD(v3), 0, 0, 1065353216, 1065353216, a2);
  return dword_30076898(72);
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;

//----- (30027F20) --------------------------------------------------------
unsigned __int8 __cdecl sub_30027F20(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, float a12, int a13, int a14)
{
  unsigned __int8 result; // al
  int v15[4]; // [esp+Ch] [ebp-10h] BYREF

  result = dword_301DDDAC;
  if ( dword_301DDDAC )
  {
    v15[0] = a1;
    v15[3] = a4;
    result = a7 - 4;
    v15[1] = a2;
    v15[2] = a3;
    switch ( a7 )
    {
      case 4:
        result = sub_300274B0((int)v15, a12);
        break;
      case 5:
      case 70:
        result = (unsigned __int8)sub_30026E20(a11, SLODWORD(a12));
        break;
      case 6:
        result = sub_30024F50((float *)v15, a13, a14);
        break;
      case 8:
      case 63:
        result = (unsigned __int8)sub_300271D0();
        break;
      case 9:
        result = (unsigned __int8)sub_300273A0();
        break;
      case 20:
        result = sub_300252C0((float *)v15, a13);
        break;
      case 27:
        result = sub_300277B0();
        break;
      case 28:
        result = sub_300276D0();
        break;
      case 33:
        result = (unsigned __int8)sub_30027430();
        break;
      case 34:
        result = sub_30027890((float *)v15);
        break;
      case 39:
        result = sub_30027E30();
        break;
      case 41:
        result = sub_300270B0(a14, (float *)v15);
        break;
      case 46:
        result = sub_30027B20();
        break;
      case 47:
        result = sub_30027B80();
        break;
      case 48:
        result = sub_30027BE0();
        break;
      case 50:
        result = sub_30027C70();
        break;
      case 67:
        result = sub_30027D40();
        break;
      case 68:
        result = sub_30027DB0();
        break;
      case 72:
        result = sub_30026560((float *)v15, a11, SLODWORD(a12));
        break;
      case 81:
        result = (unsigned __int8)sub_30024FA0();
        break;
      case 82:
        result = (unsigned __int8)sub_300250C0((float *)v15, a11, SLODWORD(a12), a14);
        break;
      case 83:
        result = (unsigned __int8)sub_30025200((float *)v15);
        break;
      case 84:
        result = sub_30025B70((float *)v15);
        break;
      case 85:
        result = sub_30026490((float *)v15, a14);
        break;
      case 86:
        result = sub_30026090((float *)v15, a14, (int *)a13);
        break;
      case 88:
        result = sub_300145F0((float *)v15, a14, (int *)a13);
        break;
      case 89:
        result = sub_30025C30((float *)v15, (float *)a13, a14);
        break;
      case 90:
        result = sub_30025EC0();
        break;
      case 91:
        result = sub_30027E90((float *)v15, a14);
        break;
      default:
        return result;
    }
  }
  return result;
}
// 301DDDAC: using guessed type int dword_301DDDAC;

//----- (300284F0) --------------------------------------------------------
int __usercall sub_300284F0@<eax>(int a1@<eax>, int a2@<ecx>)
{
  if ( !a2 || !dword_3020FDE4 )
    return 0;
  if ( a1 != 206 && a1 != 164 && a1 != 184 )
  {
    if ( a1 == 205 || a1 == 163 || a1 == 190 )
    {
      sub_3002CBB0();
      return 1;
    }
    return 0;
  }
  if ( dword_3020FDF0 > 0 )
  {
    dword_3020FDF0 -= dword_301B108C;
    if ( dword_3020FDF0 < 0 )
      dword_3020FDF0 = 0;
  }
  return 1;
}
// 301B108C: using guessed type int dword_301B108C;
// 3020FDE4: using guessed type int dword_3020FDE4;
// 3020FDF0: using guessed type int dword_3020FDF0;

//----- (30028600) --------------------------------------------------------
_DWORD *__cdecl sub_30028600(_DWORD *a1)
{
  int v1; // eax
  int v2; // eax
  _DWORD *result; // eax

  v1 = 300 * *(_DWORD *)(dword_301E5F20 + 184);
  if ( !dword_3018DC8C[v1] )
    goto LABEL_6;
  v2 = dword_3018DCB8[v1];
  if ( v2 == 1 )
  {
    result = a1;
    *a1 = 1065353216;
    a1[1] = 0;
    a1[2] = 0;
    a1[3] = 1048576000;
    return result;
  }
  if ( v2 == 2 )
  {
    result = a1;
    a1[1] = 0;
    *a1 = 0;
    a1[2] = 1065353216;
    a1[3] = 1048576000;
  }
  else
  {
LABEL_6:
    result = a1;
    *a1 = 0;
    a1[1] = 1043207291;
    a1[2] = 0;
    a1[3] = 1048576000;
  }
  return result;
}
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 3018DCB8: using guessed type int dword_3018DCB8[];
// 301E5F20: using guessed type int dword_301E5F20;

//----- (30028680) --------------------------------------------------------
int __usercall sub_30028680@<eax>(int a1@<esi>, int a2, int a3, int a4)
{
  int v4; // ebx
  double v5; // st7
  double v6; // st6
  long double v7; // st5
  long double v8; // st5
  int v10; // [esp+10h] [ebp-F0h]
  int v11[39]; // [esp+18h] [ebp-E8h] BYREF
  char v12[48]; // [esp+B8h] [ebp-48h] BYREF
  float v13; // [esp+E8h] [ebp-18h]
  int v14; // [esp+ECh] [ebp-14h]
  float v15; // [esp+F0h] [ebp-10h]
  unsigned int v16; // [esp+FCh] [ebp-4h]
  unsigned int retaddr; // [esp+104h] [ebp+4h]

  v16 = retaddr ^ dword_300705C0;
  if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0x30000) != 0
    && *(_DWORD *)a1 == *(_DWORD *)(dword_301E5F20 + 184)
    && !dword_3020AF10 )
  {
    v4 = 2;
  }
  else
  {
    v4 = 0;
  }
  if ( dword_30076898(163) && sub_3001D540(a1, (int)v12) )
  {
    v5 = v13;
    v10 = v14;
    v6 = (double)a3 + v15 + 18.0;
  }
  else
  {
    v5 = *(float *)(a1 + 504);
    v10 = *(int *)(a1 + 508);
    v6 = *(float *)(a1 + 512) + (double)a3 + 72.0;
  }
  if ( a4 )
  {
    v7 = sqrt(
           (v6 - flt_3020D350) * (v6 - flt_3020D350)
         + (*(float *)&v10 - flt_3020D34C) * (*(float *)&v10 - flt_3020D34C)
         + (v5 - flt_3020D348) * (v5 - flt_3020D348))
       * 0.00390625
       + 0.2;
    if ( v7 < 0.60000002 )
      v7 = 0.60000002;
    v6 = v6 + 8.0 * v7 - 8.0;
    v8 = v7 * 6.6599998;
  }
  else
  {
    v8 = 6.6599998;
  }
  memset(v11, 0, sizeof(v11));
  *(float *)&v11[17] = v5;
  *(float *)&v11[19] = v6;
  *(float *)&v11[31] = v8;
  v11[25] = v11[31];
  v11[26] = a2;
  v11[18] = v10;
  v11[0] = 4;
  v11[1] = v4;
  v11[27] = -1;
  return dword_30076898(61);
}
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF10: using guessed type int dword_3020AF10;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;

//----- (30028840) --------------------------------------------------------
int __usercall sub_30028840@<eax>(_DWORD *a1@<eax>)
{
  int result; // eax
  int v3; // ebx
  int v4; // edi
  int v5; // eax
  int v6; // ecx
  int v7; // eax
  float v8; // [esp+4h] [ebp-4h]

  result = 1200 * a1[36];
  v8 = 0.0;
  if ( *(int *)((char *)dword_3018DC8C + result) )
  {
    v3 = *(int *)((char *)dword_3018DCB8 + result);
    result = 1200 * *(_DWORD *)(dword_301E5F20 + 184);
    if ( *(int *)((char *)dword_3018DC8C + result) )
    {
      v4 = *(int *)((char *)dword_3018DCB8 + result);
      v5 = a1[37];
      if ( v5 )
      {
        v6 = a1[38];
        if ( !v6 || v4 == 3 || v6 == v4 )
        {
          sub_30022DE0(v5 + 28);
          v7 = sub_300322A0();
          if ( v7 )
          {
            sub_30028680((int)a1, v7, 0, 0);
            v8 = 16.0;
          }
        }
      }
      if ( *a1 != dword_301E5F04 || *(_DWORD *)(dword_301E5F20 + 184) == dword_301E5F04 )
      {
        result = a1[2];
        if ( (result & 0x1000) != 0 )
        {
          result = sub_30028680((int)a1, dword_301D9634, (unsigned __int64)v8, 0);
        }
        else if ( v3 == v4 || v4 == 3 )
        {
          if ( a1[137] <= dword_3020AF00 )
          {
            if ( (result & 0x40000) != 0 )
              result = sub_30028680((int)a1, dword_301D9630, (unsigned __int64)(v8 - 5.0), 0);
          }
          else
          {
            result = sub_30028680((int)a1, a1[136], (unsigned __int64)v8, 0);
          }
        }
      }
      else
      {
        result = sub_30028680((int)a1, dword_301D9638, (unsigned __int64)v8, 1);
      }
    }
  }
  return result;
}
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 3018DCB8: using guessed type int dword_3018DCB8[];
// 301D9630: using guessed type int dword_301D9630;
// 301D9634: using guessed type int dword_301D9634;
// 301D9638: using guessed type int dword_301D9638;
// 301E5F04: using guessed type int dword_301E5F04;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;

//----- (300289A0) --------------------------------------------------------
int __usercall sub_300289A0@<eax>(float *a1@<eax>, int a2@<esi>)
{
  double v4; // st7
  double v6; // st7
  unsigned __int8 v7; // c0
  unsigned __int8 v8; // c2
  double v9; // st7
  float v10; // [esp+4h] [ebp-44h]
  float v11; // [esp+8h] [ebp-40h]
  float v12; // [esp+8h] [ebp-40h]
  float v13; // [esp+18h] [ebp-30h]
  int v14[3]; // [esp+1Ch] [ebp-2Ch] BYREF

  *a1 = 0.0;
  if ( !dword_301DD26C )
    return 0;
  dword_30076898(38);
  if ( v13 == 1.0 || v13 == 0.0 )
    return 0;
  *a1 = *(float *)&v14[2] + 1.0;
  if ( dword_301DD26C != 1 )
    return 1;
  if ( (*(_BYTE *)(a2 + 8) & 1) != 0 )
    return 0;
  v4 = sub_3003B280((float *)(dword_301E5F20 + 32), (float *)(a2 + 504));
  v10 = v4;
  if ( v4 <= 250.0 )
    return 1;
  v6 = v10;
  if ( v7 | v8 )
  {
    v9 = (v6 - 250.0) * 0.003816793893129771;
LABEL_12:
    v11 = 1.0 - v13;
    v12 = v9 * v11;
    sub_30024900(dword_301D98D4, (int)v14, 0.0, v12, v12, v12, 1.0, 0, 16.0, 1, -1);
    return 1;
  }
  if ( v6 <= 1024.0 )
  {
    v9 = 1.0 - (v10 - 512.0) * 0.001953125;
    goto LABEL_12;
  }
  return 0;
}
// 30028A05: variable 'v13' is possibly undefined
// 30028A97: variable 'v7' is possibly undefined
// 30028A97: variable 'v8' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301DD26C: using guessed type int dword_301DD26C;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (30028B20) --------------------------------------------------------
void sub_30028B20()
{
  float v0; // [esp+98h] [ebp-30h]

  if ( dword_301DD26C && (dword_30076898(36) & 0x20) != 0 && (dword_30076898(36) & 0x21) == 0 )
  {
    dword_30076898(38);
    if ( v0 != 1.0 )
      dword_30076898(64);
  }
}
// 30028BD1: variable 'v0' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D98DC: using guessed type int dword_301D98DC;
// 301DD26C: using guessed type int dword_301DD26C;

//----- (30028D20) --------------------------------------------------------
void __cdecl sub_30028D20(int a1)
{
  int v1; // ebp
  int *v2; // edi
  int v3; // eax
  char *v4; // ebp
  float *v5; // ebx
  float v6; // ecx
  float v7; // edx
  double v8; // st7
  int v9; // eax
  int v10; // eax
  int v11; // edi
  int v12; // ebx
  int v13; // eax
  double v14; // st7
  double v15; // st7
  int v16; // eax
  double v17; // st7
  int v18; // eax
  int v19; // ecx
  int v20; // edx
  int v21; // edx
  float v22; // [esp+10h] [ebp-110h]
  int v23; // [esp+10h] [ebp-110h]
  float v24; // [esp+24h] [ebp-FCh]
  float v25; // [esp+2Ch] [ebp-F4h]
  float v26; // [esp+2Ch] [ebp-F4h]
  int v27; // [esp+30h] [ebp-F0h]
  int v28; // [esp+38h] [ebp-E8h]
  float v29; // [esp+3Ch] [ebp-E4h]
  int v30; // [esp+40h] [ebp-E0h]
  int v31; // [esp+44h] [ebp-DCh]
  float v32; // [esp+48h] [ebp-D8h]
  float v33; // [esp+54h] [ebp-CCh]
  float v34[3]; // [esp+58h] [ebp-C8h] BYREF
  float *v35; // [esp+64h] [ebp-BCh]
  int v36; // [esp+68h] [ebp-B8h]
  float v38[2]; // [esp+70h] [ebp-B0h] BYREF
  int v39[3]; // [esp+78h] [ebp-A8h] BYREF
  int v40[3]; // [esp+84h] [ebp-9Ch] BYREF
  float v41[9]; // [esp+90h] [ebp-90h] BYREF
  float v42; // [esp+B4h] [ebp-6Ch]
  float v43; // [esp+B8h] [ebp-68h]
  float v44; // [esp+BCh] [ebp-64h]
  float v45[9]; // [esp+C0h] [ebp-60h] BYREF
  int v46; // [esp+E4h] [ebp-3Ch]
  int v47; // [esp+E8h] [ebp-38h]
  int v48; // [esp+ECh] [ebp-34h]
  float v49[12]; // [esp+F0h] [ebp-30h] BYREF

  v1 = *(_DWORD *)(a1 + 116);
  if ( v1 < 64 )
    return;
  if ( v1 == 1023 )
    return;
  v2 = &dword_3018DC8C[300 * *(_DWORD *)(a1 + 144)];
  if ( !*v2 )
    return;
  if ( !v2[228] )
    return;
  v3 = v2[229];
  if ( !v3 )
    return;
  if ( (*(_BYTE *)(v3 + 80) & 4) == 0 )
    return;
  v4 = (char *)&unk_30211940 + 552 * v1;
  if ( !*((_DWORD *)v4 + 120) )
    return;
  if ( !dword_30076898(163) )
    return;
  v5 = (float *)sub_3001D4F0((int)v4);
  v35 = v5;
  if ( !v5 )
  {
    Com_Printf("WARNING: aborting player positioning on turret since 'tag_weapon' does not exist\n");
    return;
  }
  v31 = *(_DWORD *)(dword_300F0FB4 + 4 * *((_DWORD *)v4 + 50));
  HIWORD(v28) = dword_300ACCF8(dword_3018DC60);
  LOWORD(v28) = v2[228] & 0xFDFF;
  v32 = sub_3003BB00(v5);
  sub_3003DE80(v41, (float *)v4 + 129);
  v6 = *((float *)v4 + 127);
  v7 = *((float *)v4 + 128);
  v42 = *((float *)v4 + 126);
  v8 = *(float *)(a1 + 504);
  v43 = v6;
  v44 = v7;
  v33 = v41[8] * (*(float *)(a1 + 512) - v7) + v41[7] * (*(float *)(a1 + 508) - v6) + v41[6] * (v8 - v42);
  v24 = v33 - v5[14];
  sub_30032E80();
  v27 = sub_300334C0();
  v29 = 0.0;
  if ( !v27 )
  {
    v9 = sub_300332A0();
    sub_30021B10(1, (char *)&byte_30065238, v9, v28);
  }
  v30 = 0;
  do
  {
    sub_300334E0();
    v11 = v10;
    sub_30032F90();
    v12 = sub_300334C0();
    if ( !v12 )
    {
      v13 = sub_300332A0();
      sub_30021B10(1, (char *)&byte_30065238, v13, v11);
    }
    v14 = (double)v12 * 0.5 - v32 / *(float *)(v31 + 1036);
    if ( v14 >= 0.0 )
    {
      v25 = (float)(v12 - 1);
      if ( v14 >= v25 )
        v14 = v25;
    }
    else
    {
      v14 = 0.0;
    }
    v15 = v14 - (double)(int)(unsigned __int64)v14;
    v26 = v15;
    sub_300334E0();
    v36 = v16;
    sub_30032F90();
    if ( v15 != 0.0 )
    {
      sub_300334E0();
      sub_30032F90();
    }
    dword_30076898(155);
    if ( v34[2] >= (double)v24 )
      break;
    v29 = v15;
    ++v30;
  }
  while ( v30 < v27 );
  sub_30032E80();
  sub_300330F0();
  sub_30032F90();
  if ( v26 != 0.0 )
  {
    sub_300330F0();
    sub_30032F90();
  }
  if ( !v30 || v30 == v27 )
  {
    if ( !sub_3001D4F0((int)v4) )
    {
      Com_Printf("WARNING: aborting player positioning on turret since 'tag_aim' does not exist\n");
      return;
    }
    sub_300330F0();
  }
  else
  {
    sub_300330F0();
    sub_30032F90();
    sub_300334E0();
    sub_300330F0();
    sub_30032F90();
    sub_300334E0();
    sub_300330F0();
    sub_30032F90();
    if ( v29 == 0.0 )
      goto LABEL_34;
    sub_300334E0();
    sub_300330F0();
  }
  sub_30032F90();
LABEL_34:
  dword_30076898(155);
  sub_3003D320(v34, v32);
  v17 = v34[0] + v35[12];
  v49[11] = v33;
  v49[9] = v17;
  v49[10] = v34[1] + v35[13];
  v22 = sub_3003D700(v38) + v32;
  sub_3003DED0((int)v49, v22);
  sub_3003C580(v41, v45, v49);
  sub_3003DF20((float *)(a1 + 516), (int)v45);
  if ( dword_3029C24C != 5 )
  {
    v18 = v46;
    v19 = v47;
    v20 = v48;
    *(_DWORD *)(a1 + 504) = v46;
    *(_DWORD *)(a1 + 512) = v20;
    v39[0] = v18;
    *(_DWORD *)(a1 + 508) = v19;
    v39[1] = v19;
    v40[1] = v19;
    v23 = *(_DWORD *)a1;
    v40[0] = v18;
    v21 = *((_DWORD *)v4 + 128);
    v40[2] = v48;
    v39[2] = v21;
    sub_3002A3A0(42008593, (int)v40, 0, v49, (int)v39, 0, v23);
    if ( v49[0] < 1.0 )
      *(float *)(a1 + 512) = v49[3];
  }
}
// 30028F46: variable 'v10' is possibly undefined
// 30029006: variable 'v16' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300ACCF8: using guessed type int (__cdecl *dword_300ACCF8)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 3029C24C: using guessed type int dword_3029C24C;

//----- (30029580) --------------------------------------------------------
int __thiscall sub_30029580(int this)
{
  int v2; // ecx
  int result; // eax
  int v4; // ebx
  int v5; // eax
  double v6; // st7
  int v7; // ecx
  double v8; // st6
  int v9; // ecx
  int v10; // eax
  double v11; // st5
  double v12; // st5
  _DWORD *v13; // [esp+10h] [ebp-B0h]
  int v14; // [esp+14h] [ebp-ACh] BYREF
  int v15[42]; // [esp+18h] [ebp-A8h] BYREF
  unsigned int retaddr; // [esp+C4h] [ebp+4h]

  v2 = *(_DWORD *)(this + 248);
  v15[41] = retaddr ^ dword_300705C0;
  result = this + 240;
  v13 = (_DWORD *)(this + 240);
  if ( (v2 & 0x100) == 0 && (v2 & 1) == 0 )
  {
    v4 = *(_DWORD *)(this + 384);
    result = dword_30076898(163);
    v14 = result;
    if ( result )
    {
      memset(v15, 0, 0x9Cu);
      v15[27] = -1;
      sub_300052F0(&dword_3018DC8C[300 * v4], result, v13);
      if ( (*(_DWORD *)(this + 248) & 0xC000) != 0 )
        sub_30028D20(this);
      sub_3003DE80((float *)&v15[7], (float *)(this + 516));
      sub_30028840((_DWORD *)this);
      sub_30028B20();
      v5 = 0;
      if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0x30000) != 0
        && *v13 == *(_DWORD *)(dword_301E5F20 + 184)
        && !dword_3020AF10 )
      {
        v5 = 2;
      }
      if ( dword_3021099C )
        v5 &= 0xFFFFFFFD;
      v6 = *(float *)(this + 504);
      v7 = *(_DWORD *)(this + 512);
      v15[17] = *(int *)(this + 504);
      v15[19] = v7;
      v8 = *(float *)(this + 508);
      v9 = *(_DWORD *)(this + 248);
      *(float *)&v15[18] = v8;
      v10 = v5 | 0x80;
      *(float *)&v15[3] = v6;
      *(float *)&v15[4] = v8;
      v11 = *(float *)&v15[19] + *(float *)(this + 468);
      if ( (v9 & 0x40) != 0 )
      {
        v12 = v11 + 12.0;
      }
      else if ( (v9 & 0x20) != 0 )
      {
        v12 = v11 + 20.0;
      }
      else
      {
        v12 = v11 + 32.0;
      }
      *(float *)&v15[5] = v12;
      *(float *)&v15[21] = v6;
      v15[1] = v10;
      *(float *)&v15[22] = v8;
      v15[0] = 1;
      v15[36] = v14;
      v15[37] = this;
      v15[23] = v15[19];
      dword_30076898(61);
      result = sub_300289A0((float *)&v14, this);
      if ( (*(_BYTE *)(this + 248) & 1) == 0 )
        result = sub_30038660(0, (_DWORD *)this, 1);
    }
  }
  return result;
}
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF10: using guessed type int dword_3020AF10;
// 3021099C: using guessed type int dword_3021099C;

//----- (30029770) --------------------------------------------------------
int __cdecl sub_30029770(int a1)
{
  _DWORD *v1; // esi
  int result; // eax
  _DWORD *v3; // ebx
  int v4; // eax
  double v5; // st7
  int v6; // eax
  double v7; // st6
  int v8; // eax
  double v9; // st5
  double v10; // st5
  int v11; // [esp+Ch] [ebp-ACh]
  int v12[42]; // [esp+10h] [ebp-A8h] BYREF
  unsigned int retaddr; // [esp+BCh] [ebp+4h]

  v1 = (_DWORD *)(a1 + 240);
  v12[41] = retaddr ^ dword_300705C0;
  result = *(_DWORD *)(a1 + 248);
  if ( (result & 0x100) == 0 )
  {
    v3 = (_DWORD *)((char *)&unk_301DA064 + 1200 * *v1 - 76800);
    v4 = dword_30076898(163);
    sub_30005380(v4, (int)v3, a1 + 240);
    result = dword_30076898(163);
    v11 = result;
    if ( result )
    {
      memset(v12, 0, 0x9Cu);
      v12[27] = -1;
      sub_300052F0(v3, result, v1);
      sub_3003DE80((float *)&v12[7], (float *)(a1 + 516));
      v5 = *(float *)(a1 + 504);
      v6 = *(_DWORD *)(a1 + 512);
      v12[17] = *(int *)(a1 + 504);
      v12[19] = v6;
      v7 = *(float *)(a1 + 508);
      v8 = *(_DWORD *)(a1 + 248);
      *(float *)&v12[18] = v7;
      *(float *)&v12[3] = v5;
      *(float *)&v12[4] = v7;
      v9 = *(float *)&v12[19] + *(float *)(a1 + 468);
      if ( (v8 & 0x40) != 0 )
      {
        v10 = v9 + 12.0;
      }
      else if ( (v8 & 0x20) != 0 )
      {
        v10 = v9 + 20.0;
      }
      else
      {
        v10 = v9 + 32.0;
      }
      *(float *)&v12[5] = v10;
      *(float *)&v12[21] = v5;
      *(float *)&v12[22] = v7;
      v12[0] = 1;
      v12[36] = v11;
      v12[37] = a1;
      v12[1] = 128;
      v12[23] = v12[19];
      result = dword_30076898(61);
    }
  }
  return result;
}
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30029930) --------------------------------------------------------
char __cdecl sub_30029930(int a1)
{
  char result; // al
  int *v2; // esi
  int v3; // edx

  result = *(_BYTE *)(a1 + 8);
  v2 = &dword_3018DC8C[300 * *(_DWORD *)(a1 + 144)];
  if ( (result & 1) == 0 )
  {
    dword_30076898(136);
    dword_30076898(142);
    dword_30076898(142);
    dword_30076898(142);
    memset(v2 + 224, 0, 0x30u);
    v2[224] = v2[251];
    result = 0;
    v2[225] = 0;
    v2[226] = 0;
    v2[227] = 0;
    memset(v2 + 236, 0, 0x30u);
    v2[236] = v2[251];
    v3 = v2[250];
    v2[237] = 0;
    v2[238] = v3;
    v2[239] = 0;
  }
  if ( dword_301DF8AC )
    result = sub_300219D0(
               "%i ResetPlayerEntity yaw=%i\n",
               *(_DWORD *)a1,
               (unsigned int)COERCE_UNSIGNED_INT64(*((float *)v2 + 236)));
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC64: using guessed type int dword_3018DC64;
// 3018DC68: using guessed type int dword_3018DC68;
// 3018DC6C: using guessed type int dword_3018DC6C;
// 3018DC7C: using guessed type int dword_3018DC7C;
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301DF8AC: using guessed type int dword_301DF8AC;

//----- (30029AB0) --------------------------------------------------------
int sub_30029AB0()
{
  int result; // eax
  int v1; // edi
  int v2; // ecx
  int v3; // esi

  result = dword_301E5F20;
  v1 = *(_DWORD *)(dword_301E5F20 + 792);
  if ( v1 || *(_DWORD *)(dword_301E5F20 + 796) )
  {
    v2 = 1;
    v3 = 0;
    if ( dword_300F0FB0 <= 1 )
    {
LABEL_7:
      if ( !dword_30210678 )
        sub_30022ED0();
      result = (v3 == 0) + 1;
      dword_30210678 = result;
    }
    else
    {
      while ( 1 )
      {
        if ( ((1 << v2) & v1) != 0 )
        {
          v3 += 1000 * *(_DWORD *)(dword_301E5F20 + 4 * *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v2) + 416) + 280);
          if ( v3 >= 5000 )
            break;
        }
        if ( ++v2 >= dword_300F0FB0 )
          goto LABEL_7;
      }
      dword_30210678 = 0;
    }
  }
  return result;
}
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301D98E8: using guessed type int dword_301D98E8;
// 301E5F20: using guessed type int dword_301E5F20;
// 30210678: using guessed type int dword_30210678;

//----- (30029B60) --------------------------------------------------------
int __cdecl sub_30029B60(float a1, int a2, float a3)
{
  double v3; // st7
  int v4; // edx
  int v5; // ecx
  int v6; // esi
  int v7; // eax
  int v8; // ecx
  int v9; // esi
  int result; // eax
  float v11; // [esp+0h] [ebp-34h]
  float v12; // [esp+4h] [ebp-30h] BYREF
  float v13; // [esp+8h] [ebp-2Ch] BYREF
  float v14; // [esp+Ch] [ebp-28h]
  float v15; // [esp+18h] [ebp-1Ch]
  float *v16; // [esp+1Ch] [ebp-18h]
  float *v17; // [esp+20h] [ebp-14h]
  float v18; // [esp+24h] [ebp-10h]
  float v19; // [esp+28h] [ebp-Ch]
  float v20; // [esp+2Ch] [ebp-8h]
  float v21; // [esp+30h] [ebp-4h]

  dword_302106B4 = dword_3020AF00;
  a3 = (float)SLODWORD(a3);
  a3 = a3 * 0.2;
  if ( a3 >= 5.0 )
  {
    if ( a3 > 90.0 )
      a3 = 90.0;
  }
  else
  {
    a3 = 5.0;
  }
  if ( LODWORD(a1) == 255 && a2 == 255 )
  {
    dword_3021079C = 0;
    *(float *)&dword_30210798 = -a3;
  }
  else
  {
    v15 = (float)a2;
    v16 = &v12;
    v18 = v15 / 255.0 * 360.0;
    a1 = (float)SLODWORD(a1);
    v15 = a1 / 255.0 * 360.0;
    v14 = v15 * 0.017453292;
    v11 = cos(v14);
    v12 = sin(v14);
    v3 = v18 * 0.017453292;
    v17 = &a1;
    v18 = COERCE_FLOAT(&v13);
    v14 = v3;
    a1 = cos(v14);
    v13 = sin(v14);
    v4 = 0;
    v5 = 1;
    v6 = 0;
    v7 = 3;
    v19 = a1 * v11;
    v20 = a1 * v12;
    v21 = -v13;
    *(float *)&dword_3021079C = -((flt_3020D368 * v21 + flt_3020D364 * v20 + flt_3020D360 * v19) * a3);
    *(float *)&dword_30210798 = (flt_3020D35C * v21 + flt_3020D358 * v20 + flt_3020D354 * v19) * a3;
    do
    {
      if ( dword_302106FC[v7] < *(int *)((char *)dword_302106FC + v6) )
      {
        v4 = v5;
        v6 = v7 * 4;
      }
      v7 += 3;
      ++v5;
    }
    while ( v7 < 24 );
    v8 = dword_3029BCAC;
    v9 = 3 * v4;
    dword_302106FC[v9] = *(_DWORD *)(dword_301E5F20 + 8);
    dword_30210700[v9] = v8;
    a1 = (float)rand();
    a1 = (a1 / 32768.0 - 0.5) * 20.0 + v15;
    a1 = (float)(unsigned __int16)(unsigned __int64)(a1 * 182.04445);
    flt_30210704[v9] = a1 * 0.0054931641;
  }
  result = dword_301E5F20;
  dword_30210794 = dword_3020AF00 + 500;
  dword_3021075C = *(_DWORD *)(dword_301E5F20 + 8);
  return result;
}
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020D354: using guessed type float flt_3020D354;
// 3020D358: using guessed type float flt_3020D358;
// 3020D35C: using guessed type float flt_3020D35C;
// 3020D360: using guessed type float flt_3020D360;
// 3020D364: using guessed type float flt_3020D364;
// 3020D368: using guessed type float flt_3020D368;
// 302106B4: using guessed type int dword_302106B4;
// 302106FC: using guessed type int dword_302106FC[];
// 30210700: using guessed type int dword_30210700[];
// 30210704: using guessed type float flt_30210704[];
// 3021075C: using guessed type int dword_3021075C;
// 30210794: using guessed type int dword_30210794;
// 30210798: using guessed type int dword_30210798;
// 3021079C: using guessed type int dword_3021079C;
// 3029BCAC: using guessed type int dword_3029BCAC;

//----- (30029DE0) --------------------------------------------------------
int sub_30029DE0()
{
  int v0; // eax

  dword_3020AF0C = 0;
  qmemcpy(&dword_3020AF14, (const void *)(dword_301E5F20 + 12), 0x20CCu);
  v0 = *(_DWORD *)(dword_300F0FB4 + 4 * dword_3020AFC4);
  dword_302106D4 = dword_3020AF00;
  dword_3020D238 = v0;
  dword_30210698 = 0;
  dword_3021069C = 0;
  dword_3021099C = 0;
  dword_3020D394 = 0;
  dword_3020D390 = 0;
  dword_3020D38C = 0;
  dword_3020D3A0 = 0;
  dword_3020D39C = 0;
  dword_3020D398 = 0;
  dword_3020D3AC = 0;
  dword_3020D3A8 = 0;
  dword_3020D3A4 = 0;
  dword_302108F4 = 0;
  dword_302108F0 = 0;
  dword_302108EC = 0;
  dword_302108E8 = 0;
  dword_302108E4 = 0;
  dword_302108E0 = 0;
  dword_302107A4 = 0.0;
  memset(&flt_3020D208, 0, 0x30u);
  dword_3021075C = 0;
  dword_30210798 = 0;
  dword_3021079C = 0;
  dword_3021095C = 0;
  dword_30210958 = 0;
  dword_30210954 = 0;
  dword_30210968 = 0;
  dword_30210964 = 0;
  dword_30210960 = 0;
  memset(dword_302106FC, 0, 0x60u);
  memset(&unk_30210DB4, 0, 0x90u);
  dword_30211398 = 0;
  dword_3020D248 = 0;
  dword_3020D244 = 0;
  dword_3020D240 = 0;
  sub_300403F0("%i", *(_DWORD *)(dword_301E5F20 + 188));
  dword_30076898(9);
  dword_30076898(9);
  return dword_30076898(9);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF0C: using guessed type int dword_3020AF0C;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020AFC4: using guessed type int dword_3020AFC4;
// 3020D208: using guessed type float flt_3020D208;
// 3020D238: using guessed type int dword_3020D238;
// 3020D240: using guessed type int dword_3020D240;
// 3020D244: using guessed type int dword_3020D244;
// 3020D248: using guessed type int dword_3020D248;
// 3020D38C: using guessed type int dword_3020D38C;
// 3020D390: using guessed type int dword_3020D390;
// 3020D394: using guessed type int dword_3020D394;
// 3020D398: using guessed type int dword_3020D398;
// 3020D39C: using guessed type int dword_3020D39C;
// 3020D3A0: using guessed type int dword_3020D3A0;
// 3020D3A4: using guessed type int dword_3020D3A4;
// 3020D3A8: using guessed type int dword_3020D3A8;
// 3020D3AC: using guessed type int dword_3020D3AC;
// 30210698: using guessed type int dword_30210698;
// 3021069C: using guessed type int dword_3021069C;
// 302106D4: using guessed type int dword_302106D4;
// 302106FC: using guessed type int dword_302106FC[];
// 3021075C: using guessed type int dword_3021075C;
// 30210798: using guessed type int dword_30210798;
// 3021079C: using guessed type int dword_3021079C;
// 302108E0: using guessed type int dword_302108E0;
// 302108E4: using guessed type int dword_302108E4;
// 302108E8: using guessed type int dword_302108E8;
// 302108EC: using guessed type int dword_302108EC;
// 302108F0: using guessed type int dword_302108F0;
// 302108F4: using guessed type int dword_302108F4;
// 30210954: using guessed type int dword_30210954;
// 30210958: using guessed type int dword_30210958;
// 3021095C: using guessed type int dword_3021095C;
// 30210960: using guessed type int dword_30210960;
// 30210964: using guessed type int dword_30210964;
// 30210968: using guessed type int dword_30210968;
// 3021099C: using guessed type int dword_3021099C;
// 30211398: using guessed type int dword_30211398;

//----- (30029F50) --------------------------------------------------------
int __usercall sub_30029F50@<eax>(int a1@<ecx>, int a2@<ebx>, int a3)
{
  int result; // eax
  int i; // esi
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // edi

  result = *(_DWORD *)(a2 + 132);
  for ( i = result - 4; i < result; ++i )
  {
    v5 = *(_DWORD *)(a3 + 132);
    if ( i >= v5 || i > v5 - 4 && (v6 = 4 * (i & 3) + 136, a1 = *(_DWORD *)(v6 + a2), a1 != *(_DWORD *)(v6 + a3)) )
    {
      v7 = i & 3;
      v8 = *(_DWORD *)(a2 + 4 * v7 + 136);
      dword_3020D080 = *(_DWORD *)(a2 + 4 * v7 + 152);
      sub_3001EE90((float *)&dword_3020CFE0, a1, v8, 1);
      dword_3020D250[i & 0xF] = v8;
      ++dword_3020D24C;
    }
    result = *(_DWORD *)(a2 + 132);
  }
  return result;
}
// 30029FAA: variable 'a1' is possibly undefined
// 3020D080: using guessed type int dword_3020D080;
// 3020D24C: using guessed type int dword_3020D24C;

//----- (3002A070) --------------------------------------------------------
int __usercall sub_3002A070@<eax>(int a1@<eax>, int a2@<esi>)
{
  int v3; // ecx

  if ( *(_DWORD *)(a1 + 228) != *(_DWORD *)(a2 + 228) && *(_DWORD *)(a1 + 240) )
    sub_30029B60(*(float *)(a1 + 232), *(_DWORD *)(a1 + 236), *(float *)(a1 + 240));
  sub_30029AB0();
  return sub_30029F50(v3, a1, a2);
}
// 3002A0AA: variable 'v3' is possibly undefined

//----- (3002A0C0) --------------------------------------------------------
int sub_3002A0C0()
{
  int v0; // edi
  int result; // eax
  int v2; // ebp
  int v3; // ebx
  int v4; // esi
  _DWORD *v5; // edx
  char *v6; // eax
  int v7; // ecx

  v0 = dword_301E5F24;
  result = *(_DWORD *)(dword_301E5F24 + 8408);
  v2 = 0;
  v3 = 0;
  v4 = 0;
  dword_30098394 = 0;
  dword_30098390 = 0;
  if ( result > 0 )
  {
    v5 = (_DWORD *)(dword_301E5F24 + 8416);
    do
    {
      v6 = (char *)&unk_30211940 + 552 * *v5;
      v7 = *((_DWORD *)v6 + 99);
      if ( v7 != 0xFFFFFF || (v6[248] & 2) == 0 )
      {
        if ( *((_DWORD *)v6 + 1) == 3 )
        {
          dword_30097F90[v3++] = (int)v6;
        }
        else if ( v7 )
        {
          dword_30098398[v2++] = (int)v6;
        }
      }
      result = *(_DWORD *)(v0 + 8408);
      ++v4;
      v5 += 60;
    }
    while ( v4 < result );
    dword_30098394 = v2;
    dword_30098390 = v3;
  }
  return result;
}
// 30098390: using guessed type int dword_30098390;
// 30098394: using guessed type int dword_30098394;
// 301E5F24: using guessed type int dword_301E5F24;

//----- (3002A160) --------------------------------------------------------
char __cdecl sub_3002A160(int a1, int a2, int a3, int a4, int a5, int a6, int a7, float *a8)
{
  char result; // al
  int v9; // ebx
  int v10; // edi
  int v11; // eax
  double v12; // st7
  int v13; // eax
  int i; // [esp+8h] [ebp-6Ch]
  int v15[3]; // [esp+14h] [ebp-60h] BYREF
  int v16[7]; // [esp+20h] [ebp-54h] BYREF
  int v17; // [esp+3Ch] [ebp-38h]
  float v18; // [esp+40h] [ebp-34h]
  float v19[12]; // [esp+44h] [ebp-30h] BYREF

  result = dword_30098394;
  v9 = 0;
  for ( i = 0; v9 < dword_30098394; i = ++v9 )
  {
    v10 = dword_30098398[v9];
    if ( *(_DWORD *)v10 != a5 )
    {
      v11 = *(_DWORD *)(v10 + 156);
      if ( v11 == 0xFFFFFF )
      {
        dword_30076898(33);
        sub_30005970(dword_3020AF08, (int)v15, v10 + 48);
        sub_30005970(dword_3020AF08, (int)v16, v10 + 12);
        v9 = i;
      }
      else
      {
        v12 = (double)(unsigned __int8)v11;
        *(float *)&v17 = -v12;
        v16[6] = v17;
        *(float *)&v16[4] = v12;
        *(float *)&v16[3] = v12;
        v18 = -(double)(BYTE1(v11) - 1);
        *(float *)&v16[5] = (float)(BYTE2(v11) - 32);
        v13 = 1;
        if ( *(_DWORD *)(v10 + 4) == 1 )
          v13 = 0x2000000;
        if ( (v13 & a6) == 0 )
          goto LABEL_21;
        if ( (*(_BYTE *)(v10 + 8) & 0x10) != 0 )
          dword_30076898(42);
        else
          dword_30076898(35);
        v15[0] = 0;
        v15[1] = 0;
        v15[2] = 0;
        v16[0] = *(_DWORD *)(v10 + 504);
        v16[1] = *(_DWORD *)(v10 + 508);
        v16[2] = *(_DWORD *)(v10 + 512);
      }
      if ( a7 )
        dword_30076898(41);
      else
        dword_30076898(39);
      if ( BYTE2(v19[11]) || v19[0] < (double)*a8 )
      {
        LOWORD(v19[10]) = *(_WORD *)v10;
        qmemcpy(a8, v19, 0x30u);
      }
      else if ( HIBYTE(v19[11]) )
      {
        *((_BYTE *)a8 + 47) = 1;
      }
      result = *((_BYTE *)a8 + 46);
      if ( result )
        return result;
    }
LABEL_21:
    result = dword_30098394;
  }
  return result;
}
// 300628EC: using guessed type float flt_300628EC;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30098394: using guessed type int dword_30098394;
// 3020AF08: using guessed type int dword_3020AF08;

//----- (3002A3A0) --------------------------------------------------------
char __usercall sub_3002A3A0@<al>(int a1@<eax>, int a2@<ecx>, int a3@<ebx>, float *a4, int a5, int a6, int a7)
{
  char result; // al
  float v10[12]; // [esp+Ch] [ebp-30h] BYREF

  dword_30076898(38);
  LOWORD(v10[10]) = 1022;
  if ( v10[0] == 1.0 )
    LOWORD(v10[10]) = 1023;
  result = sub_3002A160(a5, a6, a3, a2, a7, a1, 0, v10);
  qmemcpy(a4, v10, 0x30u);
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3002A420) --------------------------------------------------------
char __cdecl sub_3002A420(float *a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  char result; // al
  float v8[12]; // [esp+10h] [ebp-30h] BYREF

  dword_30076898(40);
  LOWORD(v8[10]) = 1022;
  if ( v8[0] == 1.0 )
    LOWORD(v8[10]) = 1023;
  result = sub_3002A160(a2, a3, a4, a5, a6, a7, 1, v8);
  qmemcpy(a1, v8, 0x30u);
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3002A4B0) --------------------------------------------------------
int __cdecl sub_3002A4B0(int a1, int a2, int a3)
{
  int v3; // ebx
  int i; // edi
  _DWORD *v5; // esi

  v3 = dword_30076898(36);
  for ( i = 0; i < dword_30098394; ++i )
  {
    v5 = (_DWORD *)dword_30098398[i];
    if ( *v5 != a2 && v5[39] == 0xFFFFFF && dword_30076898(33) )
      v3 |= dword_30076898(37);
  }
  return a3 & v3;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30098394: using guessed type int dword_30098394;

//----- (3002A540) --------------------------------------------------------
char *__cdecl sub_3002A540(int a1)
{
  int v1; // ebx
  int v2; // ebp
  char *result; // eax
  int v4; // ecx
  int v5; // eax
  int v6; // esi
  float *v7; // esi
  float *v8; // edx
  double v9; // st7
  double v10; // st7
  bool v11; // zf
  float v12; // [esp+10h] [ebp-2Ch]
  int v13; // [esp+14h] [ebp-28h]
  int v14; // [esp+14h] [ebp-28h]
  char v15[24]; // [esp+24h] [ebp-18h] BYREF

  v1 = dword_301E5F20;
  v2 = dword_301E5F24;
  qmemcpy(&dword_3020AF14, (const void *)(dword_301E5F24 + 12), 0x20CCu);
  dword_3020D238 = *(_DWORD *)(dword_300F0FB4 + 4 * dword_3020AFC4);
  if ( a1 )
  {
    dword_30076898(83);
    dword_30076898(84);
    sub_3000BCC0(
      (int)&dword_3020AF14,
      (int)v15,
      (void (__cdecl *)(float *, float *, int *, int *, float *, int, int))sub_3002A420);
  }
  result = *(char **)(v2 + 8);
  v4 = *(_DWORD *)(v1 + 8);
  if ( (int)result > v4 )
  {
    v13 = (int)&result[-v4];
    v5 = *(_DWORD *)(v2 + 20);
    v6 = *(_DWORD *)(v1 + 20);
    v12 = (double)(dword_3020AF00 - v4) / (double)v13;
    if ( v5 < v6 )
      v5 += 256;
    dword_3020AF1C = v6 + (unsigned __int64)((double)(v5 - v6) * v12);
    flt_3020B2EC = (*(float *)(v2 + 996) - *(float *)(v1 + 996)) * v12 + *(float *)(v1 + 996);
    result = (char *)&dword_3020AF14 - v1;
    v7 = (float *)(v2 + 44);
    v8 = (float *)(v1 + 32);
    v14 = 3;
    do
    {
      *(float *)((char *)v8 + (_DWORD)&dword_3020AF08 - v1) = (*(float *)((char *)v8 + v2 - v1) - *v8) * v12 + *v8;
      if ( !a1 )
      {
        v9 = sub_3003D9B0(v8[43], v7[40], v12);
        result = (char *)&dword_3020AF14 - v1;
        *(float *)((char *)v8 + (_DWORD)&unk_3020AFB4 - v1) = v9;
      }
      v10 = *v7++ - v8[3];
      ++v8;
      v11 = v14-- == 1;
      *(float *)((char *)v8 + (_DWORD)result - 4) = v10 * v12 + v8[2];
    }
    while ( !v11 );
    flt_3020AFE4 = (*(float *)(v2 + 220) - *(float *)(v1 + 220)) * v12 + *(float *)(v1 + 220);
    flt_3020AF54 = (*(float *)(v2 + 76) - *(float *)(v1 + 76)) * v12 + *(float *)(v1 + 76);
    flt_3020AFCC = (*(float *)(v2 + 196) - *(float *)(v1 + 196)) * v12 + *(float *)(v1 + 196);
  }
  return result;
}
// 3002A68A: variable 'v8' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301E5F20: using guessed type int dword_301E5F20;
// 301E5F24: using guessed type int dword_301E5F24;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF08: using guessed type int dword_3020AF08;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020AF1C: using guessed type int dword_3020AF1C;
// 3020AFC4: using guessed type int dword_3020AFC4;
// 3020AFCC: using guessed type float flt_3020AFCC;
// 3020AFE4: using guessed type float flt_3020AFE4;
// 3020B2EC: using guessed type float flt_3020B2EC;
// 3020D238: using guessed type int dword_3020D238;

//----- (3002A710) --------------------------------------------------------
int __usercall sub_3002A710@<eax>(_DWORD *a1@<edi>)
{
  int result; // eax

  result = dword_3029C5AC;
  if ( dword_3029C5AC )
  {
    result = sub_300057B0(dword_3020AF00, (int)a1, (float *)&dword_3020AF14);
    if ( result )
    {
      result = a1[125];
      if ( result != dword_3020AF00 )
      {
        result = sub_30005840(&dword_3020AF14, (int)a1, 1);
        if ( result )
        {
          a1[2] |= 0x100u;
          result = a1[35];
          a1[125] = dword_3020AF00;
          dword_3020AF9C[dword_3020AF98 & 3] = 146;
          result = (unsigned __int8)result;
          dword_3020AFAC[dword_3020AF98++ & 3] = (unsigned __int8)result;
        }
      }
    }
  }
  return result;
}
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020AF98: using guessed type int dword_3020AF98;
// 3020AFAC: using guessed type int dword_3020AFAC[];
// 3029C5AC: using guessed type int dword_3029C5AC;

//----- (3002A7A0) --------------------------------------------------------
int sub_3002A7A0()
{
  int result; // eax
  BOOL v1; // ebp
  int i; // esi
  _DWORD *v3; // edi

  result = dword_3020AF18;
  if ( dword_3020AF18 < 6 )
  {
    v1 = dword_3020AF18 == 4;
    if ( !dword_3020AF18 || dword_3020AF18 == 1 || dword_3020AF18 == 4 )
    {
      result = dword_30098390;
      for ( i = 0; i < dword_30098390; ++i )
      {
        v3 = (_DWORD *)dword_30097F90[i];
        if ( v3[1] != 3 || v1 )
        {
          if ( v3[39] == 0xFFFFFF )
          {
            if ( dword_30076898(33) )
              dword_30076898(38);
          }
        }
        else
        {
          sub_3002A710(v3);
        }
        result = dword_30098390;
      }
    }
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30098390: using guessed type int dword_30098390;
// 3020AF18: using guessed type int dword_3020AF18;

//----- (3002A860) --------------------------------------------------------
int sub_3002A860()
{
  int v0; // eax
  int v1; // ebp
  int v2; // esi
  double v3; // st7
  long double v4; // st7
  double v5; // st7
  double v6; // st7
  int v7; // eax
  float v9; // [esp+1Ch] [ebp-2138h]
  float v10; // [esp+1Ch] [ebp-2138h]
  int v11; // [esp+20h] [ebp-2134h]
  float v12; // [esp+24h] [ebp-2130h]
  float v13; // [esp+28h] [ebp-212Ch]
  float v14; // [esp+2Ch] [ebp-2128h]
  float v15; // [esp+30h] [ebp-2124h] BYREF
  float v16; // [esp+34h] [ebp-2120h]
  float v17; // [esp+38h] [ebp-211Ch]
  float v18[9]; // [esp+3Ch] [ebp-2118h] BYREF
  int v19[2101]; // [esp+78h] [ebp-20DCh] BYREF
  unsigned int v20; // [esp+214Ch] [ebp-8h]
  unsigned int retaddr; // [esp+2154h] [ebp+0h]

  v20 = retaddr ^ dword_300705C0;
  if ( dword_301E5F08 || (*(_DWORD *)(dword_301E5F20 + 24) & 0x10000) != 0 )
  {
    sub_3002A540(0);
  }
  else if ( dword_301E54EC || dword_301E596C )
  {
    sub_3002A540(1);
  }
  else
  {
    dword_30098884 = (int)sub_3002A420;
    dword_30098888 = (int)sub_3002A420;
    dword_3009888C = (int)sub_3002A420;
    dword_30098798 = (int)&dword_3020AF14;
    dword_30098890 = (int)sub_3002A4B0;
    dword_300987CC = dword_3020AF18 < 6 ? 42008593 : 8454161;
    if ( *(_DWORD *)(dword_301E5F20 + 16) == 4 )
      dword_300987CC &= 0xFDFEFFFF;
    v0 = dword_30076898(83);
    v1 = v0 - 127;
    v11 = v0;
    if ( dword_30076898(84) )
    {
      qmemcpy(v19, &dword_3020AF14, 0x20CCu);
      dword_30076898(84);
      qmemcpy(&dword_3020AF14, (const void *)(dword_301E5F24 + 12), 0x20CCu);
      dword_3020AF08 = *(_DWORD *)(dword_301E5F24 + 8);
      dword_3020D238 = *(_DWORD *)(dword_300F0FB4 + 4 * dword_3020AFC4);
      if ( dword_301DD92C < 8 || dword_301DD92C > 33 )
        dword_30076898(10);
      v2 = 0;
      dword_30098878 = dword_3029B94C;
      for ( dword_3009887C = dword_301DD92C; v1 <= v11; ++v1 )
      {
        dword_30076898(84);
        if ( dword_30098878 )
          sub_3000BCC0(
            dword_30098798,
            (int)ArgList,
            (void (__cdecl *)(float *, float *, int *, int *, float *, int, int))sub_3002A420);
        if ( *(int *)ArgList > dword_3020AF14 && *(int *)ArgList <= SLODWORD(v18[3]) && dword_30076898(84) )
        {
          if ( dword_3020AF14 == v19[0] )
          {
            sub_3001CD20(dword_3020AF68, (float *)&dword_3020AF28, &v15, dword_3020AF08, dword_3020AF04, v18);
            dword_3020AF60 += (unsigned __int16)(unsigned __int64)(v18[1] * 182.04445);
            if ( dword_3029C36C && (*(float *)&v19[5] != v15 || *(float *)&v19[6] != v16 || *(float *)&v19[7] != v17) )
              sub_300219D0("prediction error\n");
            v12 = *(float *)&v19[5] - v15;
            v13 = *(float *)&v19[6] - v16;
            v3 = *(float *)&v19[7] - v17;
            v14 = v3;
            v4 = sqrt(v3 * v14 + v13 * v13 + v12 * v12);
            if ( v4 > 0.1 )
            {
              if ( dword_3029C36C )
              {
                v9 = v4;
                sub_300219D0("Prediction miss: %f\n", v9);
              }
              if ( dword_301E5CCC )
              {
                v5 = (flt_301E5CC8 - (double)(dword_3020AF00 - dword_3020D23C)) / flt_301E5CC8;
                v10 = v5;
                if ( v5 >= 0.0 )
                {
                  if ( v10 > 0.0 && dword_3029C36C )
                    sub_300219D0("Double prediction decay: %f\n", v10);
                }
                else
                {
                  v10 = 0.0;
                }
                *(float *)&dword_3020D240 = *(float *)&dword_3020D240 * v10;
                *(float *)&dword_3020D244 = *(float *)&dword_3020D244 * v10;
                v6 = *(float *)&dword_3020D248 * v10;
              }
              else
              {
                v6 = 0.0;
                dword_3020D244 = 0;
                dword_3020D240 = 0;
              }
              dword_3020D23C = dword_3020AF04;
              *(float *)&dword_3020D240 = *(float *)&dword_3020D240 + v12;
              *(float *)&dword_3020D244 = *(float *)&dword_3020D244 + v13;
              *(float *)&dword_3020D248 = v6 + v14;
            }
          }
          if ( dword_30098878 )
          {
            v7 = dword_301DD92C * ((*(_DWORD *)ArgList + dword_301DD92C - 1) / dword_301DD92C);
            *(_DWORD *)ArgList = v7;
          }
          else
          {
            v7 = *(_DWORD *)ArgList;
          }
          if ( dword_301E332C )
          {
            byte_300987A1 &= 0xC0u;
            dword_300987A4 = dword_300987BC;
            dword_300987AC = dword_300987C4;
            byte_300987A0 = 0;
            byte_300987B0 = 0;
            byte_300987B1 = 0;
            byte_300987B2 = 0;
            dword_300987A8 = dword_300987C0;
            if ( v7 - dword_3020AF14 > 1 )
              *(_DWORD *)ArgList = dword_3020AF14 + 1;
          }
          sub_3000D7B0(COERCE_FLOAT(&dword_30098798));
          sub_3002A7A0();
          v2 = 1;
        }
      }
      dword_3020D238 = *(_DWORD *)(dword_300F0FB4 + 4 * dword_3020AFC4);
      if ( dword_3029C36C > 1 )
        sub_300219D0("[%i : %i] ", *(_DWORD *)ArgList, dword_3020AF00);
      if ( v2 )
      {
        sub_3001CD20(
          dword_3020AF68,
          (float *)&dword_3020AF28,
          (float *)&dword_3020AF28,
          dword_3020AF08,
          dword_3020AF00,
          v18);
        sub_3002A070((int)&dword_3020AF14, (int)v19);
      }
      else if ( dword_3029C36C )
      {
        sub_300219D0("no prediction run\n");
      }
    }
    else if ( dword_3029C36C )
    {
      sub_300219D0("exceeded PACKET_BACKUP on commands\n");
    }
  }
  return sub_30052A2E(retaddr ^ v20);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30098798: using guessed type int dword_30098798;
// 300987A0: using guessed type char byte_300987A0;
// 300987A1: using guessed type char byte_300987A1;
// 300987A4: using guessed type int dword_300987A4;
// 300987A8: using guessed type int dword_300987A8;
// 300987AC: using guessed type int dword_300987AC;
// 300987B0: using guessed type char byte_300987B0;
// 300987B1: using guessed type char byte_300987B1;
// 300987B2: using guessed type char byte_300987B2;
// 300987BC: using guessed type int dword_300987BC;
// 300987C0: using guessed type int dword_300987C0;
// 300987C4: using guessed type int dword_300987C4;
// 300987CC: using guessed type int dword_300987CC;
// 30098878: using guessed type int dword_30098878;
// 3009887C: using guessed type int dword_3009887C;
// 30098884: using guessed type int dword_30098884;
// 30098888: using guessed type int dword_30098888;
// 3009888C: using guessed type int dword_3009888C;
// 30098890: using guessed type int dword_30098890;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301DD92C: using guessed type int dword_301DD92C;
// 301E332C: using guessed type int dword_301E332C;
// 301E54EC: using guessed type int dword_301E54EC;
// 301E596C: using guessed type int dword_301E596C;
// 301E5CC8: using guessed type float flt_301E5CC8;
// 301E5CCC: using guessed type int dword_301E5CCC;
// 301E5F08: using guessed type int dword_301E5F08;
// 301E5F20: using guessed type int dword_301E5F20;
// 301E5F24: using guessed type int dword_301E5F24;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF04: using guessed type int dword_3020AF04;
// 3020AF08: using guessed type int dword_3020AF08;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020AF18: using guessed type int dword_3020AF18;
// 3020AF28: using guessed type int dword_3020AF28;
// 3020AF60: using guessed type int dword_3020AF60;
// 3020AF68: using guessed type int dword_3020AF68;
// 3020AFC4: using guessed type int dword_3020AFC4;
// 3020D238: using guessed type int dword_3020D238;
// 3020D23C: using guessed type int dword_3020D23C;
// 3020D240: using guessed type int dword_3020D240;
// 3020D244: using guessed type int dword_3020D244;
// 3020D248: using guessed type int dword_3020D248;
// 3029B94C: using guessed type int dword_3029B94C;
// 3029C36C: using guessed type int dword_3029C36C;

//----- (3002ADE0) --------------------------------------------------------
void sub_3002ADE0()
{
  int v0; // edx
  _DWORD *v1; // eax
  float v2; // [esp+0h] [ebp-20h]
  float v3; // [esp+0h] [ebp-20h]
  float v4; // [esp+8h] [ebp-18h] BYREF
  float v5; // [esp+Ch] [ebp-14h] BYREF
  float v6; // [esp+10h] [ebp-10h]
  float *v7; // [esp+14h] [ebp-Ch]
  float *v8; // [esp+18h] [ebp-8h]
  float v9; // [esp+1Ch] [ebp-4h] BYREF

  sub_3002A860();
  v0 = dword_3020AF2C;
  v1 = (_DWORD *)((char *)&unk_30211940 + 552 * dword_3020AFC0);
  v1[126] = dword_3020AF28;
  v1[128] = dword_3020AF30;
  v1[127] = v0;
  sub_30005970(dword_3020AF00, (int)(v1 + 129), (int)(v1 + 12));
  if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0x20000) != 0 && sub_30016FB0(&v9) )
  {
    if ( *(float *)(dword_3020D238 + 728) != 0.0 && !dword_30211398 )
    {
      dword_30211398 = 1;
      v6 = sub_3003EDE0(*(float *)(dword_3020D238 + 724), *(float *)(dword_3020D238 + 728));
      v8 = &v5;
      v7 = &v4;
      v9 = (double)rand() * 0.000030517578 * 6.2831855;
      v5 = cos(v9);
      v4 = sin(v9);
      v2 = v4 * v6 + flt_302108F8;
      flt_302108F8 = sub_3003DAE0(v2);
      v3 = v5 * v6 + flt_302108FC;
      flt_302108FC = sub_3003DAE0(v3);
    }
  }
  else
  {
    dword_30211398 = 0;
  }
}
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF28: using guessed type int dword_3020AF28;
// 3020AF2C: using guessed type int dword_3020AF2C;
// 3020AF30: using guessed type int dword_3020AF30;
// 3020AFC0: using guessed type int dword_3020AFC0;
// 3020D238: using guessed type int dword_3020D238;
// 30211398: using guessed type int dword_30211398;

//----- (3002AF40) --------------------------------------------------------
int __cdecl sub_3002AF40(float a1)
{
  int v1; // eax
  char *v2; // esi
  int v3; // eax
  char v4; // cl
  unsigned int v5; // kr00_4
  int v6; // edi
  const char *v7; // esi
  char *v8; // edx
  int v9; // eax
  int v10; // ecx
  char *v12; // ebp
  int v13; // esi
  int v14; // edx
  int v15; // eax
  int v16; // ecx
  const char *v18; // edx
  int v19; // esi
  int v20; // eax
  int v21; // ecx
  int v23; // esi
  int v24; // esi
  char *v25; // esi
  int v26; // edi
  int v27; // edi
  float v29; // [esp+0h] [ebp-A0h]
  float v30; // [esp+4h] [ebp-9Ch]
  float v31; // [esp+8h] [ebp-98h]
  float v32; // [esp+Ch] [ebp-94h]
  float v33; // [esp+58h] [ebp-48h] BYREF
  char v34[4]; // [esp+5Ch] [ebp-44h] BYREF
  char v35; // [esp+60h] [ebp-40h]
  char v36; // [esp+61h] [ebp-3Fh] BYREF
  unsigned int v37; // [esp+9Ch] [ebp-4h]
  unsigned int retaddr; // [esp+A0h] [ebp+0h]
  float v39; // [esp+A4h] [ebp+4h]
  float v40; // [esp+A4h] [ebp+4h]

  v37 = retaddr ^ dword_300705C0;
  dword_30076898(72);
  sub_30020CA0(0);
  v1 = dword_30076898(88);
  v32 = flt_301D5A48 * 430.0;
  v31 = flt_301D5A44 * 400.0;
  v30 = flt_301D5A48 * 22.0;
  v29 = flt_301D5A44 * 120.0;
  sub_30032820(LODWORD(v29), LODWORD(v30), LODWORD(v31), LODWORD(v32), 0, 0, 1065353216, 1065353216, v1);
  v33 = a1 * 0.1;
  dword_30076898(72);
  sub_30020CA0(0);
  dword_30076898(88);
  v2 = (char *)&unk_30062D90;
  do
  {
    dword_30076898(73);
    v2 += 16;
  }
  while ( (int)v2 < (int)&unk_30062DF0 );
  v33 = a1;
  dword_30076898(127);
  dword_30076898(57);
  dword_30076898(53);
  dword_30076898(54);
  v3 = 0;
  do
  {
    v4 = byte_301D5B80[v3];
    v34[v3++] = v4;
  }
  while ( v4 );
  v5 = strlen(v34);
  v6 = 4;
  v7 = ".bsp";
  v8 = (char *)&v33 + v5;
  do
  {
    v9 = *v8;
    v10 = *v7;
    ++v8;
    ++v7;
    if ( !v6-- )
      break;
    if ( v9 != v10 )
    {
      if ( v9 >= 97 && v9 <= 122 )
        v9 -= 32;
      if ( v10 >= 97 && v10 <= 122 )
        v10 -= 32;
      if ( v9 != v10 )
      {
        if ( 2 * (v9 >= v10) != 1 )
          goto LABEL_19;
        break;
      }
    }
  }
  while ( v9 );
  *((_BYTE *)&v33 + v5) = 0;
LABEL_19:
  v12 = v34;
  v13 = 4;
  v14 = 0;
  do
  {
    v15 = v34[v14];
    v16 = byte_300650AC[v14++];
    if ( !v13-- )
      break;
    if ( v15 != v16 )
    {
      if ( v15 >= 97 && v15 <= 122 )
        v15 -= 32;
      if ( v16 >= 97 && v16 <= 122 )
        v16 -= 32;
      if ( v15 != v16 )
      {
        if ( 2 * (v15 >= v16) != 1 )
          goto LABEL_35;
        break;
      }
    }
  }
  while ( v15 );
  if ( v35 == 47 || v35 == 92 )
    v12 = &v36;
LABEL_35:
  v18 = "mp";
  v19 = 2;
  do
  {
    v20 = v18[v12 - "mp"];
    v21 = *v18++;
    if ( !v19-- )
      break;
    if ( v20 != v21 )
    {
      if ( v20 >= 97 && v20 <= 122 )
        v20 -= 32;
      if ( v21 >= 97 && v21 <= 122 )
        v21 -= 32;
      if ( v20 != v21 )
        break;
    }
  }
  while ( v20 );
  v39 = 0.41;
  v23 = dword_30076898(52);
  if ( dword_30076898(52) + v23 + 4 > 386 )
  {
    do
    {
      if ( v39 <= 0.075000003 )
        break;
      v39 = v39 - 0.025;
      v24 = dword_30076898(52);
    }
    while ( dword_30076898(52) + v24 + 4 > 386 );
  }
  dword_30076898(52);
  dword_30076898(53);
  dword_30076898(54);
  v25 = (char *)dword_30076898(128);
  if ( v25 && !sub_30040170(99999, v25, "0.0.0.0:0") )
    sub_30023B20("cgame", "CGAME_LISTENSERVER");
  v40 = 0.2;
  v26 = dword_30076898(52);
  if ( dword_30076898(52) + v26 + 4 > 386 )
  {
    do
    {
      if ( v40 <= 0.075000003 )
        break;
      v40 = v40 - 0.0099999998;
      v27 = dword_30076898(52);
    }
    while ( dword_30076898(52) + v27 + 4 > 386 );
  }
  dword_30076898(53);
  dword_30076898(54);
  dword_30076898(52);
  dword_30076898(54);
  return sub_30052A2E(retaddr ^ v37);
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;

//----- (3002B670) --------------------------------------------------------
int __cdecl sub_3002B670(int a1, float a2)
{
  _BYTE *v2; // esi
  _BYTE *v3; // ebx
  _BYTE *v4; // edi
  char v5; // al
  char v6; // al
  const char *v7; // eax
  int v8; // esi
  int v9; // esi
  float v11; // [esp+0h] [ebp-ACh]
  float v12; // [esp+4h] [ebp-A8h]
  float v13; // [esp+8h] [ebp-A4h]
  float v14; // [esp+Ch] [ebp-A0h]
  char String[64]; // [esp+68h] [ebp-44h] BYREF
  unsigned int v16; // [esp+A8h] [ebp-4h]
  unsigned int retaddr; // [esp+ACh] [ebp+0h]
  float v18; // [esp+B4h] [ebp+8h]
  float v19; // [esp+B4h] [ebp+8h]

  v16 = retaddr ^ dword_300705C0;
  if ( !byte_301DF550 )
    return sub_30052A2E(retaddr ^ v16);
  v18 = a2 + 4.0;
  v2 = (_BYTE *)sub_30023C90();
  v3 = 0;
  v4 = v2;
  while ( v2 )
  {
    if ( !v4 )
      break;
    v5 = *v2;
    if ( *v2 == 32 )
    {
      ++v2;
    }
    else
    {
      if ( v5 == 10 )
      {
        ++v2;
      }
      else if ( v5 == 92 && v2[1] == 110 )
      {
        v2 += 2;
      }
      else
      {
        v6 = *++v4;
        if ( !v6 )
        {
          sub_30032560();
          v18 = v18 + 12.0;
          break;
        }
        if ( v6 == 10 || v6 == 92 && v4[1] == 110 )
        {
          dword_30076898(54);
          v2 = v4 + 1;
          if ( *v4 != 10 )
            v2 = v4 + 2;
        }
        else
        {
          if ( dword_30076898(52) <= 374 )
          {
            if ( *v4 == 32 )
              v3 = v4;
            continue;
          }
          sub_30032560();
          v2 = v3 + 1;
          if ( !v3 )
            v2 = v4 - 1;
        }
      }
      v18 = v18 + 12.0;
    }
    v4 = v2;
    v3 = 0;
  }
  v19 = v18 + 2.0;
  if ( !dword_301E5F20 && !dword_300F0FA0 )
  {
    dword_300F0FA0 = 1;
    if ( byte_301DD4B0 )
      dword_30076898(9);
    if ( byte_301E5730 )
      dword_30076898(9);
    if ( dword_301AA3CC )
      dword_30076898(9);
    v7 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]], "mapname");
    if ( !v7 || !*v7 || (sub_300403F0("levelshots/%s.tga", v7), (v8 = sub_300324D0()) == 0) )
      v8 = sub_300324D0();
    dword_30076898(72);
    v14 = flt_301D5A48 * 480.0;
    v13 = flt_301D5A44 * 640.0;
    v12 = flt_301D5A48 * 0.0;
    v11 = flt_301D5A44 * 0.0;
    sub_30032820(LODWORD(v11), LODWORD(v12), LODWORD(v13), LODWORD(v14), 0, 0, 1065353216, 1065353216, v8);
    dword_30076898(11);
    if ( j__atol(String) > 0 )
    {
      dword_30076898(63);
      sub_3001A260();
    }
    dword_30076898(25);
    --dword_300F0FA0;
  }
  v9 = dword_30076898(88);
  dword_30076898(72);
  sub_3001A4A0(125.0, v19, 390.0, 1.0, v9);
  return sub_30052A2E(retaddr ^ v16);
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FA0: using guessed type int dword_300F0FA0;
// 301AA3CC: using guessed type int dword_301AA3CC;
// 301CFB20: using guessed type int dword_301CFB20[];
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301DD4B0: using guessed type char byte_301DD4B0;
// 301DF550: using guessed type char byte_301DF550;
// 301E5730: using guessed type char byte_301E5730;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (3002BAE0) --------------------------------------------------------
double __cdecl sub_3002BAE0(float a1, float a2)
{
  unsigned int i; // esi
  const char *v3; // ecx
  float v5; // [esp+8h] [ebp-18h]

  v5 = 129.0;
  for ( i = 0; i < 20; v5 = a2 * flt_30062D2C[i] + v5 )
  {
    v3 = (&off_30062D40)[i];
    if ( *v3 )
    {
      sub_30023B20("cgame", v3);
      if ( dword_30062D44[i] == 2 )
        dword_30076898(52);
      dword_30076898(54);
    }
    i += 4;
  }
  return a1 + 14.0;
}
// 30062D2C: using guessed type float flt_30062D2C[];
// 30062D40: using guessed type char *off_30062D40;
// 30062D44: using guessed type int dword_30062D44[];
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3002BBD0) --------------------------------------------------------
double __usercall sub_3002BBD0@<st0>(_DWORD *a1@<eax>)
{
  double result; // st7
  int i; // ecx

  result = 10.0;
  *a1 = 0;
  if ( dword_3020F7D8 || dword_3020F7DC )
  {
    *a1 = 2;
    result = 66.0;
  }
  if ( dword_3020F7D4[0] )
  {
    result = result + 28.0;
    ++*a1;
  }
  if ( dword_3020F7E0 )
  {
    result = result + 28.0;
    ++*a1;
  }
  for ( i = 0; i < dword_3020F7B0; ++i )
  {
    result = result + 12.0;
    ++*a1;
  }
  return result;
}
// 3020F7B0: using guessed type int dword_3020F7B0;
// 3020F7D4: using guessed type int dword_3020F7D4[];
// 3020F7D8: using guessed type int dword_3020F7D8;
// 3020F7DC: using guessed type int dword_3020F7DC;
// 3020F7E0: using guessed type int dword_3020F7E0;

//----- (3002BCA0) --------------------------------------------------------
int __usercall sub_3002BCA0@<eax>(_DWORD *a1@<esi>, int a2)
{
  float *v2; // edi
  _DWORD *v3; // ebx
  double v4; // st7
  double v5; // st7
  char Buffer[1024]; // [esp+8h] [ebp-404h] BYREF
  unsigned int v8; // [esp+408h] [ebp-4h]
  unsigned int retaddr; // [esp+40Ch] [ebp+0h]

  v8 = retaddr ^ dword_300705C0;
  if ( a2 == 1 || a2 == 2 )
  {
    dword_30076898(11);
    v3 = a1 + 2;
    v2 = (float *)(a1 + 1);
    sscanf(Buffer, "%f %f %f", a1, a1 + 1, a1 + 2);
  }
  else
  {
    v2 = (float *)(a1 + 1);
    v3 = a1 + 2;
    *a1 = 1065353216;
    a1[1] = 1065353216;
    a1[2] = 1065353216;
  }
  if ( *(float *)a1 >= 0.0 )
  {
    if ( *(float *)a1 <= 1.0 )
      v4 = *(float *)a1;
    else
      v4 = 1.0;
  }
  else
  {
    v4 = 0.0;
  }
  *(float *)a1 = v4;
  if ( *v2 >= 0.0 )
  {
    if ( *v2 <= 1.0 )
      v5 = *v2;
    else
      v5 = 1.0;
  }
  else
  {
    v5 = 0.0;
  }
  *v2 = v5;
  if ( *(float *)v3 >= 0.0 )
  {
    if ( *(float *)v3 <= 1.0 )
      *v3 = *v3;
    else
      *v3 = 1065353216;
  }
  else
  {
    *v3 = 0;
  }
  return sub_30052A2E(retaddr ^ v8);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3002BE00) --------------------------------------------------------
int __usercall sub_3002BE00@<eax>(int *a1@<edx>, int a2@<ebx>, int a3, float a4, float a5, float a6)
{
  int v6; // ecx
  int v8; // ecx
  int v9; // eax
  int v10; // edi
  const char *v11; // eax
  int v12; // esi
  unsigned int v13; // esi
  int v14; // eax
  int v15; // eax
  const char *v16; // [esp-Ch] [ebp-C0h]
  float v17; // [esp+4h] [ebp-B0h]
  int v18[5]; // [esp+18h] [ebp-9Ch] BYREF
  int v19; // [esp+2Ch] [ebp-88h]
  unsigned int v20; // [esp+B0h] [ebp-4h]
  unsigned int retaddr; // [esp+B4h] [ebp+0h]

  v20 = retaddr ^ dword_300705C0;
  if ( dword_3020FDF4 )
    return sub_30052A2E(retaddr ^ v20);
  v6 = *a1;
  if ( *a1 < dword_3020FDF0 )
  {
    *a1 = v6 + 1;
    return sub_30052A2E(retaddr ^ v20);
  }
  if ( a4 + 24.0 > 432.0 )
  {
    dword_3020FDF4 = 1;
    return sub_30052A2E(retaddr ^ v20);
  }
  *a1 = v6 + 1;
  v8 = *(_DWORD *)(a3 + 12);
  v9 = dword_3020F7D4[a2];
  v18[0] = 1065353216;
  v18[1] = 1065353216;
  v18[2] = 1065353216;
  v18[3] = v8;
  if ( v9 == 1 )
    sub_300403F0(aCgameSbPlayer, 1);
  else
    sub_300403F0(aCgameSbPlayers, v9);
  v10 = dword_30076898(57);
  if ( a2 )
  {
    if ( a2 == 1 || a2 == 2 )
    {
      dword_30076898(11);
      dword_30076898(11);
      v16 = (const char *)v10;
    }
    else
    {
      dword_30076898(11);
      v16 = (const char *)v10;
    }
    v11 = (const char *)dword_30076898(57);
    sub_300403F0("%s (%s)", v11, v16);
  }
  else
  {
    dword_30076898(11);
  }
  sub_30020CA0(0);
  v12 = dword_30076898(88);
  dword_30076898(72);
  sub_3001A4A0(129.0, a4, a5, a6, v12);
  sub_3002BCA0(v18, a2);
  *(float *)&v19 = a4 + 18.0;
  dword_30076898(54);
  if ( a2 == 1 || a2 == 2 )
  {
    v17 = 129.0;
    v13 = 0;
    while ( 1 )
    {
      v14 = dword_30062D38[v13];
      if ( v14 == 1 )
        break;
      if ( v14 == 3 )
      {
        v15 = dword_3020F7C4[a2];
LABEL_24:
        sub_300403F0("%i", v15);
        if ( dword_30062D44[v13] == 2 )
          dword_30076898(52);
        v18[4] = v19;
        dword_30076898(54);
      }
      v13 += 4;
      v17 = a5 * flt_30062D2C[v13] + v17;
      if ( v13 >= 20 )
        return sub_30052A2E(retaddr ^ v20);
    }
    v15 = dword_3020F7B4[a2];
    goto LABEL_24;
  }
  return sub_30052A2E(retaddr ^ v20);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 30062D2C: using guessed type float flt_30062D2C[];
// 30062D38: using guessed type int dword_30062D38[];
// 30062D44: using guessed type int dword_30062D44[];
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020F7B4: using guessed type int dword_3020F7B4[];
// 3020F7C4: using guessed type int dword_3020F7C4[];
// 3020F7D4: using guessed type int dword_3020F7D4[];
// 3020FDF0: using guessed type int dword_3020FDF0;
// 3020FDF4: using guessed type int dword_3020FDF4;

//----- (3002C170) --------------------------------------------------------
double __usercall sub_3002C170@<st0>(int *a1@<edx>, int a2, float a3, int a4, float a5, int a6)
{
  int v6; // ecx
  double result; // st7
  double v8; // st7
  int v9; // edi
  int v10; // esi
  float *v11; // ebp
  int v12; // eax
  const char *v13; // edi
  int v14; // eax
  int v15; // eax
  unsigned int v16; // esi
  double v17; // st7
  bool v18; // zf
  float v19; // [esp+0h] [ebp-74h]
  float v20; // [esp+24h] [ebp-50h]
  float v21; // [esp+28h] [ebp-4Ch]
  int v22; // [esp+2Ch] [ebp-48h]
  float v23; // [esp+30h] [ebp-44h]
  int *v24; // [esp+34h] [ebp-40h]

  if ( dword_3020FDF4 )
    return a3;
  v6 = *a1;
  if ( *a1 < dword_3020FDF0 )
  {
    *a1 = v6 + 1;
    return a3;
  }
  v8 = a3 + 12.0;
  v23 = v8;
  if ( v8 <= 432.0 )
  {
    *a1 = v6 + 1;
    v9 = a4;
    v24 = &dword_3018DC8C[300 * *(_DWORD *)a4];
    if ( *v24 )
    {
      if ( *(_DWORD *)a4 == dword_301E5F04 || a6 )
      {
        sub_30020CA0(0);
        v10 = dword_30076898(88);
        dword_30076898(72);
        sub_3001A4A0(129.0, a3, a5, 12.0, v10);
      }
      v20 = 129.0;
      v11 = &flt_30062D3C;
      v22 = 5;
      while ( 1 )
      {
        v12 = *((_DWORD *)v11 - 1);
        if ( v12 == 4 )
        {
          if ( *(_DWORD *)(v9 + 20) )
          {
            if ( *((_DWORD *)v11 + 2) == 2 )
              v21 = a5 * *v11 - 13.0;
            else
              v21 = 0.0;
            dword_30076898(72);
            v19 = v21 + v20;
            sub_3001A4A0(v19, a3, 13.0, 13.0, *(_DWORD *)(v9 + 20));
          }
        }
        else
        {
          v13 = &byte_30063AC4;
          switch ( v12 )
          {
            case 0:
              v13 = (const char *)(v24 + 3);
              break;
            case 1:
              if ( *(_DWORD *)(a4 + 16) != 3 )
              {
                v14 = *(_DWORD *)(a4 + 4);
                goto LABEL_27;
              }
              break;
            case 2:
              if ( *(_DWORD *)(a4 + 16) != 3 )
              {
                v15 = sub_300403F0("%i", *(_DWORD *)(a4 + 12));
                goto LABEL_28;
              }
              break;
            case 3:
              v14 = *(_DWORD *)(a4 + 8);
LABEL_27:
              v15 = sub_300403F0("%i", v14);
LABEL_28:
              v13 = (const char *)v15;
              break;
            default:
              break;
          }
          if ( *v13 )
          {
            if ( a5 * *v11 < (double)dword_30076898(52) )
            {
              v16 = strlen(v13);
              do
                --v16;
              while ( a5 * *v11 < (double)dword_30076898(52) );
            }
            if ( *((_DWORD *)v11 + 2) == 2 )
              dword_30076898(52);
            dword_30076898(54);
          }
        }
        v17 = a5 * *v11;
        v11 += 4;
        v18 = v22-- == 1;
        v20 = v17 + v20;
        if ( v18 )
          break;
        v9 = a4;
      }
      result = v23;
    }
    else
    {
      result = a3;
    }
  }
  else
  {
    dword_3020FDF4 = 1;
    result = a3;
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30062D3C: using guessed type float flt_30062D3C;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301E5F04: using guessed type int dword_301E5F04;
// 3020FDF0: using guessed type int dword_3020FDF0;
// 3020FDF4: using guessed type int dword_3020FDF4;

//----- (3002C560) --------------------------------------------------------
double __cdecl sub_3002C560(int a1, float a2, int a3, float a4, int a5)
{
  int v5; // edi
  int v6; // ebx
  _DWORD *i; // esi
  int v9[4]; // [esp+Ch] [ebp-10h] BYREF

  v5 = 0;
  sub_3002BCA0(v9, a3);
  v6 = 0;
  v9[3] = *(_DWORD *)(a1 + 12);
  for ( i = &unk_3020F7E4; v6 < dword_3020F7B0; i += 6 )
  {
    if ( dword_3018DC8C[300 * *i] && i[4] == a3 )
    {
      a2 = sub_3002C170((int *)a5, (int)v9, a2, (int)i, a4, v5);
      v5 ^= 1u;
    }
    ++v6;
  }
  return a2;
}
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 3020F7B0: using guessed type int dword_3020F7B0;

//----- (3002C600) --------------------------------------------------------
void __usercall sub_3002C600(int a1@<ebx>, float a2, int a3)
{
  int v3; // edi
  double v4; // st7
  int v5; // edi
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  float v10; // [esp+0h] [ebp-48h]
  float v11; // [esp+0h] [ebp-48h]
  float v12; // [esp+4h] [ebp-44h]
  float v13; // [esp+4h] [ebp-44h]
  float v14; // [esp+8h] [ebp-40h]
  float v15; // [esp+8h] [ebp-40h]
  float v16; // [esp+Ch] [ebp-3Ch]
  float v17; // [esp+Ch] [ebp-3Ch]
  float v18; // [esp+14h] [ebp-34h]
  float v19; // [esp+2Ch] [ebp-1Ch]
  float v20; // [esp+30h] [ebp-18h]

  sub_30020CA0(0);
  v3 = dword_30076898(88);
  dword_30076898(72);
  v4 = 432.0 - a2 - 1.0;
  v16 = flt_301D5A48 * v4;
  v14 = flt_301D5A44 * 8.0;
  v12 = flt_301D5A48 * a2;
  v10 = flt_301D5A44 * 505.0;
  sub_30032820(LODWORD(v10), LODWORD(v12), LODWORD(v14), LODWORD(v16), 0, 0, 1065353216, 1065353216, v3);
  v20 = a2 + 1.0;
  v19 = v4 - 2.0;
  if ( dword_3020FDF0 && a3 )
    v20 = (double)dword_3020FDF0 / (double)a3 * v19 + v20;
  if ( a1 - dword_3020FDF0 > 1 && a3 > 1 )
    v19 = (double)(a1 - dword_3020FDF0) / (double)a3 * v19;
  sub_30020CA0(0);
  v5 = dword_30076898(88);
  dword_30076898(72);
  v17 = flt_301D5A48 * v19;
  v15 = flt_301D5A44 * 6.0;
  v13 = flt_301D5A48 * v20;
  v11 = flt_301D5A44 * 506.0;
  sub_30032820(LODWORD(v11), LODWORD(v13), LODWORD(v15), LODWORD(v17), 0, 0, 1065353216, 1065353216, v5);
  dword_30076898(72);
  if ( dword_3020FDF0 > 0 )
  {
    sub_30020CA0(0);
    v6 = dword_30076898(88);
    sub_3001A4A0(521.0, a2, 16.0, 16.0, v6);
    sub_30020CA0(0);
    v7 = dword_30076898(88);
    v18 = a2 + 18.0;
    sub_3001A4A0(521.0, v18, 16.0, 16.0, v7);
  }
  if ( a1 < a3 )
  {
    sub_30020CA0(0);
    v8 = dword_30076898(88);
    sub_3001A4A0(521.0, 415.0, 16.0, 16.0, v8);
    sub_30020CA0(0);
    v9 = dword_30076898(88);
    sub_3001A4A0(521.0, 397.0, 16.0, 16.0, v9);
  }
}
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 3020FDF0: using guessed type int dword_3020FDF0;

//----- (3002C8A0) --------------------------------------------------------
int __usercall sub_3002C8A0@<eax>(double a1@<st0>, float a2)
{
  int v2; // edi
  float v3; // esi
  double v4; // st7
  int v5; // ebx
  double v6; // st7
  bool v7; // zf
  int v8; // edi
  float v10; // [esp+0h] [ebp-34h]
  float v11; // [esp+4h] [ebp-30h]
  float v12; // [esp+18h] [ebp-1Ch] BYREF
  int v13; // [esp+1Ch] [ebp-18h] BYREF
  float v14; // [esp+20h] [ebp-14h]
  int v15[4]; // [esp+24h] [ebp-10h] BYREF
  float v16; // [esp+38h] [ebp+4h]
  float v17; // [esp+38h] [ebp+4h]
  float v18; // [esp+38h] [ebp+4h]
  float v19; // [esp+38h] [ebp+4h]
  float v20; // [esp+38h] [ebp+4h]
  float v21; // [esp+38h] [ebp+4h]

  v2 = 0;
  dword_3020FDF4 = 0;
  v15[0] = 1065353216;
  v15[1] = 1065353216;
  v15[2] = 1065353216;
  *(float *)&v15[3] = a2;
  sub_3002B670((int)v15, 52.0);
  v16 = a1;
  if ( 432.0 - v16 >= sub_3002BBD0(&v13) )
  {
    v12 = 382.0;
  }
  else
  {
    v12 = 374.0;
    v2 = 1;
  }
  v3 = v12;
  v11 = v16 + 4.0;
  v4 = sub_3002BAE0(v11, v12);
  v17 = v4;
  v14 = v4;
  v12 = 0.0;
  if ( dword_3020F7D8 || dword_3020F7DC )
  {
    if ( dword_3020F7BC >= dword_3020F7B8 )
    {
      v5 = 2;
      if ( dword_3020F7BC <= dword_3020F7B8 )
        v5 = dword_3007697C;
    }
    else
    {
      v5 = 1;
    }
    dword_3007697C = v5;
    sub_3002BE00((int)v15, v17, v3, 32.0);
    v18 = v4;
    v6 = sub_3002C560((int)v15, v18, v5, v3, (int)&v12) + 4.0;
    v10 = v6;
    sub_3002BE00((int)v15, v10, v3, 32.0);
    v19 = v6;
    v4 = sub_3002C560((int)v15, v19, (unsigned int)(v5 == 1) + 1, v3, (int)&v12) + 4.0;
    v17 = v4;
  }
  if ( dword_3020F7D4[0] )
  {
    sub_3002BE00((int)v15, v17, v3, 32.0);
    v20 = v4;
    v4 = sub_3002C560((int)v15, v20, 0, v3, (int)&v12) + 4.0;
    v17 = v4;
  }
  if ( dword_3020F7E0 )
  {
    sub_3002BE00((int)v15, v17, v3, 32.0);
    v21 = v4;
    sub_3002C560((int)v15, v21, 3, v3, (int)&v12);
  }
  v7 = v2 == 0;
  v8 = v13;
  if ( !v7 )
    sub_3002C600(SLODWORD(v12), v14, v13);
  if ( dword_3020FDF0 > v8 - 1 )
    dword_3020FDF0 = v8 - 1;
  return dword_30076898(72);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3007697C: using guessed type int dword_3007697C;
// 3020F7B8: using guessed type int dword_3020F7B8;
// 3020F7BC: using guessed type int dword_3020F7BC;
// 3020F7D4: using guessed type int dword_3020F7D4[];
// 3020F7D8: using guessed type int dword_3020F7D8;
// 3020F7DC: using guessed type int dword_3020F7DC;
// 3020F7E0: using guessed type int dword_3020F7E0;
// 3020FDF0: using guessed type int dword_3020FDF0;
// 3020FDF4: using guessed type int dword_3020FDF4;

//----- (3002CAE0) --------------------------------------------------------
int __usercall sub_3002CAE0@<eax>(double a1@<st0>)
{
  int *v1; // eax
  int v3; // [esp+0h] [ebp-4h]

  if ( dword_3029D32C || !dword_301DD5CC )
    return 0;
  if ( !dword_3020FDE4 )
  {
    v1 = sub_3001ABD0(100, dword_3020FDEC);
    if ( v1 )
    {
      v3 = *v1;
      goto LABEL_9;
    }
    byte_3020FDF8 = 0;
    return 0;
  }
  v3 = 1065353216;
LABEL_9:
  if ( dword_3020F7AC + 2000 < dword_3020AF00 )
  {
    dword_3020F7AC = dword_3020AF00;
    dword_30076898(24);
  }
  sub_3002AF40(*(float *)&v3);
  sub_3002C8A0(a1, *(float *)&v3);
  return 1;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301DD5CC: using guessed type int dword_301DD5CC;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020F7AC: using guessed type int dword_3020F7AC;
// 3020FDE4: using guessed type int dword_3020FDE4;
// 3020FDEC: using guessed type int dword_3020FDEC;
// 3029D32C: using guessed type int dword_3029D32C;

//----- (3002CBB0) --------------------------------------------------------
int sub_3002CBB0()
{
  int result; // eax

  result = dword_3020FDF4;
  if ( dword_3020FDF4 )
  {
    result = dword_301B108C + dword_3020FDF0;
    dword_3020FDF0 += dword_301B108C;
    if ( dword_3020FDF0 > dword_3020F7B0 - 1 )
      dword_3020FDF0 = dword_3020F7B0 - 1;
  }
  return result;
}
// 301B108C: using guessed type int dword_301B108C;
// 3020F7B0: using guessed type int dword_3020F7B0;
// 3020FDF0: using guessed type int dword_3020FDF0;
// 3020FDF4: using guessed type int dword_3020FDF4;

//----- (3002CBE0) --------------------------------------------------------
int sub_3002CBE0()
{
  unsigned int v1; // [esp+400h] [ebp-4h]
  unsigned int retaddr; // [esp+404h] [ebp+0h]

  v1 = retaddr ^ dword_300705C0;
  sub_30020CA0(0);
  dword_30076898(88);
  sub_30020CA0(0);
  dword_30076898(88);
  sub_30020CA0(0);
  dword_30076898(88);
  sub_30020CA0(0);
  dword_30076898(88);
  sub_30020CA0(0);
  dword_30076898(88);
  sub_30020CA0(0);
  dword_30076898(88);
  sub_30020CA0(0);
  dword_30076898(88);
  sub_30020CA0(0);
  dword_30076898(88);
  sub_30020CA0(0);
  dword_30076898(88);
  sub_30020CA0(0);
  dword_30076898(88);
  dword_30076898(11);
  sub_30020CA0(0);
  dword_30076898(88);
  dword_30076898(11);
  sub_30020CA0(0);
  dword_30076898(88);
  dword_30076898(11);
  sub_30020CA0(0);
  dword_30076898(88);
  dword_30076898(11);
  sub_30020CA0(0);
  dword_30076898(88);
  return sub_30052A2E(retaddr ^ v1);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3002CDB0) --------------------------------------------------------
int sub_3002CDB0()
{
  int result; // eax
  int v1; // ebp
  int *v2; // esi
  int v3; // ebx
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int *v7; // ecx
  int v8; // esi

  dword_30076898(13);
  dword_3020F7B0 = j__atol(&byte_30096790);
  if ( dword_3020F7B0 > 64 )
    dword_3020F7B0 = 64;
  dword_3020F7B4[0] = 0;
  dword_3020F7B8 = 0;
  dword_3020F7BC = 0;
  dword_3020F7C0 = 0;
  dword_30076898(13);
  dword_3020F7B8 = j__atol(&byte_30096790);
  dword_30076898(13);
  dword_3020F7BC = j__atol(&byte_30096790);
  memset(&unk_3020F7E4, 0, 0x600u);
  result = dword_3020F7B0;
  dword_3020F7C4[0] = 0;
  dword_3020F7D4[0] = 0;
  dword_3020F7C8 = 0;
  dword_3020F7D8 = 0;
  dword_3020F7CC = 0;
  dword_3020F7DC = 0;
  v1 = 0;
  dword_3020F7D0 = 0;
  dword_3020F7E0 = 0;
  if ( dword_3020F7B0 > 0 )
  {
    v2 = (int *)&unk_3020F7E4;
    v3 = 5;
    do
    {
      dword_30076898(13);
      *v2 = j__atol(&byte_30096790);
      dword_30076898(13);
      v2[1] = j__atol(&byte_30096790);
      dword_30076898(13);
      v2[2] = j__atol(&byte_30096790);
      dword_30076898(13);
      v2[3] = j__atol(&byte_30096790);
      dword_30076898(13);
      v4 = j__atol(&byte_30096790);
      v2[5] = v4;
      if ( v4 > 0 && v4 <= 8 )
      {
        if ( v4 + 20 < 0 || v4 + 20 >= 2048 )
          sub_30021A30("CG_ConfigString: bad index: %i", v4 + 20);
        sub_30020CA0(0);
        v2[5] = dword_30076898(88);
      }
      if ( *v2 < 0 || *v2 >= 64 )
        *v2 = 0;
      v5 = 300 * *v2;
      dword_3018DCC0[v5] = v2[1];
      if ( dword_3018DC8C[v5] )
        v6 = dword_3018DCB8[v5];
      else
        v6 = 0;
      v2[4] = v6;
      ++dword_3020F7D4[v6];
      dword_3020F7C4[v2[4]] += v2[2];
      result = dword_3020F7B0;
      ++v1;
      v3 += 5;
      v2 += 6;
    }
    while ( v1 < dword_3020F7B0 );
  }
  v7 = dword_3020F7C4;
  do
  {
    v8 = v7[4];
    if ( v8 < 1 || (result = *v7, *v7 < 1) )
    {
      *v7 = 0;
    }
    else
    {
      result /= v8;
      *v7 = result;
    }
    ++v7;
  }
  while ( (int)v7 < (int)dword_3020F7D4 );
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 3018DCB8: using guessed type int dword_3018DCB8[];
// 3018DCC0: using guessed type int dword_3018DCC0[];
// 3020F7B0: using guessed type int dword_3020F7B0;
// 3020F7B4: using guessed type int dword_3020F7B4[];
// 3020F7B8: using guessed type int dword_3020F7B8;
// 3020F7BC: using guessed type int dword_3020F7BC;
// 3020F7C0: using guessed type int dword_3020F7C0;
// 3020F7C4: using guessed type int dword_3020F7C4[];
// 3020F7C8: using guessed type int dword_3020F7C8;
// 3020F7CC: using guessed type int dword_3020F7CC;
// 3020F7D0: using guessed type int dword_3020F7D0;
// 3020F7D4: using guessed type int dword_3020F7D4[];
// 3020F7D8: using guessed type int dword_3020F7D8;
// 3020F7DC: using guessed type int dword_3020F7DC;
// 3020F7E0: using guessed type int dword_3020F7E0;

//----- (3002D040) --------------------------------------------------------
int sub_3002D040()
{
  const char *v0; // esi
  const char *v1; // eax
  const char *v2; // eax
  const char *v3; // eax
  const char *v4; // eax

  v0 = &byte_301D1B20[dword_301CFB20[0]];
  v1 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]], "sv_hostname");
  strncpy(byte_301D5A7C, v1, 0x100u);
  v2 = (const char *)sub_300404B0(v0, "g_gametype");
  strncpy(byte_301D5A5C, v2, 0x20u);
  if ( !dword_301D5A58 )
    dword_30076898(9);
  v3 = (const char *)sub_300404B0(v0, "sv_maxclients");
  dword_301D5B7C = j__atol(v3);
  v4 = (const char *)sub_300404B0(v0, "mapname");
  return sub_30040370(&byte_301D5B80, 0x40u, "maps/mp/%s.bsp", v4);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301CFB20: using guessed type int dword_301CFB20[];
// 301D5A58: using guessed type int dword_301D5A58;
// 301D5B7C: using guessed type int dword_301D5B7C;

//----- (3002D0F0) --------------------------------------------------------
int sub_3002D0F0()
{
  int result; // eax
  int v1; // edi
  _DWORD *v2; // ebx

  result = dword_301D5A58;
  if ( !dword_301D5A58 )
  {
    v1 = 204;
    v2 = &unk_301CFE50;
    do
    {
      result = v1 - 64;
      if ( v1 - 64 < 0 || result >= 2048 )
        result = sub_30021A30("CG_ConfigString: bad index: %i", v1 - 64);
      if ( !byte_301D1B20[*(v2 - 64)] )
        break;
      if ( v1 < 0 || v1 >= 2048 )
        sub_30021A30("CG_ConfigString: bad index: %i", v1);
      result = dword_30076898(9);
      ++v2;
      ++v1;
    }
    while ( v1 - 204 < 64 );
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A58: using guessed type int dword_301D5A58;

//----- (3002D180) --------------------------------------------------------
int sub_3002D180()
{
  char *v0; // eax
  int v1; // ecx
  char *v2; // eax
  char *v3; // eax
  int v4; // edx
  char *v5; // eax
  char *v6; // eax
  int v7; // edx
  char *v8; // eax
  char *v9; // eax
  int v10; // edx
  char *v11; // eax
  char *v12; // eax
  int v13; // edx
  char *v14; // eax
  char *v15; // eax
  int v16; // edx
  char *v17; // eax
  char *v18; // eax
  int v19; // edx
  char *v20; // eax
  int result; // eax
  char *v22[3]; // [esp+4h] [ebp-1Ch] BYREF
  float v23; // [esp+10h] [ebp-10h]
  float v24; // [esp+14h] [ebp-Ch]
  float v25; // [esp+18h] [ebp-8h]
  float v26; // [esp+1Ch] [ebp-4h]

  v0 = String;
  v22[0] = &byte_301D1B20[dword_301CFB50];
  if ( *((_DWORD *)String + 257) )
  {
    *((_DWORD *)String + 257) = 0;
    v1 = *((_DWORD *)v0 + 261);
    v22[0] = *((char **)v0 + 262);
    *((_DWORD *)v0 + 256) = v1;
  }
  v2 = sub_3003F2E0(v22, 1);
  *(float *)&v22[1] = atof(v2);
  v3 = String;
  if ( *((_DWORD *)String + 257) )
  {
    *((_DWORD *)String + 257) = 0;
    v4 = *((_DWORD *)v3 + 261);
    v22[0] = *((char **)v3 + 262);
    *((_DWORD *)v3 + 256) = v4;
  }
  v5 = sub_3003F2E0(v22, 1);
  if ( v5 && *v5 )
  {
    v26 = atof(v5);
    v6 = String;
    if ( *((_DWORD *)String + 257) )
    {
      *((_DWORD *)String + 257) = 0;
      v7 = *((_DWORD *)v6 + 261);
      v22[0] = *((char **)v6 + 262);
      *((_DWORD *)v6 + 256) = v7;
    }
    v8 = sub_3003F2E0(v22, 1);
    *(float *)&v22[2] = atof(v8);
    v9 = String;
    if ( *((_DWORD *)String + 257) )
    {
      *((_DWORD *)String + 257) = 0;
      v10 = *((_DWORD *)v9 + 261);
      v22[0] = *((char **)v9 + 262);
      *((_DWORD *)v9 + 256) = v10;
    }
    v11 = sub_3003F2E0(v22, 1);
    v25 = atof(v11);
    v12 = String;
    if ( *((_DWORD *)String + 257) )
    {
      *((_DWORD *)String + 257) = 0;
      v13 = *((_DWORD *)v12 + 261);
      v22[0] = *((char **)v12 + 262);
      *((_DWORD *)v12 + 256) = v13;
    }
    v14 = sub_3003F2E0(v22, 1);
    v24 = atof(v14);
    v15 = String;
    if ( *((_DWORD *)String + 257) )
    {
      *((_DWORD *)String + 257) = 0;
      v16 = *((_DWORD *)v15 + 261);
      v22[0] = *((char **)v15 + 262);
      *((_DWORD *)v15 + 256) = v16;
    }
    v17 = sub_3003F2E0(v22, 1);
    v23 = atof(v17);
    v18 = String;
    if ( *((_DWORD *)String + 257) )
    {
      *((_DWORD *)String + 257) = 0;
      v19 = *((_DWORD *)v18 + 261);
      v22[0] = *((char **)v18 + 262);
      *((_DWORD *)v18 + 256) = v19;
    }
    v20 = sub_3003F2E0(v22, 1);
    j__atol(v20);
    sub_30032770();
    v26 = 0.0;
    v25 = 0.0;
    v24 = 0.0;
    v23 = 0.0;
    result = dword_30076898(68);
  }
  else
  {
    v26 = 0.0;
    v25 = 0.0;
    v24 = 0.0;
    v23 = 0.0;
    result = dword_30076898(68);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301CFB50: using guessed type int dword_301CFB50;

//----- (3002D4F0) --------------------------------------------------------
int sub_3002D4F0()
{
  int i; // edi
  _BYTE *v1; // esi
  int j; // ebp
  const char *v3; // eax
  int v4; // eax
  double v5; // st7
  int k; // esi
  int l; // ebp
  const char *v8; // eax
  int v9; // eax
  double v10; // st7
  float v12; // [esp+10h] [ebp-94h]
  float v13; // [esp+10h] [ebp-94h]
  int v14; // [esp+18h] [ebp-8Ch]
  int v15; // [esp+20h] [ebp-84h]
  char String[64]; // [esp+60h] [ebp-44h] BYREF
  unsigned int v17; // [esp+A0h] [ebp-4h]
  unsigned int retaddr; // [esp+A4h] [ebp+0h]

  v17 = retaddr ^ dword_300705C0;
  dword_301D607C = j__atol(&byte_301D1B20[dword_301CFB34]);
  dword_301D6080 = j__atol(&byte_301D1B20[dword_301CFB38]);
  dword_301D6078 = j__atol(&byte_301D1B20[dword_301CFB54]);
  sub_3002D180();
  for ( i = 1180; i < 1212; ++i )
  {
    if ( i < 0 )
      sub_30021A30("CG_ConfigString: bad index: %i", i);
    v1 = &byte_301D1B20[dword_301CFB20[i]];
    if ( *v1 && !dword_30076898(122) )
      sub_30021A30("Could not load script menu file '%s'\n", (char)v1);
  }
  for ( j = 21; j < 29; ++j )
  {
    if ( j < 0 )
      sub_30021A30("CG_ConfigString: bad index: %i", j);
    if ( !dword_301E5F20 && !dword_300F0FA0 )
    {
      dword_300F0FA0 = 1;
      if ( byte_301DD4B0 )
        dword_30076898(9);
      if ( byte_301E5730 )
        dword_30076898(9);
      if ( dword_301AA3CC )
        dword_30076898(9);
      v3 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]]);
      if ( !v3 || !*v3 || (v4 = sub_300403F0("levelshots/%s.tga", v3), !sub_300324D0(v4, 2)) )
        sub_300324D0("menu/art/unknownmap", 2);
      dword_30076898(72);
      dword_30076898(73);
      dword_30076898(11);
      v15 = j__atol(String);
      if ( v15 > 0 )
      {
        v5 = (double)dword_30076898(63) / (double)v15;
        v12 = v5;
        if ( v5 > 1.0 )
          v12 = 1.0;
        sub_3001A260(200.0, 468.0, 240.0, 10.0, v12);
      }
      dword_30076898(25);
      --dword_300F0FA0;
    }
    dword_30076898(88);
  }
  for ( k = 29; k < 44; ++k )
  {
    if ( k < 0 )
      sub_30021A30("CG_ConfigString: bad index: %i", k);
    sub_300322A0(&byte_301D1B20[dword_301CFB20[k]], 5);
  }
  for ( l = 1501; l < 1628; ++l )
  {
    if ( l < 0 )
      sub_30021A30("CG_ConfigString: bad index: %i", l);
    if ( byte_301D1B20[dword_301CFB20[l]] )
    {
      if ( !dword_301E5F20 && !dword_300F0FA0 )
      {
        dword_300F0FA0 = 1;
        if ( byte_301DD4B0 )
          dword_30076898(9);
        if ( byte_301E5730 )
          dword_30076898(9);
        if ( dword_301AA3CC )
          dword_30076898(9);
        v8 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]]);
        if ( !v8 || !*v8 || (v9 = sub_300403F0("levelshots/%s.tga", v8), !sub_300324D0(v9, 2)) )
          sub_300324D0("menu/art/unknownmap", 2);
        dword_30076898(72);
        dword_30076898(73);
        dword_30076898(11);
        v14 = j__atol(String);
        if ( v14 > 0 )
        {
          v10 = (double)dword_30076898(63) / (double)v14;
          v13 = v10;
          if ( v10 > 1.0 )
            v13 = 1.0;
          sub_30019FD0(200.0, 468.0, 240.0, 10.0, v13);
        }
        dword_30076898(25);
        --dword_300F0FA0;
      }
      dword_30076898(88);
    }
  }
  return sub_30052A2E(retaddr ^ v17);
}
// 3002D56A: conditional instruction was optimized away because of 'edi.4<4BCu'
// 3002D5C2: conditional instruction was optimized away because of 'ebp.4<1Du'
// 3002D82A: conditional instruction was optimized away because of 'esi.4<2Cu'
// 3002D86A: conditional instruction was optimized away because of 'ebp.4<65Cu'
// 3002D180: using guessed type int sub_3002D180(void);
// 300322A0: using guessed type _DWORD __cdecl sub_300322A0(_DWORD, _DWORD);
// 300324D0: using guessed type _DWORD __cdecl sub_300324D0(_DWORD, _DWORD);
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300404B0: using guessed type int __thiscall sub_300404B0(_DWORD);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FA0: using guessed type int dword_300F0FA0;
// 301AA3CC: using guessed type int dword_301AA3CC;
// 301CFB20: using guessed type int dword_301CFB20[];
// 301CFB34: using guessed type int dword_301CFB34;
// 301CFB38: using guessed type int dword_301CFB38;
// 301CFB54: using guessed type int dword_301CFB54;
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301D6078: using guessed type int dword_301D6078;
// 301D607C: using guessed type int dword_301D607C;
// 301D6080: using guessed type int dword_301D6080;
// 301DD4B0: using guessed type char byte_301DD4B0;
// 301E5730: using guessed type char byte_301E5730;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (3002DB40) --------------------------------------------------------
void sub_3002DB40()
{
  _BYTE *v0; // esi
  int v1; // esi
  const char *v2; // eax
  const char *v3; // eax
  const char *v4; // eax
  _BYTE *v5; // eax
  _BYTE *v6; // eax

  dword_30076898(13);
  v1 = j__atol(&byte_30096790);
  dword_30076898(79);
  if ( v1 < 0 || v1 >= 2048 )
    sub_30021A30("CG_ConfigString: bad index: %i", v1);
  v2 = &byte_301D1B20[dword_301CFB20[v1]];
  switch ( v1 )
  {
    case 8:
      sub_30037AC0();
      return;
    case 3:
      sub_30022E10();
      return;
    case 0:
      sub_3002D040();
      return;
  }
  if ( v1 >= 140 && v1 < 268 )
  {
    sub_3002D0F0();
    return;
  }
  switch ( v1 )
  {
    case 5:
      dword_301D607C = j__atol(v2);
      return;
    case 6:
      dword_301D6080 = j__atol(v2);
      return;
    case 13:
      dword_301D6078 = j__atol(v2);
      return;
    case 15:
      dword_301D5C40 = j__atol(v2);
      if ( dword_301D5C40 )
        dword_301D5C40 += dword_30076898(6);
      dword_301D5C4C = 1;
      break;
    case 17:
      dword_301D5C44 = j__atol(v2);
      dword_301D5C4C = 1;
      return;
    case 18:
      dword_301D5C48 = j__atol(v2);
      dword_301D5C4C = 1;
      return;
    case 16:
      v3 = (const char *)dword_30076898(57);
      strncpy(byte_301D5C50, v3, 0xFFu);
      byte_301D5D4F = 0;
      return;
    case 1628:
      dword_301D5F70 = j__atol(v2);
      if ( dword_301D5F70 )
        dword_301D5F70 += dword_30076898(6);
      dword_301D5F74 = 0;
      break;
    case 1629:
      v4 = (const char *)dword_30076898(57);
      strncpy(byte_301D5F78, v4, 0xFFu);
      byte_301D6077 = 0;
      return;
    case 12:
      sub_3002D180();
      return;
    default:
      if ( v1 >= 268 && v1 < 524 )
      {
        dword_301D5C54[v1] = sub_30032050(v2, 7);
        return;
      }
      if ( v1 >= 780 && v1 < 844 )
      {
        dword_301D5854[v1] = dword_30076898(223);
        return;
      }
      if ( v1 < 1100 || v1 >= 1116 )
      {
        if ( v1 >= 1180 && v1 < 1212 )
        {
          v0 = &byte_301D1B20[dword_301CFB20[v1]];
          if ( *v0 && !dword_30076898(122) )
            sub_30021A30("Could not load script menu file '%s'\n", (char)v0);
        }
        else
        {
          if ( v1 < 21 )
            goto LABEL_58;
          if ( v1 < 29 )
          {
            v5 = sub_30022DE0(v1);
            sub_300324D0(v5, 5);
            return;
          }
          if ( v1 >= 44 )
          {
LABEL_58:
            if ( v1 >= 1500 && v1 < 1628 )
            {
              if ( byte_301D1B20[dword_301CFB20[v1]] )
              {
                sub_30020CA0(0);
                dword_30076898(88);
              }
            }
            else if ( v1 == 11 )
            {
              flt_30210E5C = atof(&byte_301D1B20[dword_301CFB4C]);
            }
          }
          else
          {
            v6 = sub_30022DE0(v1);
            sub_300322A0(v6, 5);
          }
        }
      }
      else if ( *v2 && sub_30030160() )
      {
        sub_30030220();
      }
      break;
  }
}
// 3002DDFD: conditional instruction was optimized away because of 'esi.4 in (1..2|==4|==7|9..B|==E|13..14|<0)'
// 3002D455: conditional instruction was optimized away because of 'eax.4 in (49C..4BB)'
// 3002D45D: conditional instruction was optimized away because of 'eax.4 in (49C..4BB)'
// 3002D4A5: conditional instruction was optimized away because of 'ecx.4 in (5DC..65B)'
// 3002D4AD: conditional instruction was optimized away because of 'ecx.4 in (5DC..65B)'
// 30020CA0: using guessed type _DWORD __cdecl sub_30020CA0(_DWORD);
// 30022E10: using guessed type int sub_30022E10(void);
// 3002D040: using guessed type int sub_3002D040(void);
// 3002D0F0: using guessed type int sub_3002D0F0(void);
// 3002D180: using guessed type int sub_3002D180(void);
// 30030160: using guessed type int sub_30030160(void);
// 30030220: using guessed type int sub_30030220(void);
// 30032050: using guessed type _DWORD __cdecl sub_30032050(_DWORD, _DWORD);
// 300322A0: using guessed type _DWORD __cdecl sub_300322A0(_DWORD, _DWORD);
// 300324D0: using guessed type _DWORD __cdecl sub_300324D0(_DWORD, _DWORD);
// 30037AC0: using guessed type int sub_30037AC0(void);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301CFB20: using guessed type int dword_301CFB20[];
// 301CFB4C: using guessed type int dword_301CFB4C;
// 301D5C40: using guessed type int dword_301D5C40;
// 301D5C44: using guessed type int dword_301D5C44;
// 301D5C48: using guessed type int dword_301D5C48;
// 301D5C4C: using guessed type int dword_301D5C4C;
// 301D5D4F: using guessed type char byte_301D5D4F;
// 301D5F70: using guessed type int dword_301D5F70;
// 301D5F74: using guessed type int dword_301D5F74;
// 301D6077: using guessed type char byte_301D6077;
// 301D6078: using guessed type int dword_301D6078;
// 301D607C: using guessed type int dword_301D607C;
// 301D6080: using guessed type int dword_301D6080;
// 30210E5C: using guessed type float flt_30210E5C;

//----- (3002DE50) --------------------------------------------------------
void __fastcall sub_3002DE50(_BYTE *a1)
{
  int v1; // esi
  _BYTE *v2; // edi
  int v3; // ebp
  char v4; // bl
  _BYTE *v5; // edx
  char *v6; // edx
  char v7; // al
  char v8; // al
  char *v9; // edx
  int v10; // eax
  int v11; // edx

  v1 = dword_301DFF6C;
  if ( dword_301DFF6C < 8 )
  {
    if ( dword_301DFF6C <= 0 )
    {
LABEL_23:
      dword_301D95E4 = 0;
      dword_301D95E0 = 0;
      return;
    }
  }
  else
  {
    v1 = 8;
  }
  v2 = 0;
  if ( dword_3029BA6C <= 0 )
    goto LABEL_23;
  v3 = 0;
  v4 = 55;
  v5 = (char *)&unk_301D8D48 + 271 * (dword_301D95E0 % v1);
  *v5 = 0;
  while ( *a1 )
  {
    if ( v3 > 89 )
    {
      if ( v2 )
      {
        a1 += v2 - v5 + 1;
        v5 = v2;
      }
      *v5 = 0;
      v3 = 0;
      dword_301D95C0[dword_301D95E0 % v1] = dword_3020AF00;
      v6 = (char *)&unk_301D8D48 + 271 * (++dword_301D95E0 % v1);
      *v6++ = 94;
      *v6 = v4;
      v5 = v6 + 1;
      v2 = 0;
    }
    if ( a1 && *a1 == 94 && (v7 = a1[1]) != 0 && v7 != 94 && v7 >= 48 && v7 <= 57 )
    {
      *v5 = 94;
      v8 = a1[1];
      v9 = v5 + 1;
      *v9 = v8;
      v5 = v9 + 1;
      v4 = v8;
      a1 += 2;
    }
    else
    {
      if ( *a1 == 32 )
        v2 = v5;
      *v5++ = *a1++;
      ++v3;
    }
  }
  *v5 = 0;
  dword_301D95C0[dword_301D95E0 % v1] = dword_3020AF00;
  v10 = dword_301D95E0 + 1;
  v11 = ++dword_301D95E0 - dword_301D95E4;
  if ( v11 > v1 )
    dword_301D95E4 = v10 - v1;
}
// 301D95C0: using guessed type int dword_301D95C0[];
// 301D95E0: using guessed type int dword_301D95E0;
// 301D95E4: using guessed type int dword_301D95E4;
// 301DFF6C: using guessed type int dword_301DFF6C;
// 3020AF00: using guessed type int dword_3020AF00;
// 3029BA6C: using guessed type int dword_3029BA6C;

//----- (3002DF90) --------------------------------------------------------
int __cdecl sub_3002DF90(int a1)
{
  if ( dword_3029C36C )
    sub_300219D0("CG_MapRestart\n");
  if ( dword_301D5A58 )
  {
    dword_30076898(201);
    sub_3000FCF0();
  }
  dword_3021023C = 0;
  dword_302106CC = 0;
  dword_302106A0 = 0;
  dword_301DA058 = -1;
  dword_301DA05C = 0;
  sub_30021160();
  sub_300247E0();
  dword_30076898(234);
  dword_301D5C40 = 0;
  dword_301D5F70 = 0;
  dword_3020AF0C = 1;
  dword_30076898(212);
  sub_30022E10();
  dword_30210E58 = 0;
  dword_30210794 = 0;
  memset(dword_302106FC, 0, 0x60u);
  memset(&unk_302106E0, 0, 0x18u);
  dword_302106F8 = 0;
  dword_30076898(9);
  dword_30076898(9);
  dword_30076898(9);
  if ( !a1 )
  {
    dword_30076898(9);
    sub_3002F3A0();
    sub_3002F3A0();
    dword_30076898(9);
    dword_30076898(125);
  }
  if ( dword_3020FDE4 )
  {
    dword_3020FDE4 = 0;
    dword_3020FDEC = dword_3020AF00;
  }
  dword_30076898(9);
  return dword_30076898(243);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A58: using guessed type int dword_301D5A58;
// 301D5C40: using guessed type int dword_301D5C40;
// 301D5F70: using guessed type int dword_301D5F70;
// 301DA058: using guessed type int dword_301DA058;
// 301DA05C: using guessed type int dword_301DA05C;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF0C: using guessed type int dword_3020AF0C;
// 3020FDE4: using guessed type int dword_3020FDE4;
// 3020FDEC: using guessed type int dword_3020FDEC;
// 3021023C: using guessed type int dword_3021023C;
// 302106A0: using guessed type int dword_302106A0;
// 302106CC: using guessed type int dword_302106CC;
// 302106F8: using guessed type int dword_302106F8;
// 302106FC: using guessed type int dword_302106FC[];
// 30210794: using guessed type int dword_30210794;
// 30210E58: using guessed type int dword_30210E58;
// 3029C36C: using guessed type int dword_3029C36C;

//----- (3002E110) --------------------------------------------------------
int __cdecl sub_3002E110(const char *a1, int a2, int a3)
{
  int v3; // ebx
  int v4; // esi
  int v5; // ecx
  _BYTE *v6; // eax
  char *v7; // eax
  int v8; // ecx
  char *v9; // eax
  char *v10; // esi
  char *v11; // eax
  int v12; // edx
  char *v13; // eax
  int v14; // ebp
  char *v15; // eax
  int v16; // edx
  char *v17; // esi
  int v18; // edx
  char *v19; // eax
  const char *v20; // esi
  int v21; // edi
  int v22; // ecx
  int v23; // edx
  int v25; // eax
  int v26; // ebp
  char *v27; // eax
  int v28; // ecx
  char *v29; // eax
  char *v30; // eax
  int v31; // ecx
  const char *v32; // esi
  int v33; // edi
  int v34; // ebp
  int v35; // ecx
  int v36; // edx
  int v38; // esi
  int v39; // ecx
  int v40; // eax
  int v41; // edi
  char *v43; // [esp+Ch] [ebp-4014h] BYREF
  int v44; // [esp+10h] [ebp-4010h]
  int v45; // [esp+14h] [ebp-400Ch]
  char *v46; // [esp+18h] [ebp-4008h]
  char v47[16384]; // [esp+1Ch] [ebp-4004h] BYREF
  unsigned int v48; // [esp+401Ch] [ebp-4h]
  unsigned int retaddr; // [esp+4020h] [ebp+0h]

  v3 = a2;
  v48 = retaddr ^ dword_300705C0;
  v4 = dword_30076898(15);
  if ( !v45 )
  {
    sub_300403F0("^1voice chat file not found: %s\n", a1);
    dword_30076898(0);
    return sub_30052A2E(retaddr ^ v48);
  }
  if ( v4 >= 0x4000 )
  {
    sub_300403F0("^1voice chat file too large: %s is %i, max allowed is %i", a1, v4, 0x4000);
    dword_30076898(0);
    dword_30076898(18);
    return sub_30052A2E(retaddr ^ v48);
  }
  dword_30076898(16);
  v47[v4] = 0;
  dword_30076898(18);
  v43 = v47;
  sub_30040370((char *)a2, 0x40u, "%s", a1);
  v5 = a3;
  v6 = (_BYTE *)(a2 + 72);
  if ( a3 > 0 )
  {
    do
    {
      *v6 = 0;
      v6 += 4676;
      --v5;
    }
    while ( v5 );
  }
  v7 = String;
  if ( *((_DWORD *)String + 257) )
  {
    *((_DWORD *)String + 257) = 0;
    v8 = *((_DWORD *)v7 + 261);
    v43 = (char *)*((_DWORD *)v7 + 262);
    *((_DWORD *)v7 + 256) = v8;
  }
  v9 = sub_3003F2E0(&v43, 1);
  v10 = v9;
  if ( v9 && *v9 )
  {
    if ( sub_30040170(99999, v9, "female") )
    {
      if ( sub_30040170(99999, v10, "male") )
      {
        if ( sub_30040170(99999, v10, "neuter") )
        {
          sub_300403F0("^1expected gender not found in voice chat file: %s\n", a1);
          dword_30076898(0);
          return sub_30052A2E(retaddr ^ v48);
        }
        *(_DWORD *)(a2 + 64) = 2;
      }
      else
      {
        *(_DWORD *)(a2 + 64) = 0;
      }
    }
    else
    {
      *(_DWORD *)(a2 + 64) = 1;
    }
    v11 = String;
    *(_DWORD *)(a2 + 68) = 0;
    do
    {
      if ( *((_DWORD *)v11 + 257) )
      {
        *((_DWORD *)v11 + 257) = 0;
        v12 = *((_DWORD *)v11 + 261);
        v43 = (char *)*((_DWORD *)v11 + 262);
        *((_DWORD *)v11 + 256) = v12;
      }
      v13 = sub_3003F2E0(&v43, 1);
      if ( !v13 || !*v13 )
        return sub_30052A2E(retaddr ^ v48);
      v14 = v3 + 72;
      sub_30040370((char *)(v3 + 72 + 4676 * *(_DWORD *)(v3 + 68)), 0x40u, "%s", v13);
      v15 = String;
      if ( *((_DWORD *)String + 257) )
      {
        *((_DWORD *)String + 257) = 0;
        v16 = *((_DWORD *)v15 + 261);
        v43 = (char *)*((_DWORD *)v15 + 262);
        *((_DWORD *)v15 + 256) = v16;
      }
      v17 = sub_3003F2E0(&v43, 1);
      if ( !v17 || sub_30040170(99999, v17, "{") )
      {
        sub_300403F0("^1expected { found %s in voice chat file: %s\n", v17, a1);
        dword_30076898(0);
        return sub_30052A2E(retaddr ^ v48);
      }
      *(_DWORD *)(4676 * *(_DWORD *)(v3 + 68) + v14 + 64) = 0;
      v44 = *(_DWORD *)(4676 * *(_DWORD *)(v3 + 68) + v14 + 64);
      v11 = String;
      while ( 2 )
      {
        if ( *((_DWORD *)v11 + 257) )
        {
          *((_DWORD *)v11 + 257) = 0;
          v18 = *((_DWORD *)v11 + 261);
          v43 = (char *)*((_DWORD *)v11 + 262);
          *((_DWORD *)v11 + 256) = v18;
        }
        v19 = sub_3003F2E0(&v43, 1);
        if ( !v19 || !*v19 )
          return sub_30052A2E(retaddr ^ v48);
        v20 = "}";
        v21 = 99999;
        while ( 1 )
        {
          v22 = v20[v19 - "}"];
          v23 = *v20++;
          if ( !v21-- )
            goto LABEL_42;
          if ( v22 != v23 )
          {
            if ( v22 >= 97 && v22 <= 122 )
              v22 -= 32;
            if ( v23 >= 97 && v23 <= 122 )
              v23 -= 32;
            if ( v22 != v23 )
              break;
          }
          if ( !v22 )
            goto LABEL_42;
        }
        if ( 2 * (v22 >= v23) == 1 )
        {
LABEL_42:
          v11 = String;
          v3 = a2;
          break;
        }
        v25 = dword_30076898(192);
        v3 = a2;
        v26 = v44;
        *(_DWORD *)(a2 + 72 + 4 * (v44 + 1169 * *(_DWORD *)(a2 + 68)) + 68) = v25;
        v27 = String;
        if ( *((_DWORD *)String + 257) )
        {
          *((_DWORD *)String + 257) = 0;
          v28 = *((_DWORD *)v27 + 261);
          v43 = (char *)*((_DWORD *)v27 + 262);
          *((_DWORD *)v27 + 256) = v28;
        }
        v29 = sub_3003F2E0(&v43, 1);
        if ( !v29 || !*v29 )
          return sub_30052A2E(retaddr ^ v48);
        sub_30040370((char *)((v26 << 6) + 4676 * *(_DWORD *)(a2 + 68) + a2 + 72 + 324), 0x40u, "%s", v29);
        v30 = String;
        if ( *((_DWORD *)String + 257) )
        {
          *((_DWORD *)String + 257) = 0;
          if ( !*((_DWORD *)v30 + 258) )
            goto LABEL_54;
          v31 = *((_DWORD *)v30 + 261);
          v43 = (char *)*((_DWORD *)v30 + 262);
          *((_DWORD *)v30 + 256) = v31;
        }
        v30 = sub_3003F2E0(&v43, 0);
LABEL_54:
        v46 = v30;
        if ( v30 )
        {
          v32 = "}";
          v33 = 99999;
          v34 = v30 - "}";
          while ( 1 )
          {
            v35 = v32[v34];
            v36 = *v32++;
            if ( !v33-- )
              goto LABEL_66;
            if ( v35 != v36 )
            {
              if ( v35 >= 97 && v35 <= 122 )
                v35 -= 32;
              if ( v36 >= 97 && v36 <= 122 )
                v36 -= 32;
              if ( v35 != v36 )
                break;
            }
            if ( !v35 )
              goto LABEL_66;
          }
          if ( 2 * (v35 >= v36) == 1 || !*v46 )
          {
LABEL_66:
            v26 = v44;
            goto LABEL_67;
          }
          v40 = sub_300322A0();
          v41 = v44;
          v38 = a2 + 72;
          *(_DWORD *)(a2 + 72 + 4 * (v44 + 1169 * *(_DWORD *)(a2 + 68)) + 4420) = v40;
          if ( !*(_DWORD *)(a2 + 72 + 4 * (v41 + 1169 * *(_DWORD *)(a2 + 68)) + 4420) )
            *(_DWORD *)(v38 + 4 * (v41 + 1169 * *(_DWORD *)(a2 + 68)) + 4420) = sub_300322A0();
          v11 = String;
        }
        else
        {
LABEL_67:
          v38 = a2 + 72;
          *(_DWORD *)(a2 + 72 + 4 * (v26 + 1169 * *(_DWORD *)(a2 + 68)) + 4420) = sub_300322A0();
          v11 = String;
          if ( *((_DWORD *)String + 257) )
          {
            sub_3003EF80("UngetToken called twice");
            v11 = String;
          }
          v39 = dword_300990C8;
          *((_DWORD *)v11 + 257) = 1;
          dword_300990CC = v39;
        }
        v44 = ++*(_DWORD *)(4676 * *(_DWORD *)(a2 + 68) + v38 + 64);
        if ( v44 < 64 )
          continue;
        break;
      }
      ++*(_DWORD *)(v3 + 68);
    }
    while ( *(_DWORD *)(v3 + 68) < a3 );
  }
  return sub_30052A2E(retaddr ^ v48);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300990C8: using guessed type int dword_300990C8;
// 300990CC: using guessed type int dword_300990CC;

//----- (3002E8D0) --------------------------------------------------------
int __usercall sub_3002E8D0@<eax>(int a1@<ebx>, char *a2, _DWORD *a3, _DWORD *a4, _DWORD *a5)
{
  int v5; // ebp
  int v6; // esi
  char *i; // edi
  unsigned __int64 v9; // rax
  int v10; // ecx

  v5 = *(_DWORD *)(a1 + 68);
  v6 = 0;
  if ( v5 <= 0 )
    return 0;
  for ( i = (char *)(a1 + 72); !a2 || !i || sub_30040170(99999, a2, i); i += 4676 )
  {
    if ( ++v6 >= v5 )
      return 0;
  }
  v9 = (unsigned __int64)((double)rand() * 0.000030517578 * (double)*(int *)(4676 * v6 + a1 + 136));
  v10 = 1169 * v6 + v9;
  *a3 = *(_DWORD *)(a1 + 4 * v10 + 140);
  *a4 = *(_DWORD *)(a1 + 4 * v10 + 4492);
  *a5 = 4676 * v6 + ((_DWORD)v9 << 6) + a1 + 396;
  return 1;
}

//----- (3002E9B0) --------------------------------------------------------
int __usercall sub_3002E9B0@<eax>(_DWORD *a1@<eax>)
{
  int result; // eax
  _BYTE *v3; // esi
  char *v4; // eax

  if ( !dword_301E518C )
  {
    sub_30022ED0();
    if ( *a1 == *(_DWORD *)(dword_301E5F20 + 184) )
    {
      dword_3020D200 = a1[2];
      if ( a1[2] == dword_301D962C )
        dword_3020D204 = dword_3020AF00 + dword_301DE10C;
      else
        dword_3020D204 = dword_3020AF00 + 2 * dword_301DE10C;
    }
    else
    {
      dword_30211B60[138 * *a1] = a1[2];
      dword_30211B38[138 * *a1] = a1[79];
      dword_30211B3C[138 * *a1] = a1[80];
      dword_30211B40[138 * *a1] = a1[81];
      if ( a1[2] == dword_301D962C )
        dword_30211B64[138 * *a1] = dword_3020AF00 + dword_301DE10C;
      else
        dword_30211B64[138 * *a1] = dword_3020AF00 + 2 * dword_301DE10C;
    }
  }
  result = a1[3];
  if ( !result )
  {
    result = dword_301DDA4C;
    if ( !dword_301DDA4C )
    {
      v3 = (char *)a1 + 166;
      sub_3002DE50(v3);
      v4 = (char *)sub_300403F0(": %s\n", v3);
      result = sub_300219D0(v4);
    }
  }
  dword_305446A4[82 * dword_30210E54] = 0;
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 301D962C: using guessed type int dword_301D962C;
// 301DDA4C: using guessed type int dword_301DDA4C;
// 301DE10C: using guessed type int dword_301DE10C;
// 301E518C: using guessed type int dword_301E518C;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020D200: using guessed type int dword_3020D200;
// 3020D204: using guessed type int dword_3020D204;
// 30210E54: using guessed type int dword_30210E54;
// 30211B38: using guessed type int dword_30211B38[];
// 30211B3C: using guessed type int dword_30211B3C[];
// 30211B40: using guessed type int dword_30211B40[];
// 30211B60: using guessed type int dword_30211B60[];

//----- (3002EB10) --------------------------------------------------------
int sub_3002EB10()
{
  int result; // eax

  result = dword_30210E4C;
  if ( dword_30210E4C < dword_3020AF00 )
  {
    result = dword_30210E54;
    if ( dword_30210E54 != dword_30210E50 )
    {
      result = 328 * dword_30210E54;
      if ( dword_305446A4[82 * dword_30210E54] )
      {
        result = sub_3002E9B0((char *)&unk_305446A0 + result);
        dword_30210E54 = (dword_30210E54 + 1) % 32;
        dword_30210E4C = dword_3020AF00 + 1000;
      }
    }
  }
  return result;
}
// 3020AF00: using guessed type int dword_3020AF00;
// 30210E4C: using guessed type int dword_30210E4C;
// 30210E50: using guessed type int dword_30210E50;
// 30210E54: using guessed type int dword_30210E54;

//----- (3002EBB0) --------------------------------------------------------
int *__usercall sub_3002EBB0@<eax>(const char *a1@<eax>)
{
  int *result; // eax

  result = (int *)dword_30076898(56);
  if ( !result )
  {
    if ( dword_301DFD2C )
    {
      if ( dword_301DEE8C )
        sub_30021B10(7, "Could not translate voice chat string \"%s\"", a1);
      else
        Com_Printf("^3WARNING: Could not translate voice chat string \"%s\"\n", a1);
      strcpy((char *)&dword_30098898, "^1UNLOCALIZED(^7");
      strcat((char *)&dword_30098898, a1);
      strcat((char *)&dword_30098898, "^1)^7");
      result = &dword_30098898;
    }
    else
    {
      strcpy((char *)&dword_30098898, a1);
      result = &dword_30098898;
    }
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30098898: using guessed type int dword_30098898;
// 301DEE8C: using guessed type int dword_301DEE8C;
// 301DFD2C: using guessed type int dword_301DFD2C;

//----- (3002ECB0) --------------------------------------------------------
int __cdecl sub_3002ECB0(int a1, int a2, int a3, int a4, char *Source)
{
  int *v5; // ecx
  int v6; // ebp
  int *v7; // edi
  int v8; // esi
  void *v9; // ebx
  int v10; // ecx
  int v11; // edx
  int v12; // eax
  int v13; // eax
  int *v14; // edi
  int *v16; // [esp-8h] [ebp-16Ch]
  int v17; // [esp+Ch] [ebp-158h] BYREF
  const char *v18; // [esp+10h] [ebp-154h] BYREF
  int v19; // [esp+14h] [ebp-150h] BYREF
  int v20[82]; // [esp+18h] [ebp-14Ch] BYREF
  unsigned int v21; // [esp+160h] [ebp-4h]
  unsigned int retaddr; // [esp+164h] [ebp+0h]

  v6 = a3;
  v21 = retaddr ^ dword_300705C0;
  v7 = v5;
  if ( a3 < 0 || a3 >= 64 )
    v6 = 0;
  v8 = 1200 * v6;
  if ( dword_3018DC8C[300 * v6] )
  {
    v9 = &unk_302FBC60;
    if ( dword_3018DCB8[300 * v6] != 1 )
      v9 = &unk_30344DA8;
    if ( sub_3002E8D0((int)v9, Source, &v19, &v17, &v18) && (a1 == 1 || !dword_3029C00C) )
    {
      v20[1] = v19;
      v10 = *v7;
      v20[2] = v17;
      v11 = v7[1];
      v20[79] = v10;
      v20[80] = v11;
      v20[3] = a2;
      v12 = v7[2];
      v20[0] = v6;
      v20[81] = v12;
      strncpy((char *)&v20[4], Source, 0x95u);
      v13 = dword_3018DCC4[300 * v6];
      BYTE1(v20[41]) = 0;
      v14 = sub_30027260(v13);
      v16 = sub_3002EBB0(v18);
      if ( a1 == 2 )
      {
        sub_30040370((char *)&v20[41] + 2, 0x96u, "[%s]%s[%s]: %c%c%s", &byte_3018DC98[v8], "^3", v14, 94, a4, v16);
      }
      else if ( a1 == 1 )
      {
        sub_30040370((char *)&v20[41] + 2, 0x96u, "(%s)%s(%s): %c%c%s", &byte_3018DC98[v8], "^3", v14, 94, a4, v16);
      }
      else
      {
        sub_30040370((char *)&v20[41] + 2, 0x96u, "%s %s(%s): %c%c%s", &byte_3018DC98[v8], "^3", v14, 94, a4, v16);
      }
      qmemcpy(&dword_305446A0, v20, 0x148u);
      dword_30210E50 = 0;
      sub_3002E9B0(&dword_305446A0);
    }
  }
  return sub_30052A2E(retaddr ^ v21);
}
// 3002ECFE: conditional instruction was optimized away because of 'eax.4!=0'
// 3002ECD5: variable 'v5' is possibly undefined
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 3018DCB8: using guessed type int dword_3018DCB8[];
// 3018DCC4: using guessed type int dword_3018DCC4[];
// 30210E50: using guessed type int dword_30210E50;
// 3029C00C: using guessed type int dword_3029C00C;

//----- (3002EE80) --------------------------------------------------------
int __cdecl sub_3002EE80(int a1)
{
  int v1; // ebx
  int v2; // ebp
  int result; // eax
  int v4; // [esp+14h] [ebp-10h]

  dword_30076898(13);
  v1 = j__atol(&byte_30096790);
  dword_30076898(13);
  v2 = j__atol(&byte_30096790);
  dword_30076898(13);
  v4 = j__atol(&byte_30096790);
  dword_30076898(13);
  j__atol(&byte_30096790);
  dword_30076898(13);
  j__atol(&byte_30096790);
  dword_30076898(13);
  j__atol(&byte_30096790);
  dword_30076898(13);
  if ( !dword_301B0F6C
    || (result = 0, strcmp(&byte_30096790, "kill_insult"))
    && strcmp(&byte_30096790, "taunt")
    && (result = 0, strcmp(&byte_30096790, "death_insult"))
    && strcmp(&byte_30096790, "kill_gauntlet")
    && (result = 0, strcmp(&byte_30096790, "praise")) )
  {
    result = sub_3002ECB0(a1, v1, v2, v4, &byte_30096790);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301B0F6C: using guessed type int dword_301B0F6C;

//----- (3002F020) --------------------------------------------------------
int sub_3002F020()
{
  int v0; // ebx
  int v1; // eax
  int v2; // esi
  int v3; // edi
  _BYTE *v4; // edi
  char v6[1024]; // [esp+Ch] [ebp-404h] BYREF
  unsigned int v7; // [esp+40Ch] [ebp-4h]
  unsigned int retaddr; // [esp+410h] [ebp+0h]

  v7 = retaddr ^ dword_300705C0;
  v0 = 0;
  dword_30076898(13);
  v1 = j__atol(&byte_30096790);
  v2 = v1;
  if ( v1 < 0 || v1 >= 32 )
  {
    Com_Printf("Server tried to open a bad script menu index: %i\n", v1);
    goto LABEL_17;
  }
  v3 = v1 + 1180;
  if ( v1 + 1180 < 0 || v3 >= 2048 )
    sub_30021A30("CG_ConfigString: bad index: %i", v1 - 100);
  v4 = &byte_301D1B20[dword_301CFB20[v3]];
  if ( !*v4 )
  {
    Com_Printf("Server tried to open a non-loaded script menu index: %i\n", v2);
LABEL_17:
    sub_300403F0("cmd mr %i bad\n", v2);
    dword_30076898(22);
    return sub_30052A2E(retaddr ^ v7);
  }
  if ( dword_30076898(12) > 2 )
  {
    dword_30076898(13);
    if ( *(_BYTE *)sub_30021C40() )
      v0 = 1;
  }
  dword_30076898(9);
  sub_300403F0("%i", v2);
  dword_30076898(9);
  if ( !dword_30076898(123) )
  {
    dword_30076898(9);
    dword_30076898(9);
    dword_30076898(11);
    if ( !v6[0] )
    {
LABEL_15:
      dword_30076898(9);
      sub_300403F0("%i", v2);
      dword_30076898(9);
      sub_300403F0("%i", v0);
      dword_30076898(9);
      return sub_30052A2E(retaddr ^ v7);
    }
    if ( sub_30040170(v6, v4) )
    {
      dword_30076898(11);
      sub_300403F0("cmd mr %s noop\n", v6);
      dword_30076898(22);
      goto LABEL_15;
    }
  }
  return sub_30052A2E(retaddr ^ v7);
}
// 30021C40: using guessed type int sub_30021C40(void);
// 30040170: using guessed type int __fastcall sub_30040170(_DWORD, _DWORD);
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301CFB20: using guessed type int dword_301CFB20[];

//----- (3002F250) --------------------------------------------------------
int sub_3002F250()
{
  char String[1024]; // [esp+0h] [ebp-404h] BYREF
  unsigned int v2; // [esp+400h] [ebp-4h]
  unsigned int retaddr; // [esp+404h] [ebp+0h]

  v2 = retaddr ^ dword_300705C0;
  dword_30076898(11);
  if ( String[0] )
  {
    dword_30076898(9);
    dword_30076898(11);
    dword_30076898(9);
    dword_30076898(11);
    j__atol(String);
    if ( dword_30076898(123) )
    {
      dword_30076898(9);
      dword_30076898(9);
      dword_30076898(9);
      return sub_30052A2E(retaddr ^ v2);
    }
    dword_30076898(9);
    dword_30076898(9);
  }
  return sub_30052A2E(retaddr ^ v2);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3002F3A0) --------------------------------------------------------
int sub_3002F3A0()
{
  dword_30076898(124);
  dword_30076898(124);
  dword_30076898(9);
  dword_30076898(9);
  dword_30076898(9);
  dword_30076898(9);
  dword_30076898(9);
  dword_30076898(9);
  return dword_30076898(9);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3002F440) --------------------------------------------------------
char __usercall sub_3002F440@<al>(_BYTE *a1@<esi>)
{
  char result; // al
  int v2; // ecx
  _BYTE *v3; // edx

  result = *a1;
  v2 = 0;
  if ( *a1 )
  {
    v3 = a1;
    do
    {
      if ( *v3 != 25 )
        a1[v2++] = *v3;
      result = *++v3;
    }
    while ( result );
  }
  a1[v2] = 0;
  return result;
}

//----- (3002F470) --------------------------------------------------------
char __usercall sub_3002F470@<al>(_BYTE *a1@<edi>)
{
  char result; // al
  int v2; // esi
  _BYTE *v3; // edx
  int v4; // eax

  result = *a1;
  v2 = 0;
  if ( *a1 )
  {
    v3 = a1;
    do
    {
      v4 = (char)*v3;
      if ( v4 >= 97 && v4 <= 122 || v4 >= 65 && v4 <= 90 || v4 >= 48 && v4 <= 57 )
        a1[v2++] = *v3;
      result = *++v3;
    }
    while ( result );
  }
  a1[v2] = 0;
  return result;
}

//----- (3002F4C0) --------------------------------------------------------
int sub_3002F4C0()
{
  int v0; // eax

  v0 = dword_30076898(12);
  if ( v0 != 4 )
    return sub_300219D0("ERROR: CG_ReverbCmd called with %i args (should be 4)\n", v0);
  dword_30076898(13);
  atof(&byte_30096790);
  dword_30076898(13);
  atof(&byte_30096790);
  dword_30076898(13);
  return dword_30076898(218);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3002F5D0) --------------------------------------------------------
int sub_3002F5D0()
{
  int v0; // eax
  int v2; // eax

  v0 = dword_30076898(12);
  if ( v0 != 2 )
    return sub_300219D0("ERROR: CG_LocalSound called with %i args (should be 2)\n", v0);
  dword_30076898(13);
  v2 = j__atol(&byte_30096790);
  if ( v2 <= 0 || v2 > 256 )
    return sub_300219D0("ERROR: CG_LocalSound called with index %i (should be in range[1,%i])\n", v2, 256);
  sub_30022DE0(v2 + 524);
  return sub_30022ED0();
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E5F20: using guessed type int dword_301E5F20;

//----- (3002F660) --------------------------------------------------------
int sub_3002F660()
{
  char *v0; // eax
  int v1; // eax
  const char *v2; // esi
  char *v3; // eax
  char *v4; // eax
  char *v5; // eax
  char *v6; // eax
  char *v7; // eax
  const char *v8; // eax
  const char *v9; // eax
  int v10; // eax
  int v11; // edi
  int i; // esi
  char String[149]; // [esp+10h] [ebp-A0h] BYREF
  char v15; // [esp+A5h] [ebp-Bh]
  unsigned int v16; // [esp+ACh] [ebp-4h]
  unsigned int retaddr; // [esp+B0h] [ebp+0h]

  v16 = retaddr ^ dword_300705C0;
  dword_30076898(13);
  switch ( byte_30096790 )
  {
    case 0:
      return sub_30052A2E(retaddr ^ v16);
    case 66:
      sub_3002DF90(0);
      return sub_30052A2E(retaddr ^ v16);
    case 67:
      dword_30076898(11);
      if ( j__atol(String) == 1 )
      {
        dword_30076898(11);
        sub_3002F470(String);
        v8 = (const char *)sub_30031C40();
        sub_300403F0("record %s-%s", v8, String);
        dword_30076898(245);
      }
      return sub_30052A2E(retaddr ^ v16);
    case 68:
      dword_30076898(11);
      if ( j__atol(String) == 1 )
        dword_30076898(245);
      return sub_30052A2E(retaddr ^ v16);
    case 69:
      dword_30076898(11);
      if ( j__atol(String) == 1 )
      {
        dword_30076898(11);
        sub_3002F470(String);
        v9 = (const char *)sub_30031C40();
        sub_300403F0("screenshotJPEG %s-%s", v9, String);
        dword_30076898(245);
      }
      return sub_30052A2E(retaddr ^ v16);
    case 97:
      v0 = sub_30021C40();
      v1 = j__atol(v0);
      sub_300398B0(v1, *(int *)dword_301CF58C);
      return sub_30052A2E(retaddr ^ v16);
    case 98:
      sub_3002CDB0();
      return sub_30052A2E(retaddr ^ v16);
    case 99:
      goto LABEL_4;
    case 100:
      sub_3002DB40();
      return sub_30052A2E(retaddr ^ v16);
    case 101:
    case 102:
      sub_30021C40();
      sub_30023C90();
      sub_30021A90();
      return sub_30052A2E(retaddr ^ v16);
    case 103:
      sub_30022E80();
LABEL_4:
      sub_30021C40();
      sub_30023C90();
      sub_30021AB0();
      return sub_30052A2E(retaddr ^ v16);
    case 104:
      if ( !dword_3029C00C )
        goto LABEL_9;
      return sub_30052A2E(retaddr ^ v16);
    case 105:
LABEL_9:
      sub_30021C40();
      v2 = (const char *)dword_30076898(57);
      sub_30022E80();
      strncpy(String, v2, 0x95u);
      v15 = 0;
      sub_3002F440(String);
      sub_3002DE50(String);
      sub_300219D0("%s\n", String);
      break;
    case 106:
      sub_3002EE80(0);
      break;
    case 107:
      sub_3002EE80(1);
      break;
    case 108:
      sub_3002EE80(2);
      break;
    case 109:
      dword_301DA05C = dword_3020AF00 + 20000;
      v3 = sub_30021C40();
      dword_301DA058 = j__atol(v3);
      if ( dword_301DA058 < 0 )
        dword_301DA05C = dword_3020AF00 + 10000;
      break;
    case 110:
      sub_3002DF90(1);
      break;
    case 111:
      sub_30021C40();
      dword_30076898(193);
      dword_30076898(213);
      break;
    case 112:
      v4 = sub_30021C40();
      j__atol(v4);
      dword_30076898(214);
      break;
    case 113:
      v5 = sub_30021C40();
      j__atol(v5);
      v6 = sub_30021C40();
      atof(v6);
      sub_30033710();
      break;
    case 114:
      sub_3002F4C0();
      break;
    case 115:
      sub_3002F5D0();
      break;
    case 116:
      sub_3002F020();
      break;
    case 117:
      sub_3002F3A0();
      break;
    case 118:
      v7 = sub_30021C40();
      strncpy(String, v7, 0x95u);
      v15 = 0;
      sub_30021C40();
      sub_30031C80();
      break;
    default:
      dword_30076898(13);
      sub_300219D0("Unknown client game command: %s\n", &byte_30096790);
      v10 = dword_30076898(12);
      v11 = v10;
      if ( v10 > 1 )
      {
        sub_300219D0("Arguments(%i):", v10 - 1);
        for ( i = 1; i < v11; ++i )
        {
          dword_30076898(13);
          sub_300219D0(" %s", &byte_30096790);
        }
        sub_300219D0("\n");
      }
      break;
  }
  return sub_30052A2E(retaddr ^ v16);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D9900: using guessed type int dword_301D9900;
// 301D9CB8: using guessed type int dword_301D9CB8;
// 301DA058: using guessed type int dword_301DA058;
// 301DA05C: using guessed type int dword_301DA05C;
// 3020AF00: using guessed type int dword_3020AF00;
// 3029C00C: using guessed type int dword_3029C00C;

//----- (3002FC70) --------------------------------------------------------
int __usercall sub_3002FC70@<eax>(int a1@<esi>)
{
  int result; // eax

  sub_3002F250();
  for ( result = dword_301D5A50; dword_301D5A50 < a1; result = dword_301D5A50 )
  {
    dword_301D5A50 = result + 1;
    if ( dword_30076898(82) )
      sub_3002F660();
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A50: using guessed type int dword_301D5A50;

//----- (3002FD20) --------------------------------------------------------
void __usercall sub_3002FD20(float *a1@<edi>, float *a2@<esi>, float a3)
{
  long double v3; // st7
  float *v4; // eax
  double v5; // st7
  double v6; // st7
  float v7; // [esp+0h] [ebp-20h] BYREF
  float v8; // [esp+4h] [ebp-1Ch]
  float v9; // [esp+8h] [ebp-18h]
  float *v10; // [esp+Ch] [ebp-14h]
  float *v11; // [esp+10h] [ebp-10h]
  float v12; // [esp+14h] [ebp-Ch]
  float v13; // [esp+18h] [ebp-8h]
  float v14; // [esp+1Ch] [ebp-4h]

  v11 = &a3;
  v10 = &v7;
  v12 = a3 * a3;
  do
  {
    v9 = (float)rand();
    v9 = (v9 / 32768.0 + v9 / 32768.0 - 1.0) * 3.1415927;
    v3 = sin(v9);
    v4 = v10;
    *v11 = cos(v9);
    *v4 = v3;
    v9 = (float)rand();
    v8 = v9 / 32768.0;
    v9 = v8 * a3;
    v5 = v8;
    *a2 = v9;
    v8 = v5 * v7;
    v6 = v9;
    a2[1] = v8;
    v13 = v6 - *a1;
    v14 = v8 - a1[1];
  }
  while ( v14 * v14 + v13 * v13 < v12 );
}

//----- (3002FE90) --------------------------------------------------------
void sub_3002FE90()
{
  float v0; // [esp+0h] [ebp-48h] BYREF
  float v1; // [esp+4h] [ebp-44h]
  float v2; // [esp+8h] [ebp-40h]
  float v3; // [esp+Ch] [ebp-3Ch] BYREF
  float v4; // [esp+10h] [ebp-38h]
  float v5; // [esp+14h] [ebp-34h]
  float v6; // [esp+18h] [ebp-30h]
  float v7; // [esp+1Ch] [ebp-2Ch]
  float v8; // [esp+20h] [ebp-28h]
  int v9[9]; // [esp+24h] [ebp-24h] BYREF

  if ( *(float *)&dword_30211384 != 0.0 || *(float *)&dword_30211388 != 0.0 )
  {
    v1 = *(float *)&dword_30211384;
    v0 = 1.0;
    v2 = *(float *)&dword_30211388;
    v6 = 0.0;
    v7 = 0.0;
    v8 = 1.0;
    sub_3003B3D0(&v0);
    v3 = v7 * v2 - v8 * v1;
    v4 = v8 * v0 - v6 * v2;
    v5 = v6 * v1 - v7 * v0;
    sub_3003B3D0(&v3);
    *(float *)v9 = flt_3020D354;
    *(float *)&v9[1] = flt_3020D358;
    *(float *)&v9[2] = flt_3020D35C;
    *(float *)&v9[3] = flt_3020D360;
    v6 = v5 * v1 - v4 * v2;
    *(float *)&v9[4] = flt_3020D364;
    *(float *)&v9[5] = flt_3020D368;
    v9[6] = dword_3020D36C;
    v9[7] = dword_3020D370;
    v9[8] = dword_3020D374;
    v7 = v3 * v2 - v5 * v0;
    v8 = v4 * v0 - v3 * v1;
    sub_3003C250((float *)v9, &flt_3020D354, &v0);
  }
}
// 3020D354: using guessed type float flt_3020D354;
// 3020D358: using guessed type float flt_3020D358;
// 3020D35C: using guessed type float flt_3020D35C;
// 3020D360: using guessed type float flt_3020D360;
// 3020D364: using guessed type float flt_3020D364;
// 3020D368: using guessed type float flt_3020D368;
// 3020D36C: using guessed type int dword_3020D36C;
// 3020D370: using guessed type int dword_3020D370;
// 3020D374: using guessed type int dword_3020D374;
// 30211384: using guessed type int dword_30211384;
// 30211388: using guessed type int dword_30211388;

//----- (3002FFF0) --------------------------------------------------------
int __usercall sub_3002FFF0@<eax>(int a1@<eax>, int a2@<ecx>, int a3@<esi>)
{
  int v3; // eax
  int result; // eax
  float v5; // [esp+0h] [ebp-10h]
  int v6; // [esp+8h] [ebp-8h]

  if ( a1 && a2 > 0 && (v3 = a2 + a1 - dword_3020AF00, v3 > 0) )
  {
    v6 = *(_DWORD *)(a3 + 12);
    if ( v3 < v6 )
    {
      v5 = (double)v3 / (double)v6 * (double)*(int *)(a3 + 16);
      sub_3000D870(v5);
    }
    if ( dword_3021138C )
      dword_30076898(71);
    dword_30076898(70);
    result = 1;
    dword_3021138C = 1;
  }
  else
  {
    dword_3021138C = 0;
    result = 0;
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;
// 3021138C: using guessed type int dword_3021138C;

//----- (30030080) --------------------------------------------------------
int __cdecl sub_30030080(const char *a1)
{
  char v2[65536]; // [esp+4h] [ebp-10004h] BYREF
  unsigned int v3; // [esp+10004h] [ebp-4h]
  unsigned int retaddr; // [esp+10008h] [ebp+0h]

  v3 = retaddr ^ dword_300705C0;
  if ( !dword_30076898(20) )
    return sub_30052A2E(retaddr ^ v3);
  sub_300403F0("scripts/%s.shock", a1);
  if ( dword_30076898(15) < 0 )
    return sub_30052A2E(retaddr ^ v3);
  strlen(v2);
  dword_30076898(17);
  dword_30076898(18);
  return sub_30052A2E(retaddr ^ v3);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30030160) --------------------------------------------------------
int __usercall sub_30030160@<eax>(const char *a1@<eax>)
{
  const char *v1; // ebx
  int v2; // edi
  int result; // eax
  int v4; // esi
  int v5; // edi
  unsigned int i; // esi

  v1 = (const char *)sub_300403F0("scripts/%s.shock", a1);
  v2 = dword_30076898(15);
  if ( v2 >= 0 )
  {
    v4 = dword_30076898(189);
    dword_30076898(16);
    *(_BYTE *)(v4 + v2) = 0;
    dword_30076898(18);
    v5 = dword_30076898(21);
    dword_30076898(190);
    for ( i = 0; i < 0x6C; i += 4 )
      dword_30076898(8);
    result = v5;
  }
  else
  {
    sub_300219D0("^1couldn't open '%s'\n", v1);
    result = 0;
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30030220) --------------------------------------------------------
int __usercall sub_30030220@<eax>(int a1@<esi>)
{
  int v1; // eax
  int v2; // eax
  double v3; // st7
  int v4; // eax
  int v5; // eax
  int v6; // eax
  double v7; // st7
  double v8; // st7
  double v9; // st7
  double v10; // st7
  double v11; // st7
  double v12; // st7
  double v13; // st7
  double v14; // st7
  double v15; // st7
  double v16; // st7
  double v17; // st7
  int v18; // eax
  int result; // eax
  float v20; // [esp+4h] [ebp-10h]
  float v21; // [esp+8h] [ebp-Ch]
  float v22; // [esp+8h] [ebp-Ch]
  float v23; // [esp+8h] [ebp-Ch]
  float v24; // [esp+8h] [ebp-Ch]
  float v25; // [esp+8h] [ebp-Ch]
  float v26; // [esp+8h] [ebp-Ch]
  float v27; // [esp+8h] [ebp-Ch]
  float v28; // [esp+8h] [ebp-Ch]
  float v29; // [esp+8h] [ebp-Ch]
  float v30; // [esp+8h] [ebp-Ch]
  float v31; // [esp+8h] [ebp-Ch]
  float v32; // [esp+8h] [ebp-Ch]
  float v33; // [esp+8h] [ebp-Ch]

  v20 = flt_301E2908 * 1000.0;
  if ( (int)(v20 + 9.313225746154785e-10) >= 1 )
  {
    v21 = flt_301E2908 * 1000.0;
    v1 = (int)(v21 + 9.313225746154785e-10);
  }
  else
  {
    v1 = 1;
  }
  *(_DWORD *)(a1 + 12) = v1;
  v22 = flt_301E3E68 * 1000.0;
  if ( (int)(v22 + 9.313225746154785e-10) >= 1 )
  {
    v23 = flt_301E3E68 * 1000.0;
    v2 = (int)(v23 + 9.313225746154785e-10);
  }
  else
  {
    v2 = 1;
  }
  *(_DWORD *)(a1 + 16) = v2;
  *(_DWORD *)a1 = 3000;
  if ( flt_301E2A28 >= 0.001 )
    v3 = flt_301E2A28;
  else
    v3 = 0.001;
  *(float *)(a1 + 4) = 0.001 / v3;
  *(_DWORD *)(a1 + 8) = dword_301E5848;
  *(_DWORD *)(a1 + 20) = dword_301DED6C != 0;
  v24 = flt_301DCBA8 * 1000.0;
  if ( (int)(v24 + 9.313225746154785e-10) >= 1 )
  {
    v25 = flt_301DCBA8 * 1000.0;
    v4 = (int)(v25 + 9.313225746154785e-10);
  }
  else
  {
    v4 = 1;
  }
  *(_DWORD *)(a1 + 24) = v4;
  v26 = flt_3029CFC8 * 1000.0;
  if ( (int)(v26 + 9.313225746154785e-10) >= 1 )
  {
    v27 = flt_3029CFC8 * 1000.0;
    v5 = (int)(v27 + 9.313225746154785e-10);
  }
  else
  {
    v5 = 1;
  }
  *(_DWORD *)(a1 + 28) = v5;
  v28 = flt_301E4408 * 1000.0;
  if ( (int)(v28 + 9.313225746154785e-10) >= 1 )
  {
    v29 = flt_301E4408 * 1000.0;
    v6 = (int)(v29 + 9.313225746154785e-10);
  }
  else
  {
    v6 = 1;
  }
  *(_DWORD *)(a1 + 96) = v6;
  v30 = flt_301E3C28 * 1000.0;
  *(_DWORD *)(a1 + 100) = (int)(v30 + 9.313225746154785e-10);
  strncpy((char *)(a1 + 36), byte_3029C6D0, 0xFu);
  *(_BYTE *)(a1 + 51) = 0;
  if ( flt_301DDFE8 < 0.0 )
  {
    v7 = 0.0;
  }
  else if ( flt_301DDFE8 <= 1.0 )
  {
    v7 = flt_301DDFE8;
  }
  else
  {
    v7 = 1.0;
  }
  *(float *)(a1 + 32) = v7;
  v31 = flt_301DFAE8 * 1000.0;
  *(_DWORD *)(a1 + 92) = (int)(v31 + 9.313225746154785e-10);
  if ( flt_301DC968 < 0.0 )
  {
    v8 = 0.0;
  }
  else if ( flt_301DC968 <= 1.0 )
  {
    v8 = flt_301DC968;
  }
  else
  {
    v8 = 1.0;
  }
  *(float *)(a1 + 52) = v8;
  if ( flt_301E4E28 < 0.0 )
  {
    v9 = 0.0;
  }
  else if ( flt_301E4E28 <= 1.0 )
  {
    v9 = flt_301E4E28;
  }
  else
  {
    v9 = 1.0;
  }
  *(float *)(a1 + 56) = v9;
  if ( flt_301AA188 < 0.0 )
  {
    v10 = 0.0;
  }
  else if ( flt_301AA188 <= 1.0 )
  {
    v10 = flt_301AA188;
  }
  else
  {
    v10 = 1.0;
  }
  *(float *)(a1 + 68) = v10;
  if ( flt_301B0AE8 < 0.0 )
  {
    v11 = 0.0;
  }
  else if ( flt_301B0AE8 <= 1.0 )
  {
    v11 = flt_301B0AE8;
  }
  else
  {
    v11 = 1.0;
  }
  *(float *)(a1 + 72) = v11;
  if ( flt_3029BB88 < 0.0 )
  {
    v12 = 0.0;
  }
  else if ( flt_3029BB88 <= 1.0 )
  {
    v12 = flt_3029BB88;
  }
  else
  {
    v12 = 1.0;
  }
  *(float *)(a1 + 64) = v12;
  if ( flt_301E30E8 < 0.0 )
  {
    v13 = 0.0;
  }
  else if ( flt_301E30E8 <= 1.0 )
  {
    v13 = flt_301E30E8;
  }
  else
  {
    v13 = 1.0;
  }
  *(float *)(a1 + 60) = v13;
  if ( flt_301E2B48 < 0.0 )
  {
    v14 = 0.0;
  }
  else if ( flt_301E2B48 <= 1.0 )
  {
    v14 = flt_301E2B48;
  }
  else
  {
    v14 = 1.0;
  }
  *(float *)(a1 + 76) = v14;
  if ( flt_301E4528 < 0.0 )
  {
    v15 = 0.0;
  }
  else if ( flt_301E4528 <= 1.0 )
  {
    v15 = flt_301E4528;
  }
  else
  {
    v15 = 1.0;
  }
  *(float *)(a1 + 80) = v15;
  if ( flt_301CFA08 < 0.0 )
  {
    v16 = 0.0;
  }
  else if ( flt_301CFA08 <= 1.0 )
  {
    v16 = flt_301CFA08;
  }
  else
  {
    v16 = 1.0;
  }
  *(float *)(a1 + 84) = v16;
  if ( flt_301CF7C8 < 0.0 )
  {
    v17 = 0.0;
  }
  else if ( flt_301CF7C8 <= 1.0 )
  {
    v17 = flt_301CF7C8;
  }
  else
  {
    v17 = 1.0;
  }
  *(float *)(a1 + 88) = v17;
  *(_DWORD *)(a1 + 104) = dword_3029C7EC != 0;
  v32 = flt_301DDB68 * 1000.0;
  if ( (int)(v32 + 9.313225746154785e-10) >= 1 )
  {
    v33 = flt_301DDB68 * 1000.0;
    v18 = (int)(v33 + 9.313225746154785e-10);
  }
  else
  {
    v18 = 1;
  }
  *(_DWORD *)(a1 + 108) = v18;
  result = dword_301E5068;
  *(_DWORD *)(a1 + 116) = dword_301E5068;
  *(_DWORD *)(a1 + 120) = dword_301A9F48;
  *(_DWORD *)(a1 + 112) = dword_3029D0E8;
  return result;
}
// 301A9F48: using guessed type int dword_301A9F48;
// 301AA188: using guessed type float flt_301AA188;
// 301B0AE8: using guessed type float flt_301B0AE8;
// 301CF7C8: using guessed type float flt_301CF7C8;
// 301CFA08: using guessed type float flt_301CFA08;
// 301DC968: using guessed type float flt_301DC968;
// 301DCBA8: using guessed type float flt_301DCBA8;
// 301DDB68: using guessed type float flt_301DDB68;
// 301DDFE8: using guessed type float flt_301DDFE8;
// 301DED6C: using guessed type int dword_301DED6C;
// 301DFAE8: using guessed type float flt_301DFAE8;
// 301E2908: using guessed type float flt_301E2908;
// 301E2A28: using guessed type float flt_301E2A28;
// 301E2B48: using guessed type float flt_301E2B48;
// 301E30E8: using guessed type float flt_301E30E8;
// 301E3C28: using guessed type float flt_301E3C28;
// 301E3E68: using guessed type float flt_301E3E68;
// 301E4408: using guessed type float flt_301E4408;
// 301E4528: using guessed type float flt_301E4528;
// 301E4E28: using guessed type float flt_301E4E28;
// 301E5068: using guessed type int dword_301E5068;
// 301E5848: using guessed type int dword_301E5848;
// 3029BB88: using guessed type float flt_3029BB88;
// 3029C7EC: using guessed type int dword_3029C7EC;
// 3029CFC8: using guessed type float flt_3029CFC8;
// 3029D0E8: using guessed type int dword_3029D0E8;

//----- (30030880) --------------------------------------------------------
int sub_30030880()
{
  int result; // eax

  dword_30076898(217);
  dword_30076898(218);
  result = dword_3021137C;
  if ( dword_3021137C )
  {
    dword_3021137C = 0;
    dword_30076898(193);
    result = dword_30076898(195);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3021137C: using guessed type int dword_3021137C;

//----- (30030900) --------------------------------------------------------
int sub_30030900()
{
  dword_30211380 = 1065353216;
  return dword_30076898(241);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30211380: using guessed type int dword_30211380;

//----- (30030960) --------------------------------------------------------
int sub_30030960()
{
  sub_30030880();
  dword_30211380 = 1065353216;
  dword_30076898(241);
  dword_30211384 = 0;
  dword_30211388 = 0;
  return dword_30076898(87);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30211380: using guessed type int dword_30211380;
// 30211384: using guessed type int dword_30211384;
// 30211388: using guessed type int dword_30211388;

//----- (300309C0) --------------------------------------------------------
int __usercall sub_300309C0@<eax>(_DWORD *a1@<eax>, int a2, int a3)
{
  int result; // eax
  int v5; // esi

  if ( !a1[5] )
    return sub_30030880();
  dword_30076898(217);
  dword_30076898(218);
  if ( a3 + a1[24] + a1[25] - a2 > 0 )
  {
    dword_30076898(193);
    dword_30076898(193);
    dword_30076898(196);
  }
  v5 = a3 + dword_3020AF00 + a1[25] - a2;
  result = dword_3021137C;
  if ( dword_3020AF00 >= v5 )
  {
    if ( v5 == dword_3021137C )
      return result;
    dword_3021137C = v5;
    dword_30076898(193);
  }
  else
  {
    if ( !dword_3021137C )
      return result;
    dword_3021137C = 0;
    dword_30076898(193);
  }
  return dword_30076898(195);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;
// 3021137C: using guessed type int dword_3021137C;

//----- (30030CA0) --------------------------------------------------------
int __cdecl sub_30030CA0(int a1, int a2)
{
  float *v2; // ecx
  double v4; // st7
  int v5; // [esp+0h] [ebp-8h]

  if ( !*((_DWORD *)v2 + 26) )
  {
    dword_30211380 = 1065353216;
    return dword_30076898(241);
  }
  v5 = *((_DWORD *)v2 + 27);
  if ( a2 - a1 >= v5 )
    goto LABEL_6;
  if ( a2 - a1 <= 0 )
    return sub_30030900();
  v4 = (double)(a2 - a1) / (double)v5;
  if ( v4 == 1.0 )
  {
LABEL_6:
    dword_30211380 = *((_DWORD *)v2 + 28);
    return dword_30076898(241);
  }
  *(float *)&dword_30211380 = (v2[28] - 1.0) * v4 + 1.0;
  return dword_30076898(241);
}
// 30030CA0: variable 'v2' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30211380: using guessed type int dword_30211380;

//----- (30030DA0) --------------------------------------------------------
float *__usercall sub_30030DA0@<eax>(float *result@<eax>, int a2@<edx>, int a3)
{
  double v3; // st7
  double v4; // st7
  double v5; // st5
  double v6; // st4
  double v7; // st3
  double v8; // st5
  double v9; // st4
  double v10; // st3
  int v11; // [esp+4h] [ebp-10h]
  float v12; // [esp+8h] [ebp-Ch]
  float v13; // [esp+18h] [ebp+4h]

  if ( (int)result - a3 > 0 )
  {
    v3 = 1.0;
    if ( (int)result - a3 < *(_DWORD *)a2 )
      v3 = (double)((int)result - a3) / (double)*(int *)a2;
    v12 = (3.0 - (v3 + v3)) * v3 * v3 * *(float *)(a2 + 8);
    v13 = (double)a3 * *(float *)(a2 + 4);
    v11 = (int)(v13 - 0.4999999990686774);
    v4 = v13 - (double)v11;
    result = (float *)((char *)&unk_300628F8 + 8 * (((_BYTE)v11 + 61 * (_BYTE)result) & 0x7F));
    v5 = result[2];
    v6 = *result;
    v7 = result[6] - result[4] + v5 - v6;
    *(float *)&dword_30211384 = (((v6 - v5 - v7 + v7 * v4) * v4 + result[4] - v6) * v4 + v5) * v12;
    v8 = result[3];
    v9 = result[1];
    v10 = result[7] - result[5] + v8 - v9;
    *(float *)&dword_30211388 = (((v9 - v8 - v10 + v10 * v4) * v4 + result[5] - v9) * v4 + v8) * v12;
  }
  else
  {
    dword_30211384 = 0;
    dword_30211388 = 0;
  }
  return result;
}
// 30211384: using guessed type int dword_30211384;
// 30211388: using guessed type int dword_30211388;

//----- (30030EC0) --------------------------------------------------------
int __usercall sub_30030EC0@<eax>(int a1@<eax>, _DWORD *a2@<ebx>, float *a3@<edi>)
{
  int v3; // esi

  v3 = dword_3020AF00 - a1;
  if ( !a1 || v3 < 0 )
    return sub_30030960();
  sub_300309C0(a2, dword_3020AF00 - a1, (int)a3);
  sub_30030CA0(v3, (int)a3);
  sub_30030DA0(a3, (int)a2, v3);
  return dword_30076898(87);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;

//----- (30030F30) --------------------------------------------------------
char __cdecl sub_30030F30(int *a1)
{
  int *v2; // esi
  int v3; // eax
  int v4; // eax
  int v5; // ecx
  int *v6; // eax
  char *v7; // ebx
  int v8; // edx
  int *v9; // eax

  qmemcpy(a1, a1 + 60, 0xF0u);
  a1[134] = 0;
  a1[133] = 0;
  a1[132] = 0;
  a1[120] = 1;
  a1[124] = 0;
  sub_30005970(dword_3020AF00, (int)(a1 + 126), (int)(a1 + 63));
  v2 = a1 + 129;
  sub_30005970(dword_3020AF00, (int)(a1 + 129), (int)(a1 + 72));
  switch ( a1[61] )
  {
    case 0:
    case 4:
      LOBYTE(v3) = 0;
      a1[122] = 0;
      a1[123] = 0;
      break;
    case 1:
      v4 = a1[101];
      v5 = a1[87];
      a1[122] = v4;
      a1[123] = v4;
      v6 = &dword_3018DC8C[300 * a1[36]];
      v6[248] = v5;
      v6[249] = a1[113];
      v6[250] = *v2;
      v6[251] = a1[130];
      v6[252] = a1[131];
      *v2 = 0;
      a1[131] = 0;
      LOBYTE(v3) = sub_30029930((int)a1);
      break;
    case 2:
      v7 = (char *)&unk_301DA064 + 1200 * *a1 - 76800;
      v8 = *((_DWORD *)v7 + 298);
      v9 = &dword_3018DC8C[300 * a1[36]];
      if ( (a1[2] & 0x800) != 0 )
      {
        qmemcpy(v7, v9, 0x4B0u);
        *((_DWORD *)v7 + 298) = v8;
        dword_30076898(185);
        v3 = 0;
      }
      else
      {
        if ( !v7[64] || *((_DWORD *)v7 + 2) != v9[2] )
        {
          qmemcpy(v7, v9, 0x4B0u);
          *((_DWORD *)v7 + 298) = v8;
        }
        v3 = a1[101];
      }
      a1[122] = v3;
      a1[123] = v3;
      *((_DWORD *)v7 + 254) = 1;
      break;
    default:
      v3 = a1[101];
      a1[122] = v3;
      a1[123] = v3;
      break;
  }
  return v3;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 3020AF00: using guessed type int dword_3020AF00;

//----- (30031140) --------------------------------------------------------
int __usercall sub_30031140@<eax>(int a1@<eax>)
{
  int *v1; // eax

  dword_301E5F20 = a1;
  dword_3020AF00 = *(_DWORD *)(a1 + 8);
  dword_300F2390 = dword_3020AF00;
  dword_3020AF04 = dword_3020AF00;
  v1 = dword_30211B20;
  do
  {
    *v1 = 0;
    v1 += 138;
  }
  while ( (int)v1 < (int)&unk_3029BB20 );
  dword_30076898(216);
  return sub_30029DE0();
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F2390: using guessed type int dword_300F2390;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF04: using guessed type int dword_3020AF04;
// 30211B20: using guessed type int dword_30211B20[];

//----- (300311A0) --------------------------------------------------------
int sub_300311A0()
{
  int v0; // esi
  int v1; // ebx
  int v2; // eax
  _DWORD *v3; // ecx
  int v4; // ebp
  int *v5; // edx
  int v6; // ebx
  int v7; // edx
  _DWORD *v8; // eax
  int v9; // ebp
  _DWORD *v10; // eax
  int v11; // esi
  int v12; // ebx
  int result; // eax
  int v14; // ecx
  int v15; // [esp-8h] [ebp-1Ch]
  int v16; // [esp+10h] [ebp-4h]
  int v17; // [esp+10h] [ebp-4h]

  v0 = dword_301E5F20;
  v1 = 0;
  v2 = 0;
  if ( *(int *)(dword_301E5F20 + 8408) > 0 )
  {
    v3 = (_DWORD *)(dword_301E5F20 + 8416);
    do
    {
      dword_30211B20[138 * *v3] = 0;
      ++v2;
      v3 += 60;
    }
    while ( v2 < *(_DWORD *)(v0 + 8408) );
  }
  v16 = 0;
  if ( *(int *)(v0 + 8412) > 0 )
  {
    v4 = 0;
    do
    {
      v5 = &dword_3018DC8C[300 * *(_DWORD *)(v0 + v4 + 69856)];
      if ( v5[1] )
      {
        v5[1] = 0;
      }
      else
      {
        v6 = v5[298];
        memset(v5, 0, 0x4B0u);
        v5[298] = v6;
        v15 = *(_DWORD *)(v0 + v4 + 69856);
        dword_30076898(166);
        dword_3020D3B0[v15] = 0;
        dword_3020E3AC[v15] = 0;
        v0 = dword_301E5F20;
        v1 = 0;
      }
      v4 += 92;
      ++v16;
    }
    while ( v16 < *(_DWORD *)(v0 + 8412) );
  }
  v7 = dword_301E5F24;
  dword_301E5F20 = dword_301E5F24;
  v17 = v0;
  if ( (*(_DWORD *)(dword_301E5F24 + 24) & 0x30000) != 0 )
  {
    v8 = (_DWORD *)((char *)&unk_30211940 + 552 * *(_DWORD *)(dword_301E5F24 + 184));
    qmemcpy(v8, v8 + 60, 0xF0u);
    v8[120] = 1;
  }
  if ( *(int *)(v7 + 8408) > 0 )
  {
    v9 = 0;
    do
    {
      v10 = (_DWORD *)((char *)&unk_30211940 + 552 * *(_DWORD *)(v7 + v9 + 8416));
      qmemcpy(v10, v10 + 60, 0xF0u);
      v10[120] = 1;
      sub_3001FCA0((int)v10);
      v7 = dword_301E5F20;
      ++v1;
      v9 += 240;
    }
    while ( v1 < *(_DWORD *)(dword_301E5F20 + 8408) );
  }
  v11 = v0 + 12;
  v12 = v7 + 12;
  if ( dword_301E5F08 || (*(_DWORD *)(v7 + 24) & 0x10000) != 0 || dword_301E54EC || (result = dword_301E596C) != 0 )
  {
    if ( *(_DWORD *)(v7 + 240) != *(_DWORD *)(v17 + 240) )
    {
      if ( *(_DWORD *)(v7 + 252) )
        sub_30029B60(*(float *)(v7 + 244), *(_DWORD *)(v7 + 248), *(float *)(v7 + 252));
    }
    sub_30029AB0();
    result = sub_30029F50(v14, v12, v11);
  }
  return result;
}
// 3003136C: variable 'v14' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301E54EC: using guessed type int dword_301E54EC;
// 301E596C: using guessed type int dword_301E596C;
// 301E5F08: using guessed type int dword_301E5F08;
// 301E5F20: using guessed type int dword_301E5F20;
// 301E5F24: using guessed type int dword_301E5F24;
// 30211B20: using guessed type int dword_30211B20[];

//----- (30031380) --------------------------------------------------------
int __cdecl sub_30031380(_DWORD *a1)
{
  int *v1; // ebx
  int v2; // eax
  const char *v3; // eax
  int v4; // esi
  const char *v5; // edi
  char *v6; // ebx
  int v7; // esi
  const char *v8; // edi
  int v9; // esi
  const char *v10; // edi
  bool v11; // zf
  bool v12; // cc
  int v13; // esi
  _DWORD *v14; // edx
  int v15; // eax
  char *v16; // ebx
  _BYTE *v17; // ebx
  char *v18; // eax
  _DWORD *v19; // edi
  char *v20; // eax
  char *v21; // esi
  int result; // eax
  int v23; // edi
  _DWORD *v24; // ebx
  const char *v25; // [esp-4h] [ebp-2Ch]
  int v26; // [esp+14h] [ebp-14h]
  int v27; // [esp+14h] [ebp-14h]
  int v28; // [esp+14h] [ebp-14h]
  char *v29; // [esp+18h] [ebp-10h]
  char *Source; // [esp+1Ch] [ebp-Ch]
  int *v31; // [esp+20h] [ebp-8h]
  int v32; // [esp+24h] [ebp-4h]

  dword_301E5F24 = (int)a1;
  dword_30076898(149);
  sub_3001CE70();
  sub_3002FC70();
  v26 = 0;
  if ( (int)a1[2103] > 0 )
  {
    Source = (char *)(a1 + 17479);
    do
    {
      v1 = &dword_3018DC8C[300 * *((_DWORD *)Source - 15)];
      v31 = v1;
      if ( *v1 )
        v2 = v1[11];
      else
        v2 = *((_DWORD *)Source - 14);
      v1[12] = v2;
      *v1 = 1;
      v1[1] = 1;
      v1[2] = *((_DWORD *)Source - 15);
      v1[11] = *((_DWORD *)Source - 14);
      if ( strcmp((const char *)v1 + 12, Source) )
      {
        if ( *((_BYTE *)v1 + 12) )
        {
          v3 = (const char *)sub_30023B20("CGAME_PLAYERRENAMES", Source);
          sub_300403F0("%s^7 %s %s", (const char *)v1 + 12, v3, v25);
          dword_30076898(2);
        }
        strncpy((char *)v1 + 12, Source, 0x1Fu);
        *((_BYTE *)v1 + 43) = 0;
      }
      v4 = *((_DWORD *)Source - 13) + 268;
      if ( v4 < 0 || v4 >= 2048 )
        sub_30021A30("CG_ConfigString: bad index: %i", v4);
      v5 = &byte_301D1B20[dword_301CFB20[v4]];
      if ( strcmp((const char *)v1 + 64, v5) )
      {
        strncpy((char *)v1 + 64, v5, 0x3Fu);
        *((_BYTE *)v1 + 127) = 0;
        v1[254] = 1;
      }
      v29 = Source - 24;
      v6 = (char *)(v1 + 32);
      v32 = 6;
      do
      {
        v7 = *((_DWORD *)v29 - 6) + 268;
        if ( v7 < 0 || v7 >= 2048 )
          sub_30021A30("CG_ConfigString: bad index: %i", v7);
        v8 = &byte_301D1B20[dword_301CFB20[v7]];
        if ( strcmp(v6, v8) )
        {
          strncpy(v6, v8, 0x3Fu);
          v6[63] = 0;
          v31[254] = 1;
        }
        v9 = *(_DWORD *)v29 + 108;
        if ( v9 < 0 || v9 >= 2048 )
          sub_30021A30("CG_ConfigString: bad index: %i", *v29 + 108);
        v10 = &byte_301D1B20[dword_301CFB20[v9]];
        if ( strcmp(v6 + 384, v10) )
        {
          strncpy(v6 + 384, v10, 0x3Fu);
          v6[447] = 0;
          v31[254] = 1;
        }
        v6 += 64;
        v11 = v32 == 1;
        v29 += 4;
        --v32;
      }
      while ( !v11 );
      v12 = ++v26 < a1[2103];
      Source += 92;
    }
    while ( v12 );
  }
  v13 = a1[50] + 268;
  if ( v13 < 0 || v13 >= 2048 )
    sub_30021A30("CG_ConfigString: bad index: %i", v13);
  sub_30037940();
  v14 = (_DWORD *)dword_301E5F20;
  dword_3021068C = a1[67];
  dword_30210690 = a1[68];
  v15 = *(_DWORD *)(dword_301E5F20 + 184);
  if ( a1[46] != v15 )
    dword_30211B20[138 * v15] = 0;
  if ( (a1[6] & 0x30000) == 0 )
  {
    if ( !dword_3020AF0C && a1[69] == v14[69] && a1[46] == v14[46] )
      goto LABEL_46;
    qmemcpy(v14 + 3, a1 + 3, 0x20CCu);
LABEL_45:
    sub_30029DE0();
    goto LABEL_46;
  }
  v16 = (char *)&unk_30211940 + 552 * a1[46];
  sub_30005FD0();
  if ( dword_3020AF0C || a1[69] != *(_DWORD *)(dword_301E5F20 + 276) || a1[46] != *(_DWORD *)(dword_301E5F20 + 184) )
  {
    qmemcpy((void *)(dword_301E5F20 + 12), a1 + 3, 0x20CCu);
    sub_30030F30(v16);
    goto LABEL_45;
  }
  if ( !*((_DWORD *)v16 + 120) || (((unsigned __int8)v16[8] ^ (unsigned __int8)v16[248]) & 8) != 0 )
  {
    qmemcpy((void *)(dword_301E5F20 + 12), a1 + 3, 0x20CCu);
    sub_30030F30(v16);
    dword_3020D248 = 0;
    dword_3020D244 = 0;
    dword_3020D240 = 0;
  }
LABEL_46:
  v27 = 0;
  if ( (int)a1[2102] > 0 )
  {
    v17 = a1 + 2104;
    do
    {
      v18 = (char *)&unk_30211940 + 552 * *(_DWORD *)v17;
      qmemcpy(v18 + 240, v17, 0xF0u);
      if ( !*((_DWORD *)v18 + 120) || (((unsigned __int8)v18[8] ^ v17[8]) & 8) != 0 )
        sub_30030F30(v18);
      v17 += 240;
      ++v27;
    }
    while ( v27 < a1[2102] );
  }
  v28 = 0;
  if ( (int)a1[2103] > 0 )
  {
    v19 = a1 + 17464;
    do
    {
      v20 = (char *)&unk_30211940 + 552 * *v19;
      if ( *((_DWORD *)v20 + 120) )
      {
        v21 = v20 + 240;
        dword_30076898(163);
        sub_30005380(v21);
      }
      v19 += 23;
      ++v28;
    }
    while ( v28 < a1[2103] );
  }
  sub_3002A0C0();
  result = a1[2102];
  v23 = 0;
  if ( result > 0 )
  {
    v24 = a1 + 2104;
    do
    {
      sub_3001FDA0();
      result = a1[2102];
      ++v23;
      v24 += 60;
    }
    while ( v23 < result );
  }
  return result;
}
// 30031460: variable 'v25' is possibly undefined
// 30005380: using guessed type _DWORD __cdecl sub_30005380(_DWORD);
// 30005FD0: using guessed type int sub_30005FD0(void);
// 3001CE70: using guessed type int sub_3001CE70(void);
// 3001FDA0: using guessed type int sub_3001FDA0(void);
// 30023B20: using guessed type int __thiscall sub_30023B20(_DWORD, _DWORD);
// 30029DE0: using guessed type int sub_30029DE0(void);
// 3002A0C0: using guessed type int sub_3002A0C0(void);
// 3002FC70: using guessed type int sub_3002FC70(void);
// 30030F30: using guessed type _DWORD __cdecl sub_30030F30(_DWORD);
// 30037940: using guessed type int sub_30037940(void);
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3018DC8C: using guessed type int dword_3018DC8C[];
// 301CFB20: using guessed type int dword_301CFB20[];
// 301E5F20: using guessed type int dword_301E5F20;
// 301E5F24: using guessed type int dword_301E5F24;
// 3020AF0C: using guessed type int dword_3020AF0C;
// 3020D240: using guessed type int dword_3020D240;
// 3020D244: using guessed type int dword_3020D244;
// 3020D248: using guessed type int dword_3020D248;
// 3021068C: using guessed type int dword_3021068C;
// 30210690: using guessed type int dword_30210690;
// 30211B20: using guessed type int dword_30211B20[];

//----- (30031930) --------------------------------------------------------
int *sub_30031930()
{
  int v0; // eax
  int v1; // ecx
  int *v2; // esi
  int v3; // ecx

  v0 = dword_301D5A54;
  v1 = *(_DWORD *)dword_301E5F18;
  if ( *(int *)dword_301E5F18 > dword_301D5A54 + 1000 )
  {
    sub_300219D0("WARNING: CG_ReadNextSnapshot: way out of range, %i > %i\n", *(_DWORD *)dword_301E5F18, dword_301D5A54);
    v1 = *(_DWORD *)dword_301E5F18;
    v0 = dword_301D5A54;
  }
  if ( v0 >= v1 )
    return 0;
  while ( 1 )
  {
    v2 = (int *)&unk_301F8710;
    if ( (_UNKNOWN *)dword_301E5F20 != &unk_301E5F28 )
      v2 = (int *)&unk_301E5F28;
    dword_301D5A54 = v0 + 1;
    if ( dword_30076898(81) )
      break;
    v3 = *(_DWORD *)dword_301E5F18;
    dword_301A2184[dword_301A2384 & 0x7F] = -1;
    v0 = dword_301D5A54;
    ++dword_301A2384;
    if ( dword_301D5A54 >= v3 )
      return 0;
  }
  sub_30016460(v2);
  return v2;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301A2384: using guessed type int dword_301A2384;
// 301D5A54: using guessed type int dword_301D5A54;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (300319E0) --------------------------------------------------------
int *sub_300319E0()
{
  int v0; // eax
  int *result; // eax
  int *v2; // esi
  int *v3; // eax
  int *v4; // esi
  int v5; // eax
  int v6; // ecx
  int v7; // [esp+4h] [ebp-8h]

  dword_30076898(80);
  v0 = v7;
  if ( v7 != *(_DWORD *)dword_301E5F18 )
  {
    if ( v7 < *(int *)dword_301E5F18 )
    {
      sub_30021A30("CG_ProcessSnapshots: n < cg.latestSnapshotNum");
      v0 = v7;
    }
    *(_DWORD *)dword_301E5F18 = v0;
  }
  dword_300F2394 = dword_301E5F1C;
  while ( !dword_301E5F20 )
  {
    result = sub_30031930();
    v2 = result;
    if ( !result )
      return result;
    if ( (*(_BYTE *)result & 2) == 0 )
    {
      dword_301E5F20 = (int)result;
      dword_3020AF00 = result[2];
      dword_300F2390 = dword_3020AF00;
      dword_3020AF04 = dword_3020AF00;
      v3 = dword_30211B20;
      do
      {
        *v3 = 0;
        v3 += 138;
      }
      while ( (int)v3 < (int)&unk_3029BB20 );
      dword_30076898(216);
      sub_30029DE0();
      sub_30031380(v2);
      sub_300311A0();
    }
  }
  sub_3001CE70();
  while ( 1 )
  {
    if ( dword_301E5F24 != dword_301E5F20 )
      goto LABEL_20;
    v4 = sub_30031930();
    if ( !v4 )
      break;
    if ( ((*(_BYTE *)dword_301E5F20 ^ *(_BYTE *)v4) & 4) != 0 )
    {
      sub_30031140((int)v4);
      sub_30031380(v4);
      sub_300311A0();
    }
    else
    {
      if ( v4[2] - *(_DWORD *)(dword_301E5F20 + 8) < 0 )
        sub_30021A30("CG_ProcessSnapshots: Server time went backwards");
      sub_30031380(v4);
LABEL_20:
      v5 = dword_3020AF00;
      if ( dword_3020AF00 - *(_DWORD *)(dword_301E5F20 + 8) >= 0 && dword_3020AF00 - *(_DWORD *)(dword_301E5F24 + 8) < 0 )
        goto LABEL_24;
      sub_300311A0();
    }
  }
  v5 = dword_3020AF00;
LABEL_24:
  v6 = *(_DWORD *)(dword_301E5F20 + 8);
  result = (int *)(v5 - v6);
  if ( (int)result < 0 )
  {
    dword_3020AF00 = *(_DWORD *)(dword_301E5F20 + 8);
    dword_300F2390 = v6;
  }
  return result;
}
// 300319F6: variable 'v7' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F2390: using guessed type int dword_300F2390;
// 300F2394: using guessed type int dword_300F2394;
// 301E5F1C: using guessed type int dword_301E5F1C;
// 301E5F20: using guessed type int dword_301E5F20;
// 301E5F24: using guessed type int dword_301E5F24;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF04: using guessed type int dword_3020AF04;
// 30211B20: using guessed type int dword_30211B20[];

//----- (30031B80) --------------------------------------------------------
int (__cdecl *__cdecl dllEntry(int (__cdecl *a1)(_DWORD)))(_DWORD)
{
  int (__cdecl *result)(_DWORD); // eax

  result = a1;
  dword_30076898 = a1;
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30031C40) --------------------------------------------------------
int sub_30031C40()
{
  return dword_30076898(244);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30031C80) --------------------------------------------------------
int sub_30031C80()
{
  return dword_30076898(9);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032050) --------------------------------------------------------
int sub_30032050()
{
  const char *v0; // eax
  char String[64]; // [esp+44h] [ebp-44h] BYREF
  unsigned int v3; // [esp+84h] [ebp-4h]
  unsigned int retaddr; // [esp+88h] [ebp+0h]

  v3 = retaddr ^ dword_300705C0;
  if ( !dword_301E5F20 && !dword_300F0FA0 )
  {
    dword_300F0FA0 = 1;
    if ( byte_301DD4B0 )
      dword_30076898(9);
    if ( byte_301E5730 )
      dword_30076898(9);
    if ( dword_301AA3CC )
      dword_30076898(9);
    v0 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]], "mapname");
    if ( !v0 || !*v0 || (sub_300403F0("levelshots/%s.tga", v0), sub_30020CA0(0), !dword_30076898(88)) )
    {
      sub_30020CA0(0);
      dword_30076898(88);
    }
    dword_30076898(72);
    sub_30032820();
    dword_30076898(11);
    if ( j__atol(String) > 0 )
    {
      dword_30076898(63);
      sub_3001A260();
    }
    dword_30076898(25);
    --dword_300F0FA0;
  }
  dword_30076898(45);
  return sub_30052A2E(retaddr ^ v3);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FA0: using guessed type int dword_300F0FA0;
// 301AA3CC: using guessed type int dword_301AA3CC;
// 301CFB20: using guessed type int dword_301CFB20[];
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301DD4B0: using guessed type char byte_301DD4B0;
// 301E5730: using guessed type char byte_301E5730;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (300322A0) --------------------------------------------------------
int sub_300322A0()
{
  const char *v0; // eax
  char String[64]; // [esp+44h] [ebp-44h] BYREF
  unsigned int v3; // [esp+84h] [ebp-4h]
  unsigned int retaddr; // [esp+88h] [ebp+0h]

  v3 = retaddr ^ dword_300705C0;
  if ( !dword_301E5F20 && !dword_300F0FA0 )
  {
    dword_300F0FA0 = 1;
    if ( byte_301DD4B0 )
      dword_30076898(9);
    if ( byte_301E5730 )
      dword_30076898(9);
    if ( dword_301AA3CC )
      dword_30076898(9);
    v0 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]], "mapname");
    if ( !v0 || !*v0 || (sub_300403F0("levelshots/%s.tga", v0), sub_30020CA0(0), !dword_30076898(88)) )
    {
      sub_30020CA0(0);
      dword_30076898(88);
    }
    dword_30076898(72);
    sub_30032820();
    dword_30076898(11);
    if ( j__atol(String) > 0 )
    {
      dword_30076898(63);
      sub_3001A260();
    }
    dword_30076898(25);
    --dword_300F0FA0;
  }
  dword_30076898(48);
  return sub_30052A2E(retaddr ^ v3);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FA0: using guessed type int dword_300F0FA0;
// 301AA3CC: using guessed type int dword_301AA3CC;
// 301CFB20: using guessed type int dword_301CFB20[];
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301DD4B0: using guessed type char byte_301DD4B0;
// 301E5730: using guessed type char byte_301E5730;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (300324D0) --------------------------------------------------------
int sub_300324D0()
{
  sub_30020CA0(0);
  return dword_30076898(88);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032510) --------------------------------------------------------
int sub_30032510()
{
  return dword_30076898(52);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032540) --------------------------------------------------------
int sub_30032540()
{
  return dword_30076898(53);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032560) --------------------------------------------------------
int sub_30032560()
{
  return dword_30076898(54);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300325C0) --------------------------------------------------------
int sub_300325C0()
{
  return dword_30076898(55);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032620) --------------------------------------------------------
int sub_30032620()
{
  return dword_30076898(56);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032680) --------------------------------------------------------
int sub_30032680()
{
  return dword_30076898(61);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300326D0) --------------------------------------------------------
int sub_300326D0()
{
  return dword_30076898(66);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032770) --------------------------------------------------------
int sub_30032770()
{
  return dword_30076898(68);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032820) --------------------------------------------------------
int sub_30032820()
{
  return dword_30076898(73);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300328A0) --------------------------------------------------------
int sub_300328A0()
{
  return dword_30076898(74);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032930) --------------------------------------------------------
int sub_30032930()
{
  return dword_30076898(75);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032BB0) --------------------------------------------------------
int sub_30032BB0()
{
  return dword_30076898(192);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032C10) --------------------------------------------------------
int sub_30032C10()
{
  return dword_30076898(196);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032E80) --------------------------------------------------------
int sub_30032E80()
{
  return dword_30076898(137);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032F00) --------------------------------------------------------
int sub_30032F00()
{
  return dword_30076898(139);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032F90) --------------------------------------------------------
int sub_30032F90()
{
  return dword_30076898(141);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30032FE0) --------------------------------------------------------
int sub_30032FE0()
{
  return dword_30076898(142);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30033060) --------------------------------------------------------
int sub_30033060()
{
  return dword_30076898(144);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300330D0) --------------------------------------------------------
double sub_300330D0()
{
  return COERCE_FLOAT(dword_30076898(147));
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300330F0) --------------------------------------------------------
double sub_300330F0()
{
  return COERCE_FLOAT(dword_30076898(148));
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300332A0) --------------------------------------------------------
int sub_300332A0()
{
  return dword_30076898(162);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300334C0) --------------------------------------------------------
int sub_300334C0()
{
  return dword_30076898(182);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300334E0) --------------------------------------------------------
void sub_300334E0()
{
  dword_30076898(183);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30033710) --------------------------------------------------------
int sub_30033710()
{
  return dword_30076898(216);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (300337E0) --------------------------------------------------------
int sub_300337E0()
{
  return dword_30076898(220);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30033820) --------------------------------------------------------
int sub_30033820()
{
  return dword_30076898(222);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30033A30) --------------------------------------------------------
int sub_30033A30()
{
  double v0; // st7

  flt_302108CC = flt_3020D354 * 100.0 + flt_3020D348;
  flt_302108D0 = flt_3020D358 * 100.0 + flt_3020D34C;
  v0 = flt_3020D35C * 100.0 + flt_3020D350;
  flt_302108D4 = v0;
  return Com_Printf("\n\nFX Testing position set to: (%f, %f, %f)\n\n", flt_302108CC, flt_302108D0, v0);
}
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 3020D354: using guessed type float flt_3020D354;
// 3020D358: using guessed type float flt_3020D358;
// 3020D35C: using guessed type float flt_3020D35C;
// 302108CC: using guessed type float flt_302108CC;
// 302108D0: using guessed type float flt_302108D0;
// 302108D4: using guessed type float flt_302108D4;

//----- (30033AA0) --------------------------------------------------------
int sub_30033AA0()
{
  Com_Printf("FX Restarting so off-line changes are loaded.\n");
  dword_30076898(233);
  return dword_30076898(232);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30033AD0) --------------------------------------------------------
int sub_30033AD0()
{
  int v0; // esi
  unsigned __int64 v1; // rax

  if ( dword_30076898(12) < 2 )
    Com_Printf("Must supply filename from base path.  Optional restart time.\n");
  dword_30076898(13);
  strncpy(byte_3021088C, &byte_30096790, 0x3Fu);
  byte_302108CB = 0;
  v0 = dword_30076898(223);
  Com_Printf("Spawning Fx %s with ID: %d\n", byte_3021088C, v0);
  dword_30076898(228);
  dword_302108D8 = dword_3020AF00;
  LODWORD(v1) = dword_30076898(12);
  if ( (_DWORD)v1 == 3 )
  {
    dword_30076898(13);
    v1 = (unsigned __int64)(atof(&byte_30096790) * 1000.0);
    dword_302108DC = v1;
  }
  else
  {
    dword_302108DC = 0;
  }
  return v1;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;
// 302108CB: using guessed type char byte_302108CB;
// 302108D8: using guessed type int dword_302108D8;
// 302108DC: using guessed type int dword_302108DC;

//----- (30033BB0) --------------------------------------------------------
int sub_30033BB0()
{
  int v0; // esi
  int v1; // ebx
  int result; // eax

  if ( *(_DWORD *)(dword_301E5F24 + 16) == 5 )
  {
    v0 = 100;
    v1 = 100;
  }
  else
  {
    v0 = dword_3029C12C;
    if ( dword_3029C12C >= 30 )
    {
      if ( dword_3029C12C <= 100 )
      {
        v1 = dword_3029C12C;
      }
      else
      {
        dword_30076898(10);
        v0 = 100;
        v1 = 100;
      }
    }
    else
    {
      dword_30076898(10);
      v0 = 30;
      v1 = 30;
    }
  }
  if ( dword_301E37AC )
    v0 = (unsigned __int64)((double)v0 * 0.85000002);
  dword_3020D330 = (int)(dword_301D5A28 - ((v1 * dword_301D5A28 / 100) & 0xFFFFFFFE)) / 2;
  dword_3020D33C = (v0 * dword_301D5A2C / 100) & 0xFFFFFFFE;
  result = (dword_301D5A2C - dword_3020D33C) / 2;
  dword_3020D338 = (v1 * dword_301D5A28 / 100) & 0xFFFFFFFE;
  dword_3020D334 = result;
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D5A28: using guessed type int dword_301D5A28;
// 301D5A2C: using guessed type int dword_301D5A2C;
// 301E37AC: using guessed type int dword_301E37AC;
// 301E5F24: using guessed type int dword_301E5F24;
// 3020D330: using guessed type int dword_3020D330;
// 3020D334: using guessed type int dword_3020D334;
// 3020D338: using guessed type int dword_3020D338;
// 3020D33C: using guessed type int dword_3020D33C;
// 3029C12C: using guessed type int dword_3029C12C;

//----- (30033CB0) --------------------------------------------------------
void sub_30033CB0()
{
  double v0; // st7
  float v1; // [esp+Ch] [ebp-90h]
  float v2; // [esp+Ch] [ebp-90h]
  float v3; // [esp+10h] [ebp-8Ch] BYREF
  float v4; // [esp+14h] [ebp-88h]
  float v5; // [esp+18h] [ebp-84h]
  float v6; // [esp+1Ch] [ebp-80h] BYREF
  float v7; // [esp+20h] [ebp-7Ch] BYREF
  float v8; // [esp+24h] [ebp-78h]
  float v9; // [esp+28h] [ebp-74h]
  float v10; // [esp+2Ch] [ebp-70h]
  float v11; // [esp+30h] [ebp-6Ch] BYREF
  float v12; // [esp+34h] [ebp-68h]
  float v13; // [esp+38h] [ebp-64h]
  float v14; // [esp+3Ch] [ebp-60h]
  float v15; // [esp+40h] [ebp-5Ch]
  float v16; // [esp+44h] [ebp-58h]
  float *v17; // [esp+48h] [ebp-54h]
  float v18; // [esp+50h] [ebp-4Ch]
  float v19; // [esp+54h] [ebp-48h] BYREF
  float v20; // [esp+58h] [ebp-44h]
  float v21; // [esp+5Ch] [ebp-40h]
  float v22; // [esp+60h] [ebp-3Ch]
  float v23[3]; // [esp+84h] [ebp-18h] BYREF
  float v24[3]; // [esp+90h] [ebp-Ch] BYREF

  v11 = *(float *)&dword_3020D380;
  flt_3020D350 = flt_3020D350 + flt_3020AFE4;
  v12 = flt_3020D384;
  if ( dword_3020AF18 >= 6 )
  {
    v1 = (float)dword_3020B00C;
    v12 = v1;
    flt_3020D384 = v1;
  }
  if ( v11 > 45.0 )
    v11 = 45.0;
  v18 = v12 * 0.017453292;
  v9 = cos(v18);
  v8 = sin(v18);
  v17 = &v6;
  v10 = COERCE_FLOAT(&v7);
  v18 = v11 * 0.017453292;
  v6 = cos(v18);
  v7 = sin(v18);
  v11 = v6 * v9;
  v3 = flt_3020D348;
  v12 = v6 * v8;
  v4 = flt_3020D34C;
  v13 = -v7;
  v14 = v11 * 512.0 + flt_3020D348;
  v15 = v12 * 512.0 + flt_3020D34C;
  v16 = v13 * 512.0 + flt_3020D350;
  v5 = flt_3020D350 + 8.0;
  *(float *)&dword_3020D380 = *(float *)&dword_3020D380 * 0.5;
  flt_3020D384 = flt_3020D384 - flt_3029D568;
  sub_3003BEA0((float *)&dword_3020D380, v23, v24, &v11);
  v2 = -flt_301E39E8;
  v3 = v2 * v11 + v3;
  v4 = v2 * v12 + v4;
  v5 = v2 * v13 + v5;
  sub_3002A3A0(17, (int)&v3, (int)&unk_30076888, &v19, (int)&flt_3020D348, (int)&unk_3007687C, dword_3020AFC0);
  if ( v19 != 1.0 )
  {
    v3 = v20;
    v4 = v21;
    v5 = (1.0 - v19) * 32.0 + v22;
    sub_3002A3A0(17, (int)&v3, (int)&unk_30076888, &v19, (int)&flt_3020D348, (int)&unk_3007687C, dword_3020AFC0);
    v3 = v20;
    v4 = v21;
    v5 = v22;
  }
  flt_3020D348 = v3;
  v14 = v14 - v3;
  flt_3020D34C = v4;
  flt_3020D350 = v5;
  v15 = v15 - v4;
  v16 = v16 - v5;
  v0 = v16;
  sub_3005D00A();
  v10 = v0;
  *(float *)&dword_3020D380 = v10 * -57.295776;
}
// 301E39E8: using guessed type float flt_301E39E8;
// 3020AF18: using guessed type int dword_3020AF18;
// 3020AFC0: using guessed type int dword_3020AFC0;
// 3020AFE4: using guessed type float flt_3020AFE4;
// 3020B00C: using guessed type int dword_3020B00C;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 3020D380: using guessed type int dword_3020D380;
// 3029D568: using guessed type float flt_3029D568;

//----- (30033FD0) --------------------------------------------------------
int sub_30033FD0()
{
  int result; // eax

  result = dword_3020AF00 - dword_3020D294;
  if ( dword_3020AF00 - dword_3020D294 < 0 )
    dword_3020D294 = dword_3020AF00;
  if ( result < 100 )
    flt_3020D350 = flt_3020D350 - (double)(100 - result) * flt_3020D290 * 0.0099999998;
  return result;
}
// 3020AF00: using guessed type int dword_3020AF00;
// 3020D290: using guessed type float flt_3020D290;
// 3020D294: using guessed type int dword_3020D294;
// 3020D350: using guessed type float flt_3020D350;

//----- (30034020) --------------------------------------------------------
void sub_30034020()
{
  int i; // esi
  float *v1; // ecx
  double v2; // st7
  double v4; // st6
  unsigned __int8 v5; // c2
  unsigned __int8 v6; // c3
  double v7; // st6
  double v8; // st6
  double v9; // st6
  double v10; // st6
  int v11; // [esp+4h] [ebp-4h]
  float v12; // [esp+4h] [ebp-4h]

  for ( i = dword_3020AEFC; i > 0; i -= 5 )
  {
    v11 = 5;
    if ( i <= 5 )
      v11 = i;
    v1 = (float *)&dword_302108EC;
    v2 = (double)v11 * 0.001;
    do
    {
      v4 = *v1;
      if ( v6 | v5 )
      {
        if ( v4 == 0.0 )
          goto LABEL_28;
LABEL_9:
        if ( *v1 <= 0.0 )
          v7 = 1.0;
        else
          v7 = -1.0;
        if ( dword_3020AFC4 )
        {
          if ( flt_3020AFCC <= 0.5 )
            v8 = v7 * *(float *)(dword_3020D238 + 972);
          else
            v8 = v7 * *(float *)(dword_3020D238 + 908);
        }
        else
        {
          v8 = v7 * 2400.0;
        }
        *(v1 - 3) = v8 * v2 + *(v1 - 3);
        goto LABEL_18;
      }
      if ( v4 != 0.0 )
        goto LABEL_9;
LABEL_18:
      v9 = v2 * *(v1 - 3);
      if ( v9 * *v1 < 0.0 )
        v9 = v9 * 0.059999999;
      v10 = v9 + *v1;
      if ( v10 * *v1 < 0.0 )
      {
        *v1 = 0.0;
      }
      else
      {
        v12 = v10;
        *v1 = v10;
        if ( v12 != 0.0 )
        {
          if ( fabs(v12) <= 10.0 )
            goto LABEL_28;
          if ( v12 <= 0.0 )
            *v1 = -10.0;
          else
            *v1 = 10.0;
        }
      }
      *(v1 - 3) = 0.0;
LABEL_28:
      ++v1;
    }
    while ( (int)v1 < (int)&flt_302108F8 );
  }
}
// 30034065: variable 'v6' is possibly undefined
// 30034065: variable 'v5' is possibly undefined
// 3020AFC4: using guessed type int dword_3020AFC4;
// 3020AFCC: using guessed type float flt_3020AFCC;
// 3020D238: using guessed type int dword_3020D238;
// 302108EC: using guessed type int dword_302108EC;

//----- (30034180) --------------------------------------------------------
void sub_30034180()
{
  float v0; // edi
  float v1; // esi
  float v2; // edx
  double v4; // st7
  unsigned __int8 v5; // c0
  unsigned __int8 v6; // c2
  double v7; // st7
  float v8; // [esp+Ch] [ebp-4Ch] BYREF
  float v9; // [esp+10h] [ebp-48h]
  float v10; // [esp+14h] [ebp-44h]
  float v11; // [esp+18h] [ebp-40h]
  float v12; // [esp+1Ch] [ebp-3Ch]
  float v13; // [esp+20h] [ebp-38h]
  float v14; // [esp+24h] [ebp-34h]
  float v15; // [esp+28h] [ebp-30h]
  float *v16; // [esp+2Ch] [ebp-2Ch]
  int v17; // [esp+30h] [ebp-28h]
  float v18; // [esp+34h] [ebp-24h] BYREF
  float v19; // [esp+38h] [ebp-20h]
  float v20; // [esp+3Ch] [ebp-1Ch]
  int *v21; // [esp+40h] [ebp-18h] BYREF
  int v22; // [esp+44h] [ebp-14h]
  int v23; // [esp+48h] [ebp-10h]
  int v24; // [esp+4Ch] [ebp-Ch]
  int v25; // [esp+50h] [ebp-8h]
  float v26; // [esp+54h] [ebp-4h]

  if ( *(_DWORD *)(dword_301E5F24 + 16) != 5 )
  {
    v21 = &dword_3020AF14;
    v22 = dword_3021075C ? dword_3021075C - dword_3020CFDC : 0;
    v0 = dword_302107A4;
    v23 = dword_3020AF00 - dword_3020CFDC;
    v24 = dword_30210798;
    v20 = 0.0;
    v19 = 0.0;
    v18 = 0.0;
    v25 = dword_3021079C;
    v26 = dword_302107A4;
    sub_30013BC0((float *)&v21, &v18);
    sub_30013CD0((float *)&v21, &v18);
    *(float *)&dword_3020D380 = *(float *)&dword_3020D380 + v18;
    flt_3020D384 = flt_3020D384 + v19;
    *(float *)&dword_3020D388 = *(float *)&dword_3020D388 + v20;
    flt_3020D350 = flt_3020D350 + flt_3020AFE4;
    if ( (dword_3020AF94 & 0xC000) == 0 )
    {
      v1 = flt_302107A0;
      v8 = sub_30012F00(&dword_3020AF14, flt_302107A0, v0, dword_301A1908);
      flt_3020D350 = flt_3020D350 + v8;
      v15 = sub_30012F80(&dword_3020AF14, v1, v0, v2);
      v14 = flt_3020D384 * 0.017453292;
      v9 = cos(v14);
      v10 = sin(v14);
      v14 = *(float *)&dword_3020D380 * 0.017453292;
      v13 = cos(v14);
      v12 = sin(v14);
      v16 = &v8;
      v14 = *(float *)&dword_3020D388 * 0.017453292;
      v8 = cos(v14);
      v11 = sin(v14);
      v14 = v11 * v12;
      v17 = dword_3020AF00 - dword_3020D29C;
      v18 = v8 * v10 - v14 * v9;
      v19 = v8 * v9 * -1.0 - v14 * v10;
      v20 = v11 * v13 * -1.0;
      flt_3020D348 = v18 * v15 + flt_3020D348;
      flt_3020D34C = v19 * v15 + flt_3020D34C;
      flt_3020D350 = v20 * v15 + flt_3020D350;
      v8 = (float)(dword_3020AF00 - dword_3020D29C);
      if ( v8 < 0.0 )
        dword_3020D29C = dword_3020AF00 - 450;
      v4 = v8;
      if ( v5 | v6 )
      {
        v7 = v4 / 150.0;
      }
      else
      {
        if ( v4 >= 450.0 )
          goto LABEL_13;
        v8 = v8 - 150.0;
        v7 = 1.0 - v8 / 300.0;
      }
      v15 = v7;
      flt_3020D350 = flt_3020D298 * v15 + flt_3020D350;
LABEL_13:
      sub_30033FD0();
      sub_30040DF0(&flt_3020D348, flt_3020D384, flt_3020AF54, 16.0, 20.0);
      v15 = *(float *)&dword_3020AF30 + 8.0;
      if ( flt_3020D350 < (double)v15 )
        flt_3020D350 = v15;
      return;
    }
  }
}
// 3003428F: variable 'v2' is possibly undefined
// 30034411: variable 'v5' is possibly undefined
// 30034411: variable 'v6' is possibly undefined
// 301E5F24: using guessed type int dword_301E5F24;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020AF30: using guessed type int dword_3020AF30;
// 3020AF94: using guessed type int dword_3020AF94;
// 3020AFE4: using guessed type float flt_3020AFE4;
// 3020CFDC: using guessed type int dword_3020CFDC;
// 3020D298: using guessed type float flt_3020D298;
// 3020D29C: using guessed type int dword_3020D29C;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 3020D380: using guessed type int dword_3020D380;
// 3020D388: using guessed type int dword_3020D388;
// 3021075C: using guessed type int dword_3021075C;
// 30210798: using guessed type int dword_30210798;
// 3021079C: using guessed type int dword_3021079C;

//----- (300344C0) --------------------------------------------------------
double sub_300344C0()
{
  double result; // st7
  double v1; // st6
  double v2; // st6
  double v3; // st6

  if ( dword_3020AF18 == 5 )
  {
    result = 90.0;
    goto LABEL_18;
  }
  result = flt_3029CA28;
  if ( flt_3029CA28 >= 80.0 )
  {
    if ( result > 160.0 )
      result = 160.0;
  }
  else
  {
    result = 80.0;
  }
  if ( *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * dword_3020AFC4) + 716) )
  {
    if ( flt_3020AFCC == 1.0 )
    {
      result = *(float *)(dword_3020D238 + 536);
      goto LABEL_18;
    }
    if ( flt_3020AFCC != 0.0 )
    {
      if ( dword_3020D20C )
      {
        v1 = flt_3020AFCC - (1.0 - *(float *)(dword_3020D238 + 540));
        if ( v1 <= 0.0 )
          goto LABEL_18;
        v2 = v1 / *(float *)(dword_3020D238 + 540);
      }
      else
      {
        v3 = flt_3020AFCC - (1.0 - *(float *)(dword_3020D238 + 544));
        if ( v3 <= 0.0 )
          goto LABEL_18;
        v2 = v3 / *(float *)(dword_3020D238 + 544);
      }
      if ( v2 > 0.0 )
        result = result - (result - *(float *)(dword_3020D238 + 536)) * v2;
    }
  }
LABEL_18:
  if ( (dword_3020AF94 & 0xC000) != 0 )
    result = 55.0;
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3020AF18: using guessed type int dword_3020AF18;
// 3020AF94: using guessed type int dword_3020AF94;
// 3020AFC4: using guessed type int dword_3020AFC4;
// 3020AFCC: using guessed type float flt_3020AFCC;
// 3020D20C: using guessed type int dword_3020D20C;
// 3020D238: using guessed type int dword_3020D238;
// 3029CA28: using guessed type float flt_3029CA28;

//----- (30034690) --------------------------------------------------------
int sub_30034690()
{
  int result; // eax

  dword_3020D330 = 0;
  dword_3020D334 = 0;
  dword_3020D338 = dword_301E5F14 + 2;
  dword_3020D33C = dword_301E5F14 + 2;
  LODWORD(flt_3020D348) = dword_3020AF28;
  result = dword_301E5F10 - 1;
  LODWORD(flt_3020D34C) = dword_3020AF2C;
  flt_3020D340 = atan2((double)(dword_301E5F14 + 2), (double)dword_301E5F14) * 114.5915590261646;
  flt_3020D344 = flt_3020D340;
  flt_3020D350 = flt_3020AFE4 + *(float *)&dword_3020AF30;
  switch ( dword_301E5F10 )
  {
    case 1:
      flt_3020D358 = 0.0;
      flt_3020D35C = 1.0;
      flt_3020D360 = 0.0;
      flt_3020D364 = 1.0;
      dword_3020D36C = -1082130432;
      dword_3020D374 = 0;
      goto LABEL_9;
    case 2:
      flt_3020D358 = 0.0;
      flt_3020D35C = -1.0;
      flt_3020D360 = 0.0;
      flt_3020D364 = 1.0;
      dword_3020D36C = 1065353216;
      dword_3020D374 = 0;
      goto LABEL_9;
    case 3:
      flt_3020D354 = -1.0;
      flt_3020D358 = 0.0;
      flt_3020D35C = 0.0;
      flt_3020D360 = 0.0;
      flt_3020D364 = -1.0;
      dword_3020D36C = 0;
      dword_3020D374 = 1065353216;
      goto LABEL_10;
    case 4:
      flt_3020D354 = 1.0;
      flt_3020D358 = 0.0;
      flt_3020D35C = 0.0;
      flt_3020D360 = 0.0;
      flt_3020D364 = 1.0;
      dword_3020D36C = 0;
      dword_3020D374 = 1065353216;
      goto LABEL_10;
    case 5:
      flt_3020D358 = -1.0;
      flt_3020D360 = 1.0;
      goto LABEL_8;
    case 6:
      flt_3020D358 = 1.0;
      flt_3020D360 = -1.0;
LABEL_8:
      flt_3020D35C = 0.0;
      flt_3020D364 = 0.0;
      dword_3020D36C = 0;
      dword_3020D374 = 1065353216;
LABEL_9:
      flt_3020D354 = 0.0;
LABEL_10:
      flt_3020D368 = 0.0;
      dword_3020D370 = 0;
      break;
    default:
      return result;
  }
  return result;
}
// 301E5F10: using guessed type int dword_301E5F10;
// 301E5F14: using guessed type int dword_301E5F14;
// 3020AF28: using guessed type int dword_3020AF28;
// 3020AF2C: using guessed type int dword_3020AF2C;
// 3020AF30: using guessed type int dword_3020AF30;
// 3020AFE4: using guessed type float flt_3020AFE4;
// 3020D330: using guessed type int dword_3020D330;
// 3020D334: using guessed type int dword_3020D334;
// 3020D338: using guessed type int dword_3020D338;
// 3020D33C: using guessed type int dword_3020D33C;
// 3020D340: using guessed type float flt_3020D340;
// 3020D344: using guessed type float flt_3020D344;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 3020D354: using guessed type float flt_3020D354;
// 3020D358: using guessed type float flt_3020D358;
// 3020D35C: using guessed type float flt_3020D35C;
// 3020D360: using guessed type float flt_3020D360;
// 3020D364: using guessed type float flt_3020D364;
// 3020D368: using guessed type float flt_3020D368;
// 3020D36C: using guessed type int dword_3020D36C;
// 3020D370: using guessed type int dword_3020D370;
// 3020D374: using guessed type int dword_3020D374;

//----- (300348C0) --------------------------------------------------------
int sub_300348C0()
{
  int result; // eax
  float *v1; // esi
  float v2; // edx
  float v3; // edx
  float v4; // edx
  float *v5; // edx
  int v6; // ecx
  float *v7; // edx
  int v8; // ecx
  bool v9; // c0
  bool v10; // c3
  double v11; // st7
  int v12; // edi
  double v13; // st7
  int v14; // eax
  int v15; // esi
  float v16; // [esp+0h] [ebp-68h]
  float v17; // [esp+0h] [ebp-68h]
  float v18; // [esp+0h] [ebp-68h]
  float v19; // [esp+0h] [ebp-68h]
  float v20; // [esp+0h] [ebp-68h]
  float v21; // [esp+0h] [ebp-68h]
  float v22[2]; // [esp+4h] [ebp-64h]
  float v23[4]; // [esp+Ch] [ebp-5Ch]
  float v24; // [esp+1Ch] [ebp-4Ch]
  float v25; // [esp+20h] [ebp-48h]
  float v26; // [esp+24h] [ebp-44h]
  char v27[48]; // [esp+28h] [ebp-40h] BYREF
  float v28; // [esp+58h] [ebp-10h]
  float v29; // [esp+5Ch] [ebp-Ch]
  float v30; // [esp+60h] [ebp-8h]

  result = dword_3020AF94;
  if ( (dword_3020AF94 & 0xC000) == 0 )
    return result;
  if ( dword_3020B28C == 1023 )
    return result;
  result = dword_3020B288;
  if ( !dword_3020B288 )
    return result;
  v1 = (float *)((char *)&unk_30211940 + 552 * dword_3020B28C);
  result = dword_30076898(163);
  if ( !result )
    return result;
  if ( !sub_3001D540((int)v1, (int)v27) )
    sub_30021B10(1, (char *)&byte_3006445C);
  sub_3001E490((int)v1);
  v22[0] = sub_3003D9B0(v1[53], v1[113], dword_3020AEF8);
  v22[1] = sub_3003D9B0(v1[23], v1[83], v2);
  v23[0] = sub_3003D9B0(v1[24], v1[84], v3);
  v23[1] = sub_3003D9B0(v1[25], v1[85], v4);
  v5 = v1 + 129;
  v6 = 0;
  do
  {
    v16 = sub_3003DA20(*(float *)((char *)&dword_3020D380 + v6), *v5);
    v9 = v16 < (double)*(float *)((char *)v22 + v8);
    v10 = v16 == *(float *)((char *)v22 + v8);
    *(float *)((char *)&v23[2] + v8) = v16;
    if ( v9 || v10 )
    {
      if ( v16 >= (double)*(float *)((char *)v23 + v8) )
        goto LABEL_13;
      v11 = *v7 + *(float *)((char *)v23 + v8);
    }
    else
    {
      v11 = *(float *)((char *)v22 + v8) + *v7;
    }
    *(float *)((char *)&dword_3020D380 + v8) = v11;
LABEL_13:
    v6 = v8 + 4;
    v5 = v7 + 1;
  }
  while ( v6 < 8 );
  if ( !dword_3020AF10 && dword_3020B288 == 2 )
  {
    v12 = *(_DWORD *)(dword_300F0FB4 + 4 * *((_DWORD *)v1 + 50));
    v13 = (double)rand();
    v14 = *((_DWORD *)v1 + 50);
    v17 = v13;
    *(float *)&dword_3020D380 = (v17 / 32768.0 + v17 / 32768.0 - 1.0) * *(float *)(v12 + 1056)
                              + *(float *)&dword_3020D380;
    v15 = *(_DWORD *)(dword_300F0FB4 + 4 * v14);
    v18 = (float)rand();
    flt_3020D384 = (v18 / 32768.0 + v18 / 32768.0 - 1.0) * *(float *)(v15 + 1052) + flt_3020D384;
  }
  v19 = (float)dword_3020AF5C;
  v24 = v19 * 0.0054931641;
  v20 = (float)dword_3020AF60;
  v25 = v20 * 0.0054931641;
  v21 = (float)dword_3020AF64;
  v26 = v21 * 0.0054931641;
  v24 = *(float *)&dword_3020D380 - v24;
  v25 = flt_3020D384 - v25;
  v26 = *(float *)&dword_3020D388 - v26;
  v24 = sub_3003DA20(v24, flt_302108F8);
  v25 = sub_3003DA20(v25, flt_302108FC);
  v26 = sub_3003DA20(v26, dword_30210900);
  dword_30076898(242);
  result = LODWORD(v28);
  v30 = v30 - flt_3020AFE4;
  flt_3020D348 = v28;
  flt_3020D34C = v29;
  flt_3020D350 = v30;
  return result;
}
// 3003496E: variable 'v2' is possibly undefined
// 30034983: variable 'v3' is possibly undefined
// 30034998: variable 'v4' is possibly undefined
// 300349CB: variable 'v8' is possibly undefined
// 300349E1: variable 'v7' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3020AF10: using guessed type int dword_3020AF10;
// 3020AF5C: using guessed type int dword_3020AF5C;
// 3020AF60: using guessed type int dword_3020AF60;
// 3020AF64: using guessed type int dword_3020AF64;
// 3020AF94: using guessed type int dword_3020AF94;
// 3020AFE4: using guessed type float flt_3020AFE4;
// 3020B288: using guessed type int dword_3020B288;
// 3020B28C: using guessed type int dword_3020B28C;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 3020D380: using guessed type int dword_3020D380;
// 3020D388: using guessed type int dword_3020D388;

//----- (30034BB0) --------------------------------------------------------
int __usercall sub_30034BB0@<eax>(float a1@<esi>)
{
  double v1; // st7
  long double v2; // st6
  int v3; // esi
  int v4; // eax
  long double v5; // st4
  int v6; // eax
  int result; // eax
  float v8; // eax
  float v9; // [esp+4h] [ebp-10h]
  float v10; // [esp+4h] [ebp-10h]
  float v11; // [esp+4h] [ebp-10h]
  float v12; // [esp+4h] [ebp-10h]
  float v13[2]; // [esp+8h] [ebp-Ch] BYREF
  float v14; // [esp+10h] [ebp-4h]

  memset(&dword_3020D330, 0, 0x50u);
  if ( dword_301E5F10 )
  {
    sub_30034690();
    result = 0;
  }
  else
  {
    sub_30033BB0();
    if ( dword_3021099C )
      sub_30021A30("Cinimatic Cameras are not available in the MP exe.\n");
    if ( dword_3020AF18 == 5 )
    {
      LODWORD(flt_3020D348) = dword_3020AF28;
      LODWORD(flt_3020D34C) = dword_3020AF2C;
      LODWORD(flt_3020D350) = dword_3020AF30;
      dword_3020D380 = dword_3020AFD4;
      LODWORD(flt_3020D384) = dword_3020AFD8;
      dword_3020D388 = dword_3020AFDC;
    }
    else
    {
      v9 = (float)(unsigned __int8)dword_3020AF1C;
      flt_302107A0 = v9 / 255.0 * 6.2831855 + 6.2831855;
      if ( (dword_3020AF20 & 0x10) != 0 )
      {
        if ( dword_3020AF00 - dword_3020AF78 >= 500 )
          v8 = *(float *)&dword_3020AF3C;
        else
          v8 = 0.0;
      }
      else
      {
        v10 = sqrt(flt_3020AF38 * flt_3020AF38 + flt_3020AF34 * flt_3020AF34);
        v8 = v10;
      }
      dword_302107A4 = v8;
      LODWORD(flt_3020D34C) = dword_3020AF2C;
      LODWORD(flt_3020D384) = dword_3020AFD8;
      LODWORD(flt_3020D348) = dword_3020AF28;
      LODWORD(flt_3020D350) = dword_3020AF30;
      dword_3020D380 = dword_3020AFD4;
      dword_3020D388 = dword_3020AFDC;
      if ( flt_301E5CC8 > 0.0 )
      {
        v11 = (float)(dword_3020AF00 - dword_3020D23C);
        v12 = (flt_301E5CC8 - v11) / flt_301E5CC8;
        if ( v12 <= 0.0 || v12 >= 1.0 )
        {
          dword_3020D23C = 0;
        }
        else
        {
          flt_3020D348 = *(float *)&dword_3020D240 * v12 + flt_3020D348;
          flt_3020D34C = *(float *)&dword_3020D244 * v12 + flt_3020D34C;
          flt_3020D350 = *(float *)&dword_3020D248 * v12 + flt_3020D350;
        }
      }
      sub_300348C0();
      if ( dword_3020AF10 )
        sub_30033CB0();
      else
        sub_30034180();
    }
    sub_3003BEA0((float *)&dword_3020D380, (float *)&dword_3020D36C, v13, &flt_3020D354);
    flt_3020D360 = 0.0 - v13[0];
    flt_3020D364 = 0.0 - v13[1];
    flt_3020D368 = 0.0 - v14;
    v14 = a1;
    v1 = sub_300344C0();
    v2 = atan2((double)dword_3020D33C, (double)dword_3020D338 / tan(v1 * 0.0087266462)) * 114.59155;
    if ( sub_3002A4B0((int)&flt_3020D348, -1, 32) )
    {
      v3 = 1;
      v4 = dword_3020D37C | 0x20;
      v5 = sin((double)dword_3020AF00 * 0.0025132743);
      v1 = v1 + v5;
      v2 = v2 - v5;
    }
    else
    {
      v4 = dword_3020D37C & 0xFFFFFFDF;
      v3 = 0;
    }
    dword_3020D37C = v4;
    if ( sub_3002A4B0((int)&flt_3020D348, -1, 32) )
      v6 = dword_3020D37C | 0x20;
    else
      v6 = dword_3020D37C & 0xFFFFFFDF;
    dword_3020D37C = v6;
    flt_3020D340 = v1;
    result = v3;
    flt_3020D344 = v2;
    flt_3020F3A8 = v1 / flt_3029CA28;
  }
  return result;
}
// 30034BB0: could not find valid save-restore pair for esi
// 300628EC: using guessed type float flt_300628EC;
// 301E5CC8: using guessed type float flt_301E5CC8;
// 301E5F10: using guessed type int dword_301E5F10;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF10: using guessed type int dword_3020AF10;
// 3020AF18: using guessed type int dword_3020AF18;
// 3020AF1C: using guessed type int dword_3020AF1C;
// 3020AF20: using guessed type int dword_3020AF20;
// 3020AF28: using guessed type int dword_3020AF28;
// 3020AF2C: using guessed type int dword_3020AF2C;
// 3020AF30: using guessed type int dword_3020AF30;
// 3020AF34: using guessed type float flt_3020AF34;
// 3020AF38: using guessed type float flt_3020AF38;
// 3020AF3C: using guessed type int dword_3020AF3C;
// 3020AF78: using guessed type int dword_3020AF78;
// 3020AFD4: using guessed type int dword_3020AFD4;
// 3020AFD8: using guessed type int dword_3020AFD8;
// 3020AFDC: using guessed type int dword_3020AFDC;
// 3020D23C: using guessed type int dword_3020D23C;
// 3020D240: using guessed type int dword_3020D240;
// 3020D244: using guessed type int dword_3020D244;
// 3020D248: using guessed type int dword_3020D248;
// 3020D330: using guessed type int dword_3020D330;
// 3020D338: using guessed type int dword_3020D338;
// 3020D33C: using guessed type int dword_3020D33C;
// 3020D340: using guessed type float flt_3020D340;
// 3020D344: using guessed type float flt_3020D344;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 3020D354: using guessed type float flt_3020D354;
// 3020D360: using guessed type float flt_3020D360;
// 3020D364: using guessed type float flt_3020D364;
// 3020D368: using guessed type float flt_3020D368;
// 3020D36C: using guessed type int dword_3020D36C;
// 3020D37C: using guessed type int dword_3020D37C;
// 3020D380: using guessed type int dword_3020D380;
// 3020D388: using guessed type int dword_3020D388;
// 3020F3A8: using guessed type float flt_3020F3A8;
// 3021099C: using guessed type int dword_3021099C;
// 3029CA28: using guessed type float flt_3029CA28;

//----- (30034E40) --------------------------------------------------------
const char *sub_30034E40()
{
  const char *result; // eax
  char *v1; // eax
  const char *v2; // esi
  char *v3; // eax
  const char *v4; // esi
  char *v5; // eax
  const char *v6; // esi
  char *v7; // eax
  const char *v8; // esi
  char *v9; // eax
  char *v10; // eax
  const char *v11; // esi
  char *v12; // eax
  const char *v13; // esi
  char *v14; // eax
  const char *v15; // esi
  char *v16; // eax
  char *v17; // eax
  double v18; // st7
  char *v19[6]; // [esp+0h] [ebp-68h] BYREF
  char v20[80]; // [esp+18h] [ebp-50h] BYREF

  result = &byte_301D1B20[dword_301CFB48];
  v19[0] = &byte_301D1B20[dword_301CFB48];
  if ( &byte_301D1B20[dword_301CFB48] )
  {
    result = (const char *)strlen(result);
    v19[1] = (char *)result;
    if ( result )
    {
      qmemcpy(v20, &dword_3020D330, sizeof(v20));
      if ( !dword_301DF0CC )
      {
        dword_3020D37C = dword_3020D37C & 0xFFFFFFEF | 8;
        goto LABEL_40;
      }
      v1 = sub_3003F690(v19);
      v2 = v1;
      if ( !v1 || !*v1 )
        sub_30021A30("CG_DrawSkyBoxPortal: error parsing skybox configstring\n");
      flt_3020D348 = atof(v2);
      v3 = sub_3003F690(v19);
      v4 = v3;
      if ( !v3 || !*v3 )
        sub_30021A30("CG_DrawSkyBoxPortal: error parsing skybox configstring\n");
      flt_3020D34C = atof(v4);
      v5 = sub_3003F690(v19);
      v6 = v5;
      if ( !v5 || !*v5 )
        sub_30021A30("CG_DrawSkyBoxPortal: error parsing skybox configstring\n");
      flt_3020D350 = atof(v6);
      v7 = sub_3003F690(v19);
      v8 = v7;
      if ( !v7 || !*v7 )
        sub_30021A30("CG_DrawSkyBoxPortal: error parsing skybox configstring\n");
      j__atol(v8);
      v9 = sub_3003F690(v19);
      if ( !v9 || !*v9 )
      {
        sub_30021A30("CG_DrawSkyBoxPortal: error parsing skybox configstring.  No fog state\n");
        goto LABEL_38;
      }
      if ( j__atol(v9) )
      {
        v10 = sub_3003F690(v19);
        v11 = v10;
        if ( !v10 || !*v10 )
          sub_30021A30("CG_DrawSkyBoxPortal: error parsing skybox configstring.  No fog[0]\n");
        *(float *)&v19[2] = atof(v11);
        v12 = sub_3003F690(v19);
        v13 = v12;
        if ( !v12 || !*v12 )
          sub_30021A30("CG_DrawSkyBoxPortal: error parsing skybox configstring.  No fog[1]\n");
        *(float *)&v19[3] = atof(v13);
        v14 = sub_3003F690(v19);
        v15 = v14;
        if ( !v14 || !*v14 )
          sub_30021A30("CG_DrawSkyBoxPortal: error parsing skybox configstring.  No fog[2]\n");
        *(float *)&v19[4] = atof(v15);
        v16 = sub_3003F690(v19);
        if ( v16 && *v16 )
          j__atol(v16);
        v17 = sub_3003F690(v19);
        if ( v17 )
        {
          if ( *v17 )
            j__atol(v17);
        }
      }
      else if ( dword_300F0F90 )
      {
LABEL_38:
        v18 = sub_300344C0();
        flt_3020D340 = v18;
        dword_3020D37C |= 0x18u;
        flt_3020D344 = atan2((double)dword_3020D33C, (double)dword_3020D338 / tan(v18 * 0.0087266462)) * 114.59155;
LABEL_40:
        dword_3020D378 = dword_3020AF00;
        result = (const char *)dword_30076898(69);
        qmemcpy(&dword_3020D330, v20, 0x50u);
        return result;
      }
      sub_30032770();
      dword_300F0F90 = 1;
      goto LABEL_38;
    }
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0F90: using guessed type int dword_300F0F90;
// 301CFB48: using guessed type int dword_301CFB48;
// 301DF0CC: using guessed type int dword_301DF0CC;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020D330: using guessed type int dword_3020D330;
// 3020D338: using guessed type int dword_3020D338;
// 3020D33C: using guessed type int dword_3020D33C;
// 3020D340: using guessed type float flt_3020D340;
// 3020D344: using guessed type float flt_3020D344;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 3020D378: using guessed type int dword_3020D378;
// 3020D37C: using guessed type int dword_3020D37C;

//----- (30035130) --------------------------------------------------------
int sub_30035130()
{
  int result; // eax

  result = dword_302108DC;
  if ( dword_302108DC >= 1 && dword_3020AF00 > dword_302108DC + dword_302108D8 )
  {
    dword_30076898(223);
    result = dword_30076898(228);
    dword_302108D8 = dword_3020AF00;
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AF00: using guessed type int dword_3020AF00;
// 302108D8: using guessed type int dword_302108D8;
// 302108DC: using guessed type int dword_302108DC;

//----- (30035180) --------------------------------------------------------
int __usercall sub_30035180@<eax>(int a1@<edx>, int a2@<ecx>, int a3, float a4, int a5, int a6)
{
  int v7; // ecx
  void **v8; // esi
  int v9; // edi
  const char *v10; // eax
  int v11; // esi
  int v13; // eax
  int v14; // eax
  float *v15; // edi
  _DWORD *v16; // ebx
  int v17; // esi
  bool v18; // cc
  char v19; // al
  const char *v20; // eax
  int v21; // esi
  float v22; // [esp+0h] [ebp-A8h]
  float v23; // [esp+0h] [ebp-A8h]
  float v24; // [esp+4h] [ebp-A4h]
  float v25; // [esp+4h] [ebp-A4h]
  float v26; // [esp+8h] [ebp-A0h]
  float v27; // [esp+8h] [ebp-A0h]
  float v28; // [esp+Ch] [ebp-9Ch]
  float v29; // [esp+Ch] [ebp-9Ch]
  int v30; // [esp+44h] [ebp-64h]
  char String[68]; // [esp+5Ch] [ebp-4Ch] BYREF
  unsigned int v32; // [esp+A0h] [ebp-8h]
  unsigned int retaddr; // [esp+A8h] [ebp+0h]

  v32 = retaddr ^ dword_300705C0;
  if ( LODWORD(a4) != 2 )
    dword_3020AF04 = dword_3020AF00;
  dword_301E5F08 = a1;
  dword_3020AF00 = a3;
  dword_300F2390 = a3;
  dword_301E5F10 = a5;
  dword_301E5F14 = a6;
  if ( LODWORD(a4) == 2 )
  {
    v7 = dword_3020AEFC;
  }
  else
  {
    v7 = a3 - dword_3020AF04;
    dword_3020AEFC = a3 - dword_3020AF04;
    if ( a3 - dword_3020AF04 < 0 )
    {
      v7 = 0;
      dword_3020AEFC = 0;
      dword_3020AF04 = a3;
    }
    dword_301A1D80[dword_301A1F80++ & 0x7F] = a3 - dword_301E5F1C;
  }
  dword_300F2398 = v7;
  v8 = &off_300769A0;
  v9 = 173;
  do
  {
    dword_30076898(8);
    v8 += 4;
    --v9;
  }
  while ( v9 );
  if ( byte_3020F3AC )
  {
    if ( !a2 || dword_301E5F20 || dword_300F0FA0 )
      return sub_30052A2E(retaddr ^ v32);
    dword_300F0FA0 = 1;
    if ( byte_301DD4B0 )
      dword_30076898(9);
    if ( byte_301E5730 )
      dword_30076898(9);
    if ( dword_301AA3CC )
      dword_30076898(9);
    v10 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]], "mapname");
    if ( !v10 || !*v10 || (sub_300403F0("levelshots/%s.tga", v10), sub_30020CA0(0), (v11 = dword_30076898(88)) == 0) )
    {
      sub_30020CA0(0);
      v11 = dword_30076898(88);
    }
    dword_30076898(72);
    v28 = flt_301D5A48 * 480.0;
    v26 = flt_301D5A44 * 640.0;
    v24 = flt_301D5A48 * 0.0;
    v22 = flt_301D5A44 * 0.0;
    sub_30032820(LODWORD(v22), LODWORD(v24), LODWORD(v26), LODWORD(v28), 0, 0, 1065353216, 1065353216, v11);
    dword_30076898(11);
    if ( j__atol(String) <= 0 )
      goto LABEL_70;
LABEL_69:
    dword_30076898(63);
    sub_3001A260();
LABEL_70:
    dword_30076898(25);
    --dword_300F0FA0;
    return sub_30052A2E(retaddr ^ v32);
  }
  dword_30076898(60);
  sub_300319E0();
  if ( a2 )
  {
    if ( dword_301E5F20 )
    {
      if ( (*(_BYTE *)dword_301E5F20 & 2) == 0 )
      {
        if ( byte_301DD4B0 )
        {
          if ( byte_301E5730 )
          {
            dword_30076898(83);
            dword_30076898(84);
            if ( v30 > *(_DWORD *)(dword_301E5F20 + 12) && v30 <= dword_3020AF00 )
            {
              sub_30020CA0(1);
              return sub_30052A2E(retaddr ^ v32);
            }
          }
        }
        if ( dword_301AA3CC )
          dword_30076898(9);
        if ( !dword_301E332C )
        {
          ++*(_DWORD *)dword_301E5F00;
          sub_3002ADE0();
          v13 = *(_DWORD *)(dword_301E5F20 + 1000);
          if ( v13 )
          {
            v16 = (_DWORD *)((char *)&unk_301D6584 + 124 * v13);
            dword_30211370 = (int)v16;
            v14 = *(_DWORD *)(dword_301E5F20 + 1004);
            dword_30211374 = v14;
            v15 = *(float **)(dword_301E5F20 + 1008);
          }
          else
          {
            v14 = dword_30211390;
            v15 = (float *)dword_30211394;
            v16 = &unk_301D6584;
            dword_30211370 = (int)&unk_301D6584;
            dword_30211374 = dword_30211390;
          }
          dword_30211378 = (int)v15;
          sub_30030EC0(v14, v16, v15);
          v17 = 1;
          if ( dword_301DC72C || (v18 = *(_DWORD *)(dword_301E5F24 + 16) < 6, dword_3020AF10 = 0, !v18) )
            dword_3020AF10 = 1;
          if ( (*(_DWORD *)(dword_301E5F24 + 24) & 0x20000) != 0 )
          {
            sub_30034020();
          }
          else
          {
            dword_302108E8 = 0;
            dword_302108E4 = 0;
            dword_302108E0 = 0;
            dword_302108F4 = 0;
            dword_302108F0 = 0;
            dword_302108EC = 0;
          }
          sub_30034BB0(COERCE_FLOAT(1));
          if ( !dword_301E5F10 )
          {
            sub_30018F90();
            sub_3003DE80(&flt_3020D354, (float *)&dword_3020D380);
            sub_3002FE90();
          }
          sub_30034E40();
          dword_30076898(235);
          dword_30076898(236);
          sub_30035130();
          sub_3001CF80();
          sub_30024C90();
          sub_30021450();
          sub_30038B60((int)&dword_3020AF14);
          sub_3002EB10();
          dword_30076898(231);
          dword_3020D378 = dword_3020AF00;
          if ( *(int *)dword_301CF58C < 0 || *(int *)dword_301CF58C > dword_300F0FB0 )
          {
            sub_300219D0(
              "WARNING: Invalid cg_weaponSelect setting %i (out of range 0 - %i)\n",
              *(_DWORD *)dword_301CF58C,
              dword_300F0FB0);
            do
            {
              v19 = byte_3020B228[v17];
              if ( v19 )
              {
                sub_300403F0("%i", v19);
                dword_30076898(9);
              }
              ++v17;
            }
            while ( v17 <= 5 );
            dword_30076898(9);
          }
          dword_30076898(86);
          dword_30076898(85);
          dword_30076898(209);
          sub_30019B10(SLODWORD(a4));
          dword_30076898(210);
          dword_30076898(211);
          if ( dword_301CF6AC )
          {
            sub_300219D0("cg.clientFrame:%i\n", *(_DWORD *)dword_301E5F00);
            return sub_30052A2E(retaddr ^ v32);
          }
        }
      }
    }
    else if ( !dword_300F0FA0 )
    {
      dword_300F0FA0 = 1;
      if ( byte_301DD4B0 )
        dword_30076898(9);
      if ( byte_301E5730 )
        dword_30076898(9);
      if ( dword_301AA3CC )
        dword_30076898(9);
      v20 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]], "mapname");
      if ( !v20 || !*v20 || (sub_300403F0("levelshots/%s.tga", v20), sub_30020CA0(0), (v21 = dword_30076898(88)) == 0) )
      {
        sub_30020CA0(0);
        v21 = dword_30076898(88);
      }
      dword_30076898(72);
      v29 = flt_301D5A48 * 480.0;
      v27 = flt_301D5A44 * 640.0;
      v25 = flt_301D5A48 * 0.0;
      v23 = flt_301D5A44 * 0.0;
      sub_30032820(LODWORD(v23), LODWORD(v25), LODWORD(v27), LODWORD(v29), 0, 0, 1065353216, 1065353216, v21);
      dword_30076898(11);
      if ( j__atol(String) <= 0 )
        goto LABEL_70;
      goto LABEL_69;
    }
  }
  return sub_30052A2E(retaddr ^ v32);
}
// 300354BA: variable 'v30' is possibly undefined
// 30032820: using guessed type double __cdecl sub_30032820(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300769A0: using guessed type void *off_300769A0;
// 300F0FA0: using guessed type int dword_300F0FA0;
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F2390: using guessed type int dword_300F2390;
// 300F2398: using guessed type int dword_300F2398;
// 301A1F80: using guessed type int dword_301A1F80;
// 301AA3CC: using guessed type int dword_301AA3CC;
// 301CF6AC: using guessed type int dword_301CF6AC;
// 301CFB20: using guessed type int dword_301CFB20[];
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301DC72C: using guessed type int dword_301DC72C;
// 301DD4B0: using guessed type char byte_301DD4B0;
// 301E332C: using guessed type int dword_301E332C;
// 301E5730: using guessed type char byte_301E5730;
// 301E5F08: using guessed type int dword_301E5F08;
// 301E5F10: using guessed type int dword_301E5F10;
// 301E5F14: using guessed type int dword_301E5F14;
// 301E5F1C: using guessed type int dword_301E5F1C;
// 301E5F20: using guessed type int dword_301E5F20;
// 301E5F24: using guessed type int dword_301E5F24;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF04: using guessed type int dword_3020AF04;
// 3020AF10: using guessed type int dword_3020AF10;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 3020D354: using guessed type float flt_3020D354;
// 3020D378: using guessed type int dword_3020D378;
// 3020D380: using guessed type int dword_3020D380;
// 3020F3A8: using guessed type float flt_3020F3A8;
// 302108E0: using guessed type int dword_302108E0;
// 302108E4: using guessed type int dword_302108E4;
// 302108E8: using guessed type int dword_302108E8;
// 302108EC: using guessed type int dword_302108EC;
// 302108F0: using guessed type int dword_302108F0;
// 302108F4: using guessed type int dword_302108F4;
// 30211370: using guessed type int dword_30211370;
// 30211374: using guessed type int dword_30211374;
// 30211378: using guessed type int dword_30211378;
// 30211380: using guessed type int dword_30211380;
// 30211390: using guessed type int dword_30211390;
// 30211394: using guessed type int dword_30211394;

//----- (30035A70) --------------------------------------------------------
int __usercall sub_30035A70@<eax>(int a1@<eax>)
{
  int v1; // esi
  char *v2; // edi
  int v3; // ebp
  int result; // eax

  v1 = 1;
  v2 = (char *)&unk_301AA4E0 + 408 * a1 + 8;
  v3 = 18;
  do
  {
    result = dword_30076898(141);
    ++v1;
    v2 += 4;
    --v3;
  }
  while ( v3 );
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30035B00) --------------------------------------------------------
int sub_30035B00()
{
  dword_30076898(141);
  dword_30076898(141);
  dword_30076898(146);
  return dword_30076898(146);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 3020AFCC: using guessed type float flt_3020AFCC;

//----- (30035BF0) --------------------------------------------------------
int sub_30035BF0()
{
  int result; // eax
  int v1; // edi
  _DWORD *v2; // ebx
  int v3; // esi
  int v4; // ebp
  int v5; // [esp+4h] [ebp-4h]

  result = dword_3020AFC4;
  v1 = 0;
  if ( dword_3020AFC4 )
  {
    v2 = (_DWORD *)((char *)&unk_301AA4E0 + 408 * dword_3020AFC4);
    result = dword_30076898(151);
    if ( result > 0 )
    {
      v3 = 0;
      v4 = result;
      do
      {
        result = _stricmp(*(const char **)(v3 + v5), "noteTrackSoundA");
        if ( result )
        {
          result = _stricmp(*(const char **)(v3 + v5), "noteTrackSoundB");
          if ( result )
          {
            result = _stricmp(*(const char **)(v3 + v5), "noteTrackSoundC");
            if ( result )
            {
              result = _stricmp(*(const char **)(v3 + v5), "noteTrackSoundD");
              if ( !result )
                v1 = v2[66];
            }
            else
            {
              v1 = v2[65];
            }
          }
          else
          {
            v1 = v2[64];
          }
        }
        else
        {
          v1 = v2[63];
        }
        if ( v1 )
          result = sub_30022ED0();
        v3 += 12;
        --v4;
      }
      while ( v4 );
    }
  }
  return result;
}
// 30035C34: variable 'v5' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AFC4: using guessed type int dword_3020AFC4;

//----- (30035CE0) --------------------------------------------------------
int __usercall sub_30035CE0@<eax>(int a1@<edi>, int a2)
{
  int result; // eax
  int v3; // esi

  dword_30076898(178);
  if ( *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(a1 + 176)) + 716) )
    sub_30035B00();
  result = *(_DWORD *)(a1 + 980);
  if ( result != *(_DWORD *)(a2 + 152) )
  {
    switch ( result & 0xFFFFFDFF )
    {
      case 0u:
        v3 = 1;
        while ( 1 )
        {
          result = dword_30076898(181);
          if ( !result )
            break;
          if ( ++v3 >= 19 )
            goto LABEL_8;
        }
        *(_DWORD *)(a2 + 152) = -1;
        break;
      case 2u:
      case 3u:
      case 4u:
      case 5u:
      case 6u:
      case 7u:
      case 8u:
      case 9u:
      case 0xAu:
      case 0xBu:
      case 0xCu:
      case 0xDu:
      case 0xEu:
      case 0xFu:
      case 0x10u:
      case 0x11u:
LABEL_8:
        sub_30035A70(*(_DWORD *)(a1 + 176));
        result = *(_DWORD *)(a1 + 980);
        *(_DWORD *)(a2 + 152) = result;
        break;
      default:
        sub_30035A70(*(_DWORD *)(a1 + 176));
        Com_Printf("CG_WeaponRunXModelAnims: Unknown weapon animation %i\n", *(_DWORD *)(a1 + 980) & 0xFFFFFDFF);
        result = *(_DWORD *)(a1 + 980);
        *(_DWORD *)(a2 + 152) = result;
        break;
    }
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30036080) --------------------------------------------------------
int sub_30036080()
{
  int result; // eax
  int v1; // esi
  _DWORD *v2; // edi

  result = dword_300F0FB0;
  v1 = 1;
  if ( dword_300F0FB0 >= 1 )
  {
    v2 = &unk_301AA678;
    do
    {
      if ( *v2 )
      {
        dword_30076898(178);
        dword_30076898(136);
        dword_30076898(141);
        sub_30035A70(v1);
      }
      result = dword_300F0FB0;
      ++v1;
      v2 += 102;
    }
    while ( v1 <= dword_300F0FB0 );
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30036160) --------------------------------------------------------
float *__usercall sub_30036160@<eax>(float *a1@<ebx>, float *a2@<edi>, float *a3)
{
  float *result; // eax
  double v4; // st7
  float v5; // [esp+8h] [ebp-4h]
  float v6; // [esp+8h] [ebp-4h]

  result = (float *)dword_301DE7CC;
  if ( dword_301DE7CC > 0 )
  {
    result = (float *)sub_300211F0();
    result[2] = 0.0;
    *((_DWORD *)result + 4) = dword_301DE7CC + dword_3020AF00;
    v5 = (float)dword_301DE7CC;
    result[5] = 1.0 / v5;
    v4 = (double)dword_3020AF00;
    *((_DWORD *)result + 20) = 7;
    v6 = v4;
    result[50] = v6 / 1000.0;
    *((_DWORD *)result + 46) = dword_301D9628;
    result[37] = *a1;
    result[38] = a1[1];
    result[39] = a1[2];
    result[41] = *a2;
    result[42] = a2[1];
    result[43] = a2[2];
    result[15] = *a3;
    result[16] = a3[1];
    result[17] = a3[2];
    result[18] = 1.0;
    result[27] = 1.0;
    result[28] = 0.0;
    result[29] = 0.0;
    result[30] = 0.0;
    result[31] = 1.0;
    result[32] = 0.0;
    result[33] = 0.0;
    result[34] = 0.0;
    result[35] = 1.0;
  }
  return result;
}
// 301D9628: using guessed type int dword_301D9628;
// 301DE7CC: using guessed type int dword_301DE7CC;
// 3020AF00: using guessed type int dword_3020AF00;

//----- (30036250) --------------------------------------------------------
float *__usercall sub_30036250@<eax>(int a1@<eax>, int a2@<edx>, float *a3@<ecx>)
{
  float *result; // eax
  float v6; // eax
  float *v7; // eax
  unsigned int v8; // edi
  char *v9; // edx
  long double v10; // st7
  float *v11; // eax
  float *v12; // ebx
  unsigned int v13; // esi
  double v14; // st7
  int v15; // edx
  float v16; // eax
  double v17; // st7
  double v18; // st7
  int v19; // edx
  int v20; // eax
  double v21; // st7
  double v22; // st7
  float v23; // edx
  double v24; // st7
  double v25; // st6
  float v26; // eax
  int v27; // edx
  int v28; // eax
  double v29; // st7
  float *v30; // [esp-Ch] [ebp-148h]
  float v31; // [esp+4h] [ebp-138h] BYREF
  float v32; // [esp+8h] [ebp-134h]
  float v33; // [esp+Ch] [ebp-130h]
  float v34; // [esp+10h] [ebp-12Ch] BYREF
  float v35; // [esp+14h] [ebp-128h] BYREF
  float v36; // [esp+18h] [ebp-124h]
  int v37; // [esp+1Ch] [ebp-120h] BYREF
  int v38; // [esp+20h] [ebp-11Ch]
  float v39; // [esp+24h] [ebp-118h]
  float v40; // [esp+28h] [ebp-114h] BYREF
  float v41; // [esp+2Ch] [ebp-110h]
  float v42; // [esp+30h] [ebp-10Ch]
  float v43; // [esp+34h] [ebp-108h] BYREF
  float v44; // [esp+38h] [ebp-104h]
  float v45; // [esp+3Ch] [ebp-100h]
  float v46; // [esp+40h] [ebp-FCh]
  float v47; // [esp+44h] [ebp-F8h]
  float v48; // [esp+48h] [ebp-F4h]
  float v49; // [esp+4Ch] [ebp-F0h]
  float *v50; // [esp+50h] [ebp-ECh]
  float v51[3]; // [esp+54h] [ebp-E8h] BYREF
  int v52[3]; // [esp+60h] [ebp-DCh] BYREF
  float *v53; // [esp+6Ch] [ebp-D0h]
  int v54[3]; // [esp+70h] [ebp-CCh] BYREF
  char v55[4]; // [esp+7Ch] [ebp-C0h] BYREF
  char v56; // [esp+80h] [ebp-BCh] BYREF

  v33 = 1.0;
  v32 = 1.0;
  v31 = 0.0;
  switch ( a1 )
  {
    case 0:
      v31 = 0.0;
      v33 = 1.0;
      v32 = 1.0;
      return sub_30036160((float *)a2, a3, &v31);
    case 1:
      v31 = 1.0;
      v32 = 0.0;
      v33 = 0.0;
      return sub_30036160((float *)a2, a3, &v31);
    case 69:
      v31 = 1.0;
      v32 = 1.0;
      v33 = 0.0;
      return sub_30036160((float *)a2, a3, &v31);
    case 70:
      v32 = 1.0;
      v31 = 0.0;
      v33 = 0.0;
      return sub_30036160((float *)a2, a3, &v31);
    case 71:
      v33 = 1.0;
      v31 = 0.0;
      v32 = 0.0;
      return sub_30036160((float *)a2, a3, &v31);
    case 72:
      v31 = 1.0;
      v32 = 1.0;
      v33 = 1.0;
      return sub_30036160((float *)a2, a3, &v31);
    case 2:
      goto LABEL_22;
    case 3:
      v31 = 1.0;
      v33 = 0.0;
      v32 = 0.0;
LABEL_22:
      v14 = *(float *)a2 - *a3;
      v15 = *(_DWORD *)(a2 + 8);
      v16 = *(float *)a2;
      v51[1] = *(float *)(a2 + 4);
      v46 = v14;
      v17 = *(float *)(a2 + 4);
      LODWORD(v51[2]) = v15;
      v18 = v17 - a3[1];
      v52[2] = v15;
      v19 = LODWORD(v16);
      *(float *)v52 = v16;
      v47 = v18;
      v20 = *(_DWORD *)(a2 + 4);
      v21 = *(float *)(a2 + 8) - a3[2];
      v37 = v19;
      v48 = v21;
      v38 = v20;
      v22 = *(float *)(a2 + 4);
      v51[0] = *(float *)a2 - v46;
      *(float *)&v52[1] = v22 - v47;
      v39 = *(float *)(a2 + 8) - v48;
      sub_30036160((float *)a2, v51, &v31);
      sub_30036160((float *)a2, (float *)v52, &v31);
      sub_30036160((float *)a2, (float *)&v37, &v31);
      v23 = a3[2];
      v24 = a3[1];
      v25 = *a3 + v46;
      v26 = *a3;
      v44 = a3[1];
      v43 = v25;
      v45 = v23;
      v42 = v23;
      v27 = LODWORD(v26);
      v40 = v26;
      v28 = *((_DWORD *)a3 + 1);
      v41 = v24 + v47;
      v29 = v48 + a3[2];
      v54[0] = v27;
      *(float *)&v54[2] = v29;
      v54[1] = v28;
      sub_30036160(a3, &v43, &v31);
      sub_30036160(a3, &v40, &v31);
      sub_30036160(a3, (float *)v54, &v31);
      sub_30036160((float *)v52, (float *)v54, &v31);
      sub_30036160((float *)v54, v51, &v31);
      sub_30036160(v51, &v40, &v31);
      sub_30036160((float *)v52, &v43, &v31);
      sub_30036160(&v43, (float *)&v37, &v31);
      return sub_30036160((float *)&v37, &v40, &v31);
  }
  if ( a1 != 5 )
    goto LABEL_22;
  v6 = *(float *)a2;
  v39 = 1.0;
  v49 = v6;
  v37 = 0;
  v38 = 0;
  sub_3003C080(&v40, (float *)&v37);
  v7 = sub_3003B380(&v40, &v43, (float *)&v37);
  *(float *)&v8 = 0.0;
  v53 = &v34;
  v36 = 0.0;
  v50 = &v35;
  v9 = &v56;
  do
  {
    v36 = (double)SLODWORD(v36) * 0.39269909;
    v30 = v7;
    v10 = sin(v36);
    v11 = v53;
    *v50 = cos(v36);
    *v11 = v10;
    v7 = v30;
    ++v8;
    v9 += 12;
    v36 = *(float *)&v8;
    v34 = v34 * v49;
    v35 = v35 * v49;
    *((float *)v9 - 4) = v40 * v35 + v43 * v34 + *a3;
    *((float *)v9 - 3) = v41 * v35 + v44 * v34 + a3[1];
    *((float *)v9 - 2) = v42 * v35 + v45 * v34 + a3[2];
  }
  while ( v8 < 0x10 );
  result = 0;
  v12 = (float *)v55;
  do
  {
    v13 = (unsigned int)result + 1;
    sub_30036160(v12, (float *)&v55[12 * (((_BYTE)result + 1) & 0xF)], &v31);
    result = (float *)v13;
    v12 += 3;
  }
  while ( v13 < 0x10 );
  return result;
}
// 30036250: using guessed type char var_C0[4];

//----- (30036690) --------------------------------------------------------
int __cdecl sub_30036690(int a1)
{
  int v1; // ebx
  char *v2; // ebp
  int v3; // esi
  const char **v4; // edi
  _BYTE *v5; // eax
  _BYTE *v6; // eax
  int v7; // edi
  double v8; // st7
  double v9; // st7
  double v10; // st7
  double v11; // st7
  double v12; // st7
  double v13; // st7
  double v14; // st7
  double v15; // st7
  double v16; // st7
  double v17; // st7
  const char *v18; // eax
  const char *v19; // eax
  const char *v20; // eax
  int v21; // eax
  int v22; // eax
  int v23; // eax
  int v24; // eax
  int v25; // eax
  int v26; // eax
  int v27; // eax
  int v28; // eax
  int v29; // eax
  int v30; // eax
  int v32; // [esp+34h] [ebp-C8h]
  const char **v33; // [esp+3Ch] [ebp-C0h]
  int *v34; // [esp+54h] [ebp-A8h]
  char String[64]; // [esp+78h] [ebp-84h] BYREF
  char Buffer[64]; // [esp+B8h] [ebp-44h] BYREF
  unsigned int v37; // [esp+F8h] [ebp-4h]
  unsigned int retaddr; // [esp+FCh] [ebp+0h]

  v1 = a1;
  v37 = retaddr ^ dword_300705C0;
  if ( a1 )
  {
    v2 = (char *)&unk_301AA4E0 + 408 * a1;
    v3 = *(_DWORD *)(dword_300F0FB4 + 4 * a1);
    if ( !*((_DWORD *)v2 + 39) )
    {
      memset(v2, 0, 0x198u);
      v4 = (const char **)((char *)&unk_30078328 + 48 * a1);
      *((_DWORD *)v2 + 39) = 1;
      v33 = v4;
      *((_DWORD *)v2 + 40) = v4;
      v34 = &dword_301E02C0[9 * a1];
      sub_300379F0();
      *((_DWORD *)v2 + 38) = -1;
      if ( **(_BYTE **)(v3 + 16) )
      {
        v5 = *(_BYTE **)(v3 + 20);
        if ( !v5 || !*v5 )
          sub_30021B10(1, (char *)&byte_300641CC, *(_DWORD *)(v3 + 8));
        v6 = *(_BYTE **)(v3 + 28);
        if ( !v6 || !*v6 )
          sub_30021B10(1, (char *)&byte_30064198, *(_DWORD *)(v3 + 8));
        dword_30076898(130);
        dword_30076898(133);
        v7 = 1;
        v32 = v3 + 28;
        do
        {
          dword_30076898(129);
          dword_30076898(131);
          ++v7;
          v32 += 4;
        }
        while ( v7 < 21 );
        v8 = 0.0;
        dword_30076898(132);
        memset32(v2 + 4, 1065353216, 0x15u);
        if ( *(int *)(v3 + 480) > 0 )
          v8 = (double)dword_30076898(180) / (double)*(int *)(v3 + 480);
        *((float *)v2 + 5) = v8;
        v9 = 0.0;
        if ( *(int *)(v3 + 484) > 0 )
          v9 = (double)dword_30076898(180) / (double)*(int *)(v3 + 484);
        *((float *)v2 + 8) = v9;
        v10 = 0.0;
        if ( *(int *)(v3 + 488) > 0 )
          v10 = (double)dword_30076898(180) / (double)*(int *)(v3 + 488);
        *((float *)v2 + 9) = v10;
        v11 = 0.0;
        if ( *(int *)(v3 + 492) > 0 )
          v11 = (double)dword_30076898(180) / (double)*(int *)(v3 + 492);
        *((float *)v2 + 10) = v11;
        v12 = 0.0;
        if ( *(int *)(v3 + 500) > 0 )
          v12 = (double)dword_30076898(180) / (double)*(int *)(v3 + 500);
        *((float *)v2 + 11) = v12;
        v13 = 0.0;
        if ( *(int *)(v3 + 488) > 0 )
          v13 = (double)dword_30076898(180) / (double)*(int *)(v3 + 488);
        *((float *)v2 + 12) = v13;
        v14 = 0.0;
        if ( *(int *)(v3 + 516) > 0 )
          v14 = (double)dword_30076898(180) / (double)*(int *)(v3 + 516);
        *((float *)v2 + 13) = v14;
        v15 = 0.0;
        if ( *(int *)(v3 + 512) > 0 )
          v15 = (double)dword_30076898(180) / (double)*(int *)(v3 + 512);
        *((float *)v2 + 14) = v15;
        v16 = 0.0;
        if ( *(int *)(v3 + 524) > 0 )
          v16 = (double)dword_30076898(180) / (double)*(int *)(v3 + 524);
        *((float *)v2 + 15) = v16;
        v17 = 0.0;
        if ( *(int *)(v3 + 520) > 0 )
          v17 = (double)dword_30076898(180) / (double)*(int *)(v3 + 520);
        *((float *)v2 + 16) = v17;
        dword_30076898(136);
        dword_30076898(141);
        if ( **(_BYTE **)(v3 + 100) && dword_30076898(145) )
          sub_30021B10(1, (char *)&byte_30064158, *(_DWORD *)(v3 + 100));
        if ( **(_BYTE **)(v3 + 104) && dword_30076898(145) )
          sub_30021B10(1, (char *)&byte_30064158, *(_DWORD *)(v3 + 104));
        sprintf(Buffer, "%s%s", "xmodel/", *(const char **)(v3 + 20));
        sub_30032050();
        dword_30076898(50);
        sprintf(Buffer, "%s%s", "xmodel/", *(const char **)(v3 + 16));
        sub_30032050();
        dword_30076898(50);
        dword_30076898(165);
        *(_DWORD *)v2 = dword_30076898(163);
        strncpy(v2 + 88, *(const char **)(v3 + 20), 0x3Fu);
        v1 = a1;
        v2[151] = 0;
        v4 = v33;
      }
      if ( **(_BYTE **)(v3 + 392) )
        *((_DWORD *)v2 + 44) = sub_30032050();
      if ( **(_BYTE **)(v3 + 392) && !*((_DWORD *)v2 + 44) )
        Com_Printf("WARNING: Weapon %s could not load world model\n", *(const char **)(v3 + 392));
      *((_DWORD *)v2 + 67) = sub_300322A0();
      sub_300403F0("%s_select", v4[4]);
      *((_DWORD *)v2 + 68) = sub_300322A0();
      *((_DWORD *)v2 + 69) = sub_300322A0();
      if ( **(_BYTE **)(v3 + 232) )
      {
        if ( !dword_301E5F20 && !dword_300F0FA0 )
        {
          dword_300F0FA0 = 1;
          if ( byte_301DD4B0 )
            dword_30076898(9);
          if ( byte_301E5730 )
            dword_30076898(9);
          if ( dword_301AA3CC )
            dword_30076898(9);
          v18 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]], "mapname");
          if ( !v18 || !*v18 || (sub_300403F0("levelshots/%s.tga", v18), !sub_300324D0()) )
            sub_300324D0();
          dword_30076898(72);
          sub_30032820();
          dword_30076898(11);
          if ( j__atol(String) > 0 )
          {
            dword_30076898(63);
            sub_3001A260();
          }
          dword_30076898(25);
          v1 = a1;
          --dword_300F0FA0;
        }
        *((_DWORD *)v2 + 87) = dword_30076898(88);
      }
      if ( **(_BYTE **)(v3 + 236) )
      {
        if ( !dword_301E5F20 && !dword_300F0FA0 )
        {
          dword_300F0FA0 = 1;
          if ( byte_301DD4B0 )
            dword_30076898(9);
          if ( byte_301E5730 )
            dword_30076898(9);
          if ( dword_301AA3CC )
            dword_30076898(9);
          v19 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]], "mapname");
          if ( !v19 || !*v19 || (sub_300403F0("levelshots/%s.tga", v19), !sub_300324D0()) )
            sub_300324D0();
          dword_30076898(72);
          sub_30032820();
          dword_30076898(11);
          if ( j__atol(String) > 0 )
          {
            dword_30076898(63);
            sub_3001A260();
          }
          dword_30076898(25);
          v1 = a1;
          --dword_300F0FA0;
        }
        *((_DWORD *)v2 + 88) = dword_30076898(88);
      }
      if ( **(_BYTE **)(v3 + 548) )
      {
        if ( !dword_301E5F20 && !dword_300F0FA0 )
        {
          dword_300F0FA0 = 1;
          if ( byte_301DD4B0 )
            dword_30076898(9);
          if ( byte_301E5730 )
            dword_30076898(9);
          if ( dword_301AA3CC )
            dword_30076898(9);
          v20 = (const char *)sub_300404B0(&byte_301D1B20[dword_301CFB20[0]], "mapname");
          if ( !v20 || !*v20 || (sub_300403F0("levelshots/%s.tga", v20), !sub_300324D0()) )
            sub_300324D0();
          dword_30076898(72);
          sub_30032820();
          dword_30076898(11);
          if ( j__atol(String) > 0 )
          {
            dword_30076898(63);
            sub_3001A260();
          }
          dword_30076898(25);
          v1 = a1;
          --dword_300F0FA0;
        }
        *((_DWORD *)v2 + 89) = dword_30076898(88);
      }
      if ( **(_BYTE **)(v3 + 132) )
        *((_DWORD *)v2 + 45) = dword_30076898(223);
      if ( **(_BYTE **)(v3 + 136) )
        *((_DWORD *)v2 + 46) = dword_30076898(223);
      *((_DWORD *)v2 + 50) = dword_30076898(192);
      *((_DWORD *)v2 + 51) = dword_30076898(192);
      *((_DWORD *)v2 + 52) = dword_30076898(192);
      *((_DWORD *)v2 + 53) = dword_30076898(192);
      *((_DWORD *)v2 + 54) = dword_30076898(192);
      *((_DWORD *)v2 + 55) = dword_30076898(192);
      *((_DWORD *)v2 + 56) = dword_30076898(192);
      *((_DWORD *)v2 + 57) = dword_30076898(192);
      *((_DWORD *)v2 + 58) = dword_30076898(192);
      *((_DWORD *)v2 + 59) = dword_30076898(192);
      v21 = dword_30076898(192);
      *((_DWORD *)v2 + 60) = v21;
      if ( !v21 )
        *((_DWORD *)v2 + 60) = dword_30076898(192);
      *((_DWORD *)v2 + 61) = dword_30076898(192);
      v22 = dword_30076898(192);
      *((_DWORD *)v2 + 62) = v22;
      if ( !v22 )
        *((_DWORD *)v2 + 62) = dword_30076898(192);
      *((_DWORD *)v2 + 63) = dword_30076898(192);
      *((_DWORD *)v2 + 64) = dword_30076898(192);
      *((_DWORD *)v2 + 65) = dword_30076898(192);
      *((_DWORD *)v2 + 66) = dword_30076898(192);
      if ( !v34[7] )
        v34[7] = dword_30076898(192);
      v23 = dword_30076898(192);
      v34[8] = v23;
      if ( !v23 )
        v34[8] = dword_30076898(192);
      if ( **(_BYTE **)(v3 + 224) )
        *((_DWORD *)v2 + 80) = dword_30076898(223);
      if ( **(_BYTE **)(v3 + 228) )
        v24 = dword_30076898(223);
      else
        v24 = *((_DWORD *)v2 + 80);
      *((_DWORD *)v2 + 81) = v24;
      if ( **(_BYTE **)(v3 + 808) )
      {
        v25 = sub_30032050();
        *((_DWORD *)v2 + 73) = v25;
        if ( !v25 )
          sub_30021A30(
            "Weapon %s does not specify a valid projectile model (%s)\n",
            *(const char **)(v3 + 4),
            *(const char **)(v3 + 392));
      }
      if ( **(_BYTE **)(v3 + 816) )
        *((_DWORD *)v2 + 82) = dword_30076898(223);
      *((_DWORD *)v2 + 83) = dword_30076898(192);
      if ( **(_BYTE **)(v3 + 828) )
        *((_DWORD *)v2 + 84) = dword_30076898(223);
      *((float *)v2 + 75) = (float)*(int *)(v3 + 832);
      if ( **(_BYTE **)(v3 + 396) )
      {
        v26 = sub_300322A0();
        *((_DWORD *)v2 + 70) = v26;
      }
      else
      {
        v26 = dword_301D9660;
      }
      dword_301D967C[v1] = v26;
      if ( **(_BYTE **)(v3 + 748) )
        sub_300322A0();
      if ( **(_BYTE **)(v3 + 400) )
        *((_DWORD *)v2 + 71) = sub_300322A0();
      if ( **(_BYTE **)(v3 + 404) )
      {
        v27 = sub_300322A0();
        *((_DWORD *)v2 + 72) = v27;
        dword_301D977C[v1] = v27;
      }
      else
      {
        dword_301D977C[v1] = dword_301D9660;
      }
      v28 = dword_30076898(56);
      *((_DWORD *)v2 + 41) = v28;
      if ( !v28 )
      {
        if ( dword_301DFD2C )
        {
          if ( dword_301DEE8C )
            sub_30021B10(
              7,
              "Weapon %s: Could not translate display name \"%s\"",
              *(const char **)(v3 + 4),
              *(const char **)(v3 + 8));
          else
            Com_Printf(
              "^3WARNING: Weapon %s: Could not translate display name \"%s\"\n",
              *(const char **)(v3 + 4),
              *(const char **)(v3 + 8));
        }
        *((_DWORD *)v2 + 41) = *(_DWORD *)(v3 + 8);
      }
      v29 = dword_30076898(56);
      *((_DWORD *)v2 + 42) = v29;
      if ( !v29 )
      {
        if ( dword_301DFD2C )
        {
          if ( dword_301DEE8C )
            sub_30021B10(
              7,
              "Weapon %s: Could not translate mode name \"%s\"",
              *(const char **)(v3 + 4),
              *(const char **)(v3 + 108));
          else
            Com_Printf(
              "^3WARNING: Weapon %s: Could not translate mode name \"%s\"\n",
              *(const char **)(v3 + 4),
              *(const char **)(v3 + 108));
        }
        *((_DWORD *)v2 + 42) = *(_DWORD *)(v3 + 108);
      }
      v30 = dword_30076898(56);
      *((_DWORD *)v2 + 43) = v30;
      if ( !v30 )
      {
        if ( dword_301DFD2C )
        {
          if ( dword_301DEE8C )
            sub_30021B10(
              7,
              "Weapon %s: Could not translate AI overlay description \"%s\"",
              *(const char **)(v3 + 4),
              *(const char **)(v3 + 12));
          else
            Com_Printf(
              "^3WARNING: Weapon %s: Could not translate AI overlay description \"%s\"\n",
              *(const char **)(v3 + 4),
              *(const char **)(v3 + 12));
        }
        *((_DWORD *)v2 + 43) = *(_DWORD *)(v3 + 12);
      }
    }
  }
  return sub_30052A2E(retaddr ^ v37);
}
// 300379F0: using guessed type int sub_300379F0(void);
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FA0: using guessed type int dword_300F0FA0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301AA3CC: using guessed type int dword_301AA3CC;
// 301CFB20: using guessed type int dword_301CFB20[];
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 301D9660: using guessed type int dword_301D9660;
// 301DD4B0: using guessed type char byte_301DD4B0;
// 301DEE8C: using guessed type int dword_301DEE8C;
// 301DFD2C: using guessed type int dword_301DFD2C;
// 301E5730: using guessed type char byte_301E5730;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (300377B0) --------------------------------------------------------
int __cdecl sub_300377B0(char *Source)
{
  int v1; // ecx
  int v2; // ebp
  _DWORD *v3; // esi
  char *v4; // esi
  char Buffer[64]; // [esp+2Ch] [ebp-84h] BYREF
  char v7[64]; // [esp+6Ch] [ebp-44h] BYREF
  unsigned int v8; // [esp+ACh] [ebp-4h]
  unsigned int retaddr; // [esp+B0h] [ebp+0h]

  v8 = retaddr ^ dword_300705C0;
  if ( v1 )
  {
    v2 = *(_DWORD *)(dword_300F0FB4 + 4 * v1);
    v3 = (_DWORD *)((char *)&unk_301AA4E0 + 408 * v1);
    if ( *v3 )
    {
      if ( **(_BYTE **)(v2 + 16) )
      {
        dword_30076898(178);
        dword_30076898(166);
        sprintf(Buffer, "%s%s", "xmodel/", *(const char **)(v2 + 20));
        sub_30032050();
        sub_30032050();
        dword_30076898(50);
        sprintf(v7, "%s%s", "xmodel/", *(const char **)(v2 + 16));
        sub_30032050();
        dword_30076898(50);
        dword_30076898(165);
        *v3 = dword_30076898(163);
        v4 = (char *)(v3 + 22);
        strncpy(v4, Source, 0x3Fu);
        v4[63] = 0;
      }
    }
  }
  return sub_30052A2E(retaddr ^ v8);
}
// 300377D1: variable 'v1' is possibly undefined
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30037940) --------------------------------------------------------
int __usercall sub_30037940@<eax>(char *a1@<ebx>)
{
  int result; // eax
  int v2; // edi
  const char *v3; // ebp

  result = dword_300F0FB0;
  v2 = 1;
  if ( dword_300F0FB0 >= 1 )
  {
    v3 = (const char *)&unk_301AA6D0;
    do
    {
      if ( strcmp(v3, a1) )
        sub_300377B0(a1);
      result = dword_300F0FB0;
      ++v2;
      v3 += 408;
    }
    while ( v2 <= dword_300F0FB0 );
  }
  return result;
}
// 300F0FB0: using guessed type int dword_300F0FB0;

//----- (300379B0) --------------------------------------------------------
int sub_300379B0()
{
  int result; // eax
  int i; // esi

  result = dword_300F0FB0;
  for ( i = 1; i <= dword_300F0FB0; ++i )
  {
    dword_30076898(166);
    result = dword_300F0FB0;
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB0: using guessed type int dword_300F0FB0;

//----- (300379F0) --------------------------------------------------------
int __usercall sub_300379F0@<eax>(int result@<eax>)
{
  int *v1; // ebp
  _DWORD *v2; // esi
  int v3; // edi
  int *v4; // ebx
  bool v5; // zf
  _DWORD *v6; // [esp+4h] [ebp-4h]

  v1 = &dword_301E02C0[9 * result];
  if ( !*v1 )
  {
    v2 = (_DWORD *)((char *)&unk_30078328 + 48 * result);
    *v1 = 0;
    v3 = 0;
    v4 = v1 + 1;
    v6 = v2 + 2;
    do
    {
      if ( *v6 && *(_BYTE *)*v6 )
        *v4 = sub_30032050();
      ++v3;
      ++v4;
      ++v6;
    }
    while ( v3 < 2 );
    v1[3] = sub_300322A0();
    result = v2[1];
    if ( result )
    {
      result = dword_30076898(192);
      v1[7] = result;
    }
    v5 = v2[8] == 1;
    v1[8] = v1[7];
    if ( v5 )
      result = sub_30036690(v2[9]);
    *v1 = 1;
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30037AC0) --------------------------------------------------------
int sub_30037AC0()
{
  char *v0; // eax
  int v1; // edx
  char v2; // cl
  int i; // esi
  int v4; // eax
  int v5; // eax
  char v7[260]; // [esp+0h] [ebp-108h] BYREF
  unsigned int v8; // [esp+104h] [ebp-4h]
  unsigned int retaddr; // [esp+108h] [ebp+0h]

  v8 = retaddr ^ dword_300705C0;
  v0 = &byte_301D1B20[dword_301CFB40];
  v1 = v7 - &byte_301D1B20[dword_301CFB40];
  do
  {
    v2 = *v0;
    v0[v1] = *v0;
    ++v0;
  }
  while ( v2 );
  for ( i = 1; i < 70; ++i )
  {
    v4 = v7[i / 4];
    if ( v4 > 57 )
      v5 = v4 - 87;
    else
      v5 = v4 - 48;
    if ( ((1 << (i & 3)) & v5) != 0 )
      sub_300379F0(i);
  }
  return sub_30052A2E(retaddr ^ v8);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 301CFB40: using guessed type int dword_301CFB40;

//----- (30037B60) --------------------------------------------------------
int sub_30037B60()
{
  int v0; // eax
  double v1; // st7
  float v3; // [esp+8h] [ebp-8h]

  v0 = dword_30211374 + dword_30211378 - dword_3020AF00;
  if ( v0 <= 0 )
    return sub_30013E00(
             (int)&dword_3020D3A4,
             (float *)&dword_3020D398,
             (int)&dword_3020AF14,
             (int)&dword_3020D38C,
             1.0,
             dword_3020AEFC);
  v1 = 1.0;
  if ( v0 < *(_DWORD *)dword_30211370 )
    v1 = (double)(dword_30211374 + dword_30211378 - dword_3020AF00) / (double)*(int *)dword_30211370;
  v3 = (3.0 - (v1 + v1)) * v1 * v1 * (*(float *)(*(_DWORD *)(dword_300F0FB4 + 4 * dword_3020AFC4) + 672) - 1.0) + 1.0;
  return sub_30013E00(
           (int)&dword_3020D3A4,
           (float *)&dword_3020D398,
           (int)&dword_3020AF14,
           (int)&dword_3020D38C,
           v3,
           dword_3020AEFC);
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020AFC4: using guessed type int dword_3020AFC4;
// 3020D38C: using guessed type int dword_3020D38C;
// 3020D398: using guessed type int dword_3020D398;
// 3020D3A4: using guessed type int dword_3020D3A4;
// 30211370: using guessed type int dword_30211370;
// 30211374: using guessed type int dword_30211374;
// 30211378: using guessed type int dword_30211378;

//----- (30037C30) --------------------------------------------------------
void __usercall sub_30037C30(float *a1@<esi>)
{
  double v1; // st7
  double v2; // st7
  double v3; // st7
  double v4; // st7
  double v5; // st6
  double v6; // st7
  double v7; // st7
  double v8; // st6
  unsigned __int8 v10; // c2
  unsigned __int8 v11; // c3
  double v12; // st6
  double v13; // st6
  double v14; // st6
  double v16; // st5
  unsigned __int8 v17; // c0
  unsigned __int8 v18; // c2
  double v19; // st6
  double v20; // st6
  unsigned __int8 v22; // c2
  unsigned __int8 v23; // c3
  double v24; // st7
  double v25; // st7
  double v26; // st7
  double v28; // st6
  unsigned __int8 v29; // c0
  unsigned __int8 v30; // c2
  double v31; // st7
  double v32; // st7
  unsigned __int8 v34; // c2
  unsigned __int8 v35; // c3
  double v36; // st7
  double v37; // st7
  double v38; // st7
  double v40; // st6
  unsigned __int8 v41; // c0
  unsigned __int8 v42; // c2
  double v43; // st7
  double v44; // st7
  double v45; // st7
  float v46; // [esp+4h] [ebp-10h]
  float v47; // [esp+4h] [ebp-10h]
  float v48; // [esp+4h] [ebp-10h]
  float v49; // [esp+4h] [ebp-10h]
  float v50; // [esp+4h] [ebp-10h]
  float v51; // [esp+4h] [ebp-10h]
  float v52; // [esp+4h] [ebp-10h]
  float v53; // [esp+4h] [ebp-10h]
  float v54; // [esp+4h] [ebp-10h]
  float v55; // [esp+4h] [ebp-10h]
  float v56; // [esp+Ch] [ebp-8h]
  float v57; // [esp+Ch] [ebp-8h]
  float v58; // [esp+Ch] [ebp-8h]
  float v59; // [esp+10h] [ebp-4h]
  float v60; // [esp+10h] [ebp-4h]
  float v61; // [esp+10h] [ebp-4h]

  v1 = flt_301DE468;
  if ( (dword_3020CFE8 & 0x40) != 0 )
  {
    v2 = v1 + *(float *)(dword_3020D238 + 364);
  }
  else if ( (dword_3020CFE8 & 0x20) != 0 )
  {
    v2 = v1 + *(float *)(dword_3020D238 + 360);
  }
  else
  {
    v2 = v1 + *(float *)(dword_3020D238 + 356);
  }
  if ( dword_302107A4 <= v2 || dword_3020AFC8 == 5 )
  {
    v60 = 0.0;
    v6 = 0.0;
    v57 = 0.0;
  }
  else
  {
    v46 = (dword_302107A4 - v2) / ((double)dword_3020AF58 - v2);
    if ( v46 < 0.0 )
    {
      v46 = 0.0;
    }
    else if ( v46 > 1.0 )
    {
      v46 = 1.0;
    }
    v3 = v46;
    if ( (dword_3020CFE8 & 0x40) != 0 )
    {
      v4 = v3 * *(float *)(dword_3020D238 + 324);
      v56 = v46 * *(float *)(dword_3020D238 + 328);
      v5 = v46 * *(float *)(dword_3020D238 + 332);
    }
    else if ( (dword_3020CFE8 & 0x20) != 0 )
    {
      v4 = v3 * *(float *)(dword_3020D238 + 288);
      v56 = v46 * *(float *)(dword_3020D238 + 292);
      v5 = v46 * *(float *)(dword_3020D238 + 296);
    }
    else
    {
      v4 = v3 * *(float *)(dword_3020D238 + 252);
      v56 = v46 * *(float *)(dword_3020D238 + 256);
      v5 = v46 * *(float *)(dword_3020D238 + 260);
    }
    v59 = v5;
    v6 = v4 + flt_301E4F48 * v46;
    v57 = flt_301E4BE8 * v46 + v56;
    v60 = flt_3029CD88 * v46 + v59;
  }
  if ( dword_3020AFE0 == dword_3020B254 )
  {
    v7 = v6 + *(float *)(dword_3020D238 + 276);
    v58 = v57 + *(float *)(dword_3020D238 + 280);
    v8 = v60 + *(float *)(dword_3020D238 + 284);
  }
  else
  {
    if ( dword_3020AFE0 != dword_3020B250 )
      goto LABEL_24;
    v7 = v6 + *(float *)(dword_3020D238 + 312);
    v58 = v57 + *(float *)(dword_3020D238 + 316);
    v8 = v60 + *(float *)(dword_3020D238 + 320);
  }
  v61 = v8;
  v6 = v7 + flt_3029D688;
  v57 = flt_301E3D48 + v58;
  v60 = flt_301DE6A8 + v61;
LABEL_24:
  if ( flt_3020D220 != v6 )
  {
    v47 = (float)dword_3020AEFC;
    v12 = flt_301E26C8;
    if ( v11 | v10 )
      v13 = v12 + *(float *)(dword_3020D238 + 352);
    else
      v13 = v12 + *(float *)(dword_3020D238 + 348);
    v14 = v13 * (v6 - flt_3020D220) * v47 * 0.001;
    v16 = v47;
    if ( v17 | v18 )
    {
      v48 = v16 * 0.0001;
      if ( v14 < v48 )
        v14 = v48;
      v19 = v14 + flt_3020D220;
      flt_3020D220 = v19;
      if ( v19 > v6 )
        flt_3020D220 = v6;
    }
    else
    {
      v49 = v16 * -0.0001;
      if ( v14 > v49 )
        v14 = v49;
      v20 = v14 + flt_3020D220;
      flt_3020D220 = v20;
      if ( v20 < v6 )
        flt_3020D220 = v6;
    }
  }
  if ( flt_3020D224 != v57 )
  {
    v50 = (float)dword_3020AEFC;
    v24 = flt_301E26C8;
    if ( v23 | v22 )
      v25 = v24 + *(float *)(dword_3020D238 + 352);
    else
      v25 = v24 + *(float *)(dword_3020D238 + 348);
    v26 = v25 * (v57 - flt_3020D224) * v50 * 0.001;
    v28 = v50;
    if ( v29 | v30 )
    {
      v51 = v28 * 0.0001;
      if ( v26 < v51 )
        v26 = v51;
      v31 = v26 + flt_3020D224;
      flt_3020D224 = v31;
      if ( v31 > v57 )
        flt_3020D224 = v57;
    }
    else
    {
      v52 = v28 * -0.0001;
      if ( v26 > v52 )
        v26 = v52;
      v32 = v26 + flt_3020D224;
      flt_3020D224 = v32;
      if ( v32 < v57 )
        flt_3020D224 = v57;
    }
  }
  if ( flt_3020D228 != v60 )
  {
    v53 = (float)dword_3020AEFC;
    v36 = flt_301E26C8;
    if ( v35 | v34 )
      v37 = v36 + *(float *)(dword_3020D238 + 352);
    else
      v37 = v36 + *(float *)(dword_3020D238 + 348);
    v38 = v37 * (v60 - flt_3020D228) * v53 * 0.001;
    v40 = v53;
    if ( v41 | v42 )
    {
      v54 = v40 * 0.0001;
      if ( v38 < v54 )
        v38 = v54;
      v43 = v38 + flt_3020D228;
      flt_3020D228 = v43;
      if ( v43 > v60 )
        flt_3020D228 = v60;
    }
    else
    {
      v55 = v40 * -0.0001;
      if ( v38 > v55 )
        v38 = v55;
      v44 = v38 + flt_3020D228;
      flt_3020D228 = v44;
      if ( v44 < v60 )
        flt_3020D228 = v60;
    }
  }
  if ( flt_3020AFCC == 0.0 )
  {
    *a1 = flt_3020D220 + *a1;
    a1[1] = flt_3020D224 + a1[1];
    a1[2] = flt_3020D228 + a1[2];
  }
  else if ( flt_3020AFCC < 0.5 )
  {
    v45 = 1.0 - (flt_3020AFCC + flt_3020AFCC);
    *a1 = flt_3020D220 * v45 + *a1;
    a1[1] = flt_3020D224 * v45 + a1[1];
    a1[2] = flt_3020D228 * v45 + a1[2];
  }
}
// 30037E32: variable 'v11' is possibly undefined
// 30037E32: variable 'v10' is possibly undefined
// 30037E6D: variable 'v17' is possibly undefined
// 30037E6D: variable 'v18' is possibly undefined
// 30037F11: variable 'v23' is possibly undefined
// 30037F11: variable 'v22' is possibly undefined
// 30037F50: variable 'v29' is possibly undefined
// 30037F50: variable 'v30' is possibly undefined
// 30037FFB: variable 'v35' is possibly undefined
// 30037FFB: variable 'v34' is possibly undefined
// 3003803A: variable 'v41' is possibly undefined
// 3003803A: variable 'v42' is possibly undefined
// 301DE468: using guessed type float flt_301DE468;
// 301DE6A8: using guessed type float flt_301DE6A8;
// 301E26C8: using guessed type float flt_301E26C8;
// 301E3D48: using guessed type float flt_301E3D48;
// 301E4BE8: using guessed type float flt_301E4BE8;
// 301E4F48: using guessed type float flt_301E4F48;
// 3020AF58: using guessed type int dword_3020AF58;
// 3020AFC8: using guessed type int dword_3020AFC8;
// 3020AFCC: using guessed type float flt_3020AFCC;
// 3020AFE0: using guessed type int dword_3020AFE0;
// 3020AFE4: using guessed type float flt_3020AFE4;
// 3020B250: using guessed type int dword_3020B250;
// 3020B254: using guessed type int dword_3020B254;
// 3020CFE8: using guessed type int dword_3020CFE8;
// 3020D220: using guessed type float flt_3020D220;
// 3020D224: using guessed type float flt_3020D224;
// 3020D228: using guessed type float flt_3020D228;
// 3020D238: using guessed type int dword_3020D238;
// 3029CD88: using guessed type float flt_3029CD88;
// 3029D688: using guessed type float flt_3029D688;

//----- (30038140) --------------------------------------------------------
float __usercall sub_30038140@<eax>(float *a1@<edi>)
{
  float result; // eax
  float v2; // [esp+4h] [ebp-Ch] BYREF
  float v3; // [esp+8h] [ebp-8h]
  float v4; // [esp+Ch] [ebp-4h]

  v4 = 0.0;
  v3 = 0.0;
  v2 = 0.0;
  sub_30037C30(&v2);
  result = v2;
  dword_3020D210 = LODWORD(v2);
  dword_3020D214 = LODWORD(v3);
  dword_3020D218 = LODWORD(v4);
  *a1 = v2 + *a1;
  a1[1] = v3 + a1[1];
  a1[2] = v4 + a1[2];
  return result;
}
// 3020D210: using guessed type int dword_3020D210;
// 3020D214: using guessed type int dword_3020D214;
// 3020D218: using guessed type int dword_3020D218;

//----- (300381B0) --------------------------------------------------------
int __cdecl sub_300381B0(float *a1)
{
  double v1; // st7
  int result; // eax
  double v3; // st6
  double v4; // st5
  float v5; // [esp+10h] [ebp-30h]
  float v6; // [esp+14h] [ebp-2Ch]
  float v7; // [esp+18h] [ebp-28h]
  float v8[3]; // [esp+1Ch] [ebp-24h] BYREF
  float v9[3]; // [esp+28h] [ebp-18h] BYREF
  float v10[3]; // [esp+34h] [ebp-Ch] BYREF

  v7 = a1[2];
  v5 = *a1;
  v6 = a1[1];
  sub_3003BEA0((float *)&dword_3020D380, v10, v9, v8);
  v1 = -v6;
  result = LODWORD(flt_3020D348);
  v3 = v9[0];
  *a1 = flt_3020D348;
  v4 = v10[0];
  a1[1] = flt_3020D34C;
  a1[2] = flt_3020D350;
  *a1 = v3 * v1 + v4 * v7 + v8[0] * v5 + *a1;
  a1[1] = v9[1] * v1 + v10[1] * v7 + v8[1] * v5 + a1[1];
  a1[2] = v1 * v9[2] + v10[2] * v7 + v8[2] * v5 + a1[2];
  return result;
}
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 3020D380: using guessed type int dword_3020D380;

//----- (30038270) --------------------------------------------------------
void __thiscall sub_30038270(float *this)
{
  double v1; // st7

  if ( !*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * dword_3020AFC4) + 716) || (v1 = flt_3020AFCC, flt_3020AFCC == 0.0) )
  {
    flt_30210948 = 0.0;
    flt_3021094C = 0.0;
    flt_30210950 = 0.0;
  }
  else
  {
    flt_30210948 = (*this - flt_3020D348) * v1;
    flt_3021094C = (this[1] - flt_3020D34C) * v1;
    flt_30210950 = (this[2] - flt_3020D350) * v1;
  }
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3020AFC4: using guessed type int dword_3020AFC4;
// 3020AFCC: using guessed type float flt_3020AFCC;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;
// 30210948: using guessed type float flt_30210948;
// 3021094C: using guessed type float flt_3021094C;
// 30210950: using guessed type float flt_30210950;

//----- (30038300) --------------------------------------------------------
void __usercall sub_30038300(int a1@<eax>)
{
  int v2; // eax
  float v3; // [esp+4h] [ebp-34h] BYREF
  float v4; // [esp+8h] [ebp-30h]
  float v5; // [esp+Ch] [ebp-2Ch]
  float v6[3]; // [esp+10h] [ebp-28h] BYREF
  float v7; // [esp+1Ch] [ebp-1Ch]
  float v8; // [esp+20h] [ebp-18h]
  float *v9; // [esp+24h] [ebp-14h]
  float v10; // [esp+28h] [ebp-10h]
  float v11; // [esp+2Ch] [ebp-Ch]
  float v12; // [esp+30h] [ebp-8h]
  float v13; // [esp+34h] [ebp-4h]

  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)a1 = 0;
  if ( flt_3020AF54 != 0.0 && flt_3020AFCC < 1.0 )
  {
    v8 = (2.0 - COERCE_FLOAT(LODWORD(flt_3020AF54) & 0x7FFFFFFF)) * flt_3020AF54;
    v13 = v8 * -2.0;
    v8 = (1.0 - flt_3020AFCC) * v8 * 1.6;
    v4 = cos(0.0);
    v5 = sin(0.0);
    v6[2] = v4;
    v6[1] = v5;
    v9 = &v3;
    v7 = v13 * 0.017453292;
    v10 = COERCE_FLOAT(v6);
    v3 = cos(v7);
    v6[0] = sin(v7);
    v7 = v6[0] * v5;
    v11 = v3 * v5 - v7 * v4;
    v12 = v3 * v4 * -1.0 - v7 * v5;
    v13 = v6[0] * v4 * -1.0;
    *(float *)a1 = v11 * v8 + *(float *)a1;
    *(float *)(a1 + 4) = v12 * v8 + *(float *)(a1 + 4);
    *(float *)(a1 + 8) = v13 * v8 + *(float *)(a1 + 8);
  }
  sub_30038140((float *)a1);
  *(float *)(a1 + 4) = *(float *)(a1 + 4) - *(float *)&dword_3020D3A8;
  *(float *)(a1 + 8) = *(float *)&dword_3020D3AC + *(float *)(a1 + 8);
  sub_300381B0((float *)a1);
  v2 = dword_3020AF00 - dword_3020D29C;
  LODWORD(v10) = dword_3020AF00 - dword_3020D29C;
  if ( dword_3020AF00 - dword_3020D29C >= 150 )
  {
    if ( v2 < 450 )
    {
      v10 = (float)(450 - v2);
      *(float *)(a1 + 8) = v10 * flt_3020D298 * 0.25 / 300.0 + *(float *)(a1 + 8);
    }
    sub_30038270((float *)a1);
  }
  else
  {
    v10 = (float)SLODWORD(v10);
    *(float *)(a1 + 8) = v10 * flt_3020D298 * 0.25 / 150.0 + *(float *)(a1 + 8);
    sub_30038270((float *)a1);
  }
}
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AFCC: using guessed type float flt_3020AFCC;
// 3020D298: using guessed type float flt_3020D298;
// 3020D29C: using guessed type int dword_3020D29C;
// 3020D3A8: using guessed type int dword_3020D3A8;
// 3020D3AC: using guessed type int dword_3020D3AC;

//----- (30038540) --------------------------------------------------------
int sub_30038540()
{
  int result; // eax

  result = *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * dword_3020AFC4) + 716);
  if ( result )
  {
    if ( flt_3020AFCC != 1.0
      && flt_3020AFCC != 0.0
      && (flt_3020D208 == 1.0 || flt_3020D208 == 0.0)
      && flt_3020AFCC != flt_3020D208 )
    {
      if ( flt_3020AFCC >= (double)flt_3020D208 )
      {
        dword_3020D20C = 1;
        result = LODWORD(flt_3020AFCC);
        flt_3020D208 = flt_3020AFCC;
        return result;
      }
      dword_3020D20C = 0;
    }
    result = LODWORD(flt_3020AFCC);
    flt_3020D208 = flt_3020AFCC;
  }
  return result;
}
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3020AFC4: using guessed type int dword_3020AFC4;
// 3020AFCC: using guessed type float flt_3020AFCC;
// 3020D208: using guessed type float flt_3020D208;
// 3020D20C: using guessed type int dword_3020D20C;

//----- (30038600) --------------------------------------------------------
int __usercall sub_30038600@<eax>(int a1@<eax>, int a2@<edx>)
{
  int result; // eax
  int v3; // esi

  result = 408 * a1;
  if ( a2 )
    v3 = *(int *)((char *)&dword_301AA594 + result);
  else
    v3 = *(int *)((char *)&dword_301AA598 + result);
  if ( v3 )
  {
    result = dword_30076898(224);
    if ( result >= 0 )
      result = dword_30076898(230);
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301AA594: using guessed type int dword_301AA594;
// 301AA598: using guessed type int dword_301AA598;

//----- (30038660) --------------------------------------------------------
int __cdecl sub_30038660(int a1, _DWORD *a2, int a3)
{
  _DWORD *v3; // ecx
  _DWORD *v4; // esi
  int v5; // ebx
  int result; // eax
  int v7; // edx
  int v8; // ecx
  int v9; // eax
  int v10; // ecx
  int *v11; // ebx
  int v12; // edx
  int v13; // ecx
  int v14; // edx
  double v15; // st7
  float v16; // edx
  float v17; // eax
  int v18; // edx
  int v19; // eax
  int v20; // ecx
  int v21; // edx
  int v22; // eax
  int v23; // ecx
  int v24; // edx
  int v25; // ecx
  int v26; // edx
  int v27; // esi
  int v28; // eax
  int v29; // [esp+10h] [ebp-130h]
  int v30; // [esp+14h] [ebp-12Ch]
  int v31[44]; // [esp+18h] [ebp-128h] BYREF
  int v32[12]; // [esp+C8h] [ebp-78h] BYREF
  char v33[48]; // [esp+F8h] [ebp-48h] BYREF
  int v34; // [esp+128h] [ebp-18h]
  int v35; // [esp+12Ch] [ebp-14h]
  int v36; // [esp+130h] [ebp-10h]
  unsigned int v37; // [esp+13Ch] [ebp-4h]
  unsigned int retaddr; // [esp+144h] [ebp+4h]

  v37 = retaddr ^ dword_300705C0;
  v4 = v3;
  if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0x30000) == 0 || (v30 = 1, *a2 != *(_DWORD *)(dword_301E5F20 + 184)) )
    v30 = 0;
  v5 = a2[50];
  v29 = v5;
  if ( !a1 || (result = dword_3021099C) == 0 )
  {
    result = a2[2];
    if ( (result & 0xC000) == 0 )
    {
      sub_30036690(v5);
      v7 = v4[5];
      memset(v31, 0, 0x9Cu);
      v8 = v4[4];
      v31[3] = v4[3];
      v9 = v4[6];
      v31[4] = v8;
      v10 = v4[1];
      v11 = (int *)((char *)&unk_301AA4E0 + 408 * v5);
      v31[5] = v7;
      v31[6] = v9;
      v31[1] = v10;
      if ( a1 )
      {
        v12 = *v11;
        v31[27] = -1;
        v13 = *(_DWORD *)(a1 + 20);
        v31[36] = v12;
        v14 = *(_DWORD *)(a1 + 24);
        v31[3] = v13;
        v31[5] = *(_DWORD *)(a1 + 28);
        v15 = *(float *)&v31[5] + *(float *)(a1 + 208);
        v31[4] = v14;
        v16 = *(float *)(a1 + 64);
        v17 = *(float *)(a1 + 196);
        *(float *)&v31[5] = v15;
        v31[0] = 1;
        v31[1] = 140;
        sub_30040DF0((float *)&v31[3], v17, v16, 16.0, 20.0);
        dword_30076898(150);
        v31[40] = -1;
        v31[41] = -1;
        v31[42] = -1;
        v31[43] = -1;
        if ( !dword_30076898(170) )
        {
          dword_30076898(152);
          dword_30076898(172);
        }
        sub_30035BF0();
        v31[17] = v4[17];
        v31[18] = v4[18];
        v18 = v4[19];
        v19 = v4[7];
        *(float *)&v31[17] = flt_3020D354 * flt_301DF428 + *(float *)&v31[17];
        v20 = v4[8];
        v31[19] = v18;
        v21 = v4[9];
        v31[7] = v19;
        v31[10] = v4[10];
        v22 = v4[13];
        v31[8] = v20;
        *(float *)&v31[17] = flt_3020D360 * flt_301B0E48 + *(float *)&v31[17];
        v23 = v4[11];
        v31[9] = v21;
        v24 = v4[12];
        v31[13] = v22;
        v31[11] = v23;
        v25 = v4[14];
        *(float *)&v31[17] = *(float *)&dword_3020D36C * flt_301DD6E8 + *(float *)&v31[17];
        v31[12] = v24;
        v26 = v4[15];
        v31[14] = v25;
        v31[15] = v26;
        *(float *)&v31[18] = flt_3020D358 * flt_301DF428 + *(float *)&v31[18];
        *(float *)&v31[18] = flt_3020D364 * flt_301B0E48 + *(float *)&v31[18];
        *(float *)&v31[18] = *(float *)&dword_3020D370 * flt_301DD6E8 + *(float *)&v31[18];
        *(float *)&v31[19] = flt_3020D35C * flt_301DF428 + *(float *)&v31[19];
        *(float *)&v31[19] = flt_3020D368 * flt_301B0E48 + *(float *)&v31[19];
        *(float *)&v31[19] = *(float *)&dword_3020D374 * flt_301DD6E8 + *(float *)&v31[19];
        if ( a3 )
          dword_30076898(61);
        dword_30210974 = v31[19];
        dword_30210980 = v31[9];
        dword_3021096C = v31[17];
        dword_30210970 = v31[18];
        dword_3021098C = v31[12];
        dword_30210978 = v31[7];
        dword_3021097C = v31[8];
        dword_30210998 = v31[15];
        dword_30210984 = v31[10];
        dword_30210988 = v31[11];
        dword_30210990 = v31[13];
        dword_30210994 = v31[14];
        v27 = dword_30076898(175);
        if ( v27 > -1 )
        {
          v28 = dword_30076898(158);
          v32[0] = v31[7];
          v32[1] = v31[8];
          v32[2] = v31[9];
          v32[3] = v31[10];
          v32[4] = v31[11];
          v32[5] = v31[12];
          v32[6] = v31[13];
          v32[7] = v31[14];
          v32[8] = v31[15];
          v32[9] = v31[17];
          v32[10] = v31[18];
          v32[11] = v31[19];
          sub_3003C7E0((float *)v32, (int)v33, (float *)((v27 << 6) + v28));
          dword_30546FA0 = v34;
          dword_30546FA4 = v35;
          dword_30546FA8 = v36;
        }
      }
      result = a2[121];
      if ( result )
      {
        result = v30;
        if ( !v30 || a1 )
        {
          result = a3;
          a2[121] = 0;
          if ( a3 )
            result = sub_30038600(v29, a1 != 0);
        }
      }
    }
  }
  return result;
}
// 30038682: variable 'v3' is possibly undefined
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301B0E48: using guessed type float flt_301B0E48;
// 301DD6E8: using guessed type float flt_301DD6E8;
// 301DF428: using guessed type float flt_301DF428;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020D354: using guessed type float flt_3020D354;
// 3020D358: using guessed type float flt_3020D358;
// 3020D35C: using guessed type float flt_3020D35C;
// 3020D360: using guessed type float flt_3020D360;
// 3020D364: using guessed type float flt_3020D364;
// 3020D368: using guessed type float flt_3020D368;
// 3020D36C: using guessed type int dword_3020D36C;
// 3020D370: using guessed type int dword_3020D370;
// 3020D374: using guessed type int dword_3020D374;
// 3021096C: using guessed type int dword_3021096C;
// 30210970: using guessed type int dword_30210970;
// 30210974: using guessed type int dword_30210974;
// 30210978: using guessed type int dword_30210978;
// 3021097C: using guessed type int dword_3021097C;
// 30210980: using guessed type int dword_30210980;
// 30210984: using guessed type int dword_30210984;
// 30210988: using guessed type int dword_30210988;
// 3021098C: using guessed type int dword_3021098C;
// 30210990: using guessed type int dword_30210990;
// 30210994: using guessed type int dword_30210994;
// 30210998: using guessed type int dword_30210998;
// 3021099C: using guessed type int dword_3021099C;
// 30546FA0: using guessed type int dword_30546FA0;
// 30546FA4: using guessed type int dword_30546FA4;
// 30546FA8: using guessed type int dword_30546FA8;

//----- (30038B60) --------------------------------------------------------
int __cdecl sub_30038B60(int a1)
{
  int result; // eax
  char *v2; // ebx
  int v3; // esi
  float v4[3]; // [esp+10h] [ebp-158h] BYREF
  int v5; // [esp+1Ch] [ebp-14Ch]
  int v6[3]; // [esp+20h] [ebp-148h] BYREF
  int v7; // [esp+2Ch] [ebp-13Ch]
  int v8; // [esp+30h] [ebp-138h]
  int v9; // [esp+34h] [ebp-134h]
  int v10; // [esp+38h] [ebp-130h]
  int v11; // [esp+3Ch] [ebp-12Ch]
  int v12; // [esp+40h] [ebp-128h]
  int v13; // [esp+44h] [ebp-124h]
  int v14; // [esp+48h] [ebp-120h]
  int v15; // [esp+4Ch] [ebp-11Ch]
  int v16; // [esp+50h] [ebp-118h]
  int v17; // [esp+54h] [ebp-114h]
  int v18; // [esp+58h] [ebp-110h]
  int v19; // [esp+5Ch] [ebp-10Ch]
  int v20; // [esp+60h] [ebp-108h]
  int v21; // [esp+64h] [ebp-104h]
  int v22; // [esp+68h] [ebp-100h]
  int v23; // [esp+6Ch] [ebp-FCh]
  float v24; // [esp+74h] [ebp-F4h] BYREF
  int v25[41]; // [esp+78h] [ebp-F0h] BYREF
  float v26[9]; // [esp+11Ch] [ebp-4Ch] BYREF
  float v27[10]; // [esp+140h] [ebp-28h] BYREF
  unsigned int retaddr; // [esp+16Ch] [ebp+4h]

  LODWORD(v27[9]) = retaddr ^ dword_300705C0;
  result = *(_DWORD *)(a1 + 4);
  v5 = 1;
  if ( result != 4 && result != 5 )
  {
    if ( result < 6 )
    {
      result = dword_3020AF10;
      if ( !dword_3020AF10 )
      {
        if ( dword_301DF9CC != 2 && (!dword_301DF9CC || sub_30016FB0(&v24)) )
          v5 = 0;
        result = dword_30210888;
        if ( !dword_30210888 )
        {
          result = *(_DWORD *)(a1 + 128);
          if ( (result & 0xC000) == 0 )
          {
            if ( *(int *)(a1 + 176) <= 0 )
            {
              result = dword_3020D380;
              dword_30210940 = dword_3020D380;
              dword_30210944 = LODWORD(flt_3020D384);
              flt_30210948 = 0.0;
              flt_3021094C = 0.0;
              flt_30210950 = 0.0;
            }
            else
            {
              sub_30036690(*(_DWORD *)(a1 + 176));
              v2 = (char *)&unk_301AA4E0 + 408 * *(_DWORD *)(a1 + 176);
              sub_30037B60();
              sub_30038540();
              memset(v25, 0, 0x9Cu);
              sub_30038300((int)&v25[17]);
              v4[2] = flt_301DD6E8;
              *(float *)&v25[19] = flt_3020D35C * flt_301DF428 + *(float *)&v25[19];
              *(float *)&v25[17] = flt_3020D360 * flt_301B0E48 + flt_3020D354 * flt_301DF428 + *(float *)&v25[17];
              *(float *)&v25[18] = flt_3020D364 * flt_301B0E48 + flt_3020D358 * flt_301DF428 + *(float *)&v25[18];
              *(float *)&v25[17] = *(float *)&dword_3020D36C * flt_301DD6E8 + *(float *)&v25[17];
              *(float *)&v25[18] = *(float *)&dword_3020D370 * flt_301DD6E8 + *(float *)&v25[18];
              *(float *)&v25[19] = *(float *)&dword_3020D374 * flt_301DD6E8
                                 + flt_3020D368 * flt_301B0E48
                                 + *(float *)&v25[19];
              sub_3003DE80(v26, (float *)&dword_3020D380);
              v8 = dword_3020D230;
              v6[0] = a1;
              v3 = *(_DWORD *)(a1 + 8392);
              *(float *)&v6[2] = (double)dword_3020AEFC * 0.001;
              v11 = dword_3020AF00 - v3;
              *(float *)&v6[1] = dword_302107A4;
              v7 = dword_3020D22C;
              v9 = dword_3020D234;
              v10 = dword_3020D21C;
              if ( dword_3021075C )
                v12 = dword_3021075C - v3;
              else
                v12 = 0;
              v13 = dword_30210798;
              v14 = dword_3021079C;
              v15 = dword_30210954;
              v16 = dword_30210958;
              v17 = dword_3021095C;
              v18 = dword_30210960;
              v19 = dword_30210964;
              v20 = dword_30210968;
              v21 = dword_3020D398;
              v22 = dword_3020D39C;
              v23 = dword_3020D3A0;
              sub_30013B00((int)v4, (float *)v6);
              sub_3003DE80(v27, v4);
              sub_3003C250(v26, (float *)&v25[7], v27);
              if ( !*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)(a1 + 176)) + 716)
                || *(float *)(a1 + 184) == 0.0 )
              {
                dword_30210940 = dword_3020D380;
                dword_30210944 = LODWORD(flt_3020D384);
              }
              else
              {
                sub_3003DF20(v4, (int)&v25[7]);
                *(float *)&dword_30210940 = sub_3003DAE0(v4[0]);
                *(float *)&dword_30210944 = sub_3003DAE0(v4[1]);
              }
              dword_3020D22C = v7;
              dword_3020D230 = v8;
              dword_3020D234 = v9;
              dword_3020D21C = v10;
              dword_30210954 = v15;
              dword_30210958 = v16;
              dword_3021095C = v17;
              dword_30210960 = v18;
              dword_30210964 = v19;
              dword_30210968 = v20;
              sub_30035CE0(a1, (int)v2);
              v25[1] = 12;
              result = sub_30038660(a1, &dword_3020CFE0, v5);
            }
          }
        }
      }
    }
    else
    {
      result = sub_30036080();
    }
  }
  return result;
}
// 300705C0: using guessed type int dword_300705C0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301B0E48: using guessed type float flt_301B0E48;
// 301DD6E8: using guessed type float flt_301DD6E8;
// 301DF428: using guessed type float flt_301DF428;
// 301DF9CC: using guessed type int dword_301DF9CC;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF10: using guessed type int dword_3020AF10;
// 3020D21C: using guessed type int dword_3020D21C;
// 3020D22C: using guessed type int dword_3020D22C;
// 3020D230: using guessed type int dword_3020D230;
// 3020D234: using guessed type int dword_3020D234;
// 3020D354: using guessed type float flt_3020D354;
// 3020D358: using guessed type float flt_3020D358;
// 3020D35C: using guessed type float flt_3020D35C;
// 3020D360: using guessed type float flt_3020D360;
// 3020D364: using guessed type float flt_3020D364;
// 3020D368: using guessed type float flt_3020D368;
// 3020D36C: using guessed type int dword_3020D36C;
// 3020D370: using guessed type int dword_3020D370;
// 3020D374: using guessed type int dword_3020D374;
// 3020D380: using guessed type int dword_3020D380;
// 3020D398: using guessed type int dword_3020D398;
// 3020D39C: using guessed type int dword_3020D39C;
// 3020D3A0: using guessed type int dword_3020D3A0;
// 3021075C: using guessed type int dword_3021075C;
// 30210798: using guessed type int dword_30210798;
// 3021079C: using guessed type int dword_3021079C;
// 30210888: using guessed type int dword_30210888;
// 30210940: using guessed type int dword_30210940;
// 30210944: using guessed type int dword_30210944;
// 30210948: using guessed type float flt_30210948;
// 3021094C: using guessed type float flt_3021094C;
// 30210950: using guessed type float flt_30210950;
// 30210954: using guessed type int dword_30210954;
// 30210958: using guessed type int dword_30210958;
// 3021095C: using guessed type int dword_3021095C;
// 30210960: using guessed type int dword_30210960;
// 30210964: using guessed type int dword_30210964;
// 30210968: using guessed type int dword_30210968;

//----- (30038FB0) --------------------------------------------------------
int __fastcall sub_30038FB0(int a1)
{
  char *v1; // eax

  v1 = (char *)sub_300403F0("weaponslot %s", (&off_30077504)[a1]);
  sub_300485E0(v1);
  dword_30076898(54);
  dword_30076898(54);
  return dword_30076898(72);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30039120) --------------------------------------------------------
void sub_30039120()
{
  bool v0; // sf
  int *v1; // esi
  int v2; // esi
  int v3; // edi
  float *v4; // ebx
  char v5; // al
  int v6; // ecx
  int v7; // ebp
  char *v8; // eax
  int v9; // edx
  double v10; // st7
  double v11; // st7
  double v12; // st7
  double v13; // st7
  int v14; // edx
  int v15; // eax
  int v16; // edi
  bool v17; // zf
  double v19; // st7
  unsigned __int8 v20; // c0
  unsigned __int8 v21; // c2
  double v22; // st7
  double v23; // st7
  int v24; // eax
  double v25; // st7
  double v26; // st7
  int v27; // eax
  double v28; // st6
  int v29; // eax
  int v30; // esi
  double v31; // st7
  long double v32; // st6
  double v33; // st6
  float v34; // [esp+0h] [ebp-98h]
  float v35; // [esp+24h] [ebp-74h]
  float v36; // [esp+24h] [ebp-74h]
  float v37; // [esp+24h] [ebp-74h]
  float v38; // [esp+28h] [ebp-70h]
  float v39; // [esp+28h] [ebp-70h]
  float v40; // [esp+28h] [ebp-70h]
  float v41; // [esp+28h] [ebp-70h]
  float v42; // [esp+28h] [ebp-70h]
  float v43; // [esp+2Ch] [ebp-6Ch]
  float v44; // [esp+2Ch] [ebp-6Ch]
  float v45; // [esp+2Ch] [ebp-6Ch]
  int v46; // [esp+30h] [ebp-68h]
  int v47; // [esp+34h] [ebp-64h]
  int v48; // [esp+38h] [ebp-60h]
  float v49; // [esp+3Ch] [ebp-5Ch]
  char *v50; // [esp+40h] [ebp-58h]
  float v51; // [esp+44h] [ebp-54h]
  float v52; // [esp+48h] [ebp-50h]
  float v53; // [esp+6Ch] [ebp-2Ch]
  int v54; // [esp+7Ch] [ebp-1Ch]
  int v55[6]; // [esp+80h] [ebp-18h]

  v0 = dword_3020AF00 - dword_302106F8 < 0;
  v46 = dword_3020AF00 - dword_302106F8;
  dword_302106F8 = dword_3020AF00;
  if ( v0 )
    v46 = 0;
  if ( dword_3020AF18 < 6 )
  {
    v1 = sub_3001ABD0(1800, dword_302106D4);
    if ( v1 )
    {
      sub_300484D0();
      v54 = v1[3];
      dword_30076898(72);
      v2 = *(_DWORD *)dword_301CF58C;
      v3 = 5;
      v47 = sub_300103A0((int)&dword_3020AF14, *(int *)dword_301CF58C, 1);
      v35 = 632.0;
      v48 = 5;
      v4 = (float *)&unk_302106F4;
      while ( 1 )
      {
        v5 = byte_3020B228[v3];
        if ( !v5 || ((1 << (v5 & 0x1F)) & dword_3020B220[v5 >> 5]) == 0 )
        {
          v10 = v35 - 32.0;
          goto LABEL_59;
        }
        v6 = dword_300F0FB4;
        v7 = *(_DWORD *)(dword_300F0FB4 + 4 * v5);
        v8 = (char *)&unk_301AA4E0 + 408 * v5;
        v9 = *((_DWORD *)v8 + 70);
        v50 = v8;
        if ( !v9 )
        {
          v36 = v35 - 32.0;
          sub_3001A4A0(v36, 8.0, 32.0, 32.0, dword_301D9654);
          v10 = v36;
          v2 = *(_DWORD *)dword_301CF58C;
LABEL_59:
          *v4 = 0.0;
          goto LABEL_60;
        }
        v11 = *v4;
        if ( v47 != v3 )
        {
          if ( v11 > 0.0 )
          {
            if ( v46 )
            {
              v12 = *v4 - (double)v46 * 0.0099999998;
              *v4 = v12;
              if ( v12 < 0.0 )
                *v4 = 0.0;
            }
          }
          v38 = (*v4 + 1.0) * 32.0;
          v43 = v38;
          if ( *(_DWORD *)(v7 + 740) )
            v43 = v38 + v38;
          v37 = v35 - v43;
          sub_3001A4A0(v37, 8.0, v43, v38, v9);
          goto LABEL_57;
        }
        if ( v11 < 1.0 )
        {
          if ( v46 )
          {
            v13 = (double)v46 * 0.0099999998 + *v4;
            *v4 = v13;
            if ( v13 > 1.0 )
              *v4 = 1.0;
          }
        }
        v14 = *(_DWORD *)(v6 + 4 * v2);
        v15 = *(_DWORD *)(v14 + 776);
        v16 = 1;
        if ( v15 )
        {
          do
          {
            if ( v15 == v2 )
              break;
            v15 = *(_DWORD *)(*(_DWORD *)(v6 + 4 * v15) + 776);
            ++v16;
          }
          while ( v15 );
          if ( v16 != 1 )
            break;
        }
        dword_30098C98 = 0;
        dword_300F0F88 = v47;
        dword_300F0F8C = v2;
        dword_30076898(72);
        v39 = (*v4 + 1.0) * 32.0;
        v44 = v39;
        if ( *(_DWORD *)(v7 + 740) )
          v44 = v39 + v39;
        v49 = v35 - v44;
        sub_3001A4A0(v49, 8.0, v44, v39, *((_DWORD *)v50 + 70));
        v37 = v49;
LABEL_56:
        dword_30076898(72);
LABEL_57:
        sub_30038FB0(v48);
        v10 = v37;
        v2 = *(_DWORD *)dword_301CF58C;
        v3 = v48;
LABEL_60:
        --v3;
        --v4;
        v35 = v10 - 2.0;
        v48 = v3;
        if ( (int)v4 <= (int)&unk_302106E0 )
          return;
      }
      if ( dword_300F0F88 != v47 )
      {
        dword_300F0F88 = v47;
        dword_300F0F8C = v2;
LABEL_40:
        dword_30098C98 = 0;
        goto LABEL_41;
      }
      if ( dword_300F0F8C != v2 )
      {
        v17 = *(_DWORD *)(*(_DWORD *)(v6 + 4 * dword_300F0F8C) + 776) == v2;
        dword_30098C98 = 1065353216;
        if ( !v17 )
          dword_30098C98 = -1082130432;
        dword_300F0F8C = v2;
      }
      if ( *(float *)&dword_30098C98 == 0.0 )
        goto LABEL_41;
      v19 = (double)v46 * 0.0066666668;
      if ( v20 | v21 )
      {
        v22 = v19 + *(float *)&dword_30098C98;
        *(float *)&dword_30098C98 = v22;
        if ( v22 > 0.0 )
          goto LABEL_40;
      }
      else
      {
        v23 = *(float *)&dword_30098C98 - v19;
        *(float *)&dword_30098C98 = v23;
        if ( v23 < 0.0 )
          goto LABEL_40;
      }
LABEL_41:
      v24 = *(_DWORD *)(v7 + 740);
      v25 = *v4 + 1.0;
      v55[0] = 1090519040;
      v26 = v25 * 32.0;
      v40 = v26;
      if ( v24 )
        v26 = v40 + v40;
      v53 = v26;
      v27 = 2;
      for ( *(float *)&v55[1] = v40 + 10.0; v27 < v16; *((float *)&v54 + v27) = v28 + 34.0 )
        v28 = *((float *)&v54 + v27++);
      v29 = *(_DWORD *)(v14 + 776);
      v52 = v26 * -0.5;
      if ( v29 )
      {
        while ( v29 != v2 )
        {
          v30 = *(_DWORD *)(v6 + 4 * v29);
          dword_30076898(73);
          v29 = *(_DWORD *)(v30 + 776);
          if ( !v29 )
            break;
          v2 = *(_DWORD *)dword_301CF58C;
          v6 = dword_300F0FB4;
        }
      }
      dword_30076898(72);
      v31 = 32.0;
      if ( *(_DWORD *)(v7 + 740) )
        v31 = 64.0;
      if ( *(float *)&dword_30098C98 == 0.0 )
      {
        v33 = *v4 + 1.0;
        v51 = *(float *)v55;
        v41 = v33;
      }
      else
      {
        v32 = fabs(*(float *)&dword_30098C98);
        v51 = *(float *)v55 - (*(float *)v55 - *(float *)&v55[(1 - 2 * (dword_30098C98 < 0)) % v16]) * v32;
        v41 = (1.0 - v32) * *v4 + 1.0;
        v33 = v41;
      }
      v45 = v33 * v31;
      v42 = v41 * 32.0;
      v34 = v52 + v35 - v45 * 0.5;
      sub_3001A4A0(v34, v51, v45, v42, *((_DWORD *)v50 + 70));
      v37 = v35 - v53;
      goto LABEL_56;
    }
  }
}
// 30039492: variable 'v20' is possibly undefined
// 30039492: variable 'v21' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 30098C98: using guessed type int dword_30098C98;
// 300F0F88: using guessed type int dword_300F0F88;
// 300F0F8C: using guessed type int dword_300F0F8C;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301D5A44: using guessed type float flt_301D5A44;
// 301D5A48: using guessed type float flt_301D5A48;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020AF18: using guessed type int dword_3020AF18;
// 3020B220: using guessed type int dword_3020B220[];
// 302106D4: using guessed type int dword_302106D4;
// 302106F8: using guessed type int dword_302106F8;

//----- (30039890) --------------------------------------------------------
BOOL __fastcall sub_30039890(int a1)
{
  return (dword_3020B220[a1 >> 5] & (1 << (a1 & 0x1F))) != 0;
}
// 3020B220: using guessed type int dword_3020B220[];

//----- (300398B0) --------------------------------------------------------
int __usercall sub_300398B0@<eax>(int result@<eax>, int a2@<ecx>)
{
  BOOL v2; // esi

  dword_302106D4 = dword_3020AF00;
  if ( a2 != result )
  {
    v2 = result && result == *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * a2) + 776);
    sub_300403F0("%i", result);
    result = dword_30076898(9);
    if ( !v2 )
      result = dword_30076898(9);
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3020AF00: using guessed type int dword_3020AF00;
// 302106D4: using guessed type int dword_302106D4;

//----- (30039920) --------------------------------------------------------
int sub_30039920()
{
  int result; // eax
  int v1; // edi
  int v2; // edx
  int v3; // esi

  result = dword_301E5F20;
  if ( dword_301E5F20 )
  {
    if ( (dword_3020AF20 & 0x4000) == 0 && (*(_DWORD *)(dword_301E5F20 + 24) & 0x20000) != 0 )
    {
      result = dword_3020AF94;
      if ( (dword_3020AF94 & 0xC000) == 0 )
      {
        result = dword_3020AF00 - dword_302106D4;
        if ( dword_3020AF00 - dword_302106D4 >= dword_301E368C )
        {
          v1 = *(_DWORD *)dword_301CF58C;
          v2 = *(_DWORD *)(dword_300F0FB4 + 4 * *(_DWORD *)dword_301CF58C);
          v3 = *(_DWORD *)(v2 + 776);
          if ( v3 )
          {
            result = sub_30039890(*(_DWORD *)(v2 + 776));
            if ( result )
              result = sub_300398B0(v3, v1);
          }
          else
          {
            dword_30076898(57);
            result = sub_30021A90();
          }
        }
      }
    }
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301E368C: using guessed type int dword_301E368C;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF20: using guessed type int dword_3020AF20;
// 3020AF94: using guessed type int dword_3020AF94;
// 302106D4: using guessed type int dword_302106D4;

//----- (300399D0) --------------------------------------------------------
int sub_300399D0()
{
  int result; // eax

  if ( dword_3020FDE4 )
  {
    result = dword_3020FDF0;
    if ( dword_3020FDF0 > 0 )
    {
      result = dword_3020FDF0 - dword_301B108C;
      dword_3020FDF0 = result;
      if ( result < 0 )
        dword_3020FDF0 = 0;
    }
  }
  else
  {
    result = dword_301E5F20;
    if ( dword_301E5F20 )
    {
      if ( (dword_3020AF20 & 0x4000) == 0 && (*(_DWORD *)(dword_301E5F20 + 24) & 0x20000) != 0 )
      {
        result = dword_3020AF00;
        if ( dword_3020AF00 - dword_302106D4 >= dword_301E368C )
        {
          dword_302106D4 = dword_3020AF00;
          result = sub_30039E80(1, 0);
        }
      }
    }
  }
  return result;
}
// 301B108C: using guessed type int dword_301B108C;
// 301E368C: using guessed type int dword_301E368C;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF20: using guessed type int dword_3020AF20;
// 3020FDE4: using guessed type int dword_3020FDE4;
// 3020FDF0: using guessed type int dword_3020FDF0;
// 302106D4: using guessed type int dword_302106D4;

//----- (30039A40) --------------------------------------------------------
int sub_30039A40()
{
  int result; // eax

  if ( dword_3020FDE4 )
  {
    result = dword_3020FDF4;
    if ( dword_3020FDF4 )
    {
      result = dword_301B108C + dword_3020FDF0;
      dword_3020FDF0 += dword_301B108C;
      if ( dword_3020FDF0 > dword_3020F7B0 - 1 )
        dword_3020FDF0 = dword_3020F7B0 - 1;
    }
  }
  else
  {
    result = dword_301E5F20;
    if ( dword_301E5F20 )
    {
      if ( (dword_3020AF20 & 0x4000) == 0 && (*(_DWORD *)(dword_301E5F20 + 24) & 0x20000) != 0 )
      {
        result = dword_3020AF00;
        if ( dword_3020AF00 - dword_302106D4 >= dword_301E368C )
        {
          dword_302106D4 = dword_3020AF00;
          result = sub_30039E80(0, 0);
        }
      }
    }
  }
  return result;
}
// 301B108C: using guessed type int dword_301B108C;
// 301E368C: using guessed type int dword_301E368C;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF20: using guessed type int dword_3020AF20;
// 3020F7B0: using guessed type int dword_3020F7B0;
// 3020FDE4: using guessed type int dword_3020FDE4;
// 3020FDF0: using guessed type int dword_3020FDF0;
// 3020FDF4: using guessed type int dword_3020FDF4;
// 302106D4: using guessed type int dword_302106D4;

//----- (30039C00) --------------------------------------------------------
int sub_30039C00()
{
  int result; // eax
  bool v1; // cc
  char *v2; // eax
  int v3; // esi

  result = dword_301E5F20;
  if ( dword_301E5F20 )
  {
    if ( (dword_3020AF20 & 0x4000) == 0 && (*(_DWORD *)(dword_301E5F20 + 24) & 0x20000) != 0 )
    {
      result = dword_3020AF00;
      if ( dword_3020AF00 - dword_302106D4 >= dword_301E368C )
      {
        dword_302106D4 = dword_3020AF00;
        dword_30076898(13);
        result = sub_30010000(&byte_30096790);
        v1 = result <= 0;
        if ( !result )
        {
          v2 = sub_30021C40();
          result = j__atol(v2);
          v1 = result <= 0;
        }
        if ( !v1 && result < 6 )
        {
          v3 = byte_3020B228[result];
          if ( byte_3020B228[result] )
          {
            result = sub_30039890(byte_3020B228[result]);
            if ( result )
              result = sub_300398B0(v3, *(int *)dword_301CF58C);
          }
        }
      }
    }
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301E368C: using guessed type int dword_301E368C;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF20: using guessed type int dword_3020AF20;
// 302106D4: using guessed type int dword_302106D4;

//----- (30039CC0) --------------------------------------------------------
int __usercall sub_30039CC0@<eax>(int a1@<eax>, int a2@<edi>)
{
  int v2; // esi
  int v3; // ecx
  char v4; // al

  if ( a1 )
  {
    v2 = 1;
    v3 = 1;
  }
  else
  {
    v2 = -1;
    v3 = 5;
  }
  while ( 1 )
  {
    v4 = byte_3020B228[v3];
    if ( v4 )
    {
      if ( !a2
        || dword_3020B020[*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v4) + 416)]
         + dword_3020B120[*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v4) + 424)] )
      {
        break;
      }
    }
    v3 += v2;
    if ( !v3 || v3 == 6 )
      return 0;
  }
  sub_300398B0(byte_3020B228[v3], *(int *)dword_301CF58C);
  return 1;
}
// 300F0FB4: using guessed type int dword_300F0FB4;

//----- (30039D40) --------------------------------------------------------
int __usercall sub_30039D40@<eax>(int a1@<eax>, int a2)
{
  int v2; // eax
  char v3; // bl
  int v4; // ebp
  int v5; // esi
  _DWORD *v6; // edx
  int v7; // eax
  char v8; // cl
  int v10; // [esp+0h] [ebp-4h]

  if ( a1 )
  {
    v2 = 1;
    v10 = 1;
  }
  else
  {
    v2 = dword_300F0FB0;
    v10 = -1;
  }
  v3 = byte_3020B22A;
  v4 = dword_300F0FB4;
  v5 = v2;
  do
  {
    while ( ((1 << (v5 & 0x1F)) & dword_3020B220[v5 >> 5]) != 0 && !sub_300103A0((int)&dword_3020AF14, v5, 1) )
    {
      v6 = *(_DWORD **)(v4 + 4 * v5);
      if ( v6[31] )
      {
        v7 = v6[30];
        switch ( v7 )
        {
          case 1:
          case 2:
            if ( !byte_3020B229 || *(_DWORD *)(*(_DWORD *)(v4 + 4 * byte_3020B229) + 124) || !v3 )
              goto LABEL_19;
            v7 = *(_DWORD *)(*(_DWORD *)(v4 + 4 * v3) + 124);
            break;
          case 3:
          case 4:
          case 5:
            v8 = byte_3020B228[v7];
            if ( v8 && !*(_DWORD *)(*(_DWORD *)(v4 + 4 * v8) + 124) )
              goto LABEL_16;
            break;
          default:
            goto LABEL_16;
        }
        if ( v7 )
          break;
      }
LABEL_16:
      if ( !a2 || dword_3020B020[v6[104]] + dword_3020B120[v6[106]] )
      {
        sub_300398B0(v5, *(int *)dword_301CF58C);
        return 1;
      }
    }
LABEL_19:
    v5 += v10;
  }
  while ( v5 && v5 != dword_300F0FB0 );
  return 0;
}
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020B220: using guessed type int dword_3020B220[];
// 3020B229: using guessed type char byte_3020B229;
// 3020B22A: using guessed type char byte_3020B22A;

//----- (30039E80) --------------------------------------------------------
int __cdecl sub_30039E80(int a1, int a2)
{
  int result; // eax
  int v3; // ebp
  int v4; // ebx
  int v5; // esi
  int v6; // eax
  int i; // edx
  char v8; // al
  int v9; // edx
  int v10; // ebx
  _DWORD *v11; // ebp
  int v12; // eax
  int v13; // eax
  bool v14; // zf
  char v15; // cl
  int v16; // [esp+0h] [ebp-8h]
  int v17; // [esp+4h] [ebp-4h]

  result = dword_301E5F20;
  if ( !dword_301E5F20 || (*(_DWORD *)(dword_301E5F20 + 24) & 0x20000) == 0 )
    return result;
  if ( a1 )
  {
    v3 = 1;
    v4 = 1;
    v16 = 1;
  }
  else
  {
    v4 = -1;
    v3 = 5;
    v16 = dword_300F0FB0;
  }
  v5 = *(_DWORD *)dword_301CF58C;
  v6 = sub_300103A0((int)&dword_3020AF14, *(int *)dword_301CF58C, 1);
  if ( v6 || (v6 = sub_300104C0(0, v5, (int)&dword_3020AF14), v5 = *(_DWORD *)dword_301CF58C, v6) )
  {
    for ( i = (v6 + v4 + 4) % 5 + 1; i != v3; i = (i + v4 + 4) % 5 + 1 )
    {
      v8 = byte_3020B228[i];
      if ( v8 )
      {
        if ( !a2
          || dword_3020B020[*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v8) + 416)]
           + dword_3020B120[*(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * v8) + 424)] )
        {
          return sub_300398B0(byte_3020B228[i], v5);
        }
      }
    }
    result = sub_30039D40(a1, a2);
    if ( result )
      return result;
    sub_30039CC0(a1, a2);
LABEL_39:
    result = *(_DWORD *)dword_301CF58C;
    if ( ((1 << (dword_301CF58C[0] & 0x1F)) & dword_3020B220[*(int *)dword_301CF58C >> 5]) == 0 )
    {
      dword_302106D4 = dword_3020AF00;
      if ( *(_DWORD *)dword_301CF58C )
      {
        sub_300403F0("%i", 0);
        dword_30076898(9);
        result = dword_30076898(9);
      }
    }
    return result;
  }
  v9 = dword_300F0FB0 + v4 - 1;
  v10 = dword_300F0FB4;
  v17 = v9;
  while ( 1 )
  {
    v5 = (v5 + v17) % dword_300F0FB0 + 1;
    if ( v5 == v16 )
      break;
    if ( ((1 << (v5 & 0x1F)) & dword_3020B220[v5 >> 5]) != 0 )
    {
      v11 = *(_DWORD **)(v10 + 4 * v5);
      v12 = v11[194];
      if ( v12 )
      {
        while ( v12 != *(_DWORD *)dword_301CF58C )
        {
          if ( v12 != v5 )
          {
            v12 = *(_DWORD *)(*(_DWORD *)(v10 + 4 * v12) + 776);
            if ( v12 )
              continue;
          }
          goto LABEL_23;
        }
      }
      else
      {
LABEL_23:
        if ( !sub_300103A0((int)&dword_3020AF14, v5, 1) )
        {
          if ( !v11[31] )
            goto LABEL_34;
          v13 = v11[30];
          switch ( v13 )
          {
            case 1:
            case 2:
              if ( !byte_3020B229 || *(_DWORD *)(*(_DWORD *)(v10 + 4 * byte_3020B229) + 124) || !byte_3020B22A )
                continue;
              v14 = *(_DWORD *)(*(_DWORD *)(v10 + 4 * byte_3020B22A) + 124) == 0;
              break;
            case 3:
            case 4:
            case 5:
              v15 = byte_3020B228[v13];
              if ( v15 && !*(_DWORD *)(*(_DWORD *)(v10 + 4 * v15) + 124) )
                goto LABEL_34;
              v14 = v13 == 0;
              break;
            default:
              goto LABEL_34;
          }
          if ( v14 )
          {
LABEL_34:
            if ( !a2 || dword_3020B020[v11[104]] + dword_3020B120[v11[106]] )
              return sub_300398B0(v5, *(int *)dword_301CF58C);
          }
        }
      }
    }
  }
  result = sub_30039CC0(a1, a2);
  if ( !result )
  {
    sub_30039D40(a1, a2);
    goto LABEL_39;
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF14: using guessed type int dword_3020AF14;
// 3020B220: using guessed type int dword_3020B220[];
// 3020B229: using guessed type char byte_3020B229;
// 3020B22A: using guessed type char byte_3020B22A;
// 302106D4: using guessed type int dword_302106D4;

//----- (3003A160) --------------------------------------------------------
int __cdecl sub_3003A160(int a1)
{
  int v1; // ecx
  int result; // eax
  char *v3; // esi

  result = dword_301DC84C;
  if ( dword_301DC84C )
  {
    if ( *(int *)(v1 + 4) < 12 )
    {
      result = *(_DWORD *)(v1 + 200);
      if ( result )
      {
        if ( result > dword_300F0FB0 )
          return sub_30021A30("CG_FireWeapon: ent->weapon > BG_GetNumWeapons()");
        v3 = (char *)&unk_301AA4E0 + 408 * result;
        if ( *((_DWORD *)v3 + 81) && a1 == 161 )
        {
          result = dword_30076898(224);
          if ( result < 0 )
            return result;
          return dword_30076898(230);
        }
        if ( *((_DWORD *)v3 + 80) )
        {
          result = dword_30076898(224);
          if ( result >= 0 )
            return dword_30076898(230);
        }
      }
    }
  }
  return result;
}
// 3003A170: variable 'v1' is possibly undefined
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB0: using guessed type int dword_300F0FB0;
// 301DC84C: using guessed type int dword_301DC84C;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (3003A2A0) --------------------------------------------------------
int __usercall sub_3003A2A0@<eax>(_DWORD *a1@<esi>, int a2, int a3)
{
  int result; // eax
  int v4; // edi
  int v5; // ecx
  _DWORD *v6; // ebp
  int v7; // [esp+10h] [ebp-50h]
  int v8; // [esp+14h] [ebp-4Ch] BYREF
  int v9; // [esp+18h] [ebp-48h]
  int v10; // [esp+1Ch] [ebp-44h]
  char v11[48]; // [esp+20h] [ebp-40h] BYREF
  int v12; // [esp+50h] [ebp-10h]
  int v13; // [esp+54h] [ebp-Ch]
  int v14; // [esp+58h] [ebp-8h]

  result = a1[50];
  if ( result )
  {
    if ( result > dword_300F0FB0 )
      return sub_30021A30("CG_FireWeapon: ent->weapon > BG_GetNumWeapons()");
    v4 = a2;
    *(_DWORD *)(a2 + 484) = 1;
    v5 = dword_301E5F20;
    v6 = (_DWORD *)((char *)&unk_301AA4E0 + 408 * result);
    if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0x30000) != 0 && *a1 == *(_DWORD *)(dword_301E5F20 + 184) )
    {
      sub_30014280((int)&dword_3020AF14, (float *)&dword_30210960, (float *)&dword_302108E0);
      v5 = dword_301E5F20;
      v4 = a2;
    }
    if ( a1[1] == 11 )
    {
      sub_30038600(a1[50], 0);
      v5 = dword_301E5F20;
    }
    v7 = v6[52];
    if ( v6[54] && a3 == 161 )
      v7 = v6[54];
    if ( !v7 )
      goto LABEL_23;
    if ( (*(_DWORD *)(v5 + 24) & 0x30000) != 0 && *a1 == *(_DWORD *)(v5 + 184) )
    {
      if ( *v6 && sub_3001D610((int)v11) )
      {
        v8 = v12;
        v9 = v13;
        v10 = v14;
LABEL_22:
        sub_30022ED0();
LABEL_23:
        result = *(_DWORD *)(*(_DWORD *)(dword_300F0FB4 + 4 * a1[50]) + 712);
        if ( !result )
          result = sub_3003A160(a3);
        return result;
      }
    }
    else if ( dword_30076898(163) && sub_3001D540(v4, (int)v11) )
    {
      v8 = v12;
      v9 = v13;
      v10 = v14;
      goto LABEL_22;
    }
    sub_30005970(dword_3020AF00, (int)&v8, (int)(a1 + 3));
    goto LABEL_22;
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0FB0: using guessed type int dword_300F0FB0;
// 300F0FB4: using guessed type int dword_300F0FB4;
// 301E5F20: using guessed type int dword_301E5F20;
// 3020AF00: using guessed type int dword_3020AF00;
// 3020AF14: using guessed type int dword_3020AF14;
// 302108E0: using guessed type int dword_302108E0;
// 30210960: using guessed type int dword_30210960;

//----- (3003A510) --------------------------------------------------------
void __usercall sub_3003A510(float *a1@<eax>, float *a2@<ebx>)
{
  double v2; // st7
  double v3; // st7
  float v4; // [esp+8h] [ebp-1Ch]
  float v5; // [esp+Ch] [ebp-18h] BYREF
  float v6; // [esp+10h] [ebp-14h]
  float v7; // [esp+14h] [ebp-10h]
  float v8; // [esp+18h] [ebp-Ch] BYREF
  float v9; // [esp+1Ch] [ebp-8h]
  float v10; // [esp+20h] [ebp-4h]

  v8 = *a1 - *a2;
  v9 = a1[1] - a2[1];
  v10 = a1[2] - a2[2];
  sub_3003B600(&v8, &v5);
  v2 = (flt_3020D350 - a2[2]) * v7 + (flt_3020D34C - a2[1]) * v6 + (flt_3020D348 - *a2) * v5;
  v4 = v2;
  if ( v2 >= 64.0 && v7 * v10 + v6 * v9 + v5 * v8 >= v4 - -64.0 )
  {
    v3 = v4 * v5 + *a2;
    v9 = v4 * v6 + a2[1];
    v10 = v4 * v7 + a2[2];
    if ( sqrt(
           (v10 - flt_3020D350) * (v10 - flt_3020D350)
         + (v9 - flt_3020D34C) * (v9 - flt_3020D34C)
         + (v3 - flt_3020D348) * (v3 - flt_3020D348)) <= 140.0 )
    {
      v8 = v3 - v5 * 16.0;
      v9 = v9 - v6 * 16.0;
      v10 = v10 - v7 * 16.0;
      sub_30022ED0();
    }
  }
}
// 301D9CA8: using guessed type int dword_301D9CA8;
// 3020D348: using guessed type float flt_3020D348;
// 3020D34C: using guessed type float flt_3020D34C;
// 3020D350: using guessed type float flt_3020D350;

//----- (3003A680) --------------------------------------------------------
int __usercall sub_3003A680@<eax>(float *a1@<eax>, float *a2@<ecx>)
{
  float v2; // ebx
  float v3; // ebp
  float v4; // edx
  float v5; // ecx
  float *v6; // esi
  int v7; // eax
  int v8; // edi
  unsigned __int64 v9; // rax
  float v11; // [esp+8h] [ebp-34h]
  float v12; // [esp+8h] [ebp-34h]
  float v13; // [esp+Ch] [ebp-30h]
  float v14; // [esp+Ch] [ebp-30h]
  float v15; // [esp+10h] [ebp-2Ch]
  float v16; // [esp+10h] [ebp-2Ch]
  float v17; // [esp+14h] [ebp-28h]
  float v18; // [esp+14h] [ebp-28h]
  float v19; // [esp+20h] [ebp-1Ch]
  float v20; // [esp+24h] [ebp-18h] BYREF
  float v21; // [esp+28h] [ebp-14h]
  float v22; // [esp+2Ch] [ebp-10h]
  float v23; // [esp+30h] [ebp-Ch]
  float v24; // [esp+34h] [ebp-8h]
  float v25; // [esp+38h] [ebp-4h]

  v2 = *a2;
  v3 = a2[1];
  v13 = *a1;
  v4 = a1[2];
  v19 = a2[2];
  v5 = a1[1];
  v20 = *a1 - v2;
  v15 = v5;
  v17 = v4;
  v21 = v5 - v3;
  v22 = v4 - v19;
  sub_3003B3D0(&v20);
  v11 = -flt_3029D8C8;
  v14 = v11 * v20 + v13;
  v16 = v11 * v21 + v15;
  v18 = v11 * v22 + v17;
  v23 = v14 - v2;
  v24 = v16 - v3;
  v25 = v18 - v19;
  v12 = sqrt(v25 * v25 + v24 * v24 + v23 * v23);
  v6 = (float *)sub_300211F0();
  *((_DWORD *)v6 + 2) = 2;
  if ( dword_3020AEFC )
    v7 = rand() % dword_3020AEFC / 2;
  else
    v7 = 0;
  v8 = dword_3020AF00 - v7;
  v9 = (unsigned __int64)(v12 * -1000.0 / flt_301E27E8);
  *((_DWORD *)v6 + 7) = v8;
  v6[9] = v2;
  v6[10] = v3;
  *((_DWORD *)v6 + 6) = 2;
  v6[11] = v19;
  *((_DWORD *)v6 + 4) = v8 - v9;
  v6[12] = flt_301E27E8 * v20;
  v6[13] = flt_301E27E8 * v21;
  v6[14] = flt_301E27E8 * v22;
  return v9;
}
// 301E27E8: using guessed type float flt_301E27E8;
// 3020AF00: using guessed type int dword_3020AF00;
// 3029D8C8: using guessed type float flt_3029D8C8;

//----- (3003A810) --------------------------------------------------------
int __usercall sub_3003A810@<eax>(float *a1@<ebx>, float *a2@<edi>)
{
  double v2; // st7
  double v3; // st6
  double v4; // st5
  double v5; // st4
  double v6; // st5
  double v7; // st7
  double v8; // st6
  double v9; // st6
  double v10; // st5
  double v11; // st5
  double v12; // st4
  double v13; // st3
  double v14; // st3
  double v15; // rt0
  double v16; // st4
  double v17; // st4
  double v18; // st5
  float v20; // [esp+4h] [ebp-A4h]
  float v21; // [esp+4h] [ebp-A4h]
  float v22; // [esp+8h] [ebp-A0h] BYREF
  float v23; // [esp+Ch] [ebp-9Ch]
  float v24; // [esp+10h] [ebp-98h]
  float v25; // [esp+14h] [ebp-94h]
  float v26; // [esp+18h] [ebp-90h]
  float v27; // [esp+1Ch] [ebp-8Ch]
  float v28; // [esp+20h] [ebp-88h]
  float v29; // [esp+24h] [ebp-84h]
  int v30; // [esp+28h] [ebp-80h]
  int v31; // [esp+2Ch] [ebp-7Ch]
  int v32; // [esp+30h] [ebp-78h]
  int v33; // [esp+34h] [ebp-74h]
  char v34; // [esp+38h] [ebp-70h]
  char v35; // [esp+39h] [ebp-6Fh]
  char v36; // [esp+3Ah] [ebp-6Eh]
  char v37; // [esp+3Bh] [ebp-6Dh]
  float v38; // [esp+3Ch] [ebp-6Ch]
  float v39; // [esp+40h] [ebp-68h]
  float v40; // [esp+44h] [ebp-64h]
  int v41; // [esp+48h] [ebp-60h]
  int v42; // [esp+4Ch] [ebp-5Ch]
  int v43; // [esp+50h] [ebp-58h]
  int v44; // [esp+54h] [ebp-54h]
  char v45; // [esp+58h] [ebp-50h]
  char v46; // [esp+59h] [ebp-4Fh]
  char v47; // [esp+5Ah] [ebp-4Eh]
  char v48; // [esp+5Bh] [ebp-4Dh]
  float v49; // [esp+5Ch] [ebp-4Ch]
  float v50; // [esp+60h] [ebp-48h]
  float v51; // [esp+64h] [ebp-44h]
  int v52; // [esp+68h] [ebp-40h]
  int v53; // [esp+6Ch] [ebp-3Ch]
  int v54; // [esp+70h] [ebp-38h]
  int v55; // [esp+74h] [ebp-34h]
  char v56; // [esp+78h] [ebp-30h]
  char v57; // [esp+79h] [ebp-2Fh]
  char v58; // [esp+7Ah] [ebp-2Eh]
  char v59; // [esp+7Bh] [ebp-2Dh]
  float v60; // [esp+7Ch] [ebp-2Ch]
  float v61; // [esp+80h] [ebp-28h]
  float v62; // [esp+84h] [ebp-24h]
  int v63; // [esp+88h] [ebp-20h]
  int v64; // [esp+8Ch] [ebp-1Ch]
  int v65; // [esp+90h] [ebp-18h]
  int v66; // [esp+94h] [ebp-14h]
  char v67; // [esp+98h] [ebp-10h]
  char v68; // [esp+99h] [ebp-Fh]
  char v69; // [esp+9Ah] [ebp-Eh]
  char v70; // [esp+9Bh] [ebp-Dh]
  float v71; // [esp+9Ch] [ebp-Ch]

  v2 = *a2 - *a1;
  v3 = a2[1] - a1[1];
  v4 = a2[2] - a1[2];
  v71 = flt_3020D368 * v4 + flt_3020D364 * v3 + flt_3020D360 * v2;
  v5 = *(float *)&dword_3020D374 * v4 + *(float *)&dword_3020D370 * v3 + *(float *)&dword_3020D36C * v2;
  v23 = flt_3020D364 * v5;
  v24 = flt_3020D368 * v5;
  v6 = -v71;
  v20 = v6;
  v22 = v6 * *(float *)&dword_3020D36C + flt_3020D360 * v5;
  v23 = v20 * *(float *)&dword_3020D370 + v23;
  v24 = v20 * *(float *)&dword_3020D374 + v24;
  sub_3003B3D0(&v22);
  v30 = 1065353216;
  v7 = flt_302115E8 * v22;
  v31 = 1065353216;
  v32 = 1065353216;
  v33 = 1065353216;
  v34 = -1;
  v8 = v7 + *a2;
  v35 = -1;
  v36 = -1;
  v37 = -1;
  v27 = v8;
  v9 = flt_302115E8 * v23;
  v28 = v9 + a2[1];
  v10 = flt_302115E8 * v24;
  v25 = v10;
  v29 = v10 + a2[2];
  v11 = -flt_302115E8;
  v45 = -1;
  v12 = v22 * v11;
  v46 = -1;
  v47 = -1;
  v48 = -1;
  v56 = -1;
  v13 = v12 + *a2;
  v57 = -1;
  v58 = -1;
  v59 = -1;
  v38 = v13;
  v67 = -1;
  v68 = -1;
  v14 = v11 * v23;
  v69 = -1;
  v70 = -1;
  v21 = v14;
  v39 = v14 + a2[1];
  v41 = 1065353216;
  v15 = v12;
  v42 = 0;
  v16 = v11 * v24;
  v43 = 1065353216;
  v44 = 0;
  v52 = 0;
  v26 = v16;
  v53 = 0;
  v17 = v16 + a2[2];
  v54 = 0;
  v55 = 0;
  v63 = 0;
  v40 = v17;
  v64 = 1065353216;
  v65 = 0;
  v18 = v15 + *a1;
  v66 = 1065353216;
  v49 = v18;
  v50 = v21 + a1[1];
  v51 = v26 + a1[2];
  v60 = v7 + *a1;
  v61 = v9 + a1[1];
  v62 = v25 + a1[2];
  return dword_30076898(64);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301D9644: using guessed type int dword_301D9644;
// 3020D360: using guessed type float flt_3020D360;
// 3020D364: using guessed type float flt_3020D364;
// 3020D368: using guessed type float flt_3020D368;
// 3020D36C: using guessed type int dword_3020D36C;
// 3020D370: using guessed type int dword_3020D370;
// 3020D374: using guessed type int dword_3020D374;
// 302115E8: using guessed type float flt_302115E8;

//----- (3003AA90) --------------------------------------------------------
int __usercall sub_3003AA90@<eax>(float *a1@<eax>, float *a2@<ecx>, int a3)
{
  double v4; // st7
  int result; // eax
  double v6; // st7
  float v7; // [esp+8h] [ebp-2Ch]
  float v8; // [esp+Ch] [ebp-28h]
  float v9; // [esp+10h] [ebp-24h] BYREF
  float v10; // [esp+14h] [ebp-20h]
  float v11; // [esp+18h] [ebp-1Ch]
  float v12[3]; // [esp+1Ch] [ebp-18h] BYREF
  float v13[3]; // [esp+28h] [ebp-Ch] BYREF

  v9 = *a1 - *a2;
  v10 = a1[1] - a2[1];
  v11 = a1[2] - a2[2];
  v4 = sub_3003B3D0(&v9);
  v8 = v4;
  if ( v4 >= 100.0 || (result = a3) != 0 )
  {
    v7 = (double)rand() * 0.000030517578 * (v8 - 60.0) + 50.0;
    v6 = flt_3029D8C8 + v7;
    if ( v6 > v8 )
      v6 = v8;
    v13[0] = v7 * v9 + *a2;
    v13[1] = v7 * v10 + a2[1];
    v13[2] = v7 * v11 + a2[2];
    v12[0] = v9 * v6 + *a2;
    v12[1] = v10 * v6 + a2[1];
    v12[2] = v6 * v11 + a2[2];
    result = sub_3003A810(v13, v12);
  }
  return result;
}
// 3029D8C8: using guessed type float flt_3029D8C8;

//----- (3003AB90) --------------------------------------------------------
int __usercall sub_3003AB90@<eax>(int a1@<ebx>, int a2@<edi>, const char *ArgList)
{
  double v3; // st7
  int result; // eax
  _DWORD *v5; // esi
  int v6; // ecx
  int v7; // edx
  int v8; // eax
  char v9[48]; // [esp+4h] [ebp-40h] BYREF
  int v10; // [esp+34h] [ebp-10h]
  int v11; // [esp+38h] [ebp-Ch]
  int v12; // [esp+3Ch] [ebp-8h]

  if ( (*(_DWORD *)(dword_301E5F20 + 24) & 0x30000) != 0 && a1 == *(_DWORD *)(dword_301E5F20 + 184) )
  {
    *(_DWORD *)a2 = *(_DWORD *)(dword_301E5F20 + 32);
    *(_DWORD *)(a2 + 4) = *(_DWORD *)(dword_301E5F20 + 36);
    v3 = *(float *)(dword_301E5F20 + 40);
    *(float *)(a2 + 8) = *(float *)(dword_301E5F20 + 40);
    *(float *)(a2 + 8) = v3 + *(float *)(dword_301E5F20 + 220);
    sub_30040DF0((float *)a2, flt_3020D384, *(float *)(dword_301E5F20 + 76), 16.0, 20.0);
    return 1;
  }
  v5 = (_DWORD *)((char *)&unk_30211940 + 552 * a1);
  result = dword_30076898(163);
  if ( result )
  {
    if ( sub_3001D540((int)&unk_30211940 + 552 * a1, (int)v9) )
    {
      v6 = v11;
      v7 = v12;
      *(_DWORD *)a2 = v10;
      *(_DWORD *)(a2 + 4) = v6;
      *(_DWORD *)(a2 + 8) = v7;
      return 1;
    }
    *(_DWORD *)a2 = v5[6];
    *(_DWORD *)(a2 + 4) = v5[7];
    *(_DWORD *)(a2 + 8) = v5[8];
    if ( a1 < 64 )
    {
      sub_30021BD0("No %s in CG_CalcMuzzlePoint on entity %d.\n", ArgList, a1);
      v8 = v5[2];
      if ( (v8 & 0x40) != 0 )
      {
        result = 1;
        *(float *)(a2 + 8) = (double)dword_301A09CC + *(float *)(a2 + 8);
        return result;
      }
      if ( (v8 & 0x20) != 0 )
      {
        result = 1;
        *(float *)(a2 + 8) = (double)dword_301A148C + *(float *)(a2 + 8);
        return result;
      }
      *(float *)(a2 + 8) = (double)dword_301A112C + *(float *)(a2 + 8);
    }
    result = 1;
  }
  return result;
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301A09CC: using guessed type int dword_301A09CC;
// 301A112C: using guessed type int dword_301A112C;
// 301A148C: using guessed type int dword_301A148C;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (3003ACE0) --------------------------------------------------------
void __usercall sub_3003ACE0(int a1@<eax>, float *a2@<esi>, int a3, const char *ArgList)
{
  float v5[3]; // [esp+10h] [ebp-Ch] BYREF

  if ( flt_301E3208 > 0.0 && sub_3003AB90(a1, (int)v5, ArgList) )
  {
    if ( ((*(_DWORD *)(dword_301E5F20 + 24) & 0x30000) == 0 || a1 != *(_DWORD *)(dword_301E5F20 + 184))
      && flt_301E3208 * 32768.0 > (double)rand() )
    {
      if ( a3 == 7 )
      {
        sub_3003AA90(a2, v5, 0);
        sub_3003A510(a2, v5);
        return;
      }
      sub_3003A680(a2, v5);
    }
    sub_3003A510(a2, v5);
  }
}
// 301E3208: using guessed type float flt_301E3208;
// 301E5F20: using guessed type int dword_301E5F20;

//----- (3003AD90) --------------------------------------------------------
void __usercall sub_3003AD90(int a1@<eax>, float *a2@<ecx>, int a3@<ebx>, int a4)
{
  int v5; // edi
  int v6; // ebp

  if ( a1 == 173 )
  {
    v5 = dword_301D9D18[a3];
    v6 = dword_301D9D74[a3];
  }
  else
  {
    v5 = dword_301D9DD0[a3];
    v6 = dword_301D9E2C[a3];
  }
  if ( !dword_3029BEEC && a3 == 7 )
  {
    v5 = dword_301DA054;
    v6 = 0;
  }
  sub_30022ED0();
  if ( v5 )
    dword_30076898(229);
  if ( v6 )
    dword_30076898(229);
  sub_3003ACE0(a4, a2, a3, *(const char **)off_3007686C);
}
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 301DA054: using guessed type int dword_301DA054;
// 3029BEEC: using guessed type int dword_3029BEEC;

//----- (3003AE40) --------------------------------------------------------
void __usercall sub_3003AE40(float *a1@<ecx>, int a2@<edi>, int a3)
{
  sub_30022ED0();
  sub_3003ACE0(a3, a1, a2, *(const char **)off_3007686C);
}

//----- (3003B0C0) --------------------------------------------------------
int __usercall sub_3003B0C0@<eax>(int a1@<eax>, _DWORD *a2@<ecx>)
{
  int v2; // eax
  int result; // eax

  if ( a1 < 0 || a1 >= 162 )
  {
    *a2 = 0;
    result = 0;
    a2[1] = 0;
    a2[2] = 0;
  }
  else
  {
    v2 = 3 * a1;
    *a2 = dword_300760D0[v2];
    a2[1] = dword_300760D4[v2];
    result = dword_300760D8[v2];
    a2[2] = result;
  }
  return result;
}
// 300760D0: using guessed type int dword_300760D0[];
// 300760D4: using guessed type int dword_300760D4[];
// 300760D8: using guessed type int dword_300760D8[];

//----- (3003B280) --------------------------------------------------------
double __usercall sub_3003B280@<st0>(float *a1@<eax>, float *a2@<ecx>)
{
  float v4; // [esp+4h] [ebp-Ch]
  float v5; // [esp+8h] [ebp-8h]
  float v6; // [esp+Ch] [ebp-4h]

  v4 = *a1 - *a2;
  v5 = a1[1] - a2[1];
  v6 = a1[2] - a2[2];
  return (float)sqrt(v6 * v6 + v5 * v5 + v4 * v4);
}

//----- (3003B380) --------------------------------------------------------
float *__usercall sub_3003B380@<eax>(float *result@<eax>, float *a2@<edx>, float *a3@<ecx>)
{
  *a2 = result[2] * a3[1] - a3[2] * result[1];
  a2[1] = a3[2] * *result - *a3 * result[2];
  a2[2] = *a3 * result[1] - *result * a3[1];
  return result;
}

//----- (3003B3D0) --------------------------------------------------------
double __usercall sub_3003B3D0@<st0>(float *a1@<esi>)
{
  double result; // st7
  float v2; // [esp+0h] [ebp-Ch]
  float v3; // [esp+0h] [ebp-Ch]
  float v4; // [esp+0h] [ebp-Ch]

  v2 = *a1 * *a1 + a1[1] * a1[1] + a1[2] * a1[2];
  v3 = sqrt(v2);
  result = v3;
  if ( v3 != 0.0 )
  {
    v4 = 1.0 / result;
    *a1 = v4 * *a1;
    a1[1] = v4 * a1[1];
    a1[2] = v4 * a1[2];
  }
  return result;
}

//----- (3003B460) --------------------------------------------------------
double __usercall sub_3003B460@<st0>(float *a1@<esi>)
{
  double result; // st7
  float v2; // [esp+0h] [ebp-8h]
  float v3; // [esp+0h] [ebp-8h]
  float v4; // [esp+4h] [ebp-4h]

  v2 = *a1 * *a1 + a1[1] * a1[1];
  v3 = sqrt(v2);
  result = v3;
  if ( v3 != 0.0 )
  {
    v4 = 1.0 / result;
    *a1 = v4 * *a1;
    a1[1] = v4 * a1[1];
  }
  return result;
}

//----- (3003B600) --------------------------------------------------------
double __usercall sub_3003B600@<st0>(float *a1@<edi>, float *a2@<esi>)
{
  double result; // st7
  float v3; // [esp+0h] [ebp-Ch]
  float v4; // [esp+0h] [ebp-Ch]
  float v5; // [esp+0h] [ebp-Ch]

  v3 = *a1 * *a1 + a1[1] * a1[1] + a1[2] * a1[2];
  v4 = sqrt(v3);
  result = v4;
  if ( v4 == 0.0 )
  {
    a2[2] = 0.0;
    a2[1] = 0.0;
    *a2 = 0.0;
  }
  else
  {
    v5 = 1.0 / result;
    *a2 = v5 * *a1;
    a2[1] = v5 * a1[1];
    a2[2] = v5 * a1[2];
  }
  return result;
}

//----- (3003B770) --------------------------------------------------------
int __usercall sub_3003B770@<eax>(float *a1@<eax>, int a2, int a3, float a4)
{
  float v4; // esi
  float v5; // edi
  int result; // eax
  float v7; // [esp+10h] [ebp-C0h]
  float v8; // [esp+18h] [ebp-B8h]
  float v9; // [esp+1Ch] [ebp-B4h] BYREF
  float v10; // [esp+20h] [ebp-B0h]
  float v11; // [esp+24h] [ebp-ACh]
  float v12; // [esp+28h] [ebp-A8h]
  float v13; // [esp+2Ch] [ebp-A4h]
  float v14; // [esp+30h] [ebp-A0h]
  float v15[10]; // [esp+34h] [ebp-9Ch] BYREF
  float v16; // [esp+5Ch] [ebp-74h]
  float *v17; // [esp+60h] [ebp-70h]
  float v18[9]; // [esp+64h] [ebp-6Ch] BYREF
  float v19[9]; // [esp+88h] [ebp-48h] BYREF
  float v20[9]; // [esp+ACh] [ebp-24h] BYREF

  v4 = *a1;
  v5 = a1[1];
  v7 = *a1;
  v8 = a1[2];
  sub_3003C080(&v9, a1);
  v15[0] = v9;
  v15[5] = v5;
  v15[3] = v10;
  v15[2] = v4;
  v15[6] = v11;
  v12 = v10 * v8 - v11 * v5;
  v15[1] = v12;
  v13 = v11 * v7 - v9 * v8;
  v15[4] = v13;
  v14 = v9 * v5 - v10 * v7;
  v15[7] = v14;
  v15[8] = v8;
  qmemcpy(v19, v15, sizeof(v19));
  v19[1] = v10;
  v19[6] = v7;
  v19[7] = v5;
  memset(v18, 0, sizeof(v18));
  v19[2] = v11;
  v19[5] = v14;
  v18[8] = 1.0;
  v19[3] = v12;
  v17 = v18;
  v16 = a4 * 3.1415927 / 180.0;
  LODWORD(v15[9]) = &v18[1];
  v18[0] = cos(v16);
  v18[1] = sin(v16);
  v18[4] = v18[0];
  v18[3] = -v18[1];
  sub_3003C250(v18, v20, v15);
  sub_3003C250(v19, v15, v20);
  result = a2;
  *(float *)a2 = v15[2] * *(float *)(a3 + 8) + v15[1] * *(float *)(a3 + 4) + v15[0] * *(float *)a3;
  *(float *)(a2 + 4) = v15[4] * *(float *)(a3 + 4) + v15[3] * *(float *)a3 + v15[5] * *(float *)(a3 + 8);
  *(float *)(a2 + 8) = v15[7] * *(float *)(a3 + 4) + v15[6] * *(float *)a3 + v15[8] * *(float *)(a3 + 8);
  return result;
}

//----- (3003BA90) --------------------------------------------------------
double __thiscall sub_3003BA90(float *this)
{
  double v2; // st7
  float v3; // [esp+0h] [ebp-4h]

  if ( this[1] == 0.0 && *this == 0.0 )
    return 0.0;
  v2 = this[1];
  sub_3005D00A(this, v2);
  v3 = v2 * 180.0 / 3.141592741012573;
  if ( v3 < 0.0 )
    v3 = v3 + 360.0;
  return v3;
}
// 3005D00A: using guessed type double __usercall sub_3005D00A@<st0>(_DWORD, double@<st0>);

//----- (3003BB00) --------------------------------------------------------
double __thiscall sub_3003BB00(float *this)
{
  double v2; // st7

  if ( this[1] == 0.0 && *this == 0.0 )
    return 0.0;
  v2 = this[1];
  sub_3005D00A(this, v2);
  return (float)(v2 * 180.0 / 3.141592741012573);
}
// 3005D00A: using guessed type double __usercall sub_3005D00A@<st0>(_DWORD, double@<st0>);

//----- (3003BB50) --------------------------------------------------------
double __usercall sub_3003BB50@<st0>(float *a1@<esi>)
{
  double result; // st7
  double v2; // st7
  float v3; // [esp+0h] [ebp-8h]

  if ( a1[1] == 0.0 && *a1 == 0.0 )
  {
    if ( a1[2] <= 0.0 )
      result = 90.0;
    else
      result = 270.0;
  }
  else
  {
    v2 = a1[2];
    sub_3005D00A();
    v3 = v2 * -180.0 / 3.141592741012573;
    if ( v3 < 0.0 )
      v3 = v3 + 360.0;
    result = v3;
  }
  return result;
}

//----- (3003BC10) --------------------------------------------------------
double __usercall sub_3003BC10@<st0>(int a1@<esi>)
{
  double result; // st7
  double v2; // st7
  float v3; // [esp+0h] [ebp-8h]

  if ( *(float *)(a1 + 4) == 0.0 && *(float *)a1 == 0.0 )
  {
    if ( *(float *)(a1 + 8) <= 0.0 )
      result = 90.0;
    else
      result = -90.0;
  }
  else
  {
    v2 = *(float *)(a1 + 8);
    sub_3005D00A(*(_DWORD *)a1, v2);
    v3 = v2 * -180.0 / 3.141592741012573;
    result = v3;
  }
  return result;
}
// 3005D00A: using guessed type double __usercall sub_3005D00A@<st0>(_DWORD, double@<st0>);

//----- (3003BCB0) --------------------------------------------------------
int __usercall sub_3003BCB0@<eax>(float *a1@<edi>, float *a2@<esi>)
{
  int result; // eax
  double v3; // st7
  double v4; // st7
  float v5; // [esp+0h] [ebp-Ch]
  float v6; // [esp+4h] [ebp-8h]

  if ( a2[1] == 0.0 && *a2 == 0.0 )
  {
    if ( a2[2] <= 0.0 )
    {
      result = 1119092736;
      *a1 = 90.0;
    }
    else
    {
      result = 1132920832;
      *a1 = 270.0;
    }
    a1[1] = 0.0;
    a1[2] = 0.0;
  }
  else
  {
    v3 = a2[1];
    sub_3005D00A();
    v6 = v3 * 180.0 / 3.141592741012573;
    if ( v6 < 0.0 )
      v6 = v6 + 360.0;
    v4 = a2[2];
    sub_3005D00A();
    v5 = v4 * -180.0 / 3.141592741012573;
    if ( v5 < 0.0 )
      v5 = v5 + 360.0;
    result = LODWORD(v5);
    *a1 = v5;
    a1[1] = v6;
    a1[2] = 0.0;
  }
  return result;
}

//----- (3003BDD0) --------------------------------------------------------
int __usercall sub_3003BDD0@<eax>(float *a1@<edi>, float *a2@<esi>)
{
  int result; // eax
  double v3; // st7
  double v4; // st7
  int v5; // [esp+4h] [ebp-8h]
  float v6; // [esp+8h] [ebp-4h]

  if ( a2[1] == 0.0 && *a2 == 0.0 )
  {
    if ( a2[2] <= 0.0 )
    {
      result = 1119092736;
      *a1 = 90.0;
    }
    else
    {
      result = -1028390912;
      *a1 = -90.0;
    }
    a1[1] = 0.0;
    a1[2] = 0.0;
  }
  else
  {
    v3 = a2[1];
    sub_3005D00A();
    v6 = v3 * 180.0 / 3.141592741012573;
    v4 = a2[2];
    sub_3005D00A();
    a1[1] = v6;
    a1[2] = 0.0;
    *(float *)&v5 = v4 * -180.0 / 3.141592741012573;
    result = v5;
    *a1 = *(float *)&v5;
  }
  return result;
}

//----- (3003BEA0) --------------------------------------------------------
float *__usercall sub_3003BEA0@<eax>(float *a1@<edx>, float *a2@<ebx>, float *a3@<edi>, float *a4@<esi>)
{
  double v4; // st7
  double v5; // st7
  float *result; // eax
  double v7; // st7
  float v8; // [esp+0h] [ebp-24h] BYREF
  float v9; // [esp+4h] [ebp-20h] BYREF
  float v10; // [esp+8h] [ebp-1Ch] BYREF
  float v11; // [esp+Ch] [ebp-18h] BYREF
  float v12; // [esp+10h] [ebp-14h] BYREF
  float v13; // [esp+14h] [ebp-10h] BYREF
  float v14; // [esp+18h] [ebp-Ch]
  float *v15; // [esp+1Ch] [ebp-8h]
  float *v16; // [esp+20h] [ebp-4h]

  v4 = a1[1] * 0.017453292;
  v16 = &v9;
  v15 = &v8;
  v14 = v4;
  v9 = cos(v14);
  v8 = sin(v14);
  v5 = *a1 * 0.017453292;
  v15 = &v12;
  v16 = &v13;
  v14 = v5;
  v12 = cos(v14);
  v13 = sin(v14);
  result = &v12;
  if ( a4 )
  {
    *a4 = v12 * v9;
    a4[1] = v12 * v8;
    a4[2] = -v13;
  }
  if ( a3 || a2 )
  {
    v7 = a1[2];
    v15 = &v11;
    v16 = &v10;
    v14 = v7 * 0.017453292;
    v11 = cos(v14);
    v10 = sin(v14);
    result = &v10;
    if ( a3 )
    {
      v14 = v10 * v13;
      *a3 = v11 * v8 - v14 * v9;
      a3[1] = v11 * v9 * -1.0 - v14 * v8;
      a3[2] = v10 * v12 * -1.0;
    }
    if ( a2 )
    {
      v14 = v11 * v13;
      *a2 = v14 * v9 + v10 * v8;
      a2[1] = v14 * v8 - v10 * v9;
      a2[2] = v11 * v12;
    }
  }
  return result;
}

//----- (3003C010) --------------------------------------------------------
int __usercall sub_3003C010@<eax>(int a1@<edx>, int a2@<esi>, float a3)
{
  int result; // eax
  double v4; // st7
  int v5[3]; // [esp+0h] [ebp-10h] BYREF
  float v6; // [esp+Ch] [ebp-4h]

  v5[2] = (int)&a3;
  v6 = a3 * 0.017453292;
  v5[1] = (int)v5;
  a3 = cos(v6);
  *(float *)v5 = sin(v6);
  result = v5[0];
  if ( a1 )
  {
    *(float *)a1 = a3;
    *(_DWORD *)(a1 + 4) = result;
    *(_DWORD *)(a1 + 8) = 0;
  }
  if ( a2 )
  {
    v4 = a3;
    *(_DWORD *)a2 = result;
    *(_DWORD *)(a2 + 8) = 0;
    *(float *)(a2 + 4) = -v4;
  }
  return result;
}

//----- (3003C080) --------------------------------------------------------
void __usercall sub_3003C080(float *a1@<edx>, float *a2@<ebx>)
{
  int v2; // edi
  int i; // ecx
  float *v4; // edx
  float v5; // [esp+Ch] [ebp-14h]
  long double v6; // [esp+10h] [ebp-10h] BYREF
  int v7; // [esp+18h] [ebp-8h]

  v2 = 0;
  v5 = 1.0;
  for ( i = 0; i < 3; ++i )
  {
    v6 = fabs(a2[i]);
    if ( v5 > v6 )
    {
      v2 = i;
      v5 = v6;
    }
  }
  v7 = 0;
  v6 = 0.0;
  *((_DWORD *)&v6 + v2) = 1065353216;
  sub_3003E3D0(a2, a1, (float *)&v6);
  sub_3003B3D0(v4);
}
// 3003C0E9: variable 'v4' is possibly undefined

//----- (3003C250) --------------------------------------------------------
float *__usercall sub_3003C250@<eax>(float *result@<eax>, float *a2@<edx>, float *a3@<ecx>)
{
  *a2 = *a3 * *result + a3[1] * result[3] + result[6] * a3[2];
  a2[1] = a3[1] * result[4] + result[7] * a3[2] + result[1] * *a3;
  a2[2] = a3[1] * result[5] + result[8] * a3[2] + result[2] * *a3;
  a2[3] = a3[4] * result[3] + a3[3] * *result + a3[5] * result[6];
  a2[4] = a3[5] * result[7] + a3[4] * result[4] + a3[3] * result[1];
  a2[5] = a3[5] * result[8] + a3[4] * result[5] + a3[3] * result[2];
  a2[6] = a3[6] * *result + result[6] * a3[8] + a3[7] * result[3];
  a2[7] = result[7] * a3[8] + result[4] * a3[7] + result[1] * a3[6];
  a2[8] = result[8] * a3[8] + result[5] * a3[7] + result[2] * a3[6];
  return result;
}

//----- (3003C580) --------------------------------------------------------
float *__usercall sub_3003C580@<eax>(float *result@<eax>, float *a2@<edx>, float *a3@<ecx>)
{
  *a2 = *a3 * *result + a3[1] * result[3] + result[6] * a3[2];
  a2[3] = a3[4] * result[3] + a3[3] * *result + a3[5] * result[6];
  a2[6] = a3[7] * result[3] + a3[6] * *result + a3[8] * result[6];
  a2[1] = a3[1] * result[4] + result[7] * a3[2] + result[1] * *a3;
  a2[4] = a3[5] * result[7] + a3[4] * result[4] + a3[3] * result[1];
  a2[7] = a3[8] * result[7] + a3[7] * result[4] + a3[6] * result[1];
  a2[2] = *a3 * result[2] + a3[1] * result[5] + result[8] * a3[2];
  a2[5] = a3[5] * result[8] + a3[4] * result[5] + a3[3] * result[2];
  a2[8] = a3[8] * result[8] + a3[7] * result[5] + a3[6] * result[2];
  a2[9] = a3[10] * result[3] + a3[9] * *result + a3[11] * result[6] + result[9];
  a2[10] = a3[11] * result[7] + a3[10] * result[4] + a3[9] * result[1] + result[10];
  a2[11] = a3[11] * result[8] + a3[10] * result[5] + a3[9] * result[2] + result[11];
  return result;
}

//----- (3003C7E0) --------------------------------------------------------
float *__usercall sub_3003C7E0@<eax>(float *result@<eax>, int a2@<edx>, float *a3@<ecx>)
{
  double v3; // st7

  *(float *)a2 = *a3 * *result + a3[1] * result[3] + result[6] * a3[2];
  *(float *)(a2 + 16) = a3[5] * result[3] + a3[4] * *result + a3[6] * result[6];
  *(float *)(a2 + 32) = a3[9] * result[3] + a3[8] * *result + a3[10] * result[6];
  *(float *)(a2 + 4) = a3[1] * result[4] + result[7] * a3[2] + result[1] * *a3;
  *(float *)(a2 + 20) = a3[6] * result[7] + a3[5] * result[4] + a3[4] * result[1];
  *(float *)(a2 + 36) = a3[10] * result[7] + a3[9] * result[4] + a3[8] * result[1];
  *(float *)(a2 + 8) = *a3 * result[2] + a3[1] * result[5] + result[8] * a3[2];
  *(float *)(a2 + 24) = a3[6] * result[8] + a3[5] * result[5] + a3[4] * result[2];
  *(float *)(a2 + 40) = a3[10] * result[8] + a3[9] * result[5] + a3[8] * result[2];
  *(_DWORD *)(a2 + 12) = 0;
  *(_DWORD *)(a2 + 28) = 0;
  *(_DWORD *)(a2 + 44) = 0;
  *(float *)(a2 + 48) = a3[12] * *result + result[6] * a3[14] + a3[13] * result[3] + result[9];
  *(float *)(a2 + 52) = result[7] * a3[14] + result[4] * a3[13] + result[1] * a3[12] + result[10];
  v3 = a3[12] * result[2] + a3[14] * result[8] + a3[13] * result[5] + result[11];
  *(_DWORD *)(a2 + 60) = 1065353216;
  *(float *)(a2 + 56) = v3;
  return result;
}

//----- (3003D320) --------------------------------------------------------
int __usercall sub_3003D320@<eax>(float *a1@<edx>, float a2)
{
  int result; // eax
  double v3; // st7
  float v4[3]; // [esp+0h] [ebp-10h] BYREF
  int v5; // [esp+Ch] [ebp-4h]

  LODWORD(v4[2]) = v4;
  LODWORD(v4[1]) = &a2;
  *(float *)&v5 = a2 * 0.017453292;
  v4[0] = cos(*(float *)&v5);
  a2 = sin(*(float *)&v5);
  *(float *)&v5 = v4[0] * *a1 - a2 * a1[1];
  result = v5;
  v3 = a2 * *a1;
  *a1 = *(float *)&v5;
  a1[1] = v3 + v4[0] * a1[1];
  return result;
}

//----- (3003D390) --------------------------------------------------------
float *__usercall sub_3003D390@<eax>(float *result@<eax>, float *a2@<edx>, float *a3@<ecx>)
{
  *a2 = result[3] * *a3 + result[1] * a3[2] + a3[3] * *result - result[2] * a3[1];
  a2[1] = result[3] * a3[1] - *result * a3[2] + result[2] * *a3 + a3[3] * result[1];
  a2[2] = a3[1] * *result + result[3] * a3[2] - *a3 * result[1] + a3[3] * result[2];
  a2[3] = result[3] * a3[3] - *a3 * *result - a3[1] * result[1] - result[2] * a3[2];
  return result;
}

//----- (3003D5D0) --------------------------------------------------------
double __usercall sub_3003D5D0@<st0>(float *a1@<eax>)
{
  float v2; // [esp+0h] [ebp-10h]
  float v3; // [esp+0h] [ebp-10h]
  float v4; // [esp+4h] [ebp-Ch]
  float v5; // [esp+4h] [ebp-Ch]
  float v6; // [esp+8h] [ebp-8h]
  float v7; // [esp+8h] [ebp-8h]
  float v8; // [esp+Ch] [ebp-4h]
  float v9; // [esp+Ch] [ebp-4h]

  v8 = *a1 * *a1;
  v6 = a1[1] * a1[1];
  v4 = a1[2] * a1[2];
  v2 = a1[3] * a1[3] + v4 + v6 + v8;
  if ( v2 == 0.0 )
    return 0.0;
  v3 = 1.0 / v2;
  v9 = v3 * v8;
  v7 = v3 * v6;
  v5 = v3 * v4;
  return v5 + v7 + v9;
}

//----- (3003D700) --------------------------------------------------------
double __usercall sub_3003D700@<st0>(float *a1@<eax>)
{
  double v1; // st7
  float v3; // [esp+0h] [ebp-8h]
  float v4; // [esp+0h] [ebp-8h]
  float v5; // [esp+4h] [ebp-4h]

  v5 = *a1 * *a1;
  v3 = a1[1] * a1[1] + v5;
  v4 = 2.0 / v3;
  v1 = a1[1] * *a1 * v4;
  sub_3005D00A(LODWORD(v4), v1);
  return (float)(v1 * 57.2957763671875);
}
// 3005D00A: using guessed type double __usercall sub_3005D00A@<st0>(_DWORD, double@<st0>);

//----- (3003D9B0) --------------------------------------------------------
double __cdecl sub_3003D9B0(float a1, float a2, float a3)
{
  float v4; // [esp+0h] [ebp-4h]

  v4 = a2;
  if ( a2 - a1 > 180.0 )
    v4 = a2 - 360.0;
  if ( v4 - a1 < -180.0 )
    v4 = v4 + 360.0;
  return (float)((v4 - a1) * a3 + a1);
}

//----- (3003DA20) --------------------------------------------------------
double __cdecl sub_3003DA20(float a1, float a2)
{
  float i; // [esp+4h] [ebp+4h]

  for ( i = a1 - a2; i > 180.0; i = i - 360.0 )
    ;
  for ( ; i < -180.0; i = i + 360.0 )
    ;
  return i;
}

//----- (3003DAE0) --------------------------------------------------------
double __cdecl sub_3003DAE0(float a1)
{
  float v2; // [esp+4h] [ebp+4h]

  v2 = (float)(unsigned __int16)(unsigned __int64)(a1 * 182.04445);
  return v2 * 0.0054931641;
}

//----- (3003DB10) --------------------------------------------------------
double __cdecl sub_3003DB10(float a1)
{
  float v2; // [esp+4h] [ebp+4h]
  float v3; // [esp+4h] [ebp+4h]

  v2 = (float)(unsigned __int16)(unsigned __int64)(a1 * 182.04445);
  v3 = v2 * 0.0054931641;
  if ( v3 > 180.0 )
    v3 = v3 - 360.0;
  return v3;
}

//----- (3003DB70) --------------------------------------------------------
double __cdecl sub_3003DB70(float a1)
{
  double result; // st7

  if ( a1 >= 0.0 )
  {
    for ( ; a1 >= 360.0; a1 = a1 - 360.0 )
      ;
    result = a1;
  }
  else
  {
    do
      a1 = a1 + 360.0;
    while ( a1 < 0.0 );
    result = a1;
  }
  return result;
}

//----- (3003DBF0) --------------------------------------------------------
double __cdecl sub_3003DBF0(float a1)
{
  double result; // st7

  if ( a1 > -180.0 )
  {
    for ( ; a1 > 180.0; a1 = a1 - 360.0 )
      ;
    result = a1;
  }
  else
  {
    do
      a1 = a1 + 360.0;
    while ( a1 <= -180.0 );
    result = a1;
  }
  return result;
}

//----- (3003DE80) --------------------------------------------------------
float *__usercall sub_3003DE80@<eax>(float *a1@<eax>, float *a2@<edx>)
{
  float *result; // eax
  float v4[3]; // [esp+Ch] [ebp-Ch] BYREF

  result = sub_3003BEA0(a2, a1 + 6, v4, a1);
  a1[3] = 0.0 - v4[0];
  a1[4] = 0.0 - v4[1];
  a1[5] = 0.0 - v4[2];
  return result;
}
// 300628EC: using guessed type float flt_300628EC;

//----- (3003DED0) --------------------------------------------------------
int __usercall sub_3003DED0@<eax>(int a1@<edx>, float a2)
{
  int result; // eax
  int v3; // edx
  float v4[3]; // [esp+4h] [ebp-Ch] BYREF

  sub_3003C010(a1, (int)v4, a2);
  result = 0;
  *(_DWORD *)(v3 + 24) = 0;
  *(_DWORD *)(v3 + 28) = 0;
  *(_DWORD *)(v3 + 32) = 1065353216;
  *(float *)(v3 + 12) = 0.0 - v4[0];
  *(float *)(v3 + 16) = 0.0 - v4[1];
  *(float *)(v3 + 20) = 0.0 - v4[2];
  return result;
}
// 3003DEE7: variable 'v3' is possibly undefined
// 300628EC: using guessed type float flt_300628EC;

//----- (3003DF20) --------------------------------------------------------
void __usercall sub_3003DF20(float *a1@<eax>, int a2@<ecx>)
{
  float v4; // ecx
  float v5; // edx
  double v6; // st7
  double v8; // st7
  unsigned __int8 v9; // c0
  unsigned __int8 v10; // c2
  float v11; // [esp+8h] [ebp-24h] BYREF
  float v12; // [esp+Ch] [ebp-20h] BYREF
  float v13; // [esp+10h] [ebp-1Ch]
  float v14; // [esp+14h] [ebp-18h]
  float *v15; // [esp+18h] [ebp-14h]
  float *v16; // [esp+1Ch] [ebp-10h]
  int v17[2]; // [esp+20h] [ebp-Ch] BYREF
  float v18; // [esp+28h] [ebp-4h]

  sub_3003BCB0(a1, (float *)a2);
  v4 = *(float *)(a2 + 16);
  v5 = *(float *)(a2 + 20);
  v6 = -a1[1] * 3.1415927 / 180.0;
  v17[0] = *(_DWORD *)(a2 + 12);
  v18 = v5;
  v13 = v6;
  v11 = cos(v13);
  v12 = sin(v13);
  v16 = &v11;
  v15 = &v12;
  v14 = v11 * *(float *)v17 - v12 * v4;
  *(float *)&v17[1] = v11 * v4 + v12 * *(float *)v17;
  v13 = -*a1 * 3.1415927 / 180.0;
  v11 = cos(v13);
  v12 = sin(v13);
  *(float *)v17 = v14 * v11 + v12 * v5;
  v18 = v11 * v5 - v14 * v12;
  v13 = sub_3003BC10((int)v17);
  v8 = v13;
  if ( v9 | v10 )
  {
    v14 = 180.0;
    if ( v8 >= 0.0 )
      v14 = -180.0;
    a1[2] = v14 + v13;
  }
  else
  {
    a1[2] = -v8;
  }
}
// 3003E02D: variable 'v9' is possibly undefined
// 3003E02D: variable 'v10' is possibly undefined

//----- (3003E3D0) --------------------------------------------------------
float *__usercall sub_3003E3D0@<eax>(float *result@<eax>, float *a2@<edx>, float *a3@<ecx>)
{
  float v3; // [esp+4h] [ebp-18h]
  float v4; // [esp+8h] [ebp-14h]
  float v5; // [esp+Ch] [ebp-10h]
  float v6; // [esp+10h] [ebp-Ch]
  float v7; // [esp+14h] [ebp-8h]
  float v8; // [esp+18h] [ebp-4h]

  v5 = *result * *result + result[1] * result[1] + result[2] * result[2];
  v3 = 1.0 / v5;
  v4 = (a3[2] * result[2] + a3[1] * result[1] + *a3 * *result) * v3;
  v6 = v3 * *result;
  v7 = v3 * result[1];
  v8 = v3 * result[2];
  *a2 = *a3 - v6 * v4;
  a2[1] = a3[1] - v7 * v4;
  a2[2] = a3[2] - v8 * v4;
  return result;
}

//----- (3003EA00) --------------------------------------------------------
int *__usercall sub_3003EA00@<eax>(int *a1@<eax>, int a2@<ebx>, int *a3)
{
  int v3; // edx
  int v4; // ecx
  int v5; // eax
  int v6; // edi
  int v7; // esi
  int v8; // edx
  int v9; // eax
  int v10; // ecx
  int *result; // eax
  long double v12; // [esp+10h] [ebp-48h]
  long double v13; // [esp+18h] [ebp-40h]
  long double v14; // [esp+20h] [ebp-38h]
  int v15; // [esp+28h] [ebp-30h]
  int v16; // [esp+2Ch] [ebp-2Ch]
  int v17; // [esp+30h] [ebp-28h]
  int v18; // [esp+34h] [ebp-24h]
  int v19; // [esp+38h] [ebp-20h]
  int v20; // [esp+3Ch] [ebp-1Ch]
  int v21; // [esp+40h] [ebp-18h]
  int v22[5]; // [esp+44h] [ebp-14h]

  v3 = a1[1];
  v4 = *a1;
  v5 = a1[2];
  v6 = v3;
  v16 = v3;
  v7 = v5;
  v17 = v5;
  v22[0] = 2;
  v22[1] = 2;
  v8 = 0;
  v15 = v4;
  v18 = v4;
  v19 = v6;
  v20 = v5;
  v21 = 1;
  v22[2] = 0;
  v22[3] = 0;
  v22[4] = 1;
  do
  {
    if ( *(float *)(a2 + 4 * v8) != 0.0 )
    {
      v14 = *(float *)(a2 + 4 * v8) * 3.1415927 / 180.0;
      v12 = cos(v14);
      v13 = sin(v14);
      v9 = 4 * *(&v21 + 2 * v8);
      v10 = 4 * v22[2 * v8];
      *(float *)((char *)&v18 + v9) = *(float *)((char *)&v15 + v9) * v12 - *(float *)((char *)&v15 + v10) * v13;
      *(float *)((char *)&v18 + v10) = *(float *)((char *)&v15 + v10) * v12 + *(float *)((char *)&v15 + v9) * v13;
      v7 = v20;
      v6 = v19;
      v4 = v18;
    }
    ++v8;
    v15 = v4;
    v16 = v6;
    v17 = v7;
  }
  while ( v8 < 3 );
  result = a3;
  a3[1] = v6;
  a3[2] = v7;
  *a3 = v4;
  return result;
}

//----- (3003ED60) --------------------------------------------------------
void __cdecl sub_3003ED60(float a1, int a2)
{
  int v2[3]; // [esp+0h] [ebp-28h] BYREF
  float v3; // [esp+Ch] [ebp-1Ch]
  int v4[3]; // [esp+10h] [ebp-18h] BYREF
  float v5[3]; // [esp+1Ch] [ebp-Ch] BYREF

  v2[2] = (int)&a1;
  v3 = a1 * 0.017453292;
  v2[1] = (int)v2;
  a1 = cos(v3);
  *(float *)v2 = sin(v3);
  *(float *)v4 = a1;
  v4[1] = v2[0];
  v4[2] = 0;
  sub_3003E3D0((float *)a2, v5, (float *)v4);
  sub_3003BB50(v5);
}

//----- (3003EDE0) --------------------------------------------------------
double __cdecl sub_3003EDE0(float a1, float a2)
{
  float v3; // [esp+0h] [ebp-4h]

  dword_30076868 = 214013 * dword_30076868 + 2531011;
  v3 = (float)((unsigned int)dword_30076868 >> 17);
  return (float)((a2 - a1) * v3 / 32768.0 + a1);
}
// 30076868: using guessed type int dword_30076868;

//----- (3003EE60) --------------------------------------------------------
char *__cdecl sub_3003EE60(char *Source)
{
  int v1; // eax
  char *v2; // eax
  char *v3; // esi
  char *result; // eax

  v1 = dword_30098CC0;
  if ( dword_30098CC0 == 15 )
  {
    sub_30021B10(0, (char *)&byte_30063E0C);
    v1 = dword_30098CC0;
  }
  dword_30098CC0 = v1 + 1;
  v2 = (char *)&unk_30071B08 + 1116 * v1 + 1116;
  *((_DWORD *)v2 + 256) = 1;
  *((_DWORD *)v2 + 257) = 0;
  *((_DWORD *)v2 + 258) = 1;
  v3 = v2 + 1052;
  String = v2;
  *((_DWORD *)v2 + 259) = 0;
  result = strncpy(v2 + 1052, Source, 0x3Fu);
  v3[63] = 0;
  return result;
}

//----- (3003EF80) --------------------------------------------------------
int sub_3003EF80(char *Format, ...)
{
  char Buffer[32000]; // [esp+0h] [ebp-7D04h] BYREF
  unsigned int v3; // [esp+7D00h] [ebp-4h]
  unsigned int retaddr; // [esp+7D04h] [ebp+0h]
  va_list va; // [esp+7D0Ch] [ebp+8h] BYREF

  va_start(va, Format);
  v3 = retaddr ^ dword_300705C0;
  vsprintf(Buffer, Format, va);
  sub_30021B10(1, (char *)&byte_30063DCC, String + 1052, *((_DWORD *)String + 256), Buffer);
  return sub_30052A2E(retaddr ^ v3);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;

//----- (3003F000) --------------------------------------------------------
int sub_3003F000(char *Format, ...)
{
  char Buffer[32000]; // [esp+0h] [ebp-7D04h] BYREF
  unsigned int v3; // [esp+7D00h] [ebp-4h]
  unsigned int retaddr; // [esp+7D04h] [ebp+0h]
  va_list va; // [esp+7D0Ch] [ebp+8h] BYREF

  va_start(va, Format);
  v3 = retaddr ^ dword_300705C0;
  vsprintf(Buffer, Format, va);
  Com_Printf("File %s, line %i: %s", String + 1052, *((_DWORD *)String + 256), Buffer);
  return sub_30052A2E(retaddr ^ v3);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;

//----- (3003F080) --------------------------------------------------------
char *sub_3003F080()
{
  char *result; // eax

  result = String;
  if ( *((_DWORD *)String + 257) )
  {
    sub_3003EF80("UngetToken called twice");
    result = String;
  }
  dword_300990CC = dword_300990C8;
  *((_DWORD *)String + 257) = 1;
  return result;
}
// 300990C8: using guessed type int dword_300990C8;
// 300990CC: using guessed type int dword_300990CC;

//----- (3003F140) --------------------------------------------------------
char *__usercall sub_3003F140@<eax>(char *result@<eax>, _DWORD *a2@<esi>)
{
  int v2; // ecx
  char *v3; // edx

  v2 = *result;
  if ( v2 <= 32 )
  {
    v3 = String;
    while ( v2 )
    {
      if ( v2 == 10 )
      {
        ++*((_DWORD *)v3 + 256);
        *a2 = 1;
      }
      v2 = *++result;
      if ( v2 > 32 )
        return result;
    }
    result = 0;
  }
  return result;
}

//----- (3003F180) --------------------------------------------------------
int __fastcall sub_3003F180(_BYTE *a1)
{
  int v1; // edi
  _BYTE *v2; // esi
  char i; // dl
  char v4; // bl
  char j; // dl
  char v6; // dl
  int result; // eax

  v1 = 0;
  v2 = a1;
  if ( a1 )
  {
    for ( i = *a1; *a1; i = *a1 )
    {
      if ( i != 13 && i != 10 && i == 47 )
      {
        v4 = a1[1];
        if ( v4 == 47 )
        {
          for ( j = *a1; j; j = *++a1 )
          {
            if ( j == 10 )
              break;
          }
          continue;
        }
        if ( v4 == 42 )
        {
          v6 = *a1;
          if ( *a1 )
          {
            while ( v6 != 42 || a1[1] != 47 )
            {
              if ( v6 == 10 )
              {
                *v2++ = 10;
                ++v1;
              }
              v6 = *++a1;
              if ( !v6 )
                goto LABEL_22;
            }
            if ( *a1 )
              a1 += 2;
          }
          continue;
        }
      }
      *v2++ = i;
      ++v1;
      ++a1;
LABEL_22:
      ;
    }
  }
  result = v1;
  *v2 = 0;
  return result;
}

//----- (3003F220) --------------------------------------------------------
char *__usercall sub_3003F220@<eax>(int a1@<edx>, char **a2@<edi>)
{
  char *result; // eax
  int v3; // ecx
  char *v4; // esi
  char v5; // dl
  bool v6; // zf

  result = String;
  v3 = 0;
  v4 = *a2;
  *String = 0;
  if ( a1 )
  {
    while ( *v4 == 13 || *v4 == 10 )
      ++v4;
  }
  else if ( *v4 == 13 || *v4 == 10 )
  {
    return result;
  }
  dword_300990C8 = dword_300990CC;
  v5 = *v4;
  v6 = *v4 == 0;
  dword_300990CC = (int)v4;
  if ( v6 )
    goto LABEL_12;
  while ( v5 != 44 && v5 != 10 )
  {
    if ( v5 != 13 )
    {
      if ( v5 == 34 )
      {
        while ( 1 )
        {
          ++v4;
          while ( *v4 == 34 )
          {
            if ( v4[1] != 34 )
              goto LABEL_11;
            if ( v3 < 1023 )
              result[v3++] = 34;
            v4 += 2;
          }
          if ( v3 < 1023 )
            result[v3++] = *v4;
        }
      }
      if ( v3 < 1023 )
        result[v3++] = v5;
    }
LABEL_11:
    v5 = *++v4;
    if ( !v5 )
      goto LABEL_12;
  }
  if ( !*v4 )
  {
LABEL_12:
    *a2 = 0;
    result[v3] = 0;
  }
  else
  {
    if ( *v4 != 10 )
      ++v4;
    *a2 = v4;
    result[v3] = 0;
  }
  return result;
}
// 300990C8: using guessed type int dword_300990C8;
// 300990CC: using guessed type int dword_300990CC;

//----- (3003F2E0) --------------------------------------------------------
char *__cdecl sub_3003F2E0(char **a1, int a2)
{
  char **v2; // ebx
  int v3; // edi
  char *v4; // eax
  bool v5; // zf
  char *v6; // ebp
  char *result; // eax
  char *v8; // eax
  char v9; // cl
  char v10; // dl
  char v11; // cl
  char v12; // dl
  char v13; // dl
  char v14; // cl
  const char *v15; // esi
  void **v16; // edi
  signed int v17; // ebp
  signed int i; // ecx
  char *v19; // ecx
  int v20; // [esp+Ch] [ebp-4h] BYREF

  v2 = a1;
  v3 = 0;
  v20 = 0;
  if ( !a1 )
    sub_30021B10(0, (char *)&byte_30063D80);
  v4 = *a1;
  v5 = *a1 == 0;
  v6 = String;
  *String = 0;
  if ( v5 )
  {
    *a1 = 0;
    return v6;
  }
  *((_DWORD *)v6 + 261) = *((_DWORD *)v6 + 256);
  *((_DWORD *)v6 + 262) = *a1;
  if ( *((_DWORD *)v6 + 259) )
    return sub_3003F220(a2, a1);
  v8 = sub_3003F140(v4, &v20);
  if ( !v8 )
  {
LABEL_25:
    result = v6;
    *v2 = 0;
    return result;
  }
  while ( 1 )
  {
    if ( v20 && !a2 )
      goto LABEL_104;
    v9 = *v8;
    if ( *v8 != 47 )
      goto LABEL_27;
    v10 = v8[1];
    if ( v10 != 47 )
      break;
    do
    {
      if ( v9 == 10 )
        break;
      v9 = *++v8;
    }
    while ( v9 );
LABEL_24:
    v8 = sub_3003F140(v8, &v20);
    v2 = a1;
    if ( !v8 )
      goto LABEL_25;
  }
  if ( v10 == 42 )
  {
    while ( v9 != 42 || v8[1] != 47 )
    {
      if ( v9 == 10 )
        ++*((_DWORD *)v6 + 256);
      v9 = *++v8;
      if ( !v9 )
        goto LABEL_24;
    }
    if ( *v8 )
      v8 += 2;
    goto LABEL_24;
  }
  v2 = a1;
LABEL_27:
  dword_300990C8 = dword_300990CC;
  dword_300990CC = (int)v8;
  if ( v9 == 34 )
  {
    ++v8;
    while ( 1 )
    {
      v11 = *v8++;
      if ( v11 == 92 )
      {
        if ( *v8 == 34 )
        {
          v11 = 34;
          ++v8;
          goto LABEL_36;
        }
      }
      else if ( v11 == 34 || !v11 )
      {
        goto LABEL_103;
      }
      if ( *v8 == 10 )
        ++*((_DWORD *)v6 + 256);
LABEL_36:
      if ( v3 < 1023 )
        v6[v3++] = v11;
    }
  }
  if ( !*((_DWORD *)v6 + 258) )
  {
    if ( v9 >= 48 && v9 <= 57 )
      goto LABEL_53;
    if ( *((_DWORD *)v6 + 260) && v9 == 45 )
    {
      v12 = v8[1];
      if ( v12 < 48 || v12 > 57 )
        goto LABEL_79;
      do
      {
LABEL_53:
        if ( v3 < 1023 )
          v6[v3++] = v9;
        v9 = *++v8;
      }
      while ( v9 >= 48 && v9 <= 57 || v9 == 46 );
      if ( v9 == 101 || v9 == 69 )
      {
        if ( v3 < 1023 )
          v6[v3++] = v9;
        v14 = *++v8;
        if ( v14 == 45 || v14 == 43 )
        {
          if ( v3 < 1023 )
            v6[v3++] = v14;
          v14 = *++v8;
        }
        do
        {
          if ( v3 < 1023 )
            v6[v3++] = v14;
          v14 = *++v8;
        }
        while ( v14 >= 48 && v14 <= 57 );
      }
      goto LABEL_101;
    }
    if ( v9 == 46 )
    {
      v13 = v8[1];
      if ( v13 >= 48 && v13 <= 57 )
        goto LABEL_53;
    }
    else if ( v9 >= 97 && v9 <= 122 || v9 >= 65 && v9 <= 90 || v9 == 95 || v9 == 47 || v9 == 92 )
    {
      do
      {
        if ( v3 < 1023 )
          v6[v3++] = v9;
        v9 = *++v8;
      }
      while ( v9 >= 97 && v9 <= 122
           || v9 >= 65 && v9 <= 90
           || v9 == 95
           || v9 >= 48 && v9 <= 57
           || v9 == 47
           || v9 == 92
           || v9 == 58
           || v9 == 46 );
      goto LABEL_101;
    }
LABEL_79:
    v15 = (const char *)off_30071AC8;
    v16 = &off_30071AC8;
    if ( off_30071AC8 )
    {
      while ( 1 )
      {
        v17 = strlen(v15);
        for ( i = 0; i < v17; ++i )
        {
          if ( v8[i] != v15[i] )
            break;
        }
        if ( i == v17 )
          break;
        v15 = (const char *)v16[1];
        ++v16;
        if ( !v15 )
        {
          v6 = String;
          v2 = a1;
          goto LABEL_86;
        }
      }
      qmemcpy(String, *v16, v17);
      v19 = String;
      String[v17] = 0;
      *a1 = &v8[v17];
      result = v19;
    }
    else
    {
LABEL_86:
      *v6 = *v8;
      v6[1] = 0;
      *v2 = v8 + 1;
      result = v6;
    }
    return result;
  }
  do
  {
    if ( v3 < 1023 )
      v6[v3++] = v9;
    v9 = *++v8;
  }
  while ( v9 > 32 );
LABEL_101:
  if ( v3 == 1024 )
    v3 = 0;
LABEL_103:
  v6[v3] = 0;
LABEL_104:
  *v2 = v8;
  return v6;
}
// 3003F377: conditional instruction was optimized away because of 'cl.1==2F'
// 3003F396: conditional instruction was optimized away because of 'cl.1==2F'
// 30071AC8: using guessed type void *off_30071AC8;
// 300990C8: using guessed type int dword_300990C8;
// 300990CC: using guessed type int dword_300990CC;

//----- (3003F650) --------------------------------------------------------
char *__thiscall sub_3003F650(char **this)
{
  char *v1; // eax

  v1 = String;
  if ( *((_DWORD *)String + 257) )
  {
    *((_DWORD *)String + 257) = 0;
    *this = (char *)*((_DWORD *)v1 + 262);
    *((_DWORD *)v1 + 256) = *((_DWORD *)v1 + 261);
  }
  return sub_3003F2E0(this, 1);
}

//----- (3003F690) --------------------------------------------------------
char *__thiscall sub_3003F690(char **this)
{
  char *result; // eax

  result = String;
  if ( *((_DWORD *)String + 257) )
  {
    *((_DWORD *)String + 257) = 0;
    if ( !*((_DWORD *)result + 258) )
      return result;
    *this = (char *)*((_DWORD *)result + 262);
    *((_DWORD *)result + 256) = *((_DWORD *)result + 261);
  }
  return sub_3003F2E0(this, 0);
}

//----- (3003F6E0) --------------------------------------------------------
unsigned __int8 __cdecl sub_3003F6E0(const char *a1, int a2)
{
  char **v2; // ecx
  char *v3; // eax
  char *v4; // edi
  const char *v5; // esi
  char *v6; // ecx
  unsigned __int8 result; // al
  bool v8; // cf
  unsigned __int8 v9; // bl
  int v10; // ecx

  v3 = String;
  if ( *((_DWORD *)String + 257) )
  {
    *((_DWORD *)String + 257) = 0;
    *v2 = (char *)*((_DWORD *)v3 + 262);
    *((_DWORD *)v3 + 256) = *((_DWORD *)v3 + 261);
  }
  v4 = sub_3003F2E0(v2, 1);
  v5 = a1;
  v6 = v4;
  while ( 1 )
  {
    result = *v6;
    v8 = (unsigned __int8)*v6 < (unsigned int)*v5;
    if ( *v6 != *v5 )
      break;
    if ( !*v6 )
      goto LABEL_8;
    result = v6[1];
    v9 = v5[1];
    v8 = result < v9;
    if ( result != v9 )
      break;
    v6 += 2;
    v5 += 2;
    if ( !result )
    {
LABEL_8:
      v10 = 0;
      goto LABEL_10;
    }
  }
  v10 = -v8 - (v8 - 1);
LABEL_10:
  if ( v10 )
  {
    if ( a2 )
      result = sub_3003F000("MatchToken: %s != %s", v4, a1);
    else
      result = sub_3003EF80("MatchToken: %s != %s", v4, a1);
  }
  return result;
}
// 3003F705: variable 'v2' is possibly undefined

//----- (3003F9E0) --------------------------------------------------------
const char *__usercall sub_3003F9E0@<eax>(char **a1@<eax>, int a2@<ebx>, int a3)
{
  int i; // esi
  char *v5; // eax
  char *v6; // eax
  char *v7; // eax
  const char *result; // eax

  sub_3003F6E0("(", 0);
  for ( i = 0; i < a2; ++i )
  {
    v5 = String;
    if ( *((_DWORD *)String + 257) )
    {
      *((_DWORD *)String + 257) = 0;
      *a1 = (char *)*((_DWORD *)v5 + 262);
      *((_DWORD *)v5 + 256) = *((_DWORD *)v5 + 261);
    }
    v6 = sub_3003F2E0(a1, 1);
    *(float *)(a3 + 4 * i) = atof(v6);
  }
  v7 = String;
  if ( *((_DWORD *)String + 257) )
  {
    *((_DWORD *)String + 257) = 0;
    *a1 = (char *)*((_DWORD *)v7 + 262);
    *((_DWORD *)v7 + 256) = *((_DWORD *)v7 + 261);
  }
  result = sub_3003F2E0(a1, 1);
  if ( strcmp(result, ")") )
    result = (const char *)sub_3003EF80("MatchToken: %s != %s", result, ")");
  return result;
}

//----- (3003FAB0) --------------------------------------------------------
const char *__usercall sub_3003FAB0@<eax>(int a1@<eax>, char **a2@<ecx>, int a3, int a4)
{
  int v4; // ebp
  char *v8; // eax
  const char *result; // eax

  v4 = a3;
  sub_3003F6E0("(", 0);
  if ( a3 > 0 )
  {
    do
    {
      sub_3003F9E0(a2, a1, a4);
      a4 += 4 * a1;
      --v4;
    }
    while ( v4 );
  }
  v8 = String;
  if ( *((_DWORD *)String + 257) )
  {
    *((_DWORD *)String + 257) = 0;
    *a2 = (char *)*((_DWORD *)v8 + 262);
    *((_DWORD *)v8 + 256) = *((_DWORD *)v8 + 261);
  }
  result = sub_3003F2E0(a2, 1);
  if ( strcmp(result, ")") )
    result = (const char *)sub_3003EF80("MatchToken: %s != %s", result, ")");
  return result;
}

//----- (3003FE30) --------------------------------------------------------
int __cdecl sub_3003FE30(__int16 a1)
{
  return ((unsigned __int8)a1 << 8) + HIBYTE(a1);
}

//----- (3003FE50) --------------------------------------------------------
__int16 __cdecl sub_3003FE50(__int16 a1)
{
  return a1;
}

//----- (3003FE60) --------------------------------------------------------
int __cdecl sub_3003FE60(int a1)
{
  return HIBYTE(a1) + ((BYTE2(a1) + ((((unsigned __int8)a1 << 8) + BYTE1(a1)) << 8)) << 8);
}

//----- (3003FE90) --------------------------------------------------------
int __cdecl sub_3003FE90(int a1)
{
  return a1;
}

//----- (3003FEA0) --------------------------------------------------------
int __cdecl sub_3003FEA0(int a1, int a2)
{
  int v3; // [esp+0h] [ebp-8h]

  LOBYTE(v3) = HIBYTE(a2);
  BYTE1(v3) = BYTE2(a2);
  BYTE2(v3) = BYTE1(a2);
  HIBYTE(v3) = a2;
  return v3;
}

//----- (3003FF00) --------------------------------------------------------
__int64 __cdecl sub_3003FF00(__int64 a1)
{
  return a1;
}

//----- (3003FF10) --------------------------------------------------------
double __cdecl sub_3003FF10(unsigned int a1)
{
  __int16 v1; // ax
  unsigned int v2; // edx
  float v4; // [esp+8h] [ebp+4h]

  v1 = a1;
  v2 = HIWORD(a1);
  LOBYTE(v4) = HIBYTE(a1);
  BYTE1(v4) = v2;
  BYTE2(v4) = HIBYTE(v1);
  HIBYTE(v4) = v1;
  return v4;
}

//----- (3003FF40) --------------------------------------------------------
double __cdecl sub_3003FF40(float a1)
{
  return a1;
}

//----- (30040090) --------------------------------------------------------
BOOL __usercall sub_30040090@<eax>(int a1@<eax>)
{
  return a1 >= 48 && a1 <= 57;
}

//----- (30040170) --------------------------------------------------------
int __usercall sub_30040170@<eax>(int a1@<eax>, char *a2@<edx>, char *a3@<ecx>)
{
  int v5; // eax
  int v6; // ecx

  while ( 1 )
  {
    v5 = *a2;
    v6 = *a3;
    ++a2;
    ++a3;
    if ( !a1-- )
      return 0;
    if ( v5 != v6 )
    {
      if ( v5 >= 97 && v5 <= 122 )
        v5 -= 32;
      if ( v6 >= 97 && v6 <= 122 )
        v6 -= 32;
      if ( v5 != v6 )
        break;
    }
    if ( !v5 )
      return 0;
  }
  return 2 * (v5 >= v6) - 1;
}

//----- (300401D0) --------------------------------------------------------
int __usercall sub_300401D0@<eax>(int a1@<eax>, char *a2@<edx>, char *a3@<ecx>)
{
  int v5; // eax
  int v6; // ecx

  while ( 1 )
  {
    v5 = *a2;
    v6 = *a3;
    ++a2;
    ++a3;
    if ( !a1-- )
      return 0;
    if ( v5 != v6 )
      break;
    if ( !v5 )
      return 0;
  }
  return 2 * (v5 >= v6) - 1;
}

//----- (30040230) --------------------------------------------------------
_BYTE *__usercall sub_30040230@<eax>(_BYTE *a1@<edi>)
{
  _BYTE *v1; // esi

  v1 = a1;
  if ( *a1 )
  {
    do
      *v1 = tolower((char)*v1);
    while ( *++v1 );
  }
  return a1;
}

//----- (30040290) --------------------------------------------------------
char *__usercall sub_30040290@<eax>(signed int a1@<eax>, const char *a2@<ebx>, char *Source)
{
  signed int v4; // esi
  int v5; // edi
  char *v6; // esi
  char *result; // eax

  v4 = strlen(a2);
  if ( v4 >= a1 )
    sub_30021B10(0, (char *)&byte_30063D40);
  v5 = a1 - v4;
  v6 = (char *)&a2[v4];
  result = strncpy(v6, Source, v5 - 1);
  v6[v5 - 1] = 0;
  return result;
}

//----- (300402E0) --------------------------------------------------------
int __fastcall sub_300402E0(int a1, _BYTE *a2)
{
  int result; // eax
  char v3; // cl

  result = 0;
  while ( *a2 )
  {
    if ( *a2 == 94 && (v3 = a2[1]) != 0 && v3 != 94 && v3 >= 48 && v3 <= 57 )
    {
      a2 += 2;
    }
    else
    {
      ++result;
      ++a2;
    }
  }
  return result;
}

//----- (30040310) --------------------------------------------------------
char *__usercall sub_30040310@<eax>(char *result@<eax>)
{
  char v1; // dl
  char *v2; // esi
  char *i; // edi
  char v4; // cl

  v1 = *result;
  v2 = result;
  for ( i = result; v1; ++v2 )
  {
    if ( *v2 == 94 && (v4 = v2[1]) != 0 && v4 != 94 && v4 >= 48 && v4 <= 57 )
    {
      ++v2;
    }
    else if ( v1 >= 32 && v1 != 127 )
    {
      *i++ = v1;
    }
    v1 = v2[1];
  }
  *i = 0;
  return result;
}

//----- (30040370) --------------------------------------------------------
int __usercall sub_30040370@<eax>(char *a1@<edi>, size_t a2@<esi>, const char *Format, ...)
{
  int result; // eax
  va_list ArgList; // [esp+8h] [ebp+8h] BYREF

  va_start(ArgList, Format);
  result = _vsnprintf(a1, a2, Format, ArgList);
  a1[a2 - 1] = 0;
  return result;
}

//----- (300403F0) --------------------------------------------------------
int sub_300403F0(const char *Format, ...)
{
  int v1; // eax
  int v2; // ebx
  int v3; // edx
  int result; // eax
  va_list ArgList; // [esp+18h] [ebp+8h] BYREF

  va_start(ArgList, Format);
  v1 = _vsnprintf(byte_300A4E50, 0x7D00u, Format, ArgList);
  v2 = v1;
  byte_300ACB4F = 0;
  if ( v1 < 0 || v1 >= 32000 )
    sub_30021B10(1, (char *)&byte_30063D10);
  v3 = dword_300F0F7C;
  if ( dword_300F0F7C + v2 >= 31999 )
    v3 = 0;
  result = (int)&unk_3009D0D8 + v3;
  qmemcpy((char *)&unk_3009D0D8 + v3, byte_300A4E50, v2 + 1);
  dword_300F0F7C = v3 + v2 + 1;
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300ACB4F: using guessed type char byte_300ACB4F;
// 300F0F7C: using guessed type int dword_300F0F7C;

//----- (300404B0) --------------------------------------------------------
int __usercall sub_300404B0@<eax>(const char *a1@<ecx>, char *a2@<ebx>)
{
  const char *v2; // esi
  int v3; // edi
  bool v4; // zf
  char v5; // al
  char *v6; // ecx
  char v7; // cl
  char *i; // eax
  char v10[8192]; // [esp+8h] [ebp-2004h] BYREF
  unsigned int v11; // [esp+2008h] [ebp-4h]
  unsigned int retaddr; // [esp+200Ch] [ebp+0h]

  v2 = a1;
  v11 = retaddr ^ dword_300705C0;
  if ( a1 && a2 )
  {
    if ( strlen(a1) >= 0x2000 )
      sub_30021B10(1, (char *)&byte_30063CE8);
    v3 = dword_300F0F80 ^ 1;
    v4 = *v2 == 92;
    dword_300F0F80 ^= 1u;
    if ( !v4 )
      goto LABEL_7;
    while ( 1 )
    {
      ++v2;
LABEL_7:
      v5 = *v2;
      v6 = v10;
      if ( *v2 != 92 )
        break;
LABEL_10:
      ++v2;
      *v6 = 0;
      v7 = *v2;
      for ( i = (char *)&unk_300990D0 + 0x2000 * v3; v7 != 92; ++v2 )
      {
        if ( !v7 )
          break;
        *i = v7;
        v7 = v2[1];
        ++i;
      }
      *i = 0;
      if ( !sub_30040170(99999, a2, v10) || !*v2 )
        return sub_30052A2E(retaddr ^ v11);
    }
    while ( v5 )
    {
      *v6 = v5;
      v5 = v2[1];
      ++v6;
      ++v2;
      if ( v5 == 92 )
        goto LABEL_10;
    }
  }
  return sub_30052A2E(retaddr ^ v11);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F80: using guessed type int dword_300F0F80;

//----- (30040600) --------------------------------------------------------
int __usercall sub_30040600@<eax>(const char *a1@<ecx>, const char *a2@<ebx>)
{
  char *v2; // esi
  char *v3; // ebp
  char v4; // al
  char *v5; // ecx
  char v6; // al
  char *i; // ecx
  char v9[1024]; // [esp+4h] [ebp-804h] BYREF
  char v10; // [esp+404h] [ebp-404h] BYREF
  unsigned int v11; // [esp+804h] [ebp-4h]
  unsigned int retaddr; // [esp+808h] [ebp+0h]

  v2 = (char *)a1;
  v11 = retaddr ^ dword_300705C0;
  if ( strlen(a1) >= 0x400 )
    sub_30021B10(1, (char *)&byte_30063CC0);
  if ( !strchr(a2, 92) )
  {
    while ( 1 )
    {
      v3 = v2;
      if ( *v2 == 92 )
        ++v2;
      v4 = *v2;
      v5 = v9;
      if ( *v2 != 92 )
        break;
LABEL_9:
      v6 = *++v2;
      *v5 = 0;
      for ( i = &v10; v6 != 92; ++v2 )
      {
        if ( !v6 )
          break;
        *i = v6;
        v6 = v2[1];
        ++i;
      }
      *i = 0;
      if ( !strcmp(a2, v9) )
      {
        strcpy(v3, v2);
        return sub_30052A2E(retaddr ^ v11);
      }
      if ( !*v2 )
        return sub_30052A2E(retaddr ^ v11);
    }
    while ( v4 )
    {
      *v5 = v4;
      v4 = v2[1];
      ++v5;
      ++v2;
      if ( v4 == 92 )
        goto LABEL_9;
    }
  }
  return sub_30052A2E(retaddr ^ v11);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;

//----- (30040710) --------------------------------------------------------
int __usercall sub_30040710@<eax>(const char *a1@<ecx>, const char *a2@<ebx>)
{
  char *v2; // esi
  char *v3; // ebp
  char v4; // al
  char *v5; // ecx
  char v6; // al
  char *i; // ecx
  char v9[8192]; // [esp+4h] [ebp-4004h] BYREF
  char v10; // [esp+2004h] [ebp-2004h] BYREF
  unsigned int v11; // [esp+4004h] [ebp-4h]
  unsigned int retaddr; // [esp+4008h] [ebp+0h]

  v2 = (char *)a1;
  v11 = retaddr ^ dword_300705C0;
  if ( strlen(a1) >= 0x2000 )
    sub_30021B10(1, (char *)&byte_30063C94);
  if ( !strchr(a2, 92) )
  {
    while ( 1 )
    {
      v3 = v2;
      if ( *v2 == 92 )
        ++v2;
      v4 = *v2;
      v5 = v9;
      if ( *v2 != 92 )
        break;
LABEL_9:
      v6 = *++v2;
      *v5 = 0;
      for ( i = &v10; v6 != 92; ++v2 )
      {
        if ( !v6 )
          break;
        *i = v6;
        v6 = v2[1];
        ++i;
      }
      *i = 0;
      if ( !strcmp(a2, v9) )
      {
        strcpy(v3, v2);
        return sub_30052A2E(retaddr ^ v11);
      }
      if ( !*v2 )
        return sub_30052A2E(retaddr ^ v11);
    }
    while ( v4 )
    {
      *v5 = v4;
      v4 = v2[1];
      ++v5;
      ++v2;
      if ( v4 == 92 )
        goto LABEL_9;
    }
  }
  return sub_30052A2E(retaddr ^ v11);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;

//----- (30040C20) --------------------------------------------------------
int __usercall sub_30040C20@<eax>(int a1@<edx>, int a2, int a3, const char *a4, int a5, int (__cdecl *a6)(int, const char *, _DWORD), void (__cdecl *a7)(int, const char *))
{
  int v7; // ecx
  int v8; // eax
  _DWORD *v9; // esi
  const char *v10; // eax
  int v11; // ecx
  char *v12; // edi
  char *v13; // edi
  char *v14; // edi
  int result; // eax
  int v16; // [esp+10h] [ebp-4h]

  v7 = a3;
  v8 = 0;
  v16 = 0;
  if ( a3 > 0 )
  {
    v9 = (_DWORD *)(a1 + 4);
    do
    {
      v10 = (const char *)sub_300404B0(a4, (char *)*(v9 - 1));
      if ( *v10 )
      {
        v11 = v9[1];
        if ( v11 >= 8 )
        {
          if ( a5 <= 0 || v11 >= a5 )
          {
            sub_30021B10(1, (char *)&byte_30063AD0, v9[1]);
          }
          else
          {
            result = a6(a2, v10, v9[1]);
            if ( !result )
              return result;
          }
        }
        else
        {
          switch ( v11 )
          {
            case 0:
              a7(a2 + *v9, v10);
              break;
            case 1:
              v12 = (char *)(a2 + *v9);
              strncpy(v12, v10, 0x3FFu);
              v12[1023] = 0;
              break;
            case 2:
              v13 = (char *)(a2 + *v9);
              strncpy(v13, v10, 0x3Fu);
              v13[63] = 0;
              break;
            case 3:
              v14 = (char *)(a2 + *v9);
              strncpy(v14, v10, 0xFFu);
              v14[255] = 0;
              break;
            case 4:
              *(_DWORD *)(*v9 + a2) = j__atol(v10);
              break;
            case 5:
              *(_DWORD *)(*v9 + a2) = j__atol(v10) != 0;
              break;
            case 6:
              *(float *)(*v9 + a2) = atof(v10);
              break;
            case 7:
              *(_DWORD *)(*v9 + a2) = (unsigned __int64)(atof(v10) * 1000.0);
              break;
            default:
              break;
          }
        }
      }
      v7 = a3;
      v8 = v16 + 1;
      v9 += 3;
      ++v16;
    }
    while ( v16 < a3 );
  }
  return v8 == v7;
}

//----- (30040DF0) --------------------------------------------------------
void __usercall sub_30040DF0(float *a1@<edx>, float a2, float a3, float a4, float a5)
{
  float v5; // [esp+0h] [ebp-30h]
  float v6; // [esp+4h] [ebp-2Ch]
  float v7; // [esp+8h] [ebp-28h] BYREF
  float v8; // [esp+Ch] [ebp-24h]
  float v9; // [esp+10h] [ebp-20h]
  float v10; // [esp+14h] [ebp-1Ch]
  float v11; // [esp+18h] [ebp-18h]
  float *v12; // [esp+1Ch] [ebp-14h]
  float *v13; // [esp+20h] [ebp-10h]
  float v14; // [esp+24h] [ebp-Ch]
  float v15; // [esp+28h] [ebp-8h]
  float v16; // [esp+2Ch] [ebp-4h]

  if ( a3 != 0.0 )
  {
    v10 = (2.0 - COERCE_FLOAT(LODWORD(a3) & 0x7FFFFFFF)) * a3;
    v16 = v10 * a4;
    v11 = a2 * 0.017453292;
    v5 = cos(v11);
    v6 = sin(v11);
    v9 = cos(0.0);
    v8 = sin(0.0);
    v12 = &a3;
    v11 = v16 * 0.017453292;
    v13 = &v7;
    a3 = cos(v11);
    v7 = sin(v11);
    v11 = v7 * v8;
    v14 = a3 * v6 - v11 * v5;
    v15 = a3 * v5 * -1.0 - v11 * v6;
    v16 = v7 * v9 * -1.0;
    v10 = v10 * a5;
    *a1 = v14 * v10 + *a1;
    a1[1] = v15 * v10 + a1[1];
    a1[2] = v16 * v10 + a1[2];
  }
}

//----- (300410A0) --------------------------------------------------------
char __usercall sub_300410A0@<al>(int a1@<eax>)
{
  bool v1; // zf
  char result; // al

  if ( a1 == 1 || a1 == 2 || a1 == 3 || a1 == 4 || a1 == 6 || (v1 = a1 == 7, result = 46, v1) )
    result = 44;
  return result;
}

//----- (300410D0) --------------------------------------------------------
int __usercall sub_300410D0@<eax>(int a1@<eax>, int a2@<ebx>, unsigned int a3@<edi>, char *a4@<esi>, float a5)
{
  int result; // eax

  _snprintf(a4, a3 - 1, "%.*f", a1, a5);
  result = 0;
  a4[a3 - 1] = 0;
  if ( (a2 == 1 || a2 == 2 || a2 == 3 || a2 == 4 || a2 == 6 || a2 == 7) && a3 )
  {
    while ( a4[result] != 46 )
    {
      if ( ++result >= a3 )
        return result;
    }
    a4[result] = 44;
  }
  return result;
}

//----- (30041780) --------------------------------------------------------
int *__usercall sub_30041780@<eax>(const void *a1@<eax>)
{
  if ( a1 )
    qmemcpy(&dword_300ACB70, a1, 0x198u);
  dword_300ACB58 = (int)sub_30014440;
  dword_300ACB5C = (int)sub_30014450;
  dword_300ACB60 = (int)nullsub_1;
  dword_300ACB64 = (int)nullsub_2;
  dword_300ACB68 = (int)sub_30014480;
  return &dword_300ACB58;
}
// 30014440: using guessed type int sub_30014440();
// 30014460: using guessed type int nullsub_1();
// 30014470: using guessed type int nullsub_2();
// 300ACB58: using guessed type int dword_300ACB58;
// 300ACB5C: using guessed type int dword_300ACB5C;
// 300ACB60: using guessed type int dword_300ACB60;
// 300ACB64: using guessed type int dword_300ACB64;
// 300ACB68: using guessed type int dword_300ACB68;
// 300ACB70: using guessed type int dword_300ACB70;

//----- (300417D0) --------------------------------------------------------
char *__fastcall sub_300417D0(int a1, int a2)
{
  char *result; // eax

  if ( dword_300EFE88 + a2 <= 0x20000 )
  {
    result = (char *)&unk_300AFE08 + dword_300EFE88;
    dword_300EFE88 += (a2 + 15) & 0xFFFFFFF0;
  }
  else
  {
    dword_300EFE8C = 1;
    Com_Printf("UI_Alloc: failed to allocate %d bytes\n", a2);
    sub_30021B10(1, (char *)&byte_30063944);
    result = 0;
  }
  return result;
}
// 300EFE88: using guessed type int dword_300EFE88;
// 300EFE8C: using guessed type int dword_300EFE8C;

//----- (30041840) --------------------------------------------------------
int __usercall sub_30041840@<eax>(_BYTE *a1@<eax>)
{
  _BYTE *v1; // esi
  char v2; // al
  __int16 v3; // bx
  __int16 v4; // di

  v1 = a1;
  v2 = *a1;
  v3 = 0;
  if ( v2 )
  {
    v4 = 119 - (_WORD)v1;
    do
    {
      v3 += (v4 + (_WORD)v1) * tolower(v2);
      v2 = *++v1;
    }
    while ( v2 );
  }
  return v3 & 0x7FF;
}

//----- (30041880) --------------------------------------------------------
char *__cdecl sub_30041880(char *a1)
{
  char *result; // eax
  int v3; // eax
  int v4; // ebx
  int v5; // edi
  unsigned int v6; // eax
  int v7; // ecx
  int v8; // esi
  char *v9; // edi
  char *v10; // eax
  int v11; // edx
  int *v12; // eax
  _DWORD *v13; // esi
  char *v14; // eax
  int v15; // [esp+8h] [ebp+4h]

  if ( !a1 )
    return 0;
  if ( !*a1 )
    return off_30071050;
  v3 = sub_30041840(a1);
  v4 = dword_300ADE08[v3];
  v5 = v4;
  v15 = v3;
  if ( v4 )
  {
    while ( strcmp(a1, *(const char **)(v5 + 4)) )
    {
      v5 = *(_DWORD *)v5;
      if ( !v5 )
        goto LABEL_8;
    }
    result = *(char **)(v5 + 4);
  }
  else
  {
LABEL_8:
    v6 = strlen(a1);
    v7 = dword_300F0F70;
    v8 = dword_300F0F70 + v6 + 1;
    if ( v8 >= 0x20000 )
    {
      Com_Printf("String_Alloc: failed to allocate %d bytes\n", v6 + 1);
      sub_30021B10(1, (char *)&byte_300638F0);
      result = 0;
    }
    else
    {
      v9 = (char *)&unk_300CFE88 + dword_300F0F70;
      v10 = a1;
      v11 = (_UNKNOWN *)((char *)&unk_300CFE88 + dword_300F0F70) - (_UNKNOWN *)a1;
      do
      {
        LOBYTE(v7) = *v10;
        v10[v11] = *v10;
        ++v10;
      }
      while ( (_BYTE)v7 );
      v12 = (int *)v4;
      dword_300F0F70 = v8;
      v13 = (_DWORD *)v4;
      if ( v4 )
      {
        do
        {
          v7 = *v12;
          if ( !*v12 )
            break;
          v13 = v12;
          v12 = (int *)*v12;
        }
        while ( v7 );
      }
      v14 = sub_300417D0(v7, 8);
      *(_DWORD *)v14 = 0;
      *((_DWORD *)v14 + 1) = v9;
      if ( v13 )
        *v13 = v14;
      else
        dword_300ADE08[v15] = (int)v14;
      result = v9;
    }
  }
  return result;
}
// 30071050: using guessed type char *off_30071050;
// 300F0F70: using guessed type int dword_300F0F70;

//----- (30041A30) --------------------------------------------------------
int sub_30041A30()
{
  int result; // eax

  memset(dword_300ADE08, 0, sizeof(dword_300ADE08));
  dword_300F0F74 = 0;
  dword_300F0F70 = 0;
  dword_300F0F60 = 0;
  dword_300F0F64 = 0;
  dword_300EFE88 = 0;
  dword_300EFE8C = 0;
  sub_3004BF40();
  sub_3004C7B0();
  result = dword_300F0F4C;
  if ( dword_300F0F4C )
  {
    if ( *(_DWORD *)(dword_300F0F4C + 176) )
      result = sub_300484D0();
  }
  return result;
}
// 300EFE88: using guessed type int dword_300EFE88;
// 300EFE8C: using guessed type int dword_300EFE8C;
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F60: using guessed type int dword_300F0F60;
// 300F0F64: using guessed type int dword_300F0F64;
// 300F0F70: using guessed type int dword_300F0F70;
// 300F0F74: using guessed type int dword_300F0F74;

//----- (30041B20) --------------------------------------------------------
int sub_30041B20(int a1, char *Format, ...)
{
  char v3[128]; // [esp+4h] [ebp-84h] BYREF
  unsigned int v4; // [esp+84h] [ebp-4h]
  unsigned int retaddr; // [esp+88h] [ebp+0h]
  va_list va; // [esp+94h] [ebp+Ch] BYREF

  va_start(va, Format);
  v4 = retaddr ^ dword_300705C0;
  vsprintf(Buffer, Format, va);
  v3[0] = 0;
  dword_30076898(99);
  Com_Printf("^1Menu load error: %s, line %d: %s\n", v3, 0, Buffer);
  return sub_30052A2E(retaddr ^ v4);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30041BB0) --------------------------------------------------------
void __usercall sub_30041BB0(int a1@<eax>, int a2@<edx>, float *a3@<ecx>, float a4)
{
  int v4; // edx
  int v5; // esi
  int v6; // edi
  float v7; // [esp+8h] [ebp-4h]

  v4 = a2 - a1;
  v5 = a1 - (_DWORD)a3;
  v6 = 4;
  do
  {
    v7 = (*(float *)((char *)a3 + v5 + v4) - *(float *)((char *)a3 + v5)) * a4 + *(float *)((char *)a3 + v5);
    *a3 = v7;
    if ( v7 >= 0.0 )
    {
      if ( v7 > 1.0 )
        *a3 = 1.0;
    }
    else
    {
      *a3 = 0.0;
    }
    ++a3;
    --v6;
  }
  while ( v6 );
}

//----- (30041C10) --------------------------------------------------------
int __cdecl sub_30041C10(float *a1)
{
  char **v1; // ecx
  char *v2; // eax

  v2 = String;
  if ( !*((_DWORD *)String + 257) )
    goto LABEL_4;
  *((_DWORD *)String + 257) = 0;
  if ( *((_DWORD *)v2 + 258) )
  {
    *v1 = (char *)*((_DWORD *)v2 + 262);
    *((_DWORD *)v2 + 256) = *((_DWORD *)v2 + 261);
LABEL_4:
    v2 = sub_3003F2E0(v1, 0);
  }
  if ( !v2 || !*v2 )
    return 0;
  *a1 = atof(v2);
  return 1;
}
// 30041C39: variable 'v1' is possibly undefined

//----- (30041C80) --------------------------------------------------------
int __usercall sub_30041C80@<eax>(float *a1@<ebx>, int a2@<edi>)
{
  int v2; // esi
  int v4; // [esp+4h] [ebp-414h]
  float v5; // [esp+10h] [ebp-408h]
  char ArgList[1024]; // [esp+14h] [ebp-404h] BYREF
  unsigned int v7; // [esp+414h] [ebp-4h]
  unsigned int retaddr; // [esp+418h] [ebp+0h]

  v7 = retaddr ^ dword_300705C0;
  v2 = 0;
  if ( dword_30076898(98) )
  {
    if ( ArgList[0] == 45 )
    {
      if ( !dword_30076898(98) )
        return sub_30052A2E(retaddr ^ v7);
      v2 = 1;
    }
    if ( v4 == 3 )
    {
      if ( v2 )
        *a1 = -v5;
      else
        *a1 = v5;
    }
    else
    {
      sub_30041B20(a2, "expected float but found %s\n", ArgList);
    }
  }
  return sub_30052A2E(retaddr ^ v7);
}
// 30041CD7: variable 'v4' is possibly undefined
// 30041D0C: variable 'v5' is possibly undefined
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30041D40) --------------------------------------------------------
int __usercall sub_30041D40@<eax>(char **a1@<edi>, int a2)
{
  int v2; // esi
  char *v3; // eax

  v2 = 0;
  while ( 1 )
  {
    v3 = String;
    if ( !*((_DWORD *)String + 257) )
      goto LABEL_5;
    *((_DWORD *)String + 257) = 0;
    if ( *((_DWORD *)v3 + 258) )
    {
      *a1 = (char *)*((_DWORD *)v3 + 262);
      *((_DWORD *)v3 + 256) = *((_DWORD *)v3 + 261);
LABEL_5:
      v3 = sub_3003F2E0(a1, 0);
    }
    if ( !v3 || !*v3 )
      return 0;
    *(float *)(a2 + 4 * v2++) = atof(v3);
    if ( v2 >= 4 )
      return 1;
  }
}

//----- (30041DC0) --------------------------------------------------------
int __usercall sub_30041DC0@<eax>(int a1@<eax>, int a2)
{
  int v3; // esi
  float v5; // [esp+10h] [ebp-4h] BYREF

  v3 = 0;
  while ( sub_30041C80(&v5, a1) )
  {
    ++v3;
    *(float *)(a2 + 4 * v3 - 4) = v5;
    if ( v3 >= 4 )
      return 1;
  }
  return 0;
}

//----- (30041E00) --------------------------------------------------------
int __cdecl sub_30041E00(int *a1)
{
  char **v1; // ecx
  char *v2; // eax

  v2 = String;
  if ( !*((_DWORD *)String + 257) )
    goto LABEL_4;
  *((_DWORD *)String + 257) = 0;
  if ( *((_DWORD *)v2 + 258) )
  {
    *v1 = (char *)*((_DWORD *)v2 + 262);
    *((_DWORD *)v2 + 256) = *((_DWORD *)v2 + 261);
LABEL_4:
    v2 = sub_3003F2E0(v1, 0);
  }
  if ( !v2 || !*v2 )
    return 0;
  *a1 = j__atol(v2);
  return 1;
}
// 30041E29: variable 'v1' is possibly undefined

//----- (30041E70) --------------------------------------------------------
int __usercall sub_30041E70@<eax>(_DWORD *a1@<ebx>, int a2@<edi>)
{
  int v2; // esi
  int v4; // [esp+4h] [ebp-414h]
  int v5; // [esp+Ch] [ebp-40Ch]
  char ArgList[1024]; // [esp+14h] [ebp-404h] BYREF
  unsigned int v7; // [esp+414h] [ebp-4h]
  unsigned int retaddr; // [esp+418h] [ebp+0h]

  v7 = retaddr ^ dword_300705C0;
  v2 = 0;
  if ( dword_30076898(98) )
  {
    if ( ArgList[0] == 45 )
    {
      if ( !dword_30076898(98) )
        return sub_30052A2E(retaddr ^ v7);
      v2 = 1;
    }
    if ( v4 == 3 )
    {
      *a1 = v5;
      if ( v2 )
        *a1 = -v5;
    }
    else
    {
      sub_30041B20(a2, "expected integer but found %s\n", ArgList);
    }
  }
  return sub_30052A2E(retaddr ^ v7);
}
// 30041EC7: variable 'v4' is possibly undefined
// 30041EFE: variable 'v5' is possibly undefined
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30041F30) --------------------------------------------------------
BOOL __usercall sub_30041F30@<eax>(float *a1@<eax>)
{
  return sub_30041C10(a1) && sub_30041C10(a1 + 1) && sub_30041C10(a1 + 2) && sub_30041C10(a1 + 3);
}

//----- (30041FD0) --------------------------------------------------------
int __usercall sub_30041FD0@<eax>(char **a1@<eax>, char **a2@<edi>)
{
  char *v2; // esi
  char *v3; // eax

  v2 = String;
  if ( !*((_DWORD *)String + 257) )
    goto LABEL_4;
  *((_DWORD *)String + 257) = 0;
  if ( *((_DWORD *)v2 + 258) )
  {
    *a1 = (char *)*((_DWORD *)v2 + 262);
    *((_DWORD *)v2 + 256) = *((_DWORD *)v2 + 261);
LABEL_4:
    v2 = sub_3003F2E0(a1, 0);
  }
  if ( !v2 || !*v2 )
    return 0;
  if ( *v2 == 64 )
  {
    v3 = (char *)(*(int (__cdecl **)(char *))(dword_300F0F4C + 28))(v2 + 1);
    if ( v3 )
    {
      *a2 = sub_30041880(v3);
      return 1;
    }
    if ( ((double (__cdecl *)(const char *))*(_DWORD *)(dword_300F0F4C + 108))("cl_languagewarnings") != 0.0 )
    {
      if ( ((double (__cdecl *)(const char *))*(_DWORD *)(dword_300F0F4C + 108))("cl_languagewarningsaserrors") == 0.0 )
        Com_Printf("^3WARNING: Could not translate menu string reference %s\n", v2);
      else
        sub_30021B10(7, "Could not translate menu string reference %s", v2);
    }
  }
  *a2 = sub_30041880(v2);
  return 1;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300420D0) --------------------------------------------------------
int __usercall sub_300420D0@<eax>(char **a1@<esi>)
{
  char *v2; // eax
  char *v3; // eax
  unsigned int v4; // ecx
  char ArgList; // [esp+10h] [ebp-404h] BYREF
  char v6[1023]; // [esp+11h] [ebp-403h] BYREF
  unsigned int v7; // [esp+410h] [ebp-4h]
  unsigned int retaddr; // [esp+414h] [ebp+0h]

  v7 = retaddr ^ dword_300705C0;
  if ( !dword_30076898(98) )
    return sub_30052A2E(retaddr ^ v7);
  if ( ArgList != 64 )
    goto LABEL_10;
  v2 = (char *)(*(int (__cdecl **)(char *))(dword_300F0F4C + 28))(v6);
  if ( !v2 )
  {
    if ( ((double (__cdecl *)(const char *))*(_DWORD *)(dword_300F0F4C + 108))("cl_languagewarnings") != 0.0 )
    {
      if ( ((double (__cdecl *)(const char *))*(_DWORD *)(dword_300F0F4C + 108))("cl_languagewarningsaserrors") == 0.0 )
        Com_Printf("^3WARNING: Could not translate menu string reference %s\n", &ArgList);
      else
        sub_30021B10(7, "Could not translate menu string reference %s", &ArgList);
    }
LABEL_10:
    v3 = sub_30041880(&ArgList);
    goto LABEL_11;
  }
  v3 = sub_30041880(v2);
LABEL_11:
  v4 = v7;
  *a1 = v3;
  return sub_30052A2E(retaddr ^ v4);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300421D0) --------------------------------------------------------
int __cdecl sub_300421D0(_BYTE *a1)
{
  char v2; // [esp+10h] [ebp-404h]
  unsigned int v3; // [esp+410h] [ebp-4h]
  unsigned int retaddr; // [esp+414h] [ebp+0h]

  v3 = retaddr ^ dword_300705C0;
  if ( dword_30076898(98) )
    *a1 = v2;
  return sub_30052A2E(retaddr ^ v3);
}
// 30042230: variable 'v2' is possibly undefined
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30042250) --------------------------------------------------------
int __cdecl sub_30042250(int a1, char **a2)
{
  int v2; // ebx
  int v3; // kr00_4
  int v4; // edi
  int v5; // esi
  int v6; // kr04_4
  char *v7; // edi
  int v8; // kr08_4
  char *v10; // [esp-8h] [ebp-830h]
  size_t v11; // [esp-4h] [ebp-82Ch]
  char Destination[1024]; // [esp+10h] [ebp-818h] BYREF
  char Source[1028]; // [esp+420h] [ebp-408h] BYREF
  unsigned int v14; // [esp+824h] [ebp-4h]
  unsigned int retaddr; // [esp+82Ch] [ebp+4h]

  v14 = retaddr ^ dword_300705C0;
  memset(Destination, 0, sizeof(Destination));
  if ( !dword_30076898(98) || sub_30040170(99999, Source, "{") || !dword_30076898(98) )
    return 0;
  while ( sub_30040170(99999, Source, "}") )
  {
    if ( Source[1] )
    {
      v2 = sub_300403F0("\"%s\"", Source);
      v3 = strlen(Destination);
      v4 = v3;
      if ( v3 >= 1024 )
        sub_30021B10(0, (char *)&byte_30063D40);
      v5 = 1024 - v3;
      v11 = 1024 - v3 - 1;
      v10 = (char *)v2;
    }
    else
    {
      v6 = strlen(Destination);
      v4 = v6;
      if ( v6 >= 1024 )
        sub_30021B10(0, (char *)&byte_30063D40);
      v5 = 1024 - v6;
      v11 = 1024 - v6 - 1;
      v10 = Source;
    }
    v7 = &Destination[v4];
    strncpy(v7, v10, v11);
    v7[v5 - 1] = 0;
    v8 = strlen(Destination);
    if ( v8 >= 1024 )
      sub_30021B10(0, (char *)&byte_30063D40);
    strncpy(&Destination[v8], " ", 1024 - v8 - 1);
    Destination[1023] = 0;
    if ( !dword_30076898(98) )
      return 0;
  }
  *a2 = sub_30041880(Destination);
  return 1;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (30042460) --------------------------------------------------------
int __usercall sub_30042460@<eax>(int a1@<eax>, _DWORD *a2@<esi>)
{
  (*(void (__cdecl **)(int))(dword_300F0F4C + 4))(a1);
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 8))(
    *a2,
    a2[1],
    a2[2],
    a2[3],
    *(_DWORD *)(dword_300F0F4C + 123584));
  return (*(int (__cdecl **)(_DWORD))(dword_300F0F4C + 4))(0);
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30042540) --------------------------------------------------------
int __usercall sub_30042540@<eax>(_DWORD *a1@<edi>, float a2, float a3, float a4, float a5)
{
  int v5; // ebp
  float v6; // ebx
  float v7; // esi
  float v8; // ecx
  int result; // eax
  double v10; // st7
  double v11; // st7
  unsigned int v12; // eax
  double v13; // st7
  void (__cdecl *v14)(float *); // eax
  int v15; // eax
  float v16; // ecx
  float v17; // eax
  float v18; // edx
  int v19; // [esp-18h] [ebp-44h]
  int v20; // [esp-18h] [ebp-44h]
  int v21; // [esp-14h] [ebp-40h]
  int v22; // [esp-14h] [ebp-40h]
  int v23; // [esp-10h] [ebp-3Ch]
  int v24; // [esp-10h] [ebp-3Ch]
  int v25; // [esp-Ch] [ebp-38h]
  int v26; // [esp-Ch] [ebp-38h]
  int v27; // [esp-8h] [ebp-34h]
  float v28; // [esp+Ch] [ebp-20h] BYREF
  float v29; // [esp+10h] [ebp-1Ch]
  float v30; // [esp+14h] [ebp-18h]
  float v31; // [esp+18h] [ebp-14h]
  float v32; // [esp+1Ch] [ebp-10h] BYREF
  int v33; // [esp+20h] [ebp-Ch]
  int v34; // [esp+24h] [ebp-8h]
  int v35; // [esp+28h] [ebp-4h]

  v5 = *a1;
  v6 = *((float *)a1 + 1);
  v7 = *((float *)a1 + 2);
  v8 = *((float *)a1 + 3);
  v28 = *(float *)a1;
  v29 = v6;
  v30 = v7;
  v31 = v8;
  if ( dword_300F0F68 )
  {
    v25 = a1[3];
    v23 = a1[2];
    v21 = a1[1];
    v19 = *a1;
    v35 = 1065353216;
    v34 = 1065353216;
    v33 = 1065353216;
    v32 = 1.0;
    (*(void (__cdecl **)(int, int, int, int, int, float *))(dword_300F0F4C + 56))(v19, v21, v23, v25, 1065353216, &v32);
  }
  result = a1[13];
  if ( result || a1[14] )
  {
    if ( a1[14] )
    {
      v28 = v28 + *((float *)a1 + 17);
      v5 = LODWORD(v28);
      v29 = v29 + *((float *)a1 + 17);
      v6 = v29;
      v10 = *((float *)a1 + 17) + 1.0;
      v30 = v30 - v10;
      v7 = v30;
      v31 = v31 - v10;
    }
    switch ( result )
    {
      case 1:
        if ( a1[45] )
        {
          if ( (a1[18] & 0x60) == 0 || *(_DWORD *)(dword_300F0F4C + 236) <= a1[28] )
            goto LABEL_17;
          a1[28] = *(_DWORD *)(dword_300F0F4C + 236) + (unsigned __int64)a5;
          if ( (a1[18] & 0x20) != 0 )
          {
            v11 = *((float *)a1 + 36) - a2;
            *((float *)a1 + 36) = v11;
            if ( v11 <= 0.0 )
            {
              v12 = a1[18] & 0xFFFFFFDB;
LABEL_16:
              a1[18] = v12;
              goto LABEL_17;
            }
          }
          else
          {
            v13 = a3 + *((float *)a1 + 36);
            *((float *)a1 + 36) = v13;
            if ( v13 >= a4 )
            {
              *((float *)a1 + 36) = a4;
              v12 = a1[18] & 0xFFFFFFBF;
              goto LABEL_16;
            }
          }
LABEL_17:
          (*(void (__cdecl **)(_DWORD *))(dword_300F0F4C + 4))(a1 + 33);
          (*(void (__cdecl **)(int, float, float, float, _DWORD))(dword_300F0F4C + 8))(
            v5,
            COERCE_FLOAT(LODWORD(v6)),
            COERCE_FLOAT(LODWORD(v7)),
            COERCE_FLOAT(LODWORD(v31)),
            a1[45]);
          (*(void (__cdecl **)(_DWORD))(dword_300F0F4C + 4))(0);
          break;
        }
        (*(void (__cdecl **)(int, float, float, float, _DWORD *))(dword_300F0F4C + 52))(
          v5,
          COERCE_FLOAT(LODWORD(v6)),
          COERCE_FLOAT(LODWORD(v7)),
          COERCE_FLOAT(LODWORD(v31)),
          a1 + 33);
        break;
      case 2:
        sub_30042460((int)(a1 + 33), &v28);
        break;
      case 3:
        goto LABEL_33;
      case 4:
        v14 = *(void (__cdecl **)(float *))(dword_300F0F4C + 100);
        if ( v14 )
        {
          v14(&v32);
          (*(void (__cdecl **)(int, float, float, float, float *))(dword_300F0F4C + 52))(
            v5,
            COERCE_FLOAT(LODWORD(v6)),
            COERCE_FLOAT(LODWORD(v7)),
            COERCE_FLOAT(LODWORD(v31)),
            &v32);
        }
        break;
      case 5:
        if ( a1[12] == -1 )
        {
          v15 = (*(int (__cdecl **)(_DWORD, int, float, float, float))(dword_300F0F4C + 208))(
                  a1[11],
                  v5,
                  COERCE_FLOAT(LODWORD(v6)),
                  COERCE_FLOAT(LODWORD(v7)),
                  COERCE_FLOAT(LODWORD(v31)));
          a1[12] = v15;
          if ( v15 == -1 )
            a1[12] = -2;
        }
        if ( (int)a1[12] >= 0 )
        {
          (*(void (__cdecl **)(_DWORD))(dword_300F0F4C + 220))(a1[12]);
          (*(void (__cdecl **)(_DWORD, int, float, float, float))(dword_300F0F4C + 216))(
            a1[12],
            v5,
            COERCE_FLOAT(LODWORD(v6)),
            COERCE_FLOAT(LODWORD(v7)),
            COERCE_FLOAT(LODWORD(v31)));
        }
        break;
      default:
        if ( result == 6 && a1[45] )
        {
LABEL_33:
          if ( (a1[18] & 0x200) != 0 )
            (*(void (__cdecl **)(_DWORD *))(dword_300F0F4C + 4))(a1 + 29);
          (*(void (__cdecl **)(int, float, float, float, _DWORD))(dword_300F0F4C + 8))(
            v5,
            COERCE_FLOAT(LODWORD(v6)),
            COERCE_FLOAT(LODWORD(v7)),
            COERCE_FLOAT(LODWORD(v31)),
            a1[45]);
          (*(void (__cdecl **)(_DWORD))(dword_300F0F4C + 4))(0);
          break;
        }
        break;
    }
    result = a1[14];
    switch ( result )
    {
      case 1:
        if ( a1[13] == 4 )
        {
          v33 = 1056964608;
          if ( v32 <= 0.0 )
          {
            v34 = 1065353216;
            v32 = 0.5;
          }
          else
          {
            v32 = 1.0;
            v34 = 1056964608;
          }
          v27 = a1[17];
          v26 = a1[3];
          v24 = a1[2];
          v22 = a1[1];
          v20 = *a1;
          v35 = 1065353216;
          result = (*(int (__cdecl **)(int, int, int, int, int, float *))(dword_300F0F4C + 56))(
                     v20,
                     v22,
                     v24,
                     v26,
                     v27,
                     &v32);
        }
        else
        {
          result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD *))(dword_300F0F4C + 56))(
                     *a1,
                     a1[1],
                     a1[2],
                     a1[3],
                     a1[17],
                     a1 + 37);
        }
        break;
      case 2:
        (*(void (__cdecl **)(_DWORD *))(dword_300F0F4C + 4))(a1 + 37);
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 64))(
          *a1,
          a1[1],
          a1[2],
          a1[3],
          a1[17]);
        result = (*(int (__cdecl **)(_DWORD))(dword_300F0F4C + 4))(0);
        break;
      case 3:
        (*(void (__cdecl **)(_DWORD *))(dword_300F0F4C + 4))(a1 + 37);
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 60))(
          *a1,
          a1[1],
          a1[2],
          a1[3],
          a1[17]);
        result = (*(int (__cdecl **)(_DWORD))(dword_300F0F4C + 4))(0);
        break;
      case 4:
        v16 = *((float *)a1 + 1);
        v28 = *(float *)a1;
        v17 = *((float *)a1 + 2);
        v29 = v16;
        v18 = *((float *)a1 + 17);
        v30 = v17;
        v31 = v18;
        sub_30042460((int)(a1 + 37), &v28);
        v29 = *((float *)a1 + 3) + *((float *)a1 + 1) - 1.0;
        result = sub_30042460((int)(a1 + 37), &v28);
        break;
    }
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F68: using guessed type int dword_300F0F68;

//----- (300429B0) --------------------------------------------------------
int __usercall sub_300429B0@<eax>(int result@<eax>, float a2, float a3)
{
  double v3; // st7
  double v4; // st6

  if ( result )
  {
    if ( *(_DWORD *)(result + 56) )
    {
      a2 = a2 + *(float *)(result + 68);
      v3 = a3 + *(float *)(result + 68);
    }
    else
    {
      v3 = a3;
    }
    v4 = a2 + *(float *)(result + 16);
    *(_DWORD *)(result + 8) = *(_DWORD *)(result + 24);
    *(_DWORD *)(result + 12) = *(_DWORD *)(result + 28);
    *(float *)result = v4;
    *(_DWORD *)(result + 192) = 0;
    *(_DWORD *)(result + 196) = 0;
    *(float *)(result + 4) = v3 + *(float *)(result + 20);
  }
  return result;
}

//----- (30042A00) --------------------------------------------------------
int __usercall sub_30042A00@<eax>(int result@<eax>)
{
  int v1; // ecx
  float v2; // [esp+0h] [ebp-8h]
  float v3; // [esp+4h] [ebp-4h]

  if ( result )
  {
    v1 = *(_DWORD *)(result + 240);
    if ( v1 )
    {
      v3 = *(float *)v1;
      v2 = *(float *)(v1 + 4);
      if ( *(_DWORD *)(v1 + 56) )
      {
        v3 = v3 + *(float *)(v1 + 68);
        v2 = v2 + *(float *)(v1 + 68);
      }
      result = sub_300429B0(result, v3, v2);
    }
  }
  return result;
}

//----- (30042A60) --------------------------------------------------------
void __thiscall sub_30042A60(char *this)
{
  double v1; // st7
  double v2; // st6
  int v3; // esi
  int *v4; // edx
  int v5; // eax
  double v6; // st5
  double v7; // st5
  int v8; // ebx
  double v9; // st5
  float v10; // [esp+4h] [ebp-4h]

  if ( this )
  {
    v1 = *(float *)this;
    v2 = *((float *)this + 1);
    if ( *((_DWORD *)this + 14) )
    {
      v1 = v1 + *((float *)this + 17);
      v2 = v2 + *((float *)this + 17);
    }
    v3 = 0;
    if ( *((int *)this + 48) > 0 )
    {
      v4 = (int *)(this + 1292);
      do
      {
        v5 = *v4;
        v10 = v2;
        v6 = v1;
        if ( *v4 )
        {
          if ( *(_DWORD *)(v5 + 56) )
          {
            v6 = v1 + *(float *)(v5 + 68);
            v10 = v2 + *(float *)(v5 + 68);
          }
          v7 = v6 + *(float *)(v5 + 16);
          *(_DWORD *)(v5 + 8) = *(_DWORD *)(v5 + 24);
          v8 = *(_DWORD *)(v5 + 28);
          *(float *)v5 = v7;
          *(_DWORD *)(v5 + 12) = v8;
          *(_DWORD *)(v5 + 192) = 0;
          v9 = v10 + *(float *)(v5 + 20);
          *(_DWORD *)(v5 + 196) = 0;
          *(float *)(v5 + 4) = v9;
        }
        ++v3;
        ++v4;
      }
      while ( v3 < *((_DWORD *)this + 48) );
    }
  }
}

//----- (30042B30) --------------------------------------------------------
int __usercall sub_30042B30@<eax>(int a1@<ebx>)
{
  int v1; // ebp
  int v3; // edi
  int *v4; // esi
  int v5; // eax
  char *v6; // edx

  v1 = 0;
  if ( !a1 )
    return 0;
  v3 = 0;
  if ( *(int *)(a1 + 192) > 0 )
  {
    v4 = (int *)(a1 + 1292);
    do
    {
      v5 = *(_DWORD *)(*v4 + 72);
      if ( (v5 & 2) != 0 )
        v1 = *v4;
      *(_DWORD *)(*v4 + 72) = v5 & 0xFFFFFFFD;
      v6 = *(char **)(*v4 + 276);
      if ( v6 )
        sub_30044180(v6, *v4);
      ++v3;
      ++v4;
    }
    while ( v3 < *(_DWORD *)(a1 + 192) );
  }
  return v1;
}

//----- (30042BB0) --------------------------------------------------------
BOOL __cdecl sub_30042BB0(float a1, float a2)
{
  float *v2; // ecx

  return v2 && a1 >= (double)*v2 && v2[2] + *v2 >= a1 && a2 >= (double)v2[1] && v2[3] + v2[1] >= a2;
}
// 30042BB2: variable 'v2' is possibly undefined

//----- (30042C00) --------------------------------------------------------
int __usercall sub_30042C00@<eax>(int a1@<eax>, char *a2@<ebx>)
{
  int v2; // edi
  char *v4; // eax
  int *v5; // ebp
  int v6; // ecx
  char *v7; // eax
  int v8; // esi
  int v9; // edx
  int v10; // edi
  char *v12; // edx
  int v13; // esi
  char *v14; // edx
  char *v15; // edx
  bool v16; // zf
  int v18; // [esp+Ch] [ebp-10h]
  int v19; // [esp+10h] [ebp-Ch]
  int *v20; // [esp+14h] [ebp-8h]
  int i; // [esp+18h] [ebp-4h]

  v2 = -1;
  v18 = 0;
  v19 = -1;
  v4 = strstr(a2, "*");
  if ( v4 )
  {
    v2 = v4 - a2;
    v19 = v4 - a2;
  }
  if ( *(int *)(a1 + 192) <= 0 )
    return 0;
  v5 = (int *)(a1 + 1292);
  v20 = (int *)(a1 + 1292);
  for ( i = *(_DWORD *)(a1 + 192); ; --i )
  {
    if ( v2 == -1 )
    {
      v13 = *v5;
      v14 = *(char **)(*v5 + 32);
      if ( v14 && a2 && !sub_30040170(99999, v14, a2)
        || (v15 = *(char **)(v13 + 40)) != 0 && a2 && !sub_30040170(99999, v15, a2) )
      {
LABEL_22:
        ++v18;
      }
    }
    else
    {
      v6 = v2;
      v7 = a2;
      v8 = *(_DWORD *)(*v5 + 32) - (_DWORD)a2;
      while ( 1 )
      {
        v9 = v7[v8];
        v10 = *v7++;
        if ( !v6-- )
          goto LABEL_15;
        if ( v9 != v10 )
          break;
        if ( !v9 )
        {
          v5 = v20;
          goto LABEL_22;
        }
      }
      if ( 2 * (v9 >= v10) == 1 || (v5 = v20, (v12 = *(char **)(*v20 + 40)) != 0) && !sub_300401D0(v19, v12, a2) )
      {
LABEL_15:
        v5 = v20;
        goto LABEL_22;
      }
    }
    ++v5;
    v16 = i == 1;
    v20 = v5;
    if ( v16 )
      return v18;
    v2 = v19;
  }
}

//----- (30042D20) --------------------------------------------------------
int __usercall sub_30042D20@<eax>(char *a1@<ebx>, int a2, int a3)
{
  int v3; // ebp
  int v4; // esi
  char *v5; // eax
  int *v6; // edi
  int v7; // ecx
  char *v8; // eax
  int v9; // esi
  int v10; // edx
  int v11; // edi
  char *v13; // edx
  int v14; // esi
  char *v15; // edx
  char *v16; // edx
  bool v17; // cc
  int v19; // [esp+Ch] [ebp-14h]
  int v20; // [esp+10h] [ebp-10h]
  int *v21; // [esp+14h] [ebp-Ch]
  int v22; // [esp+18h] [ebp-8h]
  int v23; // [esp+1Ch] [ebp-4h]

  v3 = 0;
  v4 = -1;
  v19 = 0;
  v20 = -1;
  v5 = strstr(a1, "*");
  if ( v5 )
  {
    v4 = v5 - a1;
    v20 = v5 - a1;
  }
  v22 = 0;
  v23 = *(_DWORD *)(a2 + 192);
  if ( v23 <= 0 )
    return 0;
  v6 = (int *)(a2 + 1292);
  v21 = (int *)(a2 + 1292);
  while ( v4 == -1 )
  {
    v14 = *v6;
    v15 = *(char **)(*v6 + 32);
    if ( v15 && a1 && !sub_30040170(99999, v15, a1)
      || (v16 = *(char **)(v14 + 40)) != 0 && a1 && !sub_30040170(99999, v16, a1) )
    {
      if ( v19 == a3 )
        return *(_DWORD *)(a2 + 4 * v3 + 1292);
LABEL_24:
      ++v19;
    }
LABEL_25:
    v3 = v22 + 1;
    ++v6;
    v17 = ++v22 < v23;
    v21 = v6;
    if ( !v17 )
      return 0;
    v4 = v20;
  }
  v7 = v4;
  v8 = a1;
  v9 = *(_DWORD *)(*v6 + 32) - (_DWORD)a1;
  do
  {
    v10 = v8[v9];
    v11 = *v8++;
    if ( !v7-- )
      break;
    if ( v10 != v11 )
    {
      if ( 2 * (v10 >= v11) != 1 )
      {
        v6 = v21;
        v13 = *(char **)(*v21 + 40);
        if ( !v13 || sub_300401D0(v20, v13, a1) )
          goto LABEL_25;
      }
      break;
    }
  }
  while ( v10 );
  if ( v19 != a3 )
  {
    v6 = v21;
    goto LABEL_24;
  }
  return *(_DWORD *)(a2 + 4 * v22 + 1292);
}

//----- (30042E70) --------------------------------------------------------
int __cdecl sub_30042E70(int a1, char **a2)
{
  int result; // eax
  char *v3; // esi
  int v4; // edi
  int i; // esi
  char *v6; // [esp+8h] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v6);
  if ( result )
  {
    v3 = v6;
    if ( *(float *)&v6 != 0.0 )
    {
      if ( sub_30040170(99999, v6, "backcolor") )
      {
        if ( sub_30040170(99999, v3, "forecolor") )
        {
          result = sub_30040170(99999, v3, "bordercolor");
          if ( result )
            return result;
          v4 = a1 + 148;
        }
        else
        {
          result = a1;
          v4 = a1 + 116;
          *(_DWORD *)(a1 + 72) |= 0x200u;
        }
      }
      else
      {
        result = a1;
        v4 = a1 + 132;
        *(_DWORD *)(a1 + 72) |= 0x400000u;
      }
      if ( v4 )
      {
        for ( i = 0; i < 4; *(float *)(v4 + 4 * i - 4) = *(float *)&v6 )
        {
          result = sub_30041C10((float *)&v6);
          if ( !result )
            break;
          ++i;
        }
      }
    }
  }
  return result;
}

//----- (30042F40) --------------------------------------------------------
int __cdecl sub_30042F40(int a1, char **a2)
{
  char *v3; // [esp+4h] [ebp-4h] BYREF

  return sub_30041FD0(a2, &v3);
}

//----- (30042F60) --------------------------------------------------------
int __cdecl sub_30042F60(int a1, char **a2)
{
  int result; // eax
  char *v3; // [esp+4h] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v3);
  if ( result )
  {
    result = (*(int (__cdecl **)(char *, _DWORD))dword_300F0F4C)(v3, *(_DWORD *)(a1 + 600));
    *(_DWORD *)(a1 + 180) = result;
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30042FA0) --------------------------------------------------------
int __cdecl sub_30042FA0(int a1, char *a2)
{
  int v2; // ebx
  int v3; // esi
  int i; // edi
  char *v5; // ecx

  if ( !a1 )
    return 0;
  if ( !a2 )
    return 0;
  v2 = *(_DWORD *)(a1 + 192);
  v3 = 0;
  if ( v2 <= 0 )
    return 0;
  for ( i = a1 + 1292; ; i += 4 )
  {
    v5 = *(char **)(*(_DWORD *)i + 32);
    if ( v5 )
    {
      if ( !sub_30040170(99999, a2, v5) )
        break;
    }
    if ( ++v3 >= v2 )
      return 0;
  }
  return *(_DWORD *)(a1 + 4 * v3 + 1292);
}

//----- (30043000) --------------------------------------------------------
int __cdecl sub_30043000(float *a1)
{
  int result; // eax
  float v2; // edx
  float v3; // ecx
  float v4; // edx
  float v5[4]; // [esp+0h] [ebp-10h] BYREF

  result = dword_300F0F4C;
  if ( *(_DWORD *)(dword_300F0F4C + 100) )
  {
    (*(void (__cdecl **)(float *))(dword_300F0F4C + 100))(v5);
    result = (int)a1;
    v2 = v5[1];
    a1[33] = v5[0];
    v3 = v5[2];
    a1[34] = v2;
    v4 = v5[3];
    a1[35] = v3;
    a1[36] = v4;
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043050) --------------------------------------------------------
int __cdecl sub_30043050(int a1, char **a2)
{
  int result; // eax
  int v3; // ebx
  int v4; // ebp
  char *v5; // edi
  int v6; // esi
  _DWORD *v7; // eax
  int v8; // edx
  int v9; // ecx
  int v10; // edx
  char *v11; // [esp+8h] [ebp-1Ch] BYREF
  char *v12; // [esp+Ch] [ebp-18h] BYREF
  int v13; // [esp+10h] [ebp-14h]
  int v14[4]; // [esp+14h] [ebp-10h] BYREF

  result = sub_30041FD0(a2, &v11);
  if ( result )
  {
    result = sub_30041FD0(a2, &v12);
    if ( result )
    {
      v3 = sub_30042C00(*(_DWORD *)(a1 + 240), v11);
      v13 = v3;
      result = sub_30041D40(a2, (int)v14);
      if ( result )
      {
        v4 = 0;
        if ( v3 > 0 )
        {
          v5 = v12;
          while ( 1 )
          {
            v6 = sub_30042D20(v11, *(_DWORD *)(a1 + 240), v4);
            if ( !v6 || !v5 )
              goto LABEL_16;
            if ( !sub_30040170(99999, v5, "backcolor") )
            {
              v7 = (_DWORD *)(v6 + 132);
              goto LABEL_14;
            }
            if ( !sub_30040170(99999, v5, "forecolor") )
              break;
            if ( !sub_30040170(99999, v5, "bordercolor") )
            {
              v7 = (_DWORD *)(v6 + 148);
LABEL_14:
              if ( v7 )
              {
                v8 = v14[1];
                *v7 = v14[0];
                v9 = v14[2];
                v7[1] = v8;
                v10 = v14[3];
                v7[2] = v9;
                v7[3] = v10;
              }
            }
LABEL_16:
            result = v13;
            if ( ++v4 >= v13 )
              return result;
          }
          v7 = (_DWORD *)(v6 + 116);
          *(_DWORD *)(v6 + 72) |= 0x200u;
          goto LABEL_14;
        }
      }
    }
  }
  return result;
}

//----- (30043180) --------------------------------------------------------
int __usercall sub_30043180@<eax>(char *a1@<eax>, int a2, int a3)
{
  int result; // eax
  int v5; // edi
  int v6; // esi
  int v7; // eax
  int i; // [esp+Ch] [ebp-4h]

  result = sub_30042C00(a2, a1);
  v5 = 0;
  for ( i = result; v5 < i; ++v5 )
  {
    v6 = sub_30042D20(a1, a2, v5);
    if ( v6 )
    {
      if ( a3 )
      {
        *(_DWORD *)(v6 + 72) |= 4u;
      }
      else
      {
        v7 = *(_DWORD *)(v6 + 48);
        *(_DWORD *)(v6 + 72) &= 0xFFFFFFFB;
        if ( v7 >= 0 )
        {
          (*(void (__cdecl **)(int))(dword_300F0F4C + 212))(v7);
          *(_DWORD *)(v6 + 48) = -1;
        }
      }
    }
    result = i;
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043200) --------------------------------------------------------
int __usercall sub_30043200@<eax>(char *a1@<eax>, int a2@<edi>, int a3)
{
  int result; // eax
  int v5; // ebp
  int i; // esi

  result = sub_30042C00(a2, a1);
  v5 = result;
  for ( i = 0; i < v5; ++i )
  {
    result = sub_30042D20(a1, a2, i);
    if ( result )
    {
      if ( a3 )
        *(_DWORD *)(result + 72) = *(_DWORD *)(result + 72) & 0xFFFFFFBF | 0x24;
      else
        *(_DWORD *)(result + 72) = *(_DWORD *)(result + 72) & 0xFFFFFFDF | 0x44;
    }
  }
  return result;
}

//----- (300432A0) --------------------------------------------------------
int __usercall sub_300432A0@<eax>(int a1@<ebx>)
{
  int v1; // edx
  int v2; // ecx
  int result; // eax
  int v4; // eax

  v1 = dword_300F0F64;
  v2 = dword_300F0F64 - 1;
  result = dword_300F0F64 - 1;
  if ( dword_300F0F64 - 1 >= 0 )
  {
    while ( *(&dword_305643C0 + result) != a1 )
    {
      if ( --result < 0 )
        goto LABEL_7;
    }
    v1 = --dword_300F0F64;
    if ( result < v2 )
      qmemcpy(&dword_305643C0 + result, (char *)&unk_305643C4 + 4 * result, 4 * (v2 - result));
  }
LABEL_7:
  if ( v1 == 16 )
  {
    sub_30021B10(1, (char *)&byte_3006371C);
    v4 = dword_300F0F64;
    *(&dword_305643C0 + dword_300F0F64) = a1;
    result = v4 + 1;
    dword_300F0F64 = result;
  }
  else
  {
    *(&dword_305643C0 + v1) = a1;
    dword_300F0F64 = v1 + 1;
  }
  return result;
}
// 300F0F64: using guessed type int dword_300F0F64;

//----- (30043350) --------------------------------------------------------
char *__usercall sub_30043350@<eax>(char *a1@<ebx>)
{
  int v1; // ebp
  int v2; // esi
  char **i; // edi

  v1 = dword_300F0F60;
  v2 = 0;
  if ( dword_300F0F60 <= 0 )
    return 0;
  for ( i = (char **)&unk_305477E0; !*i || !a1 || sub_30040170(99999, *i, a1); i += 451 )
  {
    if ( ++v2 >= v1 )
      return 0;
  }
  return (char *)&unk_305477C0 + 1804 * v2;
}
// 300F0F60: using guessed type int dword_300F0F60;

//----- (300433A0) --------------------------------------------------------
int __usercall sub_300433A0@<eax>(int result@<eax>)
{
  char *v1; // edx
  char v2[240]; // [esp+0h] [ebp-25Ch] BYREF
  int v3; // [esp+F0h] [ebp-16Ch]

  if ( result && (*(_BYTE *)(result + 72) & 4) != 0 )
  {
    v1 = *(char **)(result + 224);
    if ( v1 )
    {
      v3 = result;
      result = sub_30044180(v1, (int)v2);
    }
  }
  return result;
}

//----- (300433E0) --------------------------------------------------------
int __usercall sub_300433E0@<eax>(int a1@<ebx>)
{
  char *v1; // edx
  int v2; // edx
  int v3; // ecx
  int v4; // eax
  int result; // eax
  char v6[240]; // [esp+0h] [ebp-25Ch] BYREF
  int v7; // [esp+F0h] [ebp-16Ch]

  if ( a1 )
  {
    if ( (*(_BYTE *)(a1 + 72) & 4) != 0 )
    {
      v1 = *(char **)(a1 + 224);
      if ( v1 )
      {
        v7 = a1;
        sub_30044180(v1, (int)v6);
      }
    }
  }
  v2 = dword_300F0F64;
  v3 = dword_300F0F64 - 1;
  v4 = dword_300F0F64 - 1;
  if ( dword_300F0F64 - 1 >= 0 )
  {
    while ( *(&dword_305643C0 + v4) != a1 )
    {
      if ( --v4 < 0 )
        goto LABEL_11;
    }
    v2 = --dword_300F0F64;
    if ( v4 < v3 )
      qmemcpy(&dword_305643C0 + v4, (char *)&unk_305643C4 + 4 * v4, 4 * (v3 - v4));
  }
LABEL_11:
  result = 2;
  if ( (*(_BYTE *)(a1 + 72) & 2) != 0 && v2 )
    *(_DWORD *)(dword_305643BC[v2] + 72) |= 2u;
  *(_DWORD *)(a1 + 72) &= 0xFFFFFFF9;
  return result;
}
// 300F0F64: using guessed type int dword_300F0F64;
// 305643BC: using guessed type int dword_305643BC[];

//----- (300434D0) --------------------------------------------------------
int __cdecl sub_300434D0(int a1, char **a2)
{
  int result; // eax
  char *v3; // [esp+4h] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v3);
  if ( result )
    result = sub_30043180(v3, *(_DWORD *)(a1 + 240), 1);
  return result;
}

//----- (30043500) --------------------------------------------------------
int __cdecl sub_30043500(int a1, char **a2)
{
  int result; // eax
  char *v3; // [esp+4h] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v3);
  if ( result )
    result = sub_30043180(v3, *(_DWORD *)(a1 + 240), 0);
  return result;
}

//----- (30043530) --------------------------------------------------------
int __cdecl sub_30043530(int a1, char **a2)
{
  int result; // eax
  char *v3; // [esp+4h] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v3);
  if ( result )
    result = sub_30043200(v3, *(_DWORD *)(a1 + 240), 0);
  return result;
}

//----- (30043560) --------------------------------------------------------
int __cdecl sub_30043560(int a1, char **a2)
{
  int result; // eax
  char *v3; // [esp+4h] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v3);
  if ( result )
    result = sub_30043200(v3, *(_DWORD *)(a1 + 240), 1);
  return result;
}

//----- (30043590) --------------------------------------------------------
char *__cdecl sub_30043590(int a1, char **a2)
{
  char *result; // eax
  char *v3; // [esp+4h] [ebp-4h] BYREF

  result = (char *)sub_30041FD0(a2, &v3);
  if ( result )
  {
    result = sub_30043350(v3);
    if ( result )
      result = (char *)sub_300469E0(result);
  }
  return result;
}

//----- (300435C0) --------------------------------------------------------
int __cdecl sub_300435C0(int a1, char **a2)
{
  char *v2; // eax
  char *v3; // eax
  char *v5; // [esp+4h] [ebp-408h] BYREF
  char v6[1024]; // [esp+8h] [ebp-404h] BYREF
  unsigned int v7; // [esp+408h] [ebp-4h]
  unsigned int retaddr; // [esp+40Ch] [ebp+0h]

  v7 = retaddr ^ dword_300705C0;
  if ( sub_30041FD0(a2, &v5) )
  {
    (*(void (__cdecl **)(_DWORD, char *, int))(dword_300F0F4C + 104))(*(_DWORD *)(a1 + 280), v6, 1024);
    v2 = (char *)sub_300403F0(v5, v6);
    v3 = sub_30043350(v2);
    if ( v3 )
      sub_300469E0(v3);
  }
  return sub_30052A2E(retaddr ^ v7);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043650) --------------------------------------------------------
int __cdecl sub_30043650(int a1, char **a2)
{
  char *v2; // eax
  char *v3; // eax
  char *v5; // [esp+4h] [ebp-408h] BYREF
  char v6[1024]; // [esp+8h] [ebp-404h] BYREF
  unsigned int v7; // [esp+408h] [ebp-4h]
  unsigned int retaddr; // [esp+40Ch] [ebp+0h]

  v7 = retaddr ^ dword_300705C0;
  if ( sub_30041FD0(a2, &v5) )
  {
    (*(void (__cdecl **)(_DWORD, char *, int))(dword_300F0F4C + 104))(*(_DWORD *)(a1 + 280), v6, 1024);
    v2 = (char *)sub_300403F0(v5, v6);
    v3 = sub_30043350(v2);
    if ( v3 )
      sub_300433E0((int)v3);
  }
  return sub_30052A2E(retaddr ^ v7);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300436E0) --------------------------------------------------------
char *__cdecl sub_300436E0(int a1, char **a2)
{
  char *result; // eax
  double v3; // st7
  char *v4; // ebx
  char *v5; // [esp+8h] [ebp-Ch] BYREF
  char *v6; // [esp+Ch] [ebp-8h] BYREF
  char *v7; // [esp+10h] [ebp-4h] BYREF

  result = (char *)sub_30041FD0(a2, &v5);
  if ( result )
  {
    result = (char *)sub_30041FD0(a2, &v7);
    if ( result )
    {
      result = (char *)sub_30041FD0(a2, &v6);
      if ( result )
      {
        v3 = ((double (__cdecl *)(char *))*(_DWORD *)(dword_300F0F4C + 108))(v5);
        v4 = v6;
        if ( v3 != 0.0 )
          v4 = v7;
        result = sub_30043350(v4);
        if ( result )
          result = (char *)sub_300469E0(result);
      }
    }
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043760) --------------------------------------------------------
char *__cdecl sub_30043760(int a1, char **a2)
{
  char *result; // eax
  char *v3; // [esp+4h] [ebp-4h] BYREF

  result = (char *)sub_30041FD0(a2, &v3);
  if ( result )
  {
    result = sub_30043350(v3);
    if ( result )
      result = (char *)sub_300433E0((int)result);
  }
  return result;
}

//----- (30043790) --------------------------------------------------------
char *__cdecl sub_30043790(int a1, char **a2)
{
  char *result; // eax
  char *v3; // [esp+4h] [ebp-4h] BYREF

  result = (char *)sub_30041FD0(a2, &v3);
  if ( result )
  {
    result = (char *)(*(int (**)(void))(dword_300F0F4C + 168))();
    if ( result )
    {
      result = sub_30043350(v3);
      if ( result )
        result = (char *)sub_300469E0(result);
    }
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300437D0) --------------------------------------------------------
char *__cdecl sub_300437D0(int a1, char **a2)
{
  char *result; // eax
  char *v3; // [esp+4h] [ebp-4h] BYREF

  result = (char *)sub_30041FD0(a2, &v3);
  if ( result )
  {
    result = (char *)(*(int (**)(void))(dword_300F0F4C + 168))();
    if ( result )
    {
      result = sub_30043350(v3);
      if ( result )
        result = (char *)sub_300433E0((int)result);
    }
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043810) --------------------------------------------------------
int __usercall sub_30043810@<eax>(char *a1@<eax>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, float a12)
{
  int result; // eax
  int v14; // ecx
  int v15; // esi
  double v16; // st7
  int v17; // eax
  double v18; // st7
  double v19; // st6
  double v20; // st6
  double v21; // st7
  int v22; // eax
  double v23; // st7
  float v24; // [esp+4h] [ebp-14h]
  float v25; // [esp+8h] [ebp-10h]
  float v26; // [esp+Ch] [ebp-Ch]
  int i; // [esp+10h] [ebp-8h]
  int v28; // [esp+14h] [ebp-4h]

  result = sub_30042C00(a2, a1);
  v14 = 0;
  v28 = result;
  for ( i = 0; i < v28; ++i )
  {
    v15 = sub_30042D20(a1, a2, v14);
    if ( v15 )
    {
      v16 = 1.0 / a12;
      *(_DWORD *)(v15 + 72) |= 0x104u;
      *(_DWORD *)(v15 + 108) = a11;
      *(float *)(v15 + 16) = *(float *)&a3;
      *(float *)(v15 + 20) = *(float *)&a4;
      *(float *)(v15 + 24) = *(float *)&a5;
      *(float *)(v15 + 28) = *(float *)&a6;
      *(float *)(v15 + 76) = *(float *)&a7;
      *(float *)(v15 + 80) = *(float *)&a8;
      *(float *)(v15 + 84) = *(float *)&a9;
      *(float *)(v15 + 88) = *(float *)&a10;
      *(float *)(v15 + 92) = (double)(int)abs32((unsigned __int64)(*(float *)&a7 - *(float *)&a3)) * v16;
      *(float *)(v15 + 96) = (double)(int)abs32((unsigned __int64)(*(float *)&a8 - *(float *)&a4)) * v16;
      *(float *)(v15 + 100) = (double)(int)abs32((unsigned __int64)(*(float *)&a9 - *(float *)&a5)) * v16;
      v17 = *(_DWORD *)(v15 + 240);
      *(float *)(v15 + 104) = (double)(int)abs32((unsigned __int64)(*(float *)&a10 - *(float *)&a6)) * v16;
      if ( v17 )
      {
        v18 = *(float *)v17;
        v24 = *(float *)v17;
        v19 = *(float *)(v17 + 4);
        v25 = *(float *)(v17 + 4);
        if ( *(_DWORD *)(v17 + 56) )
        {
          v20 = v18 + *(float *)(v17 + 68);
          v24 = v20;
          v18 = v20;
          v19 = *(float *)(v17 + 4) + *(float *)(v17 + 68);
          v25 = v19;
        }
        v26 = v19;
        if ( *(_DWORD *)(v15 + 56) )
        {
          v18 = v24 + *(float *)(v15 + 68);
          v26 = v25 + *(float *)(v15 + 68);
        }
        v21 = v18 + *(float *)(v15 + 16);
        v22 = *(_DWORD *)(v15 + 28);
        *(_DWORD *)(v15 + 8) = *(_DWORD *)(v15 + 24);
        *(float *)v15 = v21;
        *(_DWORD *)(v15 + 12) = v22;
        *(_DWORD *)(v15 + 192) = 0;
        v23 = v26 + *(float *)(v15 + 20);
        *(_DWORD *)(v15 + 196) = 0;
        *(float *)(v15 + 4) = v23;
      }
    }
    result = v28;
    v14 = i + 1;
  }
  return result;
}

//----- (300439C0) --------------------------------------------------------
int __cdecl sub_300439C0(int a1, char **a2)
{
  int result; // eax
  float v3; // [esp+8h] [ebp-2Ch] BYREF
  int v4; // [esp+Ch] [ebp-28h] BYREF
  char *v5; // [esp+10h] [ebp-24h] BYREF
  int v6[4]; // [esp+14h] [ebp-20h] BYREF
  int v7[4]; // [esp+24h] [ebp-10h] BYREF

  result = sub_30041FD0(a2, &v5);
  if ( result )
  {
    result = sub_30041F30((float *)v7);
    if ( result )
    {
      result = sub_30041F30((float *)v6);
      if ( result )
      {
        result = sub_30041E00(&v4);
        if ( result )
        {
          result = sub_30041C10(&v3);
          if ( result )
            result = sub_30043810(
                       v5,
                       *(_DWORD *)(a1 + 240),
                       v7[0],
                       v7[1],
                       v7[2],
                       v7[3],
                       v6[0],
                       v6[1],
                       v6[2],
                       v6[3],
                       v4,
                       v3);
        }
      }
    }
  }
  return result;
}

//----- (30043A90) --------------------------------------------------------
int __usercall sub_30043A90@<eax>(char *a1@<eax>, int a2@<edi>, float a3, float a4, int a5, int a6, int a7)
{
  int result; // eax
  int v9; // esi
  int v10; // eax
  int v11; // ecx
  double v12; // st7
  double v13; // st6
  double v14; // st6
  int v15; // ecx
  float v16; // [esp+Ch] [ebp-10h]
  float v17; // [esp+10h] [ebp-Ch]
  float v18; // [esp+14h] [ebp-8h]
  int i; // [esp+18h] [ebp-4h]

  result = sub_30042C00(a2, a1);
  v9 = 0;
  for ( i = result; v9 < i; ++v9 )
  {
    v10 = sub_30042D20(a1, a2, v9);
    if ( v10 )
    {
      *(_DWORD *)(v10 + 72) |= 0x10004u;
      *(_DWORD *)(v10 + 108) = a7;
      *(_DWORD *)(v10 + 80) = a6;
      *(float *)(v10 + 20) = a4;
      v11 = *(_DWORD *)(v10 + 240);
      *(_DWORD *)(v10 + 76) = a5;
      *(float *)(v10 + 16) = a3;
      if ( v11 )
      {
        v12 = *(float *)v11;
        v16 = *(float *)v11;
        v13 = *(float *)(v11 + 4);
        v17 = *(float *)(v11 + 4);
        if ( *(_DWORD *)(v11 + 56) )
        {
          v14 = v12 + *(float *)(v11 + 68);
          v16 = v14;
          v12 = v14;
          v13 = *(float *)(v11 + 4) + *(float *)(v11 + 68);
          v17 = v13;
        }
        v18 = v13;
        if ( *(_DWORD *)(v10 + 56) )
        {
          v12 = v16 + *(float *)(v10 + 68);
          v18 = v17 + *(float *)(v10 + 68);
        }
        v15 = *(_DWORD *)(v10 + 28);
        *(_DWORD *)(v10 + 8) = *(_DWORD *)(v10 + 24);
        *(float *)v10 = v12 + a3;
        *(_DWORD *)(v10 + 12) = v15;
        *(_DWORD *)(v10 + 192) = 0;
        *(_DWORD *)(v10 + 196) = 0;
        *(float *)(v10 + 4) = v18 + a4;
      }
    }
    result = i;
  }
  return result;
}

//----- (30043B80) --------------------------------------------------------
int __cdecl sub_30043B80(int a1, char **a2)
{
  int result; // eax
  int v3; // [esp+8h] [ebp-18h] BYREF
  int v4; // [esp+Ch] [ebp-14h] BYREF
  int v5; // [esp+10h] [ebp-10h] BYREF
  float v6; // [esp+14h] [ebp-Ch] BYREF
  float v7; // [esp+18h] [ebp-8h] BYREF
  char *v8; // [esp+1Ch] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v8);
  if ( result )
  {
    result = sub_30041C10(&v7);
    if ( result )
    {
      result = sub_30041C10(&v6);
      if ( result )
      {
        result = sub_30041C10((float *)&v5);
        if ( result )
        {
          result = sub_30041C10((float *)&v4);
          if ( result )
          {
            result = sub_30041E00(&v3);
            if ( result )
              result = sub_30043A90(v8, *(_DWORD *)(a1 + 240), v7, v6, v5, v4, v3);
          }
        }
      }
    }
  }
  return result;
}

//----- (30043C30) --------------------------------------------------------
int __cdecl sub_30043C30(int a1, char **a2)
{
  int result; // eax
  int v3; // ebx
  int v4; // esi
  char *v5; // edx
  char *v6; // [esp+4h] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v6);
  if ( result )
  {
    v3 = *(_DWORD *)(a1 + 240);
    result = sub_30042FA0(v3, v6);
    v4 = result;
    if ( result )
    {
      if ( (*(_BYTE *)(result + 72) & 0x12) == 0 )
      {
        sub_30042B30(v3);
        v5 = *(char **)(v4 + 272);
        *(_DWORD *)(v4 + 72) |= 2u;
        if ( v5 )
          sub_30044180(v5, v4);
        result = *(_DWORD *)(dword_300F0F4C + 123644);
        if ( result )
          result = (*(int (__cdecl **)(_DWORD))(dword_300F0F4C + 132))(*(_DWORD *)(dword_300F0F4C + 123644));
      }
    }
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043CB0) --------------------------------------------------------
int __cdecl sub_30043CB0(int a1, char **a2)
{
  int result; // eax
  char *v3; // [esp+4h] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v3);
  if ( result )
    result = (*(int (__cdecl **)(const char *, char *))(dword_300F0F4C + 112))("team_model", v3);
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043CE0) --------------------------------------------------------
int __cdecl sub_30043CE0(int a1, char **a2)
{
  int result; // eax
  char *v3; // [esp+4h] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v3);
  if ( result )
    result = (*(int (__cdecl **)(const char *, char *))(dword_300F0F4C + 112))("team_headmodel", v3);
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043D10) --------------------------------------------------------
int __cdecl sub_30043D10(int a1, char **a2)
{
  int result; // eax
  char *v3; // [esp+8h] [ebp-8h] BYREF
  char *v4; // [esp+Ch] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v4);
  if ( result )
  {
    result = sub_30041FD0(a2, &v3);
    if ( result )
      result = (*(int (__cdecl **)(char *, char *))(dword_300F0F4C + 112))(v4, v3);
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043D60) --------------------------------------------------------
int __cdecl sub_30043D60(int a1, char **a2)
{
  int result; // eax
  int (__cdecl **v3)(int, int); // esi
  int v4; // eax
  char *v5; // [esp+4h] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v5);
  if ( result )
  {
    v3 = (int (__cdecl **)(int, int))(dword_300F0F4C + 184);
    v4 = sub_300403F0("%s ; ", v5);
    result = (*v3)(2, v4);
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043DA0) --------------------------------------------------------
int __cdecl sub_30043DA0(int a1, char **a2)
{
  void (__cdecl **v2)(int, int); // esi
  int v3; // eax
  char *v5; // [esp+8h] [ebp-410h] BYREF
  char *v6; // [esp+Ch] [ebp-40Ch] BYREF
  char *v7; // [esp+10h] [ebp-408h] BYREF
  char v8[1024]; // [esp+14h] [ebp-404h] BYREF
  unsigned int v9; // [esp+414h] [ebp-4h]
  unsigned int retaddr; // [esp+418h] [ebp+0h]

  v9 = retaddr ^ dword_300705C0;
  if ( sub_30041FD0(a2, &v7) )
  {
    if ( sub_30041FD0(a2, &v5) )
    {
      if ( sub_30041FD0(a2, &v6) )
      {
        (*(void (__cdecl **)(char *, char *, int))(dword_300F0F4C + 104))(v7, v8, 1024);
        if ( v5 )
        {
          if ( !sub_30040170(99999, v8, v5) )
          {
            v2 = (void (__cdecl **)(int, int))(dword_300F0F4C + 184);
            v3 = sub_300403F0("%s\n", v6);
            (*v2)(2, v3);
          }
        }
      }
    }
  }
  return sub_30052A2E(retaddr ^ v9);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043E70) --------------------------------------------------------
int __cdecl sub_30043E70(int a1, char **a2)
{
  int v2; // esi
  void (__cdecl **v3)(int, int); // esi
  int v4; // eax
  char *String; // [esp+8h] [ebp-410h] BYREF
  char *v7; // [esp+Ch] [ebp-40Ch] BYREF
  char *v8; // [esp+10h] [ebp-408h] BYREF
  char v9[1024]; // [esp+14h] [ebp-404h] BYREF
  unsigned int v10; // [esp+414h] [ebp-4h]
  unsigned int retaddr; // [esp+418h] [ebp+0h]

  v10 = retaddr ^ dword_300705C0;
  if ( sub_30041FD0(a2, &v8) )
  {
    if ( sub_30041FD0(a2, &String) )
    {
      if ( sub_30041FD0(a2, &v7) )
      {
        (*(void (__cdecl **)(char *, char *, int))(dword_300F0F4C + 104))(v8, v9, 1024);
        v2 = j__atol(String);
        if ( j__atol(v9) == v2 )
        {
          v3 = (void (__cdecl **)(int, int))(dword_300F0F4C + 184);
          v4 = sub_300403F0("%s\n", v7);
          (*v3)(2, v4);
        }
      }
    }
  }
  return sub_30052A2E(retaddr ^ v10);
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043F40) --------------------------------------------------------
void __cdecl sub_30043F40(int a1, char **a2)
{
  double v2; // st7
  void (__cdecl **v3)(int, int); // esi
  int v4; // eax
  double v5; // [esp+8h] [ebp-10h] BYREF
  char *String; // [esp+10h] [ebp-8h] BYREF
  char *v7; // [esp+14h] [ebp-4h] BYREF

  if ( sub_30041FD0(a2, (char **)&v5) && sub_30041FD0(a2, &String) && sub_30041FD0(a2, &v7) )
  {
    v5 = ((double (__cdecl *)(_DWORD))*(_DWORD *)(dword_300F0F4C + 108))(LODWORD(v5));
    v2 = atof(String);
    if ( fabs(v5 - v2) < 0.000009999999747378752 )
    {
      v3 = (void (__cdecl **)(int, int))(dword_300F0F4C + 184);
      v4 = sub_300403F0("%s\n", v7);
      (*v3)(2, v4);
    }
  }
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30043FE0) --------------------------------------------------------
int __cdecl sub_30043FE0(int a1, char **a2)
{
  int result; // eax
  char *v3; // [esp+4h] [ebp-4h] BYREF

  result = sub_30041FD0(a2, &v3);
  if ( result )
    result = (*(int (__cdecl **)(char *))(dword_300F0F4C + 132))(v3);
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30044010) --------------------------------------------------------
void __cdecl sub_30044010(int a1, char **a2)
{
  int v2; // eax
  int v3; // edi
  void (__cdecl **v4)(_DWORD, char *, int); // esi
  int v5; // eax
  char *v6; // [esp+8h] [ebp-Ch] BYREF
  char *String; // [esp+Ch] [ebp-8h] BYREF
  char *v8; // [esp+10h] [ebp-4h] BYREF

  if ( sub_30041FD0(a2, &v6) )
  {
    if ( sub_30041FD0(a2, &String) )
    {
      if ( sub_30041FD0(a2, &v8) )
      {
        v2 = sub_30042FA0(*(_DWORD *)(a1 + 240), v6);
        v3 = v2;
        if ( v2 )
        {
          if ( *(float *)(v2 + 588) != 0.0 )
          {
            v4 = (void (__cdecl **)(_DWORD, char *, int))(dword_300F0F4C + 160);
            v5 = j__atol(String);
            (*v4)(*(_DWORD *)(v3 + 588), v8, v5);
          }
        }
      }
    }
  }
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300440B0) --------------------------------------------------------
int sub_300440B0()
{
  return (*(int (**)(void))(dword_300F0F4C + 164))();
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300440C0) --------------------------------------------------------
void __cdecl sub_300440C0(int a1, char **a2)
{
  char *v2; // ecx
  int i; // esi
  char *v4; // ecx
  char *v5; // edx
  void (__cdecl **v6)(int, int); // edi
  double v7; // st7
  int v8; // eax
  const char *v9; // [esp-Ch] [ebp-10h]
  char *v10; // [esp+0h] [ebp-4h] BYREF

  v10 = v2;
  if ( ((double (__cdecl *)(const char *))*(_DWORD *)(dword_300F0F4C + 108))("ui_scriptMenuAllowResponse") != 0.0
    && sub_30041FD0(a2, &v10) )
  {
    for ( i = 0; i < 32; ++i )
    {
      v4 = (char *)(*(int (__cdecl **)(int))(dword_300F0F4C + 116))(i + 1180);
      if ( *v4 )
      {
        v5 = *(char **)(*(_DWORD *)(a1 + 240) + 32);
        if ( v5 )
        {
          if ( !sub_30040170(99999, v5, v4) )
            break;
        }
      }
    }
    if ( i == 32 )
      i = -1;
    v9 = v10;
    v6 = (void (__cdecl **)(int, int))(dword_300F0F4C + 184);
    v7 = ((double (__cdecl *)(const char *))*(_DWORD *)(dword_300F0F4C + 108))("sv_serverId");
    v8 = sub_300403F0("cmd mr %i %i %s\n", (unsigned int)(unsigned __int64)v7, i, v9);
    (*v6)(2, v8);
  }
}
// 300440C0: variable 'v2' is possibly undefined
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30044180) --------------------------------------------------------
int __usercall sub_30044180@<eax>(char *a1@<edx>, int a2)
{
  int result; // eax
  char *v3; // ebx
  int v4; // esi
  int v5; // edi
  char *v6; // ecx
  char *v7; // [esp+10h] [ebp-410h] BYREF
  char *v8; // [esp+14h] [ebp-40Ch] BYREF
  char v9[1028]; // [esp+18h] [ebp-408h] BYREF
  unsigned int v10; // [esp+41Ch] [ebp-4h]
  unsigned int retaddr; // [esp+424h] [ebp+4h]

  v10 = retaddr ^ dword_300705C0;
  memset(v9, 0, 0x400u);
  result = a2;
  if ( a2 )
  {
    if ( a1 )
    {
      if ( *a1 )
      {
        sub_30040290(1024, v9, a1);
        v7 = v9;
        for ( result = sub_30041FD0(&v7, &v8); result; result = sub_30041FD0(&v7, &v8) )
        {
          v3 = v8;
          if ( *v8 != 59 || v8[1] )
          {
            v4 = dword_30071148;
            v5 = 0;
            if ( dword_30071148 <= 0 )
            {
LABEL_11:
              (*(void (__cdecl **)(char **))(dword_300F0F4C + 96))(&v7);
            }
            else
            {
              while ( 1 )
              {
                v6 = (&off_30071058)[2 * v5];
                if ( v6 )
                {
                  if ( !sub_30040170(99999, v3, v6) )
                    break;
                }
                if ( ++v5 >= v4 )
                  goto LABEL_11;
              }
              (*(&off_3007105C + 2 * v5))(a2, (int)&v7);
            }
          }
        }
      }
    }
  }
  return result;
}
// 300705C0: using guessed type int dword_300705C0;
// 30071058: using guessed type char *off_30071058;
// 3007105C: using guessed type int (__cdecl *off_3007105C)(int, int);
// 30071148: using guessed type int dword_30071148;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30044280) --------------------------------------------------------
BOOL __cdecl sub_30044280(int a1)
{
  int v1; // ecx
  int v2; // esi
  _BYTE *v3; // eax
  _BYTE *v4; // eax
  char *v6; // [esp+10h] [ebp-810h] BYREF
  char *v7; // [esp+14h] [ebp-80Ch] BYREF
  char v8[1024]; // [esp+18h] [ebp-808h] BYREF
  char v9[1028]; // [esp+418h] [ebp-408h] BYREF
  unsigned int v10; // [esp+81Ch] [ebp-4h]
  unsigned int retaddr; // [esp+824h] [ebp+4h]

  v2 = v1;
  v10 = retaddr ^ dword_300705C0;
  memset(v8, 0, sizeof(v8));
  if ( !v1 )
    return 1;
  v3 = *(_BYTE **)(v1 + 288);
  if ( !v3 )
    return 1;
  if ( !*v3 )
    return 1;
  v4 = *(_BYTE **)(v1 + 284);
  if ( !v4 || !*v4 )
    return 1;
  (*(void (__cdecl **)(_BYTE *, char *, int))(dword_300F0F4C + 104))(v4, v9, 1024);
  sub_30040290(1024, v8, *(char **)(v2 + 288));
  v6 = v8;
  if ( !sub_30041FD0(&v6, &v7) )
    return (a1 & *(_DWORD *)(v2 + 292)) == 0;
  while ( 1 )
  {
    if ( *v7 != 59 || v7[1] )
    {
      if ( (a1 & *(_DWORD *)(v2 + 292)) != 0 )
      {
        if ( !sub_30040170(99999, v9, v7) )
          return 1;
        goto LABEL_13;
      }
      if ( !sub_30040170(99999, v9, v7) )
        return 0;
    }
LABEL_13:
    if ( !sub_30041FD0(&v6, &v7) )
      return (a1 & *(_DWORD *)(v2 + 292)) == 0;
  }
}
// 30044296: variable 'v1' is possibly undefined
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300443D0) --------------------------------------------------------
int __usercall sub_300443D0@<eax>(int a1@<esi>, float a2, float a3)
{
  int v3; // eax
  _DWORD *v4; // ebp
  int v5; // edi
  int v6; // eax
  char *v7; // edx
  char *v8; // edx
  int v9; // eax
  _DWORD *i; // ecx
  int v12; // [esp+4h] [ebp-14h]

  v12 = *(_DWORD *)(dword_300F0F4C + 123644);
  if ( !a1 )
    return 0;
  v3 = *(_DWORD *)(a1 + 72);
  if ( (v3 & 0x12) != 0 )
    return 0;
  if ( (v3 & 4) == 0 )
    return 0;
  v4 = *(_DWORD **)(a1 + 240);
  if ( (*(_BYTE *)(a1 + 292) & 3) != 0 && !sub_30044280(1) )
    return 0;
  if ( (*(_BYTE *)(a1 + 292) & 0xC) != 0 && !sub_30044280(4) )
    return 0;
  v5 = sub_30042B30(*(_DWORD *)(a1 + 240));
  if ( *(_DWORD *)(a1 + 200) )
  {
    v8 = *(char **)(a1 + 272);
    *(_DWORD *)(a1 + 72) |= 2u;
    if ( v8 )
      sub_30044180(v8, a1);
    if ( *(_DWORD *)(a1 + 296) )
      v12 = *(_DWORD *)(a1 + 296);
LABEL_19:
    v6 = v12;
    goto LABEL_20;
  }
  if ( !sub_30042BB0(a2, a3) )
  {
    if ( v5 )
    {
      v7 = *(char **)(v5 + 272);
      *(_DWORD *)(v5 + 72) |= 2u;
      if ( v7 )
        sub_30044180(v7, v5);
    }
    goto LABEL_22;
  }
  v6 = *(_DWORD *)(a1 + 296);
  *(_DWORD *)(a1 + 72) |= 2u;
  if ( !v6 )
    goto LABEL_19;
LABEL_20:
  if ( v6 )
    (*(void (__cdecl **)(int))(dword_300F0F4C + 132))(v6);
LABEL_22:
  v9 = 0;
  if ( (int)v4[48] > 0 )
  {
    for ( i = v4 + 323; *i != a1; ++i )
    {
      if ( ++v9 >= v4[48] )
        return 1;
    }
    v4[50] = v9;
  }
  return 1;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300445C0) --------------------------------------------------------
int __thiscall sub_300445C0(_DWORD *this)
{
  int v1; // eax

  v1 = this[51];
  if ( v1 == 4 || v1 == 9 || v1 == 15 || v1 == 11 || v1 == 13 || v1 == 10 || !v1 || v1 == 16 )
    return this[149];
  Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_EDITFIELD, ITEM_TYPE_NUMERICFIELD, ITEM_TYPE_DECIMALFIELD, ITEM_TYP"
             "E_UPREDITFIELD, ITEM_TYPE_YESNO, ITEM_TYPE_BIND, ITEM_TYPE_SLIDER, or ITEM_TYPE_TEXT\n");
  return 0;
}

//----- (30044660) --------------------------------------------------------
int __usercall sub_30044660@<eax>(int a1@<edi>)
{
  int v1; // ebx
  int v2; // esi
  double v4; // st7

  if ( *(_DWORD *)(a1 + 204) == 6 )
  {
    v1 = *(_DWORD *)(a1 + 596);
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
    v1 = 0;
  }
  v2 = (*(int (__cdecl **)(_DWORD))(dword_300F0F4C + 140))(*(_DWORD *)(a1 + 588));
  if ( !v1 )
    return 0;
  if ( (*(_DWORD *)(a1 + 72) & 0x400) != 0 )
    v4 = *(float *)(a1 + 8) / *(float *)(v1 + 16);
  else
    v4 = *(float *)(a1 + 12) / *(float *)(v1 + 20);
  return (int)(v2 - (unsigned __int64)v4 + 1) < 0 ? 0 : v2 - (unsigned __int64)v4 + 1;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300446D0) --------------------------------------------------------
int __usercall sub_300446D0@<eax>(int a1@<eax>)
{
  int *v2; // esi
  unsigned __int64 v3; // rax
  int v4; // eax
  double v5; // st7

  if ( *(_DWORD *)(a1 + 204) == 6 )
  {
    v2 = *(int **)(a1 + 596);
    if ( v2 )
    {
      v4 = sub_30044660(a1);
      if ( (*(_DWORD *)(a1 + 72) & 0x400) != 0 )
      {
        if ( v4 <= 0 )
          v3 = (unsigned __int64)((double)*v2 * 0.0 + *(float *)a1 + 17.0);
        else
          v3 = (unsigned __int64)((double)*v2 * ((*(float *)(a1 + 8) - 32.0 - 2.0 - 16.0) / (double)v4)
                                + *(float *)a1
                                + 17.0);
      }
      else
      {
        if ( v4 <= 0 )
          v5 = 0.0;
        else
          v5 = (*(float *)(a1 + 12) - 32.0 - 2.0 - 16.0) / (double)v4;
        v3 = (unsigned __int64)((double)*v2 * v5 + *(float *)(a1 + 4) + 17.0);
      }
    }
    else
    {
      LODWORD(v3) = 0;
    }
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
    LODWORD(v3) = 0;
  }
  return v3;
}

//----- (300447A0) --------------------------------------------------------
int __usercall sub_300447A0@<eax>(int a1@<esi>)
{
  signed int v1; // edi

  if ( dword_300F0F48 == a1 )
  {
    if ( (*(_DWORD *)(a1 + 72) & 0x400) != 0 )
    {
      v1 = *(_DWORD *)(dword_300F0F4C + 244);
      if ( v1 >= (int)((unsigned __int64)(*(float *)a1 + 17.0) + 8)
        && v1 <= (int)((unsigned __int64)(*(float *)(a1 + 8) + *(float *)a1 - 32.0 - 1.0) + 8) )
      {
        return v1 - 8;
      }
    }
    else
    {
      v1 = *(_DWORD *)(dword_300F0F4C + 248);
      if ( v1 >= (int)((unsigned __int64)(*(float *)(a1 + 4) + 17.0) + 8)
        && v1 <= (int)((unsigned __int64)(*(float *)(a1 + 12) + *(float *)(a1 + 4) - 32.0 - 1.0) + 8) )
      {
        return v1 - 8;
      }
    }
  }
  return sub_300446D0(a1);
}
// 300F0F48: using guessed type int dword_300F0F48;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30044840) --------------------------------------------------------
double __thiscall sub_30044840(void *this)
{
  int v1; // eax
  float *v2; // esi
  double result; // st7
  double v4; // st7
  float v5; // [esp+4h] [ebp-4h]

  v1 = *((_DWORD *)this + 51);
  if ( v1 == 4 || v1 == 9 || v1 == 15 || v1 == 11 || v1 == 13 || v1 == 10 || !v1 || v1 == 16 )
  {
    v2 = (float *)*((_DWORD *)this + 149);
    if ( v2 )
    {
      if ( *((_DWORD *)this + 59) )
        v5 = *((float *)this + 48) + *((float *)this + 46) + 8.0;
      else
        v5 = *(float *)this;
      v4 = ((double (__cdecl *)(_DWORD))*(_DWORD *)(dword_300F0F4C + 108))(*((_DWORD *)this + 70));
      if ( v4 >= *v2 )
      {
        if ( v4 > v2[1] )
          v4 = v2[1];
      }
      else
      {
        v4 = *v2;
      }
      result = (v4 - *v2) / (v2[1] - *v2) * 84.0 + v5 + 6.0;
    }
    else
    {
      result = 0.0;
    }
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_EDITFIELD, ITEM_TYPE_NUMERICFIELD, ITEM_TYPE_DECIMALFIELD, ITEM_T"
               "YPE_UPREDITFIELD, ITEM_TYPE_YESNO, ITEM_TYPE_BIND, ITEM_TYPE_SLIDER, or ITEM_TYPE_TEXT\n");
    result = 0.0;
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30044910) --------------------------------------------------------
int __usercall sub_30044910@<eax>(float *a1@<esi>, float a2, float a3)
{
  double v3; // st7
  int result; // eax
  float v5; // [esp+4h] [ebp-Ch]

  v3 = sub_30044840(a1) - 5.0;
  v5 = a1[1] - 2.0;
  if ( a2 < v3 || a2 > v3 + 10.0 || a3 < (double)v5 || v5 + 20.0 < a3 )
    result = 0;
  else
    result = 0x2000;
  return result;
}

//----- (30044990) --------------------------------------------------------
int __usercall sub_30044990@<eax>(_DWORD *a1@<esi>, float a2, float a3)
{
  int result; // eax

  (*(void (__cdecl **)(_DWORD))(dword_300F0F4C + 140))(a1[147]);
  if ( a1[51] != 6 )
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
    return 0;
  }
  result = a1[149];
  if ( result )
  {
    if ( (a1[18] & 0x400) != 0 )
    {
      if ( sub_30042BB0(a2, a3) )
        return 2048;
      if ( sub_30042BB0(a2, a3) )
        return 4096;
      sub_300446D0((int)a1);
      if ( sub_30042BB0(a2, a3) )
        return 0x2000;
      if ( sub_30042BB0(a2, a3) )
        return 0x4000;
    }
    else
    {
      if ( sub_30042BB0(a2, a3) )
        return 2048;
      if ( sub_30042BB0(a2, a3) )
        return 4096;
      sub_300446D0((int)a1);
      if ( sub_30042BB0(a2, a3) )
        return 0x2000;
      if ( sub_30042BB0(a2, a3) )
        return 0x4000;
    }
    if ( sub_30042BB0(a2, a3) )
      result = 0x8000;
    else
      result = 0;
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30044BE0) --------------------------------------------------------
float *__usercall sub_30044BE0@<eax>(float *result@<eax>, float a2, float a3)
{
  float *v3; // esi
  int v4; // edi
  int v5; // edx
  int v6; // ecx
  int v7; // ecx
  float v8; // [esp+4h] [ebp-10h]
  float v9; // [esp+8h] [ebp-Ch]

  v3 = result;
  if ( *((_DWORD *)result + 51) != 6 )
    return (float *)Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
  v4 = *((_DWORD *)result + 149);
  if ( v4 )
  {
    *((_DWORD *)result + 18) &= 0xFFFF07FF;
    v5 = sub_30044990(result, a2, a3) | *((_DWORD *)result + 18);
    result = (float *)v5;
    *((_DWORD *)v3 + 18) = v5;
    if ( (v5 & 0x400) != 0 )
    {
      if ( (v5 & 0xF800) == 0 && *(_DWORD *)(v4 + 24) == 1 )
      {
        v8 = *v3;
        result = (float *)sub_30042BB0(a2, a3);
        if ( result )
        {
          v6 = *(_DWORD *)(v4 + 4);
          result = (float *)(*(_DWORD *)v4 + (unsigned __int64)((a2 - v8) / *(float *)(v4 + 16)));
          *(_DWORD *)(v4 + 12) = result;
          if ( (int)result >= v6 )
            *(_DWORD *)(v4 + 12) = v6;
        }
      }
    }
    else if ( (v5 & 0xF800) == 0 )
    {
      v9 = v3[1];
      result = (float *)sub_30042BB0(a2, a3);
      if ( result )
      {
        v7 = *(_DWORD *)(v4 + 4);
        result = (float *)(*(_DWORD *)v4 + (unsigned __int64)((a3 - 2.0 - v9) / *(float *)(v4 + 20)));
        *(_DWORD *)(v4 + 12) = result;
        if ( (int)result > v7 )
          *(_DWORD *)(v4 + 12) = v7;
      }
    }
  }
  return result;
}

//----- (30044D30) --------------------------------------------------------
void __usercall sub_30044D30(int a1@<esi>, float a2, float a3)
{
  bool v3; // zf
  char v4; // al

  if ( a1
    && ((*(_BYTE *)(a1 + 292) & 3) == 0 || sub_30044280(1))
    && ((*(_BYTE *)(a1 + 292) & 0xC) == 0 || sub_30044280(4)) )
  {
    v3 = !sub_30042BB0(a2, a3);
    v4 = *(_BYTE *)(a1 + 72);
    if ( v3 )
    {
      if ( v4 < 0 )
      {
        sub_30044180(*(char **)(a1 + 252), a1);
        *(_DWORD *)(a1 + 72) &= 0xFFFFFF7F;
      }
      if ( (*(_BYTE *)(a1 + 72) & 1) == 0 )
      {
        sub_30044180(*(char **)(a1 + 256), a1);
        *(_DWORD *)(a1 + 72) |= 1u;
      }
      if ( *(_DWORD *)(a1 + 200) == 6 )
        sub_30044BE0((float *)a1, a2, a3);
    }
    else
    {
      if ( v4 >= 0 )
      {
        sub_30044180(*(char **)(a1 + 248), a1);
        *(_DWORD *)(a1 + 72) |= 0x80u;
      }
      if ( (*(_BYTE *)(a1 + 72) & 1) == 0 )
      {
        sub_30044180(*(char **)(a1 + 256), a1);
        *(_DWORD *)(a1 + 72) |= 1u;
      }
    }
  }
}

//----- (30044E60) --------------------------------------------------------
unsigned int __usercall sub_30044E60@<eax>(int a1@<esi>)
{
  unsigned int result; // eax

  if ( a1 )
  {
    if ( *(char *)(a1 + 72) < 0 )
    {
      sub_30044180(*(char **)(a1 + 252), a1);
      *(_DWORD *)(a1 + 72) &= 0xFFFFFF7F;
    }
    sub_30044180(*(char **)(a1 + 260), a1);
    result = *(_DWORD *)(a1 + 72) & 0xFFFFE7FF;
    *(_DWORD *)(a1 + 72) = result;
  }
  return result;
}

//----- (30044F60) --------------------------------------------------------
int __usercall sub_30044F60@<eax>(int a1@<eax>, int a2@<ecx>, int a3, int a4)
{
  int v6; // esi
  int v8; // ebp
  unsigned __int64 v9; // rax
  int v10; // edx
  int v11; // ebx
  int v12; // ecx
  int v13; // edx
  int v14; // ebx
  bool v15; // cc
  int v16; // eax
  int v17; // edx
  int v18; // ecx
  bool v19; // sf
  int v20; // eax
  int v21; // eax
  char *v22; // edx
  int v23; // ecx
  int v24; // esi
  int v25; // ebx
  int v26; // ecx
  int v27; // eax
  int v28; // ecx
  float v29; // [esp+0h] [ebp-1Ch]
  float v30; // [esp+4h] [ebp-18h]
  int v31; // [esp+18h] [ebp-4h]

  if ( *(_DWORD *)(a2 + 204) == 6 )
  {
    v6 = *(_DWORD *)(a2 + 596);
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
    v6 = 0;
  }
  v31 = (*(int (__cdecl **)(_DWORD))(dword_300F0F4C + 140))(*(_DWORD *)(a2 + 588));
  if ( !v6 )
    return 0;
  if ( !a4 )
  {
    v30 = (float)*(int *)(dword_300F0F4C + 248);
    v29 = (float)*(int *)(dword_300F0F4C + 244);
    if ( !sub_30042BB0(v29, v30) || (*(_BYTE *)(a2 + 72) & 2) == 0 )
      return 0;
  }
  v8 = sub_30044660(a2);
  if ( (*(_DWORD *)(a2 + 72) & 0x400) != 0 )
  {
    v9 = (unsigned __int64)(*(float *)(a2 + 8) / *(float *)(v6 + 16));
    if ( a1 == 156 || a1 == 185 )
    {
      if ( !*(_DWORD *)(v6 + 228) )
      {
        v19 = --*(_DWORD *)(v6 + 12) < 0;
        if ( v19 )
          *(_DWORD *)(v6 + 12) = 0;
        v12 = *(_DWORD *)(v6 + 12);
        if ( v12 < *(_DWORD *)v6 )
          *(_DWORD *)v6 = v12;
        if ( v12 >= (int)v9 + *(_DWORD *)v6 )
          *(_DWORD *)v6 = v12 - v9 + 1;
        goto LABEL_64;
      }
      goto LABEL_100;
    }
    if ( a1 == 157 || a1 == 187 )
    {
      v10 = *(_DWORD *)v6;
      if ( !*(_DWORD *)(v6 + 228) )
      {
        v11 = *(_DWORD *)(v6 + 12) + 1;
        *(_DWORD *)(v6 + 12) = v11;
        if ( v11 < v10 )
          *(_DWORD *)v6 = v11;
        if ( v11 >= v31 )
          *(_DWORD *)(v6 + 12) = v31 - 1;
        v12 = *(_DWORD *)(v6 + 12);
        if ( v12 >= (int)v9 + *(_DWORD *)v6 )
          *(_DWORD *)v6 = v12 - v9 + 1;
LABEL_64:
        v16 = *(_DWORD *)(a2 + 588);
        *(_DWORD *)(a2 + 592) = v12;
        (*(void (__cdecl **)(int, int))(dword_300F0F4C + 156))(v16, v12);
        return 1;
      }
      v13 = v10 + 1;
      *(_DWORD *)v6 = v13;
      if ( v13 >= v31 )
      {
        *(_DWORD *)v6 = v31 - 1;
        return 1;
      }
      return 1;
    }
  }
  else
  {
    v9 = (unsigned __int64)(*(float *)(a2 + 12) / *(float *)(v6 + 20));
    if ( a1 == 154 || a1 == 183 || a1 == 206 )
    {
      if ( !*(_DWORD *)(v6 + 228) )
      {
        v19 = --*(_DWORD *)(a2 + 592) < 0;
        if ( v19 )
          *(_DWORD *)(a2 + 592) = 0;
        v28 = *(_DWORD *)(a2 + 592);
        if ( v28 < *(_DWORD *)v6 )
          *(_DWORD *)v6 = v28;
        goto LABEL_90;
      }
      goto LABEL_100;
    }
    if ( a1 == 155 || a1 == 189 || a1 == 205 )
    {
      if ( !*(_DWORD *)(v6 + 228) )
      {
        v25 = *(_DWORD *)(a2 + 592) + 1;
        *(_DWORD *)(a2 + 592) = v25;
        if ( v25 < *(_DWORD *)v6 )
          *(_DWORD *)v6 = v25;
        if ( *(_DWORD *)(a2 + 592) >= v31 )
          *(_DWORD *)(a2 + 592) = v31 - 1;
        goto LABEL_90;
      }
      goto LABEL_93;
    }
  }
  if ( a1 != 200 && a1 != 201 )
  {
    if ( a1 == 165 || a1 == 182 )
    {
      if ( !*(_DWORD *)(v6 + 228) )
      {
        v17 = dword_300F0F4C;
        *(_DWORD *)(a2 + 592) = 0;
        *(_DWORD *)(v6 + 12) = 0;
        *(_DWORD *)v6 = 0;
        (*(void (__cdecl **)(_DWORD, _DWORD))(v17 + 156))(*(_DWORD *)(a2 + 588), *(_DWORD *)(a2 + 592));
        return 1;
      }
      goto LABEL_102;
    }
    if ( a1 != 166 && a1 != 188 )
    {
      if ( a1 != 164 && a1 != 184 )
      {
        if ( a1 != 163 && a1 != 190 )
          return 0;
        if ( !*(_DWORD *)(v6 + 228) )
        {
          v14 = v9 + *(_DWORD *)(v6 + 12);
          v15 = v14 < *(_DWORD *)v6;
          *(_DWORD *)(v6 + 12) = v14;
          if ( v15 )
            *(_DWORD *)v6 = v14;
          if ( v14 >= v31 )
            *(_DWORD *)(v6 + 12) = v31 - 1;
          v12 = *(_DWORD *)(v6 + 12);
          if ( v12 >= (int)v9 + *(_DWORD *)v6 )
            *(_DWORD *)v6 = v12 - v9 + 1;
          goto LABEL_64;
        }
LABEL_74:
        v20 = v9 + *(_DWORD *)v6;
        *(_DWORD *)v6 = v20;
        if ( v20 > v8 )
        {
          *(_DWORD *)v6 = v8;
          return 1;
        }
        return 1;
      }
      if ( !*(_DWORD *)(v6 + 228) )
      {
        v19 = *(_DWORD *)(v6 + 12) - (int)v9 < 0;
        *(_DWORD *)(v6 + 12) -= v9;
        if ( v19 )
          *(_DWORD *)(v6 + 12) = 0;
        v12 = *(_DWORD *)(v6 + 12);
        if ( v12 < *(_DWORD *)v6 )
          *(_DWORD *)v6 = v12;
        if ( v12 >= (int)v9 + *(_DWORD *)v6 )
          *(_DWORD *)v6 = v12 - v9 + 1;
        goto LABEL_64;
      }
      goto LABEL_72;
    }
    if ( !*(_DWORD *)(v6 + 228) )
    {
      *(_DWORD *)(a2 + 592) = v31 - 1;
      *(_DWORD *)(v6 + 12) = v31 - 1;
LABEL_90:
      v26 = *(_DWORD *)(a2 + 592);
      if ( v26 >= (int)v9 + *(_DWORD *)v6 )
        *(_DWORD *)v6 = v26 - v9 + 1;
      goto LABEL_84;
    }
LABEL_94:
    *(_DWORD *)v6 = v8;
    return 1;
  }
  v18 = *(_DWORD *)(a2 + 72);
  if ( (v18 & 0x800) == 0 )
  {
    if ( (v18 & 0x1000) == 0 )
    {
      if ( (v18 & 0x4000) != 0 )
      {
LABEL_72:
        v19 = *(_DWORD *)v6 - (int)v9 < 0;
        *(_DWORD *)v6 -= v9;
        goto LABEL_101;
      }
      if ( (v18 & 0x8000) != 0 )
        goto LABEL_74;
      if ( (v18 & 0x2000) != 0 )
        return 1;
      v21 = dword_300F0F4C;
      if ( *(_DWORD *)(dword_300F0F4C + 236) < dword_300F0F6C )
      {
        v22 = *(char **)(v6 + 224);
        if ( v22 )
        {
          if ( *(_DWORD *)(a2 + 592) == *(_DWORD *)(v6 + 12) )
          {
            sub_30044180(v22, a2);
            v21 = dword_300F0F4C;
          }
        }
      }
      v23 = *(_DWORD *)(a2 + 592);
      dword_300F0F6C = *(_DWORD *)(v21 + 236) + 300;
      if ( v23 == *(_DWORD *)(v6 + 12) )
        return 1;
      v24 = *(_DWORD *)(v6 + 12);
      if ( v24 < (*(int (__cdecl **)(_DWORD))(v21 + 140))(*(_DWORD *)(a2 + 588)) )
        *(_DWORD *)(a2 + 592) = v24;
LABEL_84:
      (*(void (__cdecl **)(_DWORD, _DWORD))(dword_300F0F4C + 156))(*(_DWORD *)(a2 + 588), *(_DWORD *)(a2 + 592));
      return 1;
    }
LABEL_93:
    v27 = *(_DWORD *)v6 + 1;
    *(_DWORD *)v6 = v27;
    if ( v27 <= v8 )
      return 1;
    goto LABEL_94;
  }
LABEL_100:
  v19 = --*(_DWORD *)v6 < 0;
LABEL_101:
  if ( v19 )
LABEL_102:
    *(_DWORD *)v6 = 0;
  return 1;
}
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F6C: using guessed type int dword_300F0F6C;

//----- (300454B0) --------------------------------------------------------
int __usercall sub_300454B0@<eax>(int a1@<edx>, int a2@<esi>)
{
  double v2; // st7
  BOOL v3; // eax
  void (__cdecl **v4)(_DWORD, int); // edi
  int v5; // eax
  float v7; // [esp+0h] [ebp-4h]

  v7 = (float)*(int *)(dword_300F0F4C + 248);
  v2 = (double)*(int *)(dword_300F0F4C + 244);
  if ( !a2
    || v2 < *(float *)a2
    || v2 > *(float *)(a2 + 8) + *(float *)a2
    || v7 < (double)*(float *)(a2 + 4)
    || *(float *)(a2 + 12) + *(float *)(a2 + 4) < v7
    || (*(_BYTE *)(a2 + 72) & 2) == 0
    || !*(_DWORD *)(a2 + 280)
    || a1 != 200 && a1 != 13 && a1 != 201 && a1 != 202 )
  {
    return 0;
  }
  v3 = ((double (__cdecl *)(_DWORD))*(_DWORD *)(dword_300F0F4C + 108))(*(_DWORD *)(a2 + 280)) == 0.0;
  v4 = (void (__cdecl **)(_DWORD, int))(dword_300F0F4C + 112);
  v5 = sub_300403F0("%i", v3);
  (*v4)(*(_DWORD *)(a2 + 280), v5);
  return 1;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30045590) --------------------------------------------------------
int __usercall sub_30045590@<eax>(int a1@<eax>)
{
  int result; // eax

  if ( *(_DWORD *)(a1 + 204) == 12 )
  {
    result = *(_DWORD *)(a1 + 596);
    if ( result )
      result = *(_DWORD *)(result + 384);
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MULTI\n");
    result = 0;
  }
  return result;
}

//----- (300455C0) --------------------------------------------------------
int __cdecl sub_300455C0(_DWORD *a1)
{
  int v1; // esi
  int v3; // ebx
  int v4; // edi
  int v5; // ebp
  float *v6; // esi
  char *v7; // ecx
  float v8; // [esp+10h] [ebp-408h]
  char v9[1024]; // [esp+14h] [ebp-404h] BYREF
  unsigned int v10; // [esp+414h] [ebp-4h]
  unsigned int retaddr; // [esp+418h] [ebp+0h]

  v10 = retaddr ^ dword_300705C0;
  v8 = 0.0;
  if ( a1[51] == 12 )
  {
    v1 = a1[149];
    if ( v1 )
    {
      if ( *(_DWORD *)(v1 + 388) )
        (*(void (__cdecl **)(_DWORD, char *, int))(dword_300F0F4C + 104))(a1[70], v9, 1024);
      else
        v8 = ((double (__cdecl *)(_DWORD))*(_DWORD *)(dword_300F0F4C + 108))(a1[70]);
      v3 = *(_DWORD *)(v1 + 384);
      v4 = 0;
      if ( v3 > 0 )
      {
        v5 = *(_DWORD *)(v1 + 388);
        v6 = (float *)(v1 + 256);
        do
        {
          if ( v5 )
          {
            v7 = (char *)*((_DWORD *)v6 - 32);
            if ( v7 && !sub_30040170(99999, v9, v7) )
              return sub_30052A2E(retaddr ^ v10);
          }
          else if ( *v6 == v8 )
          {
            return sub_30052A2E(retaddr ^ v10);
          }
          ++v4;
          ++v6;
        }
        while ( v4 < v3 );
      }
    }
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MULTI\n");
  }
  return sub_30052A2E(retaddr ^ v10);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300456C0) --------------------------------------------------------
int __cdecl sub_300456C0(_DWORD *a1)
{
  int v1; // ebx
  int v3; // ebp
  int v4; // edi
  float *v5; // esi
  char *v6; // ecx
  float v7; // [esp+10h] [ebp-408h]
  char v8[1024]; // [esp+14h] [ebp-404h] BYREF
  unsigned int v9; // [esp+414h] [ebp-4h]
  unsigned int retaddr; // [esp+418h] [ebp+0h]

  v9 = retaddr ^ dword_300705C0;
  v7 = 0.0;
  if ( a1[51] == 12 )
  {
    v1 = a1[149];
    if ( v1 )
    {
      if ( *(_DWORD *)(v1 + 388) )
        (*(void (__cdecl **)(_DWORD, char *, int))(dword_300F0F4C + 104))(a1[70], v8, 1024);
      else
        v7 = ((double (__cdecl *)(_DWORD))*(_DWORD *)(dword_300F0F4C + 108))(a1[70]);
      v3 = *(_DWORD *)(v1 + 384);
      v4 = 0;
      if ( v3 > 0 )
      {
        v5 = (float *)(v1 + 256);
        do
        {
          if ( *(_DWORD *)(v1 + 388) )
          {
            v6 = (char *)*((_DWORD *)v5 - 32);
            if ( v6 && !sub_30040170(99999, v8, v6) )
              return sub_30052A2E(retaddr ^ v9);
          }
          else if ( *v5 == v7 )
          {
            return sub_30052A2E(retaddr ^ v9);
          }
          ++v4;
          ++v5;
        }
        while ( v4 < v3 );
      }
    }
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MULTI\n");
  }
  return sub_30052A2E(retaddr ^ v9);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300457D0) --------------------------------------------------------
int __usercall sub_300457D0@<eax>(int a1@<ecx>, int a2@<edi>)
{
  int v2; // ebx
  double v3; // st7
  int v4; // esi
  int v5; // eax
  int result; // eax
  double v7; // st7
  int v8; // ecx
  void (__cdecl **v9)(_DWORD, int); // esi
  int v10; // eax
  int v11; // eax
  float v12; // [esp+10h] [ebp-4h]

  if ( *(_DWORD *)(a2 + 204) == 12 )
  {
    v2 = *(_DWORD *)(a2 + 596);
    if ( v2
      && (v12 = (float)*(int *)(dword_300F0F4C + 248), v3 = (double)*(int *)(dword_300F0F4C + 244), v3 >= *(float *)a2)
      && v3 <= *(float *)(a2 + 8) + *(float *)a2
      && v12 >= (double)*(float *)(a2 + 4)
      && *(float *)(a2 + 12) + *(float *)(a2 + 4) >= v12
      && (*(_BYTE *)(a2 + 72) & 2) != 0
      && *(_DWORD *)(a2 + 280)
      && (a1 == 200 || a1 == 13 || a1 == 201 || a1 == 202) )
    {
      v4 = sub_300455C0((_DWORD *)a2) + 1;
      v5 = sub_30045590(a2);
      if ( v4 < 0 || v4 >= v5 )
        v4 = 0;
      if ( *(_DWORD *)(v2 + 388) )
      {
        (*(void (__cdecl **)(_DWORD, _DWORD))(dword_300F0F4C + 112))(
          *(_DWORD *)(a2 + 280),
          *(_DWORD *)(v2 + 4 * v4 + 128));
        result = 1;
      }
      else
      {
        v7 = *(float *)(v2 + 4 * v4 + 256);
        v8 = (unsigned __int64)v7;
        v9 = (void (__cdecl **)(_DWORD, int))(dword_300F0F4C + 112);
        if ( (double)v8 == v7 )
        {
          v10 = sub_300403F0("%i", v8);
          (*v9)(*(_DWORD *)(a2 + 280), v10);
        }
        else
        {
          v11 = sub_300403F0("%f", v7);
          (*v9)(*(_DWORD *)(a2 + 280), v11);
        }
        result = 1;
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MULTI\n");
    result = 0;
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30045960) --------------------------------------------------------
void __usercall sub_30045960(_DWORD *a1@<edi>)
{
  int v2; // eax
  float *v3; // esi
  double v4; // st7
  void (__cdecl **v5)(_DWORD, int); // esi
  int v6; // eax
  float v7; // [esp+Ch] [ebp-4h]

  v2 = a1[51];
  if ( v2 == 4 || v2 == 9 || v2 == 15 || v2 == 11 || v2 == 13 || v2 == 10 || !v2 || v2 == 16 )
  {
    v3 = (float *)a1[149];
    if ( v3 )
    {
      v4 = ((double (__cdecl *)(_DWORD))*(_DWORD *)(dword_300F0F4C + 108))(a1[70]);
      v7 = v4;
      if ( v7 < (double)*v3 )
        v4 = *v3;
      if ( v7 > (double)v3[1] )
        v4 = v3[1];
      if ( v4 != v7 )
      {
        v5 = (void (__cdecl **)(_DWORD, int))(dword_300F0F4C + 112);
        v6 = sub_300403F0("%f", v4);
        (*v5)(a1[70], v6);
      }
    }
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_EDITFIELD, ITEM_TYPE_NUMERICFIELD, ITEM_TYPE_DECIMALFIELD, ITEM_T"
               "YPE_UPREDITFIELD, ITEM_TYPE_YESNO, ITEM_TYPE_BIND, ITEM_TYPE_SLIDER, or ITEM_TYPE_TEXT\n");
  }
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30045A20) --------------------------------------------------------
BOOL __cdecl sub_30045A20(int a1)
{
  _DWORD *v1; // ecx
  _DWORD *v2; // esi
  int v3; // eax
  int v4; // edx
  signed int v5; // kr00_4
  _DWORD *v6; // edi
  signed int v7; // eax
  signed int v8; // ebx
  int v9; // ecx
  int v10; // ecx
  int v11; // ecx
  int v12; // ebx
  int v13; // eax
  BOOL result; // eax
  int v15; // edx
  int v16; // edx
  char v17; // al
  int v18; // ecx
  int v19; // edx
  int v20; // ecx
  signed int v21; // eax
  int v22; // eax
  int v23; // eax
  int v24; // ecx
  int v25; // edi
  int v26; // eax
  int v27; // ecx
  int v28; // eax
  int v29; // ecx
  int v30; // eax
  int v31; // ecx
  char *v32; // edx
  int v33; // eax
  int v34; // eax
  int v35; // ecx
  void (__cdecl **v36)(bool); // esi
  int v37; // eax
  int v38; // eax
  int v39; // eax
  int v40; // eax
  signed int v41; // ecx
  signed int v42; // eax
  signed int v43; // eax
  signed int v44; // eax
  _DWORD *v45; // [esp+Ch] [ebp-40Ch]
  char Src[1028]; // [esp+10h] [ebp-408h] BYREF
  unsigned int v47; // [esp+414h] [ebp-4h]
  unsigned int retaddr; // [esp+41Ch] [ebp+4h]

  v2 = v1;
  v47 = retaddr ^ dword_300705C0;
  v3 = v1[51];
  if ( v3 != 4 && v3 != 9 && v3 != 15 && v3 != 11 && v3 != 13 && v3 != 10 && v3 && v3 != 16 )
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_EDITFIELD, ITEM_TYPE_NUMERICFIELD, ITEM_TYPE_DECIMALFIELD, ITEM_T"
               "YPE_UPREDITFIELD, ITEM_TYPE_YESNO, ITEM_TYPE_BIND, ITEM_TYPE_SLIDER, or ITEM_TYPE_TEXT\n");
    return 0;
  }
  v45 = (_DWORD *)v1[149];
  if ( !v45 )
    return 0;
  v4 = v1[70];
  if ( !v4 )
    return 0;
  memset(Src, 0, 0x400u);
  (*(void (__cdecl **)(int, char *, int))(dword_300F0F4C + 104))(v4, Src, 1024);
  v5 = strlen(Src);
  v6 = v45;
  v7 = v45[4];
  v8 = v5;
  if ( v7 && v5 > v7 )
    v8 = v45[4];
  v9 = a1;
  if ( (a1 & 0x400) != 0 )
  {
    v10 = a1 & 0xFFFFFBFF;
    a1 = v10;
    if ( v10 == 8 )
    {
      v11 = v2[148];
      if ( v11 > 0 )
      {
        memcpy(&Src[v11 - 1], &Src[v11], v8 - v11 + 1);
        v12 = v2[148] - 1;
        v2[148] = v12;
        v13 = v6[7];
        if ( v12 < v13 )
          v6[7] = v13 - 1;
      }
      (*(void (__cdecl **)(_DWORD, char *))(dword_300F0F4C + 112))(v2[70], Src);
LABEL_124:
      if ( v2[50] == 16 )
        sub_30045960(v2);
      return 1;
    }
    if ( v10 < 32 || !v2[70] )
      return 1;
    v15 = v2[50];
    if ( v15 == 9 && !sub_30040090(v10) )
      return 0;
    if ( v15 == 16 )
    {
      (*(void (__cdecl **)(const char *))(dword_300F0F4C + 108))("cl_language");
      if ( !sub_30040090(a1) )
      {
        v17 = sub_300410A0(v16);
        if ( v18 != v17 )
          return 0;
      }
      v19 = sub_300410A0(v16);
      if ( v20 == v19 )
        a1 = 46;
      v10 = a1;
    }
    if ( v2[50] == 15 )
      a1 = toupper(v10);
    if ( !(*(int (__thiscall **)(int))(dword_300F0F4C + 128))(v10) )
    {
      if ( v8 != 255 )
      {
        v21 = v45[4];
        if ( !v21 || v8 < v21 )
        {
          memcpy(&Src[v2[148] + 1], &Src[v2[148]], v8 - v2[148] + 1);
LABEL_39:
          Src[v2[148]] = a1;
          (*(void (__cdecl **)(_DWORD, char *))(dword_300F0F4C + 112))(v2[70], Src);
          if ( v2[50] == 16 )
          {
            sub_30045960(v2);
            v6 = v45;
          }
          v22 = v2[148];
          if ( v22 < v8 + 1 )
          {
            v23 = v22 + 1;
            v2[148] = v23;
            v24 = v6[6];
            if ( v24 )
            {
              if ( v23 > v24 )
                ++v6[7];
            }
          }
          v25 = v6[4];
          if ( v25 )
          {
            if ( v2[148] >= v25 )
            {
              if ( v45[5] )
              {
                v26 = sub_300467E0(v2[60]);
                if ( v26 )
                {
                  v27 = *(_DWORD *)(v26 + 200);
                  if ( v27 == 4 || v27 == 9 || v27 == 15 || v2[50] == 16 )
                    dword_300F0F5C = v26;
                }
              }
            }
          }
          v9 = a1;
LABEL_55:
          if ( v9 == 9 || v9 == 155 || v9 == 189 )
          {
            v28 = sub_300467E0(v2[60]);
            if ( v28 )
            {
              v29 = *(_DWORD *)(v28 + 200);
              if ( v29 == 4 || v29 == 9 || v29 == 15 || v29 == 16 )
                dword_300F0F5C = v28;
            }
            v9 = a1;
          }
          if ( v9 == 154 || v9 == 183 )
          {
            v30 = sub_30046700(v2[60]);
            if ( v30 )
            {
              v31 = *(_DWORD *)(v30 + 200);
              if ( v31 == 4 || v31 == 9 || v31 == 15 || v31 == 16 )
                dword_300F0F5C = v30;
            }
            v9 = a1;
          }
          if ( v9 == 13 || v9 == 191 )
          {
            v32 = (char *)v2[67];
            if ( v32 )
            {
              sub_30044180(v32, (int)v2);
              v9 = a1;
            }
          }
          return v9 != 13 && v9 != 191 && v9 != 27;
        }
      }
      return 1;
    }
    v33 = v45[4];
    if ( !v33 || v2[148] < v33 )
      goto LABEL_39;
    if ( v45[5] )
    {
      v34 = sub_300467E0(v2[60]);
      if ( v34 )
      {
        v35 = *(_DWORD *)(v34 + 200);
        if ( v35 == 4 || v35 == 9 || v35 == 15 || v35 == 16 )
          dword_300F0F5C = v34;
      }
    }
    result = 1;
  }
  else
  {
    switch ( a1 )
    {
      case 162:
      case 193:
        v44 = v2[148];
        if ( v44 < v8 )
        {
          memcpy(&Src[v44], &Src[v44 + 1], v8 - v44);
          (*(void (__cdecl **)(_DWORD, char *))(dword_300F0F4C + 112))(v2[70], Src);
        }
        goto LABEL_124;
      case 157:
      case 187:
        v41 = v45[6];
        if ( v41 && (v42 = v2[148], v42 >= v41) && v42 < v8 )
        {
          v2[148] = v42 + 1;
          ++v6[7];
          result = 1;
        }
        else
        {
          v43 = v2[148];
          if ( v43 < v8 )
            v2[148] = v43 + 1;
          result = 1;
        }
        break;
      case 156:
      case 185:
        v39 = v2[148];
        if ( v39 > 0 )
          v2[148] = v39 - 1;
        v40 = v6[7];
        if ( v2[148] < v40 )
          v6[7] = v40 - 1;
        result = 1;
        break;
      case 165:
      case 182:
        v2[148] = 0;
        v6[7] = 0;
        return 1;
      case 166:
      case 188:
        v2[148] = v8;
        v38 = v6[6];
        if ( v8 > v38 )
          v6[7] = v8 - v38;
        result = 1;
        break;
      case 161:
      case 192:
        v36 = (void (__cdecl **)(bool))(dword_300F0F4C + 124);
        v37 = (*(int (**)(void))(dword_300F0F4C + 128))();
        (*v36)(v37 == 0);
        return 1;
      default:
        goto LABEL_55;
    }
  }
  return result;
}
// 30045A36: variable 'v1' is possibly undefined
// 30045B9D: variable 'v15' is possibly undefined
// 30045BC7: variable 'v16' is possibly undefined
// 30045BD1: variable 'v18' is possibly undefined
// 30045BDF: variable 'v20' is possibly undefined
// 30045BF5: variable 'v10' is possibly undefined
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F5C: using guessed type int dword_300F0F5C;

//----- (30046050) --------------------------------------------------------
int __cdecl sub_30046050(_DWORD *a1)
{
  int *v1; // eax
  int result; // eax

  v1 = (int *)(dword_300F0F4C + 236);
  if ( *(_DWORD *)(dword_300F0F4C + 236) > *a1 )
  {
    sub_30044F60(a1[3], a1[6], 1, 0);
    v1 = (int *)(dword_300F0F4C + 236);
    *a1 = *(_DWORD *)(dword_300F0F4C + 236) + a1[2];
  }
  result = *v1;
  if ( result > a1[1] )
  {
    a1[1] = result + 150;
    result = a1[2];
    if ( result > 20 )
    {
      result -= 40;
      a1[2] = result;
    }
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300460C0) --------------------------------------------------------
void __cdecl sub_300460C0(char *Format)
{
  int v1; // edi
  _DWORD *v2; // ebp
  int v3; // eax
  _DWORD *v4; // ebx
  int v5; // edi
  unsigned __int64 v6; // rax
  int v7; // eax
  int v8; // edi
  unsigned __int64 v9; // rax
  int *v10; // eax
  int v11; // eax
  int v12; // eax
  float v13; // [esp+8h] [ebp-10h]
  float v14; // [esp+Ch] [ebp-Ch]
  float v15; // [esp+10h] [ebp-8h]
  float v16; // [esp+14h] [ebp-4h]

  v1 = *((_DWORD *)Format + 6);
  if ( *(_DWORD *)(v1 + 204) == 6 )
  {
    v2 = *(_DWORD **)(v1 + 596);
    if ( !v2 )
      return;
    if ( (*(_DWORD *)(v1 + 72) & 0x400) != 0 )
    {
      if ( (double)*(int *)(dword_300F0F4C + 244) == *((float *)Format + 4) )
        return;
      v13 = *(float *)v1 + 17.0;
      v15 = *(float *)(v1 + 8) - 32.0 - 2.0;
      v3 = sub_30044660(v1);
      v4 = (_DWORD *)dword_300F0F4C;
      v5 = v3;
      v6 = (unsigned __int64)(((double)*(int *)(dword_300F0F4C + 244) - v13 - 8.0) * (double)v3 / (v15 - 16.0));
      if ( (v6 & 0x80000000) == 0i64 )
      {
        if ( (int)v6 > v5 )
          LODWORD(v6) = v5;
        *v2 = v6;
        *((float *)Format + 4) = (float)(int)v4[61];
      }
      else
      {
        *v2 = 0;
        *((float *)Format + 4) = (float)(int)v4[61];
      }
    }
    else
    {
      v4 = (_DWORD *)dword_300F0F4C;
      if ( (double)*(int *)(dword_300F0F4C + 248) != *((float *)Format + 5) )
      {
        v14 = *(float *)(v1 + 4) + 17.0;
        v16 = *(float *)(v1 + 12) - 32.0 - 2.0;
        v7 = sub_30044660(v1);
        v4 = (_DWORD *)dword_300F0F4C;
        v8 = v7;
        v9 = (unsigned __int64)(((double)*(int *)(dword_300F0F4C + 248) - v14 - 8.0) * (double)v7 / (v16 - 16.0));
        if ( (v9 & 0x80000000) == 0i64 )
        {
          if ( (int)v9 > v8 )
            LODWORD(v9) = v8;
        }
        else
        {
          LODWORD(v9) = 0;
        }
        *v2 = v9;
        *((float *)Format + 5) = (float)(int)v4[62];
      }
    }
    v10 = v4 + 59;
    if ( v4[59] > *(_DWORD *)Format )
    {
      sub_30044F60(*((_DWORD *)Format + 3), *((_DWORD *)Format + 6), 1, 0);
      v10 = (int *)(dword_300F0F4C + 236);
      *(_DWORD *)Format = *(_DWORD *)(dword_300F0F4C + 236) + *((_DWORD *)Format + 2);
    }
    v11 = *v10;
    if ( v11 > *((_DWORD *)Format + 1) )
    {
      *((_DWORD *)Format + 1) = v11 + 150;
      v12 = *((_DWORD *)Format + 2);
      if ( v12 > 20 )
        *((_DWORD *)Format + 2) = v12 - 40;
    }
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
  }
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30046290) --------------------------------------------------------
int __cdecl sub_30046290(char *Format)
{
  int v2; // edx
  int result; // eax
  float *v4; // ecx
  double v5; // st7
  double v6; // st6
  int (__cdecl **v7)(_DWORD, int); // esi
  int v8; // eax
  float Formata; // [esp+14h] [ebp+4h]

  v2 = *((_DWORD *)Format + 6);
  result = *(_DWORD *)(v2 + 204);
  if ( result != 4
    && result != 9
    && result != 15
    && result != 11
    && result != 13
    && result != 10
    && result
    && result != 16 )
  {
    return Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_EDITFIELD, ITEM_TYPE_NUMERICFIELD, ITEM_TYPE_DECIMALFIELD,"
                      " ITEM_TYPE_UPREDITFIELD, ITEM_TYPE_YESNO, ITEM_TYPE_BIND, ITEM_TYPE_SLIDER, or ITEM_TYPE_TEXT\n");
  }
  v4 = *(float **)(v2 + 596);
  if ( v4 )
  {
    if ( *(_DWORD *)(v2 + 236) )
      v5 = *(float *)(v2 + 192) + *(float *)(v2 + 184) + 8.0;
    else
      v5 = *(float *)v2;
    v6 = (double)*(int *)(dword_300F0F4C + 244);
    if ( v6 >= v5 )
    {
      Formata = v5 + 96.0;
      if ( v6 > Formata )
        v6 = Formata;
    }
    else
    {
      v6 = v5;
    }
    v7 = (int (__cdecl **)(_DWORD, int))(dword_300F0F4C + 112);
    v8 = sub_300403F0("%f", (v6 - v5) * 0.010416667 * (v4[1] - *v4) + *v4);
    result = (*v7)(*(_DWORD *)(*((_DWORD *)Format + 6) + 280), v8);
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30046380) --------------------------------------------------------
unsigned int __usercall sub_30046380@<eax>(float *a1@<eax>, int a2@<edi>)
{
  unsigned int result; // eax
  int v4; // ecx
  double v5; // st7
  float v6; // [esp+0h] [ebp-Ch]
  float v7; // [esp+0h] [ebp-Ch]
  float v8; // [esp+4h] [ebp-8h]
  float v9; // [esp+4h] [ebp-8h]

  result = *((_DWORD *)a1 + 50);
  if ( result == 6 )
  {
    v9 = (float)*(int *)(dword_300F0F4C + 248);
    v7 = (float)*(int *)(dword_300F0F4C + 244);
    result = sub_30044990(a1, v7, v9);
    if ( (result & 0x1800) != 0 )
    {
      dword_300EFEA0 = *(_DWORD *)(dword_300F0F4C + 236) + 500;
      v4 = *(_DWORD *)(dword_300F0F4C + 236) + 150;
      result = (result >> 11) & 1;
      dword_300EFEB8 = (int)a1;
      dword_300F0F48 = (int)a1;
      dword_300EFEA4 = v4;
      dword_300EFEA8 = 500;
      dword_300EFEAC = a2;
      dword_300EFEBC = result;
      dword_300F0F40 = (int (__cdecl *)(_DWORD))sub_30046050;
      dword_300F0F44 = (int)&dword_300EFEA0;
      return result;
    }
    if ( (result & 0x2000) != 0 )
    {
      dword_300F0F40 = (int (__cdecl *)(_DWORD))sub_300460C0;
      goto LABEL_9;
    }
  }
  else if ( result == 10 )
  {
    v8 = (float)*(int *)(dword_300F0F4C + 248);
    v6 = (float)*(int *)(dword_300F0F4C + 244);
    result = sub_30044910(a1, v6, v8);
    if ( (result & 0x2000) != 0 )
    {
      dword_300F0F40 = (int (__cdecl *)(_DWORD))sub_30046290;
LABEL_9:
      result = dword_300F0F4C;
      dword_300EFEB8 = (int)a1;
      dword_300EFEAC = a2;
      v5 = (double)*(int *)(dword_300F0F4C + 244);
      dword_300F0F44 = (int)&dword_300EFEA0;
      dword_300F0F48 = (int)a1;
      flt_300EFEB0 = v5;
      flt_300EFEB4 = (float)*(int *)(dword_300F0F4C + 248);
      return result;
    }
  }
  return result;
}
// 300EFEA0: using guessed type int dword_300EFEA0;
// 300EFEA4: using guessed type int dword_300EFEA4;
// 300EFEA8: using guessed type int dword_300EFEA8;
// 300EFEAC: using guessed type int dword_300EFEAC;
// 300EFEB0: using guessed type float flt_300EFEB0;
// 300EFEB4: using guessed type float flt_300EFEB4;
// 300EFEB8: using guessed type int dword_300EFEB8;
// 300EFEBC: using guessed type int dword_300EFEBC;
// 300F0F40: using guessed type int (__cdecl *dword_300F0F40)(_DWORD);
// 300F0F44: using guessed type int dword_300F0F44;
// 300F0F48: using guessed type int dword_300F0F48;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300464C0) --------------------------------------------------------
int __usercall sub_300464C0@<eax>(int a1@<esi>)
{
  int v1; // edx
  int v2; // edi
  float *v3; // edx
  int v4; // eax
  float v6; // [esp+0h] [ebp-14h]
  float v7; // [esp+4h] [ebp-10h]
  float v8; // [esp+4h] [ebp-10h]
  float v9; // [esp+Ch] [ebp-8h]
  float v10; // [esp+10h] [ebp-4h]

  if ( (*(_BYTE *)(a1 + 72) & 2) == 0 )
    return 0;
  if ( !*(_DWORD *)(a1 + 280) )
    return 0;
  v7 = (float)*(int *)(dword_300F0F4C + 248);
  v6 = (float)*(int *)(dword_300F0F4C + 244);
  if ( !sub_30042BB0(v6, v7) || v1 != 200 && v1 != 13 && v1 != 201 && v1 != 202 )
    return 0;
  if ( !sub_300445C0((_DWORD *)a1) )
    return 0;
  v10 = *(_DWORD *)(a1 + 236) ? (float)(*(float *)(a1 + 192) + *(float *)(a1 + 184) + 8.0) : *(float *)a1;
  v2 = dword_300F0F4C;
  v9 = (float)*(int *)(dword_300F0F4C + 244);
  v8 = (float)*(int *)(dword_300F0F4C + 248);
  if ( !sub_30042BB0(v9, v8) )
    return 0;
  v4 = sub_300403F0("%f", (v9 - v10) * 0.010416667 * (v3[1] - *v3) + *v3);
  (*(void (__cdecl **)(_DWORD, int))(v2 + 112))(*(_DWORD *)(a1 + 280), v4);
  return 1;
}
// 30046510: variable 'v1' is possibly undefined
// 300465A5: variable 'v3' is possibly undefined
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300465E0) --------------------------------------------------------
int __usercall sub_300465E0@<eax>(int a1@<eax>, int a2@<ecx>, int a3@<ebx>)
{
  int (__cdecl *v3)(_DWORD, _DWORD, int, int); // ecx
  int result; // eax

  if ( dword_300F0F48 )
  {
    dword_300F0F48 = 0;
    dword_300F0F40 = 0;
    dword_300F0F44 = 0;
  }
  else
  {
    if ( !a3 )
      return 0;
    if ( a1 == 200 || a1 == 201 || a1 == 202 )
      sub_30046380((float *)a2, a1);
  }
  if ( !a3 )
    return 0;
  switch ( *(_DWORD *)(a2 + 200) )
  {
    case 6:
      result = sub_30044F60(a1, a2, a3, 0);
      break;
    case 8:
      if ( a2 && (v3 = *(int (__cdecl **)(_DWORD, _DWORD, int, int))(dword_300F0F4C + 136)) != 0 )
        result = v3(*(_DWORD *)(a2 + 60), *(_DWORD *)(a2 + 64), a2 + 588, a1);
      else
        result = 0;
      break;
    case 0xA:
      result = sub_300464C0(a2);
      break;
    case 0xB:
      result = sub_300454B0(a1, a2);
      break;
    case 0xC:
      result = sub_300457D0(a1, a2);
      break;
    case 0xD:
      result = sub_30048D70(a1, a2, a3);
      break;
    default:
      return 0;
  }
  return result;
}
// 300F0F40: using guessed type int (__cdecl *dword_300F0F40)(_DWORD);
// 300F0F44: using guessed type int dword_300F0F44;
// 300F0F48: using guessed type int dword_300F0F48;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300466E0) --------------------------------------------------------
int __usercall sub_300466E0@<eax>(int result@<eax>)
{
  if ( result )
    result = sub_30044180(*(char **)(result + 264), result);
  return result;
}

//----- (30046700) --------------------------------------------------------
int __usercall sub_30046700@<eax>(int a1@<edi>)
{
  int v1; // ebx
  int v2; // ebp
  int v4; // eax
  float *v6; // eax
  float v7; // [esp+0h] [ebp-14h]
  int v8; // [esp+0h] [ebp-14h]
  float v9; // [esp+4h] [ebp-10h]
  float v10; // [esp+4h] [ebp-10h]

  v1 = 0;
  v2 = *(_DWORD *)(a1 + 200);
  if ( v2 < 0 )
  {
    *(_DWORD *)(a1 + 200) = *(_DWORD *)(a1 + 192) - 1;
    v1 = 1;
  }
  while ( *(int *)(a1 + 200) > -1 )
  {
    if ( --*(_DWORD *)(a1 + 200) < 0 && !v1 )
    {
      v1 = 1;
      *(_DWORD *)(a1 + 200) = *(_DWORD *)(a1 + 192) - 1;
    }
    v4 = *(_DWORD *)(a1 + 200);
    if ( v4 < 0 )
      break;
    v9 = (float)*(int *)(dword_300F0F4C + 248);
    v7 = (float)*(int *)(dword_300F0F4C + 244);
    if ( sub_300443D0(*(_DWORD *)(a1 + 4 * v4 + 1292), v7, v9) )
    {
      v6 = *(float **)(a1 + 4 * *(_DWORD *)(a1 + 200) + 1292);
      v10 = v6[1] + 1.0;
      *(float *)&v8 = *v6 + 1.0;
      sub_3004A690(a1, v8, v10);
      return *(_DWORD *)(a1 + 4 * *(_DWORD *)(a1 + 200) + 1292);
    }
  }
  *(_DWORD *)(a1 + 200) = v2;
  return 0;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300467E0) --------------------------------------------------------
int __usercall sub_300467E0@<eax>(int a1@<edi>)
{
  int v1; // ebp
  int v2; // ebx
  int v3; // ecx
  int v4; // edx
  int result; // eax
  float *v6; // eax
  float v7; // [esp+0h] [ebp-14h]
  int v8; // [esp+0h] [ebp-14h]
  float v9; // [esp+4h] [ebp-10h]
  float v10; // [esp+4h] [ebp-10h]

  v1 = *(_DWORD *)(a1 + 200);
  v2 = 0;
  if ( v1 == -1 )
  {
    *(_DWORD *)(a1 + 200) = 0;
    v2 = 1;
  }
  if ( *(_DWORD *)(a1 + 200) >= *(_DWORD *)(a1 + 192) )
  {
LABEL_9:
    *(_DWORD *)(a1 + 200) = v1;
    result = 0;
  }
  else
  {
    while ( 1 )
    {
      v3 = *(_DWORD *)(a1 + 192);
      v4 = *(_DWORD *)(a1 + 200) + 1;
      *(_DWORD *)(a1 + 200) = v4;
      if ( v4 >= v3 )
      {
        if ( v2 )
          return *(_DWORD *)(a1 + 4 * v1 + 1292);
        v2 = 1;
        *(_DWORD *)(a1 + 200) = 0;
      }
      v9 = (float)*(int *)(dword_300F0F4C + 248);
      v7 = (float)*(int *)(dword_300F0F4C + 244);
      if ( sub_300443D0(*(_DWORD *)(a1 + 4 * *(_DWORD *)(a1 + 200) + 1292), v7, v9) )
        break;
      if ( *(_DWORD *)(a1 + 200) >= *(_DWORD *)(a1 + 192) )
        goto LABEL_9;
    }
    v6 = *(float **)(a1 + 4 * *(_DWORD *)(a1 + 200) + 1292);
    v10 = v6[1] + 1.0;
    *(float *)&v8 = *v6 + 1.0;
    sub_3004A690(a1, v8, v10);
    result = *(_DWORD *)(a1 + 4 * *(_DWORD *)(a1 + 200) + 1292);
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30046910) --------------------------------------------------------
int __usercall sub_30046910@<eax>(_DWORD *a1@<ebx>)
{
  int result; // eax
  int v2; // ebp
  _DWORD *v3; // edi
  int v4; // esi

  if ( a1 )
  {
    if ( a1[13] == 5 && (int)a1[12] >= 0 )
    {
      (*(void (__cdecl **)(_DWORD))(dword_300F0F4C + 212))(a1[12]);
      a1[12] = -1;
    }
    result = a1[48];
    v2 = 0;
    if ( result > 0 )
    {
      v3 = a1 + 323;
      do
      {
        v4 = *v3;
        if ( *(_DWORD *)(*v3 + 52) == 5 && *(int *)(v4 + 48) >= 0 )
        {
          (*(void (__cdecl **)(_DWORD))(dword_300F0F4C + 212))(*(_DWORD *)(v4 + 48));
          *(_DWORD *)(v4 + 48) = -1;
        }
        if ( *(_DWORD *)(*v3 + 200) == 8 )
          (*(void (__cdecl **)(int))(dword_300F0F4C + 212))(-*(_DWORD *)(*v3 + 60));
        result = a1[48];
        ++v2;
        ++v3;
      }
      while ( v2 < result );
    }
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300469E0) --------------------------------------------------------
int __usercall sub_300469E0@<eax>(_DWORD *a1@<eax>)
{
  int i; // eax
  int v3; // ecx
  char *v4; // edx
  _BYTE *v5; // ebx
  int j; // esi
  char v8[240]; // [esp+8h] [ebp-25Ch] BYREF
  _DWORD *v9; // [esp+F8h] [ebp-16Ch]

  for ( i = dword_300F0F64 - 1; i >= 0; *(_DWORD *)(v3 + 72) &= 0xFFFFFFFD )
    v3 = *(&dword_305643C0 + i--);
  sub_300432A0((int)a1);
  v4 = (char *)a1[55];
  a1[18] |= 6u;
  if ( v4 )
  {
    v9 = a1;
    sub_30044180(v4, (int)v8);
  }
  v5 = (_BYTE *)a1[313];
  if ( v5 && *v5 )
    (*(void (__cdecl **)(_BYTE *))(dword_300F0F4C + 132))(v5);
  for ( j = dword_300F0F64 - 1; j >= 0; --j )
    sub_30046910((_DWORD *)*(&dword_305643C0 + j));
  return sub_3004CDD0(*(_DWORD *)(dword_300F0F4C + 244), *(_DWORD *)(dword_300F0F4C + 248));
}
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F64: using guessed type int dword_300F0F64;

//----- (30046B00) --------------------------------------------------------
_DWORD *__usercall sub_30046B00@<eax>(_DWORD *result@<eax>, int a2, int a3)
{
  _DWORD *v3; // esi
  _DWORD *v4; // ebx
  int v5; // ebp
  int v6; // esi
  int i; // ecx
  int v8; // eax
  int v9; // ecx
  int v10; // edx
  int j; // esi
  float v12; // [esp+0h] [ebp-18h]
  float v13; // [esp+0h] [ebp-18h]
  float v14; // [esp+4h] [ebp-14h]
  float v15; // [esp+4h] [ebp-14h]

  v3 = result;
  if ( result )
  {
    if ( a3 && (result[18] & 0x20000) != 0 )
    {
      sub_300433A0((int)result);
      v3[18] &= 0xFFFFFFF9;
    }
    v4 = (_DWORD *)dword_300F0F4C;
    v5 = dword_300F0F64 - 1;
    v6 = dword_300F0F64 - 1;
    if ( dword_300F0F64 - 1 >= 0 )
    {
      while ( 1 )
      {
        v14 = (float)(int)v4[62];
        v12 = (float)(int)v4[61];
        if ( sub_3004D090(*(&dword_305643C0 + v6), v12, v14) )
          break;
        if ( --v6 < 0 )
          goto LABEL_12;
      }
      for ( i = v5; i >= 0; *(_DWORD *)(v8 + 72) &= 0xFFFFFFFD )
        v8 = *(&dword_305643C0 + i--);
      *(_DWORD *)(*(&dword_305643C0 + v6) + 72) |= 6u;
      sub_3004CDD0(v4[61], v4[62]);
      v15 = (float)*(int *)(dword_300F0F4C + 248);
      v13 = (float)*(int *)(dword_300F0F4C + 244);
      sub_3004A690(*(&dword_305643C0 + v6), SLODWORD(v13), v15);
      sub_30046CF0((_DWORD *)*(&dword_305643C0 + v6), a2, a3);
      v4 = (_DWORD *)dword_300F0F4C;
    }
LABEL_12:
    v9 = dword_300F0F60;
    v10 = 0;
    if ( dword_300F0F60 <= 0 )
      goto LABEL_18;
    result = &unk_30547808;
    do
    {
      if ( (*result & 0x100004) != 0 )
        ++v10;
      result += 451;
      --v9;
    }
    while ( v9 );
    if ( !v10 )
    {
LABEL_18:
      result = (_DWORD *)v4[49];
      if ( result )
        result = (_DWORD *)((int (__cdecl *)(_DWORD))result)(0);
    }
    for ( j = dword_300F0F64 - 1; j >= 0; --j )
      result = (_DWORD *)sub_30046910((_DWORD *)*(&dword_305643C0 + j));
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F60: using guessed type int dword_300F0F60;
// 300F0F64: using guessed type int dword_300F0F64;

//----- (30046C70) --------------------------------------------------------
int *__usercall sub_30046C70@<eax>(int a1@<eax>)
{
  int *v1; // eax
  int *result; // eax

  dword_300EFE90 = 0;
  dword_300EFE94 = 0;
  dword_300EFE98 = 0;
  dword_300EFE9C = 0;
  if ( !a1 )
    return &dword_300EFE90;
  v1 = (int *)(a1 + 184);
  dword_300EFE90 = *v1;
  dword_300EFE94 = v1[1];
  dword_300EFE98 = v1[2];
  dword_300EFE9C = v1[3];
  result = &dword_300EFE90;
  if ( *(float *)&dword_300EFE98 != 0.0 )
    *(float *)&dword_300EFE94 = *(float *)&dword_300EFE94 - *(float *)&dword_300EFE9C;
  return result;
}
// 300EFE90: using guessed type int dword_300EFE90;
// 300EFE94: using guessed type int dword_300EFE94;
// 300EFE98: using guessed type int dword_300EFE98;
// 300EFE9C: using guessed type int dword_300EFE9C;

//----- (30046CF0) --------------------------------------------------------
void __cdecl sub_30046CF0(_DWORD *a1, int a2, int a3)
{
  int v3; // esi
  int v4; // ebx
  int *v5; // ecx
  int v6; // edx
  char *v7; // edx
  int v8; // eax
  BOOL v9; // eax
  _DWORD *v10; // ecx
  int v11; // eax
  int v12; // edx
  int v13; // eax
  float v14; // [esp+0h] [ebp-274h]
  float v15; // [esp+0h] [ebp-274h]
  float v16; // [esp+0h] [ebp-274h]
  float v17; // [esp+0h] [ebp-274h]
  float v18; // [esp+4h] [ebp-270h]
  float v19; // [esp+4h] [ebp-270h]
  float v20; // [esp+4h] [ebp-270h]
  float v21; // [esp+4h] [ebp-270h]
  float v22; // [esp+4h] [ebp-270h]
  float v23; // [esp+8h] [ebp-26Ch]
  char v24[240]; // [esp+18h] [ebp-25Ch] BYREF
  _DWORD *v25; // [esp+108h] [ebp-16Ch]

  v23 = (float)*(int *)(dword_300F0F4C + 248);
  v3 = 0;
  v18 = (float)*(int *)(dword_300F0F4C + 244);
  sub_3004A690((int)a1, SLODWORD(v18), v23);
  if ( dword_300F0F50 && a3 )
  {
    sub_30048D70(a2, dword_300F0F58, a3);
    return;
  }
  if ( dword_300F0F54 && a3 )
  {
    if ( !sub_30045A20(a2) )
    {
      dword_300F0F54 = 0;
      dword_300F0F5C = 0;
      return;
    }
    if ( a2 != 200 && a2 != 201 && a2 != 202 )
      return;
    dword_300F0F54 = 0;
    dword_300F0F5C = 0;
    sub_3004CDD0(*(_DWORD *)(dword_300F0F4C + 244), *(_DWORD *)(dword_300F0F4C + 248));
  }
  if ( !a1 )
    return;
  v4 = dword_300F0F4C;
  if ( a3 )
  {
    if ( (a1[18] & 0x200000) == 0 )
    {
      v19 = (float)*(int *)(dword_300F0F4C + 248);
      v14 = (float)*(int *)(dword_300F0F4C + 244);
      if ( !sub_30042BB0(v14, v19) && !dword_300F0F78 && (a2 == 200 || a2 == 201 || a2 == 202) )
      {
        dword_300F0F78 = 1;
        sub_30046B00(a2, a3);
        dword_300F0F78 = 0;
        return;
      }
    }
  }
  if ( (int)a1[48] > 0 )
  {
    v5 = a1 + 323;
    v6 = a1[48];
    do
    {
      if ( (*(_BYTE *)(*v5 + 72) & 2) != 0 )
        v3 = *v5;
      ++v5;
      --v6;
    }
    while ( v6 );
    if ( v3 )
    {
      if ( sub_300465E0(a2, v3, a3) )
      {
        sub_30044180(*(char **)(v3 + 264), v3);
        return;
      }
      v4 = dword_300F0F4C;
    }
  }
  if ( a3 )
  {
    if ( a2 > 0 && a2 <= 255 && (v7 = (char *)a1[a2 + 58]) != 0 )
    {
LABEL_43:
      v25 = a1;
      sub_30044180(v7, (int)v24);
    }
    else
    {
      if ( (unsigned int)(a2 - 9) > 0xC5 )
        return;
      switch ( byte_30047134[a2 - 9] )
      {
        case 0:
          sub_300467E0((int)a1);
          return;
        case 1:
          if ( v3 )
          {
            v13 = *(_DWORD *)(v3 + 200);
            if ( v13 != 4 && v13 != 9 && v13 != 15 && v13 != 16 )
              goto LABEL_49;
            *(_DWORD *)(v3 + 592) = 0;
            dword_300F0F54 = 1;
            dword_300F0F5C = v3;
            (*(void (__cdecl **)(int))(v4 + 124))(1);
          }
          return;
        case 2:
          if ( !dword_300F0F50 )
          {
            v7 = (char *)a1[57];
            if ( v7 )
              goto LABEL_43;
          }
          return;
        case 3:
          sub_30046700((int)a1);
          return;
        case 4:
          if ( ((double (__cdecl *)(const char *))*(_DWORD *)(v4 + 108))("developer") != 0.0 )
            dword_300F0F68 ^= 1u;
          return;
        case 5:
          if ( ((double (__cdecl *)(const char *))*(_DWORD *)(v4 + 108))("developer") != 0.0 )
            (*(void (__cdecl **)(int, const char *))(dword_300F0F4C + 184))(2, "screenshot\n");
          return;
        case 6:
          if ( !v3 )
            return;
          v8 = *(_DWORD *)(v3 + 200);
          if ( v8 )
          {
            if ( v8 == 4 || v8 == 9 || v8 == 15 || v8 == 16 )
            {
              v22 = (float)*(int *)(v4 + 248);
              v17 = (float)*(int *)(v4 + 244);
              if ( sub_30042BB0(v17, v22) )
              {
                v11 = sub_300445C0(v10);
                if ( v11 )
                  *(_DWORD *)(v11 + 28) = 0;
                v12 = dword_300F0F4C;
                *(_DWORD *)(v3 + 592) = 0;
                dword_300F0F54 = 1;
                dword_300F0F5C = v3;
                (*(void (__cdecl **)(int))(v12 + 124))(1);
              }
              return;
            }
            v21 = (float)*(int *)(v4 + 248);
            v16 = (float)*(int *)(v4 + 244);
            v9 = sub_30042BB0(v16, v21);
          }
          else
          {
            v20 = (float)*(int *)(v4 + 248);
            v15 = (float)*(int *)(v4 + 244);
            sub_30046C70(v3);
            v9 = sub_30042BB0(v15, v20);
          }
          if ( v9 )
LABEL_49:
            sub_300466E0(v3);
          break;
        case 7:
          return;
      }
    }
  }
}
// 30047086: variable 'v10' is possibly undefined
// 30046B00: using guessed type _DWORD __cdecl sub_30046B00(_DWORD, _DWORD);
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F50: using guessed type int dword_300F0F50;
// 300F0F54: using guessed type int dword_300F0F54;
// 300F0F58: using guessed type int dword_300F0F58;
// 300F0F5C: using guessed type int dword_300F0F5C;
// 300F0F68: using guessed type int dword_300F0F68;
// 300F0F78: using guessed type int dword_300F0F78;

//----- (30047260) --------------------------------------------------------
int __usercall sub_30047260@<eax>(int *a1@<ebx>, int a2@<esi>, int *a3, int a4)
{
  int v4; // ebp
  int v5; // edi
  int v6; // eax
  int v7; // ecx
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // ecx
  int v12; // eax
  int v13; // edx
  double v14; // st7
  int v15; // eax
  double v16; // st7
  int v18; // [esp+4h] [ebp-108h]
  char v19[256]; // [esp+8h] [ebp-104h] BYREF
  unsigned int v20; // [esp+108h] [ebp-4h]
  unsigned int retaddr; // [esp+10Ch] [ebp+0h]

  v4 = a4;
  v20 = retaddr ^ dword_300705C0;
  if ( a4 || (v4 = *(_DWORD *)(a2 + 236)) != 0 )
  {
    if ( (*a1 = (unsigned __int64)*(float *)(a2 + 192), *a3 = (unsigned __int64)*(float *)(a2 + 196), !*a1)
      || (*(_DWORD *)(a2 + 200) == 8 || *(_DWORD *)(a2 + 280)) && *(_DWORD *)(a2 + 216) == 1
      || *(_DWORD *)(a2 + 216) == 3 )
    {
      v5 = (*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 20))(
             v4,
             *(_DWORD *)(a2 + 212),
             *(_DWORD *)(a2 + 228),
             0);
      v6 = *(_DWORD *)(a2 + 200);
      v18 = v5;
      if ( v6 == 8 && ((v7 = *(_DWORD *)(a2 + 216), v7 == 1) || v7 == 2) )
      {
        v8 = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD))(dword_300F0F4C + 200))(
               *(_DWORD *)(a2 + 60),
               *(_DWORD *)(a2 + 212),
               *(_DWORD *)(a2 + 228));
      }
      else if ( (v6 == 4 || v6 == 9 || v6 == 15 || v6 == 16)
             && *(_DWORD *)(a2 + 216) == 1
             && (v9 = *(_DWORD *)(a2 + 280)) != 0 )
      {
        (*(void (__cdecl **)(int, char *, int))(dword_300F0F4C + 104))(v9, v19, 256);
        v8 = (*(int (__cdecl **)(char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 20))(
               v19,
               *(_DWORD *)(a2 + 212),
               *(_DWORD *)(a2 + 228),
               0);
      }
      else
      {
        if ( *(_DWORD *)(a2 + 216) != 3 )
          goto LABEL_22;
        v8 = (*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 20))(
               a4,
               *(_DWORD *)(a2 + 212),
               *(_DWORD *)(a2 + 228),
               0);
      }
      v5 += v8;
      v18 = v5;
LABEL_22:
      v10 = (*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 20))(
              v4,
              *(_DWORD *)(a2 + 212),
              *(_DWORD *)(a2 + 228),
              0);
      v11 = dword_300F0F4C;
      *a1 = v10;
      *a3 = (*(int (__cdecl **)(_DWORD, _DWORD))(v11 + 24))(*(_DWORD *)(a2 + 212), *(_DWORD *)(a2 + 228));
      v12 = *(_DWORD *)(a2 + 224);
      v13 = *(_DWORD *)(a2 + 220);
      *(float *)(a2 + 192) = (float)*a1;
      v14 = (double)*a3;
      *(_DWORD *)(a2 + 188) = v12;
      v15 = *(_DWORD *)(a2 + 216);
      *(float *)(a2 + 196) = v14;
      *(_DWORD *)(a2 + 184) = v13;
      if ( v15 == 2 )
      {
        v16 = (double)v18;
      }
      else
      {
        if ( v15 != 1 && v15 != 3 )
          goto LABEL_28;
        v16 = (double)(v5 / 2);
      }
      *(float *)(a2 + 184) = *(float *)(a2 + 220) - v16;
LABEL_28:
      if ( *(_DWORD *)(a2 + 56) )
      {
        *(float *)(a2 + 184) = *(float *)(a2 + 184) + *(float *)(a2 + 68);
        *(float *)(a2 + 188) = *(float *)(a2 + 68) + *(float *)(a2 + 188);
      }
      *(float *)(a2 + 184) = *(float *)a2 + *(float *)(a2 + 184);
      *(float *)(a2 + 188) = *(float *)(a2 + 4) + *(float *)(a2 + 188);
      return sub_30052A2E(retaddr ^ v20);
    }
  }
  return sub_30052A2E(retaddr ^ v20);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300474E0) --------------------------------------------------------
_BYTE *__usercall sub_300474E0@<eax>(int a1@<esi>, int a2)
{
  int v2; // edi
  int v3; // ecx
  int v4; // eax
  double v5; // st7
  unsigned int v6; // eax
  double v7; // st7
  int v8; // edx
  int v9; // ecx
  _BYTE *result; // eax
  _DWORD *v11; // edi
  float v12; // [esp+0h] [ebp-2Ch]
  float v13; // [esp+0h] [ebp-2Ch]
  float v14; // [esp+10h] [ebp-1Ch]
  float v15; // [esp+14h] [ebp-18h]
  float v16; // [esp+18h] [ebp-14h]
  float v17; // [esp+1Ch] [ebp-10h] BYREF
  float v18; // [esp+20h] [ebp-Ch]
  float v19; // [esp+24h] [ebp-8h]
  float v20; // [esp+28h] [ebp-4h]

  v2 = *(_DWORD *)(a1 + 240);
  v16 = *(float *)(v2 + 216);
  v15 = *(float *)(v2 + 212);
  v3 = dword_300F0F4C;
  v14 = *(float *)(v2 + 208);
  if ( (*(_BYTE *)(a1 + 72) & 0x60) != 0 )
  {
    v4 = *(_DWORD *)(dword_300F0F4C + 236);
    if ( v4 > *(_DWORD *)(a1 + 112) )
    {
      *(_DWORD *)(a1 + 112) = v4 + *(_DWORD *)(v2 + 204);
      if ( (*(_BYTE *)(a1 + 72) & 0x20) != 0 )
      {
        v5 = *(float *)(a1 + 128) - v15;
        *(float *)(a1 + 128) = v5;
        if ( v5 > 0.0 )
          goto LABEL_9;
        v6 = *(_DWORD *)(a1 + 72) & 0xFFFFFFDB;
      }
      else
      {
        v7 = v16 + *(float *)(a1 + 128);
        *(float *)(a1 + 128) = v7;
        if ( v7 < v14 )
          goto LABEL_9;
        *(float *)(a1 + 128) = v14;
        v6 = *(_DWORD *)(a1 + 72) & 0xFFFFFFBF;
      }
      *(_DWORD *)(a1 + 72) = v6;
    }
  }
LABEL_9:
  if ( (*(_BYTE *)(a1 + 72) & 2) != 0 )
  {
    v8 = (unsigned __int64)(458129845i64 * *(int *)(v3 + 236)) >> 32;
    v17 = *(float *)(v2 + 1260) * 0.80000001;
    v18 = *(float *)(v2 + 1264) * 0.80000001;
    v19 = *(float *)(v2 + 1268) * 0.80000001;
    v20 = *(float *)(v2 + 1272) * 0.80000001;
    v12 = (sin((double)(int)(((unsigned int)v8 >> 31) + (v8 >> 3))) + 1.0) * 0.5;
    sub_30041BB0(v2 + 1260, (int)&v17, (float *)a2, v12);
  }
  else if ( *(_DWORD *)(a1 + 232) != 1 || (v9 = *(_DWORD *)(v3 + 236), ((v9 / 256) & 1) != 0) )
  {
    *(_DWORD *)a2 = *(_DWORD *)(a1 + 116);
    *(_DWORD *)(a2 + 4) = *(_DWORD *)(a1 + 120);
    *(_DWORD *)(a2 + 8) = *(_DWORD *)(a1 + 124);
    *(_DWORD *)(a2 + 12) = *(_DWORD *)(a1 + 128);
  }
  else
  {
    v17 = *(float *)(a1 + 116) * 0.80000001;
    v18 = *(float *)(a1 + 120) * 0.80000001;
    v19 = *(float *)(a1 + 124) * 0.80000001;
    v20 = *(float *)(a1 + 128) * 0.80000001;
    v13 = (sin((double)(v9 / 75)) + 1.0) * 0.5;
    sub_30041BB0(a1 + 116, (int)&v17, (float *)a2, v13);
  }
  result = *(_BYTE **)(a1 + 288);
  if ( result )
  {
    if ( *result )
    {
      result = *(_BYTE **)(a1 + 284);
      if ( result )
      {
        if ( *result && (*(_BYTE *)(a1 + 292) & 3) != 0 )
        {
          result = (_BYTE *)sub_30044280(1);
          if ( !result )
          {
            v11 = (_DWORD *)(v2 + 1276);
            *(_DWORD *)a2 = *v11;
            result = (_BYTE *)v11[1];
            *(_DWORD *)(a2 + 4) = result;
            *(_DWORD *)(a2 + 8) = v11[2];
            *(_DWORD *)(a2 + 12) = v11[3];
          }
        }
      }
    }
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30047740) --------------------------------------------------------
int __usercall sub_30047740@<eax>(int a1@<esi>, char *a2, int a3)
{
  int v3; // ecx
  char *v4; // ebp
  int v5; // ebx
  int v6; // eax
  int v7; // ecx
  double v8; // st7
  double v9; // st7
  int v10; // edi
  char v11; // al
  int v12; // ecx
  char v13; // al
  char v14; // al
  int v15; // eax
  int v16; // eax
  double v17; // st7
  float v19; // [esp+14h] [ebp-41Ch]
  int v20; // [esp+14h] [ebp-41Ch]
  int v21; // [esp+18h] [ebp-418h]
  int v22; // [esp+1Ch] [ebp-414h]
  float v23; // [esp+20h] [ebp-410h]
  char *v24; // [esp+24h] [ebp-40Ch]
  int v25; // [esp+28h] [ebp-408h]
  char v26[1024]; // [esp+2Ch] [ebp-404h] BYREF
  unsigned int v27; // [esp+42Ch] [ebp-4h]
  unsigned int retaddr; // [esp+430h] [ebp+0h]

  v3 = *(_DWORD *)(a1 + 212);
  v4 = a2;
  v27 = retaddr ^ dword_300705C0;
  v5 = 0;
  v24 = 0;
  v6 = (*(int (__cdecl **)(int, _DWORD))(dword_300F0F4C + 24))(v3, *(_DWORD *)(a1 + 228));
  v7 = *(_DWORD *)(a1 + 212);
  v25 = v6;
  v22 = (*(int (__cdecl **)(char *, int, _DWORD, _DWORD))(dword_300F0F4C + 20))(a2, v7, *(_DWORD *)(a1 + 228), 0);
  v8 = (double)v22;
  if ( v8 <= *(float *)(a1 + 8) )
  {
    v9 = *(float *)(a1 + 8);
  }
  else
  {
    v19 = v8;
    v9 = v19 / (double)(int)(unsigned __int64)ceil(v19 / *(float *)(a1 + 8));
  }
  v21 = (unsigned __int64)v9;
  v10 = 0;
  v23 = *(float *)(a1 + 224);
  v26[0] = 0;
  v20 = 0;
  if ( a2 )
  {
    do
    {
      v11 = *v4;
      if ( *v4 == 32 || v11 == 9 || v11 == 10 || !v11 )
      {
        v5 = v10;
        v24 = v4 + 1;
        v20 = v22;
      }
      v12 = (*(int (__cdecl **)(char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 20))(
              v26,
              *(_DWORD *)(a1 + 212),
              *(_DWORD *)(a1 + 228),
              0);
      v22 = v12;
      if ( v5 && (double)v12 > *(float *)(a1 + 8) || (v13 = *v4, *v4 == 10) || !v13 || v13 == 32 && v12 > v21 )
      {
        if ( v10 )
        {
          v15 = *(_DWORD *)(a1 + 216);
          if ( v15 == 1 )
          {
            *(float *)(a1 + 184) = *(float *)(a1 + 220) - (double)(v20 / 2);
          }
          else if ( v15 == 2 )
          {
            *(float *)(a1 + 184) = *(float *)(a1 + 220) - (double)v20;
          }
          else
          {
            *(_DWORD *)(a1 + 184) = *(_DWORD *)(a1 + 220);
          }
          v16 = *(_DWORD *)(a1 + 56);
          *(float *)(a1 + 188) = v23;
          if ( v16 )
          {
            *(float *)(a1 + 184) = *(float *)(a1 + 68) + *(float *)(a1 + 184);
            *(float *)(a1 + 188) = *(float *)(a1 + 68) + *(float *)(a1 + 188);
          }
          v17 = *(float *)a1 + *(float *)(a1 + 184);
          v26[v5] = 0;
          *(float *)(a1 + 184) = v17;
          *(float *)(a1 + 188) = *(float *)(a1 + 4) + *(float *)(a1 + 188);
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int, char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
            *(_DWORD *)(a1 + 184),
            *(_DWORD *)(a1 + 188),
            *(_DWORD *)(a1 + 212),
            *(_DWORD *)(a1 + 228),
            a3,
            v26,
            0,
            0,
            *(_DWORD *)(a1 + 232));
        }
        if ( !*v4 )
          return sub_30052A2E(retaddr ^ v27);
        v4 = v24;
        v5 = 0;
        v10 = 0;
        v20 = 0;
        v23 = (double)(v25 + 5) + v23;
      }
      else
      {
        v26[v10] = v13;
        v14 = v26[v10++];
        ++v4;
        if ( v14 == 13 )
          *((_BYTE *)&v25 + v10 + 3) = 32;
        v26[v10] = 0;
      }
    }
    while ( v4 );
  }
  return sub_30052A2E(retaddr ^ v27);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300479D0) --------------------------------------------------------
int __usercall sub_300479D0@<eax>(int a1@<esi>, char *Source, int a3)
{
  int v3; // ecx
  char *v4; // ebp
  char *i; // edi
  int v6; // eax
  int v7; // eax
  float v9; // [esp+8h] [ebp-414h]
  float v10; // [esp+8h] [ebp-414h]
  float v11; // [esp+8h] [ebp-414h]
  float v12; // [esp+8h] [ebp-414h]
  float v13; // [esp+Ch] [ebp-410h]
  float v14; // [esp+Ch] [ebp-410h]
  int v15; // [esp+10h] [ebp-40Ch]
  float v16; // [esp+14h] [ebp-408h]
  char Destination[1024]; // [esp+18h] [ebp-404h] BYREF
  unsigned int v18; // [esp+418h] [ebp-4h]
  unsigned int retaddr; // [esp+41Ch] [ebp+0h]

  v3 = *(_DWORD *)(a1 + 212);
  v4 = Source;
  v18 = retaddr ^ dword_300705C0;
  v15 = (*(int (__cdecl **)(int, _DWORD))(dword_300F0F4C + 24))(v3, *(_DWORD *)(a1 + 228));
  v16 = *(float *)(a1 + 188);
  for ( i = strchr(Source, 13); i; i = strchr(i + 1, 13) )
  {
    if ( !*i )
      break;
    strncpy(Destination, v4, i - v4 + 1);
    v6 = *(_DWORD *)(a1 + 216);
    Destination[i - v4] = 0;
    if ( v6 == 1 )
    {
      v9 = (*(float *)(a1 + 192)
          - (double)(*(int (__cdecl **)(char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 20))(
                      Destination,
                      *(_DWORD *)(a1 + 212),
                      *(_DWORD *)(a1 + 228),
                      0))
         * 0.5
         + *(float *)(a1 + 184);
      (*(void (__cdecl **)(_DWORD, float, _DWORD, _DWORD, int, char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
        LODWORD(v9),
        COERCE_FLOAT(LODWORD(v16)),
        *(_DWORD *)(a1 + 212),
        *(_DWORD *)(a1 + 228),
        a3,
        Destination,
        0,
        0,
        *(_DWORD *)(a1 + 232));
    }
    else if ( v6 == 2 )
    {
      v13 = *(float *)(a1 + 192) + *(float *)(a1 + 184);
      v10 = v13
          - (double)(*(int (__cdecl **)(char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 20))(
                      Destination,
                      *(_DWORD *)(a1 + 212),
                      *(_DWORD *)(a1 + 228),
                      0);
      (*(void (__cdecl **)(_DWORD, float, _DWORD, _DWORD, int, char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
        LODWORD(v10),
        COERCE_FLOAT(LODWORD(v16)),
        *(_DWORD *)(a1 + 212),
        *(_DWORD *)(a1 + 228),
        a3,
        Destination,
        0,
        0,
        *(_DWORD *)(a1 + 232));
    }
    else
    {
      (*(void (__cdecl **)(_DWORD, float, _DWORD, _DWORD, int, char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
        *(_DWORD *)(a1 + 184),
        COERCE_FLOAT(LODWORD(v16)),
        *(_DWORD *)(a1 + 212),
        *(_DWORD *)(a1 + 228),
        a3,
        Destination,
        0,
        0,
        *(_DWORD *)(a1 + 232));
    }
    v4 = i + 1;
    v16 = (double)(v15 + 5) + v16;
  }
  v7 = *(_DWORD *)(a1 + 216);
  if ( v7 == 1 )
  {
    v11 = (*(float *)(a1 + 192)
         - (double)(*(int (__cdecl **)(char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 20))(
                     v4,
                     *(_DWORD *)(a1 + 212),
                     *(_DWORD *)(a1 + 228),
                     0))
        * 0.5
        + *(float *)(a1 + 184);
    (*(void (__cdecl **)(_DWORD, float, _DWORD, _DWORD, int, char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
      LODWORD(v11),
      COERCE_FLOAT(LODWORD(v16)),
      *(_DWORD *)(a1 + 212),
      *(_DWORD *)(a1 + 228),
      a3,
      v4,
      0,
      0,
      *(_DWORD *)(a1 + 232));
  }
  else if ( v7 == 2 )
  {
    v14 = *(float *)(a1 + 192) + *(float *)(a1 + 184);
    v12 = v14
        - (double)(*(int (__cdecl **)(char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 20))(
                    v4,
                    *(_DWORD *)(a1 + 212),
                    *(_DWORD *)(a1 + 228),
                    0);
    (*(void (__cdecl **)(_DWORD, float, _DWORD, _DWORD, int, char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
      LODWORD(v12),
      COERCE_FLOAT(LODWORD(v16)),
      *(_DWORD *)(a1 + 212),
      *(_DWORD *)(a1 + 228),
      a3,
      v4,
      0,
      0,
      *(_DWORD *)(a1 + 232));
  }
  else
  {
    (*(void (__cdecl **)(_DWORD, float, _DWORD, _DWORD, int, char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
      *(_DWORD *)(a1 + 184),
      COERCE_FLOAT(LODWORD(v16)),
      *(_DWORD *)(a1 + 212),
      *(_DWORD *)(a1 + 228),
      a3,
      v4,
      0,
      0,
      *(_DWORD *)(a1 + 232));
  }
  return sub_30052A2E(retaddr ^ v18);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30047C50) --------------------------------------------------------
int __thiscall sub_30047C50(_DWORD *this)
{
  char *v2; // edi
  int v3; // eax
  char v4; // al
  char *i; // ecx
  int v6; // eax
  int v8; // [esp+8h] [ebp-41Ch] BYREF
  int v9[4]; // [esp+Ch] [ebp-418h] BYREF
  int v10; // [esp+1Ch] [ebp-408h] BYREF
  char v11[1024]; // [esp+20h] [ebp-404h] BYREF
  unsigned int v12; // [esp+420h] [ebp-4h]
  unsigned int retaddr; // [esp+424h] [ebp+0h]

  v2 = (char *)this[59];
  v12 = retaddr ^ dword_300705C0;
  if ( !v2 )
  {
    v3 = this[70];
    if ( !v3 )
      return sub_30052A2E(retaddr ^ v12);
    (*(void (__cdecl **)(int, char *, int))(dword_300F0F4C + 104))(v3, v11, 1024);
    if ( (this[18] & 0x200000) != 0 )
    {
      v4 = v11[0];
      for ( i = v11; v4; v4 = *++i )
      {
        if ( v4 == 46 )
          break;
        *i = v4;
      }
      *i = 0;
    }
    v2 = v11;
  }
  if ( *v2 == 64 )
    v2 = (char *)(*(int (__cdecl **)(char *))(dword_300F0F4C + 32))(v2 + 1);
  sub_300474E0((int)this, (int)v9);
  sub_30047260(&v8, (int)this, &v10, (int)v2);
  if ( *v2 )
  {
    v6 = this[18];
    if ( (v6 & 0x40000) != 0 )
    {
      sub_300479D0((int)this, v2, (int)v9);
    }
    else if ( (v6 & 0x80000) != 0 )
    {
      sub_30047740((int)this, v2, (int)v9);
    }
    else
    {
      (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int *, char *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
        this[46],
        this[47],
        this[53],
        this[57],
        v9,
        v2,
        0,
        0,
        this[58]);
    }
  }
  return sub_30052A2E(retaddr ^ v12);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30047D90) --------------------------------------------------------
int __cdecl sub_30047D90(int a1)
{
  int v1; // eax
  int v2; // eax
  int v3; // ecx
  double v4; // st7
  double v5; // st7
  int result; // eax
  double v7; // st7
  float *v8; // eax
  int v9; // ebx
  int v10; // edi
  int v11; // eax
  int v12; // edx
  int v13; // eax
  _BYTE *v14; // eax
  bool v15; // zf
  int v16; // eax
  double v17; // st7
  float v18; // [esp+0h] [ebp-468h]
  float v19; // [esp+4h] [ebp-464h]
  int v20; // [esp+24h] [ebp-444h]
  float v21; // [esp+24h] [ebp-444h]
  int v22; // [esp+24h] [ebp-444h]
  int v23; // [esp+38h] [ebp-430h] BYREF
  int v24; // [esp+3Ch] [ebp-42Ch] BYREF
  int v25; // [esp+40h] [ebp-428h]
  int v26[4]; // [esp+44h] [ebp-424h] BYREF
  float v27[4]; // [esp+54h] [ebp-414h] BYREF
  char Buffer[1024]; // [esp+64h] [ebp-404h] BYREF
  unsigned int v29; // [esp+464h] [ebp-4h]
  unsigned int retaddr; // [esp+468h] [ebp+0h]

  v29 = retaddr ^ dword_300705C0;
  v1 = *(_DWORD *)(a1 + 204);
  if ( v1 == 4 || v1 == 9 || v1 == 15 || v1 == 11 || v1 == 13 || v1 == 10 || !v1 || v1 == 16 )
  {
    v25 = *(_DWORD *)(a1 + 596);
    if ( v25 )
    {
      sub_30047C50((_DWORD *)a1);
      v2 = *(_DWORD *)(a1 + 280);
      Buffer[0] = 0;
      if ( v2 )
      {
        v3 = *(_DWORD *)(a1 + 200);
        if ( v3 == 16 )
        {
          v4 = ((double (__cdecl *)(int))*(_DWORD *)(dword_300F0F4C + 108))(v2);
          *(float *)&v23 = v4;
          _snprintf(Buffer, 0x400u, "%.*f", 2, v4);
          (*(void (__cdecl **)(_DWORD, char *))(dword_300F0F4C + 112))(*(_DWORD *)(a1 + 280), Buffer);
          v5 = ((double (__cdecl *)(const char *))*(_DWORD *)(dword_300F0F4C + 108))("cl_language");
          sub_300410D0(2, (unsigned __int64)v5, 0x400u, Buffer, *(float *)&v23);
        }
        else if ( v3 == 9 )
        {
          v7 = ((double (__cdecl *)(int))*(_DWORD *)(dword_300F0F4C + 108))(v2);
          _snprintf(Buffer, 0x400u, "%.*f", 0, v7);
          (*(void (__cdecl **)(_DWORD, char *))(dword_300F0F4C + 112))(*(_DWORD *)(a1 + 280), Buffer);
        }
        else
        {
          (*(void (__cdecl **)(int, char *, int))(dword_300F0F4C + 104))(v2, Buffer, 1024);
        }
      }
      sub_30047260(&v23, a1, &v24, (int)Buffer);
      v8 = *(float **)(a1 + 240);
      v9 = dword_300F0F4C;
      v10 = *(_DWORD *)(a1 + 72) & 2;
      if ( v10 )
      {
        v20 = *(_DWORD *)(dword_300F0F4C + 236);
        v27[0] = v8[315] * 0.80000001;
        v27[1] = v8[316] * 0.80000001;
        v27[2] = v8[317] * 0.80000001;
        v27[3] = v8[318] * 0.80000001;
        v23 = v20 / 75;
        v21 = (sin((double)(v20 / 75)) + 1.0) * 0.5;
        sub_30041BB0((int)(v8 + 315), (int)v27, (float *)v26, v21);
      }
      else
      {
        v11 = *(_DWORD *)(a1 + 120);
        v26[0] = *(_DWORD *)(a1 + 116);
        v12 = *(_DWORD *)(a1 + 124);
        v26[1] = v11;
        v13 = *(_DWORD *)(a1 + 128);
        v26[2] = v12;
        v26[3] = v13;
      }
      v14 = *(_BYTE **)(a1 + 236);
      if ( !v14 || (v15 = *v14 == 0, v23 = 8, v15) )
        *(float *)&v23 = 0.0;
      if ( v10 && dword_300F0F54 )
      {
        v16 = (*(int (**)(void))(v9 + 128))();
        v17 = *(float *)(a1 + 192) + *(float *)(a1 + 184) + (double)v23;
        v22 = *(_DWORD *)(a1 + 232);
        LOBYTE(v24) = v16 != 0 ? 95 : 124;
        v18 = v17;
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int *, char *, int, int, _DWORD, int))(dword_300F0F4C + 120))(
          LODWORD(v18),
          *(_DWORD *)(a1 + 188),
          *(_DWORD *)(a1 + 212),
          *(_DWORD *)(a1 + 228),
          v26,
          &Buffer[*(_DWORD *)(v25 + 28)],
          *(_DWORD *)(a1 + 592) - *(_DWORD *)(v25 + 28),
          v24,
          *(_DWORD *)(v25 + 24),
          v22);
      }
      else
      {
        v19 = *(float *)(a1 + 192) + *(float *)(a1 + 184) + (double)v23;
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int *, char *, _DWORD, _DWORD, _DWORD))(v9 + 16))(
          LODWORD(v19),
          *(_DWORD *)(a1 + 188),
          *(_DWORD *)(a1 + 212),
          *(_DWORD *)(a1 + 228),
          v26,
          &Buffer[*(_DWORD *)(v25 + 28)],
          0,
          *(_DWORD *)(v25 + 24),
          *(_DWORD *)(a1 + 232));
      }
    }
    result = sub_30052A2E(retaddr ^ v29);
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_EDITFIELD, ITEM_TYPE_NUMERICFIELD, ITEM_TYPE_DECIMALFIELD, ITEM_T"
               "YPE_UPREDITFIELD, ITEM_TYPE_YESNO, ITEM_TYPE_BIND, ITEM_TYPE_SLIDER, or ITEM_TYPE_TEXT\n");
    result = sub_30052A2E(retaddr ^ v29);
  }
  return result;
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F54: using guessed type int dword_300F0F54;

//----- (300480F0) --------------------------------------------------------
int __usercall sub_300480F0@<eax>(int a1@<esi>)
{
  float *v1; // edi
  int v2; // ebp
  int v3; // ecx
  int v4; // ecx
  int v5; // eax
  int v6; // ecx
  int v7; // eax
  int v8; // edi
  float v10; // [esp+0h] [ebp-50h]
  float v11; // [esp+18h] [ebp-38h]
  float v12; // [esp+28h] [ebp-28h]
  int v13[4]; // [esp+30h] [ebp-20h] BYREF
  float v14[4]; // [esp+40h] [ebp-10h] BYREF

  v1 = *(float **)(a1 + 240);
  if ( *(_DWORD *)(a1 + 280) )
    v12 = ((double (__cdecl *)(_DWORD))*(_DWORD *)(dword_300F0F4C + 108))(*(_DWORD *)(a1 + 280));
  else
    v12 = 0.0;
  v2 = dword_300F0F4C;
  if ( (*(_BYTE *)(a1 + 72) & 2) != 0 )
  {
    v3 = *(_DWORD *)(dword_300F0F4C + 236);
    v14[0] = v1[315] * 0.80000001;
    v14[1] = v1[316] * 0.80000001;
    v14[2] = v1[317] * 0.80000001;
    v14[3] = v1[318] * 0.80000001;
    v11 = (sin((double)(v3 / 75)) + 1.0) * 0.5;
    sub_30041BB0((int)(v1 + 315), (int)v14, (float *)v13, v11);
  }
  else
  {
    v4 = *(_DWORD *)(a1 + 120);
    v13[0] = *(_DWORD *)(a1 + 116);
    v5 = *(_DWORD *)(a1 + 124);
    v13[1] = v4;
    v6 = *(_DWORD *)(a1 + 128);
    v13[2] = v5;
    v13[3] = v6;
  }
  if ( v12 == 0.0 )
    v7 = (*(int (__cdecl **)(const char *))(v2 + 32))("EXE_NO");
  else
    v7 = (*(int (__cdecl **)(const char *))(v2 + 32))("EXE_YES");
  v8 = v7;
  if ( !*(_DWORD *)(a1 + 236) )
    return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int *, int, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
             *(_DWORD *)(a1 + 184),
             *(_DWORD *)(a1 + 188),
             *(_DWORD *)(a1 + 212),
             *(_DWORD *)(a1 + 228),
             v13,
             v7,
             0,
             0,
             *(_DWORD *)(a1 + 232));
  sub_30047C50((_DWORD *)a1);
  v10 = *(float *)(a1 + 192) + *(float *)(a1 + 184) + 8.0;
  return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int *, int, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
           LODWORD(v10),
           *(_DWORD *)(a1 + 188),
           *(_DWORD *)(a1 + 212),
           *(_DWORD *)(a1 + 228),
           v13,
           v8,
           0,
           0,
           *(_DWORD *)(a1 + 232));
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300482A0) --------------------------------------------------------
int __usercall sub_300482A0@<eax>(int a1@<esi>)
{
  float *v1; // eax
  int v2; // edx
  int v3; // ecx
  int v4; // eax
  int v5; // ecx
  _BYTE *v6; // edi
  float v8; // [esp+0h] [ebp-4Ch]
  float v9; // [esp+20h] [ebp-2Ch]
  int v10[4]; // [esp+2Ch] [ebp-20h] BYREF
  float v11[4]; // [esp+3Ch] [ebp-10h] BYREF

  v1 = *(float **)(a1 + 240);
  if ( (*(_BYTE *)(a1 + 72) & 2) != 0 )
  {
    v11[0] = v1[315] * 0.80000001;
    v11[1] = v1[316] * 0.80000001;
    v11[2] = v1[317] * 0.80000001;
    v2 = (unsigned __int64)(458129845i64 * *(int *)(dword_300F0F4C + 236)) >> 32;
    v11[3] = v1[318] * 0.80000001;
    v9 = (sin((double)(int)(((unsigned int)v2 >> 31) + (v2 >> 3))) + 1.0) * 0.5;
    sub_30041BB0((int)(v1 + 315), (int)v11, (float *)v10, v9);
  }
  else
  {
    v3 = *(_DWORD *)(a1 + 120);
    v10[0] = *(_DWORD *)(a1 + 116);
    v4 = *(_DWORD *)(a1 + 124);
    v10[1] = v3;
    v5 = *(_DWORD *)(a1 + 128);
    v10[2] = v4;
    v10[3] = v5;
  }
  v6 = (_BYTE *)sub_300456C0((_DWORD *)a1);
  if ( *v6 == 64 )
    v6 = (_BYTE *)(*(int (__cdecl **)(_BYTE *))(dword_300F0F4C + 32))(v6 + 1);
  if ( !*(_DWORD *)(a1 + 236) )
    return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int *, _BYTE *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
             *(_DWORD *)(a1 + 184),
             *(_DWORD *)(a1 + 188),
             *(_DWORD *)(a1 + 212),
             *(_DWORD *)(a1 + 228),
             v10,
             v6,
             0,
             0,
             *(_DWORD *)(a1 + 232));
  sub_30047C50((_DWORD *)a1);
  v8 = *(float *)(a1 + 192) + *(float *)(a1 + 184) + 8.0;
  return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int *, _BYTE *, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
           LODWORD(v8),
           *(_DWORD *)(a1 + 188),
           *(_DWORD *)(a1 + 212),
           *(_DWORD *)(a1 + 228),
           v10,
           v6,
           0,
           0,
           *(_DWORD *)(a1 + 232));
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30048420) --------------------------------------------------------
int __usercall sub_30048420@<eax>(_DWORD *a1@<ebx>, char *a2)
{
  int v2; // edi
  int i; // esi
  char v5[256]; // [esp+Ch] [ebp-104h] BYREF
  unsigned int v6; // [esp+10Ch] [ebp-4h]
  unsigned int retaddr; // [esp+110h] [ebp+0h]

  v2 = 0;
  v6 = retaddr ^ dword_300705C0;
  a1[1] = -1;
  *a1 = -1;
  for ( i = 0; i < 256; ++i )
  {
    (*(void (__cdecl **)(int, char *, int))(dword_300F0F4C + 176))(i, v5, 256);
    if ( v5[0] )
    {
      if ( a2 )
      {
        if ( !sub_30040170(99999, v5, a2) )
        {
          a1[v2++] = i;
          if ( v2 == 2 )
            break;
        }
      }
    }
  }
  return sub_30052A2E(retaddr ^ v6);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300484D0) --------------------------------------------------------
int sub_300484D0()
{
  int *v0; // esi
  int result; // eax
  int v2; // edx
  int v3[2]; // [esp+8h] [ebp-8h] BYREF

  v0 = &dword_30071160;
  do
  {
    result = sub_30048420(v3, (char *)*(v0 - 4));
    v2 = v3[1];
    *v0 = v3[0];
    v0[1] = v2;
    v0 += 6;
  }
  while ( (int)v0 < (int)&off_30071610 );
  return result;
}
// 30071160: using guessed type int dword_30071160;
// 30071610: using guessed type int (__cdecl *off_30071610)(int, int);

//----- (30048510) --------------------------------------------------------
int sub_30048510()
{
  char **v0; // esi
  char *v1; // eax
  char *v2; // eax

  v0 = &off_30071150;
  do
  {
    v1 = v0[4];
    if ( v1 != (char *)-1 )
    {
      (*(void (__cdecl **)(char *, char *))(dword_300F0F4C + 180))(v1, *v0);
      v2 = v0[5];
      if ( v2 != (char *)-1 )
        (*(void (__cdecl **)(char *, char *))(dword_300F0F4C + 180))(v2, *v0);
    }
    v0 += 6;
  }
  while ( (int)v0 < (int)&off_30071600 );
  return (*(int (__cdecl **)(int, const char *))(dword_300F0F4C + 184))(2, "in_restart\n");
}
// 30071150: using guessed type char *off_30071150;
// 30071600: using guessed type char *off_30071600;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30048590) --------------------------------------------------------
int __usercall sub_30048590@<eax>(char *a1@<edi>)
{
  int v1; // ebx
  char **v2; // esi
  char *v3; // ecx

  v1 = 0;
  v2 = &off_30071150;
  while ( 1 )
  {
    v3 = *v2;
    if ( a1 )
    {
      if ( v3 && !sub_30040170(99999, a1, v3) )
        break;
    }
    v2 += 6;
    ++v1;
    if ( (int)v2 >= (int)&off_30071600 )
      return -1;
  }
  return v1;
}
// 30071150: using guessed type char *off_30071150;
// 30071600: using guessed type char *off_30071600;

//----- (300485E0) --------------------------------------------------------
char *__usercall sub_300485E0@<eax>(char *a1@<eax>)
{
  int v2; // ebx
  char **v3; // esi
  char *v4; // ecx
  int v6; // eax
  int v7; // esi
  char *v8; // eax
  char *v9; // edx
  char v10; // cl
  const char *v11; // eax

  v2 = 0;
  v3 = &off_30071150;
  while ( 1 )
  {
    v4 = *v3;
    if ( a1 )
    {
      if ( v4 && !sub_30040170(99999, a1, v4) )
        break;
    }
    v3 += 6;
    ++v2;
    if ( (int)v3 >= (int)&off_30071600 )
      goto LABEL_6;
  }
  v6 = dword_30071160[6 * v2];
  if ( v6 == -1 )
  {
LABEL_6:
    strcpy(byte_30563AC0, (const char *)(*(int (__cdecl **)(const char *))(dword_300F0F4C + 32))("KEY_UNBOUND"));
    return byte_30563AC0;
  }
  (*(void (__cdecl **)(int, char *, int))(dword_300F0F4C + 172))(v6, byte_30563AC0, 32);
  strcpy(byte_30563AC0, (const char *)(*(int (__cdecl **)(char *))(dword_300F0F4C + 32))(byte_30563AC0));
  v7 = dword_30071164[6 * v2];
  if ( v7 == -1 )
    return byte_30563AC0;
  (*(void (__cdecl **)(int, char *, int))(dword_300F0F4C + 172))(v7, byte_30563B40, 32);
  v8 = (char *)(*(int (__cdecl **)(char *))(dword_300F0F4C + 32))(byte_30563B40);
  v9 = byte_30563B40;
  do
  {
    v10 = *v8++;
    *v9++ = v10;
  }
  while ( v10 );
  v11 = (const char *)(*(int (__fastcall **)(int, char *, const char *))(dword_300F0F4C + 32))(
                        dword_300F0F4C,
                        v9,
                        "KEY_OR");
  strcat(byte_30563AC0, (const char *)sub_300403F0(" %s ", v11));
  strcat(byte_30563AC0, byte_30563B40);
  return byte_30563AC0;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 30071150: using guessed type char *off_30071150;
// 30071160: using guessed type int dword_30071160[];
// 30071164: using guessed type int dword_30071164[];
// 30071600: using guessed type char *off_30071600;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30048750) --------------------------------------------------------
BOOL __usercall sub_30048750@<eax>(char *a1@<edi>)
{
  int v1; // ebx
  char **v2; // esi
  char *v3; // ecx

  v1 = 0;
  v2 = &off_30071150;
  while ( 1 )
  {
    v3 = *v2;
    if ( a1 )
    {
      if ( v3 && !sub_30040170(99999, a1, v3) )
        break;
    }
    v2 += 6;
    ++v1;
    if ( (int)v2 >= (int)&off_30071600 )
      return 0;
  }
  return dword_30071160[6 * v1] != -1;
}
// 30071150: using guessed type char *off_30071150;
// 30071160: using guessed type int dword_30071160[];
// 30071600: using guessed type char *off_30071600;

//----- (300487A0) --------------------------------------------------------
int __usercall sub_300487A0@<eax>(_DWORD *a1@<eax>, _DWORD *a2@<ecx>, char *a3)
{
  int v3; // edi
  char **v4; // esi
  char *v5; // ecx
  int v7; // esi
  int v8; // eax
  int v9; // edi
  int v10; // esi

  LOBYTE(dword_300CFE08) = 0;
  *a1 = &dword_300CFE08;
  byte_300F0EC0 = 0;
  *a2 = &byte_300F0EC0;
  v3 = 0;
  v4 = &off_30071150;
  while ( 1 )
  {
    v5 = *v4;
    if ( a3 )
    {
      if ( v5 && !sub_30040170(99999, a3, v5) )
        break;
    }
    v4 += 6;
    ++v3;
    if ( (int)v4 >= (int)&off_30071600 )
      goto LABEL_6;
  }
  v7 = 6 * v3;
  v8 = dword_30071160[6 * v3];
  if ( v8 == -1 )
  {
LABEL_6:
    strcpy((char *)&dword_300CFE08, "KEY_UNBOUND");
    return 0;
  }
  v9 = 1;
  (*(void (__cdecl **)(int, int *, int))(dword_300F0F4C + 172))(v8, &dword_300CFE08, 128);
  v10 = dword_30071164[v7];
  if ( v10 != -1 )
  {
    v9 = 2;
    (*(void (__cdecl **)(int, char *, int))(dword_300F0F4C + 172))(v10, &byte_300F0EC0, 128);
  }
  return v9;
}
// 30071150: using guessed type char *off_30071150;
// 30071160: using guessed type int dword_30071160[];
// 30071164: using guessed type int dword_30071164[];
// 30071600: using guessed type char *off_30071600;
// 300CFE08: using guessed type int dword_300CFE08;
// 300CFE10: using guessed type int dword_300CFE10;
// 300F0EC0: using guessed type char byte_300F0EC0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30048880) --------------------------------------------------------
int __usercall sub_30048880@<eax>(_DWORD *a1@<eax>, char *a2@<ecx>)
{
  int v2; // ebx
  const char *v3; // esi
  char *v4; // eax
  int v5; // edx
  char v6; // cl
  const char *v7; // eax
  const char *v8; // esi
  const char *v9; // eax
  const char *v10; // edx
  unsigned int v11; // eax
  int result; // eax
  const char *v13; // [esp+8h] [ebp-8h] BYREF
  const char *v14; // [esp+Ch] [ebp-4h] BYREF

  *a1 = byte_300ACD08;
  v2 = sub_300487A0(&v13, &v14, a2);
  if ( v2 )
  {
    v3 = v13;
    v4 = (char *)(*(int (__cdecl **)(const char *))(dword_300F0F4C + 28))(v13);
    if ( v4 )
    {
      v5 = byte_300ACD08 - v4;
      do
      {
        v6 = *v4;
        v4[v5] = *v4;
        ++v4;
      }
      while ( v6 );
    }
    else
    {
      strcpy(byte_300ACD08, v3);
    }
    if ( v2 > 1 )
    {
      v7 = (const char *)(*(int (__cdecl **)(const char *))(dword_300F0F4C + 32))("KEY_OR");
      strcat(byte_300ACD08, (const char *)sub_300403F0(" %s ", v7));
      v8 = v14;
      v9 = (const char *)(*(int (__cdecl **)(const char *))(dword_300F0F4C + 28))(v14);
      if ( v9 )
      {
        v10 = v9;
        v11 = strlen(v9) + 1;
      }
      else
      {
        v10 = v8;
        v11 = strlen(v8) + 1;
      }
      qmemcpy(&byte_300ACD08[strlen(byte_300ACD08)], v10, v11);
    }
    result = v2;
  }
  else
  {
    strcpy(byte_300ACD08, (const char *)(*(int (__cdecl **)(const char *))(dword_300F0F4C + 32))("KEY_UNBOUND"));
    result = 0;
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (300489C0) --------------------------------------------------------
int __usercall sub_300489C0@<eax>(int a1@<esi>)
{
  float *v1; // edi
  int v2; // ecx
  int v3; // eax
  int v4; // edx
  int v5; // eax
  float v7; // [esp+0h] [ebp-3Ch]
  float v8; // [esp+4h] [ebp-38h]
  float v9; // [esp+8h] [ebp-34h]
  float v10; // [esp+14h] [ebp-28h]
  float v11; // [esp+18h] [ebp-24h]
  int v12[4]; // [esp+1Ch] [ebp-20h] BYREF
  float v13[4]; // [esp+2Ch] [ebp-10h] BYREF

  v1 = *(float **)(a1 + 240);
  if ( *(_DWORD *)(a1 + 280) )
    (*(void (__cdecl **)(_DWORD))(dword_300F0F4C + 108))(*(_DWORD *)(a1 + 280));
  if ( (*(_BYTE *)(a1 + 72) & 2) != 0 )
  {
    v2 = *(_DWORD *)(dword_300F0F4C + 236);
    v13[0] = v1[315] * 0.80000001;
    v13[1] = v1[316] * 0.80000001;
    v13[2] = v1[317] * 0.80000001;
    v13[3] = v1[318] * 0.80000001;
    v9 = (sin((double)(v2 / 75)) + 1.0) * 0.5;
    sub_30041BB0((int)(v1 + 315), (int)v13, (float *)v12, v9);
  }
  else
  {
    v3 = *(_DWORD *)(a1 + 120);
    v12[0] = *(_DWORD *)(a1 + 116);
    v4 = *(_DWORD *)(a1 + 124);
    v12[1] = v3;
    v5 = *(_DWORD *)(a1 + 128);
    v12[2] = v4;
    v12[3] = v5;
  }
  v11 = *(float *)(a1 + 4);
  if ( *(_DWORD *)(a1 + 236) )
  {
    sub_30047C50((_DWORD *)a1);
    v10 = *(float *)(a1 + 192) + *(float *)(a1 + 184) + 8.0;
  }
  else
  {
    v10 = *(float *)a1;
  }
  (*(void (__cdecl **)(int *))(dword_300F0F4C + 4))(v12);
  (*(void (__cdecl **)(float, float, int, int, _DWORD))(dword_300F0F4C + 8))(
    COERCE_FLOAT(LODWORD(v10)),
    COERCE_FLOAT(LODWORD(v11)),
    1119879168,
    1098907648,
    *(_DWORD *)(dword_300F0F4C + 123624));
  v8 = v11 - 2.0;
  v7 = sub_30044840((void *)a1) - 5.0;
  return (*(int (__cdecl **)(_DWORD, _DWORD, int, int, _DWORD))(dword_300F0F4C + 8))(
           LODWORD(v7),
           LODWORD(v8),
           1092616192,
           1101004800,
           *(_DWORD *)(dword_300F0F4C + 123628));
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30048B50) --------------------------------------------------------
int __usercall sub_30048B50@<eax>(int a1@<esi>)
{
  int v1; // eax
  float *v2; // ebx
  int v3; // ebp
  int v4; // eax
  int v5; // edi
  int v6; // ecx
  int v7; // eax
  int v8; // ecx
  float v10; // [esp+0h] [ebp-54h]
  float v11; // [esp+20h] [ebp-34h]
  float v12; // [esp+34h] [ebp-20h] BYREF
  float v13; // [esp+38h] [ebp-1Ch]
  float v14; // [esp+3Ch] [ebp-18h]
  float v15; // [esp+40h] [ebp-14h]
  int v16[4]; // [esp+44h] [ebp-10h] BYREF

  v1 = *(_DWORD *)(a1 + 204);
  v2 = *(float **)(a1 + 240);
  v3 = 0;
  if ( v1 == 4 || v1 == 9 || v1 == 15 || v1 == 11 || v1 == 13 || v1 == 10 || !v1 || v1 == 16 )
  {
    v4 = *(_DWORD *)(a1 + 596);
    if ( v4 )
      v3 = *(_DWORD *)(v4 + 24);
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_EDITFIELD, ITEM_TYPE_NUMERICFIELD, ITEM_TYPE_DECIMALFIELD, ITEM_T"
               "YPE_UPREDITFIELD, ITEM_TYPE_YESNO, ITEM_TYPE_BIND, ITEM_TYPE_SLIDER, or ITEM_TYPE_TEXT\n");
  }
  if ( *(_DWORD *)(a1 + 280) )
    ((double (__cdecl *)(_DWORD))*(_DWORD *)(dword_300F0F4C + 108))(*(_DWORD *)(a1 + 280));
  v5 = dword_300F0F4C;
  if ( (*(_BYTE *)(a1 + 72) & 2) != 0 )
  {
    if ( dword_300F0F58 == a1 )
    {
      v12 = 0.80000001;
      v13 = 0.0;
      v14 = 0.0;
      v15 = 0.80000001;
    }
    else
    {
      v12 = v2[315] * 0.80000001;
      v13 = v2[316] * 0.80000001;
      v14 = v2[317] * 0.80000001;
      v15 = v2[318] * 0.80000001;
    }
    v11 = (sin((double)(*(_DWORD *)(dword_300F0F4C + 236) / 75)) + 1.0) * 0.5;
    sub_30041BB0((int)(v2 + 315), (int)&v12, (float *)v16, v11);
  }
  else
  {
    v6 = *(_DWORD *)(a1 + 120);
    v16[0] = *(_DWORD *)(a1 + 116);
    v7 = *(_DWORD *)(a1 + 124);
    v16[1] = v6;
    v8 = *(_DWORD *)(a1 + 128);
    v16[2] = v7;
    v16[3] = v8;
  }
  if ( !*(_DWORD *)(a1 + 236) )
    return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int *, const char *, _DWORD, int, _DWORD))(v5 + 16))(
             *(_DWORD *)(a1 + 184),
             *(_DWORD *)(a1 + 188),
             *(_DWORD *)(a1 + 212),
             *(_DWORD *)(a1 + 228),
             v16,
             "FIXME",
             0,
             v3,
             *(_DWORD *)(a1 + 232));
  sub_30047C50((_DWORD *)a1);
  sub_300485E0(*(char **)(a1 + 280));
  v10 = *(float *)(a1 + 192) + *(float *)(a1 + 184) + 8.0;
  return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int *, char *, _DWORD, int, _DWORD))(dword_300F0F4C + 16))(
           LODWORD(v10),
           *(_DWORD *)(a1 + 188),
           *(_DWORD *)(a1 + 212),
           *(_DWORD *)(a1 + 228),
           v16,
           byte_30563AC0,
           0,
           v3,
           *(_DWORD *)(a1 + 232));
}
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F58: using guessed type int dword_300F0F58;

//----- (30048D70) --------------------------------------------------------
int __usercall sub_30048D70@<eax>(int a1@<eax>, int a2@<ecx>, int a3)
{
  int v3; // ebx
  double v5; // st7
  int *v7; // eax
  int v8; // eax
  int v9; // esi
  int v10; // eax
  int v11; // eax
  float v12; // [esp+8h] [ebp-4h]

  v3 = a1;
  v12 = (float)*(int *)(dword_300F0F4C + 248);
  v5 = (double)*(int *)(dword_300F0F4C + 244);
  if ( !a2
    || v5 < *(float *)a2
    || v5 > *(float *)(a2 + 8) + *(float *)a2
    || v12 < (double)*(float *)(a2 + 4)
    || *(float *)(a2 + 12) + *(float *)(a2 + 4) < v12 )
  {
    if ( !dword_300F0F50 )
      return 1;
LABEL_12:
    if ( !dword_300F0F58 || (a1 & 0x400) != 0 )
      return 1;
    switch ( a1 )
    {
      case 27:
        goto LABEL_40;
      case 96:
        return 1;
      case 127:
        if ( sub_30048590(*(char **)(a2 + 280)) != -1 )
        {
          v3 = -1;
          goto LABEL_26;
        }
        break;
      case -1:
        goto LABEL_26;
    }
    v7 = dword_30071164;
    do
    {
      if ( *v7 == v3 )
        *v7 = -1;
      if ( *(v7 - 1) == v3 )
      {
        *(v7 - 1) = *v7;
        *v7 = -1;
      }
      v7 += 6;
    }
    while ( (int)v7 < (int)&unk_30071614 );
LABEL_26:
    v8 = sub_30048590(*(char **)(a2 + 280));
    if ( v8 != -1 )
    {
      v9 = 6 * v8;
      v10 = dword_30071160[6 * v8];
      if ( v3 == -1 )
      {
        if ( v10 != -1 )
        {
          (*(void (__cdecl **)(int, const char *))(dword_300F0F4C + 180))(v10, &byte_30063AC4);
          dword_30071160[v9] = -1;
        }
        v11 = dword_30071164[v9];
        if ( v11 == -1 )
          goto LABEL_39;
        (*(void (__cdecl **)(int, const char *))(dword_300F0F4C + 180))(v11, &byte_30063AC4);
        goto LABEL_38;
      }
      if ( v10 == -1 )
      {
        dword_30071160[v9] = v3;
      }
      else
      {
        if ( v10 == v3 || dword_30071164[v9] != -1 )
        {
          (*(void (__cdecl **)(int, const char *))(dword_300F0F4C + 180))(v10, &byte_30063AC4);
          (*(void (__cdecl **)(int, const char *))(dword_300F0F4C + 180))(dword_30071164[v9], &byte_30063AC4);
          dword_30071160[v9] = v3;
LABEL_38:
          dword_30071164[v9] = -1;
          goto LABEL_39;
        }
        dword_30071164[v9] = v3;
      }
    }
LABEL_39:
    sub_30048510();
LABEL_40:
    dword_300F0F50 = 0;
    return 1;
  }
  if ( dword_300F0F50 )
    goto LABEL_12;
  if ( a3 && (a1 == 200 || a1 == 13) )
  {
    dword_300F0F58 = a2;
    dword_300F0F50 = 1;
    return 1;
  }
  return 1;
}
// 30071160: using guessed type int dword_30071160[];
// 30071164: using guessed type int dword_30071164[];
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F50: using guessed type int dword_300F0F50;
// 300F0F58: using guessed type int dword_300F0F58;

//----- (30048FA0) --------------------------------------------------------
int __thiscall sub_30048FA0(float *this)
{
  int result; // eax
  int v3; // ebx
  double v4; // st7
  double v5; // st7
  double v6; // st7
  int v7; // eax
  int v8; // ecx
  double v9; // st7
  int v10; // eax
  double v11; // st7
  int v12; // esi
  int v13; // edi
  int v14; // eax
  int v15; // eax
  int v16; // edx
  int v17; // esi
  double v18; // st7
  float v19; // [esp+10h] [ebp-148h]
  float v20; // [esp+10h] [ebp-148h]
  float v21; // [esp+10h] [ebp-148h]
  float v22; // [esp+10h] [ebp-148h]
  float v23; // [esp+14h] [ebp-144h]
  float v24; // [esp+14h] [ebp-144h]
  float v25; // [esp+14h] [ebp-144h]
  float v26; // [esp+14h] [ebp-144h]
  int v27; // [esp+14h] [ebp-144h]
  float v28; // [esp+18h] [ebp-140h]
  float v29; // [esp+18h] [ebp-140h]
  float v30; // [esp+1Ch] [ebp-13Ch]
  float v31; // [esp+1Ch] [ebp-13Ch]
  double v32; // [esp+20h] [ebp-138h] BYREF
  int v33; // [esp+28h] [ebp-130h]
  char v34[4]; // [esp+30h] [ebp-128h] BYREF
  float v35; // [esp+34h] [ebp-124h]
  float v36; // [esp+38h] [ebp-120h]
  char v37[4]; // [esp+3Ch] [ebp-11Ch] BYREF
  float v38; // [esp+40h] [ebp-118h]
  float v39; // [esp+44h] [ebp-114h]
  int v40; // [esp+48h] [ebp-110h]
  int v41; // [esp+4Ch] [ebp-10Ch]
  int v42; // [esp+50h] [ebp-108h]
  float v43[3]; // [esp+54h] [ebp-104h] BYREF
  int v44[20]; // [esp+60h] [ebp-F8h] BYREF
  int v45[42]; // [esp+B0h] [ebp-A8h] BYREF
  unsigned int retaddr; // [esp+15Ch] [ebp+4h]

  v45[41] = retaddr ^ dword_300705C0;
  result = *((_DWORD *)this + 51);
  if ( result != 7 && result != 14 )
    return Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MODEL, or ITEM_TYPE_MENUMODEL\n");
  v3 = *((_DWORD *)this + 149);
  if ( v3 && *((_DWORD *)this + 61) )
  {
    v4 = *this + 1.0;
    memset(v44, 0, sizeof(v44));
    *(float *)&v32 = v4;
    v23 = this[1] + 1.0;
    v44[9] = 1065353216;
    v5 = this[2];
    v44[10] = 0;
    v44[11] = 0;
    v44[12] = 0;
    v44[13] = 1065353216;
    v30 = v5 - 2.0;
    v44[14] = 0;
    v6 = this[3];
    v44[15] = 0;
    v44[16] = 0;
    v44[17] = 1065353216;
    v44[19] = 1;
    v28 = v6 - 2.0;
    *(float *)&v32 = *(float *)&v32 * *(float *)(dword_300F0F4C + 228);
    v24 = v23 * *(float *)(dword_300F0F4C + 224);
    v31 = v30 * *(float *)(dword_300F0F4C + 228);
    v29 = v28 * *(float *)(dword_300F0F4C + 224);
    v44[0] = (unsigned __int64)*(float *)&v32;
    v44[1] = (unsigned __int64)v24;
    v44[2] = (unsigned __int64)v31;
    v44[3] = (unsigned __int64)v29;
    (*(void (__cdecl **)(_DWORD, char *, char *))(dword_300F0F4C + 48))(*((_DWORD *)this + 61), v34, v37);
    *(float *)&v42 = (v39 + v36) * -0.5;
    *(float *)&v41 = (v38 + v35) * 0.5;
    v25 = (v39 - v36) * 0.5;
    *(float *)&v40 = v25 / 0.26800001;
    if ( *(float *)(v3 + 16) == 0.0 )
      *(float *)&v44[4] = v31;
    else
      v44[4] = *(_DWORD *)(v3 + 16);
    if ( *(float *)(v3 + 20) == 0.0 )
      *(float *)&v44[5] = v29;
    else
      v44[5] = *(_DWORD *)(v3 + 20);
    (*(void (**)(void))(dword_300F0F4C + 68))();
    v44[18] = *(_DWORD *)(dword_300F0F4C + 236);
    memset(v45, 0, 0x9Cu);
    v7 = *(_DWORD *)(v3 + 24);
    if ( v7 )
    {
      v8 = *(_DWORD *)(dword_300F0F4C + 236);
      if ( v8 > *((_DWORD *)this + 28) )
      {
        *((_DWORD *)this + 28) = v8 + v7;
        *(_DWORD *)v3 = (*(_DWORD *)v3 + 1) % 360;
      }
    }
    v9 = (double)*(int *)v3;
    LODWORD(v32) = 0;
    v33 = 0;
    v26 = v9;
    *((float *)&v32 + 1) = v26;
    sub_3003BEA0((float *)&v32, (float *)&v45[13], v43, (float *)&v45[7]);
    *(float *)&v45[10] = 0.0 - v43[0];
    *(float *)&v45[11] = 0.0 - v43[1];
    *(float *)&v45[12] = 0.0 - v43[2];
    v10 = *(_DWORD *)(v3 + 60);
    if ( v10 )
    {
      v19 = (float)(*(_DWORD *)(dword_300F0F4C + 236) - v10);
      v11 = v19 / 1000.0;
      v20 = (float)*(int *)(v3 + 44);
      *(float *)(v3 + 56) = v11 * v20 + *(float *)(v3 + 56);
    }
    if ( *(float *)(v3 + 56) > 1.0 )
    {
      v21 = *(float *)(v3 + 56);
      v32 = 0.4999999990686774;
      v27 = (int)(v21 - 0.4999999990686774);
      v12 = *(_DWORD *)(v3 + 32);
      v13 = *(_DWORD *)(v3 + 36);
      v14 = v27 + *(_DWORD *)(v3 + 48);
      *(_DWORD *)(v3 + 48) = v14;
      if ( v14 - v12 > v13 )
        *(_DWORD *)(v3 + 48) = v12 + v14 % v13;
      v15 = v27 + *(_DWORD *)(v3 + 52);
      *(_DWORD *)(v3 + 52) = v15;
      if ( v15 - v12 > v13 )
        *(_DWORD *)(v3 + 52) = v12 + v15 % v13;
      v22 = (float)v27;
      *(float *)(v3 + 56) = *(float *)(v3 + 56) - v22;
    }
    v16 = *(_DWORD *)(v3 + 48);
    v17 = dword_300F0F4C;
    *(_DWORD *)(v3 + 60) = *(_DWORD *)(dword_300F0F4C + 236);
    v45[20] = v16;
    v45[24] = *(_DWORD *)(v3 + 52);
    v18 = 1.0 - *(float *)(v3 + 56);
    v45[18] = v41;
    *(float *)&v45[25] = v18;
    v45[4] = v41;
    v45[22] = v41;
    v45[17] = v40;
    v45[19] = v42;
    v45[3] = v40;
    v45[5] = v42;
    v45[1] = 192;
    v45[21] = v40;
    v45[23] = v42;
    (*(void (__cdecl **)(int *))(v17 + 72))(v45);
    result = (*(int (__cdecl **)(int *))(dword_300F0F4C + 76))(v44);
  }
  return result;
}
// 300628EC: using guessed type float flt_300628EC;
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30049430) --------------------------------------------------------
int __usercall sub_30049430@<eax>(unsigned __int64 a1@<edx:eax>)
{
  int v1; // esi
  int v2; // edi
  int v3; // ebx
  double v4; // st7
  int v5; // ebp
  int v6; // eax
  double v7; // st7
  double v8; // st7
  int v9; // ebp
  int v10; // eax
  double v11; // st7
  int v12; // ebx
  int v13; // ebp
  int *v14; // ebx
  int v15; // eax
  int v16; // eax
  double v17; // st7
  float v19; // [esp+0h] [ebp-50h]
  float v20; // [esp+0h] [ebp-50h]
  float v21; // [esp+4h] [ebp-4Ch]
  float v22; // [esp+4h] [ebp-4Ch]
  float v23; // [esp+10h] [ebp-40h]
  float v24; // [esp+10h] [ebp-40h]
  float v25; // [esp+10h] [ebp-40h]
  float v26; // [esp+10h] [ebp-40h]
  float v27; // [esp+14h] [ebp-3Ch]
  float v28; // [esp+14h] [ebp-3Ch]
  float v29; // [esp+14h] [ebp-3Ch]
  float v30; // [esp+14h] [ebp-3Ch]
  float v31; // [esp+14h] [ebp-3Ch]
  float v32; // [esp+14h] [ebp-3Ch]
  float v33; // [esp+18h] [ebp-38h]
  float v34; // [esp+18h] [ebp-38h]
  float v35; // [esp+18h] [ebp-38h]
  float v36; // [esp+18h] [ebp-38h]
  float v37; // [esp+18h] [ebp-38h]
  float v38; // [esp+18h] [ebp-38h]
  float v39; // [esp+1Ch] [ebp-34h]
  float v40; // [esp+1Ch] [ebp-34h]
  float v41; // [esp+1Ch] [ebp-34h]
  float v42; // [esp+34h] [ebp-1Ch]
  float v43; // [esp+34h] [ebp-1Ch]
  float v44; // [esp+34h] [ebp-1Ch]
  float v45; // [esp+34h] [ebp-1Ch]
  float v46; // [esp+34h] [ebp-1Ch]
  float v47; // [esp+34h] [ebp-1Ch]
  float v48; // [esp+38h] [ebp-18h]
  float v49; // [esp+38h] [ebp-18h]
  float v50; // [esp+38h] [ebp-18h]
  float v51; // [esp+38h] [ebp-18h]
  float v52; // [esp+38h] [ebp-18h]
  float v53; // [esp+38h] [ebp-18h]
  float v54; // [esp+3Ch] [ebp-14h]
  float v55; // [esp+3Ch] [ebp-14h]
  float v56; // [esp+3Ch] [ebp-14h]
  float v57; // [esp+3Ch] [ebp-14h]
  float v58; // [esp+3Ch] [ebp-14h]
  float v59; // [esp+3Ch] [ebp-14h]
  int v60; // [esp+40h] [ebp-10h]
  int v61; // [esp+44h] [ebp-Ch] BYREF
  int v62; // [esp+48h] [ebp-8h]
  float v63; // [esp+4Ch] [ebp-4h]

  v1 = a1;
  if ( *(_DWORD *)(a1 + 204) == 6 )
  {
    v2 = *(_DWORD *)(a1 + 596);
    if ( v2 )
    {
      v3 = (*(int (__cdecl **)(_DWORD))(dword_300F0F4C + 140))(*(_DWORD *)(a1 + 588));
      v60 = v3;
      if ( (*(_DWORD *)(v1 + 72) & 0x400) == 0 )
      {
        v52 = *(float *)(v1 + 8) + *(float *)v1 - 16.0 - 1.0;
        v44 = *(float *)(v1 + 4) + 1.0;
        (*(void (__cdecl **)(float, _DWORD, int, int, _DWORD))(dword_300F0F4C + 8))(
          COERCE_FLOAT(LODWORD(v52)),
          LODWORD(v44),
          1098907648,
          1098907648,
          *(_DWORD *)(dword_300F0F4C + 123588));
        *(_DWORD *)(v2 + 4) = *(_DWORD *)v2;
        v45 = v44 + 15.0;
        v57 = *(float *)(v1 + 12) - 32.0;
        v40 = v57 + 1.0;
        (*(void (__cdecl **)(float, _DWORD, int, _DWORD, _DWORD))(dword_300F0F4C + 8))(
          COERCE_FLOAT(LODWORD(v52)),
          LODWORD(v45),
          1098907648,
          LODWORD(v40),
          *(_DWORD *)(dword_300F0F4C + 123604));
        v46 = v57 - 1.0 + v45;
        (*(void (__cdecl **)(float, _DWORD, int, int, _DWORD))(dword_300F0F4C + 8))(
          COERCE_FLOAT(LODWORD(v52)),
          LODWORD(v46),
          1098907648,
          1098907648,
          *(_DWORD *)(dword_300F0F4C + 123592));
        v62 = sub_300447A0(v1);
        v58 = (float)v62;
        v8 = v46 - 16.0 - 1.0;
        if ( v58 > v8 )
          v58 = v8;
        (*(void (__cdecl **)(float, float, int, int, _DWORD))(dword_300F0F4C + 8))(
          COERCE_FLOAT(LODWORD(v52)),
          COERCE_FLOAT(LODWORD(v58)),
          1098907648,
          1098907648,
          *(_DWORD *)(dword_300F0F4C + 123608));
        LODWORD(a1) = *(_DWORD *)(v2 + 24);
        v59 = *(float *)(v1 + 12) - 2.0;
        v53 = *(float *)v1 + 1.0;
        v47 = *(float *)(v1 + 4) + 1.0;
        if ( (_DWORD)a1 == 1 )
        {
          v9 = *(_DWORD *)v2;
          if ( *(_DWORD *)v2 >= v3 )
            return a1;
          while ( 1 )
          {
            v10 = (*(int (__cdecl **)(_DWORD, int))(dword_300F0F4C + 152))(*(_DWORD *)(v1 + 588), v9);
            if ( v10 )
            {
              v41 = *(float *)(v2 + 20) - 2.0;
              v36 = *(float *)(v2 + 16) - 2.0;
              v29 = v47 + 1.0;
              v24 = v53 + 1.0;
              (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int))(dword_300F0F4C + 8))(
                LODWORD(v24),
                LODWORD(v29),
                LODWORD(v36),
                LODWORD(v41),
                v10);
            }
            if ( v9 == *(_DWORD *)(v1 + 592) )
            {
              v37 = *(float *)(v2 + 20) - 1.0;
              v30 = *(float *)(v2 + 16) - 1.0;
              (*(void (__cdecl **)(float, float, _DWORD, _DWORD, _DWORD, int))(dword_300F0F4C + 56))(
                COERCE_FLOAT(LODWORD(v53)),
                COERCE_FLOAT(LODWORD(v47)),
                LODWORD(v30),
                LODWORD(v37),
                *(_DWORD *)(v1 + 68),
                v1 + 148);
            }
            v11 = v59 - *(float *)(v2 + 16);
            ++*(_DWORD *)(v2 + 4);
            v59 = v11;
            if ( v11 < *(float *)(v2 + 20) )
              break;
            LODWORD(a1) = v3;
            ++v9;
            v47 = v47 + *(float *)(v2 + 20);
            if ( v9 >= v3 )
              return a1;
          }
        }
        else
        {
          v12 = *(_DWORD *)v2;
          v62 = *(_DWORD *)v2;
          if ( v62 >= v60 )
            return a1;
          while ( 1 )
          {
            if ( *(int *)(v2 + 28) <= 0 )
            {
              v16 = (*(int (__cdecl **)(_DWORD, int, _DWORD, int *))(dword_300F0F4C + 144))(
                      *(_DWORD *)(v1 + 588),
                      v12,
                      0,
                      &v61);
              if ( v61 < 0 && v16 )
              {
                v22 = v47 + *(float *)(v2 + 20);
                v20 = v53 + 4.0;
                (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int, int, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 16))(
                  LODWORD(v20),
                  LODWORD(v22),
                  *(_DWORD *)(v1 + 212),
                  *(_DWORD *)(v1 + 228),
                  v1 + 116,
                  v16,
                  0,
                  0,
                  *(_DWORD *)(v1 + 232));
              }
            }
            else
            {
              v13 = 0;
              v14 = (int *)(v2 + 36);
              do
              {
                v15 = (*(int (__cdecl **)(_DWORD, int, int, int *))(dword_300F0F4C + 144))(
                        *(_DWORD *)(v1 + 588),
                        v62,
                        v13,
                        &v61);
                if ( v61 < 0 )
                {
                  if ( v15 )
                  {
                    v21 = *(float *)(v1 + 224) + *(float *)(v2 + 20) + v47;
                    v19 = (double)*(v14 - 1) + *(float *)(v1 + 220) + v53 + 4.0;
                    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int, int, _DWORD, int, _DWORD))(dword_300F0F4C + 16))(
                      LODWORD(v19),
                      LODWORD(v21),
                      *(_DWORD *)(v1 + 212),
                      *(_DWORD *)(v1 + 228),
                      v1 + 116,
                      v15,
                      0,
                      v14[1],
                      *(_DWORD *)(v1 + 232));
                  }
                }
                else
                {
                  v63 = (float)*v14;
                  v31 = v47 + 3.0;
                  v25 = (double)*(v14 - 1) + v53 + 2.0;
                  (*(void (__cdecl **)(_DWORD, _DWORD, float, float, int))(dword_300F0F4C + 8))(
                    LODWORD(v25),
                    LODWORD(v31),
                    COERCE_FLOAT(LODWORD(v63)),
                    COERCE_FLOAT(LODWORD(v63)),
                    v61);
                }
                ++v13;
                v14 += 3;
              }
              while ( v13 < *(_DWORD *)(v2 + 28) );
              v12 = v62;
            }
            if ( v12 == *(_DWORD *)(v1 + 592) )
            {
              v38 = *(float *)(v1 + 8) - 16.0 - 4.0;
              v32 = v47 + 2.0;
              v26 = v53 + 2.0;
              (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int))(dword_300F0F4C + 52))(
                LODWORD(v26),
                LODWORD(v32),
                LODWORD(v38),
                *(_DWORD *)(v2 + 20),
                v1 + 164);
            }
            v17 = v59 - *(float *)(v2 + 20);
            v59 = v17;
            if ( v17 < *(float *)(v2 + 20) )
              break;
            LODWORD(a1) = v60;
            ++v12;
            v47 = v47 + *(float *)(v2 + 20);
            ++*(_DWORD *)(v2 + 4);
            v62 = v12;
            if ( v12 >= v60 )
              return a1;
          }
        }
        a1 = (unsigned __int64)(*(float *)(v2 + 20) - v59);
        *(_DWORD *)(v2 + 8) = a1;
        return a1;
      }
      v48 = *(float *)v1 + 1.0;
      v42 = *(float *)(v1 + 12) + *(float *)(v1 + 4) - 16.0 - 1.0;
      (*(void (__cdecl **)(_DWORD, float, int, int, _DWORD))(dword_300F0F4C + 8))(
        LODWORD(v48),
        COERCE_FLOAT(LODWORD(v42)),
        1098907648,
        1098907648,
        *(_DWORD *)(dword_300F0F4C + 123596));
      v49 = v48 + 15.0;
      v54 = *(float *)(v1 + 8) - 32.0;
      v33 = v54 + 1.0;
      (*(void (__cdecl **)(_DWORD, float, _DWORD, int, _DWORD))(dword_300F0F4C + 8))(
        LODWORD(v49),
        COERCE_FLOAT(LODWORD(v42)),
        LODWORD(v33),
        1098907648,
        *(_DWORD *)(dword_300F0F4C + 123604));
      v50 = v54 - 1.0 + v49;
      (*(void (__cdecl **)(_DWORD, float, int, int, _DWORD))(dword_300F0F4C + 8))(
        LODWORD(v50),
        COERCE_FLOAT(LODWORD(v42)),
        1098907648,
        1098907648,
        *(_DWORD *)(dword_300F0F4C + 123600));
      v62 = sub_300447A0(v1);
      v55 = (float)v62;
      v4 = v50 - 16.0 - 1.0;
      if ( v55 > v4 )
        v55 = v4;
      (*(void (__cdecl **)(float, float, int, int, _DWORD))(dword_300F0F4C + 8))(
        COERCE_FLOAT(LODWORD(v55)),
        COERCE_FLOAT(LODWORD(v42)),
        1098907648,
        1098907648,
        *(_DWORD *)(dword_300F0F4C + 123608));
      v5 = *(_DWORD *)v2;
      LODWORD(a1) = *(_DWORD *)(v2 + 24);
      *(_DWORD *)(v2 + 4) = *(_DWORD *)v2;
      v56 = *(float *)(v1 + 8) - 2.0;
      if ( (_DWORD)a1 == 1 )
      {
        v51 = *(float *)v1 + 1.0;
        v43 = *(float *)(v1 + 4) + 1.0;
        if ( v5 < v3 )
        {
          while ( 1 )
          {
            v6 = (*(int (__cdecl **)(_DWORD, int))(dword_300F0F4C + 152))(*(_DWORD *)(v1 + 588), v5);
            if ( v6 )
            {
              v39 = *(float *)(v2 + 20) - 2.0;
              v34 = *(float *)(v2 + 16) - 2.0;
              v27 = v43 + 1.0;
              v23 = v51 + 1.0;
              (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, int))(dword_300F0F4C + 8))(
                LODWORD(v23),
                LODWORD(v27),
                LODWORD(v34),
                LODWORD(v39),
                v6);
            }
            if ( v5 == *(_DWORD *)(v1 + 592) )
            {
              v35 = *(float *)(v2 + 20) - 1.0;
              v28 = *(float *)(v2 + 16) - 1.0;
              (*(void (__cdecl **)(float, float, _DWORD, _DWORD, _DWORD, int))(dword_300F0F4C + 56))(
                COERCE_FLOAT(LODWORD(v51)),
                COERCE_FLOAT(LODWORD(v43)),
                LODWORD(v28),
                LODWORD(v35),
                *(_DWORD *)(v1 + 68),
                v1 + 148);
            }
            v7 = v56 - *(float *)(v2 + 16);
            v56 = v7;
            if ( v7 < *(float *)(v2 + 16) )
              break;
            LODWORD(a1) = v3;
            ++v5;
            v51 = v51 + *(float *)(v2 + 16);
            ++*(_DWORD *)(v2 + 4);
            if ( v5 >= v3 )
              return a1;
          }
          a1 = (unsigned __int64)v56;
          *(_DWORD *)(v2 + 8) = a1;
        }
      }
    }
  }
  else
  {
    LODWORD(a1) = Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
  }
  return a1;
}
// 3004993F: conditional instruction was optimized away because of 'eax.4>=1'
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30049B40) --------------------------------------------------------
void __usercall sub_30049B40(float *a1@<esi>)
{
  int v1; // ecx
  int v2; // ebx
  int v3; // eax
  double v4; // st7
  unsigned int v5; // eax
  double v6; // st7
  float v7; // edx
  int v8; // eax
  int v9; // edi
  int v10; // ecx
  float *v11; // edx
  int *v12; // edx
  int v13; // ecx
  int v14; // eax
  float v15; // ecx
  int v16; // ecx
  int v17; // eax
  long double v18; // st7
  int v19; // ecx
  int *v20; // ebx
  double v21; // st7
  float v22; // [esp+0h] [ebp-68h]
  float v23; // [esp+2Ch] [ebp-3Ch]
  float v24; // [esp+3Ch] [ebp-2Ch]
  float v25; // [esp+3Ch] [ebp-2Ch]
  float v26; // [esp+40h] [ebp-28h]
  float v27; // [esp+44h] [ebp-24h]
  int v28; // [esp+48h] [ebp-20h] BYREF
  int v29; // [esp+4Ch] [ebp-1Ch]
  int v30; // [esp+50h] [ebp-18h]
  float v31; // [esp+54h] [ebp-14h]
  float v32; // [esp+58h] [ebp-10h] BYREF
  float v33; // [esp+5Ch] [ebp-Ch]
  float v34; // [esp+60h] [ebp-8h]
  float v35; // [esp+64h] [ebp-4h]

  if ( !a1 )
    return;
  v1 = dword_300F0F4C;
  if ( !*(_DWORD *)(dword_300F0F4C + 84) )
    return;
  v2 = *((_DWORD *)a1 + 60);
  v27 = *(float *)(v2 + 216);
  v24 = *(float *)(v2 + 208);
  v26 = *(float *)(v2 + 212);
  if ( ((_BYTE)a1[18] & 0x60) != 0 )
  {
    v3 = *(_DWORD *)(dword_300F0F4C + 236);
    if ( v3 > *((_DWORD *)a1 + 28) )
    {
      *((_DWORD *)a1 + 28) = v3 + *(_DWORD *)(v2 + 204);
      if ( ((_BYTE)a1[18] & 0x20) != 0 )
      {
        v4 = a1[32] - v26;
        a1[32] = v4;
        if ( v4 <= 0.0 )
        {
          v5 = (_DWORD)a1[18] & 0xFFFFFFDB;
LABEL_10:
          *((_DWORD *)a1 + 18) = v5;
          goto LABEL_11;
        }
      }
      else
      {
        v6 = v27 + a1[32];
        a1[32] = v6;
        if ( v6 >= v24 )
        {
          a1[32] = v24;
          v5 = (_DWORD)a1[18] & 0xFFFFFFBF;
          goto LABEL_10;
        }
      }
    }
  }
LABEL_11:
  v28 = *((_DWORD *)a1 + 29);
  v29 = *((_DWORD *)a1 + 30);
  v7 = a1[32];
  v30 = *((_DWORD *)a1 + 31);
  v8 = *((_DWORD *)a1 + 75);
  v31 = v7;
  if ( v8 > 0 )
  {
    if ( *(_DWORD *)(v1 + 88) )
    {
      v25 = ((double (__cdecl *)(_DWORD, _DWORD))*(_DWORD *)(v1 + 88))(*((_DWORD *)a1 + 15), *((_DWORD *)a1 + 146));
      v9 = *((_DWORD *)a1 + 75);
      v10 = 0;
      if ( v9 > 0 )
      {
        v11 = a1 + 82;
        while ( v25 < (double)*(v11 - 1) || v25 > (double)*v11 )
        {
          ++v10;
          v11 += 7;
          if ( v10 >= v9 )
            goto LABEL_20;
        }
        v12 = (int *)&a1[7 * v10 + 76];
        v13 = LODWORD(a1[7 * v10 + 77]);
        v28 = *v12;
        v14 = v12[2];
        v29 = v13;
        v15 = *((float *)v12 + 3);
        v30 = v14;
        v31 = v15;
      }
    }
  }
LABEL_20:
  if ( ((_DWORD)a1[18] & 0x1000000) == 0 )
    v31 = ((double (__cdecl *)(const char *))*(_DWORD *)(dword_300F0F4C + 108))("cg_hudAlpha") * v31;
  if ( ((_BYTE)a1[18] & 2) != 0 )
  {
    v16 = *(_DWORD *)(dword_300F0F4C + 236);
    v32 = *(float *)(v2 + 1260) * 0.80000001;
    v33 = *(float *)(v2 + 1264) * 0.80000001;
    v34 = *(float *)(v2 + 1268) * 0.80000001;
    v17 = v2 + 1260;
    v35 = *(float *)(v2 + 1272) * 0.80000001;
    v18 = (double)(v16 / 75);
  }
  else
  {
    if ( *((_DWORD *)a1 + 58) != 1 )
      goto LABEL_28;
    v19 = *(_DWORD *)(dword_300F0F4C + 236);
    if ( ((v19 / 256) & 1) != 0 )
      goto LABEL_28;
    v32 = a1[29] * 0.80000001;
    v33 = a1[30] * 0.80000001;
    v34 = a1[31] * 0.80000001;
    v17 = (int)(a1 + 29);
    v35 = a1[32] * 0.80000001;
    v18 = (double)(v19 / 75);
  }
  v23 = (sin(v18) + 1.0) * 0.5;
  sub_30041BB0(v17, (int)&v32, (float *)&v28, v23);
LABEL_28:
  if ( ((_BYTE)a1[73] & 3) != 0 && !sub_30044280(1) )
  {
    v20 = (int *)(v2 + 1276);
    v28 = *v20;
    v29 = v20[1];
    v30 = v20[2];
    v31 = *((float *)v20 + 3);
  }
  if ( *((_DWORD *)a1 + 59) )
  {
    sub_30047C50(a1);
    v21 = a1[48] + a1[46];
    if ( **((_BYTE **)a1 + 59) )
      v22 = v21 + 8.0;
    else
      v22 = v21;
    (*(void (__cdecl **)(float, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, int *, _DWORD, _DWORD))(dword_300F0F4C + 84))(
      COERCE_FLOAT(LODWORD(v22)),
      *((_DWORD *)a1 + 1),
      *((_DWORD *)a1 + 2),
      *((_DWORD *)a1 + 3),
      0,
      *((_DWORD *)a1 + 56),
      *((_DWORD *)a1 + 15),
      *((_DWORD *)a1 + 16),
      *((_DWORD *)a1 + 52),
      *((_DWORD *)a1 + 147),
      *((_DWORD *)a1 + 53),
      *((_DWORD *)a1 + 57),
      &v28,
      *((_DWORD *)a1 + 45),
      *((_DWORD *)a1 + 58));
  }
  else
  {
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, int *, _DWORD, _DWORD))(dword_300F0F4C + 84))(
      *(_DWORD *)a1,
      *((_DWORD *)a1 + 1),
      *((_DWORD *)a1 + 2),
      *((_DWORD *)a1 + 3),
      *((_DWORD *)a1 + 55),
      *((_DWORD *)a1 + 56),
      *((_DWORD *)a1 + 15),
      *((_DWORD *)a1 + 16),
      *((_DWORD *)a1 + 52),
      *((_DWORD *)a1 + 147),
      *((_DWORD *)a1 + 53),
      *((_DWORD *)a1 + 57),
      &v28,
      *((_DWORD *)a1 + 45),
      *((_DWORD *)a1 + 58));
  }
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (30049F80) --------------------------------------------------------
int __thiscall sub_30049F80(int this)
{
  int v1; // ebp
  void (__cdecl *v3)(_DWORD); // eax
  int v4; // edx
  int v5; // eax
  double v6; // st7
  int v7; // eax
  bool v8; // c3
  int v9; // edi
  double v10; // st7
  double v11; // st7
  double v12; // st7
  double v13; // st7
  double v14; // st7
  double v15; // st7
  double v16; // st7
  double v17; // st7
  int (__cdecl *v18)(_DWORD); // eax
  int v19; // eax
  bool v20; // zf
  int v21; // eax
  unsigned int v22; // eax
  unsigned __int64 v23; // rax
  int *v24; // eax
  float v26; // [esp+0h] [ebp-44Ch]
  float v27; // [esp+10h] [ebp-43Ch] BYREF
  float v28; // [esp+14h] [ebp-438h] BYREF
  float v29; // [esp+18h] [ebp-434h]
  float v30; // [esp+1Ch] [ebp-430h]
  float v31; // [esp+20h] [ebp-42Ch]
  float v32; // [esp+24h] [ebp-428h]
  float *v33; // [esp+28h] [ebp-424h]
  int v34; // [esp+2Ch] [ebp-420h]
  float *v35; // [esp+30h] [ebp-41Ch]
  int v36; // [esp+34h] [ebp-418h]
  int v37[4]; // [esp+38h] [ebp-414h] BYREF
  char v38[1024]; // [esp+48h] [ebp-404h] BYREF
  unsigned int v39; // [esp+448h] [ebp-4h]
  unsigned int retaddr; // [esp+44Ch] [ebp+0h]

  v1 = dword_300F0F4C;
  v39 = retaddr ^ dword_300705C0;
  v34 = *(_DWORD *)(this + 240);
  v3 = *(void (__cdecl **)(_DWORD))(dword_300F0F4C + 40);
  if ( v3 )
  {
    v3(*(_DWORD *)(this + 212));
    v1 = dword_300F0F4C;
  }
  if ( (*(_DWORD *)(this + 72) & 0x10000) != 0 )
  {
    v4 = *(_DWORD *)(v1 + 236);
    if ( v4 > *(_DWORD *)(this + 112) )
    {
      v5 = v4 + *(_DWORD *)(this + 108);
      v32 = *(float *)(this + 24) * 0.5;
      v6 = *(float *)(this + 28);
      *(_DWORD *)(this + 112) = v5;
      v36 = 1029076816;
      v33 = &v27;
      v35 = &v28;
      v29 = v6 * 0.5;
      v30 = v32 + *(float *)(this + 16) - *(float *)(this + 76);
      v31 = v29 + *(float *)(this + 20) - *(float *)(this + 80);
      v27 = cos(0.052359879);
      v28 = sin(0.052359879);
      *(float *)(this + 16) = v27 * v30 - v28 * v31 + *(float *)(this + 76) - v32;
      *(float *)(this + 20) = v27 * v31 + v28 * v30 + *(float *)(this + 80) - v29;
      sub_30042A00(this);
    }
  }
  if ( (*(_DWORD *)(this + 72) & 0x100) != 0 )
  {
    v7 = *(_DWORD *)(v1 + 236);
    if ( v7 > *(_DWORD *)(this + 112) )
    {
      v8 = *(float *)(this + 16) == *(float *)(this + 76);
      v9 = 0;
      *(_DWORD *)(this + 112) = v7 + *(_DWORD *)(this + 108);
      if ( !v8 )
      {
        if ( *(float *)(this + 16) >= (double)*(float *)(this + 76) )
        {
          v11 = *(float *)(this + 16) - *(float *)(this + 92);
          *(float *)(this + 16) = v11;
          if ( v11 >= *(float *)(this + 76) )
            goto LABEL_15;
          *(_DWORD *)(this + 16) = *(_DWORD *)(this + 76);
        }
        else
        {
          v10 = *(float *)(this + 92) + *(float *)(this + 16);
          *(float *)(this + 16) = v10;
          if ( v10 <= *(float *)(this + 76) )
            goto LABEL_15;
          *(_DWORD *)(this + 16) = *(_DWORD *)(this + 76);
        }
      }
      v9 = 1;
LABEL_15:
      if ( *(float *)(this + 20) != *(float *)(this + 80) )
      {
        if ( *(float *)(this + 20) >= (double)*(float *)(this + 80) )
        {
          v13 = *(float *)(this + 20) - *(float *)(this + 96);
          *(float *)(this + 20) = v13;
          if ( v13 >= *(float *)(this + 80) )
            goto LABEL_22;
          *(_DWORD *)(this + 20) = *(_DWORD *)(this + 80);
        }
        else
        {
          v12 = *(float *)(this + 96) + *(float *)(this + 20);
          *(float *)(this + 20) = v12;
          if ( v12 <= *(float *)(this + 80) )
            goto LABEL_22;
          *(_DWORD *)(this + 20) = *(_DWORD *)(this + 80);
        }
      }
      ++v9;
LABEL_22:
      if ( *(float *)(this + 24) != *(float *)(this + 84) )
      {
        if ( *(float *)(this + 24) >= (double)*(float *)(this + 84) )
        {
          v15 = *(float *)(this + 24) - *(float *)(this + 100);
          *(float *)(this + 24) = v15;
          if ( v15 >= *(float *)(this + 84) )
            goto LABEL_29;
          *(_DWORD *)(this + 24) = *(_DWORD *)(this + 84);
        }
        else
        {
          v14 = *(float *)(this + 100) + *(float *)(this + 24);
          *(float *)(this + 24) = v14;
          if ( v14 <= *(float *)(this + 84) )
            goto LABEL_29;
          *(_DWORD *)(this + 24) = *(_DWORD *)(this + 84);
        }
      }
      ++v9;
LABEL_29:
      if ( *(float *)(this + 28) != *(float *)(this + 88) )
      {
        if ( *(float *)(this + 28) >= (double)*(float *)(this + 88) )
        {
          v17 = *(float *)(this + 28) - *(float *)(this + 104);
          *(float *)(this + 28) = v17;
          if ( v17 >= *(float *)(this + 88) )
            goto LABEL_36;
          *(_DWORD *)(this + 28) = *(_DWORD *)(this + 88);
        }
        else
        {
          v16 = *(float *)(this + 104) + *(float *)(this + 28);
          *(float *)(this + 28) = v16;
          if ( v16 <= *(float *)(this + 88) )
            goto LABEL_36;
          *(_DWORD *)(this + 28) = *(_DWORD *)(this + 88);
        }
      }
      ++v9;
LABEL_36:
      sub_30042A00(this);
      if ( v9 == 4 )
        *(_DWORD *)(this + 72) &= 0xFFFFFEFF;
      goto LABEL_38;
    }
  }
LABEL_38:
  if ( *(_DWORD *)(this + 64) )
  {
    v18 = *(int (__cdecl **)(_DWORD))(v1 + 92);
    if ( v18 )
    {
      v19 = v18(*(_DWORD *)(this + 64));
      v1 = dword_300F0F4C;
      v20 = v19 == 0;
      v21 = *(_DWORD *)(this + 72);
      if ( v20 )
        v22 = v21 & 0xFFFFFFFB;
      else
        v22 = v21 | 4;
      *(_DWORD *)(this + 72) = v22;
    }
  }
  if ( (*(_BYTE *)(this + 292) & 0xC) != 0 )
  {
    if ( !sub_30044280(4) )
      return sub_30052A2E(retaddr ^ v39);
    v1 = dword_300F0F4C;
  }
  if ( (*(_BYTE *)(this + 72) & 4) != 0 )
  {
    if ( *(_DWORD *)(this + 52) == 6 )
    {
      (*(void (__cdecl **)(_DWORD, char *, int))(v1 + 104))(*(_DWORD *)(this + 280), v38, 1024);
      *(_DWORD *)(this + 180) = (*(int (__cdecl **)(char *, _DWORD))dword_300F0F4C)(v38, *(_DWORD *)(this + 600));
    }
    v26 = (float)*(int *)(v34 + 204);
    sub_30042540((_DWORD *)this, *(float *)(v34 + 212), *(float *)(v34 + 216), *(float *)(v34 + 208), v26);
    if ( dword_300F0F68 )
    {
      v24 = sub_30046C70(this);
      v37[3] = 1065353216;
      v37[1] = 1065353216;
      v37[2] = 0;
      v37[0] = 0;
      (*(void (__cdecl **)(int, int, int, int, int, int *))(dword_300F0F4C + 56))(
        *v24,
        v24[1],
        v24[2],
        v24[3],
        1065353216,
        v37);
    }
    if ( *(_DWORD *)(this + 52) != 6 )
    {
      switch ( *(_DWORD *)(this + 200) )
      {
        case 0:
        case 1:
          sub_30047C50((_DWORD *)this);
          break;
        case 4:
        case 9:
        case 0xF:
        case 0x10:
          sub_30047D90(this);
          break;
        case 6:
          LODWORD(v23) = this;
          sub_30049430(v23);
          break;
        case 7:
        case 0xE:
          sub_30048FA0((float *)this);
          break;
        case 8:
          sub_30049B40((float *)this);
          break;
        case 0xA:
          sub_300489C0(this);
          break;
        case 0xB:
          sub_300480F0(this);
          break;
        case 0xC:
          sub_300482A0(this);
          break;
        case 0xD:
          sub_30048B50(this);
          break;
        default:
          return sub_30052A2E(retaddr ^ v39);
      }
    }
  }
  return sub_30052A2E(retaddr ^ v39);
}
// 3004A34F: variable 'v23' is possibly undefined
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F68: using guessed type int dword_300F0F68;

//----- (3004A3E0) --------------------------------------------------------
int __usercall sub_3004A3E0@<eax>(_DWORD *a1@<edx>, int a2)
{
  _DWORD *v2; // eax
  int result; // eax

  memset(a1, 0, 0x70Cu);
  v2 = (_DWORD *)dword_300F0F4C;
  a1[50] = -1;
  a1[53] = v2[30914];
  a1[54] = v2[30915];
  a1[52] = v2[30912];
  a1[51] = v2[30913];
  a1[314] = a2;
  memset(a1, 0, 0xB8u);
  result = 1065353216;
  a1[17] = 1065353216;
  a1[32] = 1065353216;
  a1[31] = 1065353216;
  a1[30] = 1065353216;
  a1[29] = 1065353216;
  a1[12] = -1;
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (3004A4A0) --------------------------------------------------------
int sub_3004A4A0()
{
  int v0; // ecx
  int v1; // eax

  v0 = dword_300F0F64 - 1;
  if ( dword_300F0F64 - 1 < 0 )
    return 0;
  while ( 1 )
  {
    v1 = *(_DWORD *)(*(&dword_305643C0 + v0) + 72);
    if ( (v1 & 2) != 0 && (v1 & 4) != 0 )
      break;
    if ( --v0 < 0 )
      return 0;
  }
  return *(&dword_305643C0 + v0);
}
// 300F0F64: using guessed type int dword_300F0F64;

//----- (3004A690) --------------------------------------------------------
int __cdecl sub_3004A690(int a1, int a2, float a3)
{
  int v3; // edi
  int v4; // eax
  int v5; // edi
  _DWORD *v6; // esi
  char v7; // dl
  int v8; // eax
  _DWORD *v10; // [esp+Ch] [ebp-10h]
  int i; // [esp+10h] [ebp-Ch]
  int v12; // [esp+14h] [ebp-8h]
  int v13; // [esp+18h] [ebp-4h]

  v3 = a1;
  v12 = 0;
  v10 = 0;
  if ( !a1 || (*(_DWORD *)(a1 + 72) & 0x100004) == 0 || dword_300F0F48 || dword_300F0F50 || dword_300F0F54 )
    return 0;
  for ( i = 0; i < 2; ++i )
  {
    v4 = *(_DWORD *)(v3 + 192) - 1;
    if ( v4 >= 0 )
    {
      v5 = v3 + 4 * v4 + 1292;
      v13 = v4 + 1;
      do
      {
        if ( (*(_DWORD *)(*(_DWORD *)v5 + 72) & 0x100004) != 0
          && ((*(_BYTE *)(*(_DWORD *)v5 + 292) & 3) == 0 || sub_30044280(1))
          && ((*(_BYTE *)(*(_DWORD *)v5 + 292) & 0xC) == 0 || sub_30044280(4)) )
        {
          v6 = *(_DWORD **)v5;
          if ( (*(_DWORD *)(*(_DWORD *)v5 + 72) & 2) != 0 && !v10 )
            v10 = *(_DWORD **)v5;
          if ( sub_30042BB0(*(float *)&a2, a3) )
          {
            if ( i == 1 )
            {
              if ( v6[50] || !v6[59] || (sub_30046C70((int)v6), sub_30042BB0(*(float *)&a2, a3)) )
              {
                v8 = v6[18];
                if ( (v8 & 4) != 0 && (v8 & 0x20) == 0 )
                {
                  sub_30044D30((int)v6, *(float *)&a2, a3);
                  if ( !v12 )
                  {
                    v12 = sub_300443D0((int)v6, *(float *)&a2, a3);
                    if ( v12 )
                      v10 = v6;
                  }
                }
              }
            }
          }
          else if ( (v7 & 1) != 0 )
          {
            sub_30044E60((int)v6);
            if ( *(_DWORD *)v5 )
              *(_DWORD *)(*(_DWORD *)v5 + 72) &= 0xFFFFFFFE;
          }
        }
        v5 -= 4;
        --v13;
      }
      while ( v13 );
      v3 = a1;
    }
  }
  if ( !v12 )
  {
    if ( v10 )
    {
      if ( !sub_30042BB0(*(float *)&a2, a3) )
        sub_30042B30(v3);
    }
    return 0;
  }
  return 1;
}
// 3004A7E4: variable 'v7' is possibly undefined
// 300F0F48: using guessed type int dword_300F0F48;
// 300F0F50: using guessed type int dword_300F0F50;
// 300F0F54: using guessed type int dword_300F0F54;

//----- (3004A990) --------------------------------------------------------
char *__usercall sub_3004A990@<eax>(_DWORD *a1@<eax>, int a2@<ecx>, int a3)
{
  char *result; // eax
  char *v5; // esi
  char *v6; // edi
  char *v7; // edi

  if ( a1[149] )
  {
    result = (char *)a1[51];
    v5 = (char *)a1[50];
    if ( result != v5 )
      result = (char *)sub_30041B20(
                         a3,
                         "Attempting to change type from %d to %d.\n"
                         "Move the type definition higher up in the itemDef.\n",
                         result,
                         v5);
  }
  else
  {
    result = (char *)a1[50];
    a1[51] = result;
    if ( result == (char *)6 )
    {
      v6 = sub_300417D0(a2, 232);
      a1[149] = v6;
      result = 0;
      memset(v6, 0, 0xE8u);
    }
    else if ( result == (char *)4
           || result == (char *)9
           || result == (char *)15
           || result == (char *)11
           || result == (char *)13
           || result == (char *)10
           || !result
           || result == (char *)16 )
    {
      v7 = sub_300417D0(a2, 32);
      a1[149] = v7;
      memset(v7, 0, 0x20u);
      result = (char *)a1[50];
      if ( result == (char *)4 || result == (char *)9 || result == (char *)15 || result == (char *)16 )
      {
        result = (char *)sub_300445C0(a1);
        if ( !*((_DWORD *)result + 6) )
          *((_DWORD *)result + 6) = 256;
      }
    }
    else if ( result == (char *)12 )
    {
      result = sub_300417D0(a2, 392);
      a1[149] = result;
    }
    else if ( result == (char *)7 || result == (char *)14 )
    {
      result = sub_300417D0(a2, 64);
      a1[149] = result;
    }
  }
  return result;
}

//----- (3004AAA0) --------------------------------------------------------
int __usercall sub_3004AAA0@<eax>(char *a1@<esi>)
{
  char v1; // al
  int v2; // edx
  int v3; // ecx

  v1 = *a1;
  v2 = 0;
  if ( *a1 )
  {
    v3 = 119;
    do
    {
      if ( v1 < 65 || v1 > 90 )
        v2 += v1 * v3;
      else
        v2 += v3 * (v1 + 32);
      v1 = a1[v3++ - 118];
    }
    while ( v1 );
  }
  return ((unsigned __int16)v2 ^ (unsigned __int16)((v2 ^ (v2 >> 10)) >> 10)) & 0x1FF;
}

//----- (3004AB50) --------------------------------------------------------
BOOL __cdecl sub_3004AB50(int a1)
{
  return sub_300420D0((char **)(a1 + 32)) != 0;
}

//----- (3004AB70) --------------------------------------------------------
int __cdecl sub_3004AB70(int a1)
{
  char *v1; // ecx
  int result; // eax
  char *v3; // [esp+0h] [ebp-4h] BYREF

  v3 = v1;
  result = sub_300420D0(&v3);
  if ( result )
  {
    *(_DWORD *)(a1 + 296) = (*(int (__cdecl **)(char *))(dword_300F0F4C + 204))(v3);
    result = 1;
  }
  return result;
}
// 3004AB70: variable 'v1' is possibly undefined
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (3004ABB0) --------------------------------------------------------
BOOL __cdecl sub_3004ABB0(int a1)
{
  return sub_300420D0((char **)(a1 + 236)) != 0;
}

//----- (3004ABD0) --------------------------------------------------------
int __cdecl sub_3004ABD0(int a1)
{
  char *v2; // eax
  char v3[1024]; // [esp+10h] [ebp-404h] BYREF
  unsigned int v4; // [esp+410h] [ebp-4h]
  unsigned int retaddr; // [esp+414h] [ebp+0h]

  v4 = retaddr ^ dword_300705C0;
  if ( dword_30076898(98) )
  {
    v2 = (char *)(*(int (__cdecl **)(char *))(dword_300F0F4C + 148))(v3);
    *(_DWORD *)(a1 + 236) = sub_30041880(v2);
  }
  return sub_30052A2E(retaddr ^ v4);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (3004AC70) --------------------------------------------------------
BOOL __cdecl sub_3004AC70(int a1)
{
  return sub_300420D0((char **)(a1 + 40)) != 0;
}

//----- (3004AC90) --------------------------------------------------------
int __cdecl sub_3004AC90(_DWORD *a1, int a2)
{
  int v2; // ecx
  int result; // eax
  char *v4; // [esp+Ch] [ebp-4h] BYREF

  sub_3004A990(a1, v2, a2);
  result = sub_300420D0(&v4);
  if ( result )
  {
    if ( !a1[61] )
      a1[61] = (*(int (__cdecl **)(char *, _DWORD))(dword_300F0F4C + 44))(v4, a1[150]);
    result = 1;
  }
  return result;
}
// 3004AC9F: variable 'v2' is possibly undefined
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (3004ACF0) --------------------------------------------------------
int __cdecl sub_3004ACF0(int a1)
{
  char *v1; // ecx
  int result; // eax
  char *v3; // [esp+0h] [ebp-4h] BYREF

  v3 = v1;
  result = sub_300420D0(&v3);
  if ( result )
  {
    *(_DWORD *)(a1 + 244) = (*(int (__cdecl **)(char *, _DWORD))dword_300F0F4C)(v3, *(_DWORD *)(a1 + 600));
    result = 1;
  }
  return result;
}
// 3004ACF0: variable 'v1' is possibly undefined
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (3004AD30) --------------------------------------------------------
BOOL __cdecl sub_3004AD30(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // eax
  BOOL result; // eax
  float *v5; // esi

  sub_3004A990(a1, v2, a2);
  v3 = a1[51];
  if ( v3 == 7 || v3 == 14 )
  {
    v5 = (float *)a1[149];
    if ( v5 )
      result = sub_30041C80(v5 + 1, a2) && sub_30041C80(v5 + 2, a2) && sub_30041C80(v5 + 3, a2);
    else
      result = 0;
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MODEL, or ITEM_TYPE_MENUMODEL\n");
    result = 0;
  }
  return result;
}
// 3004AD3D: variable 'v2' is possibly undefined

//----- (3004ADB0) --------------------------------------------------------
BOOL __cdecl sub_3004ADB0(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // eax
  BOOL result; // eax
  int v5; // esi

  sub_3004A990(a1, v2, a2);
  v3 = a1[51];
  if ( v3 == 7 || v3 == 14 )
  {
    v5 = a1[149];
    if ( v5 )
      result = sub_30041C80((float *)(v5 + 16), a2) != 0;
    else
      result = 0;
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MODEL, or ITEM_TYPE_MENUMODEL\n");
    result = 0;
  }
  return result;
}
// 3004ADBD: variable 'v2' is possibly undefined

//----- (3004AE10) --------------------------------------------------------
BOOL __cdecl sub_3004AE10(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // eax
  BOOL result; // eax
  int v5; // esi

  sub_3004A990(a1, v2, a2);
  v3 = a1[51];
  if ( v3 == 7 || v3 == 14 )
  {
    v5 = a1[149];
    if ( v5 )
      result = sub_30041C80((float *)(v5 + 20), a2) != 0;
    else
      result = 0;
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MODEL, or ITEM_TYPE_MENUMODEL\n");
    result = 0;
  }
  return result;
}
// 3004AE1D: variable 'v2' is possibly undefined

//----- (3004AE70) --------------------------------------------------------
BOOL __cdecl sub_3004AE70(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // eax
  BOOL result; // eax
  int v5; // esi

  sub_3004A990(a1, v2, a2);
  v3 = a1[51];
  if ( v3 == 7 || v3 == 14 )
  {
    v5 = a1[149];
    if ( v5 )
      result = sub_30041E70((_DWORD *)(v5 + 24), a2) != 0;
    else
      result = 0;
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MODEL, or ITEM_TYPE_MENUMODEL\n");
    result = 0;
  }
  return result;
}
// 3004AE7D: variable 'v2' is possibly undefined

//----- (3004AED0) --------------------------------------------------------
BOOL __cdecl sub_3004AED0(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // eax
  BOOL result; // eax
  _DWORD *v5; // esi

  sub_3004A990(a1, v2, a2);
  v3 = a1[51];
  if ( v3 == 7 || v3 == 14 )
  {
    v5 = (_DWORD *)a1[149];
    if ( v5 )
      result = sub_30041E70(v5, a2) != 0;
    else
      result = 0;
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MODEL, or ITEM_TYPE_MENUMODEL\n");
    result = 0;
  }
  return result;
}
// 3004AEDD: variable 'v2' is possibly undefined

//----- (3004AF30) --------------------------------------------------------
int __cdecl sub_3004AF30(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // eax
  int result; // eax
  _DWORD *v5; // esi
  _DWORD *v6; // ebp
  int v7; // edx
  int v8; // ecx

  sub_3004A990(a1, v2, a2);
  v3 = a1[51];
  if ( v3 == 7 || v3 == 14 )
  {
    v5 = (_DWORD *)a1[149];
    if ( v5 )
    {
      v6 = v5 + 8;
      v5[7] = 1;
      if ( sub_30041E70(v5 + 8, a2)
        && sub_30041E70(v5 + 9, a2)
        && sub_30041E70(v5 + 10, a2)
        && sub_30041E70(v5 + 11, a2) )
      {
        v7 = dword_300F0F4C;
        v8 = *v6 + 1;
        v5[13] = *v6;
        v5[12] = v8;
        v5[14] = 0;
        v5[15] = *(_DWORD *)(v7 + 236);
        result = 1;
      }
      else
      {
        result = 0;
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MODEL, or ITEM_TYPE_MENUMODEL\n");
    result = 0;
  }
  return result;
}
// 3004AF3D: variable 'v2' is possibly undefined
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (3004AFF0) --------------------------------------------------------
BOOL __cdecl sub_3004AFF0(float *a1, int a2)
{
  return sub_30041C80(a1 + 4, a2) && sub_30041C80(a1 + 5, a2) && sub_30041C80(a1 + 6, a2) && sub_30041C80(a1 + 7, a2);
}

//----- (3004B040) --------------------------------------------------------
int __cdecl sub_3004B040(int a1, int a2)
{
  int v3; // [esp+8h] [ebp-8h] BYREF
  int v4; // [esp+Ch] [ebp-4h] BYREF

  if ( !sub_30041E70(&v3, a2) || !sub_30041E70(&v4, a2) )
    return 0;
  *(float *)(a1 + 16) = (double)v3 + *(float *)(a1 + 16);
  *(float *)(a1 + 20) = (double)v4 + *(float *)(a1 + 20);
  return 1;
}

//----- (3004B090) --------------------------------------------------------
BOOL __cdecl sub_3004B090(int a1, int a2)
{
  return sub_30041E70((_DWORD *)(a1 + 52), a2) != 0;
}

//----- (3004B0B0) --------------------------------------------------------
int __cdecl sub_3004B0B0(int a1)
{
  *(_DWORD *)(a1 + 72) |= 0x10u;
  return 1;
}

//----- (3004B0C0) --------------------------------------------------------
int __cdecl sub_3004B0C0(_DWORD *a1, int a2)
{
  int v2; // ecx
  int result; // eax

  sub_3004A990(a1, v2, a2);
  if ( a1[51] == 6 )
  {
    result = a1[149];
    if ( result )
    {
      if ( a1[50] == 6 )
        *(_DWORD *)(result + 228) = 1;
      result = 1;
    }
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
    result = 0;
  }
  return result;
}
// 3004B0CC: variable 'v2' is possibly undefined

//----- (3004B120) --------------------------------------------------------
int __cdecl sub_3004B120(int a1)
{
  *(_DWORD *)(a1 + 72) |= 0x40000u;
  return 1;
}

//----- (3004B140) --------------------------------------------------------
int __cdecl sub_3004B140(int a1)
{
  *(_DWORD *)(a1 + 72) |= 0x80000u;
  return 1;
}

//----- (3004B160) --------------------------------------------------------
int __cdecl sub_3004B160(int a1)
{
  *(_DWORD *)(a1 + 72) |= 0x400u;
  return 1;
}

//----- (3004B180) --------------------------------------------------------
int __cdecl sub_3004B180(_DWORD *a1, int a2)
{
  int result; // eax
  int v3; // ecx

  result = sub_30041E70(a1 + 50, a2);
  if ( result )
  {
    sub_3004A990(a1, v3, a2);
    result = 1;
  }
  return result;
}
// 3004B1A1: variable 'v3' is possibly undefined

//----- (3004B1C0) --------------------------------------------------------
BOOL __cdecl sub_3004B1C0(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // esi
  BOOL result; // eax

  sub_3004A990(a1, v2, a2);
  if ( a1[51] == 6 )
  {
    v3 = a1[149];
    if ( v3 )
      result = sub_30041C80((float *)(v3 + 16), a2) != 0;
    else
      result = 0;
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
    result = 0;
  }
  return result;
}
// 3004B1CD: variable 'v2' is possibly undefined

//----- (3004B220) --------------------------------------------------------
BOOL __cdecl sub_3004B220(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // esi
  BOOL result; // eax

  sub_3004A990(a1, v2, a2);
  if ( a1[51] == 6 )
  {
    v3 = a1[149];
    if ( v3 )
      result = sub_30041C80((float *)(v3 + 20), a2) != 0;
    else
      result = 0;
  }
  else
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
    result = 0;
  }
  return result;
}
// 3004B22D: variable 'v2' is possibly undefined

//----- (3004B280) --------------------------------------------------------
BOOL __cdecl sub_3004B280(int a1, int a2)
{
  return sub_30041C80((float *)(a1 + 588), a2) != 0;
}

//----- (3004B2A0) --------------------------------------------------------
BOOL __cdecl sub_3004B2A0(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // eax

  sub_3004A990(a1, v2, a2);
  v3 = a1[149];
  if ( !v3 )
    return 0;
  if ( a1[51] != 6 )
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
    return 0;
  }
  return sub_30041E70((_DWORD *)(v3 + 24), a2) != 0;
}
// 3004B2AD: variable 'v2' is possibly undefined

//----- (3004B2F0) --------------------------------------------------------
int __cdecl sub_3004B2F0(int a1, int a2)
{
  int v2; // ecx
  _DWORD *v3; // ebx
  int v4; // edi
  int v5; // esi
  int v7; // eax
  int v8; // ebp
  int *v9; // esi
  int v10; // ecx
  int v11; // edx
  int v12; // eax
  int v13; // [esp+10h] [ebp-Ch] BYREF
  int v14; // [esp+14h] [ebp-8h] BYREF
  int v15; // [esp+18h] [ebp-4h] BYREF

  v3 = (_DWORD *)a1;
  v4 = a2;
  sub_3004A990((_DWORD *)a1, v2, a2);
  v5 = v3[149];
  if ( !v5 )
    return 0;
  if ( v3[51] != 6 )
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
    return 0;
  }
  if ( !sub_30041E70(&a1, v4) )
    return 0;
  v7 = a1;
  if ( a1 > 16 )
  {
    a1 = 16;
    v7 = 16;
  }
  v8 = 0;
  *(_DWORD *)(v5 + 28) = v7;
  if ( v7 > 0 )
  {
    v9 = (int *)(v5 + 36);
    while ( sub_30041E70(&v13, v4) && sub_30041E70(&v14, v4) && sub_30041E70(&v15, v4) )
    {
      v10 = v14;
      v11 = v15;
      *(v9 - 1) = v13;
      v12 = a1;
      *v9 = v10;
      v9[1] = v11;
      ++v8;
      v9 += 3;
      if ( v8 >= v12 )
        return 1;
    }
    return 0;
  }
  return 1;
}
// 3004B302: variable 'v2' is possibly undefined

//----- (3004B3C0) --------------------------------------------------------
BOOL __cdecl sub_3004B3C0(int a1, int a2)
{
  return sub_30041E70((_DWORD *)(a1 + 56), a2) != 0;
}

//----- (3004B3E0) --------------------------------------------------------
BOOL __cdecl sub_3004B3E0(int a1, int a2)
{
  return sub_30041C80((float *)(a1 + 68), a2) != 0;
}

//----- (3004B400) --------------------------------------------------------
int __cdecl sub_3004B400(int a1, int a2)
{
  int result; // eax
  int v3; // [esp+8h] [ebp-4h] BYREF

  result = sub_30041E70(&v3, a2);
  if ( result )
  {
    if ( v3 )
      *(_DWORD *)(a1 + 72) |= 4u;
    result = 1;
  }
  return result;
}

//----- (3004B430) --------------------------------------------------------
int __cdecl sub_3004B430(int a1, int a2)
{
  int result; // eax

  result = sub_30041E70((_DWORD *)(a1 + 60), a2);
  if ( result )
  {
    *(_DWORD *)(a1 + 200) = 8;
    result = 1;
  }
  return result;
}

//----- (3004B460) --------------------------------------------------------
BOOL __cdecl sub_3004B460(int a1, int a2)
{
  return sub_30041E70((_DWORD *)(a1 + 208), a2) != 0;
}

//----- (3004B480) --------------------------------------------------------
BOOL __cdecl sub_3004B480(int a1, int a2)
{
  return sub_30041E70((_DWORD *)(a1 + 216), a2) != 0;
}

//----- (3004B4A0) --------------------------------------------------------
BOOL __cdecl sub_3004B4A0(int a1, int a2)
{
  return sub_30041C80((float *)(a1 + 220), a2) != 0;
}

//----- (3004B4C0) --------------------------------------------------------
BOOL __cdecl sub_3004B4C0(int a1, int a2)
{
  return sub_30041C80((float *)(a1 + 224), a2) != 0;
}

//----- (3004B4E0) --------------------------------------------------------
BOOL __cdecl sub_3004B4E0(int a1, int a2)
{
  return sub_30041C80((float *)(a1 + 228), a2) != 0;
}

//----- (3004B500) --------------------------------------------------------
BOOL __cdecl sub_3004B500(int a1, int a2)
{
  return sub_30041E70((_DWORD *)(a1 + 232), a2) != 0;
}

//----- (3004B520) --------------------------------------------------------
BOOL __cdecl sub_3004B520(int a1, int a2)
{
  return sub_30041E70((_DWORD *)(a1 + 212), a2) != 0;
}

//----- (3004B540) --------------------------------------------------------
int __cdecl sub_3004B540(int a1, int a2)
{
  int v2; // esi
  _DWORD *v3; // ebp
  int v5; // [esp+10h] [ebp-4h] BYREF

  v2 = 0;
  v3 = (_DWORD *)(a1 + 132);
  while ( sub_30041C80((float *)&v5, a2) )
  {
    *v3 = v5;
    ++v2;
    ++v3;
    if ( v2 >= 4 )
      return 1;
  }
  return 0;
}

//----- (3004B590) --------------------------------------------------------
int __cdecl sub_3004B590(int a1, int a2)
{
  int v2; // esi
  _DWORD *v3; // ebp
  int v5; // [esp+10h] [ebp-4h] BYREF

  v2 = 0;
  v3 = (_DWORD *)(a1 + 116);
  while ( sub_30041C80((float *)&v5, a2) )
  {
    *v3 = v5;
    ++v2;
    ++v3;
    *(_DWORD *)(a1 + 72) |= 0x200u;
    if ( v2 >= 4 )
      return 1;
  }
  return 0;
}

//----- (3004B5F0) --------------------------------------------------------
int __cdecl sub_3004B5F0(int a1, int a2)
{
  int v2; // esi
  _DWORD *v3; // ebp
  int v5; // [esp+10h] [ebp-4h] BYREF

  v2 = 0;
  v3 = (_DWORD *)(a1 + 148);
  while ( sub_30041C80((float *)&v5, a2) )
  {
    *v3 = v5;
    ++v2;
    ++v3;
    if ( v2 >= 4 )
      return 1;
  }
  return 0;
}

//----- (3004B640) --------------------------------------------------------
BOOL __cdecl sub_3004B640(int a1, int a2)
{
  return sub_30041DC0(a2, a1 + 164) != 0;
}

//----- (3004B660) --------------------------------------------------------
int __cdecl sub_3004B660(int a1)
{
  char *v1; // ecx
  int result; // eax
  char *v3; // [esp+0h] [ebp-4h] BYREF

  v3 = v1;
  result = sub_300420D0(&v3);
  if ( result )
  {
    *(_DWORD *)(a1 + 180) = (*(int (__cdecl **)(char *, _DWORD))dword_300F0F4C)(v3, *(_DWORD *)(a1 + 600));
    result = 1;
  }
  return result;
}
// 3004B660: variable 'v1' is possibly undefined
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (3004B6A0) --------------------------------------------------------
BOOL __cdecl sub_3004B6A0(int a1)
{
  return sub_300420D0((char **)(a1 + 44)) != 0;
}

//----- (3004B6C0) --------------------------------------------------------
BOOL __cdecl sub_3004B6C0(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // eax

  sub_3004A990(a1, v2, a2);
  v3 = a1[149];
  if ( !v3 )
    return 0;
  if ( a1[51] != 6 )
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
    return 0;
  }
  return sub_30042250(a2, (char **)(v3 + 224)) != 0;
}
// 3004B6CD: variable 'v2' is possibly undefined

//----- (3004B720) --------------------------------------------------------
BOOL __cdecl sub_3004B720(int a1, int a2)
{
  return sub_30042250(a2, (char **)(a1 + 272)) != 0;
}

//----- (3004B740) --------------------------------------------------------
BOOL __cdecl sub_3004B740(int a1, int a2)
{
  return sub_30042250(a2, (char **)(a1 + 276)) != 0;
}

//----- (3004B760) --------------------------------------------------------
BOOL __cdecl sub_3004B760(int a1, int a2)
{
  return sub_30042250(a2, (char **)(a1 + 256)) != 0;
}

//----- (3004B780) --------------------------------------------------------
BOOL __cdecl sub_3004B780(int a1, int a2)
{
  return sub_30042250(a2, (char **)(a1 + 260)) != 0;
}

//----- (3004B7A0) --------------------------------------------------------
BOOL __cdecl sub_3004B7A0(int a1, int a2)
{
  return sub_30042250(a2, (char **)(a1 + 248)) != 0;
}

//----- (3004B7C0) --------------------------------------------------------
BOOL __cdecl sub_3004B7C0(int a1, int a2)
{
  return sub_30042250(a2, (char **)(a1 + 252)) != 0;
}

//----- (3004B7E0) --------------------------------------------------------
BOOL __cdecl sub_3004B7E0(int a1, int a2)
{
  return sub_30042250(a2, (char **)(a1 + 264)) != 0;
}

//----- (3004B800) --------------------------------------------------------
BOOL __cdecl sub_3004B800(int a1, int a2)
{
  return sub_30042250(a2, (char **)(a1 + 268)) != 0;
}

//----- (3004B820) --------------------------------------------------------
BOOL __cdecl sub_3004B820(int a1, int a2)
{
  return sub_30041C80((float *)(a1 + 588), a2) != 0;
}

//----- (3004B840) --------------------------------------------------------
BOOL __cdecl sub_3004B840(int a1)
{
  return sub_300420D0((char **)(a1 + 284)) != 0;
}

//----- (3004B860) --------------------------------------------------------
int __cdecl sub_3004B860(int a1, int a2)
{
  int v2; // ecx
  int result; // eax
  int v4; // eax
  _DWORD *v5; // eax

  sub_3004A990((_DWORD *)a1, v2, a2);
  result = sub_300420D0((char **)(a1 + 280));
  if ( result )
  {
    if ( *(_DWORD *)(a1 + 596) )
    {
      v4 = *(_DWORD *)(a1 + 204);
      if ( v4 == 4 || v4 == 9 || v4 == 15 || v4 == 11 || v4 == 13 || v4 == 10 || !v4 || v4 == 16 )
      {
        v5 = (_DWORD *)sub_300445C0((_DWORD *)a1);
        *v5 = -1082130432;
        v5[1] = -1082130432;
        v5[2] = -1082130432;
      }
    }
    result = 1;
  }
  return result;
}
// 3004B86E: variable 'v2' is possibly undefined

//----- (3004B8E0) --------------------------------------------------------
int __cdecl sub_3004B8E0(_DWORD *a1, int a2)
{
  int v2; // ecx
  _DWORD *v3; // esi
  int v4; // edi
  int v5; // eax

  v3 = a1;
  v4 = a2;
  sub_3004A990(a1, v2, a2);
  if ( !v3[149] )
    return 0;
  if ( !sub_30041E70(&a1, v4) )
    return 0;
  v5 = sub_300445C0(v3);
  if ( !v5 )
    return 0;
  *(_DWORD *)(v5 + 16) = a1;
  return 1;
}
// 3004B8ED: variable 'v2' is possibly undefined

//----- (3004B930) --------------------------------------------------------
int __cdecl sub_3004B930(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // ecx
  int v4; // eax
  int result; // eax

  sub_3004A990(a1, v2, a2);
  v3 = a1[149];
  if ( !v3 )
    return 0;
  v4 = a1[51];
  if ( v4 != 4 && v4 != 9 && v4 != 15 && v4 != 11 && v4 != 13 && v4 != 10 && v4 && v4 != 16 )
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_EDITFIELD, ITEM_TYPE_NUMERICFIELD, ITEM_TYPE_DECIMALFIELD, ITEM_T"
               "YPE_UPREDITFIELD, ITEM_TYPE_YESNO, ITEM_TYPE_BIND, ITEM_TYPE_SLIDER, or ITEM_TYPE_TEXT\n");
    return 0;
  }
  result = 1;
  *(_DWORD *)(v3 + 20) = 1;
  return result;
}
// 3004B93C: variable 'v2' is possibly undefined

//----- (3004B9A0) --------------------------------------------------------
int __cdecl sub_3004B9A0(_DWORD *a1, int a2)
{
  int v2; // ecx
  _DWORD *v3; // esi
  int v4; // edi
  int v5; // eax

  v3 = a1;
  v4 = a2;
  sub_3004A990(a1, v2, a2);
  if ( !v3[149] )
    return 0;
  if ( !sub_30041E70(&a1, v4) )
    return 0;
  v5 = sub_300445C0(v3);
  if ( !v5 )
    return 0;
  *(_DWORD *)(v5 + 24) = a1;
  return 1;
}
// 3004B9AD: variable 'v2' is possibly undefined

//----- (3004B9F0) --------------------------------------------------------
BOOL __cdecl sub_3004B9F0(int a1, int a2)
{
  int v2; // ecx
  float *v3; // ebp
  int v4; // eax

  sub_3004A990((_DWORD *)a1, v2, a2);
  v3 = *(float **)(a1 + 596);
  if ( !v3 )
    return 0;
  v4 = *(_DWORD *)(a1 + 204);
  if ( v4 != 4 && v4 != 9 && v4 != 15 && v4 != 11 && v4 != 13 && v4 != 10 && v4 && v4 != 16 )
  {
    Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_EDITFIELD, ITEM_TYPE_NUMERICFIELD, ITEM_TYPE_DECIMALFIELD, ITEM_T"
               "YPE_UPREDITFIELD, ITEM_TYPE_YESNO, ITEM_TYPE_BIND, ITEM_TYPE_SLIDER, or ITEM_TYPE_TEXT\n");
    return 0;
  }
  return sub_300420D0((char **)(a1 + 280))
      && sub_30041C80(v3 + 2, a2)
      && sub_30041C80(v3, a2)
      && sub_30041C80(v3 + 1, a2);
}
// 3004B9FE: variable 'v2' is possibly undefined

//----- (3004BAA0) --------------------------------------------------------
int __cdecl sub_3004BAA0(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // esi
  int v5; // edi
  char *v6; // eax
  int v7; // ecx
  int v8; // eax
  bool v9; // sf
  char v10[1024]; // [esp+1Ch] [ebp-404h] BYREF
  unsigned int v11; // [esp+41Ch] [ebp-4h]
  unsigned int retaddr; // [esp+420h] [ebp+0h]

  v11 = retaddr ^ dword_300705C0;
  sub_3004A990(a1, v2, a2);
  v3 = a1[149];
  if ( v3 )
  {
    if ( a1[51] == 12 )
    {
      *(_DWORD *)(v3 + 384) = 0;
      *(_DWORD *)(v3 + 388) = 1;
      if ( dword_30076898(98) && v10[0] == 123 )
      {
        v5 = 0;
        if ( dword_30076898(98) )
        {
          while ( v10[0] != 125 )
          {
            if ( v10[0] != 44 && v10[0] != 59 )
            {
              v6 = sub_30041880(v10);
              v7 = *(_DWORD *)(v3 + 384);
              if ( v5 )
              {
                *(_DWORD *)(v3 + 4 * v7 + 128) = v6;
                v5 = 0;
                v8 = *(_DWORD *)(v3 + 384) + 1;
                v9 = *(_DWORD *)(v3 + 384) - 31 < 0;
                *(_DWORD *)(v3 + 384) = v8;
                if ( v9 == __OFSUB__(v8, 32) )
                  return sub_30052A2E(retaddr ^ v11);
              }
              else
              {
                *(_DWORD *)(v3 + 4 * v7) = v6;
                v5 = 1;
              }
            }
            if ( !dword_30076898(98) )
              goto LABEL_15;
          }
        }
        else
        {
LABEL_15:
          sub_30041B20(a2, "end of file inside menu item\n");
        }
      }
    }
    else
    {
      Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MULTI\n");
    }
  }
  return sub_30052A2E(retaddr ^ v11);
}
// 3004BACD: variable 'v2' is possibly undefined
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3004BBF0) --------------------------------------------------------
int __cdecl sub_3004BBF0(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // esi
  int v5; // eax
  bool v6; // sf
  char v7[1024]; // [esp+1Ch] [ebp-404h] BYREF
  unsigned int v8; // [esp+41Ch] [ebp-4h]
  unsigned int retaddr; // [esp+420h] [ebp+0h]

  v8 = retaddr ^ dword_300705C0;
  sub_3004A990(a1, v2, a2);
  v3 = a1[149];
  if ( v3 )
  {
    if ( a1[51] == 12 )
    {
      *(_DWORD *)(v3 + 384) = 0;
      *(_DWORD *)(v3 + 388) = 0;
      if ( dword_30076898(98) && v7[0] == 123 )
      {
        if ( dword_30076898(98) )
        {
          while ( v7[0] != 125 )
          {
            if ( v7[0] != 44 && v7[0] != 59 )
            {
              *(_DWORD *)(v3 + 4 * *(_DWORD *)(v3 + 384)) = sub_30041880(v7);
              if ( !sub_30041C80((float *)(v3 + 4 * *(_DWORD *)(v3 + 384) + 256), a2) )
                break;
              v5 = *(_DWORD *)(v3 + 384) + 1;
              v6 = *(_DWORD *)(v3 + 384) - 31 < 0;
              *(_DWORD *)(v3 + 384) = v5;
              if ( v6 == __OFSUB__(v5, 32) )
                break;
            }
            if ( !dword_30076898(98) )
              goto LABEL_14;
          }
        }
        else
        {
LABEL_14:
          sub_30041B20(a2, "end of file inside menu item\n");
        }
      }
    }
    else
    {
      Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_MULTI\n");
    }
  }
  return sub_30052A2E(retaddr ^ v8);
}
// 3004BC1D: variable 'v2' is possibly undefined
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3004BD30) --------------------------------------------------------
int __usercall sub_3004BD30@<eax>(int a1@<ecx>, int a2@<eax>, int a3)
{
  int result; // eax
  int v5; // eax
  float v6[7]; // [esp+8h] [ebp-1Ch] BYREF

  if ( !*(_DWORD *)(a3 + 300) || a2 == *(_DWORD *)(a3 + 584) )
  {
    *(_DWORD *)(a3 + 584) = a2;
    if ( sub_30041C80(&v6[5], a1) && sub_30041C80(&v6[6], a1) && sub_30041DC0(a1, (int)v6) )
    {
      v5 = *(_DWORD *)(a3 + 300);
      if ( v5 < 10 )
      {
        qmemcpy((void *)(28 * v5 + a3 + 304), v6, 0x1Cu);
        ++*(_DWORD *)(a3 + 300);
      }
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    sub_30041B20(a1, "both addColorRange and addColorRangeRel - set within same itemdef\n");
    result = 0;
  }
  return result;
}

//----- (3004BDE0) --------------------------------------------------------
int __cdecl sub_3004BDE0(int a1, int a2)
{
  return sub_3004BD30(a2, 1, a1);
}

//----- (3004BE00) --------------------------------------------------------
int __cdecl sub_3004BE00(int a1, int a2)
{
  return sub_3004BD30(a2, 0, a1);
}

//----- (3004BE20) --------------------------------------------------------
int __cdecl sub_3004BE20(int a1, int a2)
{
  int result; // eax
  int v3; // [esp+8h] [ebp-4h] BYREF

  result = sub_30041E70(&v3, a2);
  if ( result )
  {
    *(_DWORD *)(a1 + 64) |= v3;
    result = 1;
  }
  return result;
}

//----- (3004BE50) --------------------------------------------------------
int __cdecl sub_3004BE50(int a1, int a2)
{
  int result; // eax

  if ( !sub_30042250(a2, (char **)(a1 + 288)) )
    return 0;
  result = 1;
  *(_DWORD *)(a1 + 292) = 1;
  return result;
}

//----- (3004BE80) --------------------------------------------------------
int __cdecl sub_3004BE80(int a1, int a2)
{
  if ( !sub_30042250(a2, (char **)(a1 + 288)) )
    return 0;
  *(_DWORD *)(a1 + 292) = 2;
  return 1;
}

//----- (3004BEC0) --------------------------------------------------------
int __cdecl sub_3004BEC0(int a1, int a2)
{
  if ( !sub_30042250(a2, (char **)(a1 + 288)) )
    return 0;
  *(_DWORD *)(a1 + 292) = 4;
  return 1;
}

//----- (3004BF00) --------------------------------------------------------
int __cdecl sub_3004BF00(int a1, int a2)
{
  if ( !sub_30042250(a2, (char **)(a1 + 288)) )
    return 0;
  *(_DWORD *)(a1 + 292) = 8;
  return 1;
}

//----- (3004BF40) --------------------------------------------------------
int sub_3004BF40()
{
  int result; // eax
  char **v1; // edi
  char **v2; // ebx

  memset(dword_30546FC0, 0, sizeof(dword_30546FC0));
  result = (int)off_30071600;
  if ( off_30071600 )
  {
    v1 = &off_30071600;
    v2 = &off_30071600;
    do
    {
      result = sub_3004AAA0(*v1);
      v2 += 3;
      v1[2] = (char *)dword_30546FC0[result];
      dword_30546FC0[result] = (int)v1;
      v1 = v2;
    }
    while ( *v2 );
  }
  return result;
}
// 30071600: using guessed type char *off_30071600;

//----- (3004BF90) --------------------------------------------------------
int __usercall sub_3004BF90@<eax>(int a1@<edi>, int a2)
{
  int v2; // esi
  char ArgList[1024]; // [esp+14h] [ebp-404h] BYREF
  unsigned int v5; // [esp+414h] [ebp-4h]
  unsigned int retaddr; // [esp+418h] [ebp+0h]

  v5 = retaddr ^ dword_300705C0;
  if ( dword_30076898(98) && ArgList[0] == 123 )
  {
    if ( dword_30076898(98) )
    {
      while ( ArgList[0] != 125 )
      {
        v2 = dword_30546FC0[sub_3004AAA0(ArgList)];
        if ( v2 )
        {
          while ( !*(_DWORD *)v2 || sub_30040170(99999, *(char **)v2, ArgList) )
          {
            v2 = *(_DWORD *)(v2 + 8);
            if ( !v2 )
              goto LABEL_10;
          }
          if ( !(*(int (__cdecl **)(int, int))(v2 + 4))(a2, a1) )
          {
            sub_30041B20(a1, "couldn't parse menu item keyword %s", ArgList);
            return sub_30052A2E(retaddr ^ v5);
          }
        }
        else
        {
LABEL_10:
          sub_30041B20(a1, "unknown menu item keyword %s", ArgList);
        }
        if ( !dword_30076898(98) )
          goto LABEL_13;
      }
    }
    else
    {
LABEL_13:
      sub_30041B20(a1, "end of file inside menu item\n");
    }
  }
  return sub_30052A2E(retaddr ^ v5);
}
// 30052A2E: using guessed type int __thiscall sub_30052A2E(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3004C0C0) --------------------------------------------------------
void __usercall sub_3004C0C0(_DWORD *a1@<esi>)
{
  _DWORD *v1; // eax

  if ( a1 && a1[50] == 6 )
  {
    if ( a1[51] == 6 )
    {
      v1 = (_DWORD *)a1[149];
    }
    else
    {
      Com_Printf("^1Menu Error: Expecting type: ITEM_TYPE_LISTBOX\n");
      v1 = 0;
    }
    a1[148] = 0;
    if ( v1 )
    {
      *v1 = 0;
      v1[1] = 0;
      v1[3] = 0;
    }
  }
}

//----- (3004C120) --------------------------------------------------------
int __cdecl sub_3004C120(int a1)
{
  int result; // eax

  result = sub_300420D0((char **)(a1 + 184));
  if ( result )
  {
    if ( !*(_DWORD *)(dword_300F0F4C + 123692) )
    {
      (*(void (__cdecl **)(_DWORD, int, int, _DWORD))(dword_300F0F4C + 80))(
        *(_DWORD *)(a1 + 184),
        48,
        dword_300F0F4C + 268,
        *(_DWORD *)(a1 + 600));
      *(_DWORD *)(dword_300F0F4C + 123692) = 1;
    }
    result = 1;
  }
  return result;
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (3004C180) --------------------------------------------------------
BOOL __cdecl sub_3004C180(int a1)
{
  return sub_300420D0((char **)(a1 + 32)) != 0;
}

//----- (3004C1A0) --------------------------------------------------------
BOOL __cdecl sub_3004C1A0(int a1, int a2)
{
  return sub_30041E70((_DWORD *)(a1 + 188), a2) != 0;
}

//----- (3004C1C0) --------------------------------------------------------
BOOL __cdecl sub_3004C1C0(float *a1, int a2)
{
  return sub_30041C80(a1, a2) && sub_30041C80(a1 + 1, a2) && sub_30041C80(a1 + 2, a2) && sub_30041C80(a1 + 3, a2);
}

//----- (3004C210) --------------------------------------------------------
BOOL __cdecl sub_3004C210(int a1, int a2)
{
  return sub_30041E70((_DWORD *)(a1 + 52), a2) != 0;
}

//----- (3004C230) --------------------------------------------------------
int __cdecl sub_3004C230(int a1, int a2)
{
  int result; // eax
  int v3; // [esp+8h] [ebp-4h] BYREF

  result = sub_30041E70(&v3, a2);
  if ( result )
  {
    if ( v3 )
      *(_DWORD *)(a1 + 72) |= 4u;
    result = 1;
  }
  return result;
}

//----- (3004C260) --------------------------------------------------------
BOOL __cdecl sub_3004C260(int a1, int a2)
{
  return sub_30042250(a2, (char **)(a1 + 220)) != 0;
}

//----- (3004C280) --------------------------------------------------------
BOOL __cdecl sub_3004C280(int a1, int a2)
{
  return sub_30042250(a2, (char **)(a1 + 224)) != 0;
}

//----- (3004C2A0) --------------------------------------------------------
BOOL __cdecl sub_3004C2A0(int a1, int a2)
{
  return sub_30042250(a2, (char **)(a1 + 228)) != 0;
}

//----- (3004C2C0) --------------------------------------------------------
BOOL __cdecl sub_3004C2C0(int a1, int a2)
{
  return sub_30041E70((_DWORD *)(a1 + 56), a2) != 0;
}

//----- (3004C2E0) --------------------------------------------------------
BOOL __cdecl sub_3004C2E0(int a1, int a2)
{
  return sub_30041C80((float *)(a1 + 68), a2) != 0;
}

//----- (3004C300) --------------------------------------------------------
int __cdecl sub_3004C300(int a1, int a2)
{
  int v2; // edi
  int v3; // esi
  _DWORD *v4; // ebp

  v2 = a2;
  v3 = 0;
  v4 = (_DWORD *)(a1 + 132);
  while ( sub_30041C80((float *)&a1, v2) )
  {
    *v4 = a1;
    ++v3;
    ++v4;
    if ( v3 >= 4 )
      return 1;
  }
  return 0;
}

//----- (3004C350) --------------------------------------------------------
int __cdecl sub_3004C350(int a1, int a2)
{
  int v2; // esi
  _DWORD *v3; // ebp
  int v5; // [esp+10h] [ebp-4h] BYREF

  v2 = 0;
  v3 = (_DWORD *)(a1 + 116);
  while ( sub_30041C80((float *)&v5, a2) )
  {
    *v3 = v5;
    ++v2;
    ++v3;
    *(_DWORD *)(a1 + 72) |= 0x200u;
    if ( v2 >= 4 )
      return 1;
  }
  return 0;
}

//----- (3004C3B0) --------------------------------------------------------
int __cdecl sub_3004C3B0(int a1, int a2)
{
  int v2; // edi
  int v3; // esi
  _DWORD *v4; // ebp

  v2 = a2;
  v3 = 0;
  v4 = (_DWORD *)(a1 + 148);
  while ( sub_30041C80((float *)&a1, v2) )
  {
    *v4 = a1;
    ++v3;
    ++v4;
    if ( v3 >= 4 )
      return 1;
  }
  return 0;
}

//----- (3004C400) --------------------------------------------------------
int __cdecl sub_3004C400(int a1, int a2)
{
  int v2; // edi
  int v3; // esi
  _DWORD *v4; // ebp

  v2 = a2;
  v3 = 0;
  v4 = (_DWORD *)(a1 + 1260);
  while ( sub_30041C80((float *)&a1, v2) )
  {
    *v4 = a1;
    ++v3;
    ++v4;
    if ( v3 >= 4 )
      return 1;
  }
  return 0;
}

//----- (3004C450) --------------------------------------------------------
int __cdecl sub_3004C450(int a1, int a2)
{
  int v2; // edi
  int v3; // esi
  _DWORD *v4; // ebp

  v2 = a2;
  v3 = 0;
  v4 = (_DWORD *)(a1 + 1276);
  while ( sub_30041C80((float *)&a1, v2) )
  {
    *v4 = a1;
    ++v3;
    ++v4;
    if ( v3 >= 4 )
      return 1;
  }
  return 0;
}

//----- (3004C4A0) --------------------------------------------------------
BOOL __cdecl sub_3004C4A0(int a1, int a2)
{
  return sub_30041DC0(a2, a1 + 164) != 0;
}

//----- (3004C4C0) --------------------------------------------------------
int __cdecl sub_3004C4C0(int a1)
{
  char *v1; // ecx
  int result; // eax
  char *v3; // [esp+0h] [ebp-4h] BYREF

  v3 = v1;
  result = sub_300420D0(&v3);
  if ( result )
  {
    *(_DWORD *)(a1 + 180) = (*(int (__cdecl **)(char *, _DWORD))dword_300F0F4C)(v3, *(_DWORD *)(a1 + 1256));
    result = 1;
  }
  return result;
}
// 3004C4C0: variable 'v1' is possibly undefined
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (3004C500) --------------------------------------------------------
BOOL __cdecl sub_3004C500(int a1)
{
  return sub_300420D0((char **)(a1 + 44)) != 0;
}

//----- (3004C520) --------------------------------------------------------
int __cdecl sub_3004C520(int a1, int a2)
{
  int result; // eax
  int v3; // [esp+8h] [ebp-4h] BYREF

  result = sub_30041E70(&v3, a2);
  if ( result )
  {
    *(_DWORD *)(a1 + 64) |= v3;
    result = 1;
  }
  return result;
}

//----- (3004C550) --------------------------------------------------------
BOOL __cdecl sub_3004C550(int a1, int a2)
{
  return sub_30041E70((_DWORD *)(a1 + 60), a2) != 0;
}

//----- (3004C570) --------------------------------------------------------
int __cdecl sub_3004C570(int a1)
{
  *(_DWORD *)(a1 + 72) |= 0x200000u;
  return 1;
}

//----- (3004C590) --------------------------------------------------------
int __cdecl sub_3004C590(int a1)
{
  *(_DWORD *)(a1 + 72) |= 0x20000u;
  return 1;
}

//----- (3004C5B0) --------------------------------------------------------
BOOL __cdecl sub_3004C5B0(int a1)
{
  return sub_300420D0((char **)(a1 + 1252)) != 0;
}

//----- (3004C5D0) --------------------------------------------------------
BOOL __cdecl sub_3004C5D0(int a1, int a2)
{
  return sub_30041C80((float *)(a1 + 208), a2) != 0;
}

//----- (3004C5F0) --------------------------------------------------------
BOOL __cdecl sub_3004C5F0(int a1, int a2)
{
  return sub_30041C80((float *)(a1 + 212), a2) != 0;
}

//----- (3004C610) --------------------------------------------------------
BOOL __cdecl sub_3004C610(int a1, int a2)
{
  return sub_30041C80((float *)(a1 + 216), a2) != 0;
}

//----- (3004C630) --------------------------------------------------------
BOOL __cdecl sub_3004C630(int a1, int a2)
{
  return sub_30041E70((_DWORD *)(a1 + 204), a2) != 0;
}

//----- (3004C650) --------------------------------------------------------
int __cdecl sub_3004C650(int a1, int a2)
{
  int v2; // ecx
  _DWORD *v3; // edx
  int v4; // esi
  int result; // eax

  if ( *(int *)(a1 + 192) < 128 )
  {
    *(_DWORD *)(a1 + 4 * *(_DWORD *)(a1 + 192) + 1292) = sub_300417D0(v2, 604);
    v3 = *(_DWORD **)(a1 + 4 * *(_DWORD *)(a1 + 192) + 1292);
    v4 = *(_DWORD *)(a1 + 1256);
    memset(v3, 0, 0x25Cu);
    v3[57] = 1057803469;
    v3[150] = v4;
    memset(v3, 0, 0xB8u);
    v3[17] = 1065353216;
    v3[32] = 1065353216;
    v3[31] = 1065353216;
    v3[30] = 1065353216;
    v3[29] = 1065353216;
    v3[12] = -1;
    result = sub_3004BF90(a2, *(_DWORD *)(a1 + 4 * *(_DWORD *)(a1 + 192) + 1292));
    if ( !result )
      return result;
    sub_3004C0C0(*(_DWORD **)(a1 + 4 * *(_DWORD *)(a1 + 192) + 1292));
    *(_DWORD *)(*(_DWORD *)(a1 + 4 * (*(_DWORD *)(a1 + 192))++ + 1292) + 240) = a1;
  }
  return 1;
}
// 3004C66C: variable 'v2' is possibly undefined

//----- (3004C730) --------------------------------------------------------
int __cdecl sub_3004C730(int a1, int a2)
{
  int result; // eax
  unsigned __int8 v3; // [esp+7h] [ebp-1h] BYREF

  result = sub_300421D0(&v3);
  if ( result )
    result = sub_30042250(a2, (char **)(a1 + 4 * v3 + 232)) != 0;
  return result;
}

//----- (3004C770) --------------------------------------------------------
int __cdecl sub_3004C770(int a1, int a2)
{
  int result; // eax
  int v3; // [esp+8h] [ebp-4h] BYREF

  result = sub_30041E70(&v3, a2);
  if ( result )
    result = sub_30042250(a2, (char **)(a1 + 4 * v3 + 232)) != 0;
  return result;
}

//----- (3004C7B0) --------------------------------------------------------
int sub_3004C7B0()
{
  int result; // eax
  char **v1; // edi
  char **v2; // ebx

  memset(dword_30563BC0, 0, 0x800u);
  result = (int)off_30071948;
  if ( off_30071948 )
  {
    v1 = &off_30071948;
    v2 = &off_30071948;
    do
    {
      result = sub_3004AAA0(*v1);
      v2 += 3;
      v1[2] = (char *)dword_30563BC0[result];
      dword_30563BC0[result] = (int)v1;
      v1 = v2;
    }
    while ( *v2 );
  }
  return result;
}
// 30071948: using guessed type char *off_30071948;

//----- (3004C800) --------------------------------------------------------
int __usercall sub_3004C800@<eax>(int a1@<ebx>, int a2)
{
  int v2; // esi
  char v4[1044]; // [esp+8h] [ebp-418h] BYREF
  unsigned int v5; // [esp+41Ch] [ebp-4h]
  unsigned int retaddr; // [esp+424h] [ebp+4h]

  v5 = retaddr ^ dword_300705C0;
  if ( !dword_30076898(98) || v4[16] != 123 )
    return 0;
  memset(v4, 0, 0x410u);
  while ( dword_30076898(98) )
  {
    if ( v4[16] == 125 )
      return 1;
    v2 = dword_30563BC0[sub_3004AAA0(&v4[16])];
    if ( v2 )
    {
      while ( !*(_DWORD *)v2 || sub_30040170(99999, *(char **)v2, &v4[16]) )
      {
        v2 = *(_DWORD *)(v2 + 8);
        if ( !v2 )
          goto LABEL_9;
      }
      if ( !(*(int (__cdecl **)(int, int))(v2 + 4))(a2, a1) )
      {
        sub_30041B20(a1, "couldn't parse menu keyword %s", &v4[16]);
        return 0;
      }
    }
    else
    {
LABEL_9:
      sub_30041B20(a1, "unknown menu keyword %s", &v4[16]);
    }
    memset(v4, 0, 0x410u);
  }
  sub_30041B20(a1, "end of file inside menu\n");
  return 0;
}
// 300705C0: using guessed type int dword_300705C0;
// 30076898: using guessed type int (__cdecl *dword_30076898)(_DWORD);

//----- (3004C970) --------------------------------------------------------
void __usercall sub_3004C970(int a1@<ebx>, int a2)
{
  char *v2; // esi

  v2 = (char *)&unk_305477C0 + 1804 * dword_300F0F60;
  if ( dword_300F0F60 < 64 )
  {
    sub_3004A3E0((_DWORD *)&unk_305477C0 + 451 * dword_300F0F60, a2);
    if ( sub_3004C800(a1, (int)v2) )
    {
      if ( v2 )
      {
        if ( *((_DWORD *)v2 + 47) )
        {
          *(_DWORD *)v2 = 0;
          *((_DWORD *)v2 + 1) = 0;
          *((_DWORD *)v2 + 2) = 1142947840;
          *((_DWORD *)v2 + 3) = 1139802112;
        }
        sub_30042A60(v2);
      }
      ++dword_300F0F60;
    }
  }
}
// 300F0F60: using guessed type int dword_300F0F60;

//----- (3004C9F0) --------------------------------------------------------
int sub_3004C9F0()
{
  char *v0; // esi
  int v1; // eax
  char *v2; // ebx
  int (__cdecl *v3)(_DWORD); // eax
  int v4; // ebp
  int *v5; // edi
  int v6; // eax
  int v7; // ecx
  int i; // ebx
  int *v9; // edi
  int (__cdecl *v10)(int); // eax
  int v11; // esi
  int *v12; // ebp
  int result; // eax
  int (__cdecl **v14)(int, int, _DWORD, int, int *, int); // esi
  int v15; // eax
  int v16; // [esp-4h] [ebp-3Ch]
  float v17; // [esp-4h] [ebp-3Ch]
  int v18; // [esp+0h] [ebp-38h]
  int v19; // [esp+0h] [ebp-38h]
  int v20; // [esp+4h] [ebp-34h]
  int v21; // [esp+4h] [ebp-34h]
  int v22; // [esp+8h] [ebp-30h]
  int v23; // [esp+8h] [ebp-30h]
  float v24; // [esp+10h] [ebp-28h]
  float v25; // [esp+10h] [ebp-28h]
  int v26; // [esp+24h] [ebp-14h]
  int v27; // [esp+28h] [ebp-10h] BYREF
  int v28; // [esp+2Ch] [ebp-Ch]
  int v29; // [esp+30h] [ebp-8h]
  int v30; // [esp+34h] [ebp-4h]

  if ( dword_300F0F40 )
    dword_300F0F40(dword_300F0F44);
  v26 = 0;
  if ( dword_300F0F60 > 0 )
  {
    v0 = (char *)&unk_30547800;
    do
    {
      v1 = dword_300F0F64 - 1;
      if ( dword_300F0F64 - 1 < 0 )
      {
LABEL_8:
        v2 = v0 - 64;
        if ( v0 != (char *)64
          && (v0[8] & 4) != 0
          && (!*(_DWORD *)v0 || (v3 = *(int (__cdecl **)(_DWORD))(dword_300F0F4C + 92)) == 0 || v3(*(_DWORD *)v0)) )
        {
          if ( *((_DWORD *)v0 + 31) )
            (*(void (__cdecl **)(_DWORD, _DWORD, int, int, _DWORD))(dword_300F0F4C + 8))(
              0,
              0,
              1142947840,
              1139802112,
              *((_DWORD *)v0 + 29));
          v24 = (float)*((int *)v0 + 35);
          sub_30042540((_DWORD *)v0 - 16, *((float *)v0 + 37), *((float *)v0 + 38), *((float *)v0 + 36), v24);
          v4 = 0;
          if ( *((int *)v0 + 32) > 0 )
          {
            v5 = (int *)(v0 + 1228);
            do
            {
              sub_30049F80(*v5);
              ++v4;
              ++v5;
            }
            while ( v4 < *((_DWORD *)v0 + 32) );
          }
          if ( dword_300F0F68 )
          {
            v22 = *((_DWORD *)v2 + 3);
            v20 = *((_DWORD *)v2 + 2);
            v18 = *((_DWORD *)v2 + 1);
            v16 = *(_DWORD *)v2;
            v30 = 1065353216;
            v29 = 1065353216;
            v27 = 1065353216;
            v28 = 0;
            (*(void (__cdecl **)(int, int, int, int, int, int *))(dword_300F0F4C + 56))(
              v16,
              v18,
              v20,
              v22,
              1065353216,
              &v27);
          }
        }
      }
      else
      {
        while ( (char *)*(&dword_305643C0 + v1) != v0 - 64 )
        {
          if ( --v1 < 0 )
            goto LABEL_8;
        }
      }
      v0 += 1804;
      ++v26;
    }
    while ( v26 < dword_300F0F60 );
  }
  v6 = dword_300F0F64 - 1;
  v7 = 0;
  if ( dword_300F0F64 - 1 >= 0 )
  {
    while ( !*(_DWORD *)(*(&dword_305643C0 + v6) + 188) )
    {
      if ( --v6 < 0 )
        goto LABEL_26;
    }
    v7 = v6;
  }
LABEL_26:
  for ( i = v7; i < dword_300F0F64; ++i )
  {
    v9 = (int *)*(&dword_305643C0 + i);
    if ( v9 )
    {
      if ( (v9[18] & 4) != 0 && (!v9[16] || (v10 = *(int (__cdecl **)(int))(dword_300F0F4C + 92)) == 0 || v10(v9[16])) )
      {
        if ( v9[47] )
          (*(void (__cdecl **)(_DWORD, _DWORD, int, int, int))(dword_300F0F4C + 8))(
            0,
            0,
            1142947840,
            1139802112,
            v9[45]);
        v25 = (float)v9[51];
        sub_30042540(v9, *((float *)v9 + 53), *((float *)v9 + 54), *((float *)v9 + 52), v25);
        v11 = 0;
        if ( v9[48] > 0 )
        {
          v12 = v9 + 323;
          do
          {
            sub_30049F80(*v12);
            ++v11;
            ++v12;
          }
          while ( v11 < v9[48] );
        }
        if ( dword_300F0F68 )
        {
          v23 = v9[3];
          v21 = v9[2];
          v19 = v9[1];
          v17 = *(float *)v9;
          v30 = 1065353216;
          v29 = 1065353216;
          v27 = 1065353216;
          v28 = 0;
          (*(void (__cdecl **)(float, int, int, int, int, int *))(dword_300F0F4C + 56))(
            COERCE_FLOAT(LODWORD(v17)),
            v19,
            v21,
            v23,
            1065353216,
            &v27);
        }
      }
    }
  }
  result = dword_300F0F68;
  if ( dword_300F0F68 )
  {
    v27 = 1065353216;
    v28 = 1065353216;
    v29 = 1065353216;
    v30 = 1065353216;
    v14 = (int (__cdecl **)(int, int, _DWORD, int, int *, int))(dword_300F0F4C + 16);
    v15 = sub_300403F0("fps: %f", *(float *)(dword_300F0F4C + 123868));
    result = (*v14)(1084227584, 1103626240, 0, 1056964608, &v27, v15);
  }
  return result;
}
// 300403F0: using guessed type int sub_300403F0(const char *, ...);
// 300F0F40: using guessed type int (__cdecl *dword_300F0F40)(_DWORD);
// 300F0F44: using guessed type int dword_300F0F44;
// 300F0F4C: using guessed type int dword_300F0F4C;
// 300F0F60: using guessed type int dword_300F0F60;
// 300F0F64: using guessed type int dword_300F0F64;
// 300F0F68: using guessed type int dword_300F0F68;

//----- (3004CD50) --------------------------------------------------------
int __cdecl sub_3004CD50(int a1, int a2)
{
  int v2; // edx
  float *v3; // ecx
  float v5; // [esp+0h] [ebp-8h]
  float v6; // [esp+4h] [ebp-4h]

  v2 = dword_300F0F64 - 1;
  if ( dword_300F0F64 - 1 < 0 )
    return 0;
  v6 = (float)a2;
  v5 = (float)a1;
  while ( 1 )
  {
    v3 = (float *)*(&dword_305643C0 + v2);
    if ( v3 )
    {
      if ( v5 >= (double)*v3 && v3[2] + *v3 >= v5 && v6 >= (double)v3[1] && v3[3] + v3[1] >= v6 )
        break;
    }
    if ( --v2 < 0 )
      return 0;
  }
  return *(&dword_305643C0 + v2);
}
// 300F0F64: using guessed type int dword_300F0F64;

//----- (3004CDD0) --------------------------------------------------------
int __cdecl sub_3004CDD0(int a1, int a2)
{
  int v2; // ecx
  int v3; // eax
  int v5; // esi
  int v6; // [esp+0h] [ebp-1Ch]
  float v7; // [esp+4h] [ebp-18h]
  float v8; // [esp+14h] [ebp-8h]
  int v9; // [esp+18h] [ebp-4h]

  if ( v2 )
  {
    *(float *)v2 = (double)a1 + *(float *)v2;
    *(float *)(v2 + 4) = (double)a2 + *(float *)(v2 + 4);
    sub_30042A60((char *)v2);
  }
  else
  {
    v3 = sub_3004A4A0();
    if ( v3 && (*(_DWORD *)(v3 + 72) & 0x200000) != 0 )
    {
      v7 = (float)a2;
      *(float *)&v6 = (float)a1;
      sub_3004A690(v3, v6, v7);
      return 1;
    }
    v5 = dword_300F0F64 - 1;
    if ( dword_300F0F64 - 1 >= 0 )
    {
      while ( 1 )
      {
        v8 = (float)a2;
        *(float *)&v9 = (float)a1;
        if ( sub_3004A690(*(&dword_305643C0 + v5), v9, v8) )
          break;
        if ( --v5 < 0 )
          return 1;
      }
    }
  }
  return 1;
}
// 3004CDD8: variable 'v2' is possibly undefined
// 300F0F64: using guessed type int dword_300F0F64;

//----- (3004CFD0) --------------------------------------------------------
void __usercall sub_3004CFD0(int a1@<ebx>)
{
  int v1; // eax
  int v2; // eax
  int v3; // edi
  int v4; // esi
  int v5; // eax
  int v6; // eax

  if ( a1 )
  {
    v1 = *(_DWORD *)(a1 + 44);
    if ( v1 )
    {
      v2 = (*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 208))(v1, 0, 0, 0, 0);
      (*(void (__cdecl **)(int))(dword_300F0F4C + 212))(v2);
    }
    v3 = 0;
    if ( *(int *)(a1 + 192) > 0 )
    {
      v4 = a1 + 1292;
      do
      {
        if ( *(_DWORD *)v4 )
        {
          v5 = *(_DWORD *)(*(_DWORD *)v4 + 44);
          if ( v5 )
          {
            v6 = (*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD, _DWORD))(dword_300F0F4C + 208))(v5, 0, 0, 0, 0);
            (*(void (__cdecl **)(int))(dword_300F0F4C + 212))(v6);
          }
        }
        ++v3;
        v4 += 4;
      }
      while ( v3 < *(_DWORD *)(a1 + 192) );
    }
  }
}
// 300F0F4C: using guessed type int dword_300F0F4C;

//----- (3004D090) --------------------------------------------------------
int __usercall sub_3004D090@<eax>(int a1@<edi>, float a2, float a3)
{
  int v4; // ebx
  int i; // esi
  int v6; // eax
  int v7; // ecx
  float v9; // [esp-8h] [ebp-14h]

  if ( !a1 )
    return 0;
  if ( (*(_DWORD *)(a1 + 72) & 0x100004) == 0 )
    return 0;
  if ( !sub_30042BB0(a2, a3) )
    return 0;
  v4 = 0;
  if ( *(int *)(a1 + 192) <= 0 )
    return 0;
  for ( i = a1 + 1292; ; i += 4 )
  {
    v6 = *(_DWORD *)(*(_DWORD *)i + 72);
    if ( (v6 & 0x100004) != 0 && (v6 & 0x10) == 0 )
    {
      if ( sub_30042BB0(a2, a3) )
      {
        if ( *(_DWORD *)(v7 + 200) )
          break;
        if ( !*(_DWORD *)(v7 + 236) )
          break;
        v9 = a2;
        sub_30046C70(v7);
        if ( sub_30042BB0(v9, a3) )
          break;
      }
    }
    if ( ++v4 >= *(_DWORD *)(a1 + 192) )
      return 0;
  }
  return 1;
}
// 3004D0E4: variable 'a2' is possibly undefined
// 3004D0F0: variable 'v7' is possibly undefined

//----- (3004D690) --------------------------------------------------------
unsigned int __cdecl sub_3004D690(unsigned int a1, unsigned int a2, int a3, int (__cdecl *a4)(unsigned int, _BYTE *))
{
  unsigned int result; // eax
  unsigned int v5; // ebp
  unsigned int v6; // ebx
  unsigned int v7; // esi
  unsigned int v8; // eax
  _BYTE *v9; // edi
  _BYTE *v10; // eax
  unsigned int v11; // ecx
  unsigned int v12; // esi
  char v13; // dl
  _BYTE *v14; // eax
  unsigned int v15; // ecx
  unsigned int v16; // esi
  char v17; // dl
  _BYTE *v18; // eax
  _BYTE *v19; // ecx
  unsigned int v20; // esi
  char v21; // dl
  _BYTE *v22; // esi
  _BYTE *v23; // eax
  unsigned int v24; // ebp
  char v25; // cl
  unsigned int v26; // eax
  unsigned int v27; // [esp+0h] [ebp-100h]
  unsigned int v28; // [esp+4h] [ebp-FCh]
  int v29; // [esp+8h] [ebp-F8h]
  int v30; // [esp+Ch] [ebp-F4h]
  int v31[60]; // [esp+10h] [ebp-F0h]

  result = a2;
  if ( a2 >= 2 )
  {
    v5 = a3;
    if ( a3 )
    {
      v6 = a1;
      v7 = a1 + a3 * (a2 - 1);
      v29 = 0;
      v27 = a1;
      v28 = v7;
      while ( 1 )
      {
        while ( 1 )
        {
          v8 = (v7 - v6) / v5 + 1;
          if ( v8 <= 8 )
          {
            shortsort(v6, v5, a4);
            goto LABEL_6;
          }
          v9 = (_BYTE *)(v6 + v5 * (v8 >> 1));
          if ( a4(v6, v9) > 0 )
          {
            v10 = v9;
            if ( (_BYTE *)v6 != v9 )
            {
              v11 = v6 - (_DWORD)v9;
              v12 = v5;
              do
              {
                v13 = v10[v11];
                v10[v11] = *v10;
                *v10++ = v13;
                --v12;
              }
              while ( v12 );
              v6 = v27;
              v7 = v28;
            }
          }
          if ( a4(v6, (_BYTE *)v7) > 0 )
          {
            v14 = (_BYTE *)v7;
            if ( v6 != v7 )
            {
              v15 = v6 - v7;
              v16 = v5;
              do
              {
                v17 = v14[v15];
                v14[v15] = *v14;
                *v14++ = v17;
                --v16;
              }
              while ( v16 );
              v6 = v27;
              v7 = v28;
            }
          }
          if ( a4((unsigned int)v9, (_BYTE *)v7) > 0 )
          {
            v18 = (_BYTE *)v7;
            if ( v9 != (_BYTE *)v7 )
            {
              v19 = &v9[-v7];
              v20 = v5;
              do
              {
                v21 = v18[(_DWORD)v19];
                v18[(_DWORD)v19] = *v18;
                *v18++ = v21;
                --v20;
              }
              while ( v20 );
              v6 = v27;
            }
          }
          v22 = (_BYTE *)v28;
          while ( 1 )
          {
            if ( (unsigned int)v9 > v6 )
            {
              while ( 1 )
              {
                v6 += v5;
                if ( v6 >= (unsigned int)v9 )
                  break;
                if ( a4(v6, v9) > 0 )
                {
                  if ( (unsigned int)v9 > v6 )
                    goto LABEL_30;
                  goto LABEL_28;
                }
              }
            }
            do
LABEL_28:
              v6 += v5;
            while ( v6 <= v28 && a4(v6, v9) <= 0 );
            do
LABEL_30:
              v22 -= v5;
            while ( v22 > v9 && a4((unsigned int)v22, v9) > 0 );
            if ( v6 > (unsigned int)v22 )
              break;
            v23 = v22;
            if ( (_BYTE *)v6 != v22 )
            {
              v24 = v6 - (_DWORD)v22;
              v30 = a3;
              do
              {
                v25 = v23[v24];
                v23[v24] = *v23;
                *v23++ = v25;
                --v30;
              }
              while ( v30 );
              v5 = a3;
            }
            if ( v9 == v22 )
              v9 = (_BYTE *)v6;
          }
          v7 = (unsigned int)&v22[v5];
          if ( (unsigned int)v9 >= v7 )
            goto LABEL_43;
          do
          {
            v7 -= v5;
            if ( v7 <= (unsigned int)v9 )
              goto LABEL_43;
          }
          while ( !a4(v7, v9) );
          if ( (unsigned int)v9 < v7 )
          {
LABEL_45:
            v26 = v27;
          }
          else
          {
LABEL_43:
            while ( 1 )
            {
              v26 = v27;
              v7 -= v5;
              if ( v7 <= v27 )
                break;
              if ( a4(v7, v9) )
                goto LABEL_45;
            }
          }
          if ( (int)(v7 - v26) >= (int)(v28 - v6) )
            break;
          if ( v6 < v28 )
          {
            v31[v29] = v6;
            v31[v29++ + 30] = v28;
          }
          if ( v26 >= v7 )
          {
LABEL_6:
            result = --v29;
            if ( v29 < 0 )
              return result;
            v27 = v31[result];
            v28 = v31[result + 30];
            v6 = v27;
            v7 = v28;
          }
          else
          {
            v6 = v27;
            v28 = v7;
          }
        }
        if ( v26 < v7 )
        {
          v31[v29] = v26;
          v31[v29++ + 30] = v7;
        }
        if ( v6 >= v28 )
          goto LABEL_6;
        v7 = v28;
        v27 = v6;
      }
    }
  }
  return result;
}
// 3004D620: using guessed type _DWORD __cdecl shortsort(_DWORD, _DWORD, _DWORD);

//----- (3004E3CD) --------------------------------------------------------
int __stdcall sub_3004E3CD(int a1, int a2, int a3)
{
  void *v3; // esp
  DWORD *v4; // eax
  DWORD *v5; // esi
  BOOL v6; // eax
  DWORD v7; // eax
  struct _OSVERSIONINFOA v9; // [esp-94h] [ebp-98h] BYREF

  if ( a2 == 1 )
  {
    v3 = alloca(148);
    v9.dwOSVersionInfoSize = 148;
    if ( !GetVersionExA(&v9) )
      return 0;
    dword_30079990 = v9.dwPlatformId;
    dword_3007999C = v9.dwMajorVersion;
    dword_300799A0 = v9.dwMinorVersion;
    dword_30079994 = v9.dwBuildNumber & 0x7FFF;
    if ( v9.dwPlatformId != 2 )
      dword_30079994 = v9.dwBuildNumber & 0x7FFF | 0x8000;
    dword_30079998 = v9.dwMinorVersion + (v9.dwMajorVersion << 8);
    if ( !_heap_init(1) )
      return 0;
    if ( !sub_3004FC89() )
      goto LABEL_7;
    sub_30051FD0();
    dword_300F2380 = (int)GetCommandLineA();
    Str = (char *)__crtGetEnvironmentStringsA();
    if ( _ioinit() >= 0 )
    {
      if ( sub_30051E0C() >= 0 && _setenvp() >= 0 && !sub_300516EB() )
      {
        ++dword_30079960;
        return 1;
      }
      _ioterm();
    }
    _mtterm();
LABEL_7:
    _heap_term();
    return 0;
  }
  if ( a2 )
  {
    if ( a2 == 2 )
    {
      v4 = (DWORD *)sub_300518D4(1, 136);
      v5 = v4;
      if ( !v4 )
        return 0;
      v6 = TlsSetValue(dwTlsIndex, v4);
      *(_DWORD *)&v9.szCSDVersion[124] = v5;
      if ( !v6 )
      {
        free(*(void **)&v9.szCSDVersion[124]);
        return 0;
      }
      _initptd(*(_DWORD *)&v9.szCSDVersion[124]);
      v7 = GetCurrentThreadId();
      v5[1] = -1;
      *v5 = v7;
    }
    else if ( a2 == 3 )
    {
      sub_3004FB12(0);
    }
  }
  else
  {
    if ( dword_30079960 <= 0 )
      return 0;
    --dword_30079960;
    if ( !dword_300799CC )
      _cexit();
    _ioterm();
    _mtterm();
    _heap_term();
  }
  return 1;
}
// 3004FA70: using guessed type int _mtterm(void);
// 3004FA8E: using guessed type _DWORD __cdecl _initptd(_DWORD);
// 3005198F: using guessed type int _ioinit(void);
// 30051B8D: using guessed type int _ioterm(void);
// 30051BD9: using guessed type int _setenvp(void);
// 30051EAE: using guessed type int __crtGetEnvironmentStringsA(void);
// 30052072: using guessed type _DWORD __cdecl _heap_init(_DWORD);
// 300520C3: using guessed type int _heap_term(void);
// 30079960: using guessed type int dword_30079960;
// 30079990: using guessed type int dword_30079990;
// 30079994: using guessed type int dword_30079994;
// 30079998: using guessed type int dword_30079998;
// 3007999C: using guessed type int dword_3007999C;
// 300799A0: using guessed type int dword_300799A0;
// 300799CC: using guessed type int dword_300799CC;
// 300F2380: using guessed type int dword_300F2380;

//----- (3004E7E1) --------------------------------------------------------
int __cdecl sub_3004E7E1(FILE *File, int a2, int a3)
{
  char v3; // bl
  int v4; // ecx
  int v5; // edi
  char *v6; // edi
  int v7; // eax
  char v8; // al
  int v9; // ecx
  char *v10; // eax
  char *v11; // eax
  char *v12; // esi
  __int64 v13; // rax
  __int16 *v14; // eax
  char *v15; // ecx
  int v16; // eax
  char *v17; // eax
  int v18; // ecx
  char *j; // eax
  _WORD *v20; // eax
  unsigned int v21; // ebx
  unsigned int v22; // edi
  char *i; // esi
  int v24; // eax
  unsigned __int64 v25; // rcx
  int v26; // ecx
  char *v27; // eax
  char *v28; // esi
  char v29; // bl
  int v30; // esi
  wchar_t *v31; // ebx
  int v32; // eax
  unsigned __int64 v34; // [esp-18h] [ebp-270h]
  char Str[511]; // [esp+4h] [ebp-254h] BYREF
  char v36; // [esp+203h] [ebp-55h] BYREF
  char MbCh[8]; // [esp+204h] [ebp-54h] BYREF
  int v38[3]; // [esp+20Ch] [ebp-4Ch] BYREF
  int v39; // [esp+218h] [ebp-40h]
  int v40; // [esp+21Ch] [ebp-3Ch]
  int v41; // [esp+220h] [ebp-38h]
  int v42; // [esp+224h] [ebp-34h]
  int v43; // [esp+228h] [ebp-30h]
  void *Block; // [esp+22Ch] [ebp-2Ch]
  int v45; // [esp+230h] [ebp-28h]
  int v46; // [esp+234h] [ebp-24h]
  int v47; // [esp+238h] [ebp-20h]
  char v48; // [esp+23Ch] [ebp-1Ch]
  char v49; // [esp+23Dh] [ebp-1Bh]
  int v50; // [esp+240h] [ebp-18h]
  int v51; // [esp+244h] [ebp-14h]
  char *v52; // [esp+248h] [ebp-10h]
  int v53; // [esp+24Ch] [ebp-Ch]
  int v54; // [esp+250h] [ebp-8h]
  unsigned int v55; // [esp+254h] [ebp-4h]
  unsigned int retaddr; // [esp+25Ch] [ebp+4h]
  char *v57; // [esp+264h] [ebp+Ch]

  v55 = retaddr ^ dword_300705C0;
  v51 = 0;
  v50 = 0;
  Block = 0;
  v3 = *(_BYTE *)a2;
  v4 = 0;
  if ( *(_BYTE *)a2 )
  {
    v5 = a2;
    while ( 1 )
    {
      v6 = (char *)(v5 + 1);
      v57 = v6;
      if ( v50 < 0 )
        return v50;
      if ( v3 < 32 || v3 > 120 )
        v7 = 0;
      else
        v7 = *((_BYTE *)&xmmword_30060240 + v3 + 8) & 0xF;
      v41 = byte_30060268[8 * v7 + v4] >> 4;
      switch ( v41 )
      {
        case 0:
          goto LABEL_50;
        case 1:
          v53 = -1;
          v40 = 0;
          v42 = 0;
          v46 = 0;
          v47 = 0;
          v54 = 0;
          v45 = 0;
          goto LABEL_184;
        case 2:
          switch ( v3 )
          {
            case ' ':
              v54 |= 2u;
              break;
            case '#':
              LOBYTE(v54) = v54 | 0x80;
              break;
            case '+':
              v54 |= 1u;
              break;
            case '-':
              v54 |= 4u;
              break;
            case '0':
              v54 |= 8u;
              break;
          }
          goto LABEL_184;
        case 3:
          if ( v3 == 42 )
          {
            a3 += 4;
            v46 = *(_DWORD *)(a3 - 4);
            if ( v46 < 0 )
            {
              v54 |= 4u;
              v46 = -v46;
            }
          }
          else
          {
            v46 = v3 + 10 * v46 - 48;
          }
          goto LABEL_184;
        case 4:
          v53 = 0;
          goto LABEL_184;
        case 5:
          if ( v3 == 42 )
          {
            a3 += 4;
            v53 = *(_DWORD *)(a3 - 4);
            if ( v53 < 0 )
              v53 = -1;
          }
          else
          {
            v53 = v3 + 10 * v53 - 48;
          }
          goto LABEL_184;
        case 6:
          switch ( v3 )
          {
            case 'I':
              v8 = *v6;
              if ( *v6 == 54 && v6[1] == 52 )
              {
                BYTE1(v54) |= 0x80u;
                v57 = v6 + 2;
              }
              else if ( v8 == 51 && v6[1] == 50 )
              {
                BYTE1(v54) &= 0x7Fu;
                v57 = v6 + 2;
              }
              else if ( v8 != 100 && v8 != 105 && v8 != 111 && v8 != 117 && v8 != 120 && v8 != 88 )
              {
                v41 = 0;
LABEL_50:
                v45 = 0;
                if ( *((char *)off_300705B8 + 2 * (unsigned __int8)v3 + 1) < 0 )
                {
                  write_char(File);
                  v57 = v6 + 1;
                }
                write_char(File);
              }
              break;
            case 'h':
              v54 |= 0x20u;
              break;
            case 'l':
              v54 |= 0x10u;
              break;
            case 'w':
              BYTE1(v54) |= 8u;
              break;
          }
          goto LABEL_184;
        case 7:
          if ( v3 > 103 )
          {
            switch ( v3 )
            {
              case 'i':
                goto LABEL_80;
              case 'n':
                a3 += 4;
                v20 = *(_WORD **)(a3 - 4);
                if ( (v54 & 0x20) != 0 )
                  *v20 = v50;
                else
                  *(_DWORD *)v20 = v50;
                v42 = 1;
                goto LABEL_182;
              case 'o':
                v51 = 8;
                if ( (v54 & 0x80u) != 0 )
                  BYTE1(v54) |= 2u;
                break;
              default:
                switch ( v3 )
                {
                  case 'p':
                    v53 = 8;
LABEL_121:
                    v43 = 7;
                    break;
                  case 's':
                    goto LABEL_63;
                  case 'u':
                    goto LABEL_81;
                  case 'x':
                    v43 = 39;
                    break;
                  default:
                    goto LABEL_159;
                }
                v51 = 16;
                if ( (v54 & 0x80u) != 0 )
                {
                  v48 = 48;
                  v49 = v43 + 81;
                  v47 = 2;
                }
                break;
            }
LABEL_82:
            if ( (v54 & 0x8000) != 0 )
            {
              v13 = *(_QWORD *)a3;
              a3 += 8;
            }
            else
            {
              a3 += 4;
              if ( (v54 & 0x20) != 0 )
              {
                if ( (v54 & 0x40) != 0 )
                  LODWORD(v13) = *(__int16 *)(a3 - 4);
                else
                  LODWORD(v13) = *(unsigned __int16 *)(a3 - 4);
              }
              else
              {
                LODWORD(v13) = *(_DWORD *)(a3 - 4);
                if ( (v54 & 0x40) == 0 )
                {
                  HIDWORD(v13) = 0;
                  goto LABEL_137;
                }
              }
              v13 = (int)v13;
            }
LABEL_137:
            if ( (v54 & 0x40) != 0 && v13 < 0 )
            {
              v13 = -v13;
              BYTE1(v54) |= 1u;
            }
            v22 = HIDWORD(v13);
            v21 = v13;
            if ( (v54 & 0x8000) == 0 )
              v22 = 0;
            if ( v53 >= 0 )
            {
              v54 &= 0xFFFFFFF7;
              if ( v53 > 512 )
                v53 = 512;
            }
            else
            {
              v53 = 1;
            }
            if ( !(v22 | (unsigned int)v13) )
              v47 = 0;
            for ( i = &v36; ; --i )
            {
              v24 = v53--;
              if ( v24 <= 0 && !(v22 | v21) )
                break;
              v34 = __PAIR64__(v22, v21);
              v25 = __PAIR64__(v22, v21) % v51;
              v26 = v25 + 48;
              v39 = HIDWORD(v25);
              v22 = (v34 / v51) >> 32;
              v21 = v34 / v51;
              if ( v26 > 57 )
                LOBYTE(v26) = v43 + v26;
              *i = v26;
            }
            v27 = (char *)(&v36 - i);
            v28 = i + 1;
            v51 = (int)v27;
            v52 = v28;
            if ( (v54 & 0x200) != 0 && (*v28 != 48 || !v27) )
            {
              *--v52 = 48;
              v16 = (int)(v27 + 1);
              goto LABEL_158;
            }
            goto LABEL_159;
          }
          if ( v3 >= 101 )
            goto LABEL_70;
          if ( v3 > 88 )
          {
            if ( v3 == 90 )
            {
              a3 += 4;
              v14 = *(__int16 **)(a3 - 4);
              if ( v14 && (v15 = (char *)*((_DWORD *)v14 + 1)) != 0 )
              {
                v16 = *v14;
                v52 = v15;
                if ( (v54 & 0x800) != 0 )
                {
                  v16 /= 2;
                  v45 = 1;
                }
                else
                {
                  v45 = 0;
                }
              }
              else
              {
                v52 = off_30070044;
                v16 = strlen(off_30070044);
              }
              goto LABEL_158;
            }
            if ( v3 == 99 )
              goto LABEL_74;
            if ( v3 != 100 )
              goto LABEL_159;
LABEL_80:
            v54 |= 0x40u;
LABEL_81:
            v51 = 10;
            goto LABEL_82;
          }
          switch ( v3 )
          {
            case 'X':
              goto LABEL_121;
            case 'C':
              if ( (v54 & 0x830) == 0 )
                BYTE1(v54) |= 8u;
LABEL_74:
              a3 += 4;
              if ( (v54 & 0x810) != 0 )
              {
                v51 = wctomb(Str, *(_WORD *)(a3 - 4));
                if ( v51 < 0 )
                  v42 = 1;
              }
              else
              {
                Str[0] = *(_BYTE *)(a3 - 4);
                v51 = 1;
              }
              v52 = Str;
              goto LABEL_159;
            case 'E':
            case 'G':
              v40 = 1;
              v3 += 32;
LABEL_70:
              v54 |= 0x40u;
              v12 = Str;
              v52 = Str;
              if ( v53 >= 0 )
              {
                if ( v53 )
                {
                  if ( v53 > 512 )
                    v53 = 512;
                  if ( v53 > 163 )
                  {
                    v17 = (char *)malloc(v53 + 349);
                    Block = v17;
                    if ( v17 )
                    {
                      v52 = v17;
                      v12 = v17;
                    }
                    else
                    {
                      v53 = 163;
                    }
                  }
                }
                else
                {
                  v53 = v3 == 103;
                }
              }
              else
              {
                v53 = 6;
              }
              v18 = *(_DWORD *)a3;
              v38[1] = *(_DWORD *)(a3 + 4);
              v38[0] = v18;
              off_300705A0(v38, v12, v3, v53, v40);
              break;
          }
          if ( v3 == 83 )
          {
            if ( (v54 & 0x830) == 0 )
              BYTE1(v54) |= 8u;
LABEL_63:
            v9 = v53;
            if ( v53 == -1 )
              v9 = 0x7FFFFFFF;
            a3 += 4;
            v10 = *(char **)(a3 - 4);
            v52 = v10;
            if ( (v54 & 0x810) != 0 )
            {
              if ( !v10 )
                v52 = (char *)off_30070048;
              v11 = v52;
              v45 = 1;
              while ( v9 )
              {
                --v9;
                if ( !*(_WORD *)v11 )
                  break;
                v11 += 2;
              }
              v16 = (v11 - v52) >> 1;
            }
            else
            {
              if ( !v10 )
                v52 = off_30070044;
              for ( j = v52; v9; ++j )
              {
                --v9;
                if ( !*j )
                  break;
              }
              v16 = j - v52;
            }
LABEL_158:
            v51 = v16;
          }
LABEL_159:
          if ( v42 )
            goto LABEL_182;
          v29 = v54;
          if ( (v54 & 0x40) == 0 )
            goto LABEL_168;
          if ( (v54 & 0x100) != 0 )
          {
            v48 = 45;
LABEL_167:
            v47 = 1;
            goto LABEL_168;
          }
          if ( (v54 & 1) != 0 )
          {
            v48 = 43;
            goto LABEL_167;
          }
          if ( (v54 & 2) != 0 )
          {
            v48 = 32;
            goto LABEL_167;
          }
LABEL_168:
          v30 = v46 - v47 - v51;
          if ( (v54 & 0xC) == 0 )
            write_multi_char(32, v46 - v47 - v51, File);
          write_string(v47);
          if ( (v29 & 8) != 0 && (v29 & 4) == 0 )
            write_multi_char(48, v30, File);
          if ( v45 && v51 > 0 )
          {
            v31 = (wchar_t *)v52;
            v39 = v51;
            do
            {
              --v39;
              v32 = wctomb(MbCh, *v31++);
              if ( v32 <= 0 )
                break;
              write_string(v32);
            }
            while ( v39 );
          }
          else
          {
            write_string(v51);
          }
          if ( (v54 & 4) != 0 )
            write_multi_char(32, v30, File);
LABEL_182:
          if ( Block )
          {
            free(Block);
            Block = 0;
          }
LABEL_184:
          v5 = (int)v57;
          v3 = *v57;
          if ( !*v57 )
            return v50;
          v4 = v41;
          break;
        default:
          goto LABEL_184;
      }
    }
  }
  return v50;
}
// 3004E78B: using guessed type int __cdecl write_string(_DWORD);
// 30060240: using guessed type __int128 xmmword_30060240;
// 30070048: using guessed type wchar_t *off_30070048;
// 300705A0: using guessed type int (__cdecl *off_300705A0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 300705B8: using guessed type void *off_300705B8;
// 300705C0: using guessed type int dword_300705C0;

//----- (3004F1AC) --------------------------------------------------------
int sub_3004F1AC()
{
  return 0;
}

//----- (3004F1D3) --------------------------------------------------------
int __cdecl sub_3004F1D3(void *a1, char *Source)
{
  char *v2; // esi
  char *v4; // edi
  char v5; // bl
  char *v6; // eax
  size_t v7; // eax
  size_t v8; // [esp-8h] [ebp-10h]
  char *Sourcea; // [esp+14h] [ebp+Ch]

  memset(a1, 0, 0x90u);
  v2 = Source;
  if ( !*Source )
    return 0;
  if ( *Source == 46 && Source[1] )
  {
    strcpy((char *)a1 + 128, Source + 1);
    return 0;
  }
  for ( Sourcea = 0; ; ++Sourcea )
  {
    v7 = strcspn(v2, "_.,");
    if ( !v7 )
      return -1;
    v4 = &v2[v7];
    v5 = v2[v7];
    if ( Sourcea )
    {
      if ( Sourcea == (char *)1 )
      {
        if ( v7 >= 0x40 || v5 == 95 )
          return -1;
        v8 = v7;
        v6 = (char *)a1 + 64;
      }
      else
      {
        if ( Sourcea != (char *)2 || v7 >= 0x10 || v5 && v5 != 44 )
          return -1;
        v8 = v7;
        v6 = (char *)a1 + 128;
      }
      strncpy(v6, v2, v8);
    }
    else
    {
      if ( v7 >= 0x40 || v5 == 46 )
        return -1;
      strncpy((char *)a1, v2, v7);
    }
    if ( v5 == 44 || !v5 )
      break;
    v2 = v4 + 1;
  }
  return 0;
}

//----- (3004F3ED) --------------------------------------------------------
char *__cdecl sub_3004F3ED(char *Str2, char *Destination, void *a3, void *a4)
{
  char *result; // eax
  char Source[144]; // [esp+4h] [ebp-30h] BYREF
  unsigned int v6; // [esp+94h] [ebp+60h]
  unsigned int retaddr; // [esp+9Ch] [ebp+68h]

  v6 = retaddr ^ dword_300705C0;
  if ( !Str2 )
    return 0;
  if ( *Str2 != 67 || Str2[1] )
  {
    if ( strcmp(Str1, Str2) && strcmp(aC, Str2) )
    {
      if ( sub_3004F1D3(Source, Str2) || !__get_qualified_locale((int)Source, (int)&unk_30079974, Source) )
        return 0;
      dword_3007997C = (unsigned __int16)word_30079978;
      __lc_lctostr(Str1, Source);
      if ( *Str2 )
        strcpy(aC, Str2);
      else
        strcpy(aC, Str1);
    }
    if ( a3 )
      memcpy_0(a3, &unk_30079974, 6u);
    if ( a4 )
      memcpy_0(a4, &dword_3007997C, 4u);
    strcpy(Destination, Str1);
    result = Str1;
  }
  else
  {
    result = Destination;
    Destination[1] = 0;
    *Destination = 67;
    if ( a3 )
    {
      *(_WORD *)a3 = 0;
      *((_WORD *)a3 + 1) = 0;
      *((_WORD *)a3 + 2) = 0;
    }
    if ( a4 )
      *(_DWORD *)a4 = 0;
  }
  return result;
}
// 300705C0: using guessed type int dword_300705C0;
// 30079978: using guessed type __int16 word_30079978;
// 3007997C: using guessed type int dword_3007997C;

//----- (3004F519) --------------------------------------------------------
char *__usercall sub_3004F519@<eax>(int a1@<esi>, char *Str2)
{
  char *result; // eax
  size_t v3; // eax
  int *v4; // edi
  int v5; // ecx
  int *v6; // eax
  int v7; // edx
  int v8; // edx
  int *v9; // eax
  int v10; // eax
  void *v11; // [esp-8h] [ebp-158h]
  WORD Buf1[128]; // [esp+4h] [ebp-14Ch] BYREF
  char Str[132]; // [esp+104h] [ebp-4Ch] BYREF
  char v14[8]; // [esp+188h] [ebp+38h] BYREF
  int v15; // [esp+190h] [ebp+40h]
  __int16 Src[4]; // [esp+198h] [ebp+48h] BYREF
  int v17; // [esp+1A0h] [ebp+50h]
  int v18; // [esp+1A8h] [ebp+58h]
  UINT v19; // [esp+1ACh] [ebp+5Ch]
  void *Block; // [esp+1B0h] [ebp+60h]
  void *v21; // [esp+1B4h] [ebp+64h]
  UINT CodePage; // [esp+1B8h] [ebp+68h] BYREF
  void *v23; // [esp+1BCh] [ebp+6Ch]
  unsigned int v24; // [esp+1C0h] [ebp+70h]
  unsigned int retaddr; // [esp+1C8h] [ebp+78h]

  v24 = retaddr ^ dword_300705C0;
  result = sub_3004F3ED(Str2, Str, Src, &CodePage);
  if ( result )
  {
    if ( strcmp(Str, (&::Block)[3 * a1]) )
    {
      v3 = strlen(Str);
      Block = malloc(v3 + 1);
      if ( !Block )
        return 0;
      v21 = (&::Block)[3 * a1];
      v4 = &dword_30079C74[a1];
      v17 = *v4;
      v23 = (char *)&unk_30079C94 + 6 * a1;
      memcpy_0(v14, v23, 6u);
      v19 = dword_30079C8C;
      (&::Block)[3 * a1] = strcpy((char *)Block, Str);
      *v4 = (unsigned __int16)Src[0];
      memcpy_0(v23, Src, 6u);
      if ( a1 == 2 )
      {
        v5 = dword_300700D0;
        v23 = 0;
        dword_30079C8C = CodePage;
        v18 = dword_300700D4;
        v6 = dword_300700B0;
        while ( CodePage != *v6 )
        {
          v7 = *v6;
          v23 = (char *)v23 + 1;
          *v6 = v5;
          v15 = v7;
          v8 = v6[1];
          v6[1] = v18;
          v5 = v15;
          v6 += 2;
          v18 = v8;
          if ( (int)v6 >= (int)aC )
            goto LABEL_11;
        }
        v9 = &dword_300700B0[2 * (_DWORD)v23];
        dword_300700B0[0] = *v9;
        dword_300700B4 = v9[1];
        *v9 = v5;
        v9[1] = v18;
LABEL_11:
        if ( v23 == (void *)5 )
        {
          if ( __crtGetStringTypeA(1u, &MultiByteStr, 127, Buf1, CodePage, dword_30079C7C, 1) )
            v10 = memcmp(Buf1, aHH, 0xFEu) == 0;
          else
            v10 = 0;
          dword_300700B4 = v10;
          dword_300700B0[0] = dword_30079C8C;
        }
        else
        {
          v10 = dword_300700B4;
        }
        dword_300707F0 = v10;
      }
      if ( a1 == 1 )
        dword_30079C90 = CodePage;
      if ( (*(&funcs_3004F6DF + 3 * a1))() )
      {
        v11 = Block;
        (&::Block)[3 * a1] = (char *)v21;
        free(v11);
        *v4 = v17;
        dword_30079C8C = v19;
        return 0;
      }
      if ( v21 != &unk_30070050 )
        free(v21);
    }
    result = (&::Block)[3 * a1];
  }
  return result;
}
// 300602E0: using guessed type wchar_t aHH[32];
// 300700B0: using guessed type int dword_300700B0[];
// 300700B4: using guessed type int dword_300700B4;
// 300700D0: using guessed type int dword_300700D0;
// 300700D4: using guessed type int dword_300700D4;
// 300701F0: using guessed type int (*funcs_3004F6DF)();
// 300705C0: using guessed type int dword_300705C0;
// 300707F0: using guessed type int dword_300707F0;
// 30079C74: using guessed type int dword_30079C74[];
// 30079C90: using guessed type int dword_30079C90;

//----- (3004F737) --------------------------------------------------------
char *__fastcall sub_3004F737(char *Str2, int a2)
{
  char *v2; // edi
  char *v4; // esi
  char *v5; // eax
  char *v6; // ebx
  size_t v7; // eax
  const char **v8; // esi
  size_t v9; // eax
  const char *v10; // ebx
  size_t v11; // eax
  size_t v12; // edi
  int v13; // esi
  const char *v14; // edi
  int v16; // esi
  const char **v17; // ebx
  char Destination[132]; // [esp+Ch] [ebp-1Ch] BYREF
  int v19; // [esp+90h] [ebp+68h]
  size_t v20; // [esp+94h] [ebp+6Ch]
  int v21; // [esp+98h] [ebp+70h]
  unsigned int v22; // [esp+9Ch] [ebp+74h]
  unsigned int retaddr; // [esp+A4h] [ebp+7Ch]

  v22 = retaddr ^ dword_300705C0;
  v2 = Str2;
  if ( !a2 )
  {
    v20 = 1;
    v21 = 0;
    if ( Str2 )
    {
      if ( *Str2 == 76 && Str2[1] == 67 && Str2[2] == 95 )
      {
        do
        {
          v5 = strpbrk(v2, "=;");
          v6 = v5;
          if ( !v5 )
            return 0;
          v7 = v5 - v2;
          v20 = v7;
          if ( !v7 || *v6 == 59 )
            return 0;
          v19 = 1;
          v8 = (const char **)&off_300701F4;
          while ( 1 )
          {
            if ( !strncmp(*v8, v2, v7) )
            {
              v9 = strlen(*v8);
              if ( v20 == v9 )
                break;
            }
            ++v19;
            v8 += 3;
            if ( (int)v8 > (int)&off_30070224 )
              break;
            v7 = v20;
          }
          v10 = v6 + 1;
          v11 = strcspn(v10, ";");
          v12 = v11;
          if ( !v11 && *v10 != 59 )
            return 0;
          v13 = v19;
          if ( v19 <= 5 )
          {
            strncpy(Destination, v10, v11);
            Destination[v12] = 0;
            if ( sub_3004F519(v13, Destination) )
              ++v21;
          }
          v14 = &v10[v12];
          if ( !*v14 )
            break;
          v2 = (char *)(v14 + 1);
        }
        while ( *v2 );
        v4 = 0;
        if ( !v21 )
          return v4;
      }
      else
      {
        v4 = sub_3004F3ED(Str2, Destination, 0, 0);
        if ( !v4 )
          return v4;
        v16 = 0;
        v17 = (const char **)&Block;
        do
        {
          if ( v17 != (const char **)&Block )
          {
            if ( !strcmp(Destination, *v17) || sub_3004F519(v16, Destination) )
              ++v21;
            else
              v20 = 0;
          }
          v17 += 3;
          ++v16;
        }
        while ( (int)v17 <= (int)&off_30070228 );
        if ( v20 )
        {
          v4 = (char *)_setlocale_get_all();
          free(Block);
          Block = 0;
          return v4;
        }
        if ( !v21 )
          return 0;
      }
    }
    return (char *)_setlocale_get_all();
  }
  if ( Str2 )
    return sub_3004F519(a2, Str2);
  return (&Block)[3 * a2];
}
// 3004F32E: using guessed type int _setlocale_get_all(void);
// 300701F4: using guessed type char *off_300701F4;
// 30070224: using guessed type char *off_30070224;
// 30070228: using guessed type void *off_30070228;
// 300705C0: using guessed type int dword_300705C0;

//----- (3004FB12) --------------------------------------------------------
DWORD __cdecl sub_3004FB12(void *Block)
{
  DWORD result; // eax
  void **v2; // esi
  _DWORD *v3; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // ecx
  _DWORD *v7; // ecx
  _DWORD *v8; // ecx
  _DWORD *v9; // ecx
  int savedregs; // [esp+2Ch] [ebp+0h]

  result = dwTlsIndex;
  if ( dwTlsIndex != -1 )
  {
    v2 = (void **)Block;
    if ( Block || (v2 = (void **)TlsGetValue(dwTlsIndex)) != 0 )
    {
      if ( v2[9] )
        free(v2[9]);
      if ( v2[11] )
        free(v2[11]);
      if ( v2[13] )
        free(v2[13]);
      if ( v2[15] )
        free(v2[15]);
      if ( v2[17] )
        free(v2[17]);
      if ( v2[18] )
        free(v2[18]);
      if ( v2[21] != &unk_30070820 )
        free(v2[21]);
      _lock(13);
      v3 = v2[24];
      if ( v3 )
      {
        if ( (*v3)-- == 1 && v3 != dword_300F0FE8 )
          free(v3);
      }
      _unlock(13);
      _lock(12);
      v5 = v2[25];
      if ( v5 )
      {
        --*v5;
        v6 = (_DWORD *)v5[11];
        if ( v6 )
          --*v6;
        v7 = (_DWORD *)v5[13];
        if ( v7 )
          --*v7;
        v8 = (_DWORD *)v5[12];
        if ( v8 )
          --*v8;
        v9 = (_DWORD *)v5[16];
        if ( v9 )
          --*v9;
        --*(_DWORD *)(v5[19] + 180);
        if ( v5 != off_300700AC && v5 != (_DWORD *)&unk_30070058 && !*v5 )
          __freetlocinfo(v5);
      }
      savedregs = 805633098;
      _unlock(12);
      free(v2);
    }
    result = TlsSetValue(dwTlsIndex, 0);
  }
  return result;
}
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 3005480A: using guessed type _DWORD __cdecl _lock(_DWORD);

//----- (3004FC89) --------------------------------------------------------
int sub_3004FC89()
{
  DWORD *v0; // eax
  DWORD *v1; // esi
  DWORD v2; // eax
  int result; // eax

  if ( _mtinitlocks()
    && (dwTlsIndex = TlsAlloc(), dwTlsIndex != -1)
    && (v0 = (DWORD *)sub_300518D4(1, 136), (v1 = v0) != 0)
    && TlsSetValue(dwTlsIndex, v0) )
  {
    v1[21] = (DWORD)&unk_30070820;
    v1[5] = 1;
    v2 = GetCurrentThreadId();
    v1[1] = -1;
    *v1 = v2;
    result = 1;
  }
  else
  {
    _mtterm();
    result = 0;
  }
  return result;
}
// 3004FA70: using guessed type int _mtterm(void);
// 300546C0: using guessed type int _mtinitlocks(void);

//----- (3005010C) --------------------------------------------------------
int *__cdecl sub_3005010C(int *a1, char *a2)
{
  int v2; // edi
  char v3; // bl
  int v4; // eax
  int *result; // eax
  char *v6; // ecx
  char v7[12]; // [esp+Ch] [ebp-1Ch] BYREF
  int v8; // [esp+18h] [ebp-10h] BYREF
  int v9; // [esp+1Ch] [ebp-Ch]
  char *v10[2]; // [esp+20h] [ebp-8h] BYREF
  unsigned int retaddr; // [esp+2Ch] [ebp+4h]

  v10[1] = (char *)(retaddr ^ dword_300705C0);
  v2 = 0;
  v3 = sub_30056600((int)v7, v10, a2, 0, 0, 0, 0);
  if ( (v3 & 4) != 0 )
  {
    v2 = 512;
    v8 = 0;
    v9 = 0;
  }
  else
  {
    v4 = sub_3005648E((int)v7, (int)&v8);
    if ( (v3 & 2) != 0 || v4 == 1 )
      v2 = 128;
    if ( (v3 & 1) != 0 || v4 == 2 )
      v2 |= 0x100u;
  }
  result = a1;
  v6 = (char *)(v10[0] - a2);
  *a1 = v2;
  a1[1] = (int)v6;
  a1[4] = v8;
  a1[5] = v9;
  return result;
}
// 300705C0: using guessed type int dword_300705C0;

//----- (30050564) --------------------------------------------------------
int sub_30050564()
{
  int result; // eax

  _cfltcvt_init_2();
  dword_30079988 = _ms_p5_mp_test_fdiv();
  result = _setdefaultprecision();
  __asm { fnclex }
  return result;
}
// 3005051C: using guessed type int _cfltcvt_init_2(void);
// 30056E9F: using guessed type int _setdefaultprecision(void);
// 30056EF1: using guessed type int _ms_p5_mp_test_fdiv(void);
// 30079988: using guessed type int dword_30079988;

//----- (300505D3) --------------------------------------------------------
int __cdecl sub_300505D3(FILE *Stream, int a2, int a3)
{
  int v3; // eax
  int v4; // ecx
  int v5; // esi
  int v6; // eax
  unsigned __int8 *v7; // esi
  int v8; // edi
  int v9; // ebx
  int v10; // eax
  int v11; // ecx
  wchar_t *v12; // ebx
  int v13; // edi
  int v14; // esi
  int v15; // eax
  FILE *v16; // esi
  int v17; // ecx
  int v18; // eax
  int v19; // ebx
  char *v20; // esi
  int v21; // ebx
  FILE *v22; // edi
  int v24; // eax
  int v25; // ecx
  int v28; // eax
  int v30; // eax
  int v31; // ecx
  int v34; // eax
  bool v35; // zf
  unsigned __int8 *v36; // edi
  _BYTE *v37; // ebx
  void *v38; // esp
  unsigned __int8 v39; // dl
  unsigned __int8 v40; // al
  unsigned int v41; // esi
  unsigned __int8 v42; // al
  wchar_t *v43; // esi
  int v45; // eax
  int v46; // eax
  int v47; // ecx
  int v48; // eax
  int v49; // ecx
  int v50; // eax
  int v51; // eax
  int v52; // eax
  int v53; // ecx
  int v54; // eax
  int v55; // eax
  int v56; // ebx
  int v57; // eax
  unsigned __int8 *v58; // esi
  int v59; // eax
  int result; // eax
  _QWORD v61[3]; // [esp-20h] [ebp-204h] BYREF
  __int64 v62; // [esp-8h] [ebp-1ECh]
  wchar_t DstCh; // [esp+Ch] [ebp-1D8h] BYREF
  char SrcCh[4]; // [esp+10h] [ebp-1D4h] BYREF
  int v65; // [esp+14h] [ebp-1D0h]
  unsigned __int8 *v66; // [esp+18h] [ebp-1CCh]
  char v67; // [esp+1Ch] [ebp-1C8h] BYREF
  char v68; // [esp+1Dh] [ebp-1C7h] BYREF
  int v69; // [esp+17Ch] [ebp-68h]
  wchar_t *v70; // [esp+180h] [ebp-64h]
  int v71; // [esp+184h] [ebp-60h]
  unsigned __int64 v72; // [esp+188h] [ebp-5Ch]
  int v73; // [esp+190h] [ebp-54h]
  char v74; // [esp+195h] [ebp-4Fh]
  char v75; // [esp+196h] [ebp-4Eh]
  char v76; // [esp+197h] [ebp-4Dh]
  char v77; // [esp+198h] [ebp-4Ch]
  char v78; // [esp+199h] [ebp-4Bh]
  char v79; // [esp+19Ah] [ebp-4Ah]
  char v80; // [esp+19Bh] [ebp-49h]
  int v81; // [esp+19Ch] [ebp-48h]
  int v82; // [esp+1A0h] [ebp-44h]
  int v83; // [esp+1A4h] [ebp-40h]
  unsigned __int8 v84; // [esp+1ABh] [ebp-39h]
  int v85; // [esp+1ACh] [ebp-38h]
  int v86; // [esp+1B0h] [ebp-34h]
  int v87; // [esp+1B4h] [ebp-30h]
  char v88[5]; // [esp+1BBh] [ebp-29h]
  int v89; // [esp+1C0h] [ebp-24h]
  void *Block; // [esp+1C4h] [ebp-20h]
  unsigned int v91; // [esp+1C8h] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+1CCh] [ebp-18h]
  unsigned int retaddr; // [esp+1E8h] [ebp+4h]
  unsigned __int8 *v94; // [esp+1F0h] [ebp+Ch]

  v91 = retaddr ^ dword_300705C0;
  Block = 0;
  v89 = 0;
  v88[4] = 0;
  *(_DWORD *)v88 = 0;
  v87 = 0;
  v86 = 0;
  do
  {
    while ( 1 )
    {
      if ( !*(_BYTE *)a2 )
        goto LABEL_272;
      v3 = isspace(*(unsigned __int8 *)a2);
      v4 = HIDWORD(v62);
      if ( !v3 )
        break;
      --v87;
      do
      {
        ++v87;
        v5 = _inc(v4, Stream);
        v6 = isspace(v5);
        v4 = HIDWORD(v62);
      }
      while ( v6 );
      if ( v5 != -1 )
        ungetc(v5, Stream);
      do
        ++a2;
      while ( isspace(*(unsigned __int8 *)a2) );
    }
    v7 = (unsigned __int8 *)a2;
    if ( *(_BYTE *)a2 != 37 )
    {
      ++v87;
      v56 = _inc(HIDWORD(v62), Stream);
      *(_DWORD *)&v88[1] = v56;
      v57 = *(unsigned __int8 *)a2;
      v58 = (unsigned __int8 *)++a2;
      if ( v57 == v56 )
      {
        if ( *((char *)off_300705B8 + 2 * (unsigned __int8)v56 + 1) >= 0 )
          continue;
        ++v87;
        v59 = _inc(off_300705B8, Stream);
        a2 = (int)(v58 + 1);
        if ( *v58 == v59 )
        {
          --v87;
          continue;
        }
        if ( v59 != -1 )
          ungetc(v59, Stream);
      }
      v35 = v56 == -1;
      goto LABEL_266;
    }
    v8 = 0;
    v85 = 0;
    v84 = 0;
    v83 = 0;
    v82 = 0;
    v81 = 0;
    v80 = 0;
    v79 = 0;
    v78 = 0;
    v77 = 0;
    v76 = 0;
    v75 = 0;
    v74 = 1;
    v73 = 0;
    do
    {
      v9 = *++v7;
      v10 = isdigit((unsigned __int8)v9);
      v11 = HIDWORD(v62);
      if ( v10 )
      {
        ++v82;
        v8 = v9 + 10 * v8 - 48;
        continue;
      }
      if ( v9 > 78 )
      {
        if ( v9 == 104 )
        {
          --v74;
          --v75;
        }
        else
        {
          if ( v9 == 108 )
          {
            ++v74;
          }
          else if ( v9 != 119 )
          {
            goto LABEL_37;
          }
          ++v75;
        }
      }
      else
      {
        switch ( v9 )
        {
          case 'N':
            continue;
          case '*':
            ++v78;
            continue;
          case 'F':
            continue;
        }
        if ( v9 != 73 )
        {
          if ( v9 == 76 )
          {
            ++v74;
            continue;
          }
LABEL_37:
          ++v77;
          continue;
        }
        LOBYTE(v11) = v7[1];
        if ( (_BYTE)v11 == 54 && v7[2] == 52 )
        {
          v7 += 2;
          ++v73;
          v72 = 0i64;
          continue;
        }
        if ( (_BYTE)v11 == 51 && v7[2] == 50 )
        {
          v7 += 2;
          continue;
        }
        if ( (_BYTE)v11 != 100 && (_BYTE)v11 != 105 && (_BYTE)v11 != 111 && (_BYTE)v11 != 120 && (_BYTE)v11 != 88 )
          goto LABEL_37;
      }
    }
    while ( !v77 );
    v81 = v8;
    v94 = v7;
    if ( v78 )
    {
      v12 = v70;
    }
    else
    {
      v71 = a3;
      a3 += 4;
      v12 = *(wchar_t **)(a3 - 4);
      v70 = v12;
    }
    v77 = 0;
    if ( !v75 )
    {
      if ( *v7 == 83 || *v7 == 67 )
        v75 = 1;
      else
        v75 = -1;
    }
    v13 = *v7 | 0x20;
    v69 = v13;
    if ( v13 == 110 )
    {
LABEL_55:
      v16 = Stream;
    }
    else
    {
      if ( v13 != 99 && v13 != 123 )
      {
        do
        {
          ++v87;
          v14 = _inc(v11, Stream);
          v15 = isspace(v14);
          v11 = HIDWORD(v62);
        }
        while ( v15 );
        *(_DWORD *)&v88[1] = v14;
        goto LABEL_55;
      }
      ++v87;
      v16 = Stream;
      *(_DWORD *)&v88[1] = _inc(v11, Stream);
    }
    v17 = v82;
    if ( v82 && !v81 )
      goto LABEL_117;
    if ( v13 > 111 )
    {
      switch ( v13 )
      {
        case 'p':
          v74 = 1;
          break;
        case 's':
LABEL_109:
          if ( v75 > 0 )
            v76 = 1;
          goto LABEL_145;
        case 'u':
          break;
        case 'x':
LABEL_70:
          v19 = *(_DWORD *)&v88[1];
          if ( *(_DWORD *)&v88[1] == 45 )
          {
            v79 = 1;
          }
          else if ( *(_DWORD *)&v88[1] != 43 )
          {
LABEL_168:
            if ( v19 != 48 )
            {
LABEL_204:
              if ( v73 )
              {
                if ( !v77 )
                {
                  while ( v13 != 120 && v13 != 112 )
                  {
                    v48 = isdigit(v19);
                    v49 = HIDWORD(v62);
                    if ( !v48 )
                      goto LABEL_216;
                    if ( v13 == 111 )
                    {
                      if ( v19 >= 56 )
                        goto LABEL_216;
                      v49 = v72 >> 29;
                      v72 *= 8i64;
                    }
                    else
                    {
                      v62 = 10i64;
                      v61[2] = v72;
                      v72 *= 10i64;
                    }
LABEL_217:
                    if ( v77 )
                    {
                      --v87;
                      if ( v19 != -1 )
                        ungetc(v19, v16);
                    }
                    else
                    {
                      ++v83;
                      v72 += v19 - 48;
                      if ( !v82 || (--v81, v81) )
                      {
                        ++v87;
                        v19 = _inc(v49, v16);
                      }
                      else
                      {
                        v77 = 1;
                      }
                    }
                    if ( v77 )
                    {
                      *(_DWORD *)&v88[1] = v19;
                      goto LABEL_226;
                    }
                  }
                  v50 = isxdigit(v19);
                  v49 = HIDWORD(v62);
                  if ( v50 )
                  {
                    v72 *= 16i64;
                    v51 = isdigit(v19);
                    v49 = HIDWORD(v62);
                    if ( !v51 )
                      v19 = (v19 & 0xFFFFFFDF) - 7;
                    goto LABEL_217;
                  }
LABEL_216:
                  ++v77;
                  goto LABEL_217;
                }
LABEL_226:
                if ( v79 )
                  v72 = -(__int64)v72;
LABEL_251:
                if ( v83 )
                {
                  if ( v78 )
                    goto LABEL_259;
                  ++v86;
                  v12 = v70;
                  v18 = v85;
                  goto LABEL_254;
                }
                goto LABEL_272;
              }
              if ( v77 )
              {
LABEL_249:
                if ( v79 )
                  v85 = -v85;
                goto LABEL_251;
              }
              while ( v13 != 120 && v13 != 112 )
              {
                v52 = isdigit(v19);
                v53 = HIDWORD(v62);
                if ( !v52 )
                  goto LABEL_239;
                if ( v13 == 111 )
                {
                  if ( v19 >= 56 )
                    goto LABEL_239;
                  v85 *= 8;
                }
                else
                {
                  v85 *= 10;
                }
LABEL_240:
                if ( v77 )
                {
                  --v87;
                  if ( v19 != -1 )
                    ungetc(v19, v16);
                }
                else
                {
                  ++v83;
                  v85 = v85 + v19 - 48;
                  if ( !v82 || (--v81, v81) )
                  {
                    ++v87;
                    v19 = _inc(v53, v16);
                  }
                  else
                  {
                    v77 = 1;
                  }
                }
                if ( v77 )
                {
                  *(_DWORD *)&v88[1] = v19;
                  goto LABEL_249;
                }
              }
              v54 = isxdigit(v19);
              v53 = HIDWORD(v62);
              if ( v54 )
              {
                v85 *= 16;
                v55 = isdigit(v19);
                v53 = HIDWORD(v62);
                if ( !v55 )
                  v19 = (v19 & 0xFFFFFFDF) - 7;
                goto LABEL_240;
              }
LABEL_239:
              ++v77;
              goto LABEL_240;
            }
            ++v87;
            v46 = _inc(v17, v16);
            v19 = v46;
            *(_DWORD *)&v88[1] = v46;
            if ( (_BYTE)v46 == 120 || (_BYTE)v46 == 88 )
            {
              ++v87;
              v19 = _inc(v47, v16);
              *(_DWORD *)&v88[1] = v19;
              if ( v82 )
              {
                v81 -= 2;
                if ( v81 < 1 )
                  ++v77;
              }
              HIDWORD(v62) = 120;
              goto LABEL_176;
            }
            v83 = 1;
            if ( v13 != 120 )
            {
              if ( v82 )
              {
                if ( !--v81 )
                  ++v77;
              }
              HIDWORD(v62) = 111;
LABEL_176:
              v13 = HIDWORD(v62);
              goto LABEL_204;
            }
            --v87;
            if ( v46 != -1 )
              ungetc(v46, v16);
            v19 = 48;
LABEL_203:
            *(_DWORD *)&v88[1] = v19;
            goto LABEL_204;
          }
          if ( --v81 || !v82 )
          {
            ++v87;
            v19 = _inc(v82, v16);
            *(_DWORD *)&v88[1] = v19;
          }
          else
          {
            v77 = 1;
          }
          goto LABEL_168;
        case '{':
          if ( v75 > 0 )
            v76 = 1;
          v36 = v94 + 1;
          v94 = v36;
          v66 = v36;
          if ( *v36 == 94 )
          {
            v66 = ++v36;
            v80 = -1;
          }
          v37 = Block;
          if ( !Block )
          {
            v38 = alloca(32);
            ms_exc.old_esp = (DWORD)v61;
            v37 = v61;
            Block = v61;
            ms_exc.registration.TryLevel = -1;
          }
          memset(v37, 0, 0x20u);
          if ( v69 == 123 && *v36 == 93 )
          {
            v39 = 93;
            ++v36;
            v37[11] = 32;
            goto LABEL_141;
          }
LABEL_140:
          v39 = v84;
LABEL_141:
          while ( 1 )
          {
            v42 = *v36;
            if ( *v36 == 93 )
              break;
            ++v36;
            if ( v42 != 45 || !v39 || (LOBYTE(v17) = *v36, *v36 == 93) )
            {
              v84 = v42;
              v17 = v42 & 7;
              v37[v42 >> 3] |= 1 << v17;
              goto LABEL_140;
            }
            ++v36;
            if ( v39 >= (unsigned __int8)v17 )
            {
              v40 = v39;
              v39 = v17;
            }
            else
            {
              v40 = v17;
            }
            if ( v39 <= v40 )
            {
              v41 = v39;
              v65 = (unsigned __int8)(v40 - v39 + 1);
              do
              {
                v17 = v41 & 7;
                v37[v41++ >> 3] |= 1 << v17;
                --v65;
              }
              while ( v65 );
            }
            v39 = 0;
          }
          v12 = v70;
          if ( v69 == 123 )
            v94 = v36;
          v13 = v69;
LABEL_145:
          v43 = v12;
          --v87;
          if ( *(_DWORD *)&v88[1] != -1 )
          {
            ungetc(*(int *)&v88[1], Stream);
            v17 = HIDWORD(v62);
          }
          while ( 1 )
          {
            if ( v82 )
            {
              if ( !v81-- )
                break;
            }
            ++v87;
            v45 = _inc(v17, Stream);
            *(_DWORD *)&v88[1] = v45;
            if ( v45 == -1 )
              goto LABEL_187;
            if ( v13 != 99 && (v13 != 115 || v45 >= 9 && v45 <= 13 || v45 == 32) )
            {
              if ( v13 != 123 || (v17 = v80 ^ *((char *)Block + (v45 >> 3)), ((1 << (v45 & 7)) & v17) == 0) )
              {
LABEL_187:
                --v87;
                if ( v45 != -1 )
                  ungetc(v45, Stream);
                break;
              }
              v13 = v69;
            }
            if ( v78 )
            {
              v43 = (wchar_t *)((char *)v43 + 1);
            }
            else
            {
              if ( v76 )
              {
                SrcCh[0] = v45;
                if ( *((char *)off_300705B8 + 2 * (unsigned __int8)v45 + 1) < 0 )
                {
                  ++v87;
                  SrcCh[1] = _inc(off_300705B8, Stream);
                }
                mbtowc(&DstCh, SrcCh, SrcSizeInBytes);
                *v12++ = DstCh;
              }
              else
              {
                *(_BYTE *)v12 = v45;
                v12 = (wchar_t *)((char *)v12 + 1);
              }
              v70 = v12;
            }
          }
          if ( v43 != v12 )
          {
            if ( !v78 )
            {
              ++v86;
              if ( v69 != 99 )
              {
                if ( v76 )
                  *v70 = 0;
                else
                  *(_BYTE *)v70 = 0;
              }
            }
            goto LABEL_259;
          }
          goto LABEL_272;
        default:
LABEL_116:
          if ( *v94 == *(_DWORD *)&v88[1] )
          {
            --v88[0];
            if ( !v78 )
              a3 = v71;
            goto LABEL_259;
          }
LABEL_117:
          v35 = *(_DWORD *)&v88[1] == -1;
LABEL_266:
          if ( !v35 )
            ungetc(*(int *)&v88[1], Stream);
          goto LABEL_272;
      }
LABEL_196:
      v19 = *(_DWORD *)&v88[1];
      if ( *(_DWORD *)&v88[1] == 45 )
      {
        v79 = 1;
      }
      else if ( *(_DWORD *)&v88[1] != 43 )
      {
        goto LABEL_204;
      }
      if ( !--v81 && v82 )
      {
        v77 = 1;
        goto LABEL_204;
      }
      ++v87;
      v19 = _inc(v82, v16);
      goto LABEL_203;
    }
    switch ( v13 )
    {
      case 'o':
        goto LABEL_196;
      case 'c':
        if ( !v82 )
        {
          v82 = 1;
          ++v81;
        }
        goto LABEL_109;
      case 'd':
        goto LABEL_196;
    }
    if ( v13 <= 100 )
      goto LABEL_116;
    if ( v13 <= 103 )
    {
      v20 = &v67;
      v21 = *(_DWORD *)&v88[1];
      if ( *(_DWORD *)&v88[1] == 45 )
      {
        v67 = 45;
        v20 = &v68;
        goto LABEL_75;
      }
      if ( *(_DWORD *)&v88[1] == 43 )
      {
LABEL_75:
        --v81;
        ++v87;
        v22 = Stream;
        v21 = ((int (*)(void))_inc)();
        *(_DWORD *)&v88[1] = v21;
      }
      else
      {
        v22 = Stream;
      }
      if ( !v82 || v81 > 349 )
        v81 = 349;
      while ( 1 )
      {
        v24 = isdigit(v21);
        v25 = HIDWORD(v62);
        if ( !v24 )
          break;
        if ( !v81-- )
          break;
        ++v83;
        *v20++ = v21;
        ++v87;
        v21 = ((int (*)(void))_inc)();
        *(_DWORD *)&v88[1] = v21;
      }
      if ( byte_30070804 == (_BYTE)v21 )
      {
        if ( v81-- )
        {
          ++v87;
          v21 = _inc(HIDWORD(v62), v22);
          *v20++ = byte_30070804;
          while ( 1 )
          {
            *(_DWORD *)&v88[1] = v21;
            v28 = isdigit(v21);
            v25 = HIDWORD(v62);
            if ( !v28 )
              break;
            if ( !v81-- )
              break;
            ++v83;
            *v20++ = v21;
            ++v87;
            v21 = _inc(v25, v22);
          }
        }
      }
      if ( v83 && (v21 == 101 || v21 == 69) )
      {
        if ( v81-- )
        {
          *v20++ = 101;
          ++v87;
          v30 = _inc(v25, v22);
          v21 = v30;
          *(_DWORD *)&v88[1] = v30;
          if ( v30 == 45 )
          {
            *v20++ = 45;
            goto LABEL_96;
          }
          if ( v30 == 43 )
          {
LABEL_96:
            if ( !v81-- )
            {
              v81 = 0;
              goto LABEL_101;
            }
            goto LABEL_100;
          }
LABEL_101:
          while ( 1 )
          {
            v34 = isdigit(v21);
            v31 = HIDWORD(v62);
            if ( !v34 )
              break;
            if ( !v81-- )
              break;
            ++v83;
            *v20++ = v21;
LABEL_100:
            ++v87;
            v21 = _inc(v31, v22);
            *(_DWORD *)&v88[1] = v21;
          }
        }
      }
      --v87;
      if ( v21 != -1 )
        ungetc(v21, v22);
      if ( v83 )
      {
        if ( !v78 )
        {
          ++v86;
          *v20 = 0;
          off_300705A8(v74 - 1, v70, &v67);
        }
        goto LABEL_259;
      }
      break;
    }
    if ( v13 == 105 )
    {
      v13 = 100;
      goto LABEL_70;
    }
    if ( v13 != 110 )
      goto LABEL_116;
    v18 = v87;
    if ( v78 )
      goto LABEL_259;
LABEL_254:
    if ( v73 )
    {
      *(_QWORD *)v12 = v72;
    }
    else if ( v74 )
    {
      *(_DWORD *)v12 = v18;
    }
    else
    {
      *v12 = v18;
    }
LABEL_259:
    ++v88[0];
    a2 = (int)(v94 + 1);
  }
  while ( *(_DWORD *)&v88[1] != -1 || *(_BYTE *)a2 == 37 && *(_BYTE *)(a2 + 1) == 110 );
LABEL_272:
  if ( v89 == 1 )
    free(Block);
  result = v86;
  if ( *(_DWORD *)&v88[1] == -1 && !v86 && !v88[0] )
    result = -1;
  return result;
}
// 30050F75: conditional instruction was optimized away because of 'edi.4 in (==64|6F..72|>=74)'
// 30050990: variable 'v31' is possibly undefined
// 30050BB9: variable 'v17' is possibly undefined
// 30050D00: variable 'v47' is possibly undefined
// 30050593: using guessed type int __fastcall _inc(_DWORD, _DWORD);
// 300705A8: using guessed type int (__cdecl *off_300705A8)(_DWORD, _DWORD, _DWORD);
// 300705B8: using guessed type void *off_300705B8;
// 300705C0: using guessed type int dword_300705C0;
// 30070804: using guessed type char byte_30070804;

//----- (300510B0) --------------------------------------------------------
int sub_300510B0()
{
  unsigned int v0; // kr00_4
  unsigned int v1; // kr04_4

  v0 = __readeflags();
  __writeeflags(v0 ^ 0x200000);
  v1 = __readeflags();
  _EDX = v1 - v0;
  if ( v1 != v0 )
  {
    __writeeflags(v0);
    _EAX = 1;
    __asm { cpuid }
  }
  dword_300F2374 = 0;
  dword_300F2370 = 0;
  if ( (_EDX & 0x4000000) != 0 && has_osfxsr_set() )
  {
    dword_300F2374 = 1;
    dword_300F2370 = 1;
  }
  return 0;
}
// 3005107B: using guessed type int has_osfxsr_set(void);
// 300F2370: using guessed type int dword_300F2370;
// 300F2374: using guessed type int dword_300F2374;

//----- (300516EB) --------------------------------------------------------
int sub_300516EB()
{
  int result; // eax
  int (**v1)(void); // esi
  void (**v2)(void); // esi

  if ( off_30070248 )
    off_30070248();
  result = 0;
  v1 = (int (**)(void))&unk_3007000C;
  if ( &unk_3007000C >= (_UNKNOWN *)&dword_30070020 )
  {
LABEL_9:
    atexit(sub_30052014);
    v2 = (void (**)(void))&unk_30070000;
    if ( &unk_30070000 < (_UNKNOWN *)&dword_30070008 )
    {
      do
      {
        if ( *v2 )
          (*v2)();
        ++v2;
      }
      while ( v2 < &dword_30070008 );
    }
    result = 0;
  }
  else
  {
    while ( !result )
    {
      if ( *v1 )
        result = (*v1)();
      if ( ++v1 >= &dword_30070020 )
      {
        if ( result )
          return result;
        goto LABEL_9;
      }
    }
  }
  return result;
}
// 30070248: using guessed type int (*off_30070248)(void);

//----- (30051750) --------------------------------------------------------
int __cdecl sub_30051750(UINT uExitCode, int a2, int a3)
{
  HANDLE v3; // eax
  void (**v4)(void); // eax
  bool i; // cf
  void (*v6)(void); // eax
  void (**v7)(void); // edi
  void (**v8)(void); // edi

  _lock(8);
  if ( dword_300799D0 == 1 )
  {
    v3 = GetCurrentProcess();
    TerminateProcess(v3, uExitCode);
  }
  dword_300799CC = 1;
  byte_300799C8 = a3;
  if ( !a2 )
  {
    if ( dword_300F2368 )
    {
      v4 = (void (**)(void))(dword_300F2364 - 4);
      for ( i = dword_300F2364 - 4 < (unsigned int)dword_300F2368; ; i = dword_300F2364 - 4 < (unsigned int)dword_300F2368 )
      {
        dword_300F2364 = (int)v4;
        if ( i )
          break;
        v6 = *v4;
        if ( v6 )
          v6();
        v4 = (void (**)(void))(dword_300F2364 - 4);
      }
    }
    v7 = (void (**)(void))&unk_30070024;
    if ( &unk_30070024 < (_UNKNOWN *)&dword_3007002C )
    {
      do
      {
        if ( *v7 )
          (*v7)();
        ++v7;
      }
      while ( v7 < &dword_3007002C );
    }
  }
  v8 = (void (**)(void))&unk_30070030;
  if ( &unk_30070030 < (_UNKNOWN *)dword_30070034 )
  {
    do
    {
      if ( *v8 )
        (*v8)();
      ++v8;
    }
    while ( v8 < dword_30070034 );
  }
  if ( !a3 )
  {
    dword_300799D0 = 1;
    __crtExitProcess(uExitCode);
  }
  return _unlock(8);
}
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 3005480A: using guessed type _DWORD __cdecl _lock(_DWORD);
// 300799C8: using guessed type char byte_300799C8;
// 300799CC: using guessed type int dword_300799CC;
// 300799D0: using guessed type int dword_300799D0;
// 300F2364: using guessed type int dword_300F2364;

//----- (300518D4) --------------------------------------------------------
int __cdecl sub_300518D4(int a1, int a2)
{
  unsigned int v2; // esi
  LPVOID v3; // edi
  int result; // eax
  void *v5; // [esp+Ch] [ebp-20h]
  unsigned int Size; // [esp+10h] [ebp-1Ch]

  v2 = a2 * a1;
  Size = a2 * a1;
  if ( !(a2 * a1) )
    ++v2;
  while ( 1 )
  {
    v3 = 0;
    if ( v2 <= 0xFFFFFFE0 )
    {
      if ( dword_300F2248 == 3 )
      {
        v2 = (v2 + 15) & 0xFFFFFFF0;
        if ( Size <= dword_300F0FD4 )
        {
          _lock(4);
          v5 = (void *)__sbh_alloc_block(Size);
          _unlock(4);
          v3 = v5;
          if ( !v5 )
          {
LABEL_9:
            v3 = HeapAlloc(hHeap, 8u, v2);
            goto LABEL_10;
          }
          memset(v5, 0, Size);
        }
      }
      if ( v3 )
        return (int)v3;
      goto LABEL_9;
    }
LABEL_10:
    if ( v3 || !dword_30079CC0 )
      return (int)v3;
    result = _callnewh(v2);
    if ( !result )
      return result;
  }
}
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 3005480A: using guessed type _DWORD __cdecl _lock(_DWORD);
// 30058EBA: using guessed type _DWORD __cdecl __sbh_alloc_block(_DWORD);
// 300F0FD4: using guessed type int dword_300F0FD4;
// 300F2248: using guessed type int dword_300F2248;

//----- (30051E0C) --------------------------------------------------------
int sub_30051E0C()
{
  void *v0; // eax
  int v1; // edi
  int v3; // [esp+Ch] [ebp-8h]
  int v4; // [esp+10h] [ebp-4h] BYREF

  if ( !dword_300F236C )
    __initmbctable();
  byte_30079ADC = 0;
  GetModuleFileNameA(0, Filename, 0x104u);
  dword_300799C0 = (int)Filename;
  parse_cmdline(0, &v4);
  v0 = malloc(4 * v4 + v3);
  v1 = (int)v0;
  if ( !v0 )
    return -1;
  parse_cmdline(v0, &v4);
  dword_300799A4 = v4 - 1;
  dword_300799A8 = v1;
  return 0;
}
// 30051E70: variable 'v3' is possibly undefined
// 30051CA0: using guessed type _DWORD __cdecl parse_cmdline(_DWORD, _DWORD);
// 30055E83: using guessed type int __initmbctable(void);
// 300799A4: using guessed type int dword_300799A4;
// 300799A8: using guessed type int dword_300799A8;
// 300799C0: using guessed type int dword_300799C0;
// 30079ADC: using guessed type char byte_30079ADC;
// 300F236C: using guessed type int dword_300F236C;

//----- (30051FD0) --------------------------------------------------------
void sub_30051FD0()
{
  void (**i)(void); // [esp+Ch] [ebp-1Ch]

  for ( i = dword_3006F404; i < dword_3006F404; ++i )
  {
    if ( *i )
      (*i)();
  }
}

//----- (30052014) --------------------------------------------------------
void __cdecl sub_30052014()
{
  void (**i)(void); // [esp+Ch] [ebp-1Ch]

  for ( i = &dword_3006F40C; i < &dword_3006F40C; ++i )
  {
    if ( *i )
      (*i)();
  }
}

//----- (3005218D) --------------------------------------------------------
BOOL __stdcall DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved)
{
  return 1;
}

//----- (30052193) --------------------------------------------------------
unsigned int __cdecl sub_30052193(DWORD NumberOfBytesWritten)
{
  unsigned int result; // eax
  int v2; // esi
  char *v3; // edi
  size_t v4; // ebx
  void *v5; // esp
  const char **v6; // esi
  HANDLE v7; // eax
  const char *v8; // [esp-10h] [ebp-128h]
  DWORD v9; // [esp-Ch] [ebp-124h]
  DWORD *v10; // [esp-8h] [ebp-120h]
  int v11; // [esp-4h] [ebp-11Ch]
  char v12[12]; // [esp+0h] [ebp-118h] BYREF
  CHAR Filename[264]; // [esp+Ch] [ebp-10Ch] BYREF
  unsigned int v14; // [esp+114h] [ebp-4h]
  int savedregs; // [esp+118h] [ebp+0h] BYREF
  unsigned int retaddr; // [esp+11Ch] [ebp+4h]

  v14 = retaddr ^ dword_300705C0;
  for ( result = 0; result < 0x12; ++result )
  {
    if ( NumberOfBytesWritten == dword_30070290[2 * result] )
      break;
  }
  v2 = 2 * result;
  if ( NumberOfBytesWritten == dword_30070290[2 * result] )
  {
    result = dword_3007996C;
    if ( dword_3007996C == 1 || !dword_3007996C && dword_30079970 == 1 )
    {
      v11 = 0;
      v10 = &NumberOfBytesWritten;
      v6 = (const char **)&(&off_30070294)[v2];
      v9 = strlen(*v6);
      v8 = *v6;
      v7 = GetStdHandle(0xFFFFFFF4);
      result = WriteFile(v7, v8, v9, &NumberOfBytesWritten, 0);
    }
    else if ( NumberOfBytesWritten != 252 )
    {
      Filename[260] = 0;
      if ( !GetModuleFileNameA(0, Filename, 0x104u) )
        strcpy(Filename, "<program name unknown>");
      v3 = Filename;
      if ( strlen(Filename) + 1 > 0x3C )
      {
        v3 = (char *)&savedregs + strlen(Filename) - 327;
        strncpy(v3, "...", 3u);
      }
      v4 = strlen(v3);
      v5 = alloca(v4 + strlen((&off_30070294)[v2]) + 28);
      strcpy(v12, "Runtime Error!\n\nProgram: ");
      strcat(v12, v3);
      strcat(v12, "\n\n");
      strcat(v12, (&off_30070294)[v2]);
      result = __crtMessageBoxA(v12, "Microsoft Visual C++ Runtime Library", 8208);
    }
  }
  return result;
}
// 30059296: using guessed type _DWORD __cdecl __crtMessageBoxA(_DWORD, _DWORD, __int16);
// 30070290: using guessed type int dword_30070290[];
// 30070294: using guessed type char *off_30070294;
// 300705C0: using guessed type int dword_300705C0;
// 3007996C: using guessed type int dword_3007996C;
// 30079970: using guessed type int dword_30079970;

//----- (3005248C) --------------------------------------------------------
int __cdecl sub_3005248C(int FileHandle, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite)
{
  int *v4; // ebx
  int v5; // esi
  int v6; // eax
  DWORD v7; // ecx
  char *v8; // eax
  char *v9; // edx
  char v10; // dl
  signed int v11; // edi
  char Buffer[1028]; // [esp+4h] [ebp-420h] BYREF
  DWORD NumberOfBytesWritten; // [esp+408h] [ebp-1Ch] BYREF
  int v14; // [esp+40Ch] [ebp-18h]
  DWORD v15; // [esp+410h] [ebp-14h]
  char *v16; // [esp+414h] [ebp-10h]
  int i; // [esp+418h] [ebp-Ch]
  DWORD v18; // [esp+41Ch] [ebp-8h]
  unsigned int v19; // [esp+420h] [ebp-4h]
  unsigned int retaddr; // [esp+428h] [ebp+4h]

  v19 = retaddr ^ dword_300705C0;
  v15 = 0;
  v14 = 0;
  if ( !nNumberOfBytesToWrite )
    return 0;
  v4 = &dword_300F2260[FileHandle >> 5];
  v5 = 36 * (FileHandle & 0x1F);
  if ( (*(_BYTE *)(*v4 + v5 + 4) & 0x20) != 0 )
    _lseeki64_lk(FileHandle, 0, 0, 2u);
  v6 = v5 + *v4;
  if ( *(char *)(v6 + 4) >= 0 )
  {
    if ( WriteFile(*(HANDLE *)v6, lpBuffer, nNumberOfBytesToWrite, &NumberOfBytesWritten, 0) )
    {
      v18 = 0;
      v15 = NumberOfBytesWritten;
    }
    else
    {
      v18 = GetLastError();
    }
  }
  else
  {
    v16 = (char *)lpBuffer;
    v18 = 0;
    while ( 1 )
    {
      v7 = v16 - (_BYTE *)lpBuffer;
      v8 = Buffer;
      for ( i = 0; i < 1024; ++i )
      {
        if ( v7 >= nNumberOfBytesToWrite )
          break;
        v9 = v16++;
        v10 = *v9;
        ++v7;
        if ( v10 == 10 )
        {
          ++v14;
          *v8++ = 13;
          ++i;
        }
        *v8++ = v10;
      }
      v11 = v8 - Buffer;
      if ( !WriteFile(*(HANDLE *)(*v4 + 36 * (FileHandle & 0x1F)), Buffer, v8 - Buffer, &NumberOfBytesWritten, 0) )
        break;
      v15 += NumberOfBytesWritten;
      if ( (int)NumberOfBytesWritten < v11 || v16 - (_BYTE *)lpBuffer >= nNumberOfBytesToWrite )
        goto LABEL_17;
    }
    v18 = GetLastError();
  }
LABEL_17:
  if ( v15 )
    return v15 - v14;
  if ( v18 )
  {
    if ( v18 == 5 )
    {
      *_errno() = 9;
      *__doserrno() = 5;
    }
    else
    {
      _dosmaperr(v18);
    }
    return -1;
  }
  if ( (*(_BYTE *)(*v4 + v5 + 4) & 0x40) == 0 || *(_BYTE *)lpBuffer != 26 )
  {
    *_errno() = 28;
    *__doserrno() = 0;
    return -1;
  }
  return 0;
}
// 30052502: conditional instruction was optimized away because of '%nNumberOfBytesToWrite.4!=0'
// 300580D4: using guessed type _DWORD __cdecl _dosmaperr(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 300F2260: using guessed type int dword_300F2260[];

//----- (30052631) --------------------------------------------------------
int __cdecl sub_30052631(int a1, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite)
{
  int *v3; // edi
  int v4; // esi
  int result; // eax
  int v6; // [esp+Ch] [ebp-1Ch]

  if ( a1 < uNumber && (v3 = &dword_300F2260[a1 >> 5], v4 = 36 * (a1 & 0x1F), (*(_BYTE *)(*v3 + v4 + 4) & 1) != 0) )
  {
    sub_300594CB(a1);
    if ( (*(_BYTE *)(*v3 + v4 + 4) & 1) != 0 )
    {
      v6 = sub_3005248C(a1, lpBuffer, nNumberOfBytesToWrite);
    }
    else
    {
      *_errno() = 9;
      *__doserrno() = 0;
      v6 = -1;
    }
    _unlock_fhandle(a1);
    result = v6;
  }
  else
  {
    *_errno() = 9;
    *__doserrno() = 0;
    result = -1;
  }
  return result;
}
// 3005953E: using guessed type _DWORD __cdecl _unlock_fhandle(_DWORD);
// 300F2260: using guessed type int dword_300F2260[];

//----- (300532E5) --------------------------------------------------------
void __cdecl sub_300532E5(int a1, int a2, WORD *a3, _DWORD *a4, _DWORD *a5, _DWORD *a6)
{
  const CHAR *v6; // ebx
  int (__stdcall *v7)(LCID, DWORD, const SYSTEMTIME *, LPCSTR, LPSTR, int); // ecx
  int v8; // eax
  void *v9; // esp
  CHAR *v10; // edi
  int i; // eax
  CHAR v12; // cl
  int v13; // edx
  const CHAR *v14; // eax
  const CHAR *v15; // eax
  int v16; // edx
  unsigned __int8 v17; // al
  int v18; // ecx
  int v19; // ecx
  int v20; // ecx
  int v21; // ecx
  unsigned __int8 *v22; // eax
  _BYTE v23[12]; // [esp+0h] [ebp-58h] BYREF
  int v24; // [esp+Ch] [ebp-4Ch]
  int v25; // [esp+10h] [ebp-48h]
  char v26; // [esp+17h] [ebp-41h]
  const CHAR *v27; // [esp+18h] [ebp-40h]
  _BYTE *v28; // [esp+1Ch] [ebp-3Ch]
  int v29; // [esp+20h] [ebp-38h]
  size_t Size; // [esp+24h] [ebp-34h]
  SYSTEMTIME Date; // [esp+28h] [ebp-30h] BYREF
  int (__stdcall *v32)(LCID, DWORD, const SYSTEMTIME *, LPCSTR, LPSTR, int); // [esp+38h] [ebp-20h]
  const CHAR *v33; // [esp+3Ch] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+40h] [ebp-18h]

  if ( a2 )
  {
    if ( a2 == 1 )
      v6 = (const CHAR *)a6[41];
    else
      v6 = (const CHAR *)a6[42];
  }
  else
  {
    v6 = (const CHAR *)a6[40];
  }
  v33 = v6;
  if ( a6[44] == 1 )
    goto LABEL_18;
  v7 = GetDateFormatA;
  if ( a2 == 2 )
    v7 = GetTimeFormatA;
  v32 = v7;
  Date.wYear = a3[10] + 1900;
  Date.wMonth = a3[8] + 1;
  Date.wDay = a3[6];
  Date.wHour = a3[4];
  Date.wMinute = a3[2];
  Date.wSecond = *a3;
  Date.wMilliseconds = 0;
  v8 = v7(a6[43], 0, &Date, v6, 0, 0);
  Size = v8;
  if ( !v8 )
  {
LABEL_18:
    v12 = *v6;
    if ( !*v6 )
      return;
    while ( 1 )
    {
      v13 = 0;
      if ( !*a5 )
        return;
      v26 = 0;
      v25 = 0;
      v14 = v6;
      do
      {
        ++v14;
        ++v13;
      }
      while ( *v14 == v12 );
      v24 = v13;
      v27 = v14;
      if ( v12 > 100 )
      {
        v18 = v12 - 104;
        if ( v18 )
        {
          v19 = v18 - 5;
          if ( v19 )
          {
            v20 = v19 - 6;
            if ( v20 )
            {
              v21 = v20 - 1;
              if ( !v21 )
              {
                if ( *((int *)a3 + 2) > 11 )
                  v22 = (unsigned __int8 *)a6[39];
                else
                  v22 = (unsigned __int8 *)a6[38];
                if ( v13 > 0 )
                {
                  do
                  {
                    if ( !*a5 )
                      break;
                    if ( *(char *)(*(_DWORD *)(a1 + 72) + 2 * *v22 + 1) < 0 && *a5 > 1u )
                    {
                      *(_BYTE *)(*a4)++ = *v22++;
                      --*a5;
                    }
                    *(_BYTE *)(*a4)++ = *v22++;
                    --*a5;
                    --v24;
                  }
                  while ( v24 > 0 );
                }
                goto LABEL_85;
              }
              if ( v21 == 5 )
              {
                if ( v13 == 2 )
                {
                  v26 = 121;
                }
                else if ( v13 == 4 )
                {
                  v26 = 89;
                }
              }
            }
            else
            {
              if ( v13 == 1 )
              {
                v25 = 1;
              }
              else if ( v13 != 2 )
              {
                goto LABEL_101;
              }
              v26 = 83;
            }
          }
          else
          {
            if ( v13 == 1 )
            {
              v25 = 1;
            }
            else if ( v13 != 2 )
            {
              goto LABEL_101;
            }
            v26 = 77;
          }
        }
        else
        {
          if ( v13 == 1 )
          {
            v25 = 1;
          }
          else if ( v13 != 2 )
          {
            goto LABEL_101;
          }
          v26 = 73;
        }
      }
      else
      {
        switch ( v12 )
        {
          case 'd':
            if ( v13 == 1 )
            {
              v25 = 1;
            }
            else if ( v13 != 2 )
            {
              if ( v13 == 3 )
              {
                v26 = 97;
              }
              else if ( v13 == 4 )
              {
                v26 = 65;
              }
              break;
            }
            v26 = 100;
            break;
          case '\'':
            v6 += v13;
            if ( (v13 & 1) != 0 )
            {
              while ( 1 )
              {
                v17 = *v6;
                if ( !*v6 || !*a5 )
                  break;
                if ( v17 == 39 )
                {
                  ++v6;
                  goto LABEL_107;
                }
                if ( *(char *)(*(_DWORD *)(a1 + 72) + 2 * v17 + 1) < 0 && *a5 > 1u )
                {
                  *(_BYTE *)(*a4)++ = v17;
                  ++v6;
                  --*a5;
                }
                *(_BYTE *)(*a4)++ = *v6++;
                --*a5;
              }
            }
            goto LABEL_107;
          case 'A':
LABEL_29:
            if ( !__ascii_stricmp(v6, "am/pm") )
            {
              v15 = v6 + 5;
              goto LABEL_46;
            }
            if ( !__ascii_stricmp(v6, "a/p") )
            {
              v15 = v6 + 3;
LABEL_46:
              v27 = v15;
            }
            v26 = 112;
            break;
          case 'H':
            v16 = v13 - 1;
            if ( v16 )
            {
              if ( v16 != 1 )
                break;
            }
            else
            {
              v25 = 1;
            }
            v26 = 72;
            break;
          case 'M':
            if ( v13 == 1 )
            {
              v25 = 1;
            }
            else if ( v13 != 2 )
            {
              if ( v13 == 3 )
              {
                v26 = 98;
              }
              else if ( v13 == 4 )
              {
                v26 = 66;
              }
              break;
            }
            v26 = 109;
            break;
          case 'a':
            goto LABEL_29;
        }
      }
LABEL_101:
      if ( !v26 )
      {
        if ( *(char *)(*(_DWORD *)(a1 + 72) + 2 * *(unsigned __int8 *)v6 + 1) < 0 && *a5 > 1u )
        {
          *(_BYTE *)(*a4)++ = *v6++;
          --*a5;
        }
        *(_BYTE *)(*a4)++ = *v6++;
        --*a5;
        goto LABEL_107;
      }
      sub_300530A5(a1, a6, v25);
LABEL_85:
      v6 = v27;
LABEL_107:
      v12 = *v6;
      if ( !*v6 )
        return;
    }
  }
  v29 = 0;
  v9 = alloca(v8);
  ms_exc.old_esp = (DWORD)v23;
  v10 = v23;
  v28 = v23;
  ms_exc.registration.TryLevel = -1;
  if ( !v23 )
  {
    v10 = (CHAR *)malloc(Size);
    if ( v10 )
    {
      v29 = 1;
      goto LABEL_13;
    }
    goto LABEL_18;
  }
LABEL_13:
  v27 = v10;
  for ( i = v32(a6[43], 0, &Date, v6, v10, Size) - 1; i > 0; --i )
  {
    if ( !*a5 )
      break;
    *(_BYTE *)(*a4)++ = *v27++;
    --*a5;
  }
  if ( v29 )
    free(v10);
}
// 300530A5: using guessed type _DWORD __cdecl sub_300530A5(_DWORD, _DWORD, _DWORD);
// 3005A2E0: using guessed type _DWORD __cdecl __ascii_stricmp(_DWORD, _DWORD);

//----- (300536F7) --------------------------------------------------------
unsigned int __cdecl sub_300536F7(int a1, unsigned __int8 *a2, unsigned int a3, unsigned __int8 *a4, int a5, int a6)
{
  int v6; // edi
  unsigned __int8 v8; // al
  _BYTE *v9; // esi
  int v10; // eax
  unsigned int v12; // [esp+20h] [ebp+1Ch]

  v6 = a6;
  if ( !a6 )
    v6 = *(_DWORD *)(a1 + 76);
  v12 = a3;
  if ( !a3 )
    return 0;
  do
  {
    v8 = *a4;
    if ( !*a4 )
      break;
    if ( v8 == 37 )
    {
      v9 = a4 + 1;
      v10 = 0;
      if ( *v9 == 35 )
      {
        v10 = 1;
        ++v9;
      }
      sub_300530A5(a1, v6, v10);
      a4 = v9 + 1;
    }
    else
    {
      if ( *((char *)off_300705B8 + 2 * v8 + 1) < 0 && v12 > 1 )
      {
        *a2++ = v8;
        ++a4;
        --v12;
      }
      *a2++ = *a4++;
      --v12;
    }
  }
  while ( v12 );
  if ( !v12 )
    return 0;
  *a2 = 0;
  return a3 - v12;
}
// 300530A5: using guessed type _DWORD __cdecl sub_300530A5(_DWORD, _DWORD, _DWORD);
// 300705B8: using guessed type void *off_300705B8;

//----- (300542EE) --------------------------------------------------------
int sub_300542EE()
{
  int v0; // ebx
  _DWORD *v1; // esi
  _WORD *v2; // edi
  void *v3; // eax
  int i; // eax
  BYTE *v5; // eax
  int v6; // edx
  int v7; // ecx
  void *v8; // esi
  BYTE *v9; // eax
  int v10; // ecx
  _WORD *v11; // edx
  struct _cpinfo CPInfo; // [esp+10h] [ebp-24h] BYREF
  void *v14; // [esp+24h] [ebp-10h]
  _WORD *v15; // [esp+28h] [ebp-Ch]
  void *Block; // [esp+2Ch] [ebp-8h]
  unsigned int v17; // [esp+30h] [ebp-4h]
  unsigned int retaddr; // [esp+38h] [ebp+4h]

  v0 = 0;
  v17 = retaddr ^ dword_300705C0;
  Block = 0;
  if ( dword_30079C7C )
  {
    if ( !dword_30079C8C && sub_3005A32E(0, (unsigned __int16)word_30079CA0, 0x1004u, (int)&dword_30079C8C) )
    {
      v2 = v15;
    }
    else
    {
      v1 = malloc(4u);
      v14 = v1;
      v2 = malloc(0x202u);
      v15 = v2;
      v3 = malloc(0x101u);
      Block = v3;
      if ( v1 )
      {
        if ( v2 )
        {
          if ( v3 )
          {
            *v1 = 0;
            for ( i = 0; i < 256; ++i )
              *((_BYTE *)Block + i) = i;
            if ( GetCPInfo(dword_30079C8C, &CPInfo) && CPInfo.MaxCharSize <= 5 )
            {
              SrcSizeInBytes = LOWORD(CPInfo.MaxCharSize);
              if ( LOWORD(CPInfo.MaxCharSize) > 1u && CPInfo.LeadByte[0] )
              {
                v5 = &CPInfo.LeadByte[1];
                do
                {
                  LOBYTE(v6) = *v5;
                  if ( !*v5 )
                    break;
                  v7 = *(v5 - 1);
                  v6 = (unsigned __int8)v6;
                  while ( v7 <= v6 )
                  {
                    *((_BYTE *)Block + v7) = 0;
                    v6 = *v5;
                    ++v7;
                  }
                  v5 += 2;
                }
                while ( *(v5 - 1) );
              }
              v8 = v2 + 1;
              if ( __crtGetStringTypeA(1u, (LPCCH)Block, 256, v2 + 1, 0, 0, 0) )
              {
                *v2 = 0;
                if ( (int)SrcSizeInBytes > 1 && CPInfo.LeadByte[0] )
                {
                  v9 = &CPInfo.LeadByte[1];
                  do
                  {
                    if ( !*v9 )
                      break;
                    v10 = *(v9 - 1);
                    if ( v10 <= *v9 )
                    {
                      v11 = &v2[v10 + 1];
                      do
                      {
                        *v11 = 0x8000;
                        ++v10;
                        ++v11;
                      }
                      while ( v10 <= *v9 );
                      v2 = v15;
                    }
                    v9 += 2;
                  }
                  while ( *(v9 - 1) );
                }
                off_300705B8 = v8;
                dword_300F1224 = (int)v14;
                dword_300F1220 = (int)v2;
                goto LABEL_30;
              }
            }
          }
        }
      }
    }
    free(v14);
    free(v2);
    v0 = 1;
LABEL_30:
    free(Block);
    return v0;
  }
  off_300705B8 = &unk_300609DA;
  dword_300F1224 = 0;
  dword_300F1220 = 0;
  return 0;
}
// 300705B8: using guessed type void *off_300705B8;
// 300705C0: using guessed type int dword_300705C0;
// 30079CA0: using guessed type __int16 word_30079CA0;
// 300F1220: using guessed type int dword_300F1220;
// 300F1224: using guessed type int dword_300F1224;

//----- (30054502) --------------------------------------------------------
int sub_30054502()
{
  return 0;
}

//----- (3005478B) --------------------------------------------------------
int __cdecl sub_3005478B(int a1)
{
  LPCRITICAL_SECTION *v1; // esi
  struct _RTL_CRITICAL_SECTION *v3; // edi

  v1 = &lpCriticalSection + 2 * a1;
  if ( *v1 )
    return 1;
  v3 = (struct _RTL_CRITICAL_SECTION *)malloc(0x18u);
  if ( !v3 )
    goto LABEL_4;
  _lock(10);
  if ( *v1 )
  {
    free(v3);
  }
  else
  {
    if ( !__crtInitCritSecAndSpinCount(v3, 4000) )
    {
      free(v3);
      _unlock(10);
LABEL_4:
      *_errno() = 12;
      return 0;
    }
    *v1 = v3;
  }
  _unlock(10);
  return 1;
}
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 3005480A: using guessed type _DWORD __cdecl _lock(_DWORD);
// 3005920B: using guessed type _DWORD __cdecl __crtInitCritSecAndSpinCount(_DWORD, _DWORD);

//----- (30054CD7) --------------------------------------------------------
int __thiscall sub_30054CD7(char *Str1)
{
  char *v1; // esi
  int result; // eax
  char v3[8]; // [esp+4h] [ebp-Ch] BYREF
  unsigned int v4; // [esp+Ch] [ebp-4h]
  unsigned int retaddr; // [esp+14h] [ebp+4h]

  v1 = Str1;
  v4 = retaddr ^ dword_300705C0;
  if ( Str1 && *Str1 && strcmp(Str1, "ACP") )
  {
    if ( strcmp(v1, "OCP") )
      return atol(v1);
    result = dword_30079C70(dword_30079C58, 11, v3, 8);
  }
  else
  {
    result = dword_30079C70(dword_30079C58, 4100, v3, 8);
  }
  if ( !result )
    return result;
  v1 = v3;
  return atol(v1);
}
// 300705C0: using guessed type int dword_300705C0;
// 30079C58: using guessed type int dword_30079C58;
// 30079C70: using guessed type int (__stdcall *dword_30079C70)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (30054EA6) --------------------------------------------------------
BOOL __thiscall LocaleEnumProc(void *this, LPSTR a2)
{
  int v2; // esi
  BOOL result; // eax
  char String2[120]; // [esp+4h] [ebp-7Ch] BYREF
  unsigned int v5; // [esp+7Ch] [ebp-4h]
  unsigned int retaddr; // [esp+84h] [ebp+4h]

  v5 = retaddr ^ dword_300705C0;
  v2 = LcidFromHexString(this, a2);
  if ( dword_30079C70(v2, dword_30079C60 != 0 ? 7 : 4098, String2, 120) )
  {
    if ( !_stricmp(String1, String2) )
    {
      if ( TestDefaultCountry(v2) )
      {
        dword_30079C50 |= 4u;
        dword_30079C58 = v2;
        Locale = v2;
      }
    }
    result = (dword_30079C50 & 4) == 0;
  }
  else
  {
    dword_30079C50 = 0;
    result = 1;
  }
  return result;
}
// 30054D53: using guessed type _DWORD __cdecl TestDefaultCountry(__int16);
// 30054E54: using guessed type int __fastcall LcidFromHexString(_DWORD, _DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30079C50: using guessed type int dword_30079C50;
// 30079C60: using guessed type int dword_30079C60;
// 30079C70: using guessed type int (__stdcall *dword_30079C70)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (30054F40) --------------------------------------------------------
BOOL __cdecl sub_30054F40(int a1, int a2)
{
  int v2; // ecx
  size_t v3; // esi
  BOOL result; // eax
  _DWORD v5[31]; // [esp+0h] [ebp-7Ch] BYREF
  unsigned int retaddr; // [esp+80h] [ebp+4h]

  v5[30] = retaddr ^ dword_300705C0;
  result = 0;
  if ( dword_30079C70(a1 & 0x3FF | 0x400, 1, v5, 120) )
  {
    if ( a1 == LcidFromHexString(v2, v5) || !a2 || (v3 = strlen(dword_30079C6C), GetPrimaryLen() != v3) )
      result = 1;
  }
  return result;
}
// 30054F74: variable 'v2' is possibly undefined
// 30054E54: using guessed type int __fastcall LcidFromHexString(_DWORD, _DWORD);
// 30054E89: using guessed type int GetPrimaryLen(void);
// 300705C0: using guessed type int dword_300705C0;
// 30079C70: using guessed type int (__stdcall *dword_30079C70)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (30054FB7) --------------------------------------------------------
BOOL __thiscall sub_30054FB7(void *this, LPSTR a2)
{
  int v2; // esi
  BOOL v4; // eax
  char String2[120]; // [esp+4h] [ebp-7Ch] BYREF
  unsigned int v6; // [esp+7Ch] [ebp-4h]
  unsigned int retaddr; // [esp+84h] [ebp+4h]

  v6 = retaddr ^ dword_300705C0;
  v2 = LcidFromHexString(this, a2);
  if ( !dword_30079C70(v2, dword_30079C60 != 0 ? 7 : 4098, String2, 120) )
  {
    dword_30079C50 = 0;
    return 1;
  }
  if ( !_stricmp(String1, String2) )
  {
    if ( !dword_30079C70(v2, dword_30079C5C != 0 ? 3 : 4097, String2, 120) )
    {
LABEL_5:
      dword_30079C50 = 0;
      return 1;
    }
    if ( !_stricmp(dword_30079C6C, String2) )
    {
      LOWORD(dword_30079C50) = dword_30079C50 | 0x304;
      Locale = v2;
LABEL_16:
      dword_30079C58 = v2;
      goto LABEL_17;
    }
    if ( (dword_30079C50 & 2) != 0 )
      goto LABEL_17;
    if ( MaxCount && !_strnicmp(dword_30079C6C, String2, MaxCount) )
    {
      dword_30079C50 |= 2u;
      dword_30079C58 = v2;
      if ( strlen(dword_30079C6C) == MaxCount )
        Locale = v2;
    }
    else if ( (dword_30079C50 & 1) == 0 && TestDefaultCountry(v2) )
    {
      dword_30079C50 |= 1u;
      goto LABEL_16;
    }
  }
LABEL_17:
  if ( (dword_30079C50 & 0x300) != 768 )
  {
    if ( !dword_30079C70(v2, dword_30079C5C != 0 ? 3 : 4097, String2, 120) )
      goto LABEL_5;
    if ( !_stricmp(dword_30079C6C, String2) )
    {
      BYTE1(dword_30079C50) |= 2u;
      if ( dword_30079C5C || !MaxCount || strlen(dword_30079C6C) != MaxCount )
        goto LABEL_29;
      v4 = sub_30054F40(v2, 1);
    }
    else
    {
      if ( dword_30079C5C || !MaxCount || _strnicmp(dword_30079C6C, String2, MaxCount) )
        return (dword_30079C50 & 4) == 0;
      v4 = sub_30054F40(v2, 0);
    }
    if ( v4 )
    {
LABEL_29:
      BYTE1(dword_30079C50) |= 1u;
      if ( !Locale )
        Locale = v2;
      return (dword_30079C50 & 4) == 0;
    }
  }
  return (dword_30079C50 & 4) == 0;
}
// 30054D53: using guessed type _DWORD __cdecl TestDefaultCountry(__int16);
// 30054E54: using guessed type int __fastcall LcidFromHexString(_DWORD, _DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30079C50: using guessed type int dword_30079C50;
// 30079C5C: using guessed type int dword_30079C5C;
// 30079C60: using guessed type int dword_30079C60;
// 30079C70: using guessed type int (__stdcall *dword_30079C70)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (300551D7) --------------------------------------------------------
BOOL __thiscall sub_300551D7(void *this, LPSTR a2)
{
  int v2; // esi
  BOOL v4; // eax
  char String2[120]; // [esp+4h] [ebp-7Ch] BYREF
  unsigned int v6; // [esp+7Ch] [ebp-4h]
  unsigned int retaddr; // [esp+84h] [ebp+4h]

  v6 = retaddr ^ dword_300705C0;
  v2 = LcidFromHexString(this, a2);
  if ( !dword_30079C70(v2, dword_30079C5C != 0 ? 3 : 4097, String2, 120) )
  {
    dword_30079C50 = 0;
    return 1;
  }
  if ( !_stricmp(dword_30079C6C, String2) )
  {
    if ( dword_30079C5C )
    {
LABEL_11:
      dword_30079C50 |= 4u;
      dword_30079C58 = v2;
      Locale = v2;
      return (dword_30079C50 & 4) == 0;
    }
    v4 = sub_30054F40(v2, 1);
  }
  else
  {
    if ( dword_30079C5C || !MaxCount || _strnicmp(dword_30079C6C, String2, MaxCount) )
      return (dword_30079C50 & 4) == 0;
    v4 = sub_30054F40(v2, 0);
  }
  if ( v4 )
    goto LABEL_11;
  return (dword_30079C50 & 4) == 0;
}
// 30054E54: using guessed type int __fastcall LcidFromHexString(_DWORD, _DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30079C50: using guessed type int dword_30079C50;
// 30079C5C: using guessed type int dword_30079C5C;
// 30079C70: using guessed type int (__stdcall *dword_30079C70)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (3005598C) --------------------------------------------------------
unsigned int sub_3005598C()
{
  unsigned int i; // eax
  BYTE v1; // al
  BYTE *v2; // edx
  unsigned int v3; // ecx
  BYTE *v4; // edx
  unsigned int result; // eax
  WORD v6; // cx
  char v7; // cl
  char v8; // cl
  WORD CharType[256]; // [esp+4h] [ebp-518h] BYREF
  WCHAR v10[128]; // [esp+204h] [ebp-318h] BYREF
  WCHAR DestStr[128]; // [esp+304h] [ebp-218h] BYREF
  CHAR MultiByteStr[256]; // [esp+404h] [ebp-118h] BYREF
  struct _cpinfo CPInfo; // [esp+504h] [ebp-18h] BYREF
  unsigned int v14; // [esp+518h] [ebp-4h]
  unsigned int retaddr; // [esp+520h] [ebp+4h]

  v14 = retaddr ^ dword_300705C0;
  if ( GetCPInfo(CodePage, &CPInfo) )
  {
    for ( i = 0; i < 0x100; ++i )
      MultiByteStr[i] = i;
    v1 = CPInfo.LeadByte[0];
    MultiByteStr[0] = 32;
    if ( CPInfo.LeadByte[0] )
    {
      v2 = &CPInfo.LeadByte[1];
      do
      {
        v3 = *v2;
        if ( v1 <= v3 )
          memset(&MultiByteStr[v1], 0x20u, v3 - v1 + 1);
        v4 = v2 + 1;
        v1 = *v4;
        v2 = v4 + 1;
      }
      while ( v1 );
    }
    __crtGetStringTypeA(1u, MultiByteStr, 256, CharType, CodePage, dword_300F0FE4, 0);
    __crtLCMapStringA(dword_300F0FE4, 0x100u, MultiByteStr, 256, DestStr, 256, CodePage, 0);
    __crtLCMapStringA(dword_300F0FE4, 0x200u, MultiByteStr, 256, v10, 256, CodePage, 0);
    result = 0;
    while ( 1 )
    {
      v6 = CharType[result];
      if ( (v6 & 1) != 0 )
      {
        byte_300F1001[result] |= 0x10u;
        v7 = *((_BYTE *)DestStr + result);
      }
      else
      {
        if ( (v6 & 2) == 0 )
        {
          byte_300F1120[result] = 0;
          goto LABEL_16;
        }
        byte_300F1001[result] |= 0x20u;
        v7 = *((_BYTE *)v10 + result);
      }
      byte_300F1120[result] = v7;
LABEL_16:
      if ( ++result >= 0x100 )
        return result;
    }
  }
  for ( result = 0; result < 0x100; ++result )
  {
    if ( result >= 0x41 && result <= 0x5A )
    {
      byte_300F1001[result] |= 0x10u;
      v8 = result + 32;
LABEL_22:
      byte_300F1120[result] = v8;
      continue;
    }
    if ( result >= 0x61 && result <= 0x7A )
    {
      byte_300F1001[result] |= 0x20u;
      v8 = result - 32;
      goto LABEL_22;
    }
    byte_300F1120[result] = 0;
  }
  return result;
}
// 300705C0: using guessed type int dword_300705C0;

//----- (30055B1E) --------------------------------------------------------
_DWORD *sub_30055B1E()
{
  int v0; // edi
  _DWORD *v1; // esi

  _lock(13);
  v0 = _getptd();
  v1 = *(_DWORD **)(v0 + 96);
  if ( v1 != dword_300F0FE8 )
  {
    if ( v1 )
    {
      if ( (*v1)-- == 1 )
        free(v1);
    }
    *(_DWORD *)(v0 + 96) = dword_300F0FE8;
    v1 = dword_300F0FE8;
    ++*(_DWORD *)dword_300F0FE8;
  }
  _unlock(13);
  return v1;
}
// 3004FAA1: using guessed type int _getptd(void);
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 3005480A: using guessed type _DWORD __cdecl _lock(_DWORD);

//----- (30055B8D) --------------------------------------------------------
int __cdecl sub_30055B8D(UINT CodePage)
{
  int v1; // edx
  unsigned int i; // eax
  bool v3; // cc
  BYTE *v4; // ecx
  BYTE v5; // dl
  unsigned int k; // eax
  _BYTE *v7; // ebx
  unsigned int v8; // eax
  _BYTE *j; // esi
  unsigned __int8 v10; // dl
  unsigned int v11; // edi
  char v12; // dl
  int v13; // eax
  int v14; // ecx
  _DWORD *v15; // ecx
  unsigned int l; // eax
  int v17; // ecx
  int result; // eax
  struct _cpinfo CPInfo; // [esp+Ch] [ebp-1Ch] BYREF
  unsigned int v20; // [esp+20h] [ebp-8h]
  unsigned int v21; // [esp+24h] [ebp-4h]
  unsigned int retaddr; // [esp+2Ch] [ebp+4h]

  v21 = retaddr ^ dword_300705C0;
  if ( CodePage )
  {
    v1 = 0;
    for ( i = 0; i < 60; i += 12 )
    {
      if ( dword_300708B0[i] == CodePage )
      {
        memset(&byte_300F1000, 0, 0x100u);
        v20 = 0;
        *(&byte_300F1000 + 256) = 0;
        v7 = (char *)&unk_300708C0 + 48 * v1;
        do
        {
          LOBYTE(v8) = *v7;
          for ( j = v7; (_BYTE)v8; LOBYTE(v8) = *j )
          {
            v10 = j[1];
            if ( !v10 )
              break;
            v8 = (unsigned __int8)v8;
            v11 = v10;
            if ( (unsigned __int8)v8 <= (unsigned int)v10 )
            {
              v12 = byte_300708A8[v20];
              do
                byte_300F1001[v8++] |= v12;
              while ( v8 <= v11 );
            }
            j += 2;
          }
          ++v20;
          v7 += 8;
        }
        while ( v20 < 4 );
        ::CodePage = CodePage;
        dword_300F0FEC = 1;
        v13 = CPtoLCID();
        v15 = (_DWORD *)((char *)&unk_300708B4 + v14);
        *(_DWORD *)&word_300F1110 = *v15;
        *((_DWORD *)&word_300F1110 + 1) = v15[1];
        dword_300F0FE4 = v13;
        *((_DWORD *)&word_300F1110 + 2) = v15[2];
        goto LABEL_31;
      }
      ++v1;
    }
    if ( GetCPInfo(CodePage, &CPInfo) )
    {
      v3 = CPInfo.MaxCharSize <= 1;
      memset(&byte_300F1000, 0, 0x100u);
      *(&byte_300F1000 + 256) = 0;
      ::CodePage = CodePage;
      dword_300F0FE4 = 0;
      if ( v3 )
      {
        dword_300F0FEC = 0;
      }
      else
      {
        if ( CPInfo.LeadByte[0] )
        {
          v4 = &CPInfo.LeadByte[1];
          do
          {
            v5 = *v4;
            if ( !*v4 )
              break;
            for ( k = *(v4 - 1); k <= v5; ++k )
              byte_300F1001[k] |= 4u;
            v4 += 2;
          }
          while ( *(v4 - 1) );
        }
        for ( l = 1; l < 0xFF; ++l )
          byte_300F1001[l] |= 8u;
        dword_300F0FE4 = CPtoLCID();
        dword_300F0FEC = v17;
      }
      *(_DWORD *)&word_300F1110 = 0;
      *((_DWORD *)&word_300F1110 + 1) = 0;
      *((_DWORD *)&word_300F1110 + 2) = 0;
      goto LABEL_31;
    }
    if ( dword_30079CB8 )
      goto LABEL_30;
    result = -1;
  }
  else
  {
LABEL_30:
    setSBCS();
LABEL_31:
    sub_3005598C();
    result = 0;
  }
  return result;
}
// 30055C91: variable 'v14' is possibly undefined
// 30055CE0: variable 'v17' is possibly undefined
// 30055934: using guessed type int CPtoLCID(void);
// 30055963: using guessed type int setSBCS(void);
// 300705C0: using guessed type int dword_300705C0;
// 300708B0: using guessed type int dword_300708B0[];
// 30079CB8: using guessed type int dword_30079CB8;
// 300F0FEC: using guessed type int dword_300F0FEC;
// 300F1000: using guessed type char byte_300F1000;
// 300F1110: using guessed type __int16 word_300F1110;

//----- (30055D33) --------------------------------------------------------
int __cdecl sub_30055D33(UINT CodePage)
{
  UINT v1; // eax
  _DWORD *v2; // esi
  int i; // eax
  int j; // eax
  int k; // eax
  int v7; // [esp+14h] [ebp-1Ch]
  UINT CodePagea; // [esp+38h] [ebp+8h]

  v7 = -1;
  _lock(13);
  dword_30079CB8 = 0;
  v1 = CodePage;
  switch ( CodePage )
  {
    case 0xFFFFFFFE:
      dword_30079CB8 = 1;
      v1 = GetOEMCP();
      break;
    case 0xFFFFFFFD:
      dword_30079CB8 = 1;
      v1 = GetACP();
      break;
    case 0xFFFFFFFC:
      dword_30079CB8 = 1;
      v1 = dword_30079C8C;
      break;
  }
  CodePagea = v1;
  if ( v1 == ::CodePage )
  {
    v7 = 0;
  }
  else
  {
    v2 = dword_300F0FE8;
    if ( !dword_300F0FE8 || *(_DWORD *)dword_300F0FE8 )
      v2 = malloc(0x220u);
    if ( v2 )
    {
      v7 = sub_30055B8D(CodePagea);
      if ( !v7 )
      {
        *v2 = 0;
        v2[1] = ::CodePage;
        v2[2] = dword_300F0FEC;
        v2[3] = dword_300F0FE4;
        for ( i = 0; i < 5; ++i )
          *((_WORD *)v2 + i + 8) = word_300F1110[i];
        for ( j = 0; j < 257; ++j )
          *((_BYTE *)v2 + j + 28) = byte_300F1000[j];
        for ( k = 0; k < 256; ++k )
          *((_BYTE *)v2 + k + 285) = byte_300F1120[k];
        dword_300F0FE8 = v2;
      }
    }
    if ( v7 == -1 && v2 != dword_300F0FE8 )
      free(v2);
  }
  _unlock(13);
  return v7;
}
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 3005480A: using guessed type _DWORD __cdecl _lock(_DWORD);
// 30079CB8: using guessed type int dword_30079CB8;
// 300F0FEC: using guessed type int dword_300F0FEC;
// 300F1110: using guessed type __int16 word_300F1110[];

//----- (30055EA1) --------------------------------------------------------
int __cdecl sub_30055EA1(LCID Locale)
{
  int result; // eax
  CHAR LCData[8]; // [esp+0h] [ebp-Ch] BYREF
  unsigned int v3; // [esp+8h] [ebp-4h]
  unsigned int retaddr; // [esp+10h] [ebp+4h]

  LCData[6] = 0;
  v3 = retaddr ^ dword_300705C0;
  if ( GetLocaleInfoA(Locale, 0x1004u, LCData, 6) )
    result = atol(LCData);
  else
    result = -1;
  return result;
}
// 300705C0: using guessed type int dword_300705C0;

//----- (30055EEA) --------------------------------------------------------
void *__cdecl sub_30055EEA(UINT CodePage, UINT a2, char *Str, int a4, LPSTR lpMultiByteStr, int a6)
{
  int v6; // ebx
  size_t v7; // esi
  void *v8; // esp
  WCHAR *v9; // ebx
  void *v11; // eax
  int v12; // eax
  _BYTE v13[12]; // [esp+0h] [ebp-54h] BYREF
  WCHAR *v14; // [esp+Ch] [ebp-48h]
  size_t v15; // [esp+10h] [ebp-44h]
  struct _cpinfo CPInfo; // [esp+14h] [ebp-40h] BYREF
  int v17; // [esp+28h] [ebp-2Ch]
  int cbMultiByte; // [esp+2Ch] [ebp-28h]
  int v19; // [esp+30h] [ebp-24h]
  void *Block; // [esp+34h] [ebp-20h]
  unsigned int v21; // [esp+38h] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+3Ch] [ebp-18h]
  unsigned int retaddr; // [esp+58h] [ebp+4h]

  v21 = retaddr ^ dword_300705C0;
  Block = 0;
  v19 = 0;
  v6 = *(_DWORD *)a4;
  cbMultiByte = *(_DWORD *)a4;
  v17 = 0;
  if ( CodePage == a2 )
  {
    v9 = v14;
  }
  else
  {
    if ( GetCPInfo(CodePage, &CPInfo) && CPInfo.MaxCharSize == 1 && GetCPInfo(a2, &CPInfo) && CPInfo.MaxCharSize == 1 )
      v17 = 1;
    if ( v17 )
    {
      if ( v6 == -1 )
        v7 = strlen(Str) + 1;
      else
        v7 = v6;
      v15 = v7;
    }
    else
    {
      v7 = v15;
    }
    if ( !v17 )
    {
      v7 = MultiByteToWideChar(CodePage, 1u, Str, v6, 0, 0);
      v15 = v7;
      if ( !v7 )
        return 0;
    }
    v8 = alloca(2 * v7);
    ms_exc.old_esp = (DWORD)v13;
    v9 = (WCHAR *)v13;
    v14 = (WCHAR *)v13;
    memset(v13, 0, 2 * v7);
    ms_exc.registration.TryLevel = -1;
    if ( !v13 )
    {
      v9 = (WCHAR *)sub_300518D4(2, v7);
      if ( !v9 )
        return 0;
      v19 = 1;
    }
    if ( MultiByteToWideChar(CodePage, 1u, Str, cbMultiByte, v9, v7) )
    {
      if ( lpMultiByteStr )
      {
        if ( WideCharToMultiByte(a2, 0, v9, v7, lpMultiByteStr, a6, 0, 0) )
          Block = lpMultiByteStr;
      }
      else if ( v17 || (v7 = WideCharToMultiByte(a2, 0, v9, v7, 0, 0, 0, 0)) != 0 )
      {
        v11 = (void *)sub_300518D4(1, v7);
        Block = v11;
        if ( v11 )
        {
          v12 = WideCharToMultiByte(a2, 0, v9, v7, (LPSTR)v11, v7, 0, 0);
          if ( v12 )
          {
            if ( cbMultiByte != -1 )
              *(_DWORD *)a4 = v12;
          }
          else
          {
            free(Block);
            Block = 0;
          }
        }
      }
    }
  }
  if ( v19 )
    free(v9);
  return Block;
}
// 300705C0: using guessed type int dword_300705C0;

//----- (300560B9) --------------------------------------------------------
BOOL sub_300560B9()
{
  void *v0; // esp
  char *v1; // edi
  char *v2; // esi
  int v3; // eax
  char *v4; // ebx
  PVOID v5; // ebx
  _BYTE v7[16]; // [esp-4h] [ebp-58h] BYREF
  struct _SYSTEM_INFO SystemInfo; // [esp+Ch] [ebp-48h] BYREF
  struct _MEMORY_BASIC_INFORMATION Buffer; // [esp+30h] [ebp-24h] BYREF
  DWORD flOldProtect; // [esp+4Ch] [ebp-8h] BYREF
  SIZE_T dwSize; // [esp+50h] [ebp-4h]

  v0 = alloca(4);
  if ( !VirtualQuery(v7, &Buffer, 0x1Cu) )
    return 0;
  v1 = (char *)Buffer.AllocationBase;
  GetSystemInfo(&SystemInfo);
  v2 = (char *)(((unsigned int)v7 & ~(SystemInfo.dwPageSize - 1)) - SystemInfo.dwPageSize);
  dwSize = SystemInfo.dwPageSize;
  v3 = dword_30079990;
  if ( v2 < &v1[dword_30079990 != 1 ? 0x2000 : 69632] )
    return 0;
  if ( dword_30079990 != 1 )
  {
    v4 = v1;
    while ( VirtualQuery(v4, &Buffer, 0x1Cu) )
    {
      v4 += Buffer.RegionSize;
      if ( (Buffer.State & 0x1000) != 0 )
      {
        v5 = Buffer.BaseAddress;
        if ( (Buffer.Protect & 0x100) != 0 )
          return 1;
        if ( v2 >= Buffer.BaseAddress )
        {
          VirtualAlloc(Buffer.BaseAddress, dwSize, 0x1000u, 4u);
          v3 = dword_30079990;
          return VirtualProtect(v5, dwSize, v3 != 1 ? 260 : 1, &flOldProtect);
        }
        return 0;
      }
    }
    return 0;
  }
  v5 = (PVOID)(((unsigned int)v7 & ~(SystemInfo.dwPageSize - 1)) - SystemInfo.dwPageSize);
  return VirtualProtect(v5, dwSize, v3 != 1 ? 260 : 1, &flOldProtect);
}
// 30079990: using guessed type int dword_30079990;

//----- (3005648E) --------------------------------------------------------
int __cdecl sub_3005648E(int a1, int a2)
{
  return _ld12cvt(a1, a2, &unk_300709A0);
}
// 30056336: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (300564A4) --------------------------------------------------------
int __cdecl sub_300564A4(int a1, int a2)
{
  return _ld12cvt(a1, a2, &unk_300709B8);
}
// 30056336: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (30056536) --------------------------------------------------------
int __cdecl sub_30056536(int a1, char *a2)
{
  char v3[12]; // [esp+0h] [ebp-14h] BYREF
  char *v4[2]; // [esp+Ch] [ebp-8h] BYREF
  unsigned int retaddr; // [esp+18h] [ebp+4h]

  v4[1] = (char *)(retaddr ^ dword_300705C0);
  sub_30056600((int)v3, v4, a2, 0, 0, 0, 0);
  return sub_3005648E((int)v3, a1);
}
// 300705C0: using guessed type int dword_300705C0;

//----- (300565BD) --------------------------------------------------------
int __cdecl sub_300565BD(int a1, char *a2)
{
  char v3[12]; // [esp+0h] [ebp-14h] BYREF
  char *v4[2]; // [esp+Ch] [ebp-8h] BYREF
  unsigned int retaddr; // [esp+18h] [ebp+4h]

  v4[1] = (char *)(retaddr ^ dword_300705C0);
  sub_30056600((int)v3, v4, a2, 0, 0, 0, 0);
  return sub_300564A4((int)v3, a1);
}
// 300705C0: using guessed type int dword_300705C0;

//----- (30056600) --------------------------------------------------------
int __cdecl sub_30056600(int a1, char **a2, char *a3, int a4, int a5, int a6, int a7)
{
  int v7; // eax
  char *v8; // edi
  char *v9; // esi
  char v10; // cl
  char v11; // bl
  char *v12; // ecx
  bool v13; // zf
  int v14; // esi
  int i; // eax
  int v16; // eax
  int v17; // eax
  __int16 v18; // dx
  int v19; // ebx
  unsigned int v20; // esi
  __int16 v21; // ax
  __int16 v22; // ax
  int result; // eax
  int v24; // [esp-4h] [ebp-68h]
  int v25; // [esp-4h] [ebp-68h]
  char v26[23]; // [esp+Ch] [ebp-58h] BYREF
  char v27; // [esp+23h] [ebp-41h]
  _WORD v28[3]; // [esp+28h] [ebp-3Ch] BYREF
  unsigned int v29; // [esp+2Eh] [ebp-36h]
  int v30; // [esp+32h] [ebp-32h]
  int v31; // [esp+38h] [ebp-2Ch]
  int v32; // [esp+3Ch] [ebp-28h]
  int v33; // [esp+40h] [ebp-24h]
  int v34; // [esp+44h] [ebp-20h]
  int v35; // [esp+48h] [ebp-1Ch]
  int v36; // [esp+4Ch] [ebp-18h]
  int v37; // [esp+50h] [ebp-14h]
  int v38; // [esp+54h] [ebp-10h]
  unsigned int v39; // [esp+58h] [ebp-Ch]
  char *v40; // [esp+5Ch] [ebp-8h]
  unsigned int v41; // [esp+60h] [ebp-4h]
  unsigned int retaddr; // [esp+68h] [ebp+4h]

  v41 = retaddr ^ dword_300705C0;
  v7 = 0;
  v8 = a3;
  v9 = v26;
  v40 = v26;
  v31 = 0;
  v35 = 1;
  v39 = 0;
  v37 = 0;
  v32 = 0;
  v33 = 0;
  v34 = 0;
  v38 = 0;
  v36 = 0;
  while ( 1 )
  {
    v10 = *v8;
    if ( *v8 != 32 && v10 != 9 && v10 != 10 && v10 != 13 )
      break;
    ++v8;
  }
  while ( 2 )
  {
    v11 = *v8++;
    switch ( v7 )
    {
      case 0:
        if ( v11 >= 49 && v11 <= 57 )
          goto LABEL_10;
        if ( v11 == byte_30070804 )
          goto LABEL_12;
        switch ( v11 )
        {
          case '+':
            v31 = 0;
            v7 = 2;
            continue;
          case '-':
            v7 = 2;
            v31 = 0x8000;
            continue;
          case '0':
            goto LABEL_36;
        }
        v40 = v9;
        --v8;
        goto LABEL_72;
      case 1:
        v7 = 1;
        v37 = 1;
        if ( v11 >= 49 && v11 <= 57 )
          goto LABEL_10;
        if ( v11 == byte_30070804 )
          goto LABEL_22;
        if ( v11 == 43 || v11 == 45 )
          goto LABEL_31;
        if ( v11 == 48 )
          continue;
        goto LABEL_26;
      case 2:
        if ( v11 >= 49 && v11 <= 57 )
        {
LABEL_10:
          v24 = 3;
LABEL_82:
          v7 = v24;
          --v8;
          continue;
        }
        if ( v11 == byte_30070804 )
        {
LABEL_12:
          v25 = 5;
LABEL_90:
          v7 = v25;
          continue;
        }
        if ( v11 == 48 )
        {
LABEL_36:
          v7 = 1;
          continue;
        }
LABEL_84:
        v8 = a3;
LABEL_71:
        v40 = v9;
LABEL_72:
        v13 = v37 == 0;
        *a2 = v8;
        if ( v13 )
        {
          v36 = 4;
LABEL_119:
          v18 = 0;
          v21 = 0;
          v20 = 0;
          v19 = 0;
          goto LABEL_120;
        }
        if ( v39 > 0x18 )
        {
          if ( v27 >= 5 )
            ++v27;
          --v9;
          ++v38;
          v39 = 24;
        }
        if ( !v39 )
          goto LABEL_119;
        while ( !*--v9 )
        {
          --v39;
          ++v38;
        }
        sub_3005A864(v26, v39, (int)v28);
        v16 = v34;
        if ( v35 < 0 )
          v16 = -v34;
        v17 = v38 + v16;
        if ( !v33 )
          v17 += a5;
        if ( !v32 )
          v17 -= a6;
        if ( v17 > 5200 )
        {
          v19 = 0;
          v21 = 0x7FFF;
          v20 = 0x80000000;
          v18 = 0;
          v36 = 2;
          goto LABEL_120;
        }
        if ( v17 < -5200 )
        {
          v36 = 1;
          goto LABEL_119;
        }
        sub_3005AB80(v28, v17, a4);
        v18 = v28[0];
        v19 = *(_DWORD *)&v28[1];
        v20 = v29;
        v21 = v30;
LABEL_120:
        v22 = v31 | v21;
        *(_DWORD *)(a1 + 2) = v19;
        *(_DWORD *)(a1 + 6) = v20;
        *(_WORD *)(a1 + 10) = v22;
        result = v36;
        *(_WORD *)a1 = v18;
        return result;
      case 3:
        v37 = 1;
        while ( isdigit((unsigned __int8)v11) )
        {
          if ( v39 >= 0x19 )
          {
            ++v38;
          }
          else
          {
            ++v39;
            *v9++ = v11 - 48;
          }
          v11 = *v8++;
        }
        if ( v11 != byte_30070804 )
          goto LABEL_54;
LABEL_22:
        v25 = 4;
        goto LABEL_90;
      case 4:
        v37 = 1;
        v32 = 1;
        if ( !v39 )
        {
          while ( v11 == 48 )
          {
            --v38;
            v11 = *v8++;
          }
        }
        while ( isdigit((unsigned __int8)v11) )
        {
          if ( v39 < 0x19 )
          {
            ++v39;
            *v9++ = v11 - 48;
            --v38;
          }
          v11 = *v8++;
        }
LABEL_54:
        if ( v11 == 43 || v11 == 45 )
        {
LABEL_31:
          --v8;
          v25 = 11;
        }
        else
        {
LABEL_26:
          if ( v11 <= 67 || v11 > 69 && (v11 <= 99 || v11 > 101) )
          {
LABEL_70:
            --v8;
            goto LABEL_71;
          }
          v25 = 6;
        }
        goto LABEL_90;
      case 5:
        v32 = 1;
        if ( !isdigit((unsigned __int8)v11) )
          goto LABEL_84;
        v24 = 4;
        goto LABEL_82;
      case 6:
        v12 = v8 - 2;
        a3 = v8 - 2;
        if ( v11 >= 49 && v11 <= 57 )
          goto LABEL_81;
        if ( v11 == 43 )
          goto LABEL_89;
        if ( v11 == 45 )
          goto LABEL_88;
        if ( v11 != 48 )
          goto LABEL_94;
LABEL_64:
        v25 = 8;
        goto LABEL_90;
      case 7:
        if ( v11 >= 49 && v11 <= 57 )
          goto LABEL_81;
        if ( v11 != 48 )
          goto LABEL_84;
        goto LABEL_64;
      case 8:
        v33 = 1;
        while ( v11 == 48 )
          v11 = *v8++;
        if ( v11 < 49 || v11 > 57 )
          goto LABEL_70;
LABEL_81:
        v24 = 9;
        goto LABEL_82;
      case 9:
        v40 = v9;
        v33 = 1;
        v14 = 0;
        while ( 2 )
        {
          if ( isdigit((unsigned __int8)v11) )
          {
            v14 = v11 + 10 * v14 - 48;
            if ( v14 <= 5200 )
            {
              v11 = *v8++;
              continue;
            }
            v14 = 5201;
          }
          break;
        }
        v34 = v14;
        for ( i = (unsigned __int8)v11; isdigit(i); i = (unsigned __int8)i )
          LOBYTE(i) = *v8++;
        v9 = v40;
        --v8;
        goto LABEL_72;
      case 11:
        if ( a7 )
        {
          v12 = v8 - 1;
          a3 = v8 - 1;
          if ( v11 == 43 )
          {
LABEL_89:
            v25 = 7;
            goto LABEL_90;
          }
          if ( v11 != 45 )
          {
LABEL_94:
            v40 = v9;
            v8 = v12;
            goto LABEL_72;
          }
LABEL_88:
          v35 = -1;
          v7 = 7;
        }
        else
        {
          v7 = 10;
          --v8;
LABEL_92:
          if ( v7 == 10 )
            goto LABEL_71;
        }
        continue;
      default:
        goto LABEL_92;
    }
  }
}
// 300705C0: using guessed type int dword_300705C0;
// 30070804: using guessed type char byte_30070804;

//----- (30056C36) --------------------------------------------------------
int __cdecl sub_30056C36(_DWORD *a1, int a2, int a3, int a4)
{
  char Destination[24]; // [esp+8h] [ebp-2Ch] BYREF
  int v6[5]; // [esp+20h] [ebp-14h] BYREF
  unsigned int retaddr; // [esp+38h] [ebp+4h]

  v6[4] = retaddr ^ dword_300705C0;
  sub_3005AD3D(*a1, a1[1], (int)v6, Destination);
  _fptostr((void *)((v6[0] == 45) + a2 + (a3 > 0)), a3 + 1, (int)v6);
  _cftoe2(a3, a4, 0);
  return a2;
}
// 30056B88: using guessed type _DWORD __cdecl _cftoe2(_DWORD, _DWORD, char);
// 300705C0: using guessed type int dword_300705C0;

//----- (30056D46) --------------------------------------------------------
int __cdecl sub_30056D46(int a1, int a2, size_t Size)
{
  char Destination[24]; // [esp+4h] [ebp-2Ch] BYREF
  int v5[5]; // [esp+1Ch] [ebp-14h] BYREF
  unsigned int retaddr; // [esp+34h] [ebp+4h]

  v5[4] = retaddr ^ dword_300705C0;
  sub_3005AD3D(*(_DWORD *)a1, *(_DWORD *)(a1 + 4), (int)v5, Destination);
  _fptostr((void *)(a2 + (v5[0] == 45)), Size + v5[1], (int)v5);
  _cftof2(a2, Size, 0);
  return a2;
}
// 300705C0: using guessed type int dword_300705C0;

//----- (30056DAE) --------------------------------------------------------
int __cdecl sub_30056DAE(int a1, int a2, size_t Size, int a4)
{
  int v4; // esi
  char *v5; // edi
  char Destination[24]; // [esp+Ch] [ebp-2Ch] BYREF
  int v8; // [esp+24h] [ebp-14h] BYREF
  int v9; // [esp+28h] [ebp-10h]
  unsigned int v10; // [esp+34h] [ebp-4h]
  unsigned int retaddr; // [esp+3Ch] [ebp+4h]

  v10 = retaddr ^ dword_300705C0;
  sub_3005AD3D(*(_DWORD *)a1, *(_DWORD *)(a1 + 4), (int)&v8, Destination);
  v4 = v9 - 1;
  v5 = (char *)(a2 + (v8 == 45));
  _fptostr(v5, Size, (int)&v8);
  if ( v9 - 1 < -4 || v9 - 1 >= (int)Size )
    return _cftoe2(Size, a4, 1);
  if ( v4 < v9 - 1 )
    v5[strlen(v5) - 1] = 0;
  return _cftof2(a2, Size, 1);
}
// 30056B88: using guessed type _DWORD __cdecl _cftoe2(_DWORD, _DWORD, char);
// 300705C0: using guessed type int dword_300705C0;

//----- (30057836) --------------------------------------------------------
int __cdecl sub_30057836(DWORD dwExceptionCode, int a2, int a3, int a4, double a5, int a6)
{
  int v6; // eax
  ULONG_PTR Arguments[16]; // [esp+1Ch] [ebp-80h] BYREF
  int v9; // [esp+5Ch] [ebp-40h]
  unsigned int v10; // [esp+98h] [ebp-4h]
  unsigned int retaddr; // [esp+A0h] [ebp+4h]

  v10 = retaddr ^ dword_300705C0;
  if ( !_handle_exc(dwExceptionCode, &a5, a6) )
  {
    v9 &= 0xFFFFFFFE;
    _raise_exc((ULONG_PTR)Arguments, (int)&a6, dwExceptionCode, a2, (int)&a3, (int)&a5);
  }
  v6 = _errcode(dwExceptionCode);
  if ( !dword_30070AF8 && v6 )
    return _umatherr(v6, a2, a3, a4, COERCE_UNSIGNED_INT64(0.0), HIDWORD(COERCE_UNSIGNED_INT64(0.0)), a5, a6);
  _set_errno(v6);
  return _ctrlfp(a6, 0xFFFF);
}
// 3005744F: using guessed type _DWORD __cdecl _handle_exc(_DWORD, _DWORD, _DWORD);
// 300576B9: using guessed type _DWORD __cdecl _errcode(char);
// 30058042: using guessed type _DWORD __cdecl _ctrlfp(_DWORD, _DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30070AF8: using guessed type int dword_30070AF8;

//----- (300578F4) --------------------------------------------------------
int __cdecl sub_300578F4(DWORD dwExceptionCode, int a2, int a3, int a4, double a5, double a6, int a7)
{
  int v7; // eax
  ULONG_PTR Arguments[12]; // [esp+1Ch] [ebp-80h] BYREF
  double v10; // [esp+4Ch] [ebp-50h]
  unsigned int v11; // [esp+5Ch] [ebp-40h]
  unsigned int v12; // [esp+98h] [ebp-4h]
  unsigned int retaddr; // [esp+A0h] [ebp+4h]

  v12 = retaddr ^ dword_300705C0;
  if ( !_handle_exc(dwExceptionCode, &a6, a7) )
  {
    v10 = a5;
    v11 = v11 & 0xFFFFFFE3 | 3;
    _raise_exc((ULONG_PTR)Arguments, (int)&a7, dwExceptionCode, a2, (int)&a3, (int)&a6);
  }
  v7 = _errcode(dwExceptionCode);
  if ( !dword_30070AF8 && v7 )
    return _umatherr(v7, a2, a3, a4, SLODWORD(a5), SHIDWORD(a5), a6, a7);
  _set_errno(v7);
  return _ctrlfp(a7, 0xFFFF);
}
// 3005744F: using guessed type _DWORD __cdecl _handle_exc(_DWORD, _DWORD, _DWORD);
// 300576B9: using guessed type _DWORD __cdecl _errcode(char);
// 30058042: using guessed type _DWORD __cdecl _ctrlfp(_DWORD, _DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30070AF8: using guessed type int dword_30070AF8;

//----- (300580BF) --------------------------------------------------------
int sub_300580BF()
{
  return 0;
}

//----- (300594CB) --------------------------------------------------------
int __cdecl sub_300594CB(int a1)
{
  int *v1; // ebx
  int v2; // edi
  int v3; // esi

  v1 = &dword_300F2260[a1 >> 5];
  v2 = 36 * (a1 & 0x1F);
  v3 = v2 + *v1;
  if ( !*(_DWORD *)(v3 + 8) )
  {
    _lock(10);
    if ( !*(_DWORD *)(v3 + 8) )
    {
      if ( !__crtInitCritSecAndSpinCount(v3 + 12, 4000) )
      {
        _unlock(10);
        return 0;
      }
      ++*(_DWORD *)(v3 + 8);
    }
    _unlock(10);
  }
  EnterCriticalSection((LPCRITICAL_SECTION)(*v1 + v2 + 12));
  return 1;
}
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 3005480A: using guessed type _DWORD __cdecl _lock(_DWORD);
// 3005920B: using guessed type _DWORD __cdecl __crtInitCritSecAndSpinCount(_DWORD, _DWORD);
// 300F2260: using guessed type int dword_300F2260[];

//----- (30059560) --------------------------------------------------------
int sub_30059560()
{
  int v0; // ebp
  int v1; // ebx
  int *v2; // edi
  unsigned int v3; // esi
  unsigned int i; // eax
  char *v5; // eax
  int *v6; // ecx
  unsigned int j; // edx
  int v9; // [esp+4h] [ebp-8h]
  int v10; // [esp+8h] [ebp-4h]

  v0 = -1;
  if ( sub_3005478B(11) )
  {
    _lock(11);
    v1 = 0;
    v9 = 0;
    v10 = 0;
    v2 = dword_300F2260;
    while ( 2 )
    {
      v3 = *v2;
      if ( *v2 )
      {
        for ( i = v3 + 1152; v3 < i; i = *v2 + 1152 )
        {
          if ( (*(_BYTE *)(v3 + 4) & 1) == 0 )
          {
            if ( !*(_DWORD *)(v3 + 8) )
            {
              _lock(10);
              if ( !*(_DWORD *)(v3 + 8) )
              {
                if ( !__crtInitCritSecAndSpinCount(v3 + 12, 4000) )
                {
                  _unlock(10);
                  goto LABEL_26;
                }
                ++*(_DWORD *)(v3 + 8);
              }
              _unlock(10);
            }
            EnterCriticalSection((LPCRITICAL_SECTION)(v3 + 12));
            if ( (*(_BYTE *)(v3 + 4) & 1) == 0 )
            {
              *(_DWORD *)v3 = -1;
              v0 = v10 + (int)(v3 - *v2) / 36;
              if ( v0 != -1 )
                goto LABEL_27;
              v1 = v9;
              break;
            }
            LeaveCriticalSection((LPCRITICAL_SECTION)(v3 + 12));
            v1 = v9;
          }
          v3 += 36;
        }
        v10 += 32;
        ++v1;
        ++v2;
        v9 = v1;
        if ( (int)v2 < (int)&dword_300F2360 )
          continue;
      }
      else
      {
        v5 = (char *)malloc(0x480u);
        if ( v5 )
        {
          uNumber += 32;
          v6 = &dword_300F2260[v1];
          *v6 = (int)v5;
          for ( j = (unsigned int)(v5 + 1152); (unsigned int)v5 < j; j = *v6 + 1152 )
          {
            v5[4] = 0;
            *(_DWORD *)v5 = -1;
            *((_DWORD *)v5 + 2) = 0;
            v5[5] = 10;
            v5 += 36;
          }
          v0 = 32 * v1;
          if ( !sub_300594CB(32 * v1) )
LABEL_26:
            v0 = -1;
        }
      }
      break;
    }
LABEL_27:
    _unlock(11);
  }
  return v0;
}
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 3005480A: using guessed type _DWORD __cdecl _lock(_DWORD);
// 3005920B: using guessed type _DWORD __cdecl __crtInitCritSecAndSpinCount(_DWORD, _DWORD);
// 300F2260: using guessed type int dword_300F2260[];
// 300F2360: using guessed type int dword_300F2360;

//----- (300599BD) --------------------------------------------------------
int __cdecl sub_300599BD(int a1)
{
  int i; // esi
  int v2; // eax
  int v3; // ecx
  int result; // eax
  int v5; // [esp+10h] [ebp-20h]
  int v6; // [esp+14h] [ebp-1Ch]

  v6 = 0;
  v5 = 0;
  _lock(1);
  for ( i = 0; i < dword_300F2240; ++i )
  {
    v2 = *(_DWORD *)(dword_300F1234 + 4 * i);
    if ( v2 && (*(_BYTE *)(v2 + 12) & 0x83) != 0 )
    {
      _lock_file2(i, *(_DWORD *)(dword_300F1234 + 4 * i));
      v3 = *(_DWORD *)(*(_DWORD *)(dword_300F1234 + 4 * i) + 12);
      if ( (v3 & 0x83) != 0 )
      {
        if ( a1 == 1 )
        {
          if ( _fflush_lk(*(_DWORD *)(dword_300F1234 + 4 * i)) != -1 )
            ++v6;
        }
        else if ( !a1 && (v3 & 2) != 0 && _fflush_lk(*(_DWORD *)(dword_300F1234 + 4 * i)) == -1 )
        {
          v5 = -1;
        }
      }
      _unlock_file2(i, *(_DWORD *)(dword_300F1234 + 4 * i));
    }
  }
  _unlock(1);
  result = v6;
  if ( a1 != 1 )
    result = v5;
  return result;
}
// 3005283C: using guessed type _DWORD __cdecl _lock_file2(_DWORD, _DWORD);
// 3005288E: using guessed type _DWORD __cdecl _unlock_file2(_DWORD, _DWORD);
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 3005480A: using guessed type _DWORD __cdecl _lock(_DWORD);
// 3005998F: using guessed type _DWORD __cdecl _fflush_lk(_DWORD);
// 300F1234: using guessed type int dword_300F1234;
// 300F2240: using guessed type int dword_300F2240;

//----- (30059AE2) --------------------------------------------------------
int sub_30059AE2()
{
  return sub_300599BD(1);
}

//----- (30059B4A) --------------------------------------------------------
void __cdecl __noreturn sub_30059B4A(int a1, int a2)
{
  const char *v2; // edi
  int v3; // esi
  char *v4; // ebx
  void *v5; // esp
  _BYTE v6[37]; // [esp-25h] [ebp-159h] BYREF
  char v7[12]; // [esp+0h] [ebp-134h] BYREF
  CHAR Filename[264]; // [esp+Ch] [ebp-128h] BYREF
  char *Source; // [esp+114h] [ebp-20h]
  unsigned int v10; // [esp+118h] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+11Ch] [ebp-18h]
  unsigned int retaddr; // [esp+138h] [ebp+4h]

  v10 = retaddr ^ dword_300705C0;
  if ( dword_30079CDC )
  {
    dword_30079CDC(a1, a2);
    ms_exc.registration.TryLevel = -1;
  }
  else
  {
    if ( a1 == 1 )
    {
      v2 = "Buffer overrun detected!";
      Source = "A buffer overrun has been detected which has corrupted the program's\n"
               "internal state.  The program cannot safely continue execution and must\n"
               "now be terminated.\n";
      v3 = 185;
    }
    else
    {
      v2 = "Unknown security failure detected!";
      Source = "A security error of unknown cause has been detected which has\n"
               "corrupted the program's internal state.  The program cannot safely\n"
               "continue execution and must now be terminated.\n";
      v3 = 212;
    }
    Filename[260] = 0;
    if ( !GetModuleFileNameA(0, Filename, 0x104u) )
      strcpy(Filename, "<program name unknown>");
    v4 = Filename;
    if ( strlen(Filename) + 11 > 0x3C )
    {
      v4 = &v6[strlen(Filename)];
      strncpy(v4, "...", 3u);
    }
    v5 = alloca(strlen(v4) + v3 + 12);
    ms_exc.old_esp = (DWORD)v7;
    strcpy(v7, v2);
    strcat(v7, "\n\n");
    strcat(v7, "Program: ");
    strcat(v7, v4);
    strcat(v7, "\n\n");
    strcat(v7, Source);
    __crtMessageBoxA(v7, "Microsoft Visual C++ Runtime Library", 8208);
  }
  _exit(3);
}
// 30059296: using guessed type _DWORD __cdecl __crtMessageBoxA(_DWORD, _DWORD, __int16);
// 300705C0: using guessed type int dword_300705C0;
// 30079CDC: using guessed type int (__cdecl *dword_30079CDC)(_DWORD, _DWORD);

//----- (30059CC0) --------------------------------------------------------
LPSTR sub_30059CC0()
{
  UINT v0; // edi
  char *v1; // eax
  const char *v2; // esi
  LPSTR result; // eax
  size_t v4; // eax
  char *v5; // eax
  const char *v6; // esi
  char v7; // al
  int v8; // eax
  int v9; // [esp+10h] [ebp-8h]
  BOOL UsedDefaultChar; // [esp+14h] [ebp-4h] BYREF

  v9 = 0;
  _lock(7);
  v0 = dword_30079C8C;
  dword_30070D0C = -1;
  dword_30070D00 = -1;
  dword_30079D8C = 0;
  v1 = getenv("TZ");
  v2 = v1;
  if ( v1 && *v1 )
  {
    if ( dword_30079D90 )
    {
      if ( !strcmp(v1, dword_30079D90) )
        return (LPSTR)_unlock(7);
      if ( dword_30079D90 )
        free(dword_30079D90);
    }
    v4 = strlen(v2);
    v5 = (char *)malloc(v4 + 1);
    dword_30079D90 = v5;
    if ( !v5 )
      return (LPSTR)_unlock(7);
    strcpy(v5, v2);
    _unlock(7);
    strncpy(lpMultiByteStr, v2, 3u);
    v6 = v2 + 3;
    lpMultiByteStr[3] = 0;
    if ( *v6 == 45 )
    {
      v9 = 1;
      ++v6;
    }
    dword_30070C68 = 3600 * atol(v6);
    while ( 1 )
    {
      v7 = *v6;
      if ( *v6 != 43 && (v7 < 48 || v7 > 57) )
        break;
      ++v6;
    }
    if ( *v6 == 58 )
    {
      dword_30070C68 += 60 * atol(++v6);
      while ( *v6 >= 48 && *v6 <= 57 )
        ++v6;
      if ( *v6 == 58 )
      {
        dword_30070C68 += atol(++v6);
        while ( *v6 >= 48 && *v6 <= 57 )
          ++v6;
      }
    }
    if ( v9 )
      dword_30070C68 = -dword_30070C68;
    v8 = *v6;
    dword_30070C6C = v8;
    if ( v8 )
    {
      strncpy(off_30070CFC, v6, 3u);
      result = off_30070CFC;
      off_30070CFC[3] = 0;
      return result;
    }
LABEL_46:
    result = off_30070CFC;
    *off_30070CFC = 0;
    return result;
  }
  if ( dword_30079D90 )
  {
    free(dword_30079D90);
    dword_30079D90 = 0;
  }
  _unlock(7);
  result = (LPSTR)GetTimeZoneInformation(&TimeZoneInformation);
  if ( result != LPSTR_TEXTCALLBACKW )
  {
    dword_30079D8C = 1;
    dword_30070C68 = 60 * TimeZoneInformation.Bias;
    if ( TimeZoneInformation.StandardDate.wMonth )
      dword_30070C68 = 60 * TimeZoneInformation.StandardBias + 60 * TimeZoneInformation.Bias;
    if ( TimeZoneInformation.DaylightDate.wMonth && TimeZoneInformation.DaylightBias )
    {
      dword_30070C6C = 1;
      dword_30070C70 = 60 * (TimeZoneInformation.DaylightBias - TimeZoneInformation.StandardBias);
    }
    else
    {
      dword_30070C6C = 0;
      dword_30070C70 = 0;
    }
    if ( !WideCharToMultiByte(v0, 0, TimeZoneInformation.StandardName, -1, lpMultiByteStr, 63, 0, &UsedDefaultChar)
      || UsedDefaultChar )
    {
      *lpMultiByteStr = 0;
    }
    else
    {
      lpMultiByteStr[63] = 0;
    }
    if ( WideCharToMultiByte(v0, 0, TimeZoneInformation.DaylightName, -1, off_30070CFC, 63, 0, &UsedDefaultChar)
      && !UsedDefaultChar )
    {
      result = off_30070CFC;
      off_30070CFC[63] = 0;
      return result;
    }
    goto LABEL_46;
  }
  return result;
}
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 3005480A: using guessed type _DWORD __cdecl _lock(_DWORD);
// 30070C68: using guessed type int dword_30070C68;
// 30070C6C: using guessed type int dword_30070C6C;
// 30070C70: using guessed type int dword_30070C70;
// 30070D00: using guessed type int dword_30070D00;
// 30070D0C: using guessed type int dword_30070D0C;
// 30079D8C: using guessed type int dword_30079D8C;

//----- (3005A274) --------------------------------------------------------
int sub_3005A274()
{
  int result; // eax

  if ( !dword_30079D94 )
  {
    _lock(6);
    if ( !dword_30079D94 )
    {
      sub_30059CC0();
      ++dword_30079D94;
    }
    result = _unlock(6);
  }
  return result;
}
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 3005480A: using guessed type _DWORD __cdecl _lock(_DWORD);
// 30079D94: using guessed type int dword_30079D94;

//----- (3005A32E) --------------------------------------------------------
int __cdecl sub_3005A32E(int a1, LCID Locale, LCTYPE LCType, int a4)
{
  char *v4; // edi
  size_t v5; // esi
  size_t v6; // eax
  int v7; // esi
  CHAR *v8; // eax
  char *v9; // eax
  WCHAR *v11; // edi
  char v12; // bl
  char Source[128]; // [esp+Ch] [ebp-84h] BYREF
  unsigned int v14; // [esp+8Ch] [ebp-4h]
  unsigned int retaddr; // [esp+94h] [ebp+4h]
  int v16; // [esp+98h] [ebp+8h]

  v14 = retaddr ^ dword_300705C0;
  if ( a1 == 1 )
  {
    v4 = Source;
    v16 = 0;
    v5 = __crtGetLocaleInfoA(Locale, LCType, Source, 128, 0);
    if ( !v5 )
    {
      if ( GetLastError() != 122 )
        return -1;
      v6 = __crtGetLocaleInfoA(Locale, LCType, 0, 0, 0);
      v7 = v6;
      if ( !v6 )
        return -1;
      v8 = (CHAR *)malloc(v6);
      v4 = v8;
      if ( !v8 )
        return -1;
      v16 = 1;
      v5 = __crtGetLocaleInfoA(Locale, LCType, v8, v7, 0);
      if ( !v5 )
        goto LABEL_9;
    }
    v9 = (char *)malloc(v5);
    *(_DWORD *)a4 = v9;
    if ( !v9 )
    {
      if ( !v16 )
        return -1;
LABEL_9:
      free(v4);
      return -1;
    }
    strncpy(v9, v4, v5);
    if ( v16 )
      free(v4);
  }
  else
  {
    if ( a1 )
      return -1;
    v11 = &LCData;
    if ( !__crtGetLocaleInfoW(Locale, LCType, &LCData, 4, 0) )
      return -1;
    *(_BYTE *)a4 = 0;
    do
    {
      v12 = *(_BYTE *)v11;
      if ( !isdigit(*(unsigned __int8 *)v11) )
        break;
      ++v11;
      *(_BYTE *)a4 = v12 + 10 * *(_BYTE *)a4 - 48;
    }
    while ( (int)v11 < (int)&dword_30079DA0 );
  }
  return 0;
}
// 300705C0: using guessed type int dword_300705C0;
// 30079DA0: using guessed type int dword_30079DA0;

//----- (3005A864) --------------------------------------------------------
__int16 __cdecl sub_3005A864(char *a1, int a2, int a3)
{
  int v4; // eax
  unsigned int v5; // ecx
  unsigned __int64 v6; // kr08_8
  int v7; // eax
  __int16 result; // ax
  int v9; // [esp+Ch] [ebp-14h] BYREF
  int v10; // [esp+10h] [ebp-10h]
  int v11; // [esp+14h] [ebp-Ch]
  int v12; // [esp+18h] [ebp-8h]
  unsigned int v13; // [esp+1Ch] [ebp-4h]
  unsigned int retaddr; // [esp+24h] [ebp+4h]
  int v15; // [esp+30h] [ebp+10h]

  v13 = retaddr ^ dword_300705C0;
  v12 = 16462;
  *(_DWORD *)a3 = 0;
  *(_DWORD *)(a3 + 4) = 0;
  *(_DWORD *)(a3 + 8) = 0;
  if ( a2 )
  {
    v15 = a2;
    do
    {
      v9 = *(_DWORD *)a3;
      v10 = *(_DWORD *)(a3 + 4);
      v11 = *(_DWORD *)(a3 + 8);
      __shl_12(a3);
      __shl_12(a3);
      __add_12(a3, &v9);
      __shl_12(a3);
      v4 = *a1;
      v10 = 0;
      v11 = 0;
      v9 = v4;
      __add_12(a3, &v9);
      ++a1;
      --v15;
    }
    while ( v15 );
  }
  if ( !*(_DWORD *)(a3 + 8) )
  {
    do
    {
      v5 = *(_DWORD *)(a3 + 4);
      v12 += 65520;
      v6 = (unsigned __int64)v5 << 16;
      v7 = *(_DWORD *)a3 << 16;
      *(_DWORD *)(a3 + 4) = v6 | HIWORD(*(_DWORD *)a3);
      *(_DWORD *)a3 = v7;
    }
    while ( is_mul_ok(0x10000u, v5) );
    *(_DWORD *)(a3 + 8) = HIDWORD(v6);
  }
  while ( (*(_DWORD *)(a3 + 8) & 0x8000) == 0 )
  {
    __shl_12(a3);
    v12 += 0xFFFF;
  }
  result = v12;
  *(_WORD *)(a3 + 10) = v12;
  return result;
}
// 3005A7AB: using guessed type _DWORD __cdecl __add_12(_DWORD, _DWORD);
// 3005A809: using guessed type _DWORD __cdecl __shl_12(_DWORD);
// 300705C0: using guessed type int dword_300705C0;

//----- (3005A948) --------------------------------------------------------
int __cdecl sub_3005A948(int a1, int a2)
{
  __int16 v3; // cx
  __int16 v5; // ax
  __int16 v6; // di
  int v7; // ecx
  __int16 v8; // di
  int result; // eax
  int v10; // edi
  unsigned __int16 v11; // dx
  int v12; // ebx
  _BYTE v13[12]; // [esp+Ch] [ebp-28h] BYREF
  int v14; // [esp+18h] [ebp-1Ch]
  int v15; // [esp+1Ch] [ebp-18h]
  int v16; // [esp+20h] [ebp-14h]
  unsigned __int16 *v17; // [esp+24h] [ebp-10h]
  unsigned __int16 *v18; // [esp+28h] [ebp-Ch]
  _WORD *v19; // [esp+2Ch] [ebp-8h]
  unsigned int v20; // [esp+30h] [ebp-4h]
  unsigned int retaddr; // [esp+38h] [ebp+4h]
  int v22; // [esp+3Ch] [ebp+8h]
  int v23; // [esp+3Ch] [ebp+8h]
  int i; // [esp+40h] [ebp+Ch]

  v20 = retaddr ^ dword_300705C0;
  v3 = *(_WORD *)(a2 + 10);
  v15 = 0;
  *(_DWORD *)v13 = 0;
  *(_DWORD *)&v13[4] = 0;
  *(_DWORD *)&v13[8] = 0;
  v5 = *(_WORD *)(a1 + 10);
  v6 = v3;
  v7 = v3 & 0x7FFF;
  v8 = v5 ^ v6;
  result = v5 & 0x7FFF;
  v10 = v8 & 0x8000;
  v11 = v7 + result;
  v22 = v7 + result;
  if ( (unsigned __int16)result < 0x7FFFu && (unsigned __int16)v7 < 0x7FFFu && v11 <= 0xBFFDu )
  {
    if ( v11 <= 0x3FBFu )
    {
      result = 0;
LABEL_16:
      *(_DWORD *)(a1 + 8) = 0;
      *(_DWORD *)(a1 + 4) = 0;
      *(_DWORD *)a1 = 0;
      return result;
    }
    if ( (_WORD)result )
    {
      result = 0;
    }
    else
    {
      ++v22;
      result = 0;
      if ( (*(_DWORD *)(a1 + 8) & 0x7FFFFFFF) == 0 && !*(_DWORD *)(a1 + 4) && !*(_DWORD *)a1 )
        goto LABEL_45;
    }
    if ( !(_WORD)v7 )
    {
      ++v22;
      if ( (*(_DWORD *)(a2 + 8) & 0x7FFFFFFF) == 0 && !*(_DWORD *)(a2 + 4) && !*(_DWORD *)a2 )
        goto LABEL_16;
    }
    v16 = 0;
    v19 = &v13[4];
    for ( i = 5; i > 0; --i )
    {
      v18 = (unsigned __int16 *)(a1 + 2 * v16);
      v17 = (unsigned __int16 *)(a2 + 8);
      v14 = i;
      do
      {
        if ( __addl(*((_DWORD *)v19 - 1), *v18 * *v17, v19 - 2) )
          ++*v19;
        ++v18;
        --v17;
        --v14;
      }
      while ( v14 );
      ++v19;
      ++v16;
    }
    v23 = v22 + 49154;
    if ( (__int16)v23 <= 0 )
      goto LABEL_49;
    do
    {
      if ( v13[11] < 0 )
        break;
      __shl_12(v13);
      v23 += 0xFFFF;
    }
    while ( (__int16)v23 > 0 );
    if ( (__int16)v23 <= 0 )
    {
LABEL_49:
      v23 += 0xFFFF;
      if ( (v23 & 0x8000u) != 0 )
      {
        v12 = (unsigned __int16)-(__int16)v23;
        v23 += v12;
        do
        {
          if ( (v13[0] & 1) != 0 )
            ++v15;
          __shr_12(v13);
          --v12;
        }
        while ( v12 );
        if ( v15 )
          v13[0] |= 1u;
      }
    }
    if ( *(_WORD *)v13 > 0x8000u || (*(_DWORD *)v13 & 0x1FFFF) == 98304 )
    {
      if ( *(_DWORD *)&v13[2] == -1 )
      {
        *(_DWORD *)&v13[2] = 0;
        if ( *(_DWORD *)&v13[6] == -1 )
        {
          *(_DWORD *)&v13[6] = 0;
          if ( *(_WORD *)&v13[10] == 0xFFFF )
          {
            ++v23;
            *(_WORD *)&v13[10] = 0x8000;
          }
          else
          {
            ++*(_WORD *)&v13[10];
          }
        }
        else
        {
          ++*(_DWORD *)&v13[6];
        }
      }
      else
      {
        ++*(_DWORD *)&v13[2];
      }
    }
    result = v23;
    if ( (unsigned __int16)v23 < 0x7FFFu )
    {
      *(_WORD *)a1 = *(_WORD *)&v13[2];
      *(_DWORD *)(a1 + 2) = *(_DWORD *)&v13[4];
      *(_DWORD *)(a1 + 6) = *(_DWORD *)&v13[8];
      result = v10 | v23;
LABEL_45:
      *(_WORD *)(a1 + 10) = result;
      return result;
    }
  }
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 8) = (_WORD)v10 != 0 ? -32768 : 2147450880;
  return result;
}
// 3005AA1E: conditional instruction was optimized away because of '%arg_4.4>=1'
// 3005A78A: using guessed type _DWORD __cdecl __addl(_DWORD, _DWORD, _DWORD);
// 3005A809: using guessed type _DWORD __cdecl __shl_12(_DWORD);
// 3005A837: using guessed type _DWORD __cdecl __shr_12(_DWORD);
// 300705C0: using guessed type int dword_300705C0;

//----- (3005AB80) --------------------------------------------------------
unsigned int __cdecl sub_3005AB80(_WORD *a1, int a2, int a3)
{
  unsigned int result; // eax
  char *v4; // ebx
  char v5; // al
  char *v6; // esi
  _DWORD *v7; // esi
  __int64 v8; // [esp+4h] [ebp-10h] BYREF
  int v9; // [esp+Ch] [ebp-8h]
  unsigned int v10; // [esp+10h] [ebp-4h]
  unsigned int retaddr; // [esp+18h] [ebp+4h]

  result = retaddr ^ dword_300705C0;
  v4 = (char *)&unk_30070D90 - 96;
  v10 = retaddr ^ dword_300705C0;
  if ( a2 )
  {
    if ( a2 < 0 )
    {
      a2 = -a2;
      v4 = (char *)&unk_30070EF0 - 96;
    }
    if ( !a3 )
    {
      result = (unsigned int)a1;
      *a1 = 0;
    }
    while ( a2 )
    {
      v5 = a2;
      a2 >>= 3;
      result = v5 & 7;
      v4 += 84;
      if ( result )
      {
        v6 = &v4[12 * result];
        if ( *(_WORD *)v6 >= 0x8000u )
        {
          LODWORD(v8) = *(_DWORD *)v6;
          v7 = v6 + 4;
          HIDWORD(v8) = *v7;
          v9 = v7[1];
          --*(_DWORD *)((char *)&v8 + 2);
          v6 = (char *)&v8;
        }
        result = sub_3005A948((int)a1, (int)v6);
      }
    }
  }
  return result;
}
// 300705C0: using guessed type int dword_300705C0;

//----- (3005AD3D) --------------------------------------------------------
_DWORD *__cdecl sub_3005AD3D(char a1, int a2, int a3, char *Destination)
{
  int v4; // eax
  _DWORD *v5; // esi
  char *v6; // edi
  __int16 v8; // [esp+8h] [ebp-2Ch] BYREF
  char v9; // [esp+Ah] [ebp-2Ah]
  char Source[24]; // [esp+Ch] [ebp-28h] BYREF
  __int64 v11; // [esp+24h] [ebp-10h] BYREF
  __int16 v12; // [esp+2Ch] [ebp-8h]
  unsigned int v13; // [esp+30h] [ebp-4h]
  unsigned int retaddr; // [esp+38h] [ebp+4h]

  v13 = retaddr ^ dword_300705C0;
  __dtold(&v11, &a1);
  v4 = sub_3005BB11(v11, v12, 17, 0, (int)&v8);
  v5 = (_DWORD *)a3;
  v6 = Destination;
  *(_DWORD *)(a3 + 8) = v4;
  *v5 = v9;
  v5[1] = v8;
  strcpy(v6, Source);
  v5[3] = v6;
  return v5;
}
// 3005AC83: using guessed type _DWORD __cdecl __dtold(_DWORD, _DWORD);
// 300705C0: using guessed type int dword_300705C0;

//----- (3005B831) --------------------------------------------------------
int sub_3005B831()
{
  return _unlock(7);
}
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);

//----- (3005BB11) --------------------------------------------------------
int __cdecl sub_3005BB11(__int64 a1, __int16 a2, int a3, char a4, int a5)
{
  unsigned __int16 v5; // dx
  int v6; // esi
  int v7; // edi
  int v8; // esi
  int v9; // esi
  _BYTE *v10; // eax
  char v11; // al
  _BYTE *v12; // ecx
  bool v13; // zf
  char *v14; // eax
  char v15; // cl
  char *v16; // eax
  bool v17; // cc
  char *v18; // ecx
  char v19; // al
  __int64 v21; // [esp+Ch] [ebp-30h] BYREF
  int v22; // [esp+14h] [ebp-28h]
  char v23[12]; // [esp+18h] [ebp-24h] BYREF
  _BYTE v24[12]; // [esp+24h] [ebp-18h] BYREF
  int v25; // [esp+30h] [ebp-Ch]
  int v26; // [esp+34h] [ebp-8h]
  unsigned int v27; // [esp+38h] [ebp-4h]
  unsigned int retaddr; // [esp+40h] [ebp+4h]
  int v29; // [esp+4Ch] [ebp+10h]
  _BYTE *v30; // [esp+4Ch] [ebp+10h]

  v27 = retaddr ^ dword_300705C0;
  v23[0] = -52;
  v23[1] = -52;
  v23[2] = -52;
  v23[3] = -52;
  v23[4] = -52;
  v23[5] = -52;
  v23[6] = -52;
  v23[7] = -52;
  v23[8] = -52;
  v23[9] = -52;
  v23[10] = -5;
  v23[11] = 63;
  v26 = 1;
  v5 = a2 & 0x7FFF;
  if ( a2 >= 0 )
    *(_BYTE *)(a5 + 2) = 32;
  else
    *(_BYTE *)(a5 + 2) = 45;
  if ( v5 || a1 )
  {
    if ( v5 == 0x7FFF )
    {
      *(_WORD *)a5 = 1;
      if ( a1 != 0x8000000000000000ui64 && (a1 & 0x4000000000000000i64) == 0 )
      {
        strcpy((char *)(a5 + 4), "1#SNAN");
LABEL_19:
        *(_BYTE *)(a5 + 3) = 6;
        return 0;
      }
      if ( (a2 & 0x8000) != 0 && HIDWORD(a1) == -1073741824 )
      {
        if ( !(_DWORD)a1 )
        {
          strcpy((char *)(a5 + 4), "1#IND");
LABEL_16:
          *(_BYTE *)(a5 + 3) = 5;
          return 0;
        }
      }
      else if ( a1 == 0x8000000000000000ui64 )
      {
        strcpy((char *)(a5 + 4), "1#INF");
        goto LABEL_16;
      }
      strcpy((char *)(a5 + 4), "1#QNAN");
      goto LABEL_19;
    }
    *(_WORD *)v24 = 0;
    *(_QWORD *)&v24[2] = a1;
    v6 = (77 * (HIBYTE(v5) + 2 * HIBYTE(HIDWORD(a1))) + 19728 * v5 - 323162868) >> 16;
    *(_WORD *)&v24[10] = a2 & 0x7FFF;
    sub_3005AB80(v24, -(__int16)v6, 1);
    if ( *(_WORD *)&v24[10] >= 0x3FFFu )
    {
      LOWORD(v6) = v6 + 1;
      sub_3005A948((int)v24, (int)v23);
    }
    v7 = a3;
    *(_WORD *)a5 = v6;
    if ( (a4 & 1) == 0 || (v7 = (__int16)v6 + a3, v7 > 0) )
    {
      if ( v7 > 21 )
        v7 = 21;
      v8 = *(unsigned __int16 *)&v24[10] - 16382;
      *(_WORD *)&v24[10] = 0;
      v29 = 8;
      do
      {
        __shl_12(v24);
        --v29;
      }
      while ( v29 );
      if ( v8 < 0 )
      {
        v9 = (unsigned __int8)-(char)v8;
        if ( v9 > 0 )
        {
          do
          {
            __shr_12(v24);
            --v9;
          }
          while ( v9 );
        }
      }
      v10 = (_BYTE *)(a5 + 4);
      v30 = (_BYTE *)(a5 + 4);
      if ( v7 + 1 > 0 )
      {
        v25 = v7 + 1;
        do
        {
          v21 = *(_QWORD *)v24;
          v22 = *(_DWORD *)&v24[8];
          __shl_12(v24);
          __shl_12(v24);
          __add_12(v24, &v21);
          __shl_12(v24);
          v11 = v24[11];
          v12 = v30;
          v24[11] = 0;
          ++v30;
          v13 = v25-- == 1;
          *v12 = v11 + 48;
        }
        while ( !v13 );
        v10 = v30;
      }
      v14 = v10 - 1;
      v15 = *v14;
      v16 = v14 - 1;
      v17 = v15 < 53;
      v18 = (char *)(a5 + 4);
      if ( v17 )
      {
        while ( v16 >= v18 && *v16 == 48 )
          --v16;
        if ( v16 < v18 )
        {
          *v18 = 48;
          goto LABEL_51;
        }
      }
      else
      {
        while ( v16 >= v18 && *v16 == 57 )
          *v16-- = 48;
        if ( v16 < v18 )
        {
          ++v16;
          ++*(_WORD *)a5;
        }
        ++*v16;
      }
      v19 = (_BYTE)v16 - a5 - 3;
      *(_BYTE *)(a5 + 3) = v19;
      *(_BYTE *)(v19 + a5 + 4) = 0;
      return v26;
    }
  }
  *(_BYTE *)(a5 + 4) = 48;
LABEL_51:
  *(_WORD *)a5 = 0;
  *(_BYTE *)(a5 + 5) = 0;
  *(_BYTE *)(a5 + 2) = 32;
  *(_BYTE *)(a5 + 3) = 1;
  return 1;
}
// 3005A7AB: using guessed type _DWORD __cdecl __add_12(_DWORD, _DWORD);
// 3005A809: using guessed type _DWORD __cdecl __shl_12(_DWORD);
// 3005A837: using guessed type _DWORD __cdecl __shr_12(_DWORD);
// 300705C0: using guessed type int dword_300705C0;

//----- (3005C014) --------------------------------------------------------
int sub_3005C014()
{
  return _unlock(0);
}
// 3005475E: using guessed type _DWORD __cdecl _unlock(_DWORD);

//----- (3005C3B4) --------------------------------------------------------
int __cdecl sub_3005C3B4(LCID Locale, DWORD dwCmpFlags, LPCCH lpMultiByteStr, int cbMultiByte, LPCCH lpString2, int cchCount2, UINT CodePage)
{
  void *v7; // edi
  int v8; // esi
  int v9; // eax
  BYTE *v11; // eax
  unsigned __int8 v12; // dl
  BYTE *v13; // eax
  unsigned __int8 v14; // dl
  int v15; // ebx
  void *v16; // esp
  WCHAR *v17; // eax
  int v18; // esi
  void *v19; // esp
  WCHAR *v20; // edi
  UINT v21; // ebx
  UINT v22; // eax
  UINT v23; // esi
  _BYTE v24[12]; // [esp+0h] [ebp-5Ch] BYREF
  void *Block; // [esp+Ch] [ebp-50h]
  _BYTE *v26; // [esp+10h] [ebp-4Ch]
  int v27; // [esp+14h] [ebp-48h]
  LPWSTR lpWideCharStr; // [esp+18h] [ebp-44h]
  int v29; // [esp+1Ch] [ebp-40h]
  struct _cpinfo CPInfo; // [esp+20h] [ebp-3Ch] BYREF
  int v31; // [esp+34h] [ebp-28h]
  int v32; // [esp+38h] [ebp-24h]
  int v33; // [esp+3Ch] [ebp-20h]
  unsigned int v34; // [esp+40h] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+44h] [ebp-18h]
  unsigned int retaddr; // [esp+60h] [ebp+4h]

  v34 = retaddr ^ dword_300705C0;
  v7 = 0;
  v8 = 1;
  if ( !dword_30079DBC )
  {
    if ( CompareStringW(0, 0, &String2, 1, &String2, 1) )
    {
      dword_30079DBC = 1;
    }
    else if ( GetLastError() == 120 )
    {
      dword_30079DBC = 2;
    }
  }
  if ( cbMultiByte > 0 )
    cbMultiByte = strncnt_0(cbMultiByte);
  v9 = cchCount2;
  if ( cchCount2 > 0 )
  {
    v9 = strncnt_0(cchCount2);
    cchCount2 = v9;
  }
  if ( dword_30079DBC == 2 || !dword_30079DBC )
  {
    Block = 0;
    if ( !Locale )
      Locale = dword_30079C7C;
    v21 = CodePage;
    if ( !CodePage )
      v21 = dword_30079C8C;
    v22 = sub_30055EA1(Locale);
    v23 = v22;
    if ( v22 == -1 )
      return 0;
    if ( v22 != v21 )
    {
      v7 = sub_30055EEA(v21, v22, (char *)lpMultiByteStr, (int)&cbMultiByte, 0, 0);
      if ( !v7 )
        return 0;
      Block = sub_30055EEA(v21, v23, (char *)lpString2, (int)&cchCount2, 0, 0);
      if ( !Block )
      {
        free(v7);
        return 0;
      }
      lpMultiByteStr = (LPCCH)v7;
      lpString2 = (LPCCH)Block;
    }
    v8 = CompareStringA(Locale, dwCmpFlags, lpMultiByteStr, cbMultiByte, lpString2, cchCount2);
    if ( v7 )
    {
      free(v7);
      free(Block);
    }
    return v8;
  }
  if ( dword_30079DBC != 1 )
    return 0;
  v33 = 0;
  v32 = 0;
  v31 = 0;
  if ( !CodePage )
    CodePage = dword_30079C8C;
  if ( !cbMultiByte || !v9 )
  {
    if ( cbMultiByte == v9 )
      return 2;
    if ( v9 > 1 )
      return v8;
    if ( cbMultiByte > 1 )
      return 3;
    if ( !GetCPInfo(CodePage, &CPInfo) )
      return 0;
    if ( cbMultiByte > 0 )
    {
      if ( CPInfo.MaxCharSize >= 2 )
      {
        v11 = CPInfo.LeadByte;
        if ( CPInfo.LeadByte[0] )
        {
          while ( 1 )
          {
            v12 = v11[1];
            if ( !v12 )
              break;
            if ( (unsigned int)*lpMultiByteStr >= *v11 && (unsigned int)*lpMultiByteStr <= v12 )
              return 2;
            v11 += 2;
            if ( !*v11 )
              return 3;
          }
        }
      }
      return 3;
    }
    if ( cchCount2 > 0 )
    {
      if ( CPInfo.MaxCharSize >= 2 )
      {
        v13 = CPInfo.LeadByte;
        if ( CPInfo.LeadByte[0] )
        {
          while ( 1 )
          {
            v14 = v13[1];
            if ( !v14 )
              break;
            if ( (unsigned int)*lpString2 >= *v13 && (unsigned int)*lpString2 <= v14 )
              return 2;
            v13 += 2;
            if ( !*v13 )
              return v8;
          }
        }
      }
      return v8;
    }
  }
  v15 = MultiByteToWideChar(CodePage, 9u, lpMultiByteStr, cbMultiByte, 0, 0);
  v29 = v15;
  if ( !v15 )
    return 0;
  v16 = alloca(2 * v15);
  ms_exc.old_esp = (DWORD)v24;
  lpWideCharStr = (LPWSTR)v24;
  ms_exc.registration.TryLevel = -1;
  v17 = (WCHAR *)v24;
  if ( !v24 )
  {
    v17 = (WCHAR *)malloc(2 * v15);
    lpWideCharStr = v17;
    if ( v17 )
    {
      v33 = 1;
      goto LABEL_43;
    }
    return 0;
  }
LABEL_43:
  if ( MultiByteToWideChar(CodePage, 1u, lpMultiByteStr, cbMultiByte, v17, v15) )
  {
    v18 = MultiByteToWideChar(CodePage, 9u, lpString2, cchCount2, 0, 0);
    v27 = v18;
    if ( v18 )
    {
      v19 = alloca(2 * v18);
      ms_exc.old_esp = (DWORD)v24;
      v20 = (WCHAR *)v24;
      v26 = v24;
      ms_exc.registration.TryLevel = -1;
      if ( v24 )
      {
LABEL_48:
        if ( MultiByteToWideChar(CodePage, 1u, lpString2, cchCount2, v20, v18) )
          v31 = CompareStringW(Locale, dwCmpFlags, lpWideCharStr, v15, v20, v18);
        if ( v32 )
          free(v20);
        goto LABEL_52;
      }
      v20 = (WCHAR *)malloc(2 * v18);
      if ( v20 )
      {
        v32 = 1;
        goto LABEL_48;
      }
    }
  }
LABEL_52:
  if ( v33 )
    free(lpWideCharStr);
  return v31;
}
// 3005C398: using guessed type _DWORD __cdecl strncnt_0(_DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30079DBC: using guessed type int dword_30079DBC;

//----- (3005D00A) --------------------------------------------------------
int __thiscall sub_3005D00A(void *this)
{
  return _cintrindisp2(this, &unk_300797A0);
}
// 3005E5F0: using guessed type int __fastcall _cintrindisp2(_DWORD, _DWORD);

//----- (3005F5FB) --------------------------------------------------------
errno_t __cdecl sub_3005F5FB(int a1, int a2, unsigned __int16 *a3)
{
  int v3; // ecx
  bool v4; // zf
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  DWORD v11; // ebx
  errno_t result; // eax
  int v13; // [esp-4h] [ebp-94h]
  int v14; // [esp+Ch] [ebp-84h] BYREF
  ULONG_PTR Arguments[12]; // [esp+10h] [ebp-80h] BYREF
  double v16; // [esp+40h] [ebp-50h]
  unsigned int v17; // [esp+50h] [ebp-40h]
  unsigned int v18; // [esp+8Ch] [ebp-4h]
  unsigned int retaddr; // [esp+94h] [ebp+4h]

  v18 = retaddr ^ dword_300705C0;
  v3 = *a3;
  v5 = *(_DWORD *)a2 - 1;
  v4 = *(_DWORD *)a2 == 1;
  v14 = v3;
  if ( v4 )
    goto LABEL_13;
  v6 = v5 - 1;
  if ( !v6 )
  {
    v13 = 4;
    goto LABEL_14;
  }
  v7 = v6 - 1;
  if ( !v7 )
  {
    v13 = 17;
    goto LABEL_14;
  }
  v8 = v7 - 1;
  if ( !v8 )
  {
    v13 = 18;
    goto LABEL_14;
  }
  v9 = v8 - 1;
  if ( !v9 )
  {
LABEL_13:
    v13 = 8;
LABEL_14:
    v11 = v13;
    if ( !_handle_exc(v13, a2 + 24, v3) )
    {
      if ( a1 == 16 || a1 == 22 || a1 == 29 )
      {
        v16 = *(double *)(a2 + 16);
        v17 = v17 & 0xFFFFFFE3 | 3;
      }
      else
      {
        v17 &= 0xFFFFFFFE;
      }
      _raise_exc((ULONG_PTR)Arguments, (int)&v14, v11, a1, a2 + 8, a2 + 24);
    }
    goto LABEL_21;
  }
  v10 = v9 - 2;
  if ( !v10 )
  {
    *(_DWORD *)a2 = 1;
    goto LABEL_21;
  }
  if ( v10 == 1 )
  {
    v13 = 16;
    goto LABEL_14;
  }
LABEL_21:
  _ctrlfp(v14, 0xFFFF);
  if ( *(_DWORD *)a2 == 8 || dword_30070AF8 || (result = sub_300580BF()) == 0 )
    result = _set_errno(*(_DWORD *)a2);
  return result;
}
// 3005744F: using guessed type _DWORD __cdecl _handle_exc(_DWORD, _DWORD, _DWORD);
// 30058042: using guessed type _DWORD __cdecl _ctrlfp(_DWORD, _DWORD);
// 300705C0: using guessed type int dword_300705C0;
// 30070AF8: using guessed type int dword_30070AF8;

// nfuncs=1329 queued=949 decompiled=949 lumina nreq=0 worse=0 better=0
// ALL OK, 949 function(s) have been successfully decompiled
